(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){window.$=window.jQuery=require("./rex-graphics/src/js/02-jquery.min.js");require("./lib/Require/jquery-ui.min.js");require("./lib/Require/jQuery/jquery-disabler.js");require("./lib/Require/Globalize/01-globalize.js");require("./lib/Require/Globalize/02-globalize.culture.cs.js");require("jquery-ui-touch-punch");require("svg.js");require("./lib/Require/svg.path.js");require("./rex-graphics/src/js/04-jquery.keyboard.min.js");require("./rex-graphics/src/js/05-rexutil.js");window.Dygraph=require("dygraphs");require("./lib/Require/Dygraph-synchronizer.js");window.Chart=require("chart.js");window.SlimSelect=require("slim-select");window.mdc=require("./rex-graphics/src/js/01-material-components-web.min.js");window.Tabulator=require("tabulator-tables");window.luxon=require("luxon")},{"./lib/Require/Dygraph-synchronizer.js":2,"./lib/Require/Globalize/01-globalize.js":3,"./lib/Require/Globalize/02-globalize.culture.cs.js":4,"./lib/Require/jQuery/jquery-disabler.js":5,"./lib/Require/jquery-ui.min.js":6,"./lib/Require/svg.path.js":7,"./rex-graphics/src/js/01-material-components-web.min.js":41,"./rex-graphics/src/js/02-jquery.min.js":42,"./rex-graphics/src/js/04-jquery.keyboard.min.js":43,"./rex-graphics/src/js/05-rexutil.js":44,"chart.js":8,dygraphs:9,"jquery-ui-touch-punch":34,luxon:35,"slim-select":38,"svg.js":39,"tabulator-tables":40}],2:[function(require,module,exports){(function(){"use strict";var Dygraph=window.Dygraph;var synchronize=function(){if(arguments.length===0){throw"Invalid invocation of Dygraph.synchronize(). Need >= 1 argument."}var OPTIONS=["selection","zoom","range"];var opts={selection:true,zoom:true,range:true};var dygraphs=[];var prevCallbacks=[];var parseOpts=function(obj){if(!(obj instanceof Object)){throw"Last argument must be either Dygraph or Object."}else{for(var i=0;i<OPTIONS.length;i++){var optName=OPTIONS[i];if(obj.hasOwnProperty(optName))opts[optName]=obj[optName]}}};if(arguments[0]instanceof Dygraph){for(var i=0;i<arguments.length;i++){if(arguments[i]instanceof Dygraph){dygraphs.push(arguments[i])}else{break}}if(i<arguments.length-1){throw"Invalid invocation of Dygraph.synchronize(). "+"All but the last argument must be Dygraph objects."}else if(i==arguments.length-1){parseOpts(arguments[arguments.length-1])}}else if(arguments[0].length){for(var i=0;i<arguments[0].length;i++){dygraphs.push(arguments[0][i])}if(arguments.length==2){parseOpts(arguments[1])}else if(arguments.length>2){throw"Invalid invocation of Dygraph.synchronize(). "+"Expected two arguments: array and optional options argument."}}else{throw"Invalid invocation of Dygraph.synchronize(). "+"First parameter must be either Dygraph or list of Dygraphs."}if(dygraphs.length<2){throw"Invalid invocation of Dygraph.synchronize(). "+"Need two or more dygraphs to synchronize."}var readycount=dygraphs.length;for(var i=0;i<dygraphs.length;i++){var g=dygraphs[i];g.ready(function(){if(--readycount==0){var callBackTypes=["drawCallback","highlightCallback","unhighlightCallback"];for(var j=0;j<dygraphs.length;j++){if(!prevCallbacks[j]){prevCallbacks[j]={}}for(var k=callBackTypes.length-1;k>=0;k--){prevCallbacks[j][callBackTypes[k]]=dygraphs[j].getFunctionOption(callBackTypes[k])}}if(opts.zoom){attachZoomHandlers(dygraphs,opts,prevCallbacks)}if(opts.selection){attachSelectionHandlers(dygraphs,prevCallbacks)}}})}return{detach:function(){for(var i=0;i<dygraphs.length;i++){var g=dygraphs[i];if(opts.zoom){g.updateOptions({drawCallback:prevCallbacks[i].drawCallback})}if(opts.selection){g.updateOptions({highlightCallback:prevCallbacks[i].highlightCallback,unhighlightCallback:prevCallbacks[i].unhighlightCallback})}}dygraphs=null;opts=null;prevCallbacks=null}}};function arraysAreEqual(a,b){if(!Array.isArray(a)||!Array.isArray(b))return false;var i=a.length;if(i!==b.length)return false;while(i--){if(a[i]!==b[i])return false}return true}function attachZoomHandlers(gs,syncOpts,prevCallbacks){var block=false;for(var i=0;i<gs.length;i++){var g=gs[i];g.updateOptions({drawCallback:function(me,initial){if(block||initial)return;block=true;var opts={dateWindow:me.xAxisRange()};if(syncOpts.range)opts.valueRange=me.yAxisRange();for(var j=0;j<gs.length;j++){if(gs[j]==me){if(prevCallbacks[j]&&prevCallbacks[j].drawCallback){prevCallbacks[j].drawCallback.apply(this,arguments)}continue}if(arraysAreEqual(opts.dateWindow,gs[j].getOption("dateWindow"))&&arraysAreEqual(opts.valueRange,gs[j].getOption("valueRange"))){continue}gs[j].updateOptions(opts)}block=false}},true)}}function attachSelectionHandlers(gs,prevCallbacks){var block=false;for(var i=0;i<gs.length;i++){var g=gs[i];g.updateOptions({highlightCallback:function(event,x,points,row,seriesName){if(block)return;block=true;var me=this;for(var i=0;i<gs.length;i++){if(me==gs[i]){if(prevCallbacks[i]&&prevCallbacks[i].highlightCallback){prevCallbacks[i].highlightCallback.apply(this,arguments)}continue}var idx=gs[i].getRowForX(x);if(idx!==null){gs[i].setSelection(idx,seriesName)}}block=false},unhighlightCallback:function(event){if(block)return;block=true;var me=this;for(var i=0;i<gs.length;i++){if(me==gs[i]){if(prevCallbacks[i]&&prevCallbacks[i].unhighlightCallback){prevCallbacks[i].unhighlightCallback.apply(this,arguments)}continue}gs[i].clearSelection()}block=false}},true)}}Dygraph.synchronize=synchronize})()},{}],3:[function(require,module,exports){(function(window,undefined){var Globalize,regexHex,regexInfinity,regexParseFloat,regexTrim,arrayIndexOf,endsWith,extend,isArray,isFunction,isObject,startsWith,trim,truncate,zeroPad,appendPreOrPostMatch,expandFormat,formatDate,formatNumber,getTokenRegExp,getEra,getEraYear,parseExact,parseNegativePattern;Globalize=function(cultureSelector){return new Globalize.prototype.init(cultureSelector)};window.Globalize=Globalize;Globalize.cultures={};Globalize.prototype={constructor:Globalize,init:function(cultureSelector){this.cultures=Globalize.cultures;this.cultureSelector=cultureSelector;return this}};Globalize.prototype.init.prototype=Globalize.prototype;Globalize.cultures["default"]={name:"en",englishName:"English",nativeName:"English",isRTL:false,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}};Globalize.cultures["default"].calendar=Globalize.cultures["default"].calendars.standard;Globalize.cultures.en=Globalize.cultures["default"];Globalize.cultureSelector="en";regexHex=/^0x[a-f0-9]+$/i;regexInfinity=/^[+\-]?infinity$/i;regexParseFloat=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/;regexTrim=/^\s+|\s+$/g;arrayIndexOf=function(array,item){if(array.indexOf){return array.indexOf(item)}for(var i=0,length=array.length;i<length;i++){if(array[i]===item){return i}}return-1};endsWith=function(value,pattern){return value.substr(value.length-pattern.length)===pattern};extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[1]||{};i=2}if(typeof target!=="object"&&!isFunction(target)){target={}}for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue}if(deep&&copy&&(isObject(copy)||(copyIsArray=isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&isArray(src)?src:[]}else{clone=src&&isObject(src)?src:{}}target[name]=extend(deep,clone,copy)}else if(copy!==undefined){target[name]=copy}}}}return target};isArray=Array.isArray||function(obj){return Object.prototype.toString.call(obj)==="[object Array]"};isFunction=function(obj){return Object.prototype.toString.call(obj)==="[object Function]"};isObject=function(obj){return Object.prototype.toString.call(obj)==="[object Object]"};startsWith=function(value,pattern){return value.indexOf(pattern)===0};trim=function(value){return(value+"").replace(regexTrim,"")};truncate=function(value){if(isNaN(value)){return NaN}return Math[value<0?"ceil":"floor"](value)};zeroPad=function(str,count,left){var l;for(l=str.length;l<count;l+=1){str=left?"0"+str:str+"0"}return str};appendPreOrPostMatch=function(preMatch,strings){var quoteCount=0,escaped=false;for(var i=0,il=preMatch.length;i<il;i++){var c=preMatch.charAt(i);switch(c){case"'":if(escaped){strings.push("'")}else{quoteCount++}escaped=false;break;case"\\":if(escaped){strings.push("\\")}escaped=!escaped;break;default:strings.push(c);escaped=false;break}}return quoteCount};expandFormat=function(cal,format){format=format||"F";var pattern,patterns=cal.patterns,len=format.length;if(len===1){pattern=patterns[format];if(!pattern){throw"Invalid date format string '"+format+"'."}format=pattern}else if(len===2&&format.charAt(0)==="%"){format=format.charAt(1)}return format};formatDate=function(value,format,culture){var cal=culture.calendar,convert=cal.convert,ret;if(!format||!format.length||format==="i"){if(culture&&culture.name.length){if(convert){ret=formatDate(value,cal.patterns.F,culture)}else{var eraDate=new Date(value.getTime()),era=getEra(value,cal.eras);eraDate.setFullYear(getEraYear(value,cal,era));ret=eraDate.toLocaleString()}}else{ret=value.toString()}return ret}var eras=cal.eras,sortable=format==="s";format=expandFormat(cal,format);ret=[];var hour,zeros=["0","00","000"],foundDay,checkedDay,dayPartRegExp=/([^d]|^)(d|dd)([^d]|$)/g,quoteCount=0,tokenRegExp=getTokenRegExp(),converted;function padZeros(num,c){var r,s=num+"";if(c>1&&s.length<c){r=zeros[c-2]+s;return r.substr(r.length-c,c)}else{r=s}return r}function hasDay(){if(foundDay||checkedDay){return foundDay}foundDay=dayPartRegExp.test(format);checkedDay=true;return foundDay}function getPart(date,part){if(converted){return converted[part]}switch(part){case 0:return date.getFullYear();case 1:return date.getMonth();case 2:return date.getDate();default:throw"Invalid part value "+part}}if(!sortable&&convert){converted=convert.fromGregorian(value)}for(;;){var index=tokenRegExp.lastIndex,ar=tokenRegExp.exec(format);var preMatch=format.slice(index,ar?ar.index:format.length);quoteCount+=appendPreOrPostMatch(preMatch,ret);if(!ar){break}if(quoteCount%2){ret.push(ar[0]);continue}var current=ar[0],clength=current.length;switch(current){case"ddd":case"dddd":var names=clength===3?cal.days.namesAbbr:cal.days.names;ret.push(names[value.getDay()]);break;case"d":case"dd":foundDay=true;ret.push(padZeros(getPart(value,2),clength));break;case"MMM":case"MMMM":var part=getPart(value,1);ret.push(cal.monthsGenitive&&hasDay()?cal.monthsGenitive[clength===3?"namesAbbr":"names"][part]:cal.months[clength===3?"namesAbbr":"names"][part]);break;case"M":case"MM":ret.push(padZeros(getPart(value,1)+1,clength));break;case"y":case"yy":case"yyyy":part=converted?converted[0]:getEraYear(value,cal,getEra(value,eras),sortable);if(clength<4){part=part%100}ret.push(padZeros(part,clength));break;case"h":case"hh":hour=value.getHours()%12;if(hour===0)hour=12;ret.push(padZeros(hour,clength));break;case"H":case"HH":ret.push(padZeros(value.getHours(),clength));break;case"m":case"mm":ret.push(padZeros(value.getMinutes(),clength));break;case"s":case"ss":ret.push(padZeros(value.getSeconds(),clength));break;case"t":case"tt":part=value.getHours()<12?cal.AM?cal.AM[0]:" ":cal.PM?cal.PM[0]:" ";ret.push(clength===1?part.charAt(0):part);break;case"f":case"ff":case"fff":ret.push(padZeros(value.getMilliseconds(),3).substr(0,clength));break;case"z":case"zz":hour=value.getTimezoneOffset()/60;ret.push((hour<=0?"+":"-")+padZeros(Math.floor(Math.abs(hour)),clength));break;case"zzz":hour=value.getTimezoneOffset()/60;ret.push((hour<=0?"+":"-")+padZeros(Math.floor(Math.abs(hour)),2)+":"+padZeros(Math.abs(value.getTimezoneOffset()%60),2));break;case"g":case"gg":if(cal.eras){ret.push(cal.eras[getEra(value,eras)].name)}break;case"/":ret.push(cal["/"]);break;default:throw"Invalid date format pattern '"+current+"'."}}return ret.join("")};(function(){var expandNumber;expandNumber=function(number,precision,formatInfo){var groupSizes=formatInfo.groupSizes,curSize=groupSizes[0],curGroupIndex=1,factor=Math.pow(10,precision),rounded=Math.round(number*factor)/factor;if(!isFinite(rounded)){rounded=number}number=rounded;var numberString=number+"",right="",split=numberString.split(/e/i),exponent=split.length>1?parseInt(split[1],10):0;numberString=split[0];split=numberString.split(".");numberString=split[0];right=split.length>1?split[1]:"";if(exponent>0){right=zeroPad(right,exponent,false);numberString+=right.slice(0,exponent);right=right.substr(exponent)}else if(exponent<0){exponent=-exponent;numberString=zeroPad(numberString,exponent+1,true);right=numberString.slice(-exponent,numberString.length)+right;numberString=numberString.slice(0,-exponent)}if(precision>0){right=formatInfo["."]+(right.length>precision?right.slice(0,precision):zeroPad(right,precision))}else{right=""}var stringIndex=numberString.length-1,sep=formatInfo[","],ret="";while(stringIndex>=0){if(curSize===0||curSize>stringIndex){return numberString.slice(0,stringIndex+1)+(ret.length?sep+ret+right:right)}ret=numberString.slice(stringIndex-curSize+1,stringIndex+1)+(ret.length?sep+ret:"");stringIndex-=curSize;if(curGroupIndex<groupSizes.length){curSize=groupSizes[curGroupIndex];curGroupIndex++}}return numberString.slice(0,stringIndex+1)+sep+ret+right};formatNumber=function(value,format,culture){if(!isFinite(value)){if(value===Infinity){return culture.numberFormat.positiveInfinity}if(value===-Infinity){return culture.numberFormat.negativeInfinity}return culture.numberFormat.NaN}if(!format||format==="i"){return culture.name.length?value.toLocaleString():value.toString()}format=format||"D";var nf=culture.numberFormat,number=Math.abs(value),precision=-1,pattern;if(format.length>1)precision=parseInt(format.slice(1),10);var current=format.charAt(0).toUpperCase(),formatInfo;switch(current){case"D":pattern="n";number=truncate(number);if(precision!==-1){number=zeroPad(""+number,precision,true)}if(value<0)number="-"+number;break;case"N":formatInfo=nf;case"C":formatInfo=formatInfo||nf.currency;case"P":formatInfo=formatInfo||nf.percent;pattern=value<0?formatInfo.pattern[0]:formatInfo.pattern[1]||"n";if(precision===-1)precision=formatInfo.decimals;number=expandNumber(number*(current==="P"?100:1),precision,formatInfo);break;default:throw"Bad number format specifier: "+current}var patternParts=/n|\$|-|%/g,ret="";for(;;){var index=patternParts.lastIndex,ar=patternParts.exec(pattern);ret+=pattern.slice(index,ar?ar.index:pattern.length);if(!ar){break}switch(ar[0]){case"n":ret+=number;break;case"$":ret+=nf.currency.symbol;break;case"-":if(/[1-9]/.test(number)){ret+=nf["-"]}break;case"%":ret+=nf.percent.symbol;break}}return ret}})();getTokenRegExp=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g};getEra=function(date,eras){if(!eras)return 0;var start,ticks=date.getTime();for(var i=0,l=eras.length;i<l;i++){start=eras[i].start;if(start===null||ticks>=start){return i}}return 0};getEraYear=function(date,cal,era,sortable){var year=date.getFullYear();if(!sortable&&cal.eras){year-=cal.eras[era].offset}return year};(function(){var expandYear,getDayIndex,getMonthIndex,getParseRegExp,outOfRange,toUpper,toUpperArray;expandYear=function(cal,year){if(year<100){var now=new Date,era=getEra(now),curr=getEraYear(now,cal,era),twoDigitYearMax=cal.twoDigitYearMax;twoDigitYearMax=typeof twoDigitYearMax==="string"?(new Date).getFullYear()%100+parseInt(twoDigitYearMax,10):twoDigitYearMax;year+=curr-curr%100;if(year>twoDigitYearMax){year-=100}}return year};getDayIndex=function(cal,value,abbr){var ret,days=cal.days,upperDays=cal._upperDays;if(!upperDays){cal._upperDays=upperDays=[toUpperArray(days.names),toUpperArray(days.namesAbbr),toUpperArray(days.namesShort)]}value=toUpper(value);if(abbr){ret=arrayIndexOf(upperDays[1],value);if(ret===-1){ret=arrayIndexOf(upperDays[2],value)}}else{ret=arrayIndexOf(upperDays[0],value)}return ret};getMonthIndex=function(cal,value,abbr){var months=cal.months,monthsGen=cal.monthsGenitive||cal.months,upperMonths=cal._upperMonths,upperMonthsGen=cal._upperMonthsGen;if(!upperMonths){cal._upperMonths=upperMonths=[toUpperArray(months.names),toUpperArray(months.namesAbbr)];cal._upperMonthsGen=upperMonthsGen=[toUpperArray(monthsGen.names),toUpperArray(monthsGen.namesAbbr)]}value=toUpper(value);var i=arrayIndexOf(abbr?upperMonths[1]:upperMonths[0],value);if(i<0){i=arrayIndexOf(abbr?upperMonthsGen[1]:upperMonthsGen[0],value)}return i};getParseRegExp=function(cal,format){var re=cal._parseRegExp;if(!re){cal._parseRegExp=re={}}else{var reFormat=re[format];if(reFormat){return reFormat}}var expFormat=expandFormat(cal,format).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),regexp=["^"],groups=[],index=0,quoteCount=0,tokenRegExp=getTokenRegExp(),match;while((match=tokenRegExp.exec(expFormat))!==null){var preMatch=expFormat.slice(index,match.index);index=tokenRegExp.lastIndex;quoteCount+=appendPreOrPostMatch(preMatch,regexp);if(quoteCount%2){regexp.push(match[0]);continue}var m=match[0],len=m.length,add;switch(m){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":add="(\\D+)";break;case"tt":case"t":add="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":add="(\\d{"+len+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":add="(\\d\\d?)";break;case"zzz":add="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":add="([+-]?\\d\\d?)";break;case"/":add="(\\/)";break;default:throw"Invalid date format pattern '"+m+"'."}if(add){regexp.push(add)}groups.push(match[0])}appendPreOrPostMatch(expFormat.slice(index),regexp);regexp.push("$");var regexpStr=regexp.join("").replace(/\s+/g,"\\s+"),parseRegExp={regExp:regexpStr,groups:groups};return re[format]=parseRegExp};outOfRange=function(value,low,high){return value<low||value>high};toUpper=function(value){return value.split(" ").join(" ").toUpperCase()};toUpperArray=function(arr){var results=[];for(var i=0,l=arr.length;i<l;i++){results[i]=toUpper(arr[i])}return results};parseExact=function(value,format,culture){value=trim(value);var cal=culture.calendar,parseInfo=getParseRegExp(cal,format),match=new RegExp(parseInfo.regExp).exec(value);if(match===null){return null}var groups=parseInfo.groups,era=null,year=null,month=null,date=null,weekDay=null,hour=0,hourOffset,min=0,sec=0,msec=0,tzMinOffset=null,pmHour=false;for(var j=0,jl=groups.length;j<jl;j++){var matchGroup=match[j+1];if(matchGroup){var current=groups[j],clength=current.length,matchInt=parseInt(matchGroup,10);switch(current){case"dd":case"d":date=matchInt;if(outOfRange(date,1,31))return null;break;case"MMM":case"MMMM":month=getMonthIndex(cal,matchGroup,clength===3);if(outOfRange(month,0,11))return null;break;case"M":case"MM":month=matchInt-1;if(outOfRange(month,0,11))return null;break;case"y":case"yy":case"yyyy":year=clength<4?expandYear(cal,matchInt):matchInt;if(outOfRange(year,0,9999))return null;break;case"h":case"hh":hour=matchInt;if(hour===12)hour=0;if(outOfRange(hour,0,11))return null;break;case"H":case"HH":hour=matchInt;if(outOfRange(hour,0,23))return null;break;case"m":case"mm":min=matchInt;if(outOfRange(min,0,59))return null;break;case"s":case"ss":sec=matchInt;if(outOfRange(sec,0,59))return null;break;case"tt":case"t":pmHour=cal.PM&&(matchGroup===cal.PM[0]||matchGroup===cal.PM[1]||matchGroup===cal.PM[2]);if(!pmHour&&(!cal.AM||matchGroup!==cal.AM[0]&&matchGroup!==cal.AM[1]&&matchGroup!==cal.AM[2]))return null;break;case"f":case"ff":case"fff":msec=matchInt*Math.pow(10,3-clength);if(outOfRange(msec,0,999))return null;break;case"ddd":case"dddd":weekDay=getDayIndex(cal,matchGroup,clength===3);if(outOfRange(weekDay,0,6))return null;break;case"zzz":var offsets=matchGroup.split(/:/);if(offsets.length!==2)return null;hourOffset=parseInt(offsets[0],10);if(outOfRange(hourOffset,-12,13))return null;var minOffset=parseInt(offsets[1],10);if(outOfRange(minOffset,0,59))return null;tzMinOffset=hourOffset*60+(startsWith(matchGroup,"-")?-minOffset:minOffset);break;case"z":case"zz":hourOffset=matchInt;if(outOfRange(hourOffset,-12,13))return null;tzMinOffset=hourOffset*60;break;case"g":case"gg":var eraName=matchGroup;if(!eraName||!cal.eras)return null;eraName=trim(eraName.toLowerCase());for(var i=0,l=cal.eras.length;i<l;i++){if(eraName===cal.eras[i].name.toLowerCase()){era=i;break}}if(era===null)return null;break}}}var result=new Date,defaultYear,convert=cal.convert;defaultYear=convert?convert.fromGregorian(result)[0]:result.getFullYear();if(year===null){year=defaultYear}else if(cal.eras){year+=cal.eras[era||0].offset}if(month===null){month=0}if(date===null){date=1}if(convert){result=convert.toGregorian(year,month,date);if(result===null)return null}else{result.setFullYear(year,month,date);if(result.getDate()!==date)return null;if(weekDay!==null&&result.getDay()!==weekDay){return null}}if(pmHour&&hour<12){hour+=12}result.setHours(hour,min,sec,msec);if(tzMinOffset!==null){var adjustedMin=result.getMinutes()-(tzMinOffset+result.getTimezoneOffset());result.setHours(result.getHours()+parseInt(adjustedMin/60,10),adjustedMin%60)}return result}})();parseNegativePattern=function(value,nf,negativePattern){var neg=nf["-"],pos=nf["+"],ret;switch(negativePattern){case"n -":neg=" "+neg;pos=" "+pos;case"n-":if(endsWith(value,neg)){ret=["-",value.substr(0,value.length-neg.length)]}else if(endsWith(value,pos)){ret=["+",value.substr(0,value.length-pos.length)]}break;case"- n":neg+=" ";pos+=" ";case"-n":if(startsWith(value,neg)){ret=["-",value.substr(neg.length)]}else if(startsWith(value,pos)){ret=["+",value.substr(pos.length)]}break;case"(n)":if(startsWith(value,"(")&&endsWith(value,")")){ret=["-",value.substr(1,value.length-2)]}break}return ret||["",value]};Globalize.prototype.findClosestCulture=function(cultureSelector){return Globalize.findClosestCulture.call(this,cultureSelector)};Globalize.prototype.format=function(value,format,cultureSelector){return Globalize.format.call(this,value,format,cultureSelector)};Globalize.prototype.localize=function(key,cultureSelector){return Globalize.localize.call(this,key,cultureSelector)};Globalize.prototype.parseInt=function(value,radix,cultureSelector){return Globalize.parseInt.call(this,value,radix,cultureSelector)};Globalize.prototype.parseFloat=function(value,radix,cultureSelector){return Globalize.parseFloat.call(this,value,radix,cultureSelector)};Globalize.prototype.culture=function(cultureSelector){return Globalize.culture.call(this,cultureSelector)};Globalize.addCultureInfo=function(cultureName,baseCultureName,info){var base={},isNew=false;if(typeof cultureName!=="string"){info=cultureName;cultureName=this.culture().name;base=this.cultures[cultureName]}else if(typeof baseCultureName!=="string"){info=baseCultureName;isNew=this.cultures[cultureName]==null;base=this.cultures[cultureName]||this.cultures["default"]}else{isNew=true;base=this.cultures[baseCultureName]}this.cultures[cultureName]=extend(true,{},base,info);if(isNew){this.cultures[cultureName].calendar=this.cultures[cultureName].calendars.standard}};Globalize.findClosestCulture=function(name){var match;if(!name){return this.findClosestCulture(this.cultureSelector)||this.cultures["default"]}if(typeof name==="string"){name=name.split(",")}if(isArray(name)){var lang,cultures=this.cultures,list=name,i,l=list.length,prioritized=[];for(i=0;i<l;i++){name=trim(list[i]);var pri,parts=name.split(";");lang=trim(parts[0]);if(parts.length===1){pri=1}else{name=trim(parts[1]);if(name.indexOf("q=")===0){name=name.substr(2);pri=parseFloat(name);pri=isNaN(pri)?0:pri}else{pri=1}}prioritized.push({lang:lang,pri:pri})}prioritized.sort(function(a,b){if(a.pri<b.pri){return 1}else if(a.pri>b.pri){return-1}return 0});for(i=0;i<l;i++){lang=prioritized[i].lang;match=cultures[lang];if(match){return match}}for(i=0;i<l;i++){lang=prioritized[i].lang;do{var index=lang.lastIndexOf("-");if(index===-1){break}lang=lang.substr(0,index);match=cultures[lang];if(match){return match}}while(1)}for(i=0;i<l;i++){lang=prioritized[i].lang;for(var cultureKey in cultures){var culture=cultures[cultureKey];if(culture.language===lang){return culture}}}}else if(typeof name==="object"){return name}return match||null};Globalize.format=function(value,format,cultureSelector){var culture=this.findClosestCulture(cultureSelector);if(value instanceof Date){value=formatDate(value,format,culture)}else if(typeof value==="number"){value=formatNumber(value,format,culture)}return value};Globalize.localize=function(key,cultureSelector){return this.findClosestCulture(cultureSelector).messages[key]||this.cultures["default"].messages[key]};Globalize.parseDate=function(value,formats,culture){culture=this.findClosestCulture(culture);var date,prop,patterns;if(formats){if(typeof formats==="string"){formats=[formats]}if(formats.length){for(var i=0,l=formats.length;i<l;i++){var format=formats[i];if(format){date=parseExact(value,format,culture);if(date){break}}}}}else{patterns=culture.calendar.patterns;for(prop in patterns){date=parseExact(value,patterns[prop],culture);if(date){break}}}return date||null};Globalize.parseInt=function(value,radix,cultureSelector){return truncate(Globalize.parseFloat(value,radix,cultureSelector))};Globalize.parseFloat=function(value,radix,cultureSelector){if(typeof radix!=="number"){cultureSelector=radix;radix=10}var culture=this.findClosestCulture(cultureSelector);var ret=NaN,nf=culture.numberFormat;if(value.indexOf(culture.numberFormat.currency.symbol)>-1){value=value.replace(culture.numberFormat.currency.symbol,"");value=value.replace(culture.numberFormat.currency["."],culture.numberFormat["."])}if(value.indexOf(culture.numberFormat.percent.symbol)>-1){value=value.replace(culture.numberFormat.percent.symbol,"")}value=value.replace(/ /g,"");if(regexInfinity.test(value)){ret=parseFloat(value)}else if(!radix&&regexHex.test(value)){ret=parseInt(value,16)}else{var signInfo=parseNegativePattern(value,nf,nf.pattern[0]),sign=signInfo[0],num=signInfo[1];if(sign===""&&nf.pattern[0]!=="(n)"){signInfo=parseNegativePattern(value,nf,"(n)");sign=signInfo[0];num=signInfo[1]}if(sign===""&&nf.pattern[0]!=="-n"){signInfo=parseNegativePattern(value,nf,"-n");sign=signInfo[0];num=signInfo[1]}sign=sign||"+";var exponent,intAndFraction,exponentPos=num.indexOf("e");if(exponentPos<0)exponentPos=num.indexOf("E");if(exponentPos<0){intAndFraction=num;exponent=null}else{intAndFraction=num.substr(0,exponentPos);exponent=num.substr(exponentPos+1)}var integer,fraction,decSep=nf["."],decimalPos=intAndFraction.indexOf(decSep);if(decimalPos<0){integer=intAndFraction;fraction=null}else{integer=intAndFraction.substr(0,decimalPos);fraction=intAndFraction.substr(decimalPos+decSep.length)}var groupSep=nf[","];integer=integer.split(groupSep).join("");var altGroupSep=groupSep.replace(/\u00A0/g," ");if(groupSep!==altGroupSep){integer=integer.split(altGroupSep).join("")}var p=sign+integer;if(fraction!==null){p+="."+fraction}if(exponent!==null){var expSignInfo=parseNegativePattern(exponent,nf,"-n");p+="e"+(expSignInfo[0]||"+")+expSignInfo[1]}if(regexParseFloat.test(p)){ret=parseFloat(p)}}return ret};Globalize.culture=function(cultureSelector){if(typeof cultureSelector!=="undefined"){this.cultureSelector=cultureSelector}return this.findClosestCulture(cultureSelector)||this.cultures["default"]}})(window)},{}],4:[function(require,module,exports){(function(window,undefined){var Globalize;Globalize=window.Globalize;Globalize.addCultureInfo("cs","default",{name:"cs",englishName:"Czech",nativeName:"čeština",language:"cs",numberFormat:{",":" ",".":",",NaN:"Není číslo",negativeInfinity:"-nekonečno",positiveInfinity:"+nekonečno",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"Kč"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["neděle","pondělí","úterý","středa","čtvrtek","pátek","sobota"],namesAbbr:["ne","po","út","st","čt","pá","so"],namesShort:["ne","po","út","st","čt","pá","so"]},months:{names:["leden","únor","březen","duben","květen","červen","červenec","srpen","září","říjen","listopad","prosinec",""],namesAbbr:["1","2","3","4","5","6","7","8","9","10","11","12",""]},monthsGenitive:{names:["ledna","února","března","dubna","května","června","července","srpna","září","října","listopadu","prosince",""],namesAbbr:["1","2","3","4","5","6","7","8","9","10","11","12",""]},AM:["dop.","dop.","DOP."],PM:["odp.","odp.","ODP."],eras:[{name:"n. l.",start:null,offset:0}],patterns:{d:"d.M.yyyy",D:"d. MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d. MMMM yyyy H:mm",F:"d. MMMM yyyy H:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}})})(window)},{}],5:[function(require,module,exports){(function($,undefined){var classDisablerContainer="hasDisabler";var classDisablerIgnoreReadOnly="disabler-ignore-readonly";var classDisablerHideReadOnly="disabler-hide-readonly";var classDisablerShowTextReadOnly="disabler-show-text-readonly";var classPanelsDatePicker="panels-date-picker";var classReadOnlyText="disabler-read-only-text";var classReadOnlyRemoveMe="disabler-read-only-display-as-text";var dataReadOnlyByDisabler="data-disabler-read-only";var dataHiddenInputs="disabler-hidden-inputs";var dataAnchorHref="data-disabler-anchor-href";var dataSavedEvents="disabler-saved-events";var dataReadOnlyDisplay="data-disabler-read-only-display";$.widget("dtg.disabler",{options:{disable:false,readonly:false,expression:"*:not(.disabler-ignore-readonly)",disabledClass:"ui-state-disabled"},_create:function(){this._initOptions();if(this.options.disable){this._setOption("disable",this.options.disable)}if(this.options.readonly){this._setOption("readonly",this.options.readonly)}if(!this.element.hasClass(classDisablerContainer)){this.element.addClass(classDisablerContainer)}},_initOptions:function(){this.options.disable=this._ensureBoolean(this.options.disable);this.options.readonly=this._ensureBoolean(this.options.readonly)},_ensureBoolean:function(value){var bool=false;if(this._isNotNullAndNotUndefined(value)){var flag=new String(value).toLowerCase();bool=flag==="true"}return bool},_setOption:function(key,value){this._initOptions();this.options[key]=value;var containerId=this.element.attr("id");switch(key){case"disable":this._doDisable(containerId,value);break;case"readonly":this.readOnly(containerId,this.options.readonly);break}},_getId:function(id){if(this._isNullOrUndefined(id)){id=this.element.attr("id")}if(this._isNotNullAndNotUndefined(id)){id=$.trim(id);if(id.length===0){id=null}}return id},enable:function(containerId){containerId=this._getId(containerId);if(this._isNullOrUndefined(containerId)){return}this._doDisable(containerId,false)},disable:function(containerId){containerId=this._getId(containerId);if(this._isNullOrUndefined(containerId)){return}this._doDisable(containerId,true)},_doDisable:function(containerId,disabling){var escapedId=this._escape(containerId);var bde=$.Event("beforeDisable");this._trigger("beforeDisable",bde,{containerId:escapedId,disabling:disabling,element:this.element});if(bde.isDefaultPrevented()){return}this._readOnlyForDisable(containerId,disabling);this.options.disable=disabling;var ade=$.Event("afterDisable");this._trigger("afterDisable",ade,{containerId:escapedId,disabling:disabling,element:this.element});this.options.disable=disabling},_readOnlyForDisable:function(containerId,readOnlyFlag){containerId=this._getId(containerId);if(this._isNullOrUndefined(containerId)){return}readOnlyFlag=this._defaultReadOnlyFlag(readOnlyFlag);this._doReadOnly(containerId,readOnlyFlag,true)},readOnly:function(containerId,readOnlyFlag){containerId=this._getId(containerId);if(this._isNullOrUndefined(containerId)){return}readOnlyFlag=this._defaultReadOnlyFlag(readOnlyFlag);this._doReadOnly(containerId,readOnlyFlag,false)},_defaultReadOnlyFlag:function(readOnlyFlag){if(readOnlyFlag===undefined){readOnlyFlag=true}return readOnlyFlag},_doReadOnly:function(containerId,readOnlyFlag,disabling){var escapedId=this._escape(containerId);var croe=$.Event("beforeReadOnly");this._trigger("beforeReadOnly",croe,{containerId:escapedId,readOnlyFlag:readOnlyFlag,disabling:disabling,element:this.element});if(croe.isDefaultPrevented()||readOnlyFlag===undefined){return}var hiddenInputs=[];var selector=this._formatSelectorForContainerId(escapedId);var topElement=$(selector);if(topElement.length===0){return}this._doReadOnlyIteration(topElement,readOnlyFlag,hiddenInputs,disabling);var plugin=this;var selector=this.options.expression+", span."+classReadOnlyText+", ."+classDisablerHideReadOnly;topElement.find(selector).each(function(index){var inp=$(this);var roie=$.Event("readOnlyIteration");plugin._trigger("readOnlyIteration",roie,{input:inp,index:index,containerId:escapedId,readOnlyFlag:readOnlyFlag,disabling:disabling,element:plugin.element});if(roie.isDefaultPrevented()){return true}var inputDisabler=inp.data("disabler");if(inputDisabler!==undefined){return true}plugin._doReadOnlyIteration(inp,readOnlyFlag,hiddenInputs,disabling)});this._processHiddenInputsOnReadOnly(escapedId,readOnlyFlag,hiddenInputs);this.options.readonly=readOnlyFlag;var aroe=$.Event("afterReadOnly");this._trigger("afterReadOnly",aroe,{containerId:escapedId,readOnlyFlag:readOnlyFlag,disabling:disabling,element:this.element})},_whatTypeAmI:function(inp){var type=inp.attr("type");if(type===undefined){if(inp[0]===undefined){type=""}else{type=inp[0].tagName}}return type.toLowerCase()},_doReadOnlyIteration:function(inp,readOnlyFlag,hiddenInputs,disabling){if(readOnlyFlag){this._turnReadOnlyOn(inp,hiddenInputs,disabling)}else{this._turnReadOnlyOff(inp)}},_turnReadOnlyOn:function(inp,hiddenInputs,disabling){if(this._hasAttribute(inp,dataReadOnlyByDisabler)){return}if(inp.attr("readonly")!==undefined||inp.attr("disabled")!==undefined){return}if((inp.hasClass("hasDatepicker")||inp.hasClass(classPanelsDatePicker))&&inp.datepicker("option","disabled")){return}this._setAttribute(inp,dataReadOnlyByDisabler,"true");if(inp.hasClass(classDisablerIgnoreReadOnly)){return}var type=this._whatTypeAmI(inp);if(!disabling){if(inp.hasClass(classDisablerHideReadOnly)){this._disableEvents(inp);hiddenInputs.push(inp);inp.hide();return}if(inp.hasClass(classDisablerShowTextReadOnly)){this._disableEvents(inp);this._showTextReadOnly(inp,type);return}}var trooe=$.Event("turnReadOnlyOn");this._trigger("turnReadOnlyOn",trooe,inp);if(trooe.isDefaultPrevented()){return}if(inp.data("ui-accordion")!==undefined){}else if(inp.data("ui-progressbar")!==undefined){inp.progressbar("disable")}else if(inp.data("ui-slider")!==undefined){inp.slider("disable")}else if(inp.data("ui-spinner")!==undefined){inp.spinner("disable")}else if(inp.data("ui-tabs")!==undefined){inp.tabs("disable")}else if(inp.data("ui-menu")!==undefined){inp.menu("disable")}else if(inp.data("ui-datepicker")||inp.data("datepicker")||inp.hasClass(classPanelsDatePicker)){inp.datepicker("disable")}else if(type==="a"){this._disableLink(inp)}else if(type==="submit"||type=="button"||type=="label"){if(inp.hasClass("ui-button")&&inp.data("ui-button")){inp.button("disable")}else if(type==="label"){inp.addClass(this.options.disabledClass)}else{inp.attr("disabled","true")}}else if(type==="select"||type=="checkbox"||type=="radio"){this._disableEvents(inp);inp.attr("disabled","true");inp.addClass(this.options.disabledClass)}else if(type==="text"||type==="textarea"){inp.attr("readonly","readonly");inp.attr("disabled","true");inp.addClass(this.options.disabledClass)}else{this._disableEvents(inp)}},_showTextReadOnly:function(inp,type){var stroe=$.Event("showTextReadOnly");this._trigger("showTextReadOnly",stroe,inp);if(stroe.isDefaultPrevented()){return}var plugin=this;var overrideText="";var text="";if(type==="a"){text=this._getTextForInput(inp,inp.text())}else if(type==="text"||type==="textarea"){text=this._getTextForInput(inp,inp.val())}else if(type==="radio"||type==="checkbox"){if(inp.prop("checked")){text=this._getTextForInput(inp,inp.val())}}else if(type==="select"){var options=[];inp.find("option:selected").each(function(index){var option=$(this);var optionText=plugin._getTextForSelectOption(option);options.push(optionText)});text=options.join(", ")}inp.wrap('<span class="'+classReadOnlyText+'"></span>');this._setAttribute(inp.parent("span."+classReadOnlyText),dataReadOnlyByDisabler,"true");var style="";if($.trim(text).length===0){style='style="display: none; "'}inp.parent().after('<span class="'+classReadOnlyRemoveMe+'" '+style+">"+text+"</span>");inp.hide()},_getTextForInput:function(inp,elementText){var text=this._getAttribute(inp,dataReadOnlyDisplay);if(text===undefined){text=elementText}overrideText=this._getAttribute(inp.parent(),dataReadOnlyDisplay);if(overrideText!==undefined){text=overrideText}return text},_getTextForSelectOption:function(option){var optionText=this._getAttribute(option,dataReadOnlyDisplay);if(optionText===undefined){optionText=option.text()}return optionText},_turnReadOnlyOff:function(inp){if(this._hasNoAttribute(inp,dataReadOnlyByDisabler)){return}this._removeAttribute(inp,dataReadOnlyByDisabler);if(inp.hasClass(classReadOnlyText)){var ustroe=$.Event("undoShowTextReadOnly");this._trigger("undoShowTextReadOnly",ustroe,inp);if(!ustroe.isDefaultPrevented()){var span=inp.next("span."+classReadOnlyRemoveMe);span.remove();var child=inp.children();child.unwrap();this._enableEvents(child);child.show()}}else{var trooe=$.Event("turnReadOnlyOff");this._trigger("turnReadOnlyOff",trooe,inp);if(!trooe.isDefaultPrevented()){var type=this._whatTypeAmI(inp);if(inp.data("ui-accordion")!==undefined){}else if(inp.data("ui-progressbar")!==undefined){inp.progressbar("enable")}else if(inp.data("ui-slider")!==undefined){inp.slider("enable")}else if(inp.data("ui-spinner")!==undefined){inp.spinner("enable")}else if(inp.data("ui-tabs")!==undefined){inp.tabs("enable")}else if(inp.data("ui-menu")!==undefined){inp.menu("enable")}else if(inp.data("ui-datapicker")||inp.data("datepicker")||inp.hasClass(classPanelsDatePicker)){inp.datepicker("enable")}else if(type==="a"){this._enableLink(inp)}else if(type==="submit"||type=="button"||type=="label"){if(inp.hasClass("ui-button")&&inp.data("ui-button")){inp.button("enable")}else if(type==="label"){inp.removeClass(this.options.disabledClass)}else{inp.removeAttr("disabled")}}else if(type==="select"||type=="checkbox"||type=="radio"){this._enableEvents(inp);inp.removeAttr("disabled");inp.removeClass(this.options.disabledClass)}else if(type==="text"||type==="textarea"){inp.removeAttr("readonly");inp.removeAttr("disabled");inp.removeClass(this.options.disabledClass)}else{this._enableEvents(inp)}}}},_processHiddenInputsOnReadOnly:function(containerId,readOnlyFlag,hiddenInputs){var escapedId=this._escapeValue(this.element.attr("id"));if(readOnlyFlag){if(hiddenInputs.length>0){$("#"+escapedId).data(dataHiddenInputs,hiddenInputs)}var phiroe=$.Event("processHiddenInputsReadOnly");this._trigger("processHiddenInputsReadOnly",phiroe,{containerId:escapedId,hiddenInput:hiddenInput,element:this.element})}else{hiddenInputs=$("#"+escapedId).data(dataHiddenInputs);if(hiddenInputs!==undefined){for(var i=0;i<hiddenInputs.length;i++){var hiddenInput=hiddenInputs[i];this._enableEvents(hiddenInput);hiddenInput.show();var phinreie=$.Event("processHiddenInputsNotReadOnlyIteration");this._trigger("processHiddenInputsNotReadOnlyIteration",phinreie,{containerId:escapedId,hiddenInput:hiddenInput,element:this.element})}$("#"+escapedId).removeData(dataHiddenInputs)}}},_disableLink:function(inp){this._disableEvents(inp);var href=inp.attr("href");if(href!==undefined){this._setAttribute(inp,dataAnchorHref,href);inp.attr("href","#")}inp.on("click",function(e){e.preventDefault()});inp.addClass(this.options.disabledClass)},_disableEvents:function(inp){var de=$.Event("disableEvents");this._trigger("disableEvents",de,inp);if(de.isDefaultPrevented()){return}var widgetEventPrefix=this.widgetEventPrefix;var events=inp.data("events");if(events!==undefined){var savedEvents=[];$.each(events,function(eventName,handlers){$.each(handlers,function(index){var handler=handlers[index];if(handler!==undefined){var eventObj={eventName:eventName,handler:handler};if(eventName.indexOf(widgetEventPrefix)<0){savedEvents.push(eventObj);inp.unbind(eventName)}}})});inp.data(dataSavedEvents,savedEvents)}},_enableLink:function(inp){inp.unbind();this._enableEvents(inp);var href=this._getAttribute(inp,dataAnchorHref);if(href!==undefined){inp.attr("href",href);this._removeAttribute(inp,dataAnchorHref)}inp.removeClass(this.options.disabledClass)},_enableEvents:function(inp){var ee=$.Event("enableEvents");this._trigger("enableEvents",ee,inp);if(ee.isDefaultPrevented()){return}var savedEvents=inp.data(dataSavedEvents);if(savedEvents!==undefined){$.each(savedEvents,function(index){var savedEvent=savedEvents[index];var eventName=savedEvent.eventName;var handler=savedEvent.handler;inp.on(eventName,handler)})}inp.removeData(dataSavedEvents)},_escape:function(containerId){if(containerId===undefined){containerId=this.element.attr("id")}return this._escapeValue(containerId)},_escapeValue:function(str){str=str.replace(/\+/g,"\\+");str=str.replace(/\\/g,"\\");str=str.replace(/\//g,"\\/");str=str.replace(/!/g,"\\!");str=str.replace(/"/g,'\\"');str=str.replace(/#/g,"\\#");str=str.replace(/\$/g,"\\$");str=str.replace(/%/g,"\\%");str=str.replace(/&/g,"\\&");str=str.replace(/'/g,"\\'");str=str.replace(/\(/g,"\\(");str=str.replace(/\)/g,"\\)");str=str.replace(/\*/g,"\\*");str=str.replace(/,/g,"\\,");str=str.replace(/\./g,"\\.");str=str.replace(/:/g,"\\:");str=str.replace(/;/g,"\\;");str=str.replace(/\?/g,"\\?");str=str.replace(/@/g,"\\@");str=str.replace(/\[/g,"\\[");str=str.replace(/\]/g,"\\]");str=str.replace(/\^/g,"\\^");str=str.replace(/`/g,"\\`");str=str.replace(/\{/g,"\\{");str=str.replace(/\}/g,"\\}");str=str.replace(/\|/g,"\\|");str=str.replace(/\~/g,"\\~");return str},_isNotNullAndNotUndefined:function(obj){return obj!==undefined&&obj!=null},_isNullOrUndefined:function(obj){return obj===null||obj===undefined},_formatSelectorForContainerId:function(containerId){var panelId=this._escapeValue(this.element.attr("id"));if(panelId===containerId){containerId=null}var selector="#"+containerId+" ";if(this._isNullOrUndefined(containerId)){selector=""}if(selector===""){selector="#"+panelId}else{selector="#"+panelId+" "+selector}return selector+" "},_hasAttribute:function(inp,attrName){var attr=inp.attr(attrName);return typeof attr!=="undefined"&&attr!==false},_hasNoAttribute:function(inp,attrName){return!this._hasAttribute(inp,attrName)},_setAttribute:function(inp,attrName,attrValue){inp.attr(attrName,attrValue)},_removeAttribute:function(inp,attrName){inp.removeAttr(attrName)},_getAttribute:function(inp,attrName){return inp.attr(attrName)}});$.extend($.dtg.disabler,{version:"1.1.0"})})(jQuery)},{}],6:[function(require,module,exports){(function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)})(function(t){function e(t){for(var e=t.css("visibility");"inherit"===e;)t=t.parent(),e=t.css("visibility");return"hidden"!==e}function i(t){for(var e,i;t.length&&t[0]!==document;){if(e=t.css("position"),("absolute"===e||"relative"===e||"fixed"===e)&&(i=parseInt(t.css("zIndex"),10),!isNaN(i)&&0!==i))return i;t=t.parent()}return 0}function s(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.regional.en=t.extend(!0,{},this.regional[""]),this.regional["en-US"]=t.extend(!0,{},this.regional.en),this.dpDiv=n(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.on("mouseout",i,function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",i,o)}function o(){t.datepicker._isDisabledDatepicker(p.inline?p.dpDiv.parent()[0]:p.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))}function a(e,i){t.extend(e,i);for(var s in i)null==i[s]&&(e[s]=i[s]);return e}function r(t){return function(){var e=this.element.val();t.apply(this,arguments),this._refresh(),e!==this.element.val()&&this._trigger("change")}}t.ui=t.ui||{},t.ui.version="1.12.1";var l=0,h=Array.prototype.slice;t.cleanData=function(e){return function(i){var s,n,o;for(o=0;null!=(n=i[o]);o++)try{s=t._data(n,"events"),s&&s.remove&&t(n).triggerHandler("remove")}catch(a){}e(i)}}(t.cleanData),t.widget=function(e,i,s){var n,o,a,r={},l=e.split(".")[0];e=e.split(".")[1];var h=l+"-"+e;return s||(s=i,i=t.Widget),t.isArray(s)&&(s=t.extend.apply(null,[{}].concat(s))),t.expr[":"][h.toLowerCase()]=function(e){return!!t.data(e,h)},t[l]=t[l]||{},n=t[l][e],o=t[l][e]=function(t,e){return this._createWidget?(arguments.length&&this._createWidget(t,e),void 0):new o(t,e)},t.extend(o,n,{version:s.version,_proto:t.extend({},s),_childConstructors:[]}),a=new i,a.options=t.widget.extend({},a.options),t.each(s,function(e,s){return t.isFunction(s)?(r[e]=function(){function t(){return i.prototype[e].apply(this,arguments)}function n(t){return i.prototype[e].apply(this,t)}return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=n,e=s.apply(this,arguments),this._super=i,this._superApply=o,e}}(),void 0):(r[e]=s,void 0)}),o.prototype=t.widget.extend(a,{widgetEventPrefix:n?a.widgetEventPrefix||e:e},r,{constructor:o,namespace:l,widgetName:e,widgetFullName:h}),n?(t.each(n._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete n._childConstructors):i._childConstructors.push(o),t.widget.bridge(e,o),o},t.widget.extend=function(e){for(var i,s,n=h.call(arguments,1),o=0,a=n.length;a>o;o++)for(i in n[o])s=n[o][i],n[o].hasOwnProperty(i)&&void 0!==s&&(e[i]=t.isPlainObject(s)?t.isPlainObject(e[i])?t.widget.extend({},e[i],s):t.widget.extend({},s):s);return e},t.widget.bridge=function(e,i){var s=i.prototype.widgetFullName||e;t.fn[e]=function(n){var o="string"==typeof n,a=h.call(arguments,1),r=this;return o?this.length||"instance"!==n?this.each(function(){var i,o=t.data(this,s);return"instance"===n?(r=o,!1):o?t.isFunction(o[n])&&"_"!==n.charAt(0)?(i=o[n].apply(o,a),i!==o&&void 0!==i?(r=i&&i.jquery?r.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+n+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; "+"attempted to call method '"+n+"'")}):r=void 0:(a.length&&(n=t.widget.extend.apply(null,[n].concat(a))),this.each(function(){var e=t.data(this,s);e?(e.option(n||{}),e._init&&e._init()):t.data(this,s,new i(n,this))})),r}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=l++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,function(t,i){e._removeClass(i,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var s,n,o,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(a={},s=e.split("."),e=s.shift(),s.length){for(n=a[e]=t.widget.extend({},this.options[e]),o=0;s.length-1>o;o++)n[s[o]]=n[s[o]]||{},n=n[s[o]];if(e=s.pop(),1===arguments.length)return void 0===n[e]?null:n[e];n[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=i}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var i,s,n;for(i in e)n=this.classesElementLookup[i],e[i]!==this.options.classes[i]&&n&&n.length&&(s=t(n.get()),this._removeClass(n,i),s.addClass(this._classes({element:s,keys:i,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){function i(i,o){var a,r;for(r=0;i.length>r;r++)a=n.classesElementLookup[i[r]]||t(),a=e.add?t(t.unique(a.get().concat(e.element.get()))):t(a.not(e.element).get()),n.classesElementLookup[i[r]]=a,s.push(i[r]),o&&e.classes[i[r]]&&s.push(e.classes[i[r]])}var s=[],n=this;return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&i(e.keys.match(/\S+/g)||[],!0),e.extra&&i(e.extra.match(/\S+/g)||[]),s.join(" ")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,function(s,n){-1!==t.inArray(e.target,n)&&(i.classesElementLookup[s]=t(n.not(e.target).get()))})},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,s){s="boolean"==typeof s?s:i;var n="string"==typeof t||null===t,o={extra:n?e:i,keys:n?t:e,element:n?this.element:t,add:s};return o.element.toggleClass(this._classes(o),s),this},_on:function(e,i,s){var n,o=this;"boolean"!=typeof e&&(s=i,i=e,e=!1),s?(i=n=t(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),t.each(s,function(s,a){function r(){return e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||t.guid++);var l=s.match(/^([\w:-]*)\s*(.*)$/),h=l[1]+o.eventNamespace,c=l[2];c?n.on(h,c,r):i.on(h,r)})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(i).off(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function i(){return("string"==typeof t?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,s){var n,o,a=this.options[e];if(s=s||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(n in o)n in i||(i[n]=o[n]);return this.element.trigger(i,s),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(s,n,o){"string"==typeof n&&(n={effect:n});var a,r=n?n===!0||"number"==typeof n?i:n.effect||i:e;n=n||{},"number"==typeof n&&(n={duration:n}),a=!t.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),a&&t.effects&&t.effects.effect[r]?s[e](n):r!==e&&s[r]?s[r](n.duration,n.easing,o):s.queue(function(i){t(this)[e](),o&&o.call(s[0]),i()})}}),t.widget,function(){function e(t,e,i){return[parseFloat(t[0])*(u.test(t[0])?e/100:1),parseFloat(t[1])*(u.test(t[1])?i/100:1)]}function i(e,i){return parseInt(t.css(e,i),10)||0}function s(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}var n,o=Math.max,a=Math.abs,r=/left|center|right/,l=/top|center|bottom/,h=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,u=/%$/,d=t.fn.position;t.position={scrollbarWidth:function(){if(void 0!==n)return n;var e,i,s=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return t("body").append(s),e=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,e===i&&(i=s[0].clientWidth),s.remove(),n=e-i},getScrollInfo:function(e){var i=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),s=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),n="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,o="scroll"===s||"auto"===s&&e.height<e.element[0].scrollHeight;return{width:o?t.position.scrollbarWidth():0,height:n?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),s=t.isWindow(i[0]),n=!!i[0]&&9===i[0].nodeType,o=!s&&!n;return{element:i,isWindow:s,isDocument:n,offset:o?t(e).offset():{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:i.outerWidth(),height:i.outerHeight()}}},t.fn.position=function(n){if(!n||!n.of)return d.apply(this,arguments);n=t.extend({},n);var u,p,f,g,m,_,v=t(n.of),b=t.position.getWithinInfo(n.within),y=t.position.getScrollInfo(b),w=(n.collision||"flip").split(" "),k={};return _=s(v),v[0].preventDefault&&(n.at="left top"),p=_.width,f=_.height,g=_.offset,m=t.extend({},g),t.each(["my","at"],function(){var t,e,i=(n[this]||"").split(" ");1===i.length&&(i=r.test(i[0])?i.concat(["center"]):l.test(i[0])?["center"].concat(i):["center","center"]),i[0]=r.test(i[0])?i[0]:"center",i[1]=l.test(i[1])?i[1]:"center",t=h.exec(i[0]),e=h.exec(i[1]),k[this]=[t?t[0]:0,e?e[0]:0],n[this]=[c.exec(i[0])[0],c.exec(i[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===n.at[0]?m.left+=p:"center"===n.at[0]&&(m.left+=p/2),"bottom"===n.at[1]?m.top+=f:"center"===n.at[1]&&(m.top+=f/2),u=e(k.at,p,f),m.left+=u[0],m.top+=u[1],this.each(function(){var s,r,l=t(this),h=l.outerWidth(),c=l.outerHeight(),d=i(this,"marginLeft"),_=i(this,"marginTop"),x=h+d+i(this,"marginRight")+y.width,C=c+_+i(this,"marginBottom")+y.height,D=t.extend({},m),T=e(k.my,l.outerWidth(),l.outerHeight());"right"===n.my[0]?D.left-=h:"center"===n.my[0]&&(D.left-=h/2),"bottom"===n.my[1]?D.top-=c:"center"===n.my[1]&&(D.top-=c/2),D.left+=T[0],D.top+=T[1],s={marginLeft:d,marginTop:_},t.each(["left","top"],function(e,i){t.ui.position[w[e]]&&t.ui.position[w[e]][i](D,{targetWidth:p,targetHeight:f,elemWidth:h,elemHeight:c,collisionPosition:s,collisionWidth:x,collisionHeight:C,offset:[u[0]+T[0],u[1]+T[1]],my:n.my,at:n.at,within:b,elem:l})}),n.using&&(r=function(t){var e=g.left-D.left,i=e+p-h,s=g.top-D.top,r=s+f-c,u={target:{element:v,left:g.left,top:g.top,width:p,height:f},element:{element:l,left:D.left,top:D.top,width:h,height:c},horizontal:0>i?"left":e>0?"right":"center",vertical:0>r?"top":s>0?"bottom":"middle"};h>p&&p>a(e+i)&&(u.horizontal="center"),c>f&&f>a(s+r)&&(u.vertical="middle"),u.important=o(a(e),a(i))>o(a(s),a(r))?"horizontal":"vertical",n.using.call(this,t,u)}),l.offset(t.extend(D,{using:r}))})},t.ui.position={fit:{left:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollLeft:s.offset.left,a=s.width,r=t.left-e.collisionPosition.marginLeft,l=n-r,h=r+e.collisionWidth-a-n;e.collisionWidth>a?l>0&&0>=h?(i=t.left+l+e.collisionWidth-a-n,t.left+=l-i):t.left=h>0&&0>=l?n:l>h?n+a-e.collisionWidth:n:l>0?t.left+=l:h>0?t.left-=h:t.left=o(t.left-r,t.left)},top:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollTop:s.offset.top,a=e.within.height,r=t.top-e.collisionPosition.marginTop,l=n-r,h=r+e.collisionHeight-a-n;e.collisionHeight>a?l>0&&0>=h?(i=t.top+l+e.collisionHeight-a-n,t.top+=l-i):t.top=h>0&&0>=l?n:l>h?n+a-e.collisionHeight:n:l>0?t.top+=l:h>0?t.top-=h:t.top=o(t.top-r,t.top)}},flip:{left:function(t,e){var i,s,n=e.within,o=n.offset.left+n.scrollLeft,r=n.width,l=n.isWindow?n.scrollLeft:n.offset.left,h=t.left-e.collisionPosition.marginLeft,c=h-l,u=h+e.collisionWidth-r-l,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>c?(i=t.left+d+p+f+e.collisionWidth-r-o,(0>i||a(c)>i)&&(t.left+=d+p+f)):u>0&&(s=t.left-e.collisionPosition.marginLeft+d+p+f-l,(s>0||u>a(s))&&(t.left+=d+p+f))},top:function(t,e){var i,s,n=e.within,o=n.offset.top+n.scrollTop,r=n.height,l=n.isWindow?n.scrollTop:n.offset.top,h=t.top-e.collisionPosition.marginTop,c=h-l,u=h+e.collisionHeight-r-l,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,g=-2*e.offset[1];0>c?(s=t.top+p+f+g+e.collisionHeight-r-o,(0>s||a(c)>s)&&(t.top+=p+f+g)):u>0&&(i=t.top-e.collisionPosition.marginTop+p+f+g-l,(i>0||u>a(i))&&(t.top+=p+f+g))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}}}(),t.ui.position,t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,s){return!!t.data(e,s[3])}}),t.fn.extend({disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}}),t.ui.focusable=function(i,s){var n,o,a,r,l,h=i.nodeName.toLowerCase();return"area"===h?(n=i.parentNode,o=n.name,i.href&&o&&"map"===n.nodeName.toLowerCase()?(a=t("img[usemap='#"+o+"']"),a.length>0&&a.is(":visible")):!1):(/^(input|select|textarea|button|object)$/.test(h)?(r=!i.disabled,r&&(l=t(i).closest("fieldset")[0],l&&(r=!l.disabled))):r="a"===h?i.href||s:s,r&&t(i).is(":visible")&&e(t(i)))},t.extend(t.expr[":"],{focusable:function(e){return t.ui.focusable(e,null!=t.attr(e,"tabindex"))}}),t.ui.focusable,t.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):t(this[0].form)},t.ui.formResetMixin={_formResetHandler:function(){var e=t(this);setTimeout(function(){var i=e.data("ui-form-reset-instances");t.each(i,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var t=this.form.data("ui-form-reset-instances")||[];t.length||this.form.on("reset.ui-form-reset",this._formResetHandler),t.push(this),this.form.data("ui-form-reset-instances",t)}},_unbindFormResetHandler:function(){if(this.form.length){var e=this.form.data("ui-form-reset-instances");e.splice(t.inArray(this,e),1),e.length?this.form.data("ui-form-reset-instances",e):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}},"1.7"===t.fn.jquery.substring(0,3)&&(t.each(["Width","Height"],function(e,i){function s(e,i,s,o){return t.each(n,function(){i-=parseFloat(t.css(e,"padding"+this))||0,s&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),o&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var n="Width"===i?["Left","Right"]:["Top","Bottom"],o=i.toLowerCase(),a={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(e){return void 0===e?a["inner"+i].call(this):this.each(function(){t(this).css(o,s(this,e)+"px")})},t.fn["outer"+i]=function(e,n){return"number"!=typeof e?a["outer"+i].call(this,e):this.each(function(){t(this).css(o,s(this,e,!0,n)+"px")})}}),t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},t.ui.escapeSelector=function(){var t=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g;return function(e){return e.replace(t,"\\$1")}}(),t.fn.labels=function(){var e,i,s,n,o;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(n=this.eq(0).parents("label"),s=this.attr("id"),s&&(e=this.eq(0).parents().last(),o=e.add(e.length?e.siblings():this.siblings()),i="label[for='"+t.ui.escapeSelector(s)+"']",n=n.add(o.find(i).addBack(i))),this.pushStack(n))},t.fn.scrollParent=function(e){var i=this.css("position"),s="absolute"===i,n=e?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var e=t(this);return s&&"static"===e.css("position")?!1:n.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==i&&o.length?o:t(this[0].ownerDocument||document)},t.extend(t.expr[":"],{tabbable:function(e){var i=t.attr(e,"tabindex"),s=null!=i;return(!s||i>=0)&&t.ui.focusable(e,s)}}),t.fn.extend({uniqueId:function(){var t=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}}),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var c=!1;t(document).on("mouseup",function(){c=!1}),t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!c){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,s=1===e.which,n="string"==typeof this.options.cancel&&e.target.nodeName?t(e.target).closest(this.options.cancel).length:!1;return s&&!n&&this._mouseCapture(e)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),c=!0,!0)):!0}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,c=!1,e.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),t.ui.plugin={add:function(e,i,s){var n,o=t.ui[e].prototype;for(n in s)o.plugins[n]=o.plugins[n]||[],o.plugins[n].push([i,s[n]])},call:function(t,e,i,s){var n,o=t.plugins[e];if(o&&(s||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(n=0;o.length>n;n++)t.options[o[n][0]]&&o[n][1].apply(t.element,i)}},t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(i){e=t.body}return e||(e=t.body),e.nodeName||(e=t.body),e},t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")},t.widget("ui.draggable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?(this.destroyOnClear=!0,void 0):(this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(e){var i=this.options;return this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(this._blurActiveElement(e),this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0):!1)},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var i=t.ui.safeActiveElement(this.document[0]),s=t(e.target);s.closest(i).length||t.ui.safeBlur(i)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===t(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",e,s)===!1)return this._mouseUp(new t.Event("mouseup",e)),!1;this.position=s.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,s=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(s=t.ui.ddmanager.drop(this,e)),this.dropped&&(s=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",e)!==!1&&i._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new t.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper),n=s?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s&&n[0]===this.element[0]&&this._setPositionRelative(),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options,o=this.document[0];return this.relativeContainer=null,n.containment?"window"===n.containment?(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===n.containment?(this.containment=[0,0,t(o).width()-this.helperProportions.width-this.margins.left,(t(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):n.containment.constructor===Array?(this.containment=n.containment,void 0):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=t(n.containment),s=i[0],s&&(e=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i),void 0):(this.containment=null,void 0)},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,s=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,s,n,o,a=this.options,r=this._isRootNode(this.scrollParent[0]),l=t.pageX,h=t.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(h=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(h=i[3]+this.offset.click.top)),a.grid&&(n=a.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,h=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-a.grid[1]:n+a.grid[1]:n,o=a.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,l=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-a.grid[0]:o+a.grid[0]:o),"y"===a.axis&&(l=this.originalPageX),"x"===a.axis&&(h=this.originalPageY)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,i,s){return s=s||this._uiHash(),t.ui.plugin.call(this,e,[i,s,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),s.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i,s){var n=t.extend({},i,{item:s.element});s.sortables=[],t(s.options.connectToSortable).each(function(){var i=t(this).sortable("instance");i&&!i.options.disabled&&(s.sortables.push(i),i.refreshPositions(),i._trigger("activate",e,n))})},stop:function(e,i,s){var n=t.extend({},i,{item:s.element});s.cancelHelperRemoval=!1,t.each(s.sortables,function(){var t=this;t.isOver?(t.isOver=0,s.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,n))})},drag:function(e,i,s){t.each(s.sortables,function(){var n=!1,o=this;o.positionAbs=s.positionAbs,o.helperProportions=s.helperProportions,o.offset.click=s.offset.click,o._intersectsWith(o.containerCache)&&(n=!0,t.each(s.sortables,function(){return this.positionAbs=s.positionAbs,this.helperProportions=s.helperProportions,this.offset.click=s.offset.click,this!==o&&this._intersectsWith(this.containerCache)&&t.contains(o.element[0],this.element[0])&&(n=!1),n})),n?(o.isOver||(o.isOver=1,s._parent=i.helper.parent(),o.currentItem=i.helper.appendTo(o.element).data("ui-sortable-item",!0),o.options._helper=o.options.helper,o.options.helper=function(){return i.helper[0]},e.target=o.currentItem[0],o._mouseCapture(e,!0),o._mouseStart(e,!0,!0),o.offset.click.top=s.offset.click.top,o.offset.click.left=s.offset.click.left,o.offset.parent.left-=s.offset.parent.left-o.offset.parent.left,o.offset.parent.top-=s.offset.parent.top-o.offset.parent.top,s._trigger("toSortable",e),s.dropped=o.element,t.each(s.sortables,function(){this.refreshPositions()}),s.currentItem=s.element,o.fromOutside=s),o.currentItem&&(o._mouseDrag(e),i.position=o.position)):o.isOver&&(o.isOver=0,o.cancelHelperRemoval=!0,o.options._revert=o.options.revert,o.options.revert=!1,o._trigger("out",e,o._uiHash(o)),o._mouseStop(e,!0),o.options.revert=o.options._revert,o.options.helper=o.options._helper,o.placeholder&&o.placeholder.remove(),i.helper.appendTo(s._parent),s._refreshOffsets(e),i.position=s._generatePosition(e,!0),s._trigger("fromSortable",e),s.dropped=!1,t.each(s.sortables,function(){this.refreshPositions()}))})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,i,s){var n=t("body"),o=s.options;n.css("cursor")&&(o._cursor=n.css("cursor")),n.css("cursor",o.cursor)},stop:function(e,i,s){var n=s.options;n._cursor&&t("body").css("cursor",n._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i,s){var n=t(i.helper),o=s.options;n.css("opacity")&&(o._opacity=n.css("opacity")),n.css("opacity",o.opacity)},stop:function(e,i,s){var n=s.options;n._opacity&&t(i.helper).css("opacity",n._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(e,i,s){var n=s.options,o=!1,a=s.scrollParentNotHidden[0],r=s.document[0];a!==r&&"HTML"!==a.tagName?(n.axis&&"x"===n.axis||(s.overflowOffset.top+a.offsetHeight-e.pageY<n.scrollSensitivity?a.scrollTop=o=a.scrollTop+n.scrollSpeed:e.pageY-s.overflowOffset.top<n.scrollSensitivity&&(a.scrollTop=o=a.scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(s.overflowOffset.left+a.offsetWidth-e.pageX<n.scrollSensitivity?a.scrollLeft=o=a.scrollLeft+n.scrollSpeed:e.pageX-s.overflowOffset.left<n.scrollSensitivity&&(a.scrollLeft=o=a.scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(e.pageY-t(r).scrollTop()<n.scrollSensitivity?o=t(r).scrollTop(t(r).scrollTop()-n.scrollSpeed):t(window).height()-(e.pageY-t(r).scrollTop())<n.scrollSensitivity&&(o=t(r).scrollTop(t(r).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(e.pageX-t(r).scrollLeft()<n.scrollSensitivity?o=t(r).scrollLeft(t(r).scrollLeft()-n.scrollSpeed):t(window).width()-(e.pageX-t(r).scrollLeft())<n.scrollSensitivity&&(o=t(r).scrollLeft(t(r).scrollLeft()+n.scrollSpeed)))),o!==!1&&t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(s,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,i,s){var n=s.options;s.snapElements=[],t(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var e=t(this),i=e.offset();this!==s.element[0]&&s.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})})},drag:function(e,i,s){var n,o,a,r,l,h,c,u,d,p,f=s.options,g=f.snapTolerance,m=i.offset.left,_=m+s.helperProportions.width,v=i.offset.top,b=v+s.helperProportions.height;for(d=s.snapElements.length-1;d>=0;d--)l=s.snapElements[d].left-s.margins.left,h=l+s.snapElements[d].width,c=s.snapElements[d].top-s.margins.top,u=c+s.snapElements[d].height,l-g>_||m>h+g||c-g>b||v>u+g||!t.contains(s.snapElements[d].item.ownerDocument,s.snapElements[d].item)?(s.snapElements[d].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[d].item})),s.snapElements[d].snapping=!1):("inner"!==f.snapMode&&(n=g>=Math.abs(c-b),o=g>=Math.abs(u-v),a=g>=Math.abs(l-_),r=g>=Math.abs(h-m),n&&(i.position.top=s._convertPositionTo("relative",{top:c-s.helperProportions.height,left:0}).top),o&&(i.position.top=s._convertPositionTo("relative",{top:u,left:0}).top),a&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l-s.helperProportions.width}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h}).left)),p=n||o||a||r,"outer"!==f.snapMode&&(n=g>=Math.abs(c-v),o=g>=Math.abs(u-b),a=g>=Math.abs(l-m),r=g>=Math.abs(h-_),n&&(i.position.top=s._convertPositionTo("relative",{top:c,left:0}).top),o&&(i.position.top=s._convertPositionTo("relative",{top:u-s.helperProportions.height,left:0}).top),a&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h-s.helperProportions.width}).left)),!s.snapElements[d].snapping&&(n||o||a||r||p)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[d].item})),s.snapElements[d].snapping=n||o||a||r||p)}}),t.ui.plugin.add("draggable","stack",{start:function(e,i,s){var n,o=s.options,a=t.makeArray(t(o.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});a.length&&(n=parseInt(t(a[0]).css("zIndex"),10)||0,t(a).each(function(e){t(this).css("zIndex",n+e)}),this.css("zIndex",n+a.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i,s){var n=t(i.helper),o=s.options;n.css("zIndex")&&(o._zIndex=n.css("zIndex")),n.css("zIndex",o.zIndex)},stop:function(e,i,s){var n=s.options;n._zIndex&&t(i.helper).css("zIndex",n._zIndex)}}),t.ui.draggable,t.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,i=this.options,s=i.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(s)?s:function(t){return t.is(s)},this.proportions=function(){return arguments.length?(e=arguments[0],void 0):e?e:e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(i.scope),i.addClasses&&this._addClass("ui-droppable")},_addToManager:function(e){t.ui.ddmanager.droppables[e]=t.ui.ddmanager.droppables[e]||[],t.ui.ddmanager.droppables[e].push(this)},_splice:function(t){for(var e=0;t.length>e;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var e=t.ui.ddmanager.droppables[this.options.scope];this._splice(e)},_setOption:function(e,i){if("accept"===e)this.accept=t.isFunction(i)?i:function(t){return t.is(i)};else if("scope"===e){var s=t.ui.ddmanager.droppables[this.options.scope];this._splice(s),this._addToManager(i)}this._super(e,i)},_activate:function(e){var i=t.ui.ddmanager.current;this._addActiveClass(),i&&this._trigger("activate",e,this.ui(i))},_deactivate:function(e){var i=t.ui.ddmanager.current;this._removeActiveClass(),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._addHoverClass(),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._removeHoverClass(),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var s=i||t.ui.ddmanager.current,n=!1;return s&&(s.currentItem||s.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=t(this).droppable("instance");return i.options.greedy&&!i.options.disabled&&i.options.scope===s.options.scope&&i.accept.call(i.element[0],s.currentItem||s.element)&&u(s,t.extend(i,{offset:i.element.offset()}),i.options.tolerance,e)?(n=!0,!1):void 0}),n?!1:this.accept.call(this.element[0],s.currentItem||s.element)?(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",e,this.ui(s)),this.element):!1):!1},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var u=t.ui.intersect=function(){function t(t,e,i){return t>=e&&e+i>t}return function(e,i,s,n){if(!i.offset)return!1;var o=(e.positionAbs||e.position.absolute).left+e.margins.left,a=(e.positionAbs||e.position.absolute).top+e.margins.top,r=o+e.helperProportions.width,l=a+e.helperProportions.height,h=i.offset.left,c=i.offset.top,u=h+i.proportions().width,d=c+i.proportions().height;switch(s){case"fit":return o>=h&&u>=r&&a>=c&&d>=l;case"intersect":return o+e.helperProportions.width/2>h&&u>r-e.helperProportions.width/2&&a+e.helperProportions.height/2>c&&d>l-e.helperProportions.height/2;case"pointer":return t(n.pageY,c,i.proportions().height)&&t(n.pageX,h,i.proportions().width);case"touch":return(a>=c&&d>=a||l>=c&&d>=l||c>a&&l>d)&&(o>=h&&u>=o||r>=h&&u>=r||h>o&&r>u);default:return!1}}}();t.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(e,i){var s,n,o=t.ui.ddmanager.droppables[e.options.scope]||[],a=i?i.type:null,r=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(s=0;o.length>s;s++)if(!(o[s].options.disabled||e&&!o[s].accept.call(o[s].element[0],e.currentItem||e.element))){for(n=0;r.length>n;n++)if(r[n]===o[s].element[0]){o[s].proportions().height=0;continue t}o[s].visible="none"!==o[s].element.css("display"),o[s].visible&&("mousedown"===a&&o[s]._activate.call(o[s],i),o[s].offset=o[s].element.offset(),o[s].proportions({width:o[s].element[0].offsetWidth,height:o[s].element[0].offsetHeight}))}},drop:function(e,i){var s=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&u(e,this,this.options.tolerance,i)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),s},dragStart:function(e,i){e.element.parentsUntil("body").on("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)})},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,n,o,a=u(e,this,this.options.tolerance,i),r=!a&&this.isover?"isout":a&&!this.isover?"isover":null;r&&(this.options.greedy&&(n=this.options.scope,o=this.element.parents(":data(ui-droppable)").filter(function(){return t(this).droppable("instance").options.scope===n}),o.length&&(s=t(o[0]).droppable("instance"),s.greedyChild="isover"===r)),s&&"isover"===r&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),s&&"isout"===r&&(s.isout=!1,s.isover=!0,s._over.call(s,i)))}})},dragStop:function(e,i){e.element.parentsUntil("body").off("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}},t.uiBackCompat!==!1&&t.widget("ui.droppable",t.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),t.ui.droppable,t.widget("ui.resizable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return e[s]>0?!0:(e[s]=1,n=e[s]>0,e[s]=0,n)},_create:function(){var e,i=this.options,s=this;this._addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(e),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(e),this._proportionallyResize()),this._setupHandles(),i.autoHide&&t(this.element).on("mouseenter",function(){i.disabled||(s._removeClass("ui-resizable-autohide"),s._handles.show())}).on("mouseleave",function(){i.disabled||s.resizing||(s._addClass("ui-resizable-autohide"),s._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_setOption:function(t,e){switch(this._super(t,e),t){case"handles":this._removeHandles(),this._setupHandles();break;default:}},_setupHandles:function(){var e,i,s,n,o,a=this.options,r=this;if(this.handles=a.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=t(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),s=this.handles.split(","),this.handles={},i=0;s.length>i;i++)e=t.trim(s[i]),n="ui-resizable-"+e,o=t("<div>"),this._addClass(o,"ui-resizable-handle "+n),o.css({zIndex:a.zIndex}),this.handles[e]=".ui-resizable-"+e,this.element.append(o);this._renderAxis=function(e){var i,s,n,o;e=e||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=t(this.handles[i]),this._on(this.handles[i],{mousedown:r._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(s=t(this.handles[i],this.element),o=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(n,o),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){r.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),r.axis=o&&o[1]?o[1]:"se")}),a.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(e){var i,s,n=!1;for(i in this.handles)s=t(this.handles[i])[0],(s===e.target||t.contains(s,e.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(e){var i,s,n,o=this.options,a=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),o.containment&&(i+=t(o.containment).scrollLeft()||0,s+=t(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalPosition={left:i,top:s},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===n?this.axis+"-resize":n),this._addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i,s,n=this.originalMousePosition,o=this.axis,a=e.pageX-n.left||0,r=e.pageY-n.top||0,l=this._change[o];return this._updatePrevProperties(),l?(i=l.apply(this,[e,a,r]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),s=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(s)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(e){this.resizing=!1;var i,s,n,o,a,r,l,h=this.options,c=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&this._hasScroll(i[0],"left")?0:c.sizeDiff.height,o=s?0:c.sizeDiff.width,a={width:c.helper.width()-o,height:c.helper.height()-n},r=parseFloat(c.element.css("left"))+(c.position.left-c.originalPosition.left)||null,l=parseFloat(c.element.css("top"))+(c.position.top-c.originalPosition.top)||null,h.animate||this.element.css(t.extend(a,{top:l,left:r})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!h.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,i,s,n,o,a=this.options;o={minWidth:this._isNumber(a.minWidth)?a.minWidth:0,maxWidth:this._isNumber(a.maxWidth)?a.maxWidth:1/0,minHeight:this._isNumber(a.minHeight)?a.minHeight:0,maxHeight:this._isNumber(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||t)&&(e=o.minHeight*this.aspectRatio,s=o.minWidth/this.aspectRatio,i=o.maxHeight*this.aspectRatio,n=o.maxWidth/this.aspectRatio,e>o.minWidth&&(o.minWidth=e),s>o.minHeight&&(o.minHeight=s),o.maxWidth>i&&(o.maxWidth=i),o.maxHeight>n&&(o.maxHeight=n)),this._vBoundaries=o},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,s=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===s&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===s&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,s=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,n=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,o=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,a=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,r=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,h=/sw|nw|w/.test(i),c=/nw|ne|n/.test(i);return o&&(t.width=e.minWidth),a&&(t.height=e.minHeight),s&&(t.width=e.maxWidth),n&&(t.height=e.maxHeight),o&&h&&(t.left=r-e.minWidth),s&&h&&(t.left=r-e.maxWidth),a&&c&&(t.top=l-e.minHeight),n&&c&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,i=[],s=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],n=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];4>e;e++)i[e]=parseFloat(s[e])||0,i[e]+=parseFloat(n[e])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,i=this.helper||this.element;this._proportionallyResizeElements.length>e;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,s=this.originalPosition;return{left:s.left+e,width:i.width-e}},n:function(t,e,i){var s=this.originalSize,n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},sw:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,s]))},ne:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},nw:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,s]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).resizable("instance"),s=i.options,n=i._proportionallyResizeElements,o=n.length&&/textarea/i.test(n[0].nodeName),a=o&&i._hasScroll(n[0],"left")?0:i.sizeDiff.height,r=o?0:i.sizeDiff.width,l={width:i.size.width-r,height:i.size.height-a},h=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,c=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(l,c&&h?{top:c,left:h}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};n&&n.length&&t(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,i,s,n,o,a,r,l=t(this).resizable("instance"),h=l.options,c=l.element,u=h.containment,d=u instanceof t?u.get(0):/parent/.test(u)?c.parent().get(0):u;d&&(l.containerElement=t(d),/document/.test(u)||u===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(d),i=[],t(["Top","Right","Left","Bottom"]).each(function(t,s){i[t]=l._num(e.css("padding"+s))}),l.containerOffset=e.offset(),l.containerPosition=e.position(),l.containerSize={height:e.innerHeight()-i[3],width:e.innerWidth()-i[1]},s=l.containerOffset,n=l.containerSize.height,o=l.containerSize.width,a=l._hasScroll(d,"left")?d.scrollWidth:o,r=l._hasScroll(d)?d.scrollHeight:n,l.parentData={element:d,left:s.left,top:s.top,width:a,height:r}))},resize:function(e){var i,s,n,o,a=t(this).resizable("instance"),r=a.options,l=a.containerOffset,h=a.position,c=a._aspectRatio||e.shiftKey,u={top:0,left:0},d=a.containerElement,p=!0;d[0]!==document&&/static/.test(d.css("position"))&&(u=l),h.left<(a._helper?l.left:0)&&(a.size.width=a.size.width+(a._helper?a.position.left-l.left:a.position.left-u.left),c&&(a.size.height=a.size.width/a.aspectRatio,p=!1),a.position.left=r.helper?l.left:0),h.top<(a._helper?l.top:0)&&(a.size.height=a.size.height+(a._helper?a.position.top-l.top:a.position.top),c&&(a.size.width=a.size.height*a.aspectRatio,p=!1),a.position.top=a._helper?l.top:0),n=a.containerElement.get(0)===a.element.parent().get(0),o=/relative|absolute/.test(a.containerElement.css("position")),n&&o?(a.offset.left=a.parentData.left+a.position.left,a.offset.top=a.parentData.top+a.position.top):(a.offset.left=a.element.offset().left,a.offset.top=a.element.offset().top),i=Math.abs(a.sizeDiff.width+(a._helper?a.offset.left-u.left:a.offset.left-l.left)),s=Math.abs(a.sizeDiff.height+(a._helper?a.offset.top-u.top:a.offset.top-l.top)),i+a.size.width>=a.parentData.width&&(a.size.width=a.parentData.width-i,c&&(a.size.height=a.size.width/a.aspectRatio,p=!1)),s+a.size.height>=a.parentData.height&&(a.size.height=a.parentData.height-s,c&&(a.size.width=a.size.height*a.aspectRatio,p=!1)),p||(a.position.left=a.prevPosition.left,a.position.top=a.prevPosition.top,a.size.width=a.prevSize.width,a.size.height=a.prevSize.height)},stop:function(){var e=t(this).resizable("instance"),i=e.options,s=e.containerOffset,n=e.containerPosition,o=e.containerElement,a=t(e.helper),r=a.offset(),l=a.outerWidth()-e.sizeDiff.width,h=a.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(o.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:l,height:h}),e._helper&&!i.animate&&/static/.test(o.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:l,height:h})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance"),i=e.options;t(i.alsoResize).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseFloat(e.width()),height:parseFloat(e.height()),left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))})})},resize:function(e,i){var s=t(this).resizable("instance"),n=s.options,o=s.originalSize,a=s.originalPosition,r={height:s.size.height-o.height||0,width:s.size.width-o.width||0,top:s.position.top-a.top||0,left:s.position.left-a.left||0};t(n.alsoResize).each(function(){var e=t(this),s=t(this).data("ui-resizable-alsoresize"),n={},o=e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(o,function(t,e){var i=(s[e]||0)+(r[e]||0);i&&i>=0&&(n[e]=i||null)}),e.css(n)})},stop:function(){t(this).removeData("ui-resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),i=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}),e._addClass(e.ghost,"ui-resizable-ghost"),t.uiBackCompat!==!1&&"string"==typeof e.options.ghost&&e.ghost.addClass(this.options.ghost),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e,i=t(this).resizable("instance"),s=i.options,n=i.size,o=i.originalSize,a=i.originalPosition,r=i.axis,l="number"==typeof s.grid?[s.grid,s.grid]:s.grid,h=l[0]||1,c=l[1]||1,u=Math.round((n.width-o.width)/h)*h,d=Math.round((n.height-o.height)/c)*c,p=o.width+u,f=o.height+d,g=s.maxWidth&&p>s.maxWidth,m=s.maxHeight&&f>s.maxHeight,_=s.minWidth&&s.minWidth>p,v=s.minHeight&&s.minHeight>f;s.grid=l,_&&(p+=h),v&&(f+=c),g&&(p-=h),m&&(f-=c),/^(se|s|e)$/.test(r)?(i.size.width=p,i.size.height=f):/^(ne)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.top=a.top-d):/^(sw)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.left=a.left-u):((0>=f-c||0>=p-h)&&(e=i._getPaddingPlusBorderDimensions(this)),f-c>0?(i.size.height=f,i.position.top=a.top-d):(f=c-e.height,i.size.height=f,i.position.top=a.top+o.height-f),p-h>0?(i.size.width=p,i.position.left=a.left-u):(p=h-e.width,i.size.width=p,i.position.left=a.left+o.width-p))}}),t.ui.resizable,t.widget("ui.selectable",t.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){e.elementPos=t(e.element[0]).offset(),e.selectees=t(e.options.filter,e.element[0]),e._addClass(e.selectees,"ui-selectee"),e.selectees.each(function(){var i=t(this),s=i.offset(),n={left:s.left-e.elementPos.left,top:s.top-e.elementPos.top};t.data(this,"selectable-item",{element:this,$element:i,left:n.left,top:n.top,right:n.left+i.outerWidth(),bottom:n.top+i.outerHeight(),startselected:!1,selected:i.hasClass("ui-selected"),selecting:i.hasClass("ui-selecting"),unselecting:i.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=t("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(e){var i=this,s=this.options;this.opos=[e.pageX,e.pageY],this.elementPos=t(this.element[0]).offset(),this.options.disabled||(this.selectees=t(s.filter,this.element[0]),this._trigger("start",e),t(s.appendTo).append(this.helper),this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0}),s.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var s=t.data(this,"selectable-item");s.startselected=!0,e.metaKey||e.ctrlKey||(i._removeClass(s.$element,"ui-selected"),s.selected=!1,i._addClass(s.$element,"ui-unselecting"),s.unselecting=!0,i._trigger("unselecting",e,{unselecting:s.element}))}),t(e.target).parents().addBack().each(function(){var s,n=t.data(this,"selectable-item");return n?(s=!e.metaKey&&!e.ctrlKey||!n.$element.hasClass("ui-selected"),i._removeClass(n.$element,s?"ui-unselecting":"ui-selected")._addClass(n.$element,s?"ui-selecting":"ui-unselecting"),n.unselecting=!s,n.selecting=s,n.selected=s,s?i._trigger("selecting",e,{selecting:n.element}):i._trigger("unselecting",e,{unselecting:n.element}),!1):void 0}))},_mouseDrag:function(e){if(this.dragged=!0,!this.options.disabled){var i,s=this,n=this.options,o=this.opos[0],a=this.opos[1],r=e.pageX,l=e.pageY;return o>r&&(i=r,r=o,o=i),a>l&&(i=l,l=a,a=i),this.helper.css({left:o,top:a,width:r-o,height:l-a}),this.selectees.each(function(){var i=t.data(this,"selectable-item"),h=!1,c={};i&&i.element!==s.element[0]&&(c.left=i.left+s.elementPos.left,c.right=i.right+s.elementPos.left,c.top=i.top+s.elementPos.top,c.bottom=i.bottom+s.elementPos.top,"touch"===n.tolerance?h=!(c.left>r||o>c.right||c.top>l||a>c.bottom):"fit"===n.tolerance&&(h=c.left>o&&r>c.right&&c.top>a&&l>c.bottom),h?(i.selected&&(s._removeClass(i.$element,"ui-selected"),i.selected=!1),i.unselecting&&(s._removeClass(i.$element,"ui-unselecting"),i.unselecting=!1),i.selecting||(s._addClass(i.$element,"ui-selecting"),i.selecting=!0,s._trigger("selecting",e,{selecting:i.element}))):(i.selecting&&((e.metaKey||e.ctrlKey)&&i.startselected?(s._removeClass(i.$element,"ui-selecting"),i.selecting=!1,s._addClass(i.$element,"ui-selected"),i.selected=!0):(s._removeClass(i.$element,"ui-selecting"),i.selecting=!1,i.startselected&&(s._addClass(i.$element,"ui-unselecting"),i.unselecting=!0),s._trigger("unselecting",e,{unselecting:i.element}))),i.selected&&(e.metaKey||e.ctrlKey||i.startselected||(s._removeClass(i.$element,"ui-selected"),i.selected=!1,s._addClass(i.$element,"ui-unselecting"),i.unselecting=!0,s._trigger("unselecting",e,{unselecting:i.element})))))}),!1}},_mouseStop:function(e){var i=this;return this.dragged=!1,t(".ui-unselecting",this.element[0]).each(function(){var s=t.data(this,"selectable-item");i._removeClass(s.$element,"ui-unselecting"),s.unselecting=!1,s.startselected=!1,i._trigger("unselected",e,{unselected:s.element})}),t(".ui-selecting",this.element[0]).each(function(){var s=t.data(this,"selectable-item");i._removeClass(s.$element,"ui-selecting")._addClass(s.$element,"ui-selected"),s.selecting=!1,s.selected=!0,s.startselected=!0,i._trigger("selected",e,{selected:s.element})}),this._trigger("stop",e),this.helper.remove(),!1}}),t.widget("ui.sortable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return t>=e&&e+i>t},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){var e=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),t.each(this.items,function(){e._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,i){var s=null,n=!1,o=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,o.widgetName+"-item")===o?(s=t(this),!1):void 0}),t.data(e.target,o.widgetName+"-item")===o&&(s=t(e.target)),s?!this.options.handle||i||(t(this.options.handle,s).find("*").addBack().each(function(){this===e.target&&(n=!0)}),n)?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(e,i,s){var n,o,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",a.cursor),this.storedStylesheet=t("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(o)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,s,n,o,a=this.options,r=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+a.scrollSpeed:e.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+a.scrollSpeed:e.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(e.pageY-this.document.scrollTop()<a.scrollSensitivity?r=this.document.scrollTop(this.document.scrollTop()-a.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<a.scrollSensitivity&&(r=this.document.scrollTop(this.document.scrollTop()+a.scrollSpeed)),e.pageX-this.document.scrollLeft()<a.scrollSensitivity?r=this.document.scrollLeft(this.document.scrollLeft()-a.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<a.scrollSensitivity&&(r=this.document.scrollLeft(this.document.scrollLeft()+a.scrollSpeed))),r!==!1&&t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],o=this._intersectsWithPointer(s),o&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==n&&!t.contains(this.placeholder[0],n)&&("semi-dynamic"===this.options.type?!t.contains(this.element[0],n):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(e,s),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var s=this,n=this.placeholder.offset(),o=this.options.axis,a={};o&&"x"!==o||(a.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(a.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){s._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new t.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&s.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!s.length&&e.key&&s.push(e.key+"="),s.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},i.each(function(){s.push(t(e.item||this).attr(e.attribute||"id")||"")}),s},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,o=t.left,a=o+t.width,r=t.top,l=r+t.height,h=this.offset.click.top,c=this.offset.click.left,u="x"===this.options.axis||s+h>r&&l>s+h,d="y"===this.options.axis||e+c>o&&a>e+c,p=u&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:e+this.helperProportions.width/2>o&&a>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&l>n-this.helperProportions.height/2},_intersectsWithPointer:function(t){var e,i,s="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),n="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),o=s&&n;return o?(e=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection(),this.floating?"right"===i||"down"===e?2:1:e&&("down"===e?2:1)):!1},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),s=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?"right"===n&&i||"left"===n&&!i:s&&("down"===s&&e||"up"===s&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){function i(){r.push(this)}var s,n,o,a,r=[],l=[],h=this._connectWith();if(h&&e)for(s=h.length-1;s>=0;s--)for(o=t(h[s],this.document[0]),n=o.length-1;n>=0;n--)a=t.data(o[n],this.widgetFullName),a&&a!==this&&!a.options.disabled&&l.push([t.isFunction(a.options.items)?a.options.items.call(a.element):t(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a]);for(l.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=l.length-1;s>=0;s--)l[s][0].each(i);return t(r)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;e.length>i;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,s,n,o,a,r,l,h,c=this.items,u=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(i=d.length-1;i>=0;i--)for(n=t(d[i],this.document[0]),s=n.length-1;s>=0;s--)o=t.data(n[s],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(u.push([t.isFunction(o.options.items)?o.options.items.call(o.element[0],e,{item:this.currentItem}):t(o.options.items,o.element),o]),this.containers.push(o));for(i=u.length-1;i>=0;i--)for(a=u[i][1],r=u[i][0],s=0,h=r.length;h>s;s++)l=t(r[s]),l.data(this.widgetName+"-item",a),c.push({item:l,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,o;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?t(this.options.toleranceElement,s.item):s.item,e||(s.width=n.outerWidth(),s.height=n.outerHeight()),o=n.offset(),s.left=o.left,s.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)o=this.containers[i].element.offset(),this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var i,s=e.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=e.currentItem[0].nodeName.toLowerCase(),n=t("<"+s+">",e.document[0]);return e._addClass(n,"ui-sortable-placeholder",i||e.currentItem[0].className)._removeClass(n,"ui-sortable-helper"),"tbody"===s?e._createTrPlaceholder(e.currentItem.find("tr").eq(0),t("<tr>",e.document[0]).appendTo(n)):"tr"===s?e._createTrPlaceholder(e.currentItem,n):"img"===s&&n.attr("src",e.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(t,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(s.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),s.placeholder.update(e,e.placeholder)},_createTrPlaceholder:function(e,i){var s=this;e.children().each(function(){t("<td>&#160;</td>",s.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(e){var i,s,n,o,a,r,l,h,c,u,d=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!t.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(d&&t.contains(this.containers[i].element[0],d.element[0]))continue;d=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",e,this._uiHash(this)),this.containers[i].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(n=1e4,o=null,c=d.floating||this._isFloating(this.currentItem),a=c?"left":"top",r=c?"width":"height",u=c?"pageX":"pageY",s=this.items.length-1;s>=0;s--)t.contains(this.containers[p].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(l=this.items[s].item.offset()[a],h=!1,e[u]-l>this.items[s][r]/2&&(h=!0),n>Math.abs(e[u]-l)&&(n=Math.abs(e[u]-l),o=this.items[s],this.direction=h?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1),void 0;o?this._rearrange(e,o,null,!0):this._rearrange(e,null,this.containers[p].element,!0),this._trigger("change",e,this._uiHash()),this.containers[p]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===n.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===n.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(e=t(n.containment)[0],i=t(n.containment).offset(),s="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"===e?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:n.scrollLeft())*s}},_generatePosition:function(e){var i,s,n=this.options,o=e.pageX,a=e.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((a-this.originalPageY)/n.grid[1])*n.grid[1],a=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((o-this.originalPageX)/n.grid[0])*n.grid[0],o=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:r.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:r.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(t,e){function i(t,e,i){return function(s){i._trigger(t,s,e._uiHash(e))}}this.reverting=!1;var s,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)("auto"===this._storedCSS[s]||"static"===this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&n.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||n.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(n.push(function(t){this._trigger("remove",t,this._uiHash())}),n.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)e||n.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(s=0;n.length>s;s++)n[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}}),t.widget("ui.accordion",{version:"1.12.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var e=this.options;this.prevShow=this.prevHide=t(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),e.collapsible||e.active!==!1&&null!=e.active||(e.active=0),this._processPanels(),0>e.active&&(e.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():t()}},_createIcons:function(){var e,i,s=this.options.icons;s&&(e=t("<span>"),this._addClass(e,"ui-accordion-header-icon","ui-icon "+s.header),e.prependTo(this.headers),i=this.active.children(".ui-accordion-header-icon"),this._removeClass(i,s.header)._addClass(i,null,s.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),t=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){return"active"===t?(this._activate(e),void 0):("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||this.options.active!==!1||this._activate(0),"icons"===t&&(this._destroyIcons(),e&&this._createIcons()),void 0)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t),this._toggleClass(null,"ui-state-disabled",!!t),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!t)},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var i=t.ui.keyCode,s=this.headers.length,n=this.headers.index(e.target),o=!1;switch(e.keyCode){case i.RIGHT:case i.DOWN:o=this.headers[(n+1)%s];break;case i.LEFT:case i.UP:o=this.headers[(n-1+s)%s];break;case i.SPACE:case i.ENTER:this._eventHandler(e);break;case i.HOME:o=this.headers[0];break;case i.END:o=this.headers[s-1]}o&&(t(e.target).attr("tabIndex",-1),t(o).attr("tabIndex",0),t(o).trigger("focus"),e.preventDefault())}},_panelKeyDown:function(e){e.keyCode===t.ui.keyCode.UP&&e.ctrlKey&&t(e.currentTarget).prev().trigger("focus")},refresh:function(){var e=this.options;this._processPanels(),e.active===!1&&e.collapsible===!0||!this.headers.length?(e.active=!1,this.active=t()):e.active===!1?this._activate(0):this.active.length&&!t.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(e.active=!1,this.active=t()):this._activate(Math.max(0,e.active-1)):e.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var t=this.headers,e=this.panels;this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),e&&(this._off(t.not(this.headers)),this._off(e.not(this.panels)))},_refresh:function(){var e,i=this.options,s=i.heightStyle,n=this.element.parent();this.active=this._findActive(i.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each(function(){var e=t(this),i=e.uniqueId().attr("id"),s=e.next(),n=s.uniqueId().attr("id");e.attr("aria-controls",n),s.attr("aria-labelledby",i)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(i.event),"fill"===s?(e=n.height(),this.element.siblings(":visible").each(function(){var i=t(this),s=i.css("position");"absolute"!==s&&"fixed"!==s&&(e-=i.outerHeight(!0))}),this.headers.each(function(){e-=t(this).outerHeight(!0)}),this.headers.next().each(function(){t(this).height(Math.max(0,e-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===s&&(e=0,this.headers.next().each(function(){var i=t(this).is(":visible");i||t(this).show(),e=Math.max(e,t(this).css("height","").height()),i||t(this).hide()}).height(e))},_activate:function(e){var i=this._findActive(e)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return"number"==typeof e?this.headers.eq(e):t()},_setupEvents:function(e){var i={keydown:"_keydown"};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(e){var i,s,n=this.options,o=this.active,a=t(e.currentTarget),r=a[0]===o[0],l=r&&n.collapsible,h=l?t():a.next(),c=o.next(),u={oldHeader:o,oldPanel:c,newHeader:l?t():a,newPanel:h};e.preventDefault(),r&&!n.collapsible||this._trigger("beforeActivate",e,u)===!1||(n.active=l?!1:this.headers.index(a),this.active=r?t():a,this._toggle(u),this._removeClass(o,"ui-accordion-header-active","ui-state-active"),n.icons&&(i=o.children(".ui-accordion-header-icon"),this._removeClass(i,null,n.icons.activeHeader)._addClass(i,null,n.icons.header)),r||(this._removeClass(a,"ui-accordion-header-collapsed")._addClass(a,"ui-accordion-header-active","ui-state-active"),n.icons&&(s=a.children(".ui-accordion-header-icon"),this._removeClass(s,null,n.icons.header)._addClass(s,null,n.icons.activeHeader)),this._addClass(a.next(),"ui-accordion-content-active")))},_toggle:function(e){var i=e.newPanel,s=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=s,this.options.animate?this._animate(i,s,e):(s.hide(),i.show(),this._toggleComplete(e)),s.attr({"aria-hidden":"true"}),s.prev().attr({"aria-selected":"false","aria-expanded":"false"}),i.length&&s.length?s.prev().attr({tabIndex:-1,"aria-expanded":"false"}):i.length&&this.headers.filter(function(){return 0===parseInt(t(this).attr("tabIndex"),10)}).attr("tabIndex",-1),i.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(t,e,i){var s,n,o,a=this,r=0,l=t.css("box-sizing"),h=t.length&&(!e.length||t.index()<e.index()),c=this.options.animate||{},u=h&&c.down||c,d=function(){a._toggleComplete(i)};return"number"==typeof u&&(o=u),"string"==typeof u&&(n=u),n=n||u.easing||c.easing,o=o||u.duration||c.duration,e.length?t.length?(s=t.show().outerHeight(),e.animate(this.hideProps,{duration:o,easing:n,step:function(t,e){e.now=Math.round(t)}}),t.hide().animate(this.showProps,{duration:o,easing:n,complete:d,step:function(t,i){i.now=Math.round(t),"height"!==i.prop?"content-box"===l&&(r+=i.now):"content"!==a.options.heightStyle&&(i.now=Math.round(s-e.outerHeight()-r),r=0)}}),void 0):e.animate(this.hideProps,o,n,d):t.animate(this.showProps,o,n,d)},_toggleComplete:function(t){var e=t.oldPanel,i=e.prev();this._removeClass(e,"ui-accordion-content-active"),this._removeClass(i,"ui-accordion-header-active")._addClass(i,"ui-accordion-header-collapsed"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}}),t.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(t){t.preventDefault()},"click .ui-menu-item":function(e){var i=t(e.target),s=t(t.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(e),e.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(e):!this.element.is(":focus")&&s.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){if(!this.previousFilter){var i=t(e.target).closest(".ui-menu-item"),s=t(e.currentTarget);i[0]===s[0]&&(this._removeClass(s.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(e,s))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.find(this.options.items).eq(0);e||this.focus(t,i)},blur:function(e){this._delay(function(){var i=!t.contains(this.element[0],t.ui.safeActiveElement(this.document[0]));i&&this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){var e=this.element.find(".ui-menu-item").removeAttr("role aria-disabled"),i=e.children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),i.children().each(function(){var e=t(this);e.data("ui-menu-submenu-caret")&&e.remove()})},_keydown:function(e){var i,s,n,o,a=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:a=!1,s=this.previousFilter||"",o=!1,n=e.keyCode>=96&&105>=e.keyCode?""+(e.keyCode-96):String.fromCharCode(e.keyCode),clearTimeout(this.filterTimer),n===s?o=!0:n=s+n,i=this._filterMenuItems(n),i=o&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(n=String.fromCharCode(e.keyCode),i=this._filterMenuItems(n)),i.length?(this.focus(e,i),this.previousFilter=n,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}a&&e.preventDefault()},_activate:function(t){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,i,s,n,o,a=this,r=this.options.icons.submenu,l=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),s=l.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),i=e.prev(),s=t("<span>").data("ui-menu-submenu-caret",!0);a._addClass(s,"ui-menu-icon","ui-icon "+r),i.attr("aria-haspopup","true").prepend(s),e.attr("aria-labelledby",i.attr("id"))}),this._addClass(s,"ui-menu","ui-widget ui-widget-content ui-front"),e=l.add(this.element),i=e.find(this.options.items),i.not(".ui-menu-item").each(function(){var e=t(this);a._isDivider(e)&&a._addClass(e,"ui-menu-divider","ui-widget-content")}),n=i.not(".ui-menu-item, .ui-menu-divider"),o=n.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(n,"ui-menu-item")._addClass(o,"ui-menu-item-wrapper"),i.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){if("icons"===t){var i=this.element.find(".ui-menu-icon");this._removeClass(i,null,this.options.icons.submenu)._addClass(i,null,e.submenu)}this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t+""),this._toggleClass(null,"ui-state-disabled",!!t)},focus:function(t,e){var i,s,n;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),s=this.active.children(".ui-menu-item-wrapper"),this._addClass(s,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),n=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(n,null,"ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=e.children(".ui-menu"),i.length&&t&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,s,n,o,a,r;this._hasScroll()&&(i=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,n=e.offset().top-this.activeMenu.offset().top-i-s,o=this.activeMenu.scrollTop(),a=this.activeMenu.height(),r=e.outerHeight(),0>n?this.activeMenu.scrollTop(o+n):n+r>a&&this.activeMenu.scrollTop(o+n-a+r))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",t,{item:this.active}),this.active=null)},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(e),this._removeClass(s.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=s},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(e){return!t(e.target).closest(".ui-menu").length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var s;this.active&&(s="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.find(this.options.items)[e]()),this.focus(i,s)},nextPage:function(e){var i,s,n;return this.active?(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=t(this),0>i.offset().top-s-n}),this.focus(e,i)):this.focus(e,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())),void 0):(this.next(e),void 0)},previousPage:function(e){var i,s,n;return this.active?(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=t(this),i.offset().top-s+n>0}),this.focus(e,i)):this.focus(e,this.activeMenu.find(this.options.items).first())),void 0):(this.next(e),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)},_filterMenuItems:function(e){var i=e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),s=RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return s.test(t.trim(t(this).children(".ui-menu-item-wrapper").text()))})}}),t.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var e,i,s,n=this.element[0].nodeName.toLowerCase(),o="textarea"===n,a="input"===n;this.isMultiLine=o||!a&&this._isContentEditable(this.element),this.valueMethod=this.element[o||a?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))return e=!0,s=!0,i=!0,void 0;e=!1,s=!1,i=!1;var o=t.ui.keyCode;switch(n.keyCode){case o.PAGE_UP:e=!0,this._move("previousPage",n);break;case o.PAGE_DOWN:e=!0,this._move("nextPage",n);break;case o.UP:e=!0,this._keyEvent("previous",n);break;case o.DOWN:e=!0,this._keyEvent("next",n);break;case o.ENTER:this.menu.active&&(e=!0,n.preventDefault(),this.menu.select(n));break;case o.TAB:this.menu.active&&this.menu.select(n);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}},keypress:function(s){if(e)return e=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&s.preventDefault(),void 0;if(!i){var n=t.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s)}}},input:function(t){return s?(s=!1,t.preventDefault(),void 0):(this._searchTimeout(t),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(t),this._change(t),void 0)}}),this._initSource(),this.menu=t("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,this.element[0]!==t.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")})},menufocus:function(e,i){var s,n;return this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type))?(this.menu.blur(),this.document.one("mousemove",function(){t(e.target).trigger(e.originalEvent)}),void 0):(n=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",e,{item:n})&&e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(n.value),s=i.item.attr("aria-label")||n.value,s&&t.trim(s).length&&(this.liveRegion.children().hide(),t("<div>").text(s).appendTo(this.liveRegion)),void 0)},menuselect:function(e,i){var s=i.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==t.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=s})),!1!==this._trigger("select",e,{item:s})&&this._value(s.value),this.term=this._value(),this.close(e),this.selectedItem=s}}),this.liveRegion=t("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(e){var i=this.menu.element[0];return e.target===this.element[0]||e.target===i||t.contains(i,e.target)},_closeOnClickOutside:function(t){this._isEventTargetInWidget(t)||this.close()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(".ui-front, dialog")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,i,s=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(i,s){s(t.ui.autocomplete.filter(e,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(e,n){s.xhr&&s.xhr.abort(),s.xhr=t.ajax({url:i,data:e,dataType:"json",success:function(t){n(t)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){var e=this.term===this._value(),i=this.menu.element.is(":visible"),s=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey;(!e||e&&!i&&!s)&&(this.selectedItem=null,this.search(null,t))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):this._trigger("search",e)!==!1?this._search(t):void 0},_search:function(t){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return t.proxy(function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")},this)},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return"string"==typeof e?{label:e,value:e}:t.extend({},e,{label:e.label||e.value,value:e.value||e.label})})},_suggest:function(e){var i=this.menu.element.empty();this._renderMenu(i,e),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,i){var s=this;t.each(i,function(t,i){s._renderItemData(e,i)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,i){return t("<li>").append(t("<div>").text(i.label)).appendTo(e)},_move:function(t,e){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),this.menu.blur(),void 0):(this.menu[t](e),void 0):(this.search(null,e),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(t,e),e.preventDefault())},_isContentEditable:function(t){if(!t.length)return!1;var e=t.prop("contentEditable");return"inherit"===e?this._isContentEditable(t.parent()):"true"===e}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,i){var s=RegExp(t.ui.autocomplete.escapeRegex(i),"i");return t.grep(e,function(t){return s.test(t.label||t.value||t)})}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.children().hide(),t("<div>").text(i).appendTo(this.liveRegion))}}),t.ui.autocomplete;var d=/ui-corner-([a-z]){2,6}/g;t.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var e=this,i=[];t.each(this.options.items,function(s,n){var o,a={};return n?"controlgroupLabel"===s?(o=e.element.find(n),o.each(function(){var e=t(this);e.children(".ui-controlgroup-label-contents").length||e.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),e._addClass(o,null,"ui-widget ui-widget-content ui-state-default"),i=i.concat(o.get()),void 0):(t.fn[s]&&(a=e["_"+s+"Options"]?e["_"+s+"Options"]("middle"):{classes:{}},e.element.find(n).each(function(){var n=t(this),o=n[s]("instance"),r=t.widget.extend({},a);if("button"!==s||!n.parent(".ui-spinner").length){o||(o=n[s]()[s]("instance")),o&&(r.classes=e._resolveClassesValues(r.classes,o)),n[s](r);var l=n[s]("widget");t.data(l[0],"ui-controlgroup-data",o?o:n[s]("instance")),i.push(l[0])}})),void 0):void 0}),this.childWidgets=t(t.unique(i)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(e){this.childWidgets.each(function(){var i=t(this),s=i.data("ui-controlgroup-data");s&&s[e]&&s[e]()})},_updateCornerClass:function(t,e){var i="ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all",s=this._buildSimpleOptions(e,"label").classes.label;this._removeClass(t,null,i),this._addClass(t,null,s)},_buildSimpleOptions:function(t,e){var i="vertical"===this.options.direction,s={classes:{}};return s.classes[e]={middle:"",first:"ui-corner-"+(i?"top":"left"),last:"ui-corner-"+(i?"bottom":"right"),only:"ui-corner-all"}[t],s},_spinnerOptions:function(t){var e=this._buildSimpleOptions(t,"ui-spinner");return e.classes["ui-spinner-up"]="",e.classes["ui-spinner-down"]="",e},_buttonOptions:function(t){return this._buildSimpleOptions(t,"ui-button")},_checkboxradioOptions:function(t){return this._buildSimpleOptions(t,"ui-checkboxradio-label")},_selectmenuOptions:function(t){var e="vertical"===this.options.direction;return{width:e?"auto":!1,classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(e?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(e?"top":"left")},last:{"ui-selectmenu-button-open":e?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(e?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[t]}},_resolveClassesValues:function(e,i){var s={};return t.each(e,function(n){var o=i.options.classes[n]||"";o=t.trim(o.replace(d,"")),s[n]=(o+" "+e[n]).replace(/\s+/g," ")}),s},_setOption:function(t,e){return"direction"===t&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(t,e),"disabled"===t?(this._callChildMethod(e?"disable":"enable"),void 0):(this.refresh(),void 0)},refresh:function(){var e,i=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),e=this.childWidgets,this.options.onlyVisible&&(e=e.filter(":visible")),e.length&&(t.each(["first","last"],function(t,s){var n=e[s]().data("ui-controlgroup-data");if(n&&i["_"+n.widgetName+"Options"]){var o=i["_"+n.widgetName+"Options"](1===e.length?"only":s);o.classes=i._resolveClassesValues(o.classes,n),n.element[n.widgetName](o)}else i._updateCornerClass(e[s](),s)}),this._callChildMethod("refresh"))}}),t.widget("ui.checkboxradio",[t.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var e,i,s=this,n=this._super()||{};return this._readType(),i=this.element.labels(),this.label=t(i[i.length-1]),this.label.length||t.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each(function(){s.originalLabel+=3===this.nodeType?t(this).text():this.outerHTML}),this.originalLabel&&(n.label=this.originalLabel),e=this.element[0].disabled,null!=e&&(n.disabled=e),n},_create:function(){var t=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),t&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var e=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===e&&/radio|checkbox/.test(this.type)||t.error("Can't create checkboxradio on element.nodeName="+e+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var e,i=this.element[0].name,s="input[name='"+t.ui.escapeSelector(i)+"']";return i?(e=this.form.length?t(this.form[0].elements).filter(s):t(s).filter(function(){return 0===t(this).form().length}),e.not(this.element)):t([])},_toggleClasses:function(){var e=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",e)._toggleClass(this.icon,null,"ui-icon-blank",!e),"radio"===this.type&&this._getRadioGroup().each(function(){var e=t(this).checkboxradio("instance");e&&e._removeClass(e.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(t,e){return"label"!==t||e?(this._super(t,e),"disabled"===t?(this._toggleClass(this.label,null,"ui-state-disabled",e),this.element[0].disabled=e,void 0):(this.refresh(),void 0)):void 0},_updateIcon:function(e){var i="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=t("<span>"),this.iconSpace=t("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(i+=e?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,e?"ui-icon-blank":"ui-icon-check")):i+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",i),e||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var t=this.label.contents().not(this.element[0]);this.icon&&(t=t.not(this.icon[0])),this.iconSpace&&(t=t.not(this.iconSpace[0])),t.remove(),this.label.append(this.options.label)},refresh:function(){var t=this.element[0].checked,e=this.element[0].disabled;this._updateIcon(t),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),null!==this.options.label&&this._updateLabel(),e!==this.options.disabled&&this._setOptions({disabled:e})}}]),t.ui.checkboxradio,t.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var t,e=this._super()||{};return this.isInput=this.element.is("input"),t=this.element[0].disabled,null!=t&&(e.disabled=t),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(e.label=this.originalLabel),e},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(e){e.keyCode===t.ui.keyCode.SPACE&&(e.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(e,i){var s="iconPosition"!==e,n=s?this.options.iconPosition:i,o="top"===n||"bottom"===n;this.icon?s&&this._removeClass(this.icon,null,this.options.icon):(this.icon=t("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),s&&this._addClass(this.icon,null,i),this._attachIcon(n),o?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=t("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(n))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(t){this.icon[/^(?:end|bottom)/.test(t)?"before":"after"](this.iconSpace)},_attachIcon:function(t){this.element[/^(?:end|bottom)/.test(t)?"append":"prepend"](this.icon)},_setOptions:function(t){var e=void 0===t.showLabel?this.options.showLabel:t.showLabel,i=void 0===t.icon?this.options.icon:t.icon;e||i||(t.showLabel=!0),this._super(t)},_setOption:function(t,e){"icon"===t&&(e?this._updateIcon(t,e):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===t&&this._updateIcon(t,e),"showLabel"===t&&(this._toggleClass("ui-button-icon-only",null,!e),this._updateTooltip()),"label"===t&&(this.isInput?this.element.val(e):(this.element.html(e),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(t,e),"disabled"===t&&(this._toggleClass(null,"ui-state-disabled",e),this.element[0].disabled=e,e&&this.element.blur())},refresh:function(){var t=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOptions({disabled:t}),this._updateTooltip()}}),t.uiBackCompat!==!1&&(t.widget("ui.button",t.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(t,e){return"text"===t?(this._super("showLabel",e),void 0):("showLabel"===t&&(this.options.text=e),"icon"===t&&(this.options.icons.primary=e),"icons"===t&&(e.primary?(this._super("icon",e.primary),this._super("iconPosition","beginning")):e.secondary&&(this._super("icon",e.secondary),this._super("iconPosition","end"))),this._superApply(arguments),void 0)}}),t.fn.button=function(e){return function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?e.apply(this,arguments):(t.ui.checkboxradio||t.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}}(t.fn.button),t.fn.buttonset=function(){return t.ui.controlgroup||t.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),t.ui.button,t.extend(t.ui,{datepicker:{version:"1.12.1"}});var p;t.extend(s.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return a(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var s,n,o;s=e.nodeName.toLowerCase(),n="div"===s||"span"===s,e.id||(this.uuid+=1,e.id="dp"+this.uuid),o=this._newInst(t(e),n),o.settings=t.extend({},i||{}),"input"===s?this._connectDatepicker(e,o):n&&this._inlineDatepicker(e,o)},_newInst:function(e,i){var s=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:s,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?n(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var s=t(e);i.append=t([]),i.trigger=t([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(i),t.data(e,"datepicker",i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var s,n,o,a=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),a&&(i.append=t("<span class='"+this._appendClass+"'>"+a+"</span>"),e[r?"before":"after"](i.append)),e.off("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,"showOn"),("focus"===s||"both"===s)&&e.on("focus",this._showDatepicker),("button"===s||"both"===s)&&(n=this._get(i,"buttonText"),o=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:o,alt:n,title:n}):t("<button type='button'></button>").addClass(this._triggerClass).html(o?t("<img/>").attr({src:o,alt:n,title:n}):n)),e[r?"before":"after"](i.trigger),i.trigger.on("click",function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,s,n,o=new Date(2009,11,20),a=this._get(t,"dateFormat");a.match(/[DM]/)&&(e=function(t){for(i=0,s=0,n=0;t.length>n;n++)t[n].length>i&&(i=t[n].length,s=n);return s},o.setMonth(e(this._get(t,a.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(e(this._get(t,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),t.input.attr("size",this._formatDate(t,o).length)}},_inlineDatepicker:function(e,i){var s=t(e);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),t.data(e,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,s,n,o){var r,l,h,c,u,d=this._dialogInst;return d||(this.uuid+=1,r="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+r+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),t("body").append(this._dialogInput),d=this._dialogInst=this._newInst(this._dialogInput,!1),d.settings={},t.data(this._dialogInput[0],"datepicker",d)),a(d.settings,n||{}),i=i&&i.constructor===Date?this._formatDate(d,i):i,this._dialogInput.val(i),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(l=document.documentElement.clientWidth,h=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[l/2-100+c,h/2-150+u]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),d.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],"datepicker",d),this},_destroyDatepicker:function(e){var i,s=t(e),n=t.data(e,"datepicker");s.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,"datepicker"),"input"===i?(n.append.remove(),n.trigger.remove(),s.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):("div"===i||"span"===i)&&s.removeClass(this.markerClassName).empty(),p===n&&(p=null))},_enableDatepicker:function(e){var i,s,n=t(e),o=t.data(e,"datepicker");n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var i,s,n=t(e),o=t.data(e,"datepicker");n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;this._disabledInputs.length>e;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,"datepicker")}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,i,s){var n,o,r,l,h=this._getInst(e);return 2===arguments.length&&"string"==typeof i?"defaults"===i?t.extend({},t.datepicker._defaults):h?"all"===i?t.extend({},h.settings):this._get(h,i):null:(n=i||{},"string"==typeof i&&(n={},n[i]=s),h&&(this._curInst===h&&this._hideDatepicker(),o=this._getDateDatepicker(e,!0),r=this._getMinMaxDate(h,"min"),l=this._getMinMaxDate(h,"max"),a(h.settings,n),null!==r&&void 0!==n.dateFormat&&void 0===n.minDate&&(h.settings.minDate=this._formatDate(h,r)),null!==l&&void 0!==n.dateFormat&&void 0===n.maxDate&&(h.settings.maxDate=this._formatDate(h,l)),"disabled"in n&&(n.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(t(e),h),this._autoSize(h),this._setDate(h,o),this._updateAlternate(h),this._updateDatepicker(h)),void 0)},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,s,n,o=t.datepicker._getInst(e.target),a=!0,r=o.dpDiv.is(".ui-datepicker-rtl");if(o._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),a=!1;break;case 13:return n=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",o.dpDiv),n[0]&&t.datepicker._selectDay(e.target,o.selectedMonth,o.selectedYear,n[0]),i=t.datepicker._get(o,"onSelect"),i?(s=t.datepicker._formatDate(o),i.apply(o.input?o.input[0]:null,[s,o])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),a=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),a=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?1:-1,"D"),a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),a=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?-1:1,"D"),a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),a=e.ctrlKey||e.metaKey;break;default:a=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):a=!1;a&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var i,s,n=t.datepicker._getInst(e.target);return t.datepicker._get(n,"constrainInput")?(i=t.datepicker._possibleChars(t.datepicker._get(n,"dateFormat")),s=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||" ">s||!i||i.indexOf(s)>-1):void 0},_doKeyUp:function(e){var i,s=t.datepicker._getInst(e.target);if(s.input.val()!==s.lastVal)try{i=t.datepicker.parseDate(t.datepicker._get(s,"dateFormat"),s.input?s.input.val():null,t.datepicker._getFormatConfig(s)),i&&(t.datepicker._setDateFromField(s),t.datepicker._updateAlternate(s),t.datepicker._updateDatepicker(s))}catch(n){}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!==e.nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),!t.datepicker._isDisabledDatepicker(e)&&t.datepicker._lastInput!==e){var s,n,o,r,l,h,c;s=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==s&&(t.datepicker._curInst.dpDiv.stop(!0,!0),s&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),n=t.datepicker._get(s,"beforeShow"),o=n?n.apply(e,[e,s]):{},o!==!1&&(a(s.settings,o),s.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(s),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),r=!1,t(e).parents().each(function(){return r|="fixed"===t(this).css("position"),!r}),l={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,s.dpDiv.empty(),s.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(s),l=t.datepicker._checkOffset(s,l,r),s.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":r?"fixed":"absolute",display:"none",left:l.left+"px",top:l.top+"px"}),s.inline||(h=t.datepicker._get(s,"showAnim"),c=t.datepicker._get(s,"duration"),s.dpDiv.css("z-index",i(t(e))+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[h]?s.dpDiv.show(h,t.datepicker._get(s,"showOptions"),c):s.dpDiv[h||"show"](h?c:null),t.datepicker._shouldFocusInput(s)&&s.input.trigger("focus"),t.datepicker._curInst=s))}},_updateDatepicker:function(e){this.maxRows=4,p=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var i,s=this._getNumberOfMonths(e),n=s[1],a=17,r=e.dpDiv.find("."+this._dayOverClass+" a");r.length>0&&o.apply(r.get(0)),e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&e.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",a*n+"em"),e.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.trigger("focus"),e.yearshtml&&(i=e.yearshtml,setTimeout(function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),i=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,i,s){var n=e.dpDiv.outerWidth(),o=e.dpDiv.outerHeight(),a=e.input?e.input.outerWidth():0,r=e.input?e.input.outerHeight():0,l=document.documentElement.clientWidth+(s?0:t(document).scrollLeft()),h=document.documentElement.clientHeight+(s?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?n-a:0,i.left-=s&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=s&&i.top===e.input.offset().top+r?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>l&&l>n?Math.abs(i.left+n-l):0),i.top-=Math.min(i.top,i.top+o>h&&h>o?Math.abs(o+r):0),i},_findPos:function(e){for(var i,s=this._getInst(e),n=this._get(s,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[n?"previousSibling":"nextSibling"];return i=t(e).offset(),[i.left,i.top]},_hideDatepicker:function(e){var i,s,n,o,a=this._curInst;!a||e&&a!==t.data(e,"datepicker")||this._datepickerShowing&&(i=this._get(a,"showAnim"),s=this._get(a,"duration"),n=function(){t.datepicker._tidyDialog(a)},t.effects&&(t.effects.effect[i]||t.effects[i])?a.dpDiv.hide(i,t.datepicker._get(a,"showOptions"),s,n):a.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,n),i||n(),this._datepickerShowing=!1,o=this._get(a,"onClose"),o&&o.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var i=t(e.target),s=t.datepicker._getInst(i[0]);(i[0].id!==t.datepicker._mainDivId&&0===i.parents("#"+t.datepicker._mainDivId).length&&!i.hasClass(t.datepicker.markerClassName)&&!i.closest("."+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&(!t.datepicker._inDialog||!t.blockUI)||i.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==s)&&t.datepicker._hideDatepicker()}},_adjustDate:function(e,i,s){var n=t(e),o=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(o,i+("M"===s?this._get(o,"showCurrentAtPos"):0),s),this._updateDatepicker(o))},_gotoToday:function(e){var i,s=t(e),n=this._getInst(s[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date,n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),this._adjustDate(s)},_selectMonthYear:function(e,i,s){var n=t(e),o=this._getInst(n[0]);o["selected"+("M"===s?"Month":"Year")]=o["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(n)},_selectDay:function(e,i,s,n){var o,a=t(e);t(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(a[0])||(o=this._getInst(a[0]),o.selectedDay=o.currentDay=t("a",n).html(),o.selectedMonth=o.currentMonth=i,o.selectedYear=o.currentYear=s,this._selectDate(e,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,"")},_selectDate:function(e,i){var s,n=t(e),o=this._getInst(n[0]);i=null!=i?i:this._formatDate(o),o.input&&o.input.val(i),this._updateAlternate(o),s=this._get(o,"onSelect"),s?s.apply(o.input?o.input[0]:null,[i,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(e){var i,s,n,o=this._get(e,"altField");o&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),s=this._getDate(e),n=this.formatDate(i,s,this._getFormatConfig(e)),t(o).val(n))},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(e,i,s){if(null==e||null==i)throw"Invalid arguments";if(i="object"==typeof i?""+i:i+"",""===i)return null;var n,o,a,r,l=0,h=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!=typeof h?h:(new Date).getFullYear()%100+parseInt(h,10),u=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,d=(s?s.dayNames:null)||this._defaults.dayNames,p=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,f=(s?s.monthNames:null)||this._defaults.monthNames,g=-1,m=-1,_=-1,v=-1,b=!1,y=function(t){var i=e.length>n+1&&e.charAt(n+1)===t;return i&&n++,i},w=function(t){var e=y(t),s="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,n="y"===t?s:1,o=RegExp("^\\d{"+n+","+s+"}"),a=i.substring(l).match(o);if(!a)throw"Missing number at position "+l;return l+=a[0].length,parseInt(a[0],10)},k=function(e,s,n){var o=-1,a=t.map(y(e)?n:s,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(a,function(t,e){var s=e[1];return i.substr(l,s.length).toLowerCase()===s.toLowerCase()?(o=e[0],l+=s.length,!1):void 0}),-1!==o)return o+1;throw"Unknown name at position "+l},x=function(){if(i.charAt(l)!==e.charAt(n))throw"Unexpected literal at position "+l;l++};for(n=0;e.length>n;n++)if(b)"'"!==e.charAt(n)||y("'")?x():b=!1;else switch(e.charAt(n)){case"d":_=w("d");break;case"D":k("D",u,d);break;case"o":v=w("o");break;case"m":m=w("m");break;case"M":m=k("M",p,f);break;case"y":g=w("y");break;case"@":r=new Date(w("@")),g=r.getFullYear(),m=r.getMonth()+1,_=r.getDate();break;case"!":r=new Date((w("!")-this._ticksTo1970)/1e4),g=r.getFullYear(),m=r.getMonth()+1,_=r.getDate();break;case"'":y("'")?x():b=!0;break;default:x()}if(i.length>l&&(a=i.substr(l),!/^\s+/.test(a)))throw"Extra/unparsed characters found in date: "+a;if(-1===g?g=(new Date).getFullYear():100>g&&(g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c>=g?0:-100)),v>-1)for(m=1,_=v;;){if(o=this._getDaysInMonth(g,m-1),o>=_)break;m++,_-=o}if(r=this._daylightSavingAdjust(new Date(g,m-1,_)),r.getFullYear()!==g||r.getMonth()+1!==m||r.getDate()!==_)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(t,e,i){if(!e)return"";var s,n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,a=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,l=function(e){var i=t.length>s+1&&t.charAt(s+1)===e;return i&&s++,i},h=function(t,e,i){var s=""+e;if(l(t))for(;i>s.length;)s="0"+s;return s},c=function(t,e,i,s){return l(t)?s[e]:i[e]},u="",d=!1;if(e)for(s=0;t.length>s;s++)if(d)"'"!==t.charAt(s)||l("'")?u+=t.charAt(s):d=!1;else switch(t.charAt(s)){case"d":u+=h("d",e.getDate(),2);break;case"D":u+=c("D",e.getDay(),n,o);break;case"o":u+=h("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=h("m",e.getMonth()+1,2);break;case"M":u+=c("M",e.getMonth(),a,r);break;case"y":u+=l("y")?e.getFullYear():(10>e.getFullYear()%100?"0":"")+e.getFullYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=1e4*e.getTime()+this._ticksTo1970;break;case"'":l("'")?u+="'":d=!0;break;default:u+=t.charAt(s)}return u},_possibleChars:function(t){var e,i="",s=!1,n=function(i){var s=t.length>e+1&&t.charAt(e+1)===i;return s&&e++,s};for(e=0;t.length>e;e++)if(s)"'"!==t.charAt(e)||n("'")?i+=t.charAt(e):s=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":n("'")?i+="'":s=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,e){return void 0!==t.settings[e]?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),s=t.lastVal=t.input?t.input.val():null,n=this._getDefaultDate(t),o=n,a=this._getFormatConfig(t);try{o=this.parseDate(i,s,a)||n}catch(r){s=e?"":s}t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),t.currentDay=s?o.getDate():0,t.currentMonth=s?o.getMonth():0,t.currentYear=s?o.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,s){var n=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},o=function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(s){}for(var n=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,o=n.getFullYear(),a=n.getMonth(),r=n.getDate(),l=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,h=l.exec(i);h;){switch(h[2]||"d"){case"d":case"D":r+=parseInt(h[1],10);break;case"w":case"W":r+=7*parseInt(h[1],10);break;case"m":case"M":a+=parseInt(h[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(o,a));break;case"y":case"Y":o+=parseInt(h[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(o,a))}h=l.exec(i)}return new Date(o,a,r)},a=null==i||""===i?s:"string"==typeof i?o(i):"number"==typeof i?isNaN(i)?s:n(i):new Date(i.getTime());return a=a&&"Invalid Date"==""+a?s:a,a&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var s=!e,n=t.selectedMonth,o=t.selectedYear,a=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=a.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=a.getMonth(),t.drawYear=t.selectedYear=t.currentYear=a.getFullYear(),n===t.selectedMonth&&o===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(s?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),s="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(s,-i,"M")},next:function(){t.datepicker._adjustDate(s,+i,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(s)},selectDay:function(){return t.datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(s,this,"Y"),!1}};t(this).on(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,i,s,n,o,a,r,l,h,c,u,d,p,f,g,m,_,v,b,y,w,k,x,C,D,T,I,M,P,S,N,H,A,z,O,E,W,F,L,R=new Date,Y=this._daylightSavingAdjust(new Date(R.getFullYear(),R.getMonth(),R.getDate())),B=this._get(t,"isRTL"),j=this._get(t,"showButtonPanel"),q=this._get(t,"hideIfNoPrevNext"),K=this._get(t,"navigationAsDateFormat"),U=this._getNumberOfMonths(t),V=this._get(t,"showCurrentAtPos"),X=this._get(t,"stepMonths"),$=1!==U[0]||1!==U[1],G=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),J=this._getMinMaxDate(t,"min"),Q=this._getMinMaxDate(t,"max"),Z=t.drawMonth-V,te=t.drawYear;if(0>Z&&(Z+=12,te--),Q)for(e=this._daylightSavingAdjust(new Date(Q.getFullYear(),Q.getMonth()-U[0]*U[1]+1,Q.getDate())),e=J&&J>e?J:e;this._daylightSavingAdjust(new Date(te,Z,1))>e;)Z--,0>Z&&(Z=11,te--);for(t.drawMonth=Z,t.drawYear=te,i=this._get(t,"prevText"),i=K?this.formatDate(i,this._daylightSavingAdjust(new Date(te,Z-X,1)),this._getFormatConfig(t)):i,s=this._canAdjustMonth(t,-1,te,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"e":"w")+"'>"+i+"</span></a>":q?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"e":"w")+"'>"+i+"</span></a>",n=this._get(t,"nextText"),n=K?this.formatDate(n,this._daylightSavingAdjust(new Date(te,Z+X,1)),this._getFormatConfig(t)):n,o=this._canAdjustMonth(t,1,te,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"w":"e")+"'>"+n+"</span></a>":q?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"w":"e")+"'>"+n+"</span></a>",a=this._get(t,"currentText"),r=this._get(t,"gotoCurrent")&&t.currentDay?G:Y,a=K?this.formatDate(a,r,this._getFormatConfig(t)):a,l=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",h=j?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(B?l:"")+(this._isInRange(t,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+a+"</button>":"")+(B?"":l)+"</div>":"",c=parseInt(this._get(t,"firstDay"),10),c=isNaN(c)?0:c,u=this._get(t,"showWeek"),d=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),g=this._get(t,"monthNamesShort"),m=this._get(t,"beforeShowDay"),_=this._get(t,"showOtherMonths"),v=this._get(t,"selectOtherMonths"),b=this._getDefaultDate(t),y="",k=0;U[0]>k;k++){for(x="",this.maxRows=4,C=0;U[1]>C;C++){if(D=this._daylightSavingAdjust(new Date(te,Z,t.selectedDay)),T=" ui-corner-all",I="",$){if(I+="<div class='ui-datepicker-group",U[1]>1)switch(C){case 0:I+=" ui-datepicker-group-first",T=" ui-corner-"+(B?"right":"left");break;case U[1]-1:I+=" ui-datepicker-group-last",T=" ui-corner-"+(B?"left":"right");break;default:I+=" ui-datepicker-group-middle",T=""}I+="'>"}for(I+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+T+"'>"+(/all|left/.test(T)&&0===k?B?o:s:"")+(/all|right/.test(T)&&0===k?B?s:o:"")+this._generateMonthYearHeader(t,Z,te,J,Q,k>0||C>0,f,g)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",M=u?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",w=0;7>w;w++)P=(w+c)%7,M+="<th scope='col'"+((w+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+d[P]+"'>"+p[P]+"</span></th>";for(I+=M+"</tr></thead><tbody>",S=this._getDaysInMonth(te,Z),te===t.selectedYear&&Z===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,S)),N=(this._getFirstDayOfMonth(te,Z)-c+7)%7,H=Math.ceil((N+S)/7),A=$?this.maxRows>H?this.maxRows:H:H,this.maxRows=A,z=this._daylightSavingAdjust(new Date(te,Z,1-N)),O=0;A>O;O++){for(I+="<tr>",E=u?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(z)+"</td>":"",w=0;7>w;w++)W=m?m.apply(t.input?t.input[0]:null,[z]):[!0,""],F=z.getMonth()!==Z,L=F&&!v||!W[0]||J&&J>z||Q&&z>Q,E+="<td class='"+((w+c+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(z.getTime()===D.getTime()&&Z===t.selectedMonth&&t._keyEvent||b.getTime()===z.getTime()&&b.getTime()===D.getTime()?" "+this._dayOverClass:"")+(L?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!_?"":" "+W[1]+(z.getTime()===G.getTime()?" "+this._currentClass:"")+(z.getTime()===Y.getTime()?" ui-datepicker-today":""))+"'"+(F&&!_||!W[2]?"":" title='"+W[2].replace(/'/g,"&#39;")+"'")+(L?"":" data-handler='selectDay' data-event='click' data-month='"+z.getMonth()+"' data-year='"+z.getFullYear()+"'")+">"+(F&&!_?"&#xa0;":L?"<span class='ui-state-default'>"+z.getDate()+"</span>":"<a class='ui-state-default"+(z.getTime()===Y.getTime()?" ui-state-highlight":"")+(z.getTime()===G.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+z.getDate()+"</a>")+"</td>",z.setDate(z.getDate()+1),z=this._daylightSavingAdjust(z);I+=E+"</tr>"}Z++,Z>11&&(Z=0,te++),I+="</tbody></table>"+($?"</div>"+(U[0]>0&&C===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=I}y+=x}return y+=h,t._keyEvent=!1,y},_generateMonthYearHeader:function(t,e,i,s,n,o,a,r){var l,h,c,u,d,p,f,g,m=this._get(t,"changeMonth"),_=this._get(t,"changeYear"),v=this._get(t,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",y="";if(o||!m)y+="<span class='ui-datepicker-month'>"+a[e]+"</span>";else{for(l=s&&s.getFullYear()===i,h=n&&n.getFullYear()===i,y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;12>c;c++)(!l||c>=s.getMonth())&&(!h||n.getMonth()>=c)&&(y+="<option value='"+c+"'"+(c===e?" selected='selected'":"")+">"+r[c]+"</option>");y+="</select>"}if(v||(b+=y+(!o&&m&&_?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",o||!_)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(u=this._get(t,"yearRange").split(":"),d=(new Date).getFullYear(),p=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?d+parseInt(t,10):parseInt(t,10);return isNaN(e)?d:e},f=p(u[0]),g=Math.max(f,p(u[1]||"")),f=s?Math.max(f,s.getFullYear()):f,g=n?Math.min(g,n.getFullYear()):g,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";g>=f;f++)t.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",b+=t.yearshtml,t.yearshtml=null}return b+=this._get(t,"yearSuffix"),v&&(b+=(!o&&m&&_?"":"&#xa0;")+y),b+="</div>"},_adjustInstDate:function(t,e,i){var s=t.selectedYear+("Y"===i?e:0),n=t.selectedMonth+("M"===i?e:0),o=Math.min(t.selectedDay,this._getDaysInMonth(s,n))+("D"===i?e:0),a=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(s,n,o)));t.selectedDay=a.getDate(),t.drawMonth=t.selectedMonth=a.getMonth(),t.drawYear=t.selectedYear=a.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),s=this._getMinMaxDate(t,"max"),n=i&&i>e?i:e;return s&&n>s?s:n},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,s){var n=this._getNumberOfMonths(t),o=this._daylightSavingAdjust(new Date(i,s+(0>e?e:n[0]*n[1]),1));return 0>e&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(t,o)},_isInRange:function(t,e){var i,s,n=this._getMinMaxDate(t,"min"),o=this._getMinMaxDate(t,"max"),a=null,r=null,l=this._get(t,"yearRange");return l&&(i=l.split(":"),s=(new Date).getFullYear(),a=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(a+=s),i[1].match(/[+\-].*/)&&(r+=s)),(!n||e.getTime()>=n.getTime())&&(!o||e.getTime()<=o.getTime())&&(!a||e.getFullYear()>=a)&&(!r||r>=e.getFullYear())},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,s){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var n=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(s,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),n,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).on("mousedown",t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i))},t.datepicker=new s,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.12.1",t.datepicker,t.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var i=t(this).css(e).offset().top;0>i&&t(this).css("top",e.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),t=e.parent.children().eq(e.index),t.length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var i=this;this._isOpen&&this._trigger("beforeClose",e)!==!1&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||t.ui.safeBlur(t.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",e)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,i){var s=!1,n=this.uiDialog.siblings(".ui-front:visible").map(function(){return+t(this).css("z-index")}).get(),o=Math.max.apply(null,n);return o>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",o+1),s=!0),s&&!i&&this._trigger("focus",e),s},open:function(){var e=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),void 0):(this._isOpen=!0,this.opener=t(t.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"),void 0)},_focusTabbable:function(){var t=this._focusedElement;t||(t=this.element.find("[autofocus]")),t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).trigger("focus")},_keepFocus:function(e){function i(){var e=t.ui.safeActiveElement(this.document[0]),i=this.uiDialog[0]===e||t.contains(this.uiDialog[0],e);i||this._focusTabbable()}e.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=t("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),this.close(e),void 0;if(e.keyCode===t.ui.keyCode.TAB&&!e.isDefaultPrevented()){var i=this.uiDialog.find(":tabbable"),s=i.filter(":first"),n=i.filter(":last");e.target!==n[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==s[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(this._delay(function(){n.trigger("focus")}),e.preventDefault()):(this._delay(function(){s.trigger("focus")}),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=t("<button type='button'></button>").button({label:t("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(e,"ui-dialog-title"),this._title(e),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title?t.text(this.options.title):t.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var e=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(i)||t.isArray(i)&&!i.length?(this._removeClass(this.uiDialog,"ui-dialog-buttons"),void 0):(t.each(i,function(i,s){var n,o;s=t.isFunction(s)?{click:s,text:i}:s,s=t.extend({type:"button"},s),n=s.click,o={icon:s.icon,iconPosition:s.iconPosition,showLabel:s.showLabel,icons:s.icons,text:s.text},delete s.click,delete s.icon,delete s.iconPosition,delete s.showLabel,delete s.icons,"boolean"==typeof s.text&&delete s.text,t("<button></button>",s).button(o).appendTo(e.uiButtonSet).on("click",function(){n.apply(e.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),void 0)},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var i=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(s,n){i._addClass(t(this),"ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",s,e(n))},drag:function(t,s){i._trigger("drag",t,e(s))},stop:function(n,o){var a=o.offset.left-i.document.scrollLeft(),r=o.offset.top-i.document.scrollTop();s.position={my:"left top",at:"left"+(a>=0?"+":"")+a+" "+"top"+(r>=0?"+":"")+r,of:i.window},i._removeClass(t(this),"ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",n,e(o))}})},_makeResizable:function(){function e(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}var i=this,s=this.options,n=s.resizable,o=this.uiDialog.css("position"),a="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:a,start:function(s,n){i._addClass(t(this),"ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",s,e(n))},resize:function(t,s){i._trigger("resize",t,e(s))},stop:function(n,o){var a=i.uiDialog.offset(),r=a.left-i.document.scrollLeft(),l=a.top-i.document.scrollTop();s.height=i.uiDialog.height(),s.width=i.uiDialog.width(),s.position={my:"left top",at:"left"+(r>=0?"+":"")+r+" "+"top"+(l>=0?"+":"")+l,of:i.window},i._removeClass(t(this),"ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",n,e(o))}}).css("position",o)},_trackFocus:function(){this._on(this.widget(),{focusin:function(e){this._makeFocusTarget(),this._focusedElement=t(e.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var e=this._trackingInstances(),i=t.inArray(this,e);-1!==i&&e.splice(i,1)},_trackingInstances:function(){var t=this.document.data("ui-dialog-instances");return t||(t=[],this.document.data("ui-dialog-instances",t)),t},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(e){var i=this,s=!1,n={};t.each(e,function(t,e){i._setOption(t,e),t in i.sizeRelatedOptions&&(s=!0),t in i.resizableRelatedOptions&&(n[t]=e)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",n)},_setOption:function(e,i){var s,n,o=this.uiDialog;"disabled"!==e&&(this._super(e,i),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:t("<a>").text(""+this.options.closeText).html()}),"draggable"===e&&(s=o.is(":data(ui-draggable)"),s&&!i&&o.draggable("destroy"),!s&&i&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(n=o.is(":data(ui-resizable)"),n&&!i&&o.resizable("destroy"),n&&"string"==typeof i&&o.resizable("option","handles",i),n||i===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),t=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),e=Math.max(0,s.minHeight-t),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-t):"none","auto"===s.height?this.element.css({minHeight:e,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return t(e.target).closest(".ui-dialog").length?!0:!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=!0;this._delay(function(){e=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(t){e||this._allowInteraction(t)||(t.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=t("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var t=this.document.data("ui-dialog-overlays")-1;t?this.document.data("ui-dialog-overlays",t):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),t.uiBackCompat!==!1&&t.widget("ui.dialog",t.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(t,e){"dialogClass"===t&&this.uiDialog.removeClass(this.options.dialogClass).addClass(e),this._superApply(arguments)}}),t.ui.dialog,t.widget("ui.progressbar",{version:"1.12.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progressbar","aria-valuemin":this.min}),this._addClass("ui-progressbar","ui-widget ui-widget-content"),this.valueDiv=t("<div>").appendTo(this.element),this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header"),this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),this.valueDiv.remove()},value:function(t){return void 0===t?this.options.value:(this.options.value=this._constrainedValue(t),this._refreshValue(),void 0)},_constrainedValue:function(t){return void 0===t&&(t=this.options.value),this.indeterminate=t===!1,"number"!=typeof t&&(t=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e)),this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t),this._toggleClass(null,"ui-state-disabled",!!t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var e=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||e>this.min).width(i.toFixed(0)+"%"),this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,e===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=t("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":e}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),e===this.options.max&&this._trigger("complete")}}),t.widget("ui.selectmenu",[t.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var e=this.element.uniqueId().attr("id");this.ids={element:e,button:e+"-button",menu:e+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=t()},_drawButton:function(){var e,i=this,s=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(t){this.button.focus(),t.preventDefault()}}),this.element.hide(),this.button=t("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),e=t("<span>").appendTo(this.button),this._addClass(e,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(s).appendTo(this.button),this.options.width!==!1&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){i._rendered||i._refreshMenu()})},_drawMenu:function(){var e=this;this.menu=t("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=t("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(t,i){t.preventDefault(),e._setSelection(),e._select(i.item.data("ui-selectmenu-item"),t)},focus:function(t,i){var s=i.item.data("ui-selectmenu-item");null!=e.focusIndex&&s.index!==e.focusIndex&&(e._trigger("focus",t,{item:s}),e.isOpen||e._select(s,t)),e.focusIndex=s.index,e.button.attr("aria-activedescendant",e.menuItems.eq(s.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var t,e=this.element.find("option");this.menu.empty(),this._parseOptions(e),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,e.length&&(t=this._getSelectedItem(),this.menuInstance.focus(null,t),this._setAria(t.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(t){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",t)))},_position:function(){this.menuWrap.position(t.extend({of:this.button},this.options.position))},close:function(t){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",t))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(e){var i=t("<span>");return this._setText(i,e.label),this._addClass(i,"ui-selectmenu-text"),i},_renderMenu:function(e,i){var s=this,n="";t.each(i,function(i,o){var a;o.optgroup!==n&&(a=t("<li>",{text:o.optgroup}),s._addClass(a,"ui-selectmenu-optgroup","ui-menu-divider"+(o.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),a.appendTo(e),n=o.optgroup),s._renderItemData(e,o)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-selectmenu-item",e)},_renderItem:function(e,i){var s=t("<li>"),n=t("<div>",{title:i.element.attr("title")});return i.disabled&&this._addClass(s,null,"ui-state-disabled"),this._setText(n,i.label),s.append(n).appendTo(e)},_setText:function(t,e){e?t.text(e):t.html("&#160;")},_move:function(t,e){var i,s,n=".ui-menu-item";this.isOpen?i=this.menuItems.eq(this.focusIndex).parent("li"):(i=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),n+=":not(.ui-state-disabled)"),s="first"===t||"last"===t?i["first"===t?"prevAll":"nextAll"](n).eq(-1):i[t+"All"](n).eq(0),s.length&&this.menuInstance.focus(e,s)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(t){this[this.isOpen?"close":"open"](t)},_setSelection:function(){var t;this.range&&(window.getSelection?(t=window.getSelection(),t.removeAllRanges(),t.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(e){this.isOpen&&(t(e.target).closest(".ui-selectmenu-menu, #"+t.ui.escapeSelector(this.ids.button)).length||this.close(e))}},_buttonEvents:{mousedown:function(){var t;window.getSelection?(t=window.getSelection(),t.rangeCount&&(this.range=t.getRangeAt(0))):this.range=document.selection.createRange()},click:function(t){this._setSelection(),this._toggle(t)},keydown:function(e){var i=!0;switch(e.keyCode){case t.ui.keyCode.TAB:case t.ui.keyCode.ESCAPE:this.close(e),i=!1;break;case t.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(e);break;case t.ui.keyCode.UP:e.altKey?this._toggle(e):this._move("prev",e);break;case t.ui.keyCode.DOWN:e.altKey?this._toggle(e):this._move("next",e);break;case t.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(e):this._toggle(e);break;case t.ui.keyCode.LEFT:this._move("prev",e);break;case t.ui.keyCode.RIGHT:this._move("next",e);break;case t.ui.keyCode.HOME:case t.ui.keyCode.PAGE_UP:this._move("first",e);break;case t.ui.keyCode.END:case t.ui.keyCode.PAGE_DOWN:this._move("last",e);break;default:this.menu.trigger(e),i=!1}i&&e.preventDefault()}},_selectFocusedItem:function(t){var e=this.menuItems.eq(this.focusIndex).parent("li");e.hasClass("ui-state-disabled")||this._select(e.data("ui-selectmenu-item"),t)},_select:function(t,e){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=t.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(t)),this._setAria(t),this._trigger("select",e,{item:t}),t.index!==i&&this._trigger("change",e,{item:t}),this.close(e)},_setAria:function(t){var e=this.menuItems.eq(t.index).attr("id");this.button.attr({"aria-labelledby":e,"aria-activedescendant":e}),this.menu.attr("aria-activedescendant",e)},_setOption:function(t,e){if("icons"===t){var i=this.button.find("span.ui-icon");this._removeClass(i,null,this.options.icons.button)._addClass(i,null,e.button)}this._super(t,e),"appendTo"===t&&this.menuWrap.appendTo(this._appendTo()),"width"===t&&this._resizeButton()},_setOptionDisabled:function(t){this._super(t),this.menuInstance.option("disabled",t),this.button.attr("aria-disabled",t),this._toggleClass(this.button,null,"ui-state-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(".ui-front, dialog")),e.length||(e=this.document[0].body),e},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var t=this.options.width;return t===!1?(this.button.css("width",""),void 0):(null===t&&(t=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(t),void 0)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var t=this._super();return t.disabled=this.element.prop("disabled"),t},_parseOptions:function(e){var i=this,s=[];e.each(function(e,n){s.push(i._parseOption(t(n),e))}),this.items=s},_parseOption:function(t,e){var i=t.parent("optgroup");return{element:t,index:e,value:t.val(),label:t.text(),optgroup:i.attr("label")||"",disabled:i.prop("disabled")||t.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}]),t.widget("ui.slider",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,s=this.options,n=this.element.find(".ui-slider-handle"),o="<span tabindex='0'></span>",a=[];for(i=s.values&&s.values.length||1,n.length>i&&(n.slice(i).remove(),n=n.slice(0,i)),e=n.length;i>e;e++)a.push(o);this.handles=n.add(t(a.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e).attr("tabIndex",0)})},_createRange:function(){var e=this.options;e.range?(e.range===!0&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=t("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),("min"===e.range||"max"===e.range)&&this._addClass(this.range,"ui-slider-range-"+e.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(e){var i,s,n,o,a,r,l,h,c=this,u=this.options;return u.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(s-c.values(e));(n>i||n===i&&(e===c._lastChangedValue||c.values(e)===u.min))&&(n=i,o=t(this),a=e)}),r=this._start(e,a),r===!1?!1:(this._mouseSliding=!0,this._handleIndex=a,this._addClass(o,null,"ui-state-active"),o.trigger("focus"),l=o.offset(),h=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=h?{left:0,top:0}:{left:e.pageX-l.left-o.width()/2,top:e.pageY-l.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,a,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,s,n,o;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/e,s>1&&(s=1),0>s&&(s=0),"vertical"===this.orientation&&(s=1-s),n=this._valueMax()-this._valueMin(),o=this._valueMin()+s*n,this._trimAlignValue(o)},_uiHash:function(t,e,i){var s={handle:this.handles[t],handleIndex:t,value:void 0!==e?e:this.value()};return this._hasMultipleValues()&&(s.value=void 0!==e?e:this.values(t),s.values=i||this.values()),s},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(t,e){return this._trigger("start",t,this._uiHash(e))},_slide:function(t,e,i){var s,n,o=this.value(),a=this.values();this._hasMultipleValues()&&(n=this.values(e?0:1),o=this.values(e),2===this.options.values.length&&this.options.range===!0&&(i=0===e?Math.min(n,i):Math.max(n,i)),a[e]=i),i!==o&&(s=this._trigger("slide",t,this._uiHash(e,i,a)),s!==!1&&(this._hasMultipleValues()?this.values(e,i):this.value(i)))},_stop:function(t,e){this._trigger("stop",t,this._uiHash(e))},_change:function(t,e){this._keySliding||this._mouseSliding||(this._lastChangedValue=e,this._trigger("change",t,this._uiHash(e)))},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(e,i){var s,n,o;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),this._change(null,e),void 0;if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this._hasMultipleValues()?this._values(e):this.value();for(s=this.options.values,n=arguments[0],o=0;s.length>o;o+=1)s[o]=this._trimAlignValue(n[o]),this._change(null,o);this._refreshValue()},_setOption:function(e,i){var s,n=0;switch("range"===e&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(n=this.options.values.length),this._super(e,i),e){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(i),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=n-1;s>=0;s--)this._change(null,s);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(t){this._super(t),this._toggleClass(null,"ui-state-disabled",!!t)},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,s;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this._hasMultipleValues()){for(i=this.options.values.slice(),s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(t){if(this._valueMin()>=t)return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,s=t-i;return 2*Math.abs(i)>=e&&(s+=i>0?e:-e),parseFloat(s.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),i=this.options.step,s=Math.round((t-e)/i)*i;t=s+e,t>this.options.max&&(t-=i),this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=""+t,i=e.indexOf(".");return-1===i?0:e.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(t){"vertical"===t&&this.range.css({width:"",left:""}),"horizontal"===t&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var e,i,s,n,o,a=this.options.range,r=this.options,l=this,h=this._animateOff?!1:r.animate,c={};this._hasMultipleValues()?this.handles.each(function(s){i=100*((l.values(s)-l._valueMin())/(l._valueMax()-l._valueMin())),c["horizontal"===l.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[h?"animate":"css"](c,r.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===s&&l.range.stop(1,1)[h?"animate":"css"]({left:i+"%"},r.animate),1===s&&l.range[h?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:r.animate})):(0===s&&l.range.stop(1,1)[h?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&l.range[h?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:r.animate}))),e=i}):(s=this.value(),n=this._valueMin(),o=this._valueMax(),i=o!==n?100*((s-n)/(o-n)):0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[h?"animate":"css"](c,r.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:i+"%"},r.animate),"max"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:100-i+"%"},r.animate),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:i+"%"},r.animate),"max"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:100-i+"%"},r.animate))},_handleEvents:{keydown:function(e){var i,s,n,o,a=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(t(e.target),null,"ui-state-active"),i=this._start(e,a),i===!1))return}switch(o=this.options.step,s=n=this._hasMultipleValues()?this.values(a):this.value(),e.keyCode){case t.ui.keyCode.HOME:n=this._valueMin();break;case t.ui.keyCode.END:n=this._valueMax();break;case t.ui.keyCode.PAGE_UP:n=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(s===this._valueMax())return;n=this._trimAlignValue(s+o);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(s===this._valueMin())return;n=this._trimAlignValue(s-o)}this._slide(e,a,n)},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),this._removeClass(t(e.target),null,"ui-state-active"))}}}),t.widget("ui.spinner",{version:"1.12.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var e=this._super(),i=this.element;return t.each(["min","max","step"],function(t,s){var n=i.attr(s);null!=n&&n.length&&(e[s]=n)}),e},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",t),void 0)},mousewheel:function(t,e){if(e){if(!this.spinning&&!this._start(t))return!1;this._spin((e>0?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(t)},100),t.preventDefault()}},"mousedown .ui-spinner-button":function(e){function i(){var e=this.element[0]===t.ui.safeActiveElement(this.document[0]);e||(this.element.trigger("focus"),this.previous=s,this._delay(function(){this.previous=s}))}var s;s=this.element[0]===t.ui.safeActiveElement(this.document[0])?this.previous:this.element.val(),e.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(e)!==!1&&this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(e){return t(e.currentTarget).hasClass("ui-state-active")?this._start(e)===!1?!1:(this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&this.uiSpinner.height()>0&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(e){var i=this.options,s=t.ui.keyCode;switch(e.keyCode){case s.UP:return this._repeat(null,1,e),!0;case s.DOWN:return this._repeat(null,-1,e),!0;case s.PAGE_UP:return this._repeat(null,i.page,e),!0;case s.PAGE_DOWN:return this._repeat(null,-i.page,e),!0}return!1},_start:function(t){return this.spinning||this._trigger("start",t)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(t,e,i){t=t||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,e,i)},t),this._spin(e*this.options.step,i)},_spin:function(t,e){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+t*this._increment(this.counter)),this.spinning&&this._trigger("spin",e,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(e){var i=this.options.incremental;return i?t.isFunction(i)?i(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=""+t,i=e.indexOf(".");return-1===i?0:e.length-i-1},_adjustValue:function(t){var e,i,s=this.options;return e=null!==s.min?s.min:0,i=t-e,i=Math.round(i/s.step)*s.step,t=e+i,t=parseFloat(t.toFixed(this._precision())),null!==s.max&&t>s.max?s.max:null!==s.min&&s.min>t?s.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){var i,s,n;return"culture"===t||"numberFormat"===t?(i=this._parse(this.element.val()),this.options[t]=e,this.element.val(this._format(i)),void 0):(("max"===t||"min"===t||"step"===t)&&"string"==typeof e&&(e=this._parse(e)),"icons"===t&&(s=this.buttons.first().find(".ui-icon"),this._removeClass(s,null,this.options.icons.up),this._addClass(s,null,e.up),n=this.buttons.last().find(".ui-icon"),this._removeClass(n,null,this.options.icons.down),this._addClass(n,null,e.down)),this._super(t,e),void 0)},_setOptionDisabled:function(t){this._super(t),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable")},_setOptions:r(function(t){this._super(t)}),_parse:function(t){return"string"==typeof t&&""!==t&&(t=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t),""===t||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var t=this.value();return null===t?!1:t===this._adjustValue(t)},_value:function(t,e){var i;""!==t&&(i=this._parse(t),null!==i&&(e||(i=this._adjustValue(i)),t=this._format(i))),this.element.val(t),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:r(function(t){this._stepUp(t)}),_stepUp:function(t){this._start()&&(this._spin((t||1)*this.options.step),this._stop())},stepDown:r(function(t){this._stepDown(t)}),_stepDown:function(t){this._start()&&(this._spin((t||1)*-this.options.step),this._stop())},pageUp:r(function(t){this._stepUp((t||1)*this.options.page)}),pageDown:r(function(t){this._stepDown((t||1)*this.options.page)}),value:function(t){return arguments.length?(r(this._value).call(this,t),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),t.uiBackCompat!==!1&&t.widget("ui.spinner",t.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}}),t.ui.spinner,t.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var t=/#.*$/;return function(e){var i,s;i=e.href.replace(t,""),s=location.href.replace(t,"");try{i=decodeURIComponent(i)}catch(n){}try{s=decodeURIComponent(s)}catch(n){}return e.hash.length>1&&i===s}}(),_create:function(){var e=this,i=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,i.collapsible),this._processTabs(),i.active=this._initialActive(),t.isArray(i.disabled)&&(i.disabled=t.unique(i.disabled.concat(t.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):t(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var e=this.options.active,i=this.options.collapsible,s=location.hash.substring(1);return null===e&&(s&&this.tabs.each(function(i,n){return t(n).attr("aria-controls")===s?(e=i,!1):void 0}),null===e&&(e=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===e||-1===e)&&(e=this.tabs.length?0:!1)),e!==!1&&(e=this.tabs.index(this.tabs.eq(e)),-1===e&&(e=i?!1:0)),!i&&e===!1&&this.anchors.length&&(e=0),e},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):t()}},_tabKeydown:function(e){var i=t(t.ui.safeActiveElement(this.document[0])).closest("li"),s=this.tabs.index(i),n=!0;if(!this._handlePageNav(e)){switch(e.keyCode){case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:s++;break;case t.ui.keyCode.UP:case t.ui.keyCode.LEFT:n=!1,s--;break;case t.ui.keyCode.END:s=this.anchors.length-1;break;case t.ui.keyCode.HOME:s=0;break;case t.ui.keyCode.SPACE:return e.preventDefault(),clearTimeout(this.activating),this._activate(s),void 0;case t.ui.keyCode.ENTER:return e.preventDefault(),clearTimeout(this.activating),this._activate(s===this.options.active?!1:s),void 0;default:return}e.preventDefault(),clearTimeout(this.activating),s=this._focusNextTab(s,n),e.ctrlKey||e.metaKey||(i.attr("aria-selected","false"),this.tabs.eq(s).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",s)},this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===t.ui.keyCode.UP&&(e.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(e){return e.altKey&&e.keyCode===t.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):e.altKey&&e.keyCode===t.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(e,i){function s(){return e>n&&(e=0),0>e&&(e=n),e}for(var n=this.tabs.length-1;-1!==t.inArray(s(),this.options.disabled);)e=i?e+1:e-1;return e},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).trigger("focus"),t},_setOption:function(t,e){return"active"===t?(this._activate(e),void 0):(this._super(t,e),"collapsible"===t&&(this._toggleClass("ui-tabs-collapsible",null,e),e||this.options.active!==!1||this._activate(0)),"event"===t&&this._setupEvents(e),"heightStyle"===t&&this._setupHeightStyle(e),void 0)},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,i=this.tablist.children(":has(a[href])");e.disabled=t.map(i.filter(".ui-state-disabled"),function(t){return i.index(t)}),this._processTabs(),e.active!==!1&&this.anchors.length?this.active.length&&!t.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=t()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=t()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var e=this,i=this.tabs,s=this.anchors,n=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",function(e){t(this).is(".ui-state-disabled")&&e.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){t(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map(function(){return t("a",this)[0]}).attr({role:"presentation",tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=t(),this.anchors.each(function(i,s){var n,o,a,r=t(s).uniqueId().attr("id"),l=t(s).closest("li"),h=l.attr("aria-controls");e._isLocal(s)?(n=s.hash,a=n.substring(1),o=e.element.find(e._sanitizeSelector(n))):(a=l.attr("aria-controls")||t({}).uniqueId()[0].id,n="#"+a,o=e.element.find(n),o.length||(o=e._createPanel(a),o.insertAfter(e.panels[i-1]||e.tablist)),o.attr("aria-live","polite")),o.length&&(e.panels=e.panels.add(o)),h&&l.data("ui-tabs-aria-controls",h),l.attr({"aria-controls":a,"aria-labelledby":r}),o.attr("aria-labelledby",r)}),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),i&&(this._off(i.not(this.tabs)),this._off(s.not(this.anchors)),this._off(n.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(e){return t("<div>").attr("id",e).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(e){var i,s,n;for(t.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1),n=0;s=this.tabs[n];n++)i=t(s),e===!0||-1!==t.inArray(n,e)?(i.attr("aria-disabled","true"),this._addClass(i,null,"ui-state-disabled")):(i.removeAttr("aria-disabled"),this._removeClass(i,null,"ui-state-disabled"));this.options.disabled=e,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,e===!0)},_setupEvents:function(e){var i={};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(t){t.preventDefault()}}),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var i,s=this.element.parent();"fill"===e?(i=s.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var e=t(this),s=e.css("position");"absolute"!==s&&"fixed"!==s&&(i-=e.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=t(this).outerHeight(!0)}),this.panels.each(function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===e&&(i=0,this.panels.each(function(){i=Math.max(i,t(this).height("").height())}).height(i))},_eventHandler:function(e){var i=this.options,s=this.active,n=t(e.currentTarget),o=n.closest("li"),a=o[0]===s[0],r=a&&i.collapsible,l=r?t():this._getPanelForTab(o),h=s.length?this._getPanelForTab(s):t(),c={oldTab:s,oldPanel:h,newTab:r?t():o,newPanel:l};e.preventDefault(),o.hasClass("ui-state-disabled")||o.hasClass("ui-tabs-loading")||this.running||a&&!i.collapsible||this._trigger("beforeActivate",e,c)===!1||(i.active=r?!1:this.tabs.index(o),this.active=a?t():o,this.xhr&&this.xhr.abort(),h.length||l.length||t.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(o),e),this._toggle(e,c))},_toggle:function(e,i){function s(){o.running=!1,o._trigger("activate",e,i)}function n(){o._addClass(i.newTab.closest("li"),"ui-tabs-active","ui-state-active"),a.length&&o.options.show?o._show(a,o.options.show,s):(a.show(),s())}var o=this,a=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){o._removeClass(i.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),n()}):(this._removeClass(i.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),r.hide(),n()),r.attr("aria-hidden","true"),i.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),a.length&&r.length?i.oldTab.attr("tabIndex",-1):a.length&&this.tabs.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),a.attr("aria-hidden","false"),i.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(e){var i,s=this._findActive(e);s[0]!==this.active[0]&&(s.length||(s=this.active),i=s.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return e===!1?t():this.tabs.eq(e)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+t.ui.escapeSelector(e)+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){t.data(this,"ui-tabs-destroy")?t(this).remove():t(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")}),this.tabs.each(function(){var e=t(this),i=e.data("ui-tabs-aria-controls");i?e.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):e.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(e){var i=this.options.disabled;i!==!1&&(void 0===e?i=!1:(e=this._getIndex(e),i=t.isArray(i)?t.map(i,function(t){return t!==e?t:null}):t.map(this.tabs,function(t,i){return i!==e?i:null})),this._setOptionDisabled(i))},disable:function(e){var i=this.options.disabled;if(i!==!0){if(void 0===e)i=!0;else{if(e=this._getIndex(e),-1!==t.inArray(e,i))return;i=t.isArray(i)?t.merge([e],i).sort():[e]}this._setOptionDisabled(i)}},load:function(e,i){e=this._getIndex(e);var s=this,n=this.tabs.eq(e),o=n.find(".ui-tabs-anchor"),a=this._getPanelForTab(n),r={tab:n,panel:a},l=function(t,e){"abort"===e&&s.panels.stop(!1,!0),s._removeClass(n,"ui-tabs-loading"),a.removeAttr("aria-busy"),t===s.xhr&&delete s.xhr};this._isLocal(o[0])||(this.xhr=t.ajax(this._ajaxSettings(o,i,r)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(n,"ui-tabs-loading"),a.attr("aria-busy","true"),this.xhr.done(function(t,e,n){setTimeout(function(){a.html(t),s._trigger("load",i,r),l(n,e)},1)}).fail(function(t,e){setTimeout(function(){l(t,e)},1)})))},_ajaxSettings:function(e,i,s){var n=this;return{url:e.attr("href").replace(/#.*$/,""),beforeSend:function(e,o){return n._trigger("beforeLoad",i,t.extend({jqXHR:e,ajaxSettings:o},s))}}},_getPanelForTab:function(e){var i=t(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}}),t.uiBackCompat!==!1&&t.widget("ui.tabs",t.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}}),t.ui.tabs,t.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var e=t(this).attr("title")||"";return t("<a>").text(e).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(e,i){var s=(e.attr("aria-describedby")||"").split(/\s+/);s.push(i),e.data("ui-tooltip-id",i).attr("aria-describedby",t.trim(s.join(" ")))},_removeDescribedBy:function(e){var i=e.data("ui-tooltip-id"),s=(e.attr("aria-describedby")||"").split(/\s+/),n=t.inArray(i,s);-1!==n&&s.splice(n,1),e.removeData("ui-tooltip-id"),s=t.trim(s.join(" ")),s?e.attr("aria-describedby",s):e.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=t("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=t([])},_setOption:function(e,i){var s=this;this._super(e,i),"content"===e&&t.each(this.tooltips,function(t,e){s._updateContent(e.element)})},_setOptionDisabled:function(t){this[t?"_disable":"_enable"]()},_disable:function(){var e=this;t.each(this.tooltips,function(i,s){var n=t.Event("blur");n.target=n.currentTarget=s.element[0],e.close(n,!0)}),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var e=t(this);return e.is("[title]")?e.data("ui-tooltip-title",e.attr("title")).removeAttr("title"):void 0}))},_enable:function(){this.disabledTitles.each(function(){var e=t(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))}),this.disabledTitles=t([])},open:function(e){var i=this,s=t(e?e.target:this.element).closest(this.options.items);s.length&&!s.data("ui-tooltip-id")&&(s.attr("title")&&s.data("ui-tooltip-title",s.attr("title")),s.data("ui-tooltip-open",!0),e&&"mouseover"===e.type&&s.parents().each(function(){var e,s=t(this);s.data("ui-tooltip-open")&&(e=t.Event("blur"),e.target=e.currentTarget=this,i.close(e,!0)),s.attr("title")&&(s.uniqueId(),i.parents[this.id]={element:this,title:s.attr("title")},s.attr("title",""))}),this._registerCloseHandlers(e,s),this._updateContent(s,e))},_updateContent:function(t,e){var i,s=this.options.content,n=this,o=e?e.type:null;return"string"==typeof s||s.nodeType||s.jquery?this._open(e,t,s):(i=s.call(t[0],function(i){n._delay(function(){t.data("ui-tooltip-open")&&(e&&(e.type=o),this._open(e,t,i))})}),i&&this._open(e,t,i),void 0)},_open:function(e,i,s){function n(t){h.of=t,a.is(":hidden")||a.position(h)}var o,a,r,l,h=t.extend({},this.options.position);if(s){if(o=this._find(i))return o.tooltip.find(".ui-tooltip-content").html(s),void 0;i.is("[title]")&&(e&&"mouseover"===e.type?i.attr("title",""):i.removeAttr("title")),o=this._tooltip(i),a=o.tooltip,this._addDescribedBy(i,a.attr("id")),a.find(".ui-tooltip-content").html(s),this.liveRegion.children().hide(),l=t("<div>").html(a.find(".ui-tooltip-content").html()),l.removeAttr("name").find("[name]").removeAttr("name"),l.removeAttr("id").find("[id]").removeAttr("id"),l.appendTo(this.liveRegion),this.options.track&&e&&/^mouse/.test(e.type)?(this._on(this.document,{mousemove:n}),n(e)):a.position(t.extend({of:i},this.options.position)),a.hide(),this._show(a,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(r=this.delayedShow=setInterval(function(){a.is(":visible")&&(n(h.of),clearInterval(r))},t.fx.interval)),this._trigger("open",e,{tooltip:a})}},_registerCloseHandlers:function(e,i){var s={keyup:function(e){if(e.keyCode===t.ui.keyCode.ESCAPE){var s=t.Event(e);s.currentTarget=i[0],this.close(s,!0)}}};i[0]!==this.element[0]&&(s.remove=function(){this._removeTooltip(this._find(i).tooltip)}),e&&"mouseover"!==e.type||(s.mouseleave="close"),e&&"focusin"!==e.type||(s.focusout="close"),this._on(!0,i,s)},close:function(e){var i,s=this,n=t(e?e.currentTarget:this.element),o=this._find(n);return o?(i=o.tooltip,o.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&!n.attr("title")&&n.attr("title",n.data("ui-tooltip-title")),this._removeDescribedBy(n),o.hiding=!0,i.stop(!0),this._hide(i,this.options.hide,function(){s._removeTooltip(t(this))}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),e&&"mouseleave"===e.type&&t.each(this.parents,function(e,i){t(i.element).attr("title",i.title),delete s.parents[e]}),o.closing=!0,this._trigger("close",e,{tooltip:i}),o.hiding||(o.closing=!1)),void 0):(n.removeData("ui-tooltip-open"),void 0)},_tooltip:function(e){var i=t("<div>").attr("role","tooltip"),s=t("<div>").appendTo(i),n=i.uniqueId().attr("id");return this._addClass(s,"ui-tooltip-content"),this._addClass(i,"ui-tooltip","ui-widget ui-widget-content"),i.appendTo(this._appendTo(e)),this.tooltips[n]={element:e,tooltip:i}},_find:function(t){var e=t.data("ui-tooltip-id");return e?this.tooltips[e]:null},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_appendTo:function(t){var e=t.closest(".ui-front, dialog");return e.length||(e=this.document[0].body),e},_destroy:function(){var e=this;t.each(this.tooltips,function(i,s){var n=t.Event("blur"),o=s.element;n.target=n.currentTarget=o[0],e.close(n,!0),t("#"+i).remove(),o.data("ui-tooltip-title")&&(o.attr("title")||o.attr("title",o.data("ui-tooltip-title")),o.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),t.uiBackCompat!==!1&&t.widget("ui.tooltip",t.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var t=this._superApply(arguments);return this.options.tooltipClass&&t.tooltip.addClass(this.options.tooltipClass),t}}),t.ui.tooltip;var f="ui-effects-",g="ui-effects-style",m="ui-effects-animated",_=t;t.effects={effect:{}},function(t,e){function i(t,e,i){var s=u[e.type]||{};return null==t?i||!e.def?null:e.def:(t=s.floor?~~t:parseFloat(t),isNaN(t)?e.def:s.mod?(t+s.mod)%s.mod:0>t?0:t>s.max?s.max:t)}function s(i){var s=h(),n=s._rgba=[];return i=i.toLowerCase(),f(l,function(t,o){var a,r=o.re.exec(i),l=r&&o.parse(r),h=o.space||"rgba";return l?(a=s[h](l),s[c[h].cache]=a[c[h].cache],n=s._rgba=a._rgba,!1):e}),n.length?("0,0,0,0"===n.join()&&t.extend(n,o.transparent),s):o[i]}function n(t,e,i){return i=(i+1)%1,1>6*i?t+6*(e-t)*i:1>2*i?e:2>3*i?t+6*(e-t)*(2/3-i):t}var o,a="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],h=t.Color=function(e,i,s,n){return new t.Color.fn.parse(e,i,s,n)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},d=h.support={},p=t("<p>")[0],f=t.each;p.style.cssText="background-color:rgba(1,1,1,.5)",d.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(c,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),h.fn=t.extend(h.prototype,{parse:function(n,a,r,l){if(n===e)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=t(n).css(a),a=e);var u=this,d=t.type(n),p=this._rgba=[];return a!==e&&(n=[n,a,r,l],d="array"),"string"===d?this.parse(s(n)||o._default):"array"===d?(f(c.rgba.props,function(t,e){p[e.idx]=i(n[e.idx],e)}),this):"object"===d?(n instanceof h?f(c,function(t,e){n[e.cache]&&(u[e.cache]=n[e.cache].slice())}):f(c,function(e,s){var o=s.cache;f(s.props,function(t,e){if(!u[o]&&s.to){if("alpha"===t||null==n[t])return;u[o]=s.to(u._rgba)}u[o][e.idx]=i(n[t],e,!0)}),u[o]&&0>t.inArray(null,u[o].slice(0,3))&&(u[o][3]=1,s.from&&(u._rgba=s.from(u[o])))}),this):e},is:function(t){var i=h(t),s=!0,n=this;return f(c,function(t,o){var a,r=i[o.cache];return r&&(a=n[o.cache]||o.to&&o.to(n._rgba)||[],f(o.props,function(t,i){return null!=r[i.idx]?s=r[i.idx]===a[i.idx]:e})),s}),s},_space:function(){var t=[],e=this;return f(c,function(i,s){e[s.cache]&&t.push(i)}),t.pop()},transition:function(t,e){var s=h(t),n=s._space(),o=c[n],a=0===this.alpha()?h("transparent"):this,r=a[o.cache]||o.to(a._rgba),l=r.slice();return s=s[o.cache],f(o.props,function(t,n){var o=n.idx,a=r[o],h=s[o],c=u[n.type]||{};null!==h&&(null===a?l[o]=h:(c.mod&&(h-a>c.mod/2?a+=c.mod:a-h>c.mod/2&&(a-=c.mod)),l[o]=i((h-a)*e+a,n)))}),this[n](l)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),n=h(e)._rgba;return h(t.map(i,function(t,e){return(1-s)*n[e]+s*t}))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&3>e&&(t=Math.round(100*t)+"%"),t});return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),s=i.pop();return e&&i.push(~~(255*s)),"#"+t.map(i,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),h.fn.parse.prototype=h.fn,c.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,s=t[0]/255,n=t[1]/255,o=t[2]/255,a=t[3],r=Math.max(s,n,o),l=Math.min(s,n,o),h=r-l,c=r+l,u=.5*c;return e=l===r?0:s===r?60*(n-o)/h+360:n===r?60*(o-s)/h+120:60*(s-n)/h+240,i=0===h?0:.5>=u?h/c:h/(2-c),[Math.round(e)%360,i,u,null==a?1:a]},c.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],s=t[2],o=t[3],a=.5>=s?s*(1+i):s+i-s*i,r=2*s-a;return[Math.round(255*n(r,a,e+1/3)),Math.round(255*n(r,a,e)),Math.round(255*n(r,a,e-1/3)),o]},f(c,function(s,n){var o=n.props,a=n.cache,l=n.to,c=n.from;h.fn[s]=function(s){if(l&&!this[a]&&(this[a]=l(this._rgba)),s===e)return this[a].slice();var n,r=t.type(s),u="array"===r||"object"===r?s:arguments,d=this[a].slice();return f(o,function(t,e){var s=u["object"===r?t:e.idx];null==s&&(s=d[e.idx]),d[e.idx]=i(s,e)}),c?(n=h(c(d)),n[a]=d,n):h(d)},f(o,function(e,i){h.fn[e]||(h.fn[e]=function(n){var o,a=t.type(n),l="alpha"===e?this._hsla?"hsla":"rgba":s,h=this[l](),c=h[i.idx];return"undefined"===a?c:("function"===a&&(n=n.call(this,c),a=t.type(n)),null==n&&i.empty?this:("string"===a&&(o=r.exec(n),o&&(n=c+parseFloat(o[2])*("+"===o[1]?1:-1))),h[i.idx]=n,this[l](h)))})})}),h.hook=function(e){var i=e.split(" ");f(i,function(e,i){t.cssHooks[i]={set:function(e,n){var o,a,r="";if("transparent"!==n&&("string"!==t.type(n)||(o=s(n)))){if(n=h(o||n),!d.rgba&&1!==n._rgba[3]){for(a="backgroundColor"===i?e.parentNode:e;(""===r||"transparent"===r)&&a&&a.style;)try{r=t.css(a,"backgroundColor"),a=a.parentNode}catch(l){}n=n.blend(r&&"transparent"!==r?r:"_default")}n=n.toRgbaString()}try{e.style[i]=n}catch(l){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=h(e.elem,i),e.end=h(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}})},h.hook(a),t.cssHooks.borderColor={expand:function(t){var e={};return f(["Top","Right","Bottom","Left"],function(i,s){e["border"+s+"Color"]=t}),e}},o=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(_),function(){function e(e){var i,s,n=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,o={};if(n&&n.length&&n[0]&&n[n[0]])for(s=n.length;s--;)i=n[s],"string"==typeof n[i]&&(o[t.camelCase(i)]=n[i]);else for(i in n)"string"==typeof n[i]&&(o[i]=n[i]);return o}function i(e,i){var s,o,a={};for(s in i)o=i[s],e[s]!==o&&(n[s]||(t.fx.step[s]||!isNaN(parseFloat(o)))&&(a[s]=o));return a}var s=["add","remove","toggle"],n={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(_.style(t.elem,i,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(n,o,a,r){var l=t.speed(o,a,r);return this.queue(function(){var o,a=t(this),r=a.attr("class")||"",h=l.children?a.find("*").addBack():a;h=h.map(function(){var i=t(this);return{el:i,start:e(this)}}),o=function(){t.each(s,function(t,e){n[e]&&a[e+"Class"](n[e])})},o(),h=h.map(function(){return this.end=e(this.el[0]),this.diff=i(this.start,this.end),this}),a.attr("class",r),h=h.map(function(){var e=this,i=t.Deferred(),s=t.extend({},l,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,s),i.promise()}),t.when.apply(t,h.get()).done(function(){o(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),l.complete.call(a[0])})})},t.fn.extend({addClass:function(e){return function(i,s,n,o){return s?t.effects.animateClass.call(this,{add:i},s,n,o):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(i,s,n,o){return arguments.length>1?t.effects.animateClass.call(this,{remove:i},s,n,o):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(e){return function(i,s,n,o,a){return"boolean"==typeof s||void 0===s?n?t.effects.animateClass.call(this,s?{add:i}:{remove:i},n,o,a):e.apply(this,arguments):t.effects.animateClass.call(this,{toggle:i},s,n,o)}}(t.fn.toggleClass),switchClass:function(e,i,s,n,o){return t.effects.animateClass.call(this,{add:i,remove:e},s,n,o)}})}(),function(){function e(e,i,s,n){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(n=i,s=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(n=s,s=i,i={}),t.isFunction(s)&&(n=s,s=null),i&&t.extend(e,i),s=s||i.duration,e.duration=t.fx.off?0:"number"==typeof s?s:s in t.fx.speeds?t.fx.speeds[s]:t.fx.speeds._default,e.complete=n||i.complete,e}function i(e){return!e||"number"==typeof e||t.fx.speeds[e]?!0:"string"!=typeof e||t.effects.effect[e]?t.isFunction(e)?!0:"object"!=typeof e||e.effect?!1:!0:!0}function s(t,e){var i=e.outerWidth(),s=e.outerHeight(),n=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/,o=n.exec(t)||["",0,i,s,0];return{top:parseFloat(o[1])||0,right:"auto"===o[2]?i:parseFloat(o[2]),bottom:"auto"===o[3]?s:parseFloat(o[3]),left:parseFloat(o[4])||0}}t.expr&&t.expr.filters&&t.expr.filters.animated&&(t.expr.filters.animated=function(e){return function(i){return!!t(i).data(m)||e(i)}}(t.expr.filters.animated)),t.uiBackCompat!==!1&&t.extend(t.effects,{save:function(t,e){for(var i=0,s=e.length;s>i;i++)null!==e[i]&&t.data(f+e[i],t[0].style[e[i]])},restore:function(t,e){for(var i,s=0,n=e.length;n>s;s++)null!==e[s]&&(i=t.data(f+e[s]),t.css(e[s],i))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),float:e.css("float")},s=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),n={width:e.width(),height:e.height()},o=document.activeElement;try{o.id}catch(a){o=document.body}return e.wrap(s),(e[0]===o||t.contains(e[0],o))&&t(o).trigger("focus"),s=e.parent(),"static"===e.css("position")?(s.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,s){i[s]=e.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(n),s.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).trigger("focus")),e}}),t.extend(t.effects,{version:"1.12.1",define:function(e,i,s){return s||(s=i,i="effect"),t.effects.effect[e]=s,t.effects.effect[e].mode=i,s},scaledDimensions:function(t,e,i){if(0===e)return{height:0,width:0,outerHeight:0,outerWidth:0};var s="horizontal"!==i?(e||100)/100:1,n="vertical"!==i?(e||100)/100:1;return{height:t.height()*n,width:t.width()*s,outerHeight:t.outerHeight()*n,outerWidth:t.outerWidth()*s}},clipToBox:function(t){return{width:t.clip.right-t.clip.left,height:t.clip.bottom-t.clip.top,left:t.clip.left,top:t.clip.top}},unshift:function(t,e,i){var s=t.queue();e>1&&s.splice.apply(s,[1,0].concat(s.splice(e,i))),t.dequeue()},saveStyle:function(t){t.data(g,t[0].style.cssText)},restoreStyle:function(t){t[0].style.cssText=t.data(g)||"",t.removeData(g)},mode:function(t,e){var i=t.is(":hidden");return"toggle"===e&&(e=i?"show":"hide"),(i?"hide"===e:"show"===e)&&(e="none"),e},getBaseline:function(t,e){var i,s;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=t[1]/e.width}return{x:s,y:i}},createPlaceholder:function(e){var i,s=e.css("position"),n=e.position();return e.css({marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()),/^(static|relative)/.test(s)&&(s="absolute",i=t("<"+e[0].nodeName+">").insertAfter(e).css({display:/^(inline|ruby)/.test(e.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight"),float:e.css("float")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).addClass("ui-effects-placeholder"),e.data(f+"placeholder",i)),e.css({position:s,left:n.left,top:n.top}),i},removePlaceholder:function(t){var e=f+"placeholder",i=t.data(e);i&&(i.remove(),t.removeData(e))},cleanUp:function(e){t.effects.restoreStyle(e),t.effects.removePlaceholder(e)},setTransition:function(e,i,s,n){return n=n||{},t.each(i,function(t,i){var o=e.cssUnit(i);o[0]>0&&(n[i]=o[0]*s+o[1])}),n}}),t.fn.extend({effect:function(){function i(e){function i(){r.removeData(m),t.effects.cleanUp(r),"hide"===s.mode&&r.hide(),a()}function a(){t.isFunction(l)&&l.call(r[0]),t.isFunction(e)&&e()}var r=t(this);s.mode=c.shift(),t.uiBackCompat===!1||o?"none"===s.mode?(r[h](),a()):n.call(r[0],s,i):(r.is(":hidden")?"hide"===h:"show"===h)?(r[h](),a()):n.call(r[0],s,a)}var s=e.apply(this,arguments),n=t.effects.effect[s.effect],o=n.mode,a=s.queue,r=a||"fx",l=s.complete,h=s.mode,c=[],u=function(e){var i=t(this),s=t.effects.mode(i,h)||o;i.data(m,!0),c.push(s),o&&("show"===s||s===o&&"hide"===s)&&i.show(),o&&"none"===s||t.effects.saveStyle(i),t.isFunction(e)&&e()};return t.fx.off||!n?h?this[h](s.duration,l):this.each(function(){l&&l.call(this)}):a===!1?this.each(u).each(i):this.queue(r,u).queue(r,i)},show:function(t){return function(s){if(i(s))return t.apply(this,arguments);var n=e.apply(this,arguments);return n.mode="show",this.effect.call(this,n)}}(t.fn.show),hide:function(t){return function(s){if(i(s))return t.apply(this,arguments);var n=e.apply(this,arguments);return n.mode="hide",this.effect.call(this,n)}}(t.fn.hide),toggle:function(t){return function(s){if(i(s)||"boolean"==typeof s)return t.apply(this,arguments);var n=e.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)}}(t.fn.toggle),cssUnit:function(e){var i=this.css(e),s=[];return t.each(["em","px","%","pt"],function(t,e){i.indexOf(e)>0&&(s=[parseFloat(i),e])}),s},cssClip:function(t){return t?this.css("clip","rect("+t.top+"px "+t.right+"px "+t.bottom+"px "+t.left+"px)"):s(this.css("clip"),this)},transfer:function(e,i){var s=t(this),n=t(e.to),o="fixed"===n.css("position"),a=t("body"),r=o?a.scrollTop():0,l=o?a.scrollLeft():0,h=n.offset(),c={top:h.top-r,left:h.left-l,height:n.innerHeight(),width:n.innerWidth()},u=s.offset(),d=t("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(e.className).css({top:u.top-r,left:u.left-l,height:s.innerHeight(),width:s.innerWidth(),position:o?"fixed":"absolute"}).animate(c,e.duration,e.easing,function(){d.remove(),t.isFunction(i)&&i()})}}),t.fx.step.clip=function(e){e.clipInit||(e.start=t(e.elem).cssClip(),"string"==typeof e.end&&(e.end=s(e.end,e.elem)),e.clipInit=!0),t(e.elem).cssClip({top:e.pos*(e.end.top-e.start.top)+e.start.top,right:e.pos*(e.end.right-e.start.right)+e.start.right,bottom:e.pos*(e.end.bottom-e.start.bottom)+e.start.bottom,left:e.pos*(e.end.left-e.start.left)+e.start.left})}}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,i){e[i]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;((e=Math.pow(2,--i))-1)/11>t;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return.5>t?i(2*t)/2:1-i(-2*t+2)/2}})}();var v=t.effects;t.effects.define("blind","hide",function(e,i){var s={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},n=t(this),o=e.direction||"up",a=n.cssClip(),r={clip:t.extend({},a)},l=t.effects.createPlaceholder(n);r.clip[s[o][0]]=r.clip[s[o][1]],"show"===e.mode&&(n.cssClip(r.clip),l&&l.css(t.effects.clipToBox(r)),r.clip=a),l&&l.animate(t.effects.clipToBox(r),e.duration,e.easing),n.animate(r,{queue:!1,duration:e.duration,easing:e.easing,complete:i})}),t.effects.define("bounce",function(e,i){var s,n,o,a=t(this),r=e.mode,l="hide"===r,h="show"===r,c=e.direction||"up",u=e.distance,d=e.times||5,p=2*d+(h||l?1:0),f=e.duration/p,g=e.easing,m="up"===c||"down"===c?"top":"left",_="up"===c||"left"===c,v=0,b=a.queue().length;for(t.effects.createPlaceholder(a),o=a.css(m),u||(u=a["top"===m?"outerHeight":"outerWidth"]()/3),h&&(n={opacity:1},n[m]=o,a.css("opacity",0).css(m,_?2*-u:2*u).animate(n,f,g)),l&&(u/=Math.pow(2,d-1)),n={},n[m]=o;d>v;v++)s={},s[m]=(_?"-=":"+=")+u,a.animate(s,f,g).animate(n,f,g),u=l?2*u:u/2;l&&(s={opacity:0},s[m]=(_?"-=":"+=")+u,a.animate(s,f,g)),a.queue(i),t.effects.unshift(a,b,p+1)}),t.effects.define("clip","hide",function(e,i){var s,n={},o=t(this),a=e.direction||"vertical",r="both"===a,l=r||"horizontal"===a,h=r||"vertical"===a;s=o.cssClip(),n.clip={top:h?(s.bottom-s.top)/2:s.top,right:l?(s.right-s.left)/2:s.right,bottom:h?(s.bottom-s.top)/2:s.bottom,left:l?(s.right-s.left)/2:s.left},t.effects.createPlaceholder(o),"show"===e.mode&&(o.cssClip(n.clip),n.clip=s),o.animate(n,{queue:!1,duration:e.duration,easing:e.easing,complete:i})}),t.effects.define("drop","hide",function(e,i){var s,n=t(this),o=e.mode,a="show"===o,r=e.direction||"left",l="up"===r||"down"===r?"top":"left",h="up"===r||"left"===r?"-=":"+=",c="+="===h?"-=":"+=",u={opacity:0};t.effects.createPlaceholder(n),s=e.distance||n["top"===l?"outerHeight":"outerWidth"](!0)/2,u[l]=h+s,a&&(n.css(u),u[l]=c+s,u.opacity=1),n.animate(u,{queue:!1,duration:e.duration,easing:e.easing,complete:i})}),t.effects.define("explode","hide",function(e,i){function s(){b.push(this),b.length===u*d&&n()}function n(){p.css({visibility:"visible"}),t(b).remove(),i()}var o,a,r,l,h,c,u=e.pieces?Math.round(Math.sqrt(e.pieces)):3,d=u,p=t(this),f=e.mode,g="show"===f,m=p.show().css("visibility","hidden").offset(),_=Math.ceil(p.outerWidth()/d),v=Math.ceil(p.outerHeight()/u),b=[];for(o=0;u>o;o++)for(l=m.top+o*v,c=o-(u-1)/2,a=0;d>a;a++)r=m.left+a*_,h=a-(d-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-a*_,top:-o*v}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:_,height:v,left:r+(g?h*_:0),top:l+(g?c*v:0),opacity:g?0:1}).animate({left:r+(g?0:h*_),top:l+(g?0:c*v),opacity:g?1:0},e.duration||500,e.easing,s)}),t.effects.define("fade","toggle",function(e,i){var s="show"===e.mode;t(this).css("opacity",s?0:1).animate({opacity:s?1:0},{queue:!1,duration:e.duration,easing:e.easing,complete:i})}),t.effects.define("fold","hide",function(e,i){var s=t(this),n=e.mode,o="show"===n,a="hide"===n,r=e.size||15,l=/([0-9]+)%/.exec(r),h=!!e.horizFirst,c=h?["right","bottom"]:["bottom","right"],u=e.duration/2,d=t.effects.createPlaceholder(s),p=s.cssClip(),f={clip:t.extend({},p)},g={clip:t.extend({},p)},m=[p[c[0]],p[c[1]]],_=s.queue().length;l&&(r=parseInt(l[1],10)/100*m[a?0:1]),f.clip[c[0]]=r,g.clip[c[0]]=r,g.clip[c[1]]=0,o&&(s.cssClip(g.clip),d&&d.css(t.effects.clipToBox(g)),g.clip=p),s.queue(function(i){d&&d.animate(t.effects.clipToBox(f),u,e.easing).animate(t.effects.clipToBox(g),u,e.easing),i()}).animate(f,u,e.easing).animate(g,u,e.easing).queue(i),t.effects.unshift(s,_,4)}),t.effects.define("highlight","show",function(e,i){var s=t(this),n={backgroundColor:s.css("backgroundColor")};"hide"===e.mode&&(n.opacity=0),t.effects.saveStyle(s),s.css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(n,{queue:!1,duration:e.duration,easing:e.easing,complete:i})}),t.effects.define("size",function(e,i){var s,n,o,a=t(this),r=["fontSize"],l=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],c=e.mode,u="effect"!==c,d=e.scale||"both",p=e.origin||["middle","center"],f=a.css("position"),g=a.position(),m=t.effects.scaledDimensions(a),_=e.from||m,v=e.to||t.effects.scaledDimensions(a,0);t.effects.createPlaceholder(a),"show"===c&&(o=_,_=v,v=o),n={from:{y:_.height/m.height,x:_.width/m.width},to:{y:v.height/m.height,x:v.width/m.width}},("box"===d||"both"===d)&&(n.from.y!==n.to.y&&(_=t.effects.setTransition(a,l,n.from.y,_),v=t.effects.setTransition(a,l,n.to.y,v)),n.from.x!==n.to.x&&(_=t.effects.setTransition(a,h,n.from.x,_),v=t.effects.setTransition(a,h,n.to.x,v))),("content"===d||"both"===d)&&n.from.y!==n.to.y&&(_=t.effects.setTransition(a,r,n.from.y,_),v=t.effects.setTransition(a,r,n.to.y,v)),p&&(s=t.effects.getBaseline(p,m),_.top=(m.outerHeight-_.outerHeight)*s.y+g.top,_.left=(m.outerWidth-_.outerWidth)*s.x+g.left,v.top=(m.outerHeight-v.outerHeight)*s.y+g.top,v.left=(m.outerWidth-v.outerWidth)*s.x+g.left),a.css(_),("content"===d||"both"===d)&&(l=l.concat(["marginTop","marginBottom"]).concat(r),h=h.concat(["marginLeft","marginRight"]),a.find("*[width]").each(function(){var i=t(this),s=t.effects.scaledDimensions(i),o={height:s.height*n.from.y,width:s.width*n.from.x,outerHeight:s.outerHeight*n.from.y,outerWidth:s.outerWidth*n.from.x},a={height:s.height*n.to.y,width:s.width*n.to.x,outerHeight:s.height*n.to.y,outerWidth:s.width*n.to.x};n.from.y!==n.to.y&&(o=t.effects.setTransition(i,l,n.from.y,o),a=t.effects.setTransition(i,l,n.to.y,a)),n.from.x!==n.to.x&&(o=t.effects.setTransition(i,h,n.from.x,o),a=t.effects.setTransition(i,h,n.to.x,a)),u&&t.effects.saveStyle(i),i.css(o),i.animate(a,e.duration,e.easing,function(){u&&t.effects.restoreStyle(i)})})),a.animate(v,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){var e=a.offset();0===v.opacity&&a.css("opacity",_.opacity),u||(a.css("position","static"===f?"relative":f).offset(e),t.effects.saveStyle(a)),i()}})}),t.effects.define("scale",function(e,i){var s=t(this),n=e.mode,o=parseInt(e.percent,10)||(0===parseInt(e.percent,10)?0:"effect"!==n?0:100),a=t.extend(!0,{from:t.effects.scaledDimensions(s),to:t.effects.scaledDimensions(s,o,e.direction||"both"),origin:e.origin||["middle","center"]},e);e.fade&&(a.from.opacity=1,a.to.opacity=0),t.effects.effect.size.call(this,a,i)}),t.effects.define("puff","hide",function(e,i){var s=t.extend(!0,{},e,{fade:!0,percent:parseInt(e.percent,10)||150});t.effects.effect.scale.call(this,s,i)}),t.effects.define("pulsate","show",function(e,i){var s=t(this),n=e.mode,o="show"===n,a="hide"===n,r=o||a,l=2*(e.times||5)+(r?1:0),h=e.duration/l,c=0,u=1,d=s.queue().length;for((o||!s.is(":visible"))&&(s.css("opacity",0).show(),c=1);l>u;u++)s.animate({opacity:c},h,e.easing),c=1-c;s.animate({opacity:c},h,e.easing),s.queue(i),t.effects.unshift(s,d,l+1)}),t.effects.define("shake",function(e,i){var s=1,n=t(this),o=e.direction||"left",a=e.distance||20,r=e.times||3,l=2*r+1,h=Math.round(e.duration/l),c="up"===o||"down"===o?"top":"left",u="up"===o||"left"===o,d={},p={},f={},g=n.queue().length;for(t.effects.createPlaceholder(n),d[c]=(u?"-=":"+=")+a,p[c]=(u?"+=":"-=")+2*a,f[c]=(u?"-=":"+=")+2*a,n.animate(d,h,e.easing);r>s;s++)n.animate(p,h,e.easing).animate(f,h,e.easing);n.animate(p,h,e.easing).animate(d,h/2,e.easing).queue(i),t.effects.unshift(n,g,l+1)}),t.effects.define("slide","show",function(e,i){var s,n,o=t(this),a={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},r=e.mode,l=e.direction||"left",h="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l,u=e.distance||o["top"===h?"outerHeight":"outerWidth"](!0),d={};t.effects.createPlaceholder(o),s=o.cssClip(),n=o.position()[h],d[h]=(c?-1:1)*u+n,d.clip=o.cssClip(),d.clip[a[l][1]]=d.clip[a[l][0]],"show"===r&&(o.cssClip(d.clip),o.css(h,d[h]),d.clip=s,d[h]=n),o.animate(d,{queue:!1,duration:e.duration,easing:e.easing,complete:i})});var v;t.uiBackCompat!==!1&&(v=t.effects.define("transfer",function(e,i){t(this).transfer(e,i)}))})},{}],7:[function(require,module,exports){(function(){var slice=Function.prototype.call.bind(Array.prototype.slice);SVG.extend(SVG.Path,{M:function(p){p=arguments.length===1?[p.x,p.y]:slice(arguments);this.addSegment("M",p,this._redrawEnabled);if(this._segments.length===1){return this.plot("M"+p[0]+" "+p[1])}return this},m:function(p){p=arguments.length===1?[p.x,p.y]:slice(arguments);this.addSegment("m",p,this._redrawEnabled);if(this._segments.length===1){return this.plot("m"+p[0]+" "+p[1])}return this},L:function(p){p=arguments.length===1?[p.x,p.y]:slice(arguments);return this.addSegment("L",p,this._redrawEnabled)},l:function(p){p=arguments.length===1?[p.x,p.y]:slice(arguments);return this.addSegment("l",p,this._redrawEnabled)},H:function(x){return this.addSegment("H",[x],this._redrawEnabled)},h:function(x){return this.addSegment("h",[x],this._redrawEnabled)},V:function(y){return this.addSegment("V",[y],this._redrawEnabled)},v:function(y){return this.addSegment("v",[y],this._redrawEnabled)},C:function(p1,p2,p){p=arguments.length===3?[p1.x,p1.y,p2.x,p2.y,p.x,p.y]:slice(arguments);return this.addSegment("C",p,this._redrawEnabled)},c:function(p1,p2,p){p=arguments.length===3?[p1.x,p1.y,p2.x,p2.y,p.x,p.y]:slice(arguments);return this.addSegment("c",p,this._redrawEnabled)},S:function(p2,p){p=arguments.length===2?[p2.x,p2.y,p.x,p.y]:slice(arguments);return this.addSegment("S",p,this._redrawEnabled)},s:function(p2,p){p=arguments.length===2?[p2.x,p2.y,p.x,p.y]:slice(arguments);return this.addSegment("s",p,this._redrawEnabled)},Q:function(p1,p){p=arguments.length===2?[p1.x,p1.y,p.x,p.y]:slice(arguments);return this.addSegment("Q",p,this._redrawEnabled)},q:function(p1,p){p=arguments.length===2?[p1.x,p1.y,p.x,p.y]:slice(arguments);return this.addSegment("q",p,this._redrawEnabled)},T:function(p){p=arguments.length===1?[p.x,p.y]:slice(arguments);return this.addSegment("T",p,this._redrawEnabled)},t:function(p){p=arguments.length===1?[p.x,p.y]:slice(arguments);return this.addSegment("t",p,this._redrawEnabled)},A:function(rx,ry,xAxisRotation,largeArcFlag,sweepFlag,p){p=arguments.length===6?[rx,ry,xAxisRotation,largeArcFlag,sweepFlag,p.x,p.y]:slice(arguments);return this.addSegment("A",p,this._redrawEnabled)},a:function(rx,ry,xAxisRotation,largeArcFlag,sweepFlag,p){p=arguments.length===6?[rx,ry,xAxisRotation,largeArcFlag,sweepFlag,p.x,p.y]:slice(arguments);return this.addSegment("a",p,this._redrawEnabled)},Z:function(){return this.addSegment("Z",[],this._redrawEnabled)},addSegment:function(movement,coordinates,redraw){var segment={type:movement,coords:coordinates};if(!this._segments){this._segments=[]}this._segments.push(segment);if(redraw!==false){this._drawSegment(segment)}return this},clearPath:function(){if(this._segments){this._segments.length=0}this._lastSegment=null;return this.plot()},getSegmentCount:function(){return this._segments.length},getSegment:function(index){return this._segments[index]},removeSegment:function(index){this._segments.splice(index,1);return this.redraw()},replaceSegment:function(index,segment){this._segments.splice(index,1,segment);return this.redraw()},drawAnimated:function(options){options=options||{};options.duration=options.duration||"1000";options.easing=options.easing||"<>";options.delay=options.delay||0;var length=this.length();this.stroke({width:2,dasharray:length+" "+length,dashoffset:length});var fx=this.animate(options.duration,options.easing,options.delay);fx.stroke({dashoffset:0});return this},update:function(redraw){if(redraw===true)this._redrawEnabled=false;if(redraw===false)this._redrawEnabled=true;return!!this._redrawEnabled},redraw:function(){this._lastSegment=null;this.attr("d","");return this._drawSegment(this._segments)},_drawSegment:function(segment){var str="",lastSegment=this._lastSegment;if(!Array.isArray(segment)){segment=[segment]}for(var i=0;i<segment.length;i+=1){if(lastSegment===segment[i].type){str+=" "+segment[i].coords.join(" ")}else{str+=" "+segment[i].type+segment[i].coords.join(" ")}lastSegment=segment[i].type}this._lastSegment=lastSegment;return this.attr("d",(this.attr("d")||"")+str)}})}).call(this)},{}],8:[function(require,module,exports){(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?module.exports=factory(function(){try{return require("moment")}catch(e){}}()):typeof define==="function"&&define.amd?define(["require"],function(require){return factory(function(){try{return require("moment")}catch(e){}}())}):global.Chart=factory(global.moment)})(this,function(moment){"use strict";moment=moment&&moment.hasOwnProperty("default")?moment["default"]:moment;var conversions={rgb2hsl:rgb2hsl,rgb2hsv:rgb2hsv,rgb2hwb:rgb2hwb,rgb2cmyk:rgb2cmyk,rgb2keyword:rgb2keyword,rgb2xyz:rgb2xyz,rgb2lab:rgb2lab,rgb2lch:rgb2lch,hsl2rgb:hsl2rgb,hsl2hsv:hsl2hsv,hsl2hwb:hsl2hwb,hsl2cmyk:hsl2cmyk,hsl2keyword:hsl2keyword,hsv2rgb:hsv2rgb,hsv2hsl:hsv2hsl,hsv2hwb:hsv2hwb,hsv2cmyk:hsv2cmyk,hsv2keyword:hsv2keyword,hwb2rgb:hwb2rgb,hwb2hsl:hwb2hsl,hwb2hsv:hwb2hsv,hwb2cmyk:hwb2cmyk,hwb2keyword:hwb2keyword,cmyk2rgb:cmyk2rgb,cmyk2hsl:cmyk2hsl,cmyk2hsv:cmyk2hsv,cmyk2hwb:cmyk2hwb,cmyk2keyword:cmyk2keyword,keyword2rgb:keyword2rgb,keyword2hsl:keyword2hsl,keyword2hsv:keyword2hsv,keyword2hwb:keyword2hwb,keyword2cmyk:keyword2cmyk,keyword2lab:keyword2lab,keyword2xyz:keyword2xyz,xyz2rgb:xyz2rgb,xyz2lab:xyz2lab,xyz2lch:xyz2lch,lab2xyz:lab2xyz,lab2rgb:lab2rgb,lab2lch:lab2lch,lch2lab:lch2lab,lch2xyz:lch2xyz,lch2rgb:lch2rgb};function rgb2hsl(rgb){var r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255,min=Math.min(r,g,b),max=Math.max(r,g,b),delta=max-min,h,s,l;if(max==min)h=0;else if(r==max)h=(g-b)/delta;else if(g==max)h=2+(b-r)/delta;else if(b==max)h=4+(r-g)/delta;h=Math.min(h*60,360);if(h<0)h+=360;l=(min+max)/2;if(max==min)s=0;else if(l<=.5)s=delta/(max+min);else s=delta/(2-max-min);return[h,s*100,l*100]}function rgb2hsv(rgb){var r=rgb[0],g=rgb[1],b=rgb[2],min=Math.min(r,g,b),max=Math.max(r,g,b),delta=max-min,h,s,v;if(max==0)s=0;else s=delta/max*1e3/10;if(max==min)h=0;else if(r==max)h=(g-b)/delta;else if(g==max)h=2+(b-r)/delta;else if(b==max)h=4+(r-g)/delta;h=Math.min(h*60,360);if(h<0)h+=360;v=max/255*1e3/10;return[h,s,v]}function rgb2hwb(rgb){var r=rgb[0],g=rgb[1],b=rgb[2],h=rgb2hsl(rgb)[0],w=1/255*Math.min(r,Math.min(g,b)),b=1-1/255*Math.max(r,Math.max(g,b));return[h,w*100,b*100]}function rgb2cmyk(rgb){var r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255,c,m,y,k;k=Math.min(1-r,1-g,1-b);c=(1-r-k)/(1-k)||0;m=(1-g-k)/(1-k)||0;y=(1-b-k)/(1-k)||0;return[c*100,m*100,y*100,k*100]}function rgb2keyword(rgb){return reverseKeywords[JSON.stringify(rgb)]}function rgb2xyz(rgb){var r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255;r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92;g=g>.04045?Math.pow((g+.055)/1.055,2.4):g/12.92;b=b>.04045?Math.pow((b+.055)/1.055,2.4):b/12.92;var x=r*.4124+g*.3576+b*.1805;var y=r*.2126+g*.7152+b*.0722;var z=r*.0193+g*.1192+b*.9505;return[x*100,y*100,z*100]}function rgb2lab(rgb){var xyz=rgb2xyz(rgb),x=xyz[0],y=xyz[1],z=xyz[2],l,a,b;x/=95.047;y/=100;z/=108.883;x=x>.008856?Math.pow(x,1/3):7.787*x+16/116;y=y>.008856?Math.pow(y,1/3):7.787*y+16/116;z=z>.008856?Math.pow(z,1/3):7.787*z+16/116;l=116*y-16;a=500*(x-y);b=200*(y-z);return[l,a,b]}function rgb2lch(args){return lab2lch(rgb2lab(args))}function hsl2rgb(hsl){var h=hsl[0]/360,s=hsl[1]/100,l=hsl[2]/100,t1,t2,t3,rgb,val;if(s==0){val=l*255;return[val,val,val]}if(l<.5)t2=l*(1+s);else t2=l+s-l*s;t1=2*l-t2;rgb=[0,0,0];for(var i=0;i<3;i++){t3=h+1/3*-(i-1);t3<0&&t3++;t3>1&&t3--;if(6*t3<1)val=t1+(t2-t1)*6*t3;else if(2*t3<1)val=t2;else if(3*t3<2)val=t1+(t2-t1)*(2/3-t3)*6;else val=t1;rgb[i]=val*255}return rgb}function hsl2hsv(hsl){var h=hsl[0],s=hsl[1]/100,l=hsl[2]/100,sv,v;if(l===0){return[0,0,0]}l*=2;s*=l<=1?l:2-l;v=(l+s)/2;sv=2*s/(l+s);return[h,sv*100,v*100]}function hsl2hwb(args){return rgb2hwb(hsl2rgb(args))}function hsl2cmyk(args){return rgb2cmyk(hsl2rgb(args))}function hsl2keyword(args){return rgb2keyword(hsl2rgb(args))}function hsv2rgb(hsv){var h=hsv[0]/60,s=hsv[1]/100,v=hsv[2]/100,hi=Math.floor(h)%6;var f=h-Math.floor(h),p=255*v*(1-s),q=255*v*(1-s*f),t=255*v*(1-s*(1-f)),v=255*v;switch(hi){case 0:return[v,t,p];case 1:return[q,v,p];case 2:return[p,v,t];case 3:return[p,q,v];case 4:return[t,p,v];case 5:return[v,p,q]}}function hsv2hsl(hsv){var h=hsv[0],s=hsv[1]/100,v=hsv[2]/100,sl,l;l=(2-s)*v;sl=s*v;sl/=l<=1?l:2-l;sl=sl||0;l/=2;return[h,sl*100,l*100]}function hsv2hwb(args){return rgb2hwb(hsv2rgb(args))}function hsv2cmyk(args){return rgb2cmyk(hsv2rgb(args))}function hsv2keyword(args){return rgb2keyword(hsv2rgb(args))}function hwb2rgb(hwb){var h=hwb[0]/360,wh=hwb[1]/100,bl=hwb[2]/100,ratio=wh+bl,i,v,f,n;if(ratio>1){wh/=ratio;bl/=ratio}i=Math.floor(6*h);v=1-bl;f=6*h-i;if((i&1)!=0){f=1-f}n=wh+f*(v-wh);switch(i){default:case 6:case 0:r=v;g=n;b=wh;break;case 1:r=n;g=v;b=wh;break;case 2:r=wh;g=v;b=n;break;case 3:r=wh;g=n;b=v;break;case 4:r=n;g=wh;b=v;break;case 5:r=v;g=wh;b=n;break}return[r*255,g*255,b*255]}function hwb2hsl(args){return rgb2hsl(hwb2rgb(args))}function hwb2hsv(args){return rgb2hsv(hwb2rgb(args))}function hwb2cmyk(args){return rgb2cmyk(hwb2rgb(args))}function hwb2keyword(args){return rgb2keyword(hwb2rgb(args))}function cmyk2rgb(cmyk){var c=cmyk[0]/100,m=cmyk[1]/100,y=cmyk[2]/100,k=cmyk[3]/100,r,g,b;r=1-Math.min(1,c*(1-k)+k);g=1-Math.min(1,m*(1-k)+k);b=1-Math.min(1,y*(1-k)+k);return[r*255,g*255,b*255]}function cmyk2hsl(args){return rgb2hsl(cmyk2rgb(args))}function cmyk2hsv(args){return rgb2hsv(cmyk2rgb(args))}function cmyk2hwb(args){return rgb2hwb(cmyk2rgb(args))}function cmyk2keyword(args){return rgb2keyword(cmyk2rgb(args))}function xyz2rgb(xyz){var x=xyz[0]/100,y=xyz[1]/100,z=xyz[2]/100,r,g,b;r=x*3.2406+y*-1.5372+z*-.4986;g=x*-.9689+y*1.8758+z*.0415;b=x*.0557+y*-.204+z*1.057;r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r=r*12.92;g=g>.0031308?1.055*Math.pow(g,1/2.4)-.055:g=g*12.92;b=b>.0031308?1.055*Math.pow(b,1/2.4)-.055:b=b*12.92;r=Math.min(Math.max(0,r),1);g=Math.min(Math.max(0,g),1);b=Math.min(Math.max(0,b),1);return[r*255,g*255,b*255]}function xyz2lab(xyz){var x=xyz[0],y=xyz[1],z=xyz[2],l,a,b;x/=95.047;y/=100;z/=108.883;x=x>.008856?Math.pow(x,1/3):7.787*x+16/116;y=y>.008856?Math.pow(y,1/3):7.787*y+16/116;z=z>.008856?Math.pow(z,1/3):7.787*z+16/116;l=116*y-16;a=500*(x-y);b=200*(y-z);return[l,a,b]}function xyz2lch(args){return lab2lch(xyz2lab(args))}function lab2xyz(lab){var l=lab[0],a=lab[1],b=lab[2],x,y,z,y2;if(l<=8){y=l*100/903.3;y2=7.787*(y/100)+16/116}else{y=100*Math.pow((l+16)/116,3);y2=Math.pow(y/100,1/3)}x=x/95.047<=.008856?x=95.047*(a/500+y2-16/116)/7.787:95.047*Math.pow(a/500+y2,3);z=z/108.883<=.008859?z=108.883*(y2-b/200-16/116)/7.787:108.883*Math.pow(y2-b/200,3);return[x,y,z]}function lab2lch(lab){var l=lab[0],a=lab[1],b=lab[2],hr,h,c;hr=Math.atan2(b,a);h=hr*360/2/Math.PI;if(h<0){h+=360}c=Math.sqrt(a*a+b*b);return[l,c,h]}function lab2rgb(args){return xyz2rgb(lab2xyz(args))}function lch2lab(lch){var l=lch[0],c=lch[1],h=lch[2],a,b,hr;hr=h/360*2*Math.PI;a=c*Math.cos(hr);b=c*Math.sin(hr);return[l,a,b]}function lch2xyz(args){return lab2xyz(lch2lab(args))}function lch2rgb(args){return lab2rgb(lch2lab(args))}function keyword2rgb(keyword){return cssKeywords[keyword]}function keyword2hsl(args){return rgb2hsl(keyword2rgb(args))}function keyword2hsv(args){return rgb2hsv(keyword2rgb(args))}function keyword2hwb(args){return rgb2hwb(keyword2rgb(args))}function keyword2cmyk(args){return rgb2cmyk(keyword2rgb(args))}function keyword2lab(args){return rgb2lab(keyword2rgb(args))}function keyword2xyz(args){return rgb2xyz(keyword2rgb(args))}var cssKeywords={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var reverseKeywords={};for(var key in cssKeywords){reverseKeywords[JSON.stringify(cssKeywords[key])]=key}var convert=function(){return new Converter};for(var func in conversions){convert[func+"Raw"]=function(func){return function(arg){if(typeof arg=="number")arg=Array.prototype.slice.call(arguments);return conversions[func](arg)}}(func);var pair=/(\w+)2(\w+)/.exec(func),from=pair[1],to=pair[2];convert[from]=convert[from]||{};convert[from][to]=convert[func]=function(func){return function(arg){if(typeof arg=="number")arg=Array.prototype.slice.call(arguments);var val=conversions[func](arg);if(typeof val=="string"||val===undefined)return val;for(var i=0;i<val.length;i++)val[i]=Math.round(val[i]);return val}}(func)}var Converter=function(){this.convs={}};Converter.prototype.routeSpace=function(space,args){var values=args[0];if(values===undefined){return this.getValues(space)}if(typeof values=="number"){values=Array.prototype.slice.call(args)}return this.setValues(space,values)};Converter.prototype.setValues=function(space,values){this.space=space;this.convs={};this.convs[space]=values;return this};Converter.prototype.getValues=function(space){var vals=this.convs[space];if(!vals){var fspace=this.space,from=this.convs[fspace];vals=convert[fspace][space](from);this.convs[space]=vals}return vals};["rgb","hsl","hsv","cmyk","keyword"].forEach(function(space){Converter.prototype[space]=function(vals){return this.routeSpace(space,arguments)}});var colorConvert=convert;var colorName={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var colorString={getRgba:getRgba,getHsla:getHsla,getRgb:getRgb,getHsl:getHsl,getHwb:getHwb,getAlpha:getAlpha,hexString:hexString,rgbString:rgbString,rgbaString:rgbaString,percentString:percentString,percentaString:percentaString,hslString:hslString,hslaString:hslaString,hwbString:hwbString,keyword:keyword};function getRgba(string){if(!string){return}var abbr=/^#([a-fA-F0-9]{3,4})$/i,hex=/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i,rgba=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,per=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,keyword=/(\w+)/;var rgb=[0,0,0],a=1,match=string.match(abbr),hexAlpha="";if(match){match=match[1];hexAlpha=match[3];for(var i=0;i<rgb.length;i++){rgb[i]=parseInt(match[i]+match[i],16)}if(hexAlpha){a=Math.round(parseInt(hexAlpha+hexAlpha,16)/255*100)/100}}else if(match=string.match(hex)){hexAlpha=match[2];match=match[1];for(var i=0;i<rgb.length;i++){rgb[i]=parseInt(match.slice(i*2,i*2+2),16)}if(hexAlpha){a=Math.round(parseInt(hexAlpha,16)/255*100)/100}}else if(match=string.match(rgba)){for(var i=0;i<rgb.length;i++){rgb[i]=parseInt(match[i+1])}a=parseFloat(match[4])}else if(match=string.match(per)){for(var i=0;i<rgb.length;i++){rgb[i]=Math.round(parseFloat(match[i+1])*2.55)}a=parseFloat(match[4])}else if(match=string.match(keyword)){if(match[1]=="transparent"){return[0,0,0,0]}rgb=colorName[match[1]];if(!rgb){return}}for(var i=0;i<rgb.length;i++){rgb[i]=scale(rgb[i],0,255)}if(!a&&a!=0){a=1}else{a=scale(a,0,1)}rgb[3]=a;return rgb}function getHsla(string){if(!string){return}var hsl=/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/;var match=string.match(hsl);if(match){var alpha=parseFloat(match[4]);var h=scale(parseInt(match[1]),0,360),s=scale(parseFloat(match[2]),0,100),l=scale(parseFloat(match[3]),0,100),a=scale(isNaN(alpha)?1:alpha,0,1);return[h,s,l,a]}}function getHwb(string){if(!string){return}var hwb=/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/;var match=string.match(hwb);if(match){var alpha=parseFloat(match[4]);var h=scale(parseInt(match[1]),0,360),w=scale(parseFloat(match[2]),0,100),b=scale(parseFloat(match[3]),0,100),a=scale(isNaN(alpha)?1:alpha,0,1);return[h,w,b,a]}}function getRgb(string){var rgba=getRgba(string);return rgba&&rgba.slice(0,3)}function getHsl(string){var hsla=getHsla(string);return hsla&&hsla.slice(0,3)}function getAlpha(string){var vals=getRgba(string);if(vals){return vals[3]}else if(vals=getHsla(string)){return vals[3]}else if(vals=getHwb(string)){return vals[3]}}function hexString(rgba,a){var a=a!==undefined&&rgba.length===3?a:rgba[3];return"#"+hexDouble(rgba[0])+hexDouble(rgba[1])+hexDouble(rgba[2])+(a>=0&&a<1?hexDouble(Math.round(a*255)):"")}function rgbString(rgba,alpha){if(alpha<1||rgba[3]&&rgba[3]<1){return rgbaString(rgba,alpha)}return"rgb("+rgba[0]+", "+rgba[1]+", "+rgba[2]+")"}function rgbaString(rgba,alpha){if(alpha===undefined){alpha=rgba[3]!==undefined?rgba[3]:1}return"rgba("+rgba[0]+", "+rgba[1]+", "+rgba[2]+", "+alpha+")"}function percentString(rgba,alpha){if(alpha<1||rgba[3]&&rgba[3]<1){return percentaString(rgba,alpha)}var r=Math.round(rgba[0]/255*100),g=Math.round(rgba[1]/255*100),b=Math.round(rgba[2]/255*100);return"rgb("+r+"%, "+g+"%, "+b+"%)"}function percentaString(rgba,alpha){var r=Math.round(rgba[0]/255*100),g=Math.round(rgba[1]/255*100),b=Math.round(rgba[2]/255*100);return"rgba("+r+"%, "+g+"%, "+b+"%, "+(alpha||rgba[3]||1)+")"}function hslString(hsla,alpha){if(alpha<1||hsla[3]&&hsla[3]<1){return hslaString(hsla,alpha)}return"hsl("+hsla[0]+", "+hsla[1]+"%, "+hsla[2]+"%)"}function hslaString(hsla,alpha){if(alpha===undefined){alpha=hsla[3]!==undefined?hsla[3]:1}return"hsla("+hsla[0]+", "+hsla[1]+"%, "+hsla[2]+"%, "+alpha+")"}function hwbString(hwb,alpha){if(alpha===undefined){alpha=hwb[3]!==undefined?hwb[3]:1}return"hwb("+hwb[0]+", "+hwb[1]+"%, "+hwb[2]+"%"+(alpha!==undefined&&alpha!==1?", "+alpha:"")+")"}function keyword(rgb){return reverseNames[rgb.slice(0,3)]}function scale(num,min,max){return Math.min(Math.max(min,num),max)}function hexDouble(num){var str=num.toString(16).toUpperCase();return str.length<2?"0"+str:str}var reverseNames={};for(var name in colorName){reverseNames[colorName[name]]=name}var Color=function(obj){if(obj instanceof Color){return obj}if(!(this instanceof Color)){return new Color(obj)}this.valid=false;this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1};var vals;if(typeof obj==="string"){vals=colorString.getRgba(obj);if(vals){this.setValues("rgb",vals)}else if(vals=colorString.getHsla(obj)){this.setValues("hsl",vals)}else if(vals=colorString.getHwb(obj)){this.setValues("hwb",vals)}}else if(typeof obj==="object"){vals=obj;if(vals.r!==undefined||vals.red!==undefined){this.setValues("rgb",vals)}else if(vals.l!==undefined||vals.lightness!==undefined){this.setValues("hsl",vals)}else if(vals.v!==undefined||vals.value!==undefined){this.setValues("hsv",vals)}else if(vals.w!==undefined||vals.whiteness!==undefined){this.setValues("hwb",vals)}else if(vals.c!==undefined||vals.cyan!==undefined){this.setValues("cmyk",vals)}}};Color.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var values=this.values;if(values.alpha!==1){return values.hwb.concat([values.alpha])}return values.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var values=this.values;return values.rgb.concat([values.alpha])},hslaArray:function(){var values=this.values;return values.hsl.concat([values.alpha])},alpha:function(val){if(val===undefined){return this.values.alpha}this.setValues("alpha",val);return this},red:function(val){return this.setChannel("rgb",0,val)},green:function(val){return this.setChannel("rgb",1,val)},blue:function(val){return this.setChannel("rgb",2,val)},hue:function(val){if(val){val%=360;val=val<0?360+val:val}return this.setChannel("hsl",0,val)},saturation:function(val){return this.setChannel("hsl",1,val)},lightness:function(val){return this.setChannel("hsl",2,val)},saturationv:function(val){return this.setChannel("hsv",1,val)},whiteness:function(val){return this.setChannel("hwb",1,val)},blackness:function(val){return this.setChannel("hwb",2,val)},value:function(val){return this.setChannel("hsv",2,val)},cyan:function(val){return this.setChannel("cmyk",0,val)},magenta:function(val){return this.setChannel("cmyk",1,val)},yellow:function(val){return this.setChannel("cmyk",2,val)},black:function(val){return this.setChannel("cmyk",3,val)},hexString:function(){return colorString.hexString(this.values.rgb)},rgbString:function(){return colorString.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return colorString.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return colorString.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return colorString.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return colorString.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return colorString.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return colorString.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var rgb=this.values.rgb;return rgb[0]<<16|rgb[1]<<8|rgb[2]},luminosity:function(){var rgb=this.values.rgb;var lum=[];for(var i=0;i<rgb.length;i++){var chan=rgb[i]/255;lum[i]=chan<=.03928?chan/12.92:Math.pow((chan+.055)/1.055,2.4)}return.2126*lum[0]+.7152*lum[1]+.0722*lum[2]},contrast:function(color2){var lum1=this.luminosity();var lum2=color2.luminosity();if(lum1>lum2){return(lum1+.05)/(lum2+.05)}return(lum2+.05)/(lum1+.05)},level:function(color2){var contrastRatio=this.contrast(color2);if(contrastRatio>=7.1){return"AAA"}return contrastRatio>=4.5?"AA":""},dark:function(){var rgb=this.values.rgb;var yiq=(rgb[0]*299+rgb[1]*587+rgb[2]*114)/1e3;return yiq<128},light:function(){return!this.dark()},negate:function(){var rgb=[];for(var i=0;i<3;i++){rgb[i]=255-this.values.rgb[i]}this.setValues("rgb",rgb);return this},lighten:function(ratio){var hsl=this.values.hsl;hsl[2]+=hsl[2]*ratio;this.setValues("hsl",hsl);return this},darken:function(ratio){var hsl=this.values.hsl;hsl[2]-=hsl[2]*ratio;this.setValues("hsl",hsl);return this},saturate:function(ratio){var hsl=this.values.hsl;hsl[1]+=hsl[1]*ratio;this.setValues("hsl",hsl);return this},desaturate:function(ratio){var hsl=this.values.hsl;hsl[1]-=hsl[1]*ratio;this.setValues("hsl",hsl);return this},whiten:function(ratio){var hwb=this.values.hwb;hwb[1]+=hwb[1]*ratio;this.setValues("hwb",hwb);return this},blacken:function(ratio){var hwb=this.values.hwb;hwb[2]+=hwb[2]*ratio;this.setValues("hwb",hwb);return this},greyscale:function(){var rgb=this.values.rgb;var val=rgb[0]*.3+rgb[1]*.59+rgb[2]*.11;this.setValues("rgb",[val,val,val]);return this},clearer:function(ratio){var alpha=this.values.alpha;this.setValues("alpha",alpha-alpha*ratio);return this},opaquer:function(ratio){var alpha=this.values.alpha;this.setValues("alpha",alpha+alpha*ratio);return this},rotate:function(degrees){var hsl=this.values.hsl;var hue=(hsl[0]+degrees)%360;hsl[0]=hue<0?360+hue:hue;this.setValues("hsl",hsl);return this},mix:function(mixinColor,weight){var color1=this;var color2=mixinColor;var p=weight===undefined?.5:weight;var w=2*p-1;var a=color1.alpha()-color2.alpha();var w1=((w*a===-1?w:(w+a)/(1+w*a))+1)/2;var w2=1-w1;return this.rgb(w1*color1.red()+w2*color2.red(),w1*color1.green()+w2*color2.green(),w1*color1.blue()+w2*color2.blue()).alpha(color1.alpha()*p+color2.alpha()*(1-p))},toJSON:function(){return this.rgb()},clone:function(){var result=new Color;var source=this.values;var target=result.values;var value,type;for(var prop in source){if(source.hasOwnProperty(prop)){value=source[prop];type={}.toString.call(value);if(type==="[object Array]"){target[prop]=value.slice(0)}else if(type==="[object Number]"){target[prop]=value}else{console.error("unexpected color value:",value)}}}return result}};Color.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]};Color.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]};Color.prototype.getValues=function(space){var values=this.values;var vals={};for(var i=0;i<space.length;i++){vals[space.charAt(i)]=values[space][i]}if(values.alpha!==1){vals.a=values.alpha}return vals};Color.prototype.setValues=function(space,vals){var values=this.values;var spaces=this.spaces;var maxes=this.maxes;var alpha=1;var i;this.valid=true;if(space==="alpha"){alpha=vals}else if(vals.length){values[space]=vals.slice(0,space.length);alpha=vals[space.length]}else if(vals[space.charAt(0)]!==undefined){for(i=0;i<space.length;i++){values[space][i]=vals[space.charAt(i)]}alpha=vals.a}else if(vals[spaces[space][0]]!==undefined){var chans=spaces[space];for(i=0;i<space.length;i++){values[space][i]=vals[chans[i]]}alpha=vals.alpha}values.alpha=Math.max(0,Math.min(1,alpha===undefined?values.alpha:alpha));if(space==="alpha"){return false}var capped;for(i=0;i<space.length;i++){capped=Math.max(0,Math.min(maxes[space][i],values[space][i]));values[space][i]=Math.round(capped)}for(var sname in spaces){if(sname!==space){values[sname]=colorConvert[space][sname](values[space])}}return true};Color.prototype.setSpace=function(space,args){var vals=args[0];if(vals===undefined){return this.getValues(space)}if(typeof vals==="number"){vals=Array.prototype.slice.call(args)}this.setValues(space,vals);return this};Color.prototype.setChannel=function(space,index,val){var svalues=this.values[space];if(val===undefined){return svalues[index]}else if(val===svalues[index]){return this}svalues[index]=val;this.setValues(space,svalues);return this};if(typeof window!=="undefined"){window.Color=Color}var chartjsColor=Color;var helpers={noop:function(){},uid:function(){var id=0;return function(){return id++}}(),isNullOrUndef:function(value){return value===null||typeof value==="undefined"},isArray:function(value){if(Array.isArray&&Array.isArray(value)){return true}var type=Object.prototype.toString.call(value);if(type.substr(0,7)==="[object"&&type.substr(-6)==="Array]"){return true}return false},isObject:function(value){return value!==null&&Object.prototype.toString.call(value)==="[object Object]"},isFinite:function(value){return(typeof value==="number"||value instanceof Number)&&isFinite(value)},valueOrDefault:function(value,defaultValue){return typeof value==="undefined"?defaultValue:value},valueAtIndexOrDefault:function(value,index,defaultValue){return helpers.valueOrDefault(helpers.isArray(value)?value[index]:value,defaultValue)},callback:function(fn,args,thisArg){if(fn&&typeof fn.call==="function"){return fn.apply(thisArg,args)}},each:function(loopable,fn,thisArg,reverse){var i,len,keys;if(helpers.isArray(loopable)){len=loopable.length;if(reverse){for(i=len-1;i>=0;i--){fn.call(thisArg,loopable[i],i)}}else{for(i=0;i<len;i++){fn.call(thisArg,loopable[i],i)}}}else if(helpers.isObject(loopable)){keys=Object.keys(loopable);len=keys.length;for(i=0;i<len;i++){fn.call(thisArg,loopable[keys[i]],keys[i])}}},arrayEquals:function(a0,a1){var i,ilen,v0,v1;if(!a0||!a1||a0.length!==a1.length){return false}for(i=0,ilen=a0.length;i<ilen;++i){v0=a0[i];v1=a1[i];if(v0 instanceof Array&&v1 instanceof Array){if(!helpers.arrayEquals(v0,v1)){return false}}else if(v0!==v1){return false}}return true},clone:function(source){if(helpers.isArray(source)){return source.map(helpers.clone)}if(helpers.isObject(source)){var target={};var keys=Object.keys(source);var klen=keys.length;var k=0;for(;k<klen;++k){target[keys[k]]=helpers.clone(source[keys[k]])}return target}return source},_merger:function(key,target,source,options){var tval=target[key];var sval=source[key];if(helpers.isObject(tval)&&helpers.isObject(sval)){helpers.merge(tval,sval,options)}else{target[key]=helpers.clone(sval)}},_mergerIf:function(key,target,source){var tval=target[key];var sval=source[key];if(helpers.isObject(tval)&&helpers.isObject(sval)){helpers.mergeIf(tval,sval)}else if(!target.hasOwnProperty(key)){target[key]=helpers.clone(sval)}},merge:function(target,source,options){var sources=helpers.isArray(source)?source:[source];var ilen=sources.length;var merge,i,keys,klen,k;if(!helpers.isObject(target)){return target}options=options||{};merge=options.merger||helpers._merger;for(i=0;i<ilen;++i){source=sources[i];if(!helpers.isObject(source)){continue}keys=Object.keys(source);for(k=0,klen=keys.length;k<klen;++k){merge(keys[k],target,source,options)}}return target},mergeIf:function(target,source){return helpers.merge(target,source,{merger:helpers._mergerIf})},extend:function(target){var setFn=function(value,key){target[key]=value};for(var i=1,ilen=arguments.length;i<ilen;++i){helpers.each(arguments[i],setFn)}return target},inherits:function(extensions){var me=this;var ChartElement=extensions&&extensions.hasOwnProperty("constructor")?extensions.constructor:function(){return me.apply(this,arguments)};var Surrogate=function(){this.constructor=ChartElement};Surrogate.prototype=me.prototype;ChartElement.prototype=new Surrogate;ChartElement.extend=helpers.inherits;if(extensions){helpers.extend(ChartElement.prototype,extensions)}ChartElement.__super__=me.prototype;return ChartElement}};var helpers_core=helpers;helpers.callCallback=helpers.callback;helpers.indexOf=function(array,item,fromIndex){return Array.prototype.indexOf.call(array,item,fromIndex)};helpers.getValueOrDefault=helpers.valueOrDefault;helpers.getValueAtIndexOrDefault=helpers.valueAtIndexOrDefault;var effects={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-t*(t-2)},easeInOutQuad:function(t){if((t/=.5)<1){return.5*t*t}return-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return(t=t-1)*t*t+1},easeInOutCubic:function(t){if((t/=.5)<1){return.5*t*t*t}return.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-((t=t-1)*t*t*t-1)},easeInOutQuart:function(t){if((t/=.5)<1){return.5*t*t*t*t}return-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return(t=t-1)*t*t*t*t+1},easeInOutQuint:function(t){if((t/=.5)<1){return.5*t*t*t*t*t}return.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-Math.cos(t*(Math.PI/2))+1},easeOutSine:function(t){return Math.sin(t*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return t===0?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return t===1?1:-Math.pow(2,-10*t)+1},easeInOutExpo:function(t){if(t===0){return 0}if(t===1){return 1}if((t/=.5)<1){return.5*Math.pow(2,10*(t-1))}return.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){if(t>=1){return t}return-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-(t=t-1)*t)},easeInOutCirc:function(t){if((t/=.5)<1){return-.5*(Math.sqrt(1-t*t)-1)}return.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var s=1.70158;var p=0;var a=1;if(t===0){return 0}if(t===1){return 1}if(!p){p=.3}if(a<1){a=1;s=p/4}else{s=p/(2*Math.PI)*Math.asin(1/a)}return-(a*Math.pow(2,10*(t-=1))*Math.sin((t-s)*(2*Math.PI)/p))},easeOutElastic:function(t){var s=1.70158;var p=0;var a=1;if(t===0){return 0}if(t===1){return 1}if(!p){p=.3}if(a<1){a=1;s=p/4}else{s=p/(2*Math.PI)*Math.asin(1/a)}return a*Math.pow(2,-10*t)*Math.sin((t-s)*(2*Math.PI)/p)+1},easeInOutElastic:function(t){var s=1.70158;var p=0;var a=1;if(t===0){return 0}if((t/=.5)===2){return 1}if(!p){p=.45}if(a<1){a=1;s=p/4}else{s=p/(2*Math.PI)*Math.asin(1/a)}if(t<1){return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t-s)*(2*Math.PI)/p))}return a*Math.pow(2,-10*(t-=1))*Math.sin((t-s)*(2*Math.PI)/p)*.5+1},easeInBack:function(t){var s=1.70158;return t*t*((s+1)*t-s)},easeOutBack:function(t){var s=1.70158;return(t=t-1)*t*((s+1)*t+s)+1},easeInOutBack:function(t){var s=1.70158;if((t/=.5)<1){return.5*(t*t*(((s*=1.525)+1)*t-s))}return.5*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)},easeInBounce:function(t){return 1-effects.easeOutBounce(1-t)},easeOutBounce:function(t){if(t<1/2.75){return 7.5625*t*t}if(t<2/2.75){return 7.5625*(t-=1.5/2.75)*t+.75}if(t<2.5/2.75){return 7.5625*(t-=2.25/2.75)*t+.9375}return 7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:function(t){if(t<.5){return effects.easeInBounce(t*2)*.5}return effects.easeOutBounce(t*2-1)*.5+.5}};var helpers_easing={effects:effects};helpers_core.easingEffects=effects;var PI=Math.PI;var RAD_PER_DEG=PI/180;var DOUBLE_PI=PI*2;var HALF_PI=PI/2;var QUARTER_PI=PI/4;var TWO_THIRDS_PI=PI*2/3;var exports$1={clear:function(chart){chart.ctx.clearRect(0,0,chart.width,chart.height)},roundedRect:function(ctx,x,y,width,height,radius){if(radius){var r=Math.min(radius,height/2,width/2);var left=x+r;var top=y+r;var right=x+width-r;var bottom=y+height-r;ctx.moveTo(x,top);if(left<right&&top<bottom){ctx.arc(left,top,r,-PI,-HALF_PI);ctx.arc(right,top,r,-HALF_PI,0);ctx.arc(right,bottom,r,0,HALF_PI);ctx.arc(left,bottom,r,HALF_PI,PI)}else if(left<right){ctx.moveTo(left,y);ctx.arc(right,top,r,-HALF_PI,HALF_PI);ctx.arc(left,top,r,HALF_PI,PI+HALF_PI)}else if(top<bottom){ctx.arc(left,top,r,-PI,0);ctx.arc(left,bottom,r,0,PI)}else{ctx.arc(left,top,r,-PI,PI)}ctx.closePath();ctx.moveTo(x,y)}else{ctx.rect(x,y,width,height)}},drawPoint:function(ctx,style,radius,x,y,rotation){var type,xOffset,yOffset,size,cornerRadius;var rad=(rotation||0)*RAD_PER_DEG;if(style&&typeof style==="object"){type=style.toString();if(type==="[object HTMLImageElement]"||type==="[object HTMLCanvasElement]"){ctx.drawImage(style,x-style.width/2,y-style.height/2,style.width,style.height);return}}if(isNaN(radius)||radius<=0){return}ctx.beginPath();switch(style){default:ctx.arc(x,y,radius,0,DOUBLE_PI);ctx.closePath();break;case"triangle":ctx.moveTo(x+Math.sin(rad)*radius,y-Math.cos(rad)*radius);rad+=TWO_THIRDS_PI;ctx.lineTo(x+Math.sin(rad)*radius,y-Math.cos(rad)*radius);rad+=TWO_THIRDS_PI;ctx.lineTo(x+Math.sin(rad)*radius,y-Math.cos(rad)*radius);ctx.closePath();break;case"rectRounded":cornerRadius=radius*.516;size=radius-cornerRadius;xOffset=Math.cos(rad+QUARTER_PI)*size;yOffset=Math.sin(rad+QUARTER_PI)*size;ctx.arc(x-xOffset,y-yOffset,cornerRadius,rad-PI,rad-HALF_PI);ctx.arc(x+yOffset,y-xOffset,cornerRadius,rad-HALF_PI,rad);ctx.arc(x+xOffset,y+yOffset,cornerRadius,rad,rad+HALF_PI);ctx.arc(x-yOffset,y+xOffset,cornerRadius,rad+HALF_PI,rad+PI);ctx.closePath();break;case"rect":if(!rotation){size=Math.SQRT1_2*radius;ctx.rect(x-size,y-size,2*size,2*size);break}rad+=QUARTER_PI;case"rectRot":xOffset=Math.cos(rad)*radius;yOffset=Math.sin(rad)*radius;ctx.moveTo(x-xOffset,y-yOffset);ctx.lineTo(x+yOffset,y-xOffset);ctx.lineTo(x+xOffset,y+yOffset);ctx.lineTo(x-yOffset,y+xOffset);ctx.closePath();break;case"crossRot":rad+=QUARTER_PI;case"cross":xOffset=Math.cos(rad)*radius;yOffset=Math.sin(rad)*radius;ctx.moveTo(x-xOffset,y-yOffset);ctx.lineTo(x+xOffset,y+yOffset);ctx.moveTo(x+yOffset,y-xOffset);ctx.lineTo(x-yOffset,y+xOffset);break;case"star":xOffset=Math.cos(rad)*radius;yOffset=Math.sin(rad)*radius;ctx.moveTo(x-xOffset,y-yOffset);ctx.lineTo(x+xOffset,y+yOffset);ctx.moveTo(x+yOffset,y-xOffset);ctx.lineTo(x-yOffset,y+xOffset);rad+=QUARTER_PI;xOffset=Math.cos(rad)*radius;yOffset=Math.sin(rad)*radius;ctx.moveTo(x-xOffset,y-yOffset);ctx.lineTo(x+xOffset,y+yOffset);ctx.moveTo(x+yOffset,y-xOffset);ctx.lineTo(x-yOffset,y+xOffset);break;case"line":xOffset=Math.cos(rad)*radius;yOffset=Math.sin(rad)*radius;ctx.moveTo(x-xOffset,y-yOffset);ctx.lineTo(x+xOffset,y+yOffset);break;case"dash":ctx.moveTo(x,y);ctx.lineTo(x+Math.cos(rad)*radius,y+Math.sin(rad)*radius);break}ctx.fill();ctx.stroke()},_isPointInArea:function(point,area){var epsilon=1e-6;return point.x>area.left-epsilon&&point.x<area.right+epsilon&&point.y>area.top-epsilon&&point.y<area.bottom+epsilon},clipArea:function(ctx,area){ctx.save();ctx.beginPath();ctx.rect(area.left,area.top,area.right-area.left,area.bottom-area.top);ctx.clip()},unclipArea:function(ctx){ctx.restore()},lineTo:function(ctx,previous,target,flip){var stepped=target.steppedLine;if(stepped){if(stepped==="middle"){var midpoint=(previous.x+target.x)/2;ctx.lineTo(midpoint,flip?target.y:previous.y);ctx.lineTo(midpoint,flip?previous.y:target.y)}else if(stepped==="after"&&!flip||stepped!=="after"&&flip){ctx.lineTo(previous.x,target.y)}else{ctx.lineTo(target.x,previous.y)}ctx.lineTo(target.x,target.y);return}if(!target.tension){ctx.lineTo(target.x,target.y);return}ctx.bezierCurveTo(flip?previous.controlPointPreviousX:previous.controlPointNextX,flip?previous.controlPointPreviousY:previous.controlPointNextY,flip?target.controlPointNextX:target.controlPointPreviousX,flip?target.controlPointNextY:target.controlPointPreviousY,target.x,target.y)}};var helpers_canvas=exports$1;helpers_core.clear=exports$1.clear;helpers_core.drawRoundedRectangle=function(ctx){ctx.beginPath();exports$1.roundedRect.apply(exports$1,arguments)};var defaults={_set:function(scope,values){return helpers_core.merge(this[scope]||(this[scope]={}),values)}};defaults._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:true});var core_defaults=defaults;var valueOrDefault=helpers_core.valueOrDefault;function toFontString(font){if(!font||helpers_core.isNullOrUndef(font.size)||helpers_core.isNullOrUndef(font.family)){return null}return(font.style?font.style+" ":"")+(font.weight?font.weight+" ":"")+font.size+"px "+font.family}var helpers_options={toLineHeight:function(value,size){var matches=(""+value).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!matches||matches[1]==="normal"){return size*1.2}value=+matches[2];switch(matches[3]){case"px":return value;case"%":value/=100;break;default:break}return size*value},toPadding:function(value){var t,r,b,l;if(helpers_core.isObject(value)){t=+value.top||0;r=+value.right||0;b=+value.bottom||0;l=+value.left||0}else{t=r=b=l=+value||0}return{top:t,right:r,bottom:b,left:l,height:t+b,width:l+r}},_parseFont:function(options){var globalDefaults=core_defaults.global;var size=valueOrDefault(options.fontSize,globalDefaults.defaultFontSize);var font={family:valueOrDefault(options.fontFamily,globalDefaults.defaultFontFamily),lineHeight:helpers_core.options.toLineHeight(valueOrDefault(options.lineHeight,globalDefaults.defaultLineHeight),size),size:size,style:valueOrDefault(options.fontStyle,globalDefaults.defaultFontStyle),weight:null,string:""};font.string=toFontString(font);return font},resolve:function(inputs,context,index){var i,ilen,value;for(i=0,ilen=inputs.length;i<ilen;++i){value=inputs[i];if(value===undefined){continue}if(context!==undefined&&typeof value==="function"){value=value(context)}if(index!==undefined&&helpers_core.isArray(value)){value=value[index]}if(value!==undefined){return value}}}};var helpers$1=helpers_core;var easing=helpers_easing;var canvas=helpers_canvas;var options=helpers_options;helpers$1.easing=easing;helpers$1.canvas=canvas;helpers$1.options=options;function interpolate(start,view,model,ease){var keys=Object.keys(model);var i,ilen,key,actual,origin,target,type,c0,c1;for(i=0,ilen=keys.length;i<ilen;++i){key=keys[i];target=model[key];if(!view.hasOwnProperty(key)){view[key]=target}actual=view[key];if(actual===target||key[0]==="_"){continue}if(!start.hasOwnProperty(key)){start[key]=actual}origin=start[key];type=typeof target;if(type===typeof origin){if(type==="string"){c0=chartjsColor(origin);if(c0.valid){c1=chartjsColor(target);if(c1.valid){view[key]=c1.mix(c0,ease).rgbString();continue}}}else if(helpers$1.isFinite(origin)&&helpers$1.isFinite(target)){view[key]=origin+(target-origin)*ease;continue}}view[key]=target}}var Element=function(configuration){helpers$1.extend(this,configuration);this.initialize.apply(this,arguments)};helpers$1.extend(Element.prototype,{initialize:function(){this.hidden=false},pivot:function(){var me=this;if(!me._view){me._view=helpers$1.clone(me._model)}me._start={};return me},transition:function(ease){var me=this;var model=me._model;var start=me._start;var view=me._view;if(!model||ease===1){me._view=model;me._start=null;return me}if(!view){view=me._view={}}if(!start){start=me._start={}}interpolate(start,view,model,ease);return me},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return helpers$1.isNumber(this._model.x)&&helpers$1.isNumber(this._model.y)}});Element.extend=helpers$1.inherits;var core_element=Element;var exports$2=core_element.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null});var core_animation=exports$2;Object.defineProperty(exports$2.prototype,"animationObject",{get:function(){return this}});Object.defineProperty(exports$2.prototype,"chartInstance",{get:function(){return this.chart},set:function(value){this.chart=value}});core_defaults._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:helpers$1.noop,onComplete:helpers$1.noop}});var core_animations={animations:[],request:null,addAnimation:function(chart,animation,duration,lazy){var animations=this.animations;var i,ilen;animation.chart=chart;animation.startTime=Date.now();animation.duration=duration;if(!lazy){chart.animating=true}for(i=0,ilen=animations.length;i<ilen;++i){if(animations[i].chart===chart){animations[i]=animation;return}}animations.push(animation);if(animations.length===1){this.requestAnimationFrame()}},cancelAnimation:function(chart){var index=helpers$1.findIndex(this.animations,function(animation){return animation.chart===chart});if(index!==-1){this.animations.splice(index,1);chart.animating=false}},requestAnimationFrame:function(){var me=this;if(me.request===null){me.request=helpers$1.requestAnimFrame.call(window,function(){me.request=null;me.startDigest()})}},startDigest:function(){var me=this;me.advance();if(me.animations.length>0){me.requestAnimationFrame()}},advance:function(){var animations=this.animations;var animation,chart,numSteps,nextStep;var i=0;while(i<animations.length){animation=animations[i];chart=animation.chart;numSteps=animation.numSteps;nextStep=Math.floor((Date.now()-animation.startTime)/animation.duration*numSteps)+1;animation.currentStep=Math.min(nextStep,numSteps);helpers$1.callback(animation.render,[chart,animation],chart);helpers$1.callback(animation.onAnimationProgress,[animation],chart);if(animation.currentStep>=numSteps){helpers$1.callback(animation.onAnimationComplete,[animation],chart);chart.animating=false;animations.splice(i,1)}else{++i}}}};var resolve=helpers$1.options.resolve;var arrayEvents=["push","pop","shift","splice","unshift"];function listenArrayEvents(array,listener){if(array._chartjs){array._chartjs.listeners.push(listener);return}Object.defineProperty(array,"_chartjs",{configurable:true,enumerable:false,value:{listeners:[listener]}});arrayEvents.forEach(function(key){var method="onData"+key.charAt(0).toUpperCase()+key.slice(1);var base=array[key];Object.defineProperty(array,key,{configurable:true,enumerable:false,value:function(){var args=Array.prototype.slice.call(arguments);var res=base.apply(this,args);helpers$1.each(array._chartjs.listeners,function(object){if(typeof object[method]==="function"){object[method].apply(object,args)}});return res}})})}function unlistenArrayEvents(array,listener){var stub=array._chartjs;if(!stub){return}var listeners=stub.listeners;var index=listeners.indexOf(listener);if(index!==-1){listeners.splice(index,1)}if(listeners.length>0){return}arrayEvents.forEach(function(key){delete array[key]});delete array._chartjs}var DatasetController=function(chart,datasetIndex){this.initialize(chart,datasetIndex)};helpers$1.extend(DatasetController.prototype,{datasetElementType:null,dataElementType:null,initialize:function(chart,datasetIndex){var me=this;me.chart=chart;me.index=datasetIndex;me.linkScales();me.addElements()},updateIndex:function(datasetIndex){this.index=datasetIndex},linkScales:function(){var me=this;var meta=me.getMeta();var dataset=me.getDataset();if(meta.xAxisID===null||!(meta.xAxisID in me.chart.scales)){meta.xAxisID=dataset.xAxisID||me.chart.options.scales.xAxes[0].id}if(meta.yAxisID===null||!(meta.yAxisID in me.chart.scales)){meta.yAxisID=dataset.yAxisID||me.chart.options.scales.yAxes[0].id}},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(scaleID){return this.chart.scales[scaleID]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this.update(true)},destroy:function(){if(this._data){unlistenArrayEvents(this._data,this)}},createMetaDataset:function(){var me=this;var type=me.datasetElementType;return type&&new type({_chart:me.chart,_datasetIndex:me.index})},createMetaData:function(index){var me=this;var type=me.dataElementType;return type&&new type({_chart:me.chart,_datasetIndex:me.index,_index:index})},addElements:function(){var me=this;var meta=me.getMeta();var data=me.getDataset().data||[];var metaData=meta.data;var i,ilen;for(i=0,ilen=data.length;i<ilen;++i){metaData[i]=metaData[i]||me.createMetaData(i)}meta.dataset=meta.dataset||me.createMetaDataset()},addElementAndReset:function(index){var element=this.createMetaData(index);this.getMeta().data.splice(index,0,element);this.updateElement(element,index,true)},buildOrUpdateElements:function(){var me=this;var dataset=me.getDataset();var data=dataset.data||(dataset.data=[]);if(me._data!==data){if(me._data){unlistenArrayEvents(me._data,me)}if(data&&Object.isExtensible(data)){listenArrayEvents(data,me)}me._data=data}me.resyncElements()},update:helpers$1.noop,transition:function(easingValue){var meta=this.getMeta();var elements=meta.data||[];var ilen=elements.length;var i=0;for(;i<ilen;++i){elements[i].transition(easingValue)}if(meta.dataset){meta.dataset.transition(easingValue)}},draw:function(){var meta=this.getMeta();var elements=meta.data||[];var ilen=elements.length;var i=0;if(meta.dataset){meta.dataset.draw()}for(;i<ilen;++i){elements[i].draw()}},removeHoverStyle:function(element){helpers$1.merge(element._model,element.$previousStyle||{});delete element.$previousStyle},setHoverStyle:function(element){var dataset=this.chart.data.datasets[element._datasetIndex];var index=element._index;var custom=element.custom||{};var model=element._model;var getHoverColor=helpers$1.getHoverColor;element.$previousStyle={backgroundColor:model.backgroundColor,borderColor:model.borderColor,borderWidth:model.borderWidth};model.backgroundColor=resolve([custom.hoverBackgroundColor,dataset.hoverBackgroundColor,getHoverColor(model.backgroundColor)],undefined,index);model.borderColor=resolve([custom.hoverBorderColor,dataset.hoverBorderColor,getHoverColor(model.borderColor)],undefined,index);model.borderWidth=resolve([custom.hoverBorderWidth,dataset.hoverBorderWidth,model.borderWidth],undefined,index)},resyncElements:function(){var me=this;var meta=me.getMeta();var data=me.getDataset().data;var numMeta=meta.data.length;var numData=data.length;if(numData<numMeta){meta.data.splice(numData,numMeta-numData)}else if(numData>numMeta){me.insertElements(numMeta,numData-numMeta)}},insertElements:function(start,count){for(var i=0;i<count;++i){this.addElementAndReset(start+i)}},onDataPush:function(){var count=arguments.length;this.insertElements(this.getDataset().data.length-count,count)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(start,count){this.getMeta().data.splice(start,count);this.insertElements(start,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}});DatasetController.extend=helpers$1.inherits;var core_datasetController=DatasetController;core_defaults._set("global",{elements:{arc:{backgroundColor:core_defaults.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});var element_arc=core_element.extend({inLabelRange:function(mouseX){var vm=this._view;if(vm){return Math.pow(mouseX-vm.x,2)<Math.pow(vm.radius+vm.hoverRadius,2)}return false},inRange:function(chartX,chartY){var vm=this._view;if(vm){var pointRelativePosition=helpers$1.getAngleFromPoint(vm,{x:chartX,y:chartY});var angle=pointRelativePosition.angle;var distance=pointRelativePosition.distance;var startAngle=vm.startAngle;var endAngle=vm.endAngle;while(endAngle<startAngle){endAngle+=2*Math.PI}while(angle>endAngle){angle-=2*Math.PI}while(angle<startAngle){angle+=2*Math.PI}var betweenAngles=angle>=startAngle&&angle<=endAngle;var withinRadius=distance>=vm.innerRadius&&distance<=vm.outerRadius;return betweenAngles&&withinRadius}return false},getCenterPoint:function(){var vm=this._view;var halfAngle=(vm.startAngle+vm.endAngle)/2;var halfRadius=(vm.innerRadius+vm.outerRadius)/2;return{x:vm.x+Math.cos(halfAngle)*halfRadius,y:vm.y+Math.sin(halfAngle)*halfRadius}},getArea:function(){var vm=this._view;return Math.PI*((vm.endAngle-vm.startAngle)/(2*Math.PI))*(Math.pow(vm.outerRadius,2)-Math.pow(vm.innerRadius,2))},tooltipPosition:function(){var vm=this._view;var centreAngle=vm.startAngle+(vm.endAngle-vm.startAngle)/2;var rangeFromCentre=(vm.outerRadius-vm.innerRadius)/2+vm.innerRadius;return{x:vm.x+Math.cos(centreAngle)*rangeFromCentre,y:vm.y+Math.sin(centreAngle)*rangeFromCentre}},draw:function(){var ctx=this._chart.ctx;var vm=this._view;var sA=vm.startAngle;var eA=vm.endAngle;var pixelMargin=vm.borderAlign==="inner"?.33:0;var angleMargin;ctx.save();ctx.beginPath();ctx.arc(vm.x,vm.y,Math.max(vm.outerRadius-pixelMargin,0),sA,eA);ctx.arc(vm.x,vm.y,vm.innerRadius,eA,sA,true);ctx.closePath();ctx.fillStyle=vm.backgroundColor;ctx.fill();if(vm.borderWidth){if(vm.borderAlign==="inner"){ctx.beginPath();angleMargin=pixelMargin/vm.outerRadius;ctx.arc(vm.x,vm.y,vm.outerRadius,sA-angleMargin,eA+angleMargin);if(vm.innerRadius>pixelMargin){angleMargin=pixelMargin/vm.innerRadius;ctx.arc(vm.x,vm.y,vm.innerRadius-pixelMargin,eA+angleMargin,sA-angleMargin,true)}else{ctx.arc(vm.x,vm.y,pixelMargin,eA+Math.PI/2,sA-Math.PI/2)}ctx.closePath();ctx.clip();ctx.beginPath();ctx.arc(vm.x,vm.y,vm.outerRadius,sA,eA);ctx.arc(vm.x,vm.y,vm.innerRadius,eA,sA,true);ctx.closePath();ctx.lineWidth=vm.borderWidth*2;ctx.lineJoin="round"}else{ctx.lineWidth=vm.borderWidth;ctx.lineJoin="bevel"}ctx.strokeStyle=vm.borderColor;ctx.stroke()}ctx.restore()}});var valueOrDefault$1=helpers$1.valueOrDefault;var defaultColor=core_defaults.global.defaultColor;core_defaults._set("global",{elements:{line:{tension:.4,backgroundColor:defaultColor,borderWidth:3,borderColor:defaultColor,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:true,fill:true}}});var element_line=core_element.extend({draw:function(){var me=this;var vm=me._view;var ctx=me._chart.ctx;var spanGaps=vm.spanGaps;var points=me._children.slice();var globalDefaults=core_defaults.global;var globalOptionLineElements=globalDefaults.elements.line;var lastDrawnIndex=-1;var index,current,previous,currentVM;if(me._loop&&points.length){points.push(points[0])}ctx.save();ctx.lineCap=vm.borderCapStyle||globalOptionLineElements.borderCapStyle;if(ctx.setLineDash){ctx.setLineDash(vm.borderDash||globalOptionLineElements.borderDash)}ctx.lineDashOffset=valueOrDefault$1(vm.borderDashOffset,globalOptionLineElements.borderDashOffset);ctx.lineJoin=vm.borderJoinStyle||globalOptionLineElements.borderJoinStyle;ctx.lineWidth=valueOrDefault$1(vm.borderWidth,globalOptionLineElements.borderWidth);ctx.strokeStyle=vm.borderColor||globalDefaults.defaultColor;ctx.beginPath();lastDrawnIndex=-1;for(index=0;index<points.length;++index){current=points[index];previous=helpers$1.previousItem(points,index);currentVM=current._view;if(index===0){if(!currentVM.skip){ctx.moveTo(currentVM.x,currentVM.y);lastDrawnIndex=index}}else{previous=lastDrawnIndex===-1?previous:points[lastDrawnIndex];if(!currentVM.skip){if(lastDrawnIndex!==index-1&&!spanGaps||lastDrawnIndex===-1){ctx.moveTo(currentVM.x,currentVM.y)}else{helpers$1.canvas.lineTo(ctx,previous._view,current._view)}lastDrawnIndex=index}}}ctx.stroke();ctx.restore()}});var valueOrDefault$2=helpers$1.valueOrDefault;var defaultColor$1=core_defaults.global.defaultColor;core_defaults._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:defaultColor$1,borderColor:defaultColor$1,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});function xRange(mouseX){var vm=this._view;return vm?Math.abs(mouseX-vm.x)<vm.radius+vm.hitRadius:false}function yRange(mouseY){var vm=this._view;return vm?Math.abs(mouseY-vm.y)<vm.radius+vm.hitRadius:false}var element_point=core_element.extend({inRange:function(mouseX,mouseY){var vm=this._view;return vm?Math.pow(mouseX-vm.x,2)+Math.pow(mouseY-vm.y,2)<Math.pow(vm.hitRadius+vm.radius,2):false},inLabelRange:xRange,inXRange:xRange,inYRange:yRange,getCenterPoint:function(){var vm=this._view;return{x:vm.x,y:vm.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var vm=this._view;return{x:vm.x,y:vm.y,padding:vm.radius+vm.borderWidth}},draw:function(chartArea){var vm=this._view;var ctx=this._chart.ctx;var pointStyle=vm.pointStyle;var rotation=vm.rotation;var radius=vm.radius;var x=vm.x;var y=vm.y;var globalDefaults=core_defaults.global;var defaultColor=globalDefaults.defaultColor;if(vm.skip){return}if(chartArea===undefined||helpers$1.canvas._isPointInArea(vm,chartArea)){ctx.strokeStyle=vm.borderColor||defaultColor;ctx.lineWidth=valueOrDefault$2(vm.borderWidth,globalDefaults.elements.point.borderWidth);ctx.fillStyle=vm.backgroundColor||defaultColor;helpers$1.canvas.drawPoint(ctx,pointStyle,radius,x,y,rotation)}}});var defaultColor$2=core_defaults.global.defaultColor;core_defaults._set("global",{elements:{rectangle:{backgroundColor:defaultColor$2,borderColor:defaultColor$2,borderSkipped:"bottom",borderWidth:0}}});function isVertical(vm){return vm&&vm.width!==undefined}function getBarBounds(vm){var x1,x2,y1,y2,half;if(isVertical(vm)){half=vm.width/2;x1=vm.x-half;x2=vm.x+half;y1=Math.min(vm.y,vm.base);y2=Math.max(vm.y,vm.base)}else{half=vm.height/2;x1=Math.min(vm.x,vm.base);x2=Math.max(vm.x,vm.base);y1=vm.y-half;y2=vm.y+half}return{left:x1,top:y1,right:x2,bottom:y2}}function swap(orig,v1,v2){return orig===v1?v2:orig===v2?v1:orig}function parseBorderSkipped(vm){var edge=vm.borderSkipped;var res={};if(!edge){return res}if(vm.horizontal){if(vm.base>vm.x){edge=swap(edge,"left","right")}}else if(vm.base<vm.y){edge=swap(edge,"bottom","top")}res[edge]=true;return res}function parseBorderWidth(vm,maxW,maxH){var value=vm.borderWidth;var skip=parseBorderSkipped(vm);var t,r,b,l;if(helpers$1.isObject(value)){t=+value.top||0;r=+value.right||0;b=+value.bottom||0;l=+value.left||0}else{t=r=b=l=+value||0}return{t:skip.top||t<0?0:t>maxH?maxH:t,r:skip.right||r<0?0:r>maxW?maxW:r,b:skip.bottom||b<0?0:b>maxH?maxH:b,l:skip.left||l<0?0:l>maxW?maxW:l}}function boundingRects(vm){var bounds=getBarBounds(vm);var width=bounds.right-bounds.left;var height=bounds.bottom-bounds.top;var border=parseBorderWidth(vm,width/2,height/2);return{outer:{x:bounds.left,y:bounds.top,w:width,h:height},inner:{x:bounds.left+border.l,y:bounds.top+border.t,w:width-border.l-border.r,h:height-border.t-border.b}}}function inRange(vm,x,y){var skipX=x===null;var skipY=y===null;var bounds=!vm||skipX&&skipY?false:getBarBounds(vm);return bounds&&(skipX||x>=bounds.left&&x<=bounds.right)&&(skipY||y>=bounds.top&&y<=bounds.bottom)}var element_rectangle=core_element.extend({draw:function(){var ctx=this._chart.ctx;var vm=this._view;var rects=boundingRects(vm);var outer=rects.outer;var inner=rects.inner;ctx.fillStyle=vm.backgroundColor;ctx.fillRect(outer.x,outer.y,outer.w,outer.h);if(outer.w===inner.w&&outer.h===inner.h){return}ctx.save();ctx.beginPath();ctx.rect(outer.x,outer.y,outer.w,outer.h);ctx.clip();ctx.fillStyle=vm.borderColor;ctx.rect(inner.x,inner.y,inner.w,inner.h);ctx.fill("evenodd");ctx.restore()},height:function(){var vm=this._view;return vm.base-vm.y},inRange:function(mouseX,mouseY){return inRange(this._view,mouseX,mouseY)},inLabelRange:function(mouseX,mouseY){var vm=this._view;return isVertical(vm)?inRange(vm,mouseX,null):inRange(vm,null,mouseY)},inXRange:function(mouseX){return inRange(this._view,mouseX,null)},inYRange:function(mouseY){return inRange(this._view,null,mouseY)},getCenterPoint:function(){var vm=this._view;var x,y;if(isVertical(vm)){x=vm.x;y=(vm.y+vm.base)/2}else{x=(vm.x+vm.base)/2;y=vm.y}return{x:x,y:y}},getArea:function(){var vm=this._view;return isVertical(vm)?vm.width*Math.abs(vm.y-vm.base):vm.height*Math.abs(vm.x-vm.base)},tooltipPosition:function(){var vm=this._view;return{x:vm.x,y:vm.y}}});var elements={};var Arc=element_arc;var Line=element_line;var Point=element_point;var Rectangle=element_rectangle;elements.Arc=Arc;elements.Line=Line;elements.Point=Point;elements.Rectangle=Rectangle;var resolve$1=helpers$1.options.resolve;core_defaults._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",categoryPercentage:.8,barPercentage:.9,offset:true,gridLines:{offsetGridLines:true}}],yAxes:[{type:"linear"}]}});function computeMinSampleSize(scale,pixels){var min=scale.isHorizontal()?scale.width:scale.height;var ticks=scale.getTicks();var prev,curr,i,ilen;for(i=1,ilen=pixels.length;i<ilen;++i){min=Math.min(min,Math.abs(pixels[i]-pixels[i-1]))}for(i=0,ilen=ticks.length;i<ilen;++i){curr=scale.getPixelForTick(i);min=i>0?Math.min(min,curr-prev):min;prev=curr}return min}function computeFitCategoryTraits(index,ruler,options){var thickness=options.barThickness;var count=ruler.stackCount;var curr=ruler.pixels[index];var size,ratio;if(helpers$1.isNullOrUndef(thickness)){size=ruler.min*options.categoryPercentage;ratio=options.barPercentage}else{size=thickness*count;ratio=1}return{chunk:size/count,ratio:ratio,start:curr-size/2}}function computeFlexCategoryTraits(index,ruler,options){var pixels=ruler.pixels;var curr=pixels[index];var prev=index>0?pixels[index-1]:null;var next=index<pixels.length-1?pixels[index+1]:null;var percent=options.categoryPercentage;var start,size;if(prev===null){prev=curr-(next===null?ruler.end-ruler.start:next-curr)}if(next===null){next=curr+curr-prev}start=curr-(curr-Math.min(prev,next))/2*percent;size=Math.abs(next-prev)/2*percent;return{chunk:size/ruler.stackCount,ratio:options.barPercentage,start:start}}var controller_bar=core_datasetController.extend({dataElementType:elements.Rectangle,initialize:function(){var me=this;var meta;core_datasetController.prototype.initialize.apply(me,arguments);meta=me.getMeta();meta.stack=me.getDataset().stack;meta.bar=true},update:function(reset){var me=this;var rects=me.getMeta().data;var i,ilen;me._ruler=me.getRuler();for(i=0,ilen=rects.length;i<ilen;++i){me.updateElement(rects[i],i,reset)}},updateElement:function(rectangle,index,reset){var me=this;var meta=me.getMeta();var dataset=me.getDataset();var options=me._resolveElementOptions(rectangle,index);rectangle._xScale=me.getScaleForId(meta.xAxisID);rectangle._yScale=me.getScaleForId(meta.yAxisID);rectangle._datasetIndex=me.index;rectangle._index=index;rectangle._model={backgroundColor:options.backgroundColor,borderColor:options.borderColor,borderSkipped:options.borderSkipped,borderWidth:options.borderWidth,datasetLabel:dataset.label,label:me.chart.data.labels[index]};me._updateElementGeometry(rectangle,index,reset);rectangle.pivot()},_updateElementGeometry:function(rectangle,index,reset){var me=this;var model=rectangle._model;var vscale=me._getValueScale();var base=vscale.getBasePixel();var horizontal=vscale.isHorizontal();var ruler=me._ruler||me.getRuler();var vpixels=me.calculateBarValuePixels(me.index,index);var ipixels=me.calculateBarIndexPixels(me.index,index,ruler);model.horizontal=horizontal;model.base=reset?base:vpixels.base;model.x=horizontal?reset?base:vpixels.head:ipixels.center;model.y=horizontal?ipixels.center:reset?base:vpixels.head;model.height=horizontal?ipixels.size:undefined;model.width=horizontal?undefined:ipixels.size},_getStacks:function(last){var me=this;var chart=me.chart;var scale=me._getIndexScale();var stacked=scale.options.stacked;var ilen=last===undefined?chart.data.datasets.length:last+1;var stacks=[];var i,meta;for(i=0;i<ilen;++i){meta=chart.getDatasetMeta(i);if(meta.bar&&chart.isDatasetVisible(i)&&(stacked===false||stacked===true&&stacks.indexOf(meta.stack)===-1||stacked===undefined&&(meta.stack===undefined||stacks.indexOf(meta.stack)===-1))){stacks.push(meta.stack)}}return stacks},getStackCount:function(){return this._getStacks().length},getStackIndex:function(datasetIndex,name){var stacks=this._getStacks(datasetIndex);var index=name!==undefined?stacks.indexOf(name):-1;return index===-1?stacks.length-1:index},getRuler:function(){var me=this;var scale=me._getIndexScale();var stackCount=me.getStackCount();var datasetIndex=me.index;var isHorizontal=scale.isHorizontal();var start=isHorizontal?scale.left:scale.top;var end=start+(isHorizontal?scale.width:scale.height);var pixels=[];var i,ilen,min;for(i=0,ilen=me.getMeta().data.length;i<ilen;++i){pixels.push(scale.getPixelForValue(null,i,datasetIndex))}min=helpers$1.isNullOrUndef(scale.options.barThickness)?computeMinSampleSize(scale,pixels):-1;return{min:min,pixels:pixels,start:start,end:end,stackCount:stackCount,scale:scale}},calculateBarValuePixels:function(datasetIndex,index){var me=this;var chart=me.chart;var meta=me.getMeta();var scale=me._getValueScale();var isHorizontal=scale.isHorizontal();var datasets=chart.data.datasets;var value=+scale.getRightValue(datasets[datasetIndex].data[index]);var minBarLength=scale.options.minBarLength;var stacked=scale.options.stacked;var stack=meta.stack;var start=0;var i,imeta,ivalue,base,head,size;if(stacked||stacked===undefined&&stack!==undefined){for(i=0;i<datasetIndex;++i){imeta=chart.getDatasetMeta(i);if(imeta.bar&&imeta.stack===stack&&imeta.controller._getValueScaleId()===scale.id&&chart.isDatasetVisible(i)){ivalue=+scale.getRightValue(datasets[i].data[index]);if(value<0&&ivalue<0||value>=0&&ivalue>0){start+=ivalue}}}}base=scale.getPixelForValue(start);head=scale.getPixelForValue(start+value);size=head-base;if(minBarLength!==undefined&&Math.abs(size)<minBarLength){size=minBarLength;if(value>=0&&!isHorizontal||value<0&&isHorizontal){head=base-minBarLength}else{head=base+minBarLength}}return{size:size,base:base,head:head,center:head+size/2}},calculateBarIndexPixels:function(datasetIndex,index,ruler){var me=this;var options=ruler.scale.options;var range=options.barThickness==="flex"?computeFlexCategoryTraits(index,ruler,options):computeFitCategoryTraits(index,ruler,options);var stackIndex=me.getStackIndex(datasetIndex,me.getMeta().stack);var center=range.start+range.chunk*stackIndex+range.chunk/2;var size=Math.min(helpers$1.valueOrDefault(options.maxBarThickness,Infinity),range.chunk*range.ratio);return{base:center-size/2,head:center+size/2,center:center,size:size}},draw:function(){var me=this;var chart=me.chart;var scale=me._getValueScale();var rects=me.getMeta().data;var dataset=me.getDataset();var ilen=rects.length;var i=0;helpers$1.canvas.clipArea(chart.ctx,chart.chartArea);for(;i<ilen;++i){if(!isNaN(scale.getRightValue(dataset.data[i]))){rects[i].draw()}}helpers$1.canvas.unclipArea(chart.ctx)},_resolveElementOptions:function(rectangle,index){var me=this;var chart=me.chart;var datasets=chart.data.datasets;var dataset=datasets[me.index];var custom=rectangle.custom||{};var options=chart.options.elements.rectangle;var values={};var i,ilen,key;var context={chart:chart,dataIndex:index,dataset:dataset,datasetIndex:me.index};var keys=["backgroundColor","borderColor","borderSkipped","borderWidth"];for(i=0,ilen=keys.length;i<ilen;++i){key=keys[i];values[key]=resolve$1([custom[key],dataset[key],options[key]],context,index)}return values}});var valueOrDefault$3=helpers$1.valueOrDefault;var resolve$2=helpers$1.options.resolve;core_defaults._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(item,data){var datasetLabel=data.datasets[item.datasetIndex].label||"";var dataPoint=data.datasets[item.datasetIndex].data[item.index];return datasetLabel+": ("+item.xLabel+", "+item.yLabel+", "+dataPoint.r+")"}}}});var controller_bubble=core_datasetController.extend({dataElementType:elements.Point,update:function(reset){var me=this;var meta=me.getMeta();var points=meta.data;helpers$1.each(points,function(point,index){me.updateElement(point,index,reset)})},updateElement:function(point,index,reset){var me=this;var meta=me.getMeta();var custom=point.custom||{};var xScale=me.getScaleForId(meta.xAxisID);var yScale=me.getScaleForId(meta.yAxisID);var options=me._resolveElementOptions(point,index);var data=me.getDataset().data[index];var dsIndex=me.index;var x=reset?xScale.getPixelForDecimal(.5):xScale.getPixelForValue(typeof data==="object"?data:NaN,index,dsIndex);var y=reset?yScale.getBasePixel():yScale.getPixelForValue(data,index,dsIndex);point._xScale=xScale;point._yScale=yScale;point._options=options;point._datasetIndex=dsIndex;point._index=index;point._model={backgroundColor:options.backgroundColor,borderColor:options.borderColor,borderWidth:options.borderWidth,hitRadius:options.hitRadius,pointStyle:options.pointStyle,rotation:options.rotation,radius:reset?0:options.radius,skip:custom.skip||isNaN(x)||isNaN(y),x:x,y:y};point.pivot()},setHoverStyle:function(point){var model=point._model;var options=point._options;var getHoverColor=helpers$1.getHoverColor;point.$previousStyle={backgroundColor:model.backgroundColor,borderColor:model.borderColor,borderWidth:model.borderWidth,radius:model.radius};model.backgroundColor=valueOrDefault$3(options.hoverBackgroundColor,getHoverColor(options.backgroundColor));model.borderColor=valueOrDefault$3(options.hoverBorderColor,getHoverColor(options.borderColor));model.borderWidth=valueOrDefault$3(options.hoverBorderWidth,options.borderWidth);model.radius=options.radius+options.hoverRadius},_resolveElementOptions:function(point,index){var me=this;var chart=me.chart;var datasets=chart.data.datasets;var dataset=datasets[me.index];var custom=point.custom||{};var options=chart.options.elements.point;var data=dataset.data[index];var values={};var i,ilen,key;var context={chart:chart,dataIndex:index,dataset:dataset,datasetIndex:me.index};var keys=["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"];for(i=0,ilen=keys.length;i<ilen;++i){key=keys[i];values[key]=resolve$2([custom[key],dataset[key],options[key]],context,index)}values.radius=resolve$2([custom.radius,data?data.r:undefined,dataset.radius,options.radius],context,index);return values}});var resolve$3=helpers$1.options.resolve;var valueOrDefault$4=helpers$1.valueOrDefault;core_defaults._set("doughnut",{animation:{animateRotate:true,animateScale:false},hover:{mode:"single"},legendCallback:function(chart){var text=[];text.push('<ul class="'+chart.id+'-legend">');var data=chart.data;var datasets=data.datasets;var labels=data.labels;if(datasets.length){for(var i=0;i<datasets[0].data.length;++i){text.push('<li><span style="background-color:'+datasets[0].backgroundColor[i]+'"></span>');if(labels[i]){text.push(labels[i])}text.push("</li>")}}text.push("</ul>");return text.join("")},legend:{labels:{generateLabels:function(chart){var data=chart.data;if(data.labels.length&&data.datasets.length){return data.labels.map(function(label,i){var meta=chart.getDatasetMeta(0);var ds=data.datasets[0];var arc=meta.data[i];var custom=arc&&arc.custom||{};var arcOpts=chart.options.elements.arc;var fill=resolve$3([custom.backgroundColor,ds.backgroundColor,arcOpts.backgroundColor],undefined,i);var stroke=resolve$3([custom.borderColor,ds.borderColor,arcOpts.borderColor],undefined,i);var bw=resolve$3([custom.borderWidth,ds.borderWidth,arcOpts.borderWidth],undefined,i);return{text:label,fillStyle:fill,strokeStyle:stroke,lineWidth:bw,hidden:isNaN(ds.data[i])||meta.data[i].hidden,index:i}})}return[]}},onClick:function(e,legendItem){var index=legendItem.index;var chart=this.chart;var i,ilen,meta;for(i=0,ilen=(chart.data.datasets||[]).length;i<ilen;++i){meta=chart.getDatasetMeta(i);if(meta.data[index]){meta.data[index].hidden=!meta.data[index].hidden}}chart.update()}},cutoutPercentage:50,rotation:Math.PI*-.5,circumference:Math.PI*2,tooltips:{callbacks:{title:function(){return""},label:function(tooltipItem,data){var dataLabel=data.labels[tooltipItem.index];var value=": "+data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];if(helpers$1.isArray(dataLabel)){dataLabel=dataLabel.slice();dataLabel[0]+=value}else{dataLabel+=value}return dataLabel}}}});var controller_doughnut=core_datasetController.extend({dataElementType:elements.Arc,linkScales:helpers$1.noop,getRingIndex:function(datasetIndex){var ringIndex=0;for(var j=0;j<datasetIndex;++j){if(this.chart.isDatasetVisible(j)){++ringIndex}}return ringIndex},update:function(reset){var me=this;var chart=me.chart;var chartArea=chart.chartArea;var opts=chart.options;var availableWidth=chartArea.right-chartArea.left;var availableHeight=chartArea.bottom-chartArea.top;var minSize=Math.min(availableWidth,availableHeight);var offset={x:0,y:0};var meta=me.getMeta();var arcs=meta.data;var cutoutPercentage=opts.cutoutPercentage;var circumference=opts.circumference;var chartWeight=me._getRingWeight(me.index);var i,ilen;if(circumference<Math.PI*2){var startAngle=opts.rotation%(Math.PI*2);startAngle+=Math.PI*2*(startAngle>=Math.PI?-1:startAngle<-Math.PI?1:0);var endAngle=startAngle+circumference;var start={x:Math.cos(startAngle),y:Math.sin(startAngle)};var end={x:Math.cos(endAngle),y:Math.sin(endAngle)};var contains0=startAngle<=0&&endAngle>=0||startAngle<=Math.PI*2&&Math.PI*2<=endAngle;var contains90=startAngle<=Math.PI*.5&&Math.PI*.5<=endAngle||startAngle<=Math.PI*2.5&&Math.PI*2.5<=endAngle;var contains180=startAngle<=-Math.PI&&-Math.PI<=endAngle||startAngle<=Math.PI&&Math.PI<=endAngle;var contains270=startAngle<=-Math.PI*.5&&-Math.PI*.5<=endAngle||startAngle<=Math.PI*1.5&&Math.PI*1.5<=endAngle;var cutout=cutoutPercentage/100;var min={x:contains180?-1:Math.min(start.x*(start.x<0?1:cutout),end.x*(end.x<0?1:cutout)),y:contains270?-1:Math.min(start.y*(start.y<0?1:cutout),end.y*(end.y<0?1:cutout))};var max={x:contains0?1:Math.max(start.x*(start.x>0?1:cutout),end.x*(end.x>0?1:cutout)),y:contains90?1:Math.max(start.y*(start.y>0?1:cutout),end.y*(end.y>0?1:cutout))};var size={width:(max.x-min.x)*.5,height:(max.y-min.y)*.5};minSize=Math.min(availableWidth/size.width,availableHeight/size.height);offset={x:(max.x+min.x)*-.5,y:(max.y+min.y)*-.5}}for(i=0,ilen=arcs.length;i<ilen;++i){arcs[i]._options=me._resolveElementOptions(arcs[i],i)}chart.borderWidth=me.getMaxBorderWidth();chart.outerRadius=Math.max((minSize-chart.borderWidth)/2,0);chart.innerRadius=Math.max(cutoutPercentage?chart.outerRadius/100*cutoutPercentage:0,0);chart.radiusLength=(chart.outerRadius-chart.innerRadius)/(me._getVisibleDatasetWeightTotal()||1);chart.offsetX=offset.x*chart.outerRadius;chart.offsetY=offset.y*chart.outerRadius;meta.total=me.calculateTotal();me.outerRadius=chart.outerRadius-chart.radiusLength*me._getRingWeightOffset(me.index);me.innerRadius=Math.max(me.outerRadius-chart.radiusLength*chartWeight,0);for(i=0,ilen=arcs.length;i<ilen;++i){me.updateElement(arcs[i],i,reset)}},updateElement:function(arc,index,reset){var me=this;var chart=me.chart;var chartArea=chart.chartArea;var opts=chart.options;var animationOpts=opts.animation;var centerX=(chartArea.left+chartArea.right)/2;var centerY=(chartArea.top+chartArea.bottom)/2;var startAngle=opts.rotation;var endAngle=opts.rotation;var dataset=me.getDataset();var circumference=reset&&animationOpts.animateRotate?0:arc.hidden?0:me.calculateCircumference(dataset.data[index])*(opts.circumference/(2*Math.PI));var innerRadius=reset&&animationOpts.animateScale?0:me.innerRadius;var outerRadius=reset&&animationOpts.animateScale?0:me.outerRadius;var options=arc._options||{};helpers$1.extend(arc,{_datasetIndex:me.index,_index:index,_model:{backgroundColor:options.backgroundColor,borderColor:options.borderColor,borderWidth:options.borderWidth,borderAlign:options.borderAlign,x:centerX+chart.offsetX,y:centerY+chart.offsetY,startAngle:startAngle,endAngle:endAngle,circumference:circumference,outerRadius:outerRadius,innerRadius:innerRadius,label:helpers$1.valueAtIndexOrDefault(dataset.label,index,chart.data.labels[index])}});var model=arc._model;if(!reset||!animationOpts.animateRotate){if(index===0){model.startAngle=opts.rotation}else{model.startAngle=me.getMeta().data[index-1]._model.endAngle}model.endAngle=model.startAngle+model.circumference}arc.pivot()},calculateTotal:function(){var dataset=this.getDataset();var meta=this.getMeta();var total=0;var value;helpers$1.each(meta.data,function(element,index){value=dataset.data[index];if(!isNaN(value)&&!element.hidden){total+=Math.abs(value)}});return total},calculateCircumference:function(value){var total=this.getMeta().total;if(total>0&&!isNaN(value)){return Math.PI*2*(Math.abs(value)/total)}return 0},getMaxBorderWidth:function(arcs){var me=this;var max=0;var chart=me.chart;var i,ilen,meta,arc,controller,options,borderWidth,hoverWidth;if(!arcs){for(i=0,ilen=chart.data.datasets.length;i<ilen;++i){if(chart.isDatasetVisible(i)){meta=chart.getDatasetMeta(i);arcs=meta.data;if(i!==me.index){controller=meta.controller}break}}}if(!arcs){return 0}for(i=0,ilen=arcs.length;i<ilen;++i){arc=arcs[i];options=controller?controller._resolveElementOptions(arc,i):arc._options;if(options.borderAlign!=="inner"){borderWidth=options.borderWidth;hoverWidth=options.hoverBorderWidth;max=borderWidth>max?borderWidth:max;max=hoverWidth>max?hoverWidth:max}}return max},setHoverStyle:function(arc){var model=arc._model;var options=arc._options;var getHoverColor=helpers$1.getHoverColor;arc.$previousStyle={backgroundColor:model.backgroundColor,borderColor:model.borderColor,borderWidth:model.borderWidth};model.backgroundColor=valueOrDefault$4(options.hoverBackgroundColor,getHoverColor(options.backgroundColor));model.borderColor=valueOrDefault$4(options.hoverBorderColor,getHoverColor(options.borderColor));model.borderWidth=valueOrDefault$4(options.hoverBorderWidth,options.borderWidth)},_resolveElementOptions:function(arc,index){var me=this;var chart=me.chart;var dataset=me.getDataset();var custom=arc.custom||{};var options=chart.options.elements.arc;var values={};var i,ilen,key;var context={chart:chart,dataIndex:index,dataset:dataset,datasetIndex:me.index};var keys=["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"];for(i=0,ilen=keys.length;i<ilen;++i){key=keys[i];values[key]=resolve$3([custom[key],dataset[key],options[key]],context,index)}return values},_getRingWeightOffset:function(datasetIndex){var ringWeightOffset=0;for(var i=0;i<datasetIndex;++i){if(this.chart.isDatasetVisible(i)){ringWeightOffset+=this._getRingWeight(i)}}return ringWeightOffset},_getRingWeight:function(dataSetIndex){return Math.max(valueOrDefault$4(this.chart.data.datasets[dataSetIndex].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});core_defaults._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",categoryPercentage:.8,barPercentage:.9,offset:true,gridLines:{offsetGridLines:true}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}});var controller_horizontalBar=controller_bar.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}});var valueOrDefault$5=helpers$1.valueOrDefault;var resolve$4=helpers$1.options.resolve;var isPointInArea=helpers$1.canvas._isPointInArea;core_defaults._set("line",{showLines:true,spanGaps:false,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});function lineEnabled(dataset,options){return valueOrDefault$5(dataset.showLine,options.showLines)}var controller_line=core_datasetController.extend({datasetElementType:elements.Line,dataElementType:elements.Point,update:function(reset){var me=this;var meta=me.getMeta();var line=meta.dataset;var points=meta.data||[];var scale=me.getScaleForId(meta.yAxisID);var dataset=me.getDataset();var showLine=lineEnabled(dataset,me.chart.options);var i,ilen;if(showLine){if(dataset.tension!==undefined&&dataset.lineTension===undefined){dataset.lineTension=dataset.tension}line._scale=scale;line._datasetIndex=me.index;line._children=points;line._model=me._resolveLineOptions(line);line.pivot()}for(i=0,ilen=points.length;i<ilen;++i){me.updateElement(points[i],i,reset)}if(showLine&&line._model.tension!==0){me.updateBezierControlPoints()}for(i=0,ilen=points.length;i<ilen;++i){points[i].pivot()}},updateElement:function(point,index,reset){var me=this;var meta=me.getMeta();var custom=point.custom||{};var dataset=me.getDataset();var datasetIndex=me.index;var value=dataset.data[index];var yScale=me.getScaleForId(meta.yAxisID);var xScale=me.getScaleForId(meta.xAxisID);var lineModel=meta.dataset._model;var x,y;var options=me._resolvePointOptions(point,index);x=xScale.getPixelForValue(typeof value==="object"?value:NaN,index,datasetIndex);y=reset?yScale.getBasePixel():me.calculatePointY(value,index,datasetIndex);point._xScale=xScale;point._yScale=yScale;point._options=options;point._datasetIndex=datasetIndex;point._index=index;point._model={x:x,y:y,skip:custom.skip||isNaN(x)||isNaN(y),radius:options.radius,pointStyle:options.pointStyle,rotation:options.rotation,backgroundColor:options.backgroundColor,borderColor:options.borderColor,borderWidth:options.borderWidth,tension:valueOrDefault$5(custom.tension,lineModel?lineModel.tension:0),steppedLine:lineModel?lineModel.steppedLine:false,hitRadius:options.hitRadius}},_resolvePointOptions:function(element,index){var me=this;var chart=me.chart;var dataset=chart.data.datasets[me.index];var custom=element.custom||{};var options=chart.options.elements.point;var values={};var i,ilen,key;var context={chart:chart,dataIndex:index,dataset:dataset,datasetIndex:me.index};var ELEMENT_OPTIONS={backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"};var keys=Object.keys(ELEMENT_OPTIONS);for(i=0,ilen=keys.length;i<ilen;++i){key=keys[i];values[key]=resolve$4([custom[key],dataset[ELEMENT_OPTIONS[key]],dataset[key],options[key]],context,index)}return values},_resolveLineOptions:function(element){var me=this;var chart=me.chart;var dataset=chart.data.datasets[me.index];var custom=element.custom||{};var options=chart.options;var elementOptions=options.elements.line;var values={};var i,ilen,key;var keys=["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill","cubicInterpolationMode"];for(i=0,ilen=keys.length;i<ilen;++i){key=keys[i];values[key]=resolve$4([custom[key],dataset[key],elementOptions[key]])}values.spanGaps=valueOrDefault$5(dataset.spanGaps,options.spanGaps);values.tension=valueOrDefault$5(dataset.lineTension,elementOptions.tension);values.steppedLine=resolve$4([custom.steppedLine,dataset.steppedLine,elementOptions.stepped]);return values},calculatePointY:function(value,index,datasetIndex){var me=this;var chart=me.chart;var meta=me.getMeta();var yScale=me.getScaleForId(meta.yAxisID);var sumPos=0;var sumNeg=0;var i,ds,dsMeta;if(yScale.options.stacked){for(i=0;i<datasetIndex;i++){ds=chart.data.datasets[i];dsMeta=chart.getDatasetMeta(i);if(dsMeta.type==="line"&&dsMeta.yAxisID===yScale.id&&chart.isDatasetVisible(i)){var stackedRightValue=Number(yScale.getRightValue(ds.data[index]));if(stackedRightValue<0){sumNeg+=stackedRightValue||0}else{sumPos+=stackedRightValue||0}}}var rightValue=Number(yScale.getRightValue(value));if(rightValue<0){return yScale.getPixelForValue(sumNeg+rightValue)}return yScale.getPixelForValue(sumPos+rightValue)}return yScale.getPixelForValue(value)},updateBezierControlPoints:function(){var me=this;var chart=me.chart;var meta=me.getMeta();var lineModel=meta.dataset._model;var area=chart.chartArea;var points=meta.data||[];var i,ilen,model,controlPoints;if(lineModel.spanGaps){points=points.filter(function(pt){return!pt._model.skip})}function capControlPoint(pt,min,max){return Math.max(Math.min(pt,max),min)}if(lineModel.cubicInterpolationMode==="monotone"){helpers$1.splineCurveMonotone(points)}else{for(i=0,ilen=points.length;i<ilen;++i){model=points[i]._model;controlPoints=helpers$1.splineCurve(helpers$1.previousItem(points,i)._model,model,helpers$1.nextItem(points,i)._model,lineModel.tension);model.controlPointPreviousX=controlPoints.previous.x;model.controlPointPreviousY=controlPoints.previous.y;model.controlPointNextX=controlPoints.next.x;model.controlPointNextY=controlPoints.next.y}}if(chart.options.elements.line.capBezierPoints){for(i=0,ilen=points.length;i<ilen;++i){model=points[i]._model;if(isPointInArea(model,area)){if(i>0&&isPointInArea(points[i-1]._model,area)){model.controlPointPreviousX=capControlPoint(model.controlPointPreviousX,area.left,area.right);model.controlPointPreviousY=capControlPoint(model.controlPointPreviousY,area.top,area.bottom)}if(i<points.length-1&&isPointInArea(points[i+1]._model,area)){model.controlPointNextX=capControlPoint(model.controlPointNextX,area.left,area.right);model.controlPointNextY=capControlPoint(model.controlPointNextY,area.top,area.bottom)}}}}},draw:function(){var me=this;var chart=me.chart;var meta=me.getMeta();var points=meta.data||[];var area=chart.chartArea;var ilen=points.length;var halfBorderWidth;var i=0;if(lineEnabled(me.getDataset(),chart.options)){halfBorderWidth=(meta.dataset._model.borderWidth||0)/2;helpers$1.canvas.clipArea(chart.ctx,{left:area.left,right:area.right,top:area.top-halfBorderWidth,bottom:area.bottom+halfBorderWidth});meta.dataset.draw();helpers$1.canvas.unclipArea(chart.ctx)}for(;i<ilen;++i){points[i].draw(area)}},setHoverStyle:function(point){var model=point._model;var options=point._options;var getHoverColor=helpers$1.getHoverColor;point.$previousStyle={backgroundColor:model.backgroundColor,borderColor:model.borderColor,borderWidth:model.borderWidth,radius:model.radius};model.backgroundColor=valueOrDefault$5(options.hoverBackgroundColor,getHoverColor(options.backgroundColor));model.borderColor=valueOrDefault$5(options.hoverBorderColor,getHoverColor(options.borderColor));model.borderWidth=valueOrDefault$5(options.hoverBorderWidth,options.borderWidth);model.radius=valueOrDefault$5(options.hoverRadius,options.radius)}});var resolve$5=helpers$1.options.resolve;core_defaults._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:false},gridLines:{circular:true},pointLabels:{display:false},ticks:{beginAtZero:true}},animation:{animateRotate:true,animateScale:true},startAngle:-.5*Math.PI,legendCallback:function(chart){var text=[];text.push('<ul class="'+chart.id+'-legend">');var data=chart.data;var datasets=data.datasets;var labels=data.labels;if(datasets.length){for(var i=0;i<datasets[0].data.length;++i){text.push('<li><span style="background-color:'+datasets[0].backgroundColor[i]+'"></span>');if(labels[i]){text.push(labels[i])}text.push("</li>")}}text.push("</ul>");return text.join("")},legend:{labels:{generateLabels:function(chart){var data=chart.data;if(data.labels.length&&data.datasets.length){return data.labels.map(function(label,i){var meta=chart.getDatasetMeta(0);var ds=data.datasets[0];var arc=meta.data[i];var custom=arc.custom||{};var arcOpts=chart.options.elements.arc;var fill=resolve$5([custom.backgroundColor,ds.backgroundColor,arcOpts.backgroundColor],undefined,i);var stroke=resolve$5([custom.borderColor,ds.borderColor,arcOpts.borderColor],undefined,i);var bw=resolve$5([custom.borderWidth,ds.borderWidth,arcOpts.borderWidth],undefined,i);return{text:label,fillStyle:fill,strokeStyle:stroke,lineWidth:bw,hidden:isNaN(ds.data[i])||meta.data[i].hidden,index:i}})}return[]}},onClick:function(e,legendItem){var index=legendItem.index;var chart=this.chart;var i,ilen,meta;for(i=0,ilen=(chart.data.datasets||[]).length;i<ilen;++i){meta=chart.getDatasetMeta(i);meta.data[index].hidden=!meta.data[index].hidden}chart.update()}},tooltips:{callbacks:{title:function(){return""},label:function(item,data){return data.labels[item.index]+": "+item.yLabel}}}});var controller_polarArea=core_datasetController.extend({dataElementType:elements.Arc,linkScales:helpers$1.noop,update:function(reset){var me=this;var dataset=me.getDataset();var meta=me.getMeta();var start=me.chart.options.startAngle||0;var starts=me._starts=[];var angles=me._angles=[];var arcs=meta.data;var i,ilen,angle;me._updateRadius();meta.count=me.countVisibleElements();for(i=0,ilen=dataset.data.length;i<ilen;i++){starts[i]=start;angle=me._computeAngle(i);angles[i]=angle;start+=angle}for(i=0,ilen=arcs.length;i<ilen;++i){arcs[i]._options=me._resolveElementOptions(arcs[i],i);me.updateElement(arcs[i],i,reset)}},_updateRadius:function(){var me=this;var chart=me.chart;var chartArea=chart.chartArea;var opts=chart.options;var minSize=Math.min(chartArea.right-chartArea.left,chartArea.bottom-chartArea.top);chart.outerRadius=Math.max(minSize/2,0);chart.innerRadius=Math.max(opts.cutoutPercentage?chart.outerRadius/100*opts.cutoutPercentage:1,0);chart.radiusLength=(chart.outerRadius-chart.innerRadius)/chart.getVisibleDatasetCount();me.outerRadius=chart.outerRadius-chart.radiusLength*me.index;me.innerRadius=me.outerRadius-chart.radiusLength},updateElement:function(arc,index,reset){var me=this;var chart=me.chart;var dataset=me.getDataset();var opts=chart.options;var animationOpts=opts.animation;var scale=chart.scale;var labels=chart.data.labels;var centerX=scale.xCenter;var centerY=scale.yCenter;var datasetStartAngle=opts.startAngle;var distance=arc.hidden?0:scale.getDistanceFromCenterForValue(dataset.data[index]);var startAngle=me._starts[index];var endAngle=startAngle+(arc.hidden?0:me._angles[index]);var resetRadius=animationOpts.animateScale?0:scale.getDistanceFromCenterForValue(dataset.data[index]);var options=arc._options||{};helpers$1.extend(arc,{_datasetIndex:me.index,_index:index,_scale:scale,_model:{backgroundColor:options.backgroundColor,borderColor:options.borderColor,borderWidth:options.borderWidth,borderAlign:options.borderAlign,x:centerX,y:centerY,innerRadius:0,outerRadius:reset?resetRadius:distance,startAngle:reset&&animationOpts.animateRotate?datasetStartAngle:startAngle,endAngle:reset&&animationOpts.animateRotate?datasetStartAngle:endAngle,label:helpers$1.valueAtIndexOrDefault(labels,index,labels[index])}});arc.pivot()},countVisibleElements:function(){var dataset=this.getDataset();var meta=this.getMeta();var count=0;helpers$1.each(meta.data,function(element,index){if(!isNaN(dataset.data[index])&&!element.hidden){count++}});return count},setHoverStyle:function(arc){var model=arc._model;var options=arc._options;var getHoverColor=helpers$1.getHoverColor;var valueOrDefault=helpers$1.valueOrDefault;arc.$previousStyle={backgroundColor:model.backgroundColor,borderColor:model.borderColor,borderWidth:model.borderWidth};model.backgroundColor=valueOrDefault(options.hoverBackgroundColor,getHoverColor(options.backgroundColor));model.borderColor=valueOrDefault(options.hoverBorderColor,getHoverColor(options.borderColor));model.borderWidth=valueOrDefault(options.hoverBorderWidth,options.borderWidth)},_resolveElementOptions:function(arc,index){var me=this;var chart=me.chart;var dataset=me.getDataset();var custom=arc.custom||{};var options=chart.options.elements.arc;var values={};var i,ilen,key;var context={chart:chart,dataIndex:index,dataset:dataset,datasetIndex:me.index};var keys=["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"];for(i=0,ilen=keys.length;i<ilen;++i){key=keys[i];values[key]=resolve$5([custom[key],dataset[key],options[key]],context,index)}return values},_computeAngle:function(index){var me=this;var count=this.getMeta().count;var dataset=me.getDataset();var meta=me.getMeta();if(isNaN(dataset.data[index])||meta.data[index].hidden){return 0}var context={chart:me.chart,dataIndex:index,dataset:dataset,datasetIndex:me.index};return resolve$5([me.chart.options.elements.arc.angle,2*Math.PI/count],context,index)}});core_defaults._set("pie",helpers$1.clone(core_defaults.doughnut));core_defaults._set("pie",{cutoutPercentage:0});var controller_pie=controller_doughnut;var valueOrDefault$6=helpers$1.valueOrDefault;var resolve$6=helpers$1.options.resolve;core_defaults._set("radar",{scale:{type:"radialLinear"},elements:{line:{tension:0}}});var controller_radar=core_datasetController.extend({datasetElementType:elements.Line,dataElementType:elements.Point,linkScales:helpers$1.noop,update:function(reset){var me=this;var meta=me.getMeta();var line=meta.dataset;var points=meta.data||[];var scale=me.chart.scale;var dataset=me.getDataset();var i,ilen;if(dataset.tension!==undefined&&dataset.lineTension===undefined){dataset.lineTension=dataset.tension}line._scale=scale;line._datasetIndex=me.index;line._children=points;line._loop=true;line._model=me._resolveLineOptions(line);line.pivot();for(i=0,ilen=points.length;i<ilen;++i){me.updateElement(points[i],i,reset)}me.updateBezierControlPoints();for(i=0,ilen=points.length;i<ilen;++i){points[i].pivot()}},updateElement:function(point,index,reset){var me=this;var custom=point.custom||{};var dataset=me.getDataset();var scale=me.chart.scale;var pointPosition=scale.getPointPositionForValue(index,dataset.data[index]);var options=me._resolvePointOptions(point,index);var lineModel=me.getMeta().dataset._model;var x=reset?scale.xCenter:pointPosition.x;var y=reset?scale.yCenter:pointPosition.y;point._scale=scale;point._options=options;point._datasetIndex=me.index;point._index=index;point._model={x:x,y:y,skip:custom.skip||isNaN(x)||isNaN(y),radius:options.radius,pointStyle:options.pointStyle,rotation:options.rotation,backgroundColor:options.backgroundColor,borderColor:options.borderColor,borderWidth:options.borderWidth,tension:valueOrDefault$6(custom.tension,lineModel?lineModel.tension:0),hitRadius:options.hitRadius}},_resolvePointOptions:function(element,index){var me=this;var chart=me.chart;var dataset=chart.data.datasets[me.index];var custom=element.custom||{};var options=chart.options.elements.point;var values={};var i,ilen,key;var context={chart:chart,dataIndex:index,dataset:dataset,datasetIndex:me.index};var ELEMENT_OPTIONS={backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"};var keys=Object.keys(ELEMENT_OPTIONS);for(i=0,ilen=keys.length;i<ilen;++i){key=keys[i];values[key]=resolve$6([custom[key],dataset[ELEMENT_OPTIONS[key]],dataset[key],options[key]],context,index)}return values},_resolveLineOptions:function(element){var me=this;var chart=me.chart;var dataset=chart.data.datasets[me.index];var custom=element.custom||{};var options=chart.options.elements.line;var values={};var i,ilen,key;var keys=["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"];for(i=0,ilen=keys.length;i<ilen;++i){key=keys[i];values[key]=resolve$6([custom[key],dataset[key],options[key]])}values.tension=valueOrDefault$6(dataset.lineTension,options.tension);return values},updateBezierControlPoints:function(){var me=this;var meta=me.getMeta();var area=me.chart.chartArea;var points=meta.data||[];var i,ilen,model,controlPoints;function capControlPoint(pt,min,max){return Math.max(Math.min(pt,max),min)}for(i=0,ilen=points.length;i<ilen;++i){model=points[i]._model;controlPoints=helpers$1.splineCurve(helpers$1.previousItem(points,i,true)._model,model,helpers$1.nextItem(points,i,true)._model,model.tension);model.controlPointPreviousX=capControlPoint(controlPoints.previous.x,area.left,area.right);model.controlPointPreviousY=capControlPoint(controlPoints.previous.y,area.top,area.bottom);model.controlPointNextX=capControlPoint(controlPoints.next.x,area.left,area.right);model.controlPointNextY=capControlPoint(controlPoints.next.y,area.top,area.bottom)}},setHoverStyle:function(point){var model=point._model;var options=point._options;var getHoverColor=helpers$1.getHoverColor;point.$previousStyle={backgroundColor:model.backgroundColor,borderColor:model.borderColor,borderWidth:model.borderWidth,radius:model.radius};model.backgroundColor=valueOrDefault$6(options.hoverBackgroundColor,getHoverColor(options.backgroundColor));model.borderColor=valueOrDefault$6(options.hoverBorderColor,getHoverColor(options.borderColor));model.borderWidth=valueOrDefault$6(options.hoverBorderWidth,options.borderWidth);model.radius=valueOrDefault$6(options.hoverRadius,options.radius)}});core_defaults._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},showLines:false,tooltips:{callbacks:{title:function(){return""},label:function(item){return"("+item.xLabel+", "+item.yLabel+")"}}}});var controller_scatter=controller_line;var controllers={bar:controller_bar,bubble:controller_bubble,doughnut:controller_doughnut,horizontalBar:controller_horizontalBar,line:controller_line,polarArea:controller_polarArea,pie:controller_pie,radar:controller_radar,scatter:controller_scatter};function getRelativePosition(e,chart){if(e.native){return{x:e.x,y:e.y}}return helpers$1.getRelativePosition(e,chart)}function parseVisibleItems(chart,handler){var datasets=chart.data.datasets;var meta,i,j,ilen,jlen;for(i=0,ilen=datasets.length;i<ilen;++i){if(!chart.isDatasetVisible(i)){continue}meta=chart.getDatasetMeta(i);for(j=0,jlen=meta.data.length;j<jlen;++j){var element=meta.data[j];if(!element._view.skip){handler(element)}}}}function getIntersectItems(chart,position){var elements=[];parseVisibleItems(chart,function(element){if(element.inRange(position.x,position.y)){elements.push(element)}});return elements}function getNearestItems(chart,position,intersect,distanceMetric){var minDistance=Number.POSITIVE_INFINITY;var nearestItems=[];parseVisibleItems(chart,function(element){if(intersect&&!element.inRange(position.x,position.y)){return}var center=element.getCenterPoint();var distance=distanceMetric(position,center);if(distance<minDistance){nearestItems=[element];minDistance=distance}else if(distance===minDistance){nearestItems.push(element)}});return nearestItems}function getDistanceMetricForAxis(axis){var useX=axis.indexOf("x")!==-1;var useY=axis.indexOf("y")!==-1;return function(pt1,pt2){var deltaX=useX?Math.abs(pt1.x-pt2.x):0;var deltaY=useY?Math.abs(pt1.y-pt2.y):0;return Math.sqrt(Math.pow(deltaX,2)+Math.pow(deltaY,2))}}function indexMode(chart,e,options){var position=getRelativePosition(e,chart);options.axis=options.axis||"x";var distanceMetric=getDistanceMetricForAxis(options.axis);var items=options.intersect?getIntersectItems(chart,position):getNearestItems(chart,position,false,distanceMetric);var elements=[];if(!items.length){return[]}chart.data.datasets.forEach(function(dataset,datasetIndex){if(chart.isDatasetVisible(datasetIndex)){var meta=chart.getDatasetMeta(datasetIndex);var element=meta.data[items[0]._index];if(element&&!element._view.skip){elements.push(element)}}});return elements}var core_interaction={modes:{single:function(chart,e){var position=getRelativePosition(e,chart);var elements=[];parseVisibleItems(chart,function(element){if(element.inRange(position.x,position.y)){elements.push(element);return elements}});return elements.slice(0,1)},label:indexMode,index:indexMode,dataset:function(chart,e,options){var position=getRelativePosition(e,chart);options.axis=options.axis||"xy";var distanceMetric=getDistanceMetricForAxis(options.axis);var items=options.intersect?getIntersectItems(chart,position):getNearestItems(chart,position,false,distanceMetric);if(items.length>0){items=chart.getDatasetMeta(items[0]._datasetIndex).data}return items},"x-axis":function(chart,e){return indexMode(chart,e,{intersect:false})},point:function(chart,e){var position=getRelativePosition(e,chart);return getIntersectItems(chart,position)},nearest:function(chart,e,options){var position=getRelativePosition(e,chart);options.axis=options.axis||"xy";var distanceMetric=getDistanceMetricForAxis(options.axis);return getNearestItems(chart,position,options.intersect,distanceMetric)},x:function(chart,e,options){var position=getRelativePosition(e,chart);var items=[];var intersectsItem=false;parseVisibleItems(chart,function(element){if(element.inXRange(position.x)){items.push(element)}if(element.inRange(position.x,position.y)){intersectsItem=true}});if(options.intersect&&!intersectsItem){items=[]}return items},y:function(chart,e,options){var position=getRelativePosition(e,chart);var items=[];var intersectsItem=false;parseVisibleItems(chart,function(element){if(element.inYRange(position.y)){items.push(element)}if(element.inRange(position.x,position.y)){intersectsItem=true}});if(options.intersect&&!intersectsItem){items=[]}return items}}};function filterByPosition(array,position){return helpers$1.where(array,function(v){return v.position===position})}function sortByWeight(array,reverse){array.forEach(function(v,i){v._tmpIndex_=i;return v});array.sort(function(a,b){var v0=reverse?b:a;var v1=reverse?a:b;return v0.weight===v1.weight?v0._tmpIndex_-v1._tmpIndex_:v0.weight-v1.weight});array.forEach(function(v){delete v._tmpIndex_})}function findMaxPadding(boxes){var top=0;var left=0;var bottom=0;var right=0;helpers$1.each(boxes,function(box){if(box.getPadding){var boxPadding=box.getPadding();top=Math.max(top,boxPadding.top);left=Math.max(left,boxPadding.left);bottom=Math.max(bottom,boxPadding.bottom);right=Math.max(right,boxPadding.right)}});return{top:top,left:left,bottom:bottom,right:right}}function addSizeByPosition(boxes,size){helpers$1.each(boxes,function(box){size[box.position]+=box.isHorizontal()?box.height:box.width})}core_defaults._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var core_layouts={defaults:{},addBox:function(chart,item){if(!chart.boxes){chart.boxes=[]}item.fullWidth=item.fullWidth||false;item.position=item.position||"top";item.weight=item.weight||0;chart.boxes.push(item)},removeBox:function(chart,layoutItem){var index=chart.boxes?chart.boxes.indexOf(layoutItem):-1;if(index!==-1){chart.boxes.splice(index,1)}},configure:function(chart,item,options){var props=["fullWidth","position","weight"];var ilen=props.length;var i=0;var prop;for(;i<ilen;++i){prop=props[i];if(options.hasOwnProperty(prop)){item[prop]=options[prop]}}},update:function(chart,width,height){if(!chart){return}var layoutOptions=chart.options.layout||{};var padding=helpers$1.options.toPadding(layoutOptions.padding);var leftPadding=padding.left;var rightPadding=padding.right;var topPadding=padding.top;var bottomPadding=padding.bottom;var leftBoxes=filterByPosition(chart.boxes,"left");var rightBoxes=filterByPosition(chart.boxes,"right");var topBoxes=filterByPosition(chart.boxes,"top");var bottomBoxes=filterByPosition(chart.boxes,"bottom");var chartAreaBoxes=filterByPosition(chart.boxes,"chartArea");sortByWeight(leftBoxes,true);sortByWeight(rightBoxes,false);sortByWeight(topBoxes,true);sortByWeight(bottomBoxes,false);var verticalBoxes=leftBoxes.concat(rightBoxes);var horizontalBoxes=topBoxes.concat(bottomBoxes);var outerBoxes=verticalBoxes.concat(horizontalBoxes);var chartWidth=width-leftPadding-rightPadding;var chartHeight=height-topPadding-bottomPadding;var chartAreaWidth=chartWidth/2;var verticalBoxWidth=(width-chartAreaWidth)/verticalBoxes.length;var maxChartAreaWidth=chartWidth;var maxChartAreaHeight=chartHeight;var outerBoxSizes={top:topPadding,left:leftPadding,bottom:bottomPadding,right:rightPadding};var minBoxSizes=[];var maxPadding;function getMinimumBoxSize(box){var minSize;var isHorizontal=box.isHorizontal();if(isHorizontal){minSize=box.update(box.fullWidth?chartWidth:maxChartAreaWidth,chartHeight/2);maxChartAreaHeight-=minSize.height}else{minSize=box.update(verticalBoxWidth,maxChartAreaHeight);maxChartAreaWidth-=minSize.width}minBoxSizes.push({horizontal:isHorizontal,width:minSize.width,box:box})}helpers$1.each(outerBoxes,getMinimumBoxSize);maxPadding=findMaxPadding(outerBoxes);function fitBox(box){var minBoxSize=helpers$1.findNextWhere(minBoxSizes,function(minBox){return minBox.box===box});if(minBoxSize){if(minBoxSize.horizontal){var scaleMargin={left:Math.max(outerBoxSizes.left,maxPadding.left),right:Math.max(outerBoxSizes.right,maxPadding.right),top:0,bottom:0};box.update(box.fullWidth?chartWidth:maxChartAreaWidth,chartHeight/2,scaleMargin)}else{box.update(minBoxSize.width,maxChartAreaHeight)}}}helpers$1.each(verticalBoxes,fitBox);addSizeByPosition(verticalBoxes,outerBoxSizes);helpers$1.each(horizontalBoxes,fitBox);addSizeByPosition(horizontalBoxes,outerBoxSizes);function finalFitVerticalBox(box){var minBoxSize=helpers$1.findNextWhere(minBoxSizes,function(minSize){return minSize.box===box});var scaleMargin={left:0,right:0,top:outerBoxSizes.top,bottom:outerBoxSizes.bottom};if(minBoxSize){box.update(minBoxSize.width,maxChartAreaHeight,scaleMargin)}}helpers$1.each(verticalBoxes,finalFitVerticalBox);outerBoxSizes={top:topPadding,left:leftPadding,bottom:bottomPadding,right:rightPadding};addSizeByPosition(outerBoxes,outerBoxSizes);var leftPaddingAddition=Math.max(maxPadding.left-outerBoxSizes.left,0);outerBoxSizes.left+=leftPaddingAddition;outerBoxSizes.right+=Math.max(maxPadding.right-outerBoxSizes.right,0);var topPaddingAddition=Math.max(maxPadding.top-outerBoxSizes.top,0);outerBoxSizes.top+=topPaddingAddition;outerBoxSizes.bottom+=Math.max(maxPadding.bottom-outerBoxSizes.bottom,0);var newMaxChartAreaHeight=height-outerBoxSizes.top-outerBoxSizes.bottom;var newMaxChartAreaWidth=width-outerBoxSizes.left-outerBoxSizes.right;if(newMaxChartAreaWidth!==maxChartAreaWidth||newMaxChartAreaHeight!==maxChartAreaHeight){helpers$1.each(verticalBoxes,function(box){box.height=newMaxChartAreaHeight});helpers$1.each(horizontalBoxes,function(box){if(!box.fullWidth){box.width=newMaxChartAreaWidth}});maxChartAreaHeight=newMaxChartAreaHeight;maxChartAreaWidth=newMaxChartAreaWidth}var left=leftPadding+leftPaddingAddition;var top=topPadding+topPaddingAddition;function placeBox(box){if(box.isHorizontal()){box.left=box.fullWidth?leftPadding:outerBoxSizes.left;box.right=box.fullWidth?width-rightPadding:outerBoxSizes.left+maxChartAreaWidth;box.top=top;box.bottom=top+box.height;top=box.bottom}else{box.left=left;box.right=left+box.width;box.top=outerBoxSizes.top;box.bottom=outerBoxSizes.top+maxChartAreaHeight;left=box.right}}helpers$1.each(leftBoxes.concat(topBoxes),placeBox);left+=maxChartAreaWidth;top+=maxChartAreaHeight;helpers$1.each(rightBoxes,placeBox);helpers$1.each(bottomBoxes,placeBox);chart.chartArea={left:outerBoxSizes.left,top:outerBoxSizes.top,right:outerBoxSizes.left+maxChartAreaWidth,bottom:outerBoxSizes.top+maxChartAreaHeight};helpers$1.each(chartAreaBoxes,function(box){box.left=chart.chartArea.left;box.top=chart.chartArea.top;box.right=chart.chartArea.right;box.bottom=chart.chartArea.bottom;box.update(maxChartAreaWidth,maxChartAreaHeight)})}};var platform_basic={acquireContext:function(item){if(item&&item.canvas){item=item.canvas}return item&&item.getContext("2d")||null}};var platform_dom="/*\n * DOM element rendering detection\n * https://davidwalsh.name/detect-node-insertion\n */\n@keyframes chartjs-render-animation {\n\tfrom { opacity: 0.99; }\n\tto { opacity: 1; }\n}\n\n.chartjs-render-monitor {\n\tanimation: chartjs-render-animation 0.001s;\n}\n\n/*\n * DOM element resizing detection\n * https://github.com/marcj/css-element-queries\n */\n.chartjs-size-monitor,\n.chartjs-size-monitor-expand,\n.chartjs-size-monitor-shrink {\n\tposition: absolute;\n\tdirection: ltr;\n\tleft: 0;\n\ttop: 0;\n\tright: 0;\n\tbottom: 0;\n\toverflow: hidden;\n\tpointer-events: none;\n\tvisibility: hidden;\n\tz-index: -1;\n}\n\n.chartjs-size-monitor-expand > div {\n\tposition: absolute;\n\twidth: 1000000px;\n\theight: 1000000px;\n\tleft: 0;\n\ttop: 0;\n}\n\n.chartjs-size-monitor-shrink > div {\n\tposition: absolute;\n\twidth: 200%;\n\theight: 200%;\n\tleft: 0;\n\ttop: 0;\n}\n";var platform_dom$1=Object.freeze({default:platform_dom});function getCjsExportFromNamespace(n){return n&&n.default||n}var stylesheet=getCjsExportFromNamespace(platform_dom$1);var EXPANDO_KEY="$chartjs";var CSS_PREFIX="chartjs-";var CSS_SIZE_MONITOR=CSS_PREFIX+"size-monitor";var CSS_RENDER_MONITOR=CSS_PREFIX+"render-monitor";var CSS_RENDER_ANIMATION=CSS_PREFIX+"render-animation";var ANIMATION_START_EVENTS=["animationstart","webkitAnimationStart"];var EVENT_TYPES={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function readUsedSize(element,property){var value=helpers$1.getStyle(element,property);var matches=value&&value.match(/^(\d+)(\.\d+)?px$/);return matches?Number(matches[1]):undefined}function initCanvas(canvas,config){var style=canvas.style;var renderHeight=canvas.getAttribute("height");var renderWidth=canvas.getAttribute("width");canvas[EXPANDO_KEY]={initial:{height:renderHeight,width:renderWidth,style:{display:style.display,height:style.height,width:style.width}}};style.display=style.display||"block";if(renderWidth===null||renderWidth===""){var displayWidth=readUsedSize(canvas,"width");if(displayWidth!==undefined){canvas.width=displayWidth}}if(renderHeight===null||renderHeight===""){if(canvas.style.height===""){canvas.height=canvas.width/(config.options.aspectRatio||2)}else{var displayHeight=readUsedSize(canvas,"height");if(displayWidth!==undefined){canvas.height=displayHeight}}}return canvas}var supportsEventListenerOptions=function(){var supports=false;try{var options=Object.defineProperty({},"passive",{get:function(){supports=true}});window.addEventListener("e",null,options)}catch(e){}return supports}();var eventListenerOptions=supportsEventListenerOptions?{passive:true}:false;function addListener(node,type,listener){node.addEventListener(type,listener,eventListenerOptions)}function removeListener(node,type,listener){node.removeEventListener(type,listener,eventListenerOptions)}function createEvent(type,chart,x,y,nativeEvent){return{type:type,chart:chart,native:nativeEvent||null,x:x!==undefined?x:null,y:y!==undefined?y:null}}function fromNativeEvent(event,chart){var type=EVENT_TYPES[event.type]||event.type;var pos=helpers$1.getRelativePosition(event,chart);return createEvent(type,chart,pos.x,pos.y,event)}function throttled(fn,thisArg){var ticking=false;var args=[];return function(){args=Array.prototype.slice.call(arguments);thisArg=thisArg||this;if(!ticking){ticking=true;helpers$1.requestAnimFrame.call(window,function(){ticking=false;fn.apply(thisArg,args)})}}}function createDiv(cls){var el=document.createElement("div");el.className=cls||"";return el}function createResizer(handler){var maxSize=1e6;var resizer=createDiv(CSS_SIZE_MONITOR);var expand=createDiv(CSS_SIZE_MONITOR+"-expand");var shrink=createDiv(CSS_SIZE_MONITOR+"-shrink");expand.appendChild(createDiv());shrink.appendChild(createDiv());resizer.appendChild(expand);resizer.appendChild(shrink);resizer._reset=function(){expand.scrollLeft=maxSize;expand.scrollTop=maxSize;shrink.scrollLeft=maxSize;shrink.scrollTop=maxSize};var onScroll=function(){resizer._reset();handler()};addListener(expand,"scroll",onScroll.bind(expand,"expand"));addListener(shrink,"scroll",onScroll.bind(shrink,"shrink"));return resizer}function watchForRender(node,handler){var expando=node[EXPANDO_KEY]||(node[EXPANDO_KEY]={});var proxy=expando.renderProxy=function(e){if(e.animationName===CSS_RENDER_ANIMATION){handler()}};helpers$1.each(ANIMATION_START_EVENTS,function(type){addListener(node,type,proxy)});expando.reflow=!!node.offsetParent;node.classList.add(CSS_RENDER_MONITOR)}function unwatchForRender(node){var expando=node[EXPANDO_KEY]||{};var proxy=expando.renderProxy;if(proxy){helpers$1.each(ANIMATION_START_EVENTS,function(type){removeListener(node,type,proxy)});delete expando.renderProxy}node.classList.remove(CSS_RENDER_MONITOR)}function addResizeListener(node,listener,chart){var expando=node[EXPANDO_KEY]||(node[EXPANDO_KEY]={});var resizer=expando.resizer=createResizer(throttled(function(){if(expando.resizer){var container=chart.options.maintainAspectRatio&&node.parentNode;var w=container?container.clientWidth:0;listener(createEvent("resize",chart));if(container&&container.clientWidth<w&&chart.canvas){listener(createEvent("resize",chart))}}}));watchForRender(node,function(){if(expando.resizer){var container=node.parentNode;if(container&&container!==resizer.parentNode){container.insertBefore(resizer,container.firstChild)}resizer._reset()}})}function removeResizeListener(node){var expando=node[EXPANDO_KEY]||{};var resizer=expando.resizer;delete expando.resizer;unwatchForRender(node);if(resizer&&resizer.parentNode){resizer.parentNode.removeChild(resizer)}}function injectCSS(platform,css){var style=platform._style||document.createElement("style");if(!platform._style){platform._style=style;css="/* Chart.js */\n"+css;style.setAttribute("type","text/css");document.getElementsByTagName("head")[0].appendChild(style)}style.appendChild(document.createTextNode(css))}var platform_dom$2={disableCSSInjection:false,_enabled:typeof window!=="undefined"&&typeof document!=="undefined",_ensureLoaded:function(){if(this._loaded){return}this._loaded=true;if(!this.disableCSSInjection){injectCSS(this,stylesheet)}},acquireContext:function(item,config){if(typeof item==="string"){item=document.getElementById(item)}else if(item.length){item=item[0]}if(item&&item.canvas){item=item.canvas}var context=item&&item.getContext&&item.getContext("2d");this._ensureLoaded();if(context&&context.canvas===item){initCanvas(item,config);return context}return null},releaseContext:function(context){var canvas=context.canvas;if(!canvas[EXPANDO_KEY]){return}var initial=canvas[EXPANDO_KEY].initial;["height","width"].forEach(function(prop){var value=initial[prop];if(helpers$1.isNullOrUndef(value)){canvas.removeAttribute(prop)}else{canvas.setAttribute(prop,value)}});helpers$1.each(initial.style||{},function(value,key){canvas.style[key]=value});canvas.width=canvas.width;delete canvas[EXPANDO_KEY]},addEventListener:function(chart,type,listener){var canvas=chart.canvas;if(type==="resize"){addResizeListener(canvas,listener,chart);return}var expando=listener[EXPANDO_KEY]||(listener[EXPANDO_KEY]={});var proxies=expando.proxies||(expando.proxies={});var proxy=proxies[chart.id+"_"+type]=function(event){listener(fromNativeEvent(event,chart))};addListener(canvas,type,proxy)},removeEventListener:function(chart,type,listener){var canvas=chart.canvas;if(type==="resize"){removeResizeListener(canvas);return}var expando=listener[EXPANDO_KEY]||{};var proxies=expando.proxies||{};var proxy=proxies[chart.id+"_"+type];if(!proxy){return}removeListener(canvas,type,proxy)}};helpers$1.addEvent=addListener;helpers$1.removeEvent=removeListener;var implementation=platform_dom$2._enabled?platform_dom$2:platform_basic;var platform=helpers$1.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},implementation);core_defaults._set("global",{plugins:{}});var core_plugins={_plugins:[],_cacheId:0,register:function(plugins){var p=this._plugins;[].concat(plugins).forEach(function(plugin){if(p.indexOf(plugin)===-1){p.push(plugin)}});this._cacheId++},unregister:function(plugins){var p=this._plugins;[].concat(plugins).forEach(function(plugin){var idx=p.indexOf(plugin);if(idx!==-1){p.splice(idx,1)}});this._cacheId++},clear:function(){this._plugins=[];this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(chart,hook,args){var descriptors=this.descriptors(chart);var ilen=descriptors.length;var i,descriptor,plugin,params,method;for(i=0;i<ilen;++i){descriptor=descriptors[i];plugin=descriptor.plugin;method=plugin[hook];if(typeof method==="function"){params=[chart].concat(args||[]);params.push(descriptor.options);if(method.apply(plugin,params)===false){return false}}}return true},descriptors:function(chart){var cache=chart.$plugins||(chart.$plugins={});if(cache.id===this._cacheId){return cache.descriptors}var plugins=[];var descriptors=[];var config=chart&&chart.config||{};var options=config.options&&config.options.plugins||{};this._plugins.concat(config.plugins||[]).forEach(function(plugin){var idx=plugins.indexOf(plugin);if(idx!==-1){return}var id=plugin.id;var opts=options[id];if(opts===false){return}if(opts===true){opts=helpers$1.clone(core_defaults.global.plugins[id])}plugins.push(plugin);descriptors.push({plugin:plugin,options:opts||{}})});cache.descriptors=descriptors;cache.id=this._cacheId;return descriptors},_invalidate:function(chart){delete chart.$plugins}};var core_scaleService={constructors:{},defaults:{},registerScaleType:function(type,scaleConstructor,scaleDefaults){this.constructors[type]=scaleConstructor;this.defaults[type]=helpers$1.clone(scaleDefaults)},getScaleConstructor:function(type){return this.constructors.hasOwnProperty(type)?this.constructors[type]:undefined},getScaleDefaults:function(type){return this.defaults.hasOwnProperty(type)?helpers$1.merge({},[core_defaults.scale,this.defaults[type]]):{}},updateScaleDefaults:function(type,additions){var me=this;if(me.defaults.hasOwnProperty(type)){me.defaults[type]=helpers$1.extend(me.defaults[type],additions)}},addScalesToLayout:function(chart){helpers$1.each(chart.scales,function(scale){scale.fullWidth=scale.options.fullWidth;scale.position=scale.options.position;scale.weight=scale.options.weight;core_layouts.addBox(chart,scale)})}};var valueOrDefault$7=helpers$1.valueOrDefault;core_defaults._set("global",{tooltips:{enabled:true,custom:null,mode:"nearest",position:"average",intersect:true,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:true,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:helpers$1.noop,title:function(tooltipItems,data){var title="";var labels=data.labels;var labelCount=labels?labels.length:0;if(tooltipItems.length>0){var item=tooltipItems[0];if(item.label){title=item.label}else if(item.xLabel){title=item.xLabel}else if(labelCount>0&&item.index<labelCount){title=labels[item.index]}}return title},afterTitle:helpers$1.noop,beforeBody:helpers$1.noop,beforeLabel:helpers$1.noop,label:function(tooltipItem,data){var label=data.datasets[tooltipItem.datasetIndex].label||"";if(label){label+=": "}if(!helpers$1.isNullOrUndef(tooltipItem.value)){label+=tooltipItem.value}else{label+=tooltipItem.yLabel}return label},labelColor:function(tooltipItem,chart){var meta=chart.getDatasetMeta(tooltipItem.datasetIndex);var activeElement=meta.data[tooltipItem.index];var view=activeElement._view;return{borderColor:view.borderColor,backgroundColor:view.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:helpers$1.noop,afterBody:helpers$1.noop,beforeFooter:helpers$1.noop,footer:helpers$1.noop,afterFooter:helpers$1.noop}}});var positioners={average:function(elements){if(!elements.length){return false}var i,len;var x=0;var y=0;var count=0;for(i=0,len=elements.length;i<len;++i){var el=elements[i];if(el&&el.hasValue()){var pos=el.tooltipPosition();x+=pos.x;y+=pos.y;++count}}return{x:x/count,y:y/count}},nearest:function(elements,eventPosition){var x=eventPosition.x;var y=eventPosition.y;var minDistance=Number.POSITIVE_INFINITY;var i,len,nearestElement;for(i=0,len=elements.length;i<len;++i){var el=elements[i];if(el&&el.hasValue()){var center=el.getCenterPoint();var d=helpers$1.distanceBetweenPoints(eventPosition,center);if(d<minDistance){minDistance=d;nearestElement=el}}}if(nearestElement){var tp=nearestElement.tooltipPosition();x=tp.x;y=tp.y}return{x:x,y:y}}};function pushOrConcat(base,toPush){if(toPush){if(helpers$1.isArray(toPush)){Array.prototype.push.apply(base,toPush)}else{base.push(toPush)}}return base}function splitNewlines(str){if((typeof str==="string"||str instanceof String)&&str.indexOf("\n")>-1){return str.split("\n")}return str}function createTooltipItem(element){var xScale=element._xScale;var yScale=element._yScale||element._scale;var index=element._index;var datasetIndex=element._datasetIndex;var controller=element._chart.getDatasetMeta(datasetIndex).controller;var indexScale=controller._getIndexScale();var valueScale=controller._getValueScale();return{xLabel:xScale?xScale.getLabelForIndex(index,datasetIndex):"",yLabel:yScale?yScale.getLabelForIndex(index,datasetIndex):"",label:indexScale?""+indexScale.getLabelForIndex(index,datasetIndex):"",value:valueScale?""+valueScale.getLabelForIndex(index,datasetIndex):"",index:index,datasetIndex:datasetIndex,x:element._model.x,y:element._model.y}}function getBaseModel(tooltipOpts){var globalDefaults=core_defaults.global;return{xPadding:tooltipOpts.xPadding,yPadding:tooltipOpts.yPadding,xAlign:tooltipOpts.xAlign,yAlign:tooltipOpts.yAlign,bodyFontColor:tooltipOpts.bodyFontColor,_bodyFontFamily:valueOrDefault$7(tooltipOpts.bodyFontFamily,globalDefaults.defaultFontFamily),_bodyFontStyle:valueOrDefault$7(tooltipOpts.bodyFontStyle,globalDefaults.defaultFontStyle),_bodyAlign:tooltipOpts.bodyAlign,bodyFontSize:valueOrDefault$7(tooltipOpts.bodyFontSize,globalDefaults.defaultFontSize),bodySpacing:tooltipOpts.bodySpacing,titleFontColor:tooltipOpts.titleFontColor,_titleFontFamily:valueOrDefault$7(tooltipOpts.titleFontFamily,globalDefaults.defaultFontFamily),_titleFontStyle:valueOrDefault$7(tooltipOpts.titleFontStyle,globalDefaults.defaultFontStyle),titleFontSize:valueOrDefault$7(tooltipOpts.titleFontSize,globalDefaults.defaultFontSize),_titleAlign:tooltipOpts.titleAlign,titleSpacing:tooltipOpts.titleSpacing,titleMarginBottom:tooltipOpts.titleMarginBottom,footerFontColor:tooltipOpts.footerFontColor,_footerFontFamily:valueOrDefault$7(tooltipOpts.footerFontFamily,globalDefaults.defaultFontFamily),_footerFontStyle:valueOrDefault$7(tooltipOpts.footerFontStyle,globalDefaults.defaultFontStyle),footerFontSize:valueOrDefault$7(tooltipOpts.footerFontSize,globalDefaults.defaultFontSize),_footerAlign:tooltipOpts.footerAlign,footerSpacing:tooltipOpts.footerSpacing,footerMarginTop:tooltipOpts.footerMarginTop,caretSize:tooltipOpts.caretSize,cornerRadius:tooltipOpts.cornerRadius,backgroundColor:tooltipOpts.backgroundColor,opacity:0,legendColorBackground:tooltipOpts.multiKeyBackground,displayColors:tooltipOpts.displayColors,borderColor:tooltipOpts.borderColor,borderWidth:tooltipOpts.borderWidth}}function getTooltipSize(tooltip,model){var ctx=tooltip._chart.ctx;var height=model.yPadding*2;var width=0;var body=model.body;var combinedBodyLength=body.reduce(function(count,bodyItem){return count+bodyItem.before.length+bodyItem.lines.length+bodyItem.after.length},0);combinedBodyLength+=model.beforeBody.length+model.afterBody.length;var titleLineCount=model.title.length;var footerLineCount=model.footer.length;var titleFontSize=model.titleFontSize;var bodyFontSize=model.bodyFontSize;var footerFontSize=model.footerFontSize;height+=titleLineCount*titleFontSize;height+=titleLineCount?(titleLineCount-1)*model.titleSpacing:0;height+=titleLineCount?model.titleMarginBottom:0;height+=combinedBodyLength*bodyFontSize;height+=combinedBodyLength?(combinedBodyLength-1)*model.bodySpacing:0;height+=footerLineCount?model.footerMarginTop:0;height+=footerLineCount*footerFontSize;height+=footerLineCount?(footerLineCount-1)*model.footerSpacing:0;var widthPadding=0;var maxLineWidth=function(line){width=Math.max(width,ctx.measureText(line).width+widthPadding)};ctx.font=helpers$1.fontString(titleFontSize,model._titleFontStyle,model._titleFontFamily);helpers$1.each(model.title,maxLineWidth);ctx.font=helpers$1.fontString(bodyFontSize,model._bodyFontStyle,model._bodyFontFamily);helpers$1.each(model.beforeBody.concat(model.afterBody),maxLineWidth);widthPadding=model.displayColors?bodyFontSize+2:0;helpers$1.each(body,function(bodyItem){helpers$1.each(bodyItem.before,maxLineWidth);helpers$1.each(bodyItem.lines,maxLineWidth);helpers$1.each(bodyItem.after,maxLineWidth)});widthPadding=0;ctx.font=helpers$1.fontString(footerFontSize,model._footerFontStyle,model._footerFontFamily);helpers$1.each(model.footer,maxLineWidth);width+=2*model.xPadding;return{width:width,height:height}}function determineAlignment(tooltip,size){var model=tooltip._model;var chart=tooltip._chart;var chartArea=tooltip._chart.chartArea;var xAlign="center";var yAlign="center";if(model.y<size.height){yAlign="top"}else if(model.y>chart.height-size.height){yAlign="bottom"}var lf,rf;var olf,orf;var yf;var midX=(chartArea.left+chartArea.right)/2;var midY=(chartArea.top+chartArea.bottom)/2;if(yAlign==="center"){lf=function(x){return x<=midX};rf=function(x){return x>midX}}else{lf=function(x){return x<=size.width/2};rf=function(x){return x>=chart.width-size.width/2}}olf=function(x){return x+size.width+model.caretSize+model.caretPadding>chart.width};orf=function(x){return x-size.width-model.caretSize-model.caretPadding<0};yf=function(y){return y<=midY?"top":"bottom"};if(lf(model.x)){xAlign="left";if(olf(model.x)){xAlign="center";yAlign=yf(model.y)}}else if(rf(model.x)){xAlign="right";if(orf(model.x)){xAlign="center";yAlign=yf(model.y)}}var opts=tooltip._options;return{xAlign:opts.xAlign?opts.xAlign:xAlign,yAlign:opts.yAlign?opts.yAlign:yAlign}}function getBackgroundPoint(vm,size,alignment,chart){var x=vm.x;var y=vm.y;var caretSize=vm.caretSize;var caretPadding=vm.caretPadding;var cornerRadius=vm.cornerRadius;var xAlign=alignment.xAlign;var yAlign=alignment.yAlign;var paddingAndSize=caretSize+caretPadding;var radiusAndPadding=cornerRadius+caretPadding;if(xAlign==="right"){x-=size.width}else if(xAlign==="center"){x-=size.width/2;if(x+size.width>chart.width){x=chart.width-size.width}if(x<0){x=0}}if(yAlign==="top"){y+=paddingAndSize}else if(yAlign==="bottom"){y-=size.height+paddingAndSize}else{y-=size.height/2}if(yAlign==="center"){if(xAlign==="left"){x+=paddingAndSize}else if(xAlign==="right"){x-=paddingAndSize}}else if(xAlign==="left"){x-=radiusAndPadding}else if(xAlign==="right"){x+=radiusAndPadding}return{x:x,y:y}}function getAlignedX(vm,align){return align==="center"?vm.x+vm.width/2:align==="right"?vm.x+vm.width-vm.xPadding:vm.x+vm.xPadding}function getBeforeAfterBodyLines(callback){return pushOrConcat([],splitNewlines(callback))}var exports$3=core_element.extend({initialize:function(){this._model=getBaseModel(this._options);this._lastActive=[]},getTitle:function(){var me=this;var opts=me._options;var callbacks=opts.callbacks;var beforeTitle=callbacks.beforeTitle.apply(me,arguments);var title=callbacks.title.apply(me,arguments);var afterTitle=callbacks.afterTitle.apply(me,arguments);var lines=[];lines=pushOrConcat(lines,splitNewlines(beforeTitle));lines=pushOrConcat(lines,splitNewlines(title));lines=pushOrConcat(lines,splitNewlines(afterTitle));return lines},getBeforeBody:function(){return getBeforeAfterBodyLines(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(tooltipItems,data){var me=this;var callbacks=me._options.callbacks;var bodyItems=[];helpers$1.each(tooltipItems,function(tooltipItem){var bodyItem={before:[],lines:[],after:[]};pushOrConcat(bodyItem.before,splitNewlines(callbacks.beforeLabel.call(me,tooltipItem,data)));pushOrConcat(bodyItem.lines,callbacks.label.call(me,tooltipItem,data));pushOrConcat(bodyItem.after,splitNewlines(callbacks.afterLabel.call(me,tooltipItem,data)));bodyItems.push(bodyItem)});return bodyItems},getAfterBody:function(){return getBeforeAfterBodyLines(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var me=this;var callbacks=me._options.callbacks;var beforeFooter=callbacks.beforeFooter.apply(me,arguments);var footer=callbacks.footer.apply(me,arguments);var afterFooter=callbacks.afterFooter.apply(me,arguments);var lines=[];lines=pushOrConcat(lines,splitNewlines(beforeFooter));lines=pushOrConcat(lines,splitNewlines(footer));lines=pushOrConcat(lines,splitNewlines(afterFooter));return lines},update:function(changed){var me=this;var opts=me._options;var existingModel=me._model;var model=me._model=getBaseModel(opts);var active=me._active;var data=me._data;var alignment={xAlign:existingModel.xAlign,yAlign:existingModel.yAlign};var backgroundPoint={x:existingModel.x,y:existingModel.y};var tooltipSize={width:existingModel.width,height:existingModel.height};var tooltipPosition={x:existingModel.caretX,y:existingModel.caretY};var i,len;if(active.length){model.opacity=1;var labelColors=[];var labelTextColors=[];tooltipPosition=positioners[opts.position].call(me,active,me._eventPosition);var tooltipItems=[];for(i=0,len=active.length;i<len;++i){tooltipItems.push(createTooltipItem(active[i]))}if(opts.filter){tooltipItems=tooltipItems.filter(function(a){return opts.filter(a,data)})}if(opts.itemSort){tooltipItems=tooltipItems.sort(function(a,b){return opts.itemSort(a,b,data)})}helpers$1.each(tooltipItems,function(tooltipItem){labelColors.push(opts.callbacks.labelColor.call(me,tooltipItem,me._chart));labelTextColors.push(opts.callbacks.labelTextColor.call(me,tooltipItem,me._chart))});model.title=me.getTitle(tooltipItems,data);model.beforeBody=me.getBeforeBody(tooltipItems,data);model.body=me.getBody(tooltipItems,data);model.afterBody=me.getAfterBody(tooltipItems,data);model.footer=me.getFooter(tooltipItems,data);model.x=tooltipPosition.x;model.y=tooltipPosition.y;model.caretPadding=opts.caretPadding;model.labelColors=labelColors;model.labelTextColors=labelTextColors;model.dataPoints=tooltipItems;tooltipSize=getTooltipSize(this,model);alignment=determineAlignment(this,tooltipSize);backgroundPoint=getBackgroundPoint(model,tooltipSize,alignment,me._chart)}else{model.opacity=0}model.xAlign=alignment.xAlign;model.yAlign=alignment.yAlign;model.x=backgroundPoint.x;model.y=backgroundPoint.y;model.width=tooltipSize.width;model.height=tooltipSize.height;model.caretX=tooltipPosition.x;model.caretY=tooltipPosition.y;me._model=model;if(changed&&opts.custom){opts.custom.call(me,model)}return me},drawCaret:function(tooltipPoint,size){var ctx=this._chart.ctx;var vm=this._view;var caretPosition=this.getCaretPosition(tooltipPoint,size,vm);ctx.lineTo(caretPosition.x1,caretPosition.y1);ctx.lineTo(caretPosition.x2,caretPosition.y2);ctx.lineTo(caretPosition.x3,caretPosition.y3)},getCaretPosition:function(tooltipPoint,size,vm){var x1,x2,x3,y1,y2,y3;var caretSize=vm.caretSize;var cornerRadius=vm.cornerRadius;var xAlign=vm.xAlign;var yAlign=vm.yAlign;var ptX=tooltipPoint.x;var ptY=tooltipPoint.y;var width=size.width;var height=size.height;if(yAlign==="center"){y2=ptY+height/2;if(xAlign==="left"){x1=ptX;x2=x1-caretSize;x3=x1;y1=y2+caretSize;y3=y2-caretSize}else{x1=ptX+width;x2=x1+caretSize;x3=x1;y1=y2-caretSize;y3=y2+caretSize}}else{if(xAlign==="left"){x2=ptX+cornerRadius+caretSize;x1=x2-caretSize;x3=x2+caretSize}else if(xAlign==="right"){x2=ptX+width-cornerRadius-caretSize;x1=x2-caretSize;x3=x2+caretSize}else{x2=vm.caretX;x1=x2-caretSize;x3=x2+caretSize}if(yAlign==="top"){y1=ptY;y2=y1-caretSize;y3=y1}else{y1=ptY+height;y2=y1+caretSize;y3=y1;var tmp=x3;x3=x1;x1=tmp}}return{x1:x1,x2:x2,x3:x3,y1:y1,y2:y2,y3:y3}},drawTitle:function(pt,vm,ctx){var title=vm.title;if(title.length){pt.x=getAlignedX(vm,vm._titleAlign);ctx.textAlign=vm._titleAlign;ctx.textBaseline="top";var titleFontSize=vm.titleFontSize;var titleSpacing=vm.titleSpacing;ctx.fillStyle=vm.titleFontColor;ctx.font=helpers$1.fontString(titleFontSize,vm._titleFontStyle,vm._titleFontFamily);var i,len;for(i=0,len=title.length;i<len;++i){ctx.fillText(title[i],pt.x,pt.y);pt.y+=titleFontSize+titleSpacing;if(i+1===title.length){pt.y+=vm.titleMarginBottom-titleSpacing}}}},drawBody:function(pt,vm,ctx){var bodyFontSize=vm.bodyFontSize;var bodySpacing=vm.bodySpacing;var bodyAlign=vm._bodyAlign;var body=vm.body;var drawColorBoxes=vm.displayColors;var labelColors=vm.labelColors;var xLinePadding=0;var colorX=drawColorBoxes?getAlignedX(vm,"left"):0;var textColor;ctx.textAlign=bodyAlign;ctx.textBaseline="top";ctx.font=helpers$1.fontString(bodyFontSize,vm._bodyFontStyle,vm._bodyFontFamily);pt.x=getAlignedX(vm,bodyAlign);var fillLineOfText=function(line){ctx.fillText(line,pt.x+xLinePadding,pt.y);pt.y+=bodyFontSize+bodySpacing};ctx.fillStyle=vm.bodyFontColor;helpers$1.each(vm.beforeBody,fillLineOfText);xLinePadding=drawColorBoxes&&bodyAlign!=="right"?bodyAlign==="center"?bodyFontSize/2+1:bodyFontSize+2:0;helpers$1.each(body,function(bodyItem,i){textColor=vm.labelTextColors[i];ctx.fillStyle=textColor;helpers$1.each(bodyItem.before,fillLineOfText);helpers$1.each(bodyItem.lines,function(line){if(drawColorBoxes){ctx.fillStyle=vm.legendColorBackground;ctx.fillRect(colorX,pt.y,bodyFontSize,bodyFontSize);ctx.lineWidth=1;ctx.strokeStyle=labelColors[i].borderColor;ctx.strokeRect(colorX,pt.y,bodyFontSize,bodyFontSize);ctx.fillStyle=labelColors[i].backgroundColor;ctx.fillRect(colorX+1,pt.y+1,bodyFontSize-2,bodyFontSize-2);ctx.fillStyle=textColor}fillLineOfText(line)});helpers$1.each(bodyItem.after,fillLineOfText)});xLinePadding=0;helpers$1.each(vm.afterBody,fillLineOfText);pt.y-=bodySpacing},drawFooter:function(pt,vm,ctx){var footer=vm.footer;if(footer.length){pt.x=getAlignedX(vm,vm._footerAlign);pt.y+=vm.footerMarginTop;ctx.textAlign=vm._footerAlign;ctx.textBaseline="top";ctx.fillStyle=vm.footerFontColor;ctx.font=helpers$1.fontString(vm.footerFontSize,vm._footerFontStyle,vm._footerFontFamily);helpers$1.each(footer,function(line){ctx.fillText(line,pt.x,pt.y);pt.y+=vm.footerFontSize+vm.footerSpacing})}},drawBackground:function(pt,vm,ctx,tooltipSize){ctx.fillStyle=vm.backgroundColor;ctx.strokeStyle=vm.borderColor;ctx.lineWidth=vm.borderWidth;var xAlign=vm.xAlign;var yAlign=vm.yAlign;var x=pt.x;var y=pt.y;var width=tooltipSize.width;var height=tooltipSize.height;var radius=vm.cornerRadius;ctx.beginPath();ctx.moveTo(x+radius,y);if(yAlign==="top"){this.drawCaret(pt,tooltipSize)}ctx.lineTo(x+width-radius,y);ctx.quadraticCurveTo(x+width,y,x+width,y+radius);if(yAlign==="center"&&xAlign==="right"){this.drawCaret(pt,tooltipSize)}ctx.lineTo(x+width,y+height-radius);ctx.quadraticCurveTo(x+width,y+height,x+width-radius,y+height);if(yAlign==="bottom"){this.drawCaret(pt,tooltipSize)}ctx.lineTo(x+radius,y+height);ctx.quadraticCurveTo(x,y+height,x,y+height-radius);if(yAlign==="center"&&xAlign==="left"){this.drawCaret(pt,tooltipSize)}ctx.lineTo(x,y+radius);ctx.quadraticCurveTo(x,y,x+radius,y);ctx.closePath();ctx.fill();if(vm.borderWidth>0){ctx.stroke()}},draw:function(){var ctx=this._chart.ctx;var vm=this._view;if(vm.opacity===0){return}var tooltipSize={width:vm.width,height:vm.height};var pt={x:vm.x,y:vm.y};var opacity=Math.abs(vm.opacity<.001)?0:vm.opacity;var hasTooltipContent=vm.title.length||vm.beforeBody.length||vm.body.length||vm.afterBody.length||vm.footer.length;if(this._options.enabled&&hasTooltipContent){ctx.save();ctx.globalAlpha=opacity;this.drawBackground(pt,vm,ctx,tooltipSize);pt.y+=vm.yPadding;this.drawTitle(pt,vm,ctx);this.drawBody(pt,vm,ctx);this.drawFooter(pt,vm,ctx);ctx.restore()}},handleEvent:function(e){var me=this;var options=me._options;var changed=false;me._lastActive=me._lastActive||[];if(e.type==="mouseout"){me._active=[]}else{me._active=me._chart.getElementsAtEventForMode(e,options.mode,options)}changed=!helpers$1.arrayEquals(me._active,me._lastActive);if(changed){me._lastActive=me._active;if(options.enabled||options.custom){me._eventPosition={x:e.x,y:e.y};me.update(true);me.pivot()}}return changed}});var positioners_1=positioners;var core_tooltip=exports$3;core_tooltip.positioners=positioners_1;var valueOrDefault$8=helpers$1.valueOrDefault;core_defaults._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:true,animationDuration:400},onClick:null,maintainAspectRatio:true,responsive:true,responsiveAnimationDuration:0});function mergeScaleConfig(){return helpers$1.merge({},[].slice.call(arguments),{merger:function(key,target,source,options){if(key==="xAxes"||key==="yAxes"){var slen=source[key].length;var i,type,scale;if(!target[key]){target[key]=[]}for(i=0;i<slen;++i){scale=source[key][i];type=valueOrDefault$8(scale.type,key==="xAxes"?"category":"linear");if(i>=target[key].length){target[key].push({})}if(!target[key][i].type||scale.type&&scale.type!==target[key][i].type){helpers$1.merge(target[key][i],[core_scaleService.getScaleDefaults(type),scale])}else{helpers$1.merge(target[key][i],scale)}}}else{helpers$1._merger(key,target,source,options)}}})}function mergeConfig(){return helpers$1.merge({},[].slice.call(arguments),{merger:function(key,target,source,options){var tval=target[key]||{};var sval=source[key];if(key==="scales"){target[key]=mergeScaleConfig(tval,sval)}else if(key==="scale"){target[key]=helpers$1.merge(tval,[core_scaleService.getScaleDefaults(sval.type),sval])}else{helpers$1._merger(key,target,source,options)}}})}function initConfig(config){config=config||{};var data=config.data=config.data||{};data.datasets=data.datasets||[];data.labels=data.labels||[];config.options=mergeConfig(core_defaults.global,core_defaults[config.type],config.options||{});return config}function updateConfig(chart){var newOptions=chart.options;helpers$1.each(chart.scales,function(scale){core_layouts.removeBox(chart,scale)});newOptions=mergeConfig(core_defaults.global,core_defaults[chart.config.type],newOptions);chart.options=chart.config.options=newOptions;chart.ensureScalesHaveIDs();chart.buildOrUpdateScales();chart.tooltip._options=newOptions.tooltips;chart.tooltip.initialize()}function positionIsHorizontal(position){return position==="top"||position==="bottom"}var Chart=function(item,config){this.construct(item,config);return this};helpers$1.extend(Chart.prototype,{construct:function(item,config){var me=this;config=initConfig(config);var context=platform.acquireContext(item,config);var canvas=context&&context.canvas;var height=canvas&&canvas.height;var width=canvas&&canvas.width;me.id=helpers$1.uid();me.ctx=context;me.canvas=canvas;me.config=config;me.width=width;me.height=height;me.aspectRatio=height?width/height:null;me.options=config.options;me._bufferedRender=false;me.chart=me;me.controller=me;Chart.instances[me.id]=me;Object.defineProperty(me,"data",{get:function(){return me.config.data},set:function(value){me.config.data=value}});if(!context||!canvas){console.error("Failed to create chart: can't acquire context from the given item");return}me.initialize();me.update()},initialize:function(){var me=this;core_plugins.notify(me,"beforeInit");helpers$1.retinaScale(me,me.options.devicePixelRatio);me.bindEvents();if(me.options.responsive){me.resize(true)}me.ensureScalesHaveIDs();me.buildOrUpdateScales();me.initToolTip();core_plugins.notify(me,"afterInit");return me},clear:function(){helpers$1.canvas.clear(this);return this},stop:function(){core_animations.cancelAnimation(this);return this},resize:function(silent){var me=this;var options=me.options;var canvas=me.canvas;var aspectRatio=options.maintainAspectRatio&&me.aspectRatio||null;var newWidth=Math.max(0,Math.floor(helpers$1.getMaximumWidth(canvas)));var newHeight=Math.max(0,Math.floor(aspectRatio?newWidth/aspectRatio:helpers$1.getMaximumHeight(canvas)));if(me.width===newWidth&&me.height===newHeight){return}canvas.width=me.width=newWidth;canvas.height=me.height=newHeight;canvas.style.width=newWidth+"px";canvas.style.height=newHeight+"px";helpers$1.retinaScale(me,options.devicePixelRatio);if(!silent){var newSize={width:newWidth,height:newHeight};core_plugins.notify(me,"resize",[newSize]);if(options.onResize){options.onResize(me,newSize)}me.stop();me.update({duration:options.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var options=this.options;var scalesOptions=options.scales||{};var scaleOptions=options.scale;helpers$1.each(scalesOptions.xAxes,function(xAxisOptions,index){xAxisOptions.id=xAxisOptions.id||"x-axis-"+index});helpers$1.each(scalesOptions.yAxes,function(yAxisOptions,index){yAxisOptions.id=yAxisOptions.id||"y-axis-"+index});if(scaleOptions){scaleOptions.id=scaleOptions.id||"scale"}},buildOrUpdateScales:function(){var me=this;var options=me.options;var scales=me.scales||{};var items=[];var updated=Object.keys(scales).reduce(function(obj,id){obj[id]=false;return obj},{});if(options.scales){items=items.concat((options.scales.xAxes||[]).map(function(xAxisOptions){return{options:xAxisOptions,dtype:"category",dposition:"bottom"}}),(options.scales.yAxes||[]).map(function(yAxisOptions){return{options:yAxisOptions,dtype:"linear",dposition:"left"}}))}if(options.scale){items.push({options:options.scale,dtype:"radialLinear",isDefault:true,dposition:"chartArea"})}helpers$1.each(items,function(item){var scaleOptions=item.options;var id=scaleOptions.id;var scaleType=valueOrDefault$8(scaleOptions.type,item.dtype);if(positionIsHorizontal(scaleOptions.position)!==positionIsHorizontal(item.dposition)){scaleOptions.position=item.dposition}updated[id]=true;var scale=null;if(id in scales&&scales[id].type===scaleType){scale=scales[id];scale.options=scaleOptions;scale.ctx=me.ctx;scale.chart=me}else{var scaleClass=core_scaleService.getScaleConstructor(scaleType);if(!scaleClass){return}scale=new scaleClass({id:id,type:scaleType,options:scaleOptions,ctx:me.ctx,chart:me});scales[scale.id]=scale}scale.mergeTicksOptions();if(item.isDefault){me.scale=scale}});helpers$1.each(updated,function(hasUpdated,id){if(!hasUpdated){delete scales[id]}});me.scales=scales;core_scaleService.addScalesToLayout(this)},buildOrUpdateControllers:function(){var me=this;var newControllers=[];helpers$1.each(me.data.datasets,function(dataset,datasetIndex){var meta=me.getDatasetMeta(datasetIndex);var type=dataset.type||me.config.type;if(meta.type&&meta.type!==type){me.destroyDatasetMeta(datasetIndex);meta=me.getDatasetMeta(datasetIndex)}meta.type=type;if(meta.controller){meta.controller.updateIndex(datasetIndex);meta.controller.linkScales()}else{var ControllerClass=controllers[meta.type];if(ControllerClass===undefined){throw new Error('"'+meta.type+'" is not a chart type.')}meta.controller=new ControllerClass(me,datasetIndex);newControllers.push(meta.controller)}},me);return newControllers},resetElements:function(){var me=this;helpers$1.each(me.data.datasets,function(dataset,datasetIndex){me.getDatasetMeta(datasetIndex).controller.reset()},me)},reset:function(){this.resetElements();this.tooltip.initialize()},update:function(config){var me=this;if(!config||typeof config!=="object"){config={duration:config,lazy:arguments[1]}}updateConfig(me);core_plugins._invalidate(me);if(core_plugins.notify(me,"beforeUpdate")===false){return}me.tooltip._data=me.data;var newControllers=me.buildOrUpdateControllers();helpers$1.each(me.data.datasets,function(dataset,datasetIndex){me.getDatasetMeta(datasetIndex).controller.buildOrUpdateElements()},me);me.updateLayout();if(me.options.animation&&me.options.animation.duration){helpers$1.each(newControllers,function(controller){controller.reset()})}me.updateDatasets();me.tooltip.initialize();me.lastActive=[];core_plugins.notify(me,"afterUpdate");if(me._bufferedRender){me._bufferedRequest={duration:config.duration,easing:config.easing,lazy:config.lazy}}else{me.render(config)}},updateLayout:function(){var me=this;if(core_plugins.notify(me,"beforeLayout")===false){return}core_layouts.update(this,this.width,this.height);core_plugins.notify(me,"afterScaleUpdate");core_plugins.notify(me,"afterLayout")},updateDatasets:function(){var me=this;if(core_plugins.notify(me,"beforeDatasetsUpdate")===false){return}for(var i=0,ilen=me.data.datasets.length;i<ilen;++i){me.updateDataset(i)}core_plugins.notify(me,"afterDatasetsUpdate")},updateDataset:function(index){var me=this;var meta=me.getDatasetMeta(index);var args={meta:meta,index:index};if(core_plugins.notify(me,"beforeDatasetUpdate",[args])===false){return}meta.controller.update();core_plugins.notify(me,"afterDatasetUpdate",[args])},render:function(config){var me=this;if(!config||typeof config!=="object"){config={duration:config,lazy:arguments[1]}}var animationOptions=me.options.animation;var duration=valueOrDefault$8(config.duration,animationOptions&&animationOptions.duration);var lazy=config.lazy;if(core_plugins.notify(me,"beforeRender")===false){return}var onComplete=function(animation){core_plugins.notify(me,"afterRender");helpers$1.callback(animationOptions&&animationOptions.onComplete,[animation],me)};if(animationOptions&&duration){var animation=new core_animation({numSteps:duration/16.66,easing:config.easing||animationOptions.easing,render:function(chart,animationObject){var easingFunction=helpers$1.easing.effects[animationObject.easing];var currentStep=animationObject.currentStep;var stepDecimal=currentStep/animationObject.numSteps;chart.draw(easingFunction(stepDecimal),stepDecimal,currentStep)},onAnimationProgress:animationOptions.onProgress,onAnimationComplete:onComplete});core_animations.addAnimation(me,animation,duration,lazy)}else{me.draw();onComplete(new core_animation({numSteps:0,chart:me}))}return me},draw:function(easingValue){var me=this;me.clear();if(helpers$1.isNullOrUndef(easingValue)){easingValue=1}me.transition(easingValue);if(me.width<=0||me.height<=0){return}if(core_plugins.notify(me,"beforeDraw",[easingValue])===false){return}helpers$1.each(me.boxes,function(box){box.draw(me.chartArea)},me);me.drawDatasets(easingValue);me._drawTooltip(easingValue);core_plugins.notify(me,"afterDraw",[easingValue])},transition:function(easingValue){var me=this;for(var i=0,ilen=(me.data.datasets||[]).length;i<ilen;++i){if(me.isDatasetVisible(i)){me.getDatasetMeta(i).controller.transition(easingValue)}}me.tooltip.transition(easingValue)},drawDatasets:function(easingValue){var me=this;if(core_plugins.notify(me,"beforeDatasetsDraw",[easingValue])===false){return}for(var i=(me.data.datasets||[]).length-1;i>=0;--i){if(me.isDatasetVisible(i)){me.drawDataset(i,easingValue)}}core_plugins.notify(me,"afterDatasetsDraw",[easingValue])},drawDataset:function(index,easingValue){var me=this;var meta=me.getDatasetMeta(index);var args={meta:meta,index:index,easingValue:easingValue};if(core_plugins.notify(me,"beforeDatasetDraw",[args])===false){return}meta.controller.draw(easingValue);core_plugins.notify(me,"afterDatasetDraw",[args])},_drawTooltip:function(easingValue){var me=this;var tooltip=me.tooltip;var args={tooltip:tooltip,easingValue:easingValue};if(core_plugins.notify(me,"beforeTooltipDraw",[args])===false){return}tooltip.draw();core_plugins.notify(me,"afterTooltipDraw",[args])},getElementAtEvent:function(e){return core_interaction.modes.single(this,e)},getElementsAtEvent:function(e){return core_interaction.modes.label(this,e,{intersect:true})},getElementsAtXAxis:function(e){return core_interaction.modes["x-axis"](this,e,{intersect:true})},getElementsAtEventForMode:function(e,mode,options){var method=core_interaction.modes[mode];if(typeof method==="function"){return method(this,e,options)}return[]},getDatasetAtEvent:function(e){return core_interaction.modes.dataset(this,e,{intersect:true})},getDatasetMeta:function(datasetIndex){var me=this;var dataset=me.data.datasets[datasetIndex];if(!dataset._meta){dataset._meta={}}var meta=dataset._meta[me.id];if(!meta){meta=dataset._meta[me.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null}}return meta},getVisibleDatasetCount:function(){var count=0;for(var i=0,ilen=this.data.datasets.length;i<ilen;++i){if(this.isDatasetVisible(i)){count++}}return count},isDatasetVisible:function(datasetIndex){var meta=this.getDatasetMeta(datasetIndex);return typeof meta.hidden==="boolean"?!meta.hidden:!this.data.datasets[datasetIndex].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(datasetIndex){var id=this.id;var dataset=this.data.datasets[datasetIndex];var meta=dataset._meta&&dataset._meta[id];if(meta){meta.controller.destroy();delete dataset._meta[id]}},destroy:function(){var me=this;var canvas=me.canvas;var i,ilen;me.stop();for(i=0,ilen=me.data.datasets.length;i<ilen;++i){me.destroyDatasetMeta(i)}if(canvas){me.unbindEvents();helpers$1.canvas.clear(me);platform.releaseContext(me.ctx);me.canvas=null;me.ctx=null}core_plugins.notify(me,"destroy");delete Chart.instances[me.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var me=this;me.tooltip=new core_tooltip({_chart:me,_chartInstance:me,_data:me.data,_options:me.options.tooltips},me)},bindEvents:function(){var me=this;var listeners=me._listeners={};var listener=function(){me.eventHandler.apply(me,arguments)};helpers$1.each(me.options.events,function(type){platform.addEventListener(me,type,listener);listeners[type]=listener});if(me.options.responsive){listener=function(){me.resize()};platform.addEventListener(me,"resize",listener);listeners.resize=listener}},unbindEvents:function(){var me=this;var listeners=me._listeners;if(!listeners){return}delete me._listeners;helpers$1.each(listeners,function(listener,type){platform.removeEventListener(me,type,listener)})},updateHoverStyle:function(elements,mode,enabled){var method=enabled?"setHoverStyle":"removeHoverStyle";var element,i,ilen;for(i=0,ilen=elements.length;i<ilen;++i){element=elements[i];if(element){this.getDatasetMeta(element._datasetIndex).controller[method](element)}}},eventHandler:function(e){var me=this;var tooltip=me.tooltip;if(core_plugins.notify(me,"beforeEvent",[e])===false){return}me._bufferedRender=true;me._bufferedRequest=null;var changed=me.handleEvent(e);if(tooltip){changed=tooltip._start?tooltip.handleEvent(e):changed|tooltip.handleEvent(e)}core_plugins.notify(me,"afterEvent",[e]);var bufferedRequest=me._bufferedRequest;if(bufferedRequest){me.render(bufferedRequest)}else if(changed&&!me.animating){me.stop();me.render({duration:me.options.hover.animationDuration,lazy:true})}me._bufferedRender=false;me._bufferedRequest=null;return me},handleEvent:function(e){var me=this;var options=me.options||{};var hoverOptions=options.hover;var changed=false;me.lastActive=me.lastActive||[];if(e.type==="mouseout"){me.active=[]}else{me.active=me.getElementsAtEventForMode(e,hoverOptions.mode,hoverOptions)}helpers$1.callback(options.onHover||options.hover.onHover,[e.native,me.active],me);if(e.type==="mouseup"||e.type==="click"){if(options.onClick){options.onClick.call(me,e.native,me.active)}}if(me.lastActive.length){me.updateHoverStyle(me.lastActive,hoverOptions.mode,false)}if(me.active.length&&hoverOptions.mode){me.updateHoverStyle(me.active,hoverOptions.mode,true)}changed=!helpers$1.arrayEquals(me.active,me.lastActive);me.lastActive=me.active;return changed}});Chart.instances={};var core_controller=Chart;Chart.Controller=Chart;Chart.types={};helpers$1.configMerge=mergeConfig;helpers$1.scaleMerge=mergeScaleConfig;var core_helpers=function(){helpers$1.where=function(collection,filterCallback){if(helpers$1.isArray(collection)&&Array.prototype.filter){return collection.filter(filterCallback)}var filtered=[];helpers$1.each(collection,function(item){if(filterCallback(item)){filtered.push(item)}});return filtered};helpers$1.findIndex=Array.prototype.findIndex?function(array,callback,scope){return array.findIndex(callback,scope)}:function(array,callback,scope){scope=scope===undefined?array:scope;for(var i=0,ilen=array.length;i<ilen;++i){if(callback.call(scope,array[i],i,array)){return i}}return-1};helpers$1.findNextWhere=function(arrayToSearch,filterCallback,startIndex){if(helpers$1.isNullOrUndef(startIndex)){startIndex=-1}for(var i=startIndex+1;i<arrayToSearch.length;i++){var currentItem=arrayToSearch[i];if(filterCallback(currentItem)){return currentItem}}};helpers$1.findPreviousWhere=function(arrayToSearch,filterCallback,startIndex){if(helpers$1.isNullOrUndef(startIndex)){startIndex=arrayToSearch.length}for(var i=startIndex-1;i>=0;i--){var currentItem=arrayToSearch[i];if(filterCallback(currentItem)){return currentItem}}};helpers$1.isNumber=function(n){return!isNaN(parseFloat(n))&&isFinite(n)};helpers$1.almostEquals=function(x,y,epsilon){return Math.abs(x-y)<epsilon};helpers$1.almostWhole=function(x,epsilon){var rounded=Math.round(x);return rounded-epsilon<x&&rounded+epsilon>x};helpers$1.max=function(array){return array.reduce(function(max,value){if(!isNaN(value)){return Math.max(max,value)}return max},Number.NEGATIVE_INFINITY)};helpers$1.min=function(array){return array.reduce(function(min,value){if(!isNaN(value)){return Math.min(min,value)}return min},Number.POSITIVE_INFINITY)};helpers$1.sign=Math.sign?function(x){return Math.sign(x)}:function(x){x=+x;if(x===0||isNaN(x)){return x}return x>0?1:-1};helpers$1.log10=Math.log10?function(x){return Math.log10(x)}:function(x){var exponent=Math.log(x)*Math.LOG10E;var powerOf10=Math.round(exponent);var isPowerOf10=x===Math.pow(10,powerOf10);return isPowerOf10?powerOf10:exponent};helpers$1.toRadians=function(degrees){return degrees*(Math.PI/180)};helpers$1.toDegrees=function(radians){return radians*(180/Math.PI)};helpers$1._decimalPlaces=function(x){if(!helpers$1.isFinite(x)){return}var e=1;var p=0;while(Math.round(x*e)/e!==x){e*=10;p++}return p};helpers$1.getAngleFromPoint=function(centrePoint,anglePoint){var distanceFromXCenter=anglePoint.x-centrePoint.x;var distanceFromYCenter=anglePoint.y-centrePoint.y;var radialDistanceFromCenter=Math.sqrt(distanceFromXCenter*distanceFromXCenter+distanceFromYCenter*distanceFromYCenter);var angle=Math.atan2(distanceFromYCenter,distanceFromXCenter);if(angle<-.5*Math.PI){angle+=2*Math.PI}return{angle:angle,distance:radialDistanceFromCenter}};helpers$1.distanceBetweenPoints=function(pt1,pt2){return Math.sqrt(Math.pow(pt2.x-pt1.x,2)+Math.pow(pt2.y-pt1.y,2))};helpers$1.aliasPixel=function(pixelWidth){return pixelWidth%2===0?0:.5};helpers$1._alignPixel=function(chart,pixel,width){var devicePixelRatio=chart.currentDevicePixelRatio;var halfWidth=width/2;return Math.round((pixel-halfWidth)*devicePixelRatio)/devicePixelRatio+halfWidth};helpers$1.splineCurve=function(firstPoint,middlePoint,afterPoint,t){var previous=firstPoint.skip?middlePoint:firstPoint;var current=middlePoint;var next=afterPoint.skip?middlePoint:afterPoint;var d01=Math.sqrt(Math.pow(current.x-previous.x,2)+Math.pow(current.y-previous.y,2));var d12=Math.sqrt(Math.pow(next.x-current.x,2)+Math.pow(next.y-current.y,2));var s01=d01/(d01+d12);var s12=d12/(d01+d12);s01=isNaN(s01)?0:s01;s12=isNaN(s12)?0:s12;var fa=t*s01;var fb=t*s12;return{previous:{x:current.x-fa*(next.x-previous.x),y:current.y-fa*(next.y-previous.y)},next:{x:current.x+fb*(next.x-previous.x),y:current.y+fb*(next.y-previous.y)}}};helpers$1.EPSILON=Number.EPSILON||1e-14;helpers$1.splineCurveMonotone=function(points){var pointsWithTangents=(points||[]).map(function(point){return{model:point._model,deltaK:0,mK:0}});var pointsLen=pointsWithTangents.length;var i,pointBefore,pointCurrent,pointAfter;for(i=0;i<pointsLen;++i){pointCurrent=pointsWithTangents[i];if(pointCurrent.model.skip){continue}pointBefore=i>0?pointsWithTangents[i-1]:null;pointAfter=i<pointsLen-1?pointsWithTangents[i+1]:null;if(pointAfter&&!pointAfter.model.skip){var slopeDeltaX=pointAfter.model.x-pointCurrent.model.x;pointCurrent.deltaK=slopeDeltaX!==0?(pointAfter.model.y-pointCurrent.model.y)/slopeDeltaX:0}if(!pointBefore||pointBefore.model.skip){pointCurrent.mK=pointCurrent.deltaK}else if(!pointAfter||pointAfter.model.skip){pointCurrent.mK=pointBefore.deltaK}else if(this.sign(pointBefore.deltaK)!==this.sign(pointCurrent.deltaK)){pointCurrent.mK=0}else{pointCurrent.mK=(pointBefore.deltaK+pointCurrent.deltaK)/2}}var alphaK,betaK,tauK,squaredMagnitude;for(i=0;i<pointsLen-1;++i){pointCurrent=pointsWithTangents[i];pointAfter=pointsWithTangents[i+1];if(pointCurrent.model.skip||pointAfter.model.skip){continue}if(helpers$1.almostEquals(pointCurrent.deltaK,0,this.EPSILON)){pointCurrent.mK=pointAfter.mK=0;continue}alphaK=pointCurrent.mK/pointCurrent.deltaK;betaK=pointAfter.mK/pointCurrent.deltaK;squaredMagnitude=Math.pow(alphaK,2)+Math.pow(betaK,2);if(squaredMagnitude<=9){continue}tauK=3/Math.sqrt(squaredMagnitude);pointCurrent.mK=alphaK*tauK*pointCurrent.deltaK;pointAfter.mK=betaK*tauK*pointCurrent.deltaK}var deltaX;for(i=0;i<pointsLen;++i){pointCurrent=pointsWithTangents[i];if(pointCurrent.model.skip){continue}pointBefore=i>0?pointsWithTangents[i-1]:null;pointAfter=i<pointsLen-1?pointsWithTangents[i+1]:null;if(pointBefore&&!pointBefore.model.skip){deltaX=(pointCurrent.model.x-pointBefore.model.x)/3;pointCurrent.model.controlPointPreviousX=pointCurrent.model.x-deltaX;pointCurrent.model.controlPointPreviousY=pointCurrent.model.y-deltaX*pointCurrent.mK}if(pointAfter&&!pointAfter.model.skip){deltaX=(pointAfter.model.x-pointCurrent.model.x)/3;pointCurrent.model.controlPointNextX=pointCurrent.model.x+deltaX;pointCurrent.model.controlPointNextY=pointCurrent.model.y+deltaX*pointCurrent.mK}}};helpers$1.nextItem=function(collection,index,loop){if(loop){return index>=collection.length-1?collection[0]:collection[index+1]}return index>=collection.length-1?collection[collection.length-1]:collection[index+1]};helpers$1.previousItem=function(collection,index,loop){if(loop){return index<=0?collection[collection.length-1]:collection[index-1]}return index<=0?collection[0]:collection[index-1]};helpers$1.niceNum=function(range,round){var exponent=Math.floor(helpers$1.log10(range));var fraction=range/Math.pow(10,exponent);var niceFraction;if(round){if(fraction<1.5){niceFraction=1}else if(fraction<3){niceFraction=2}else if(fraction<7){niceFraction=5}else{niceFraction=10}}else if(fraction<=1){niceFraction=1}else if(fraction<=2){niceFraction=2}else if(fraction<=5){niceFraction=5}else{niceFraction=10}return niceFraction*Math.pow(10,exponent)};helpers$1.requestAnimFrame=function(){if(typeof window==="undefined"){return function(callback){callback()}}return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){return window.setTimeout(callback,1e3/60)}}();helpers$1.getRelativePosition=function(evt,chart){var mouseX,mouseY;var e=evt.originalEvent||evt;var canvas=evt.target||evt.srcElement;var boundingRect=canvas.getBoundingClientRect();var touches=e.touches;if(touches&&touches.length>0){mouseX=touches[0].clientX;mouseY=touches[0].clientY}else{mouseX=e.clientX;mouseY=e.clientY}var paddingLeft=parseFloat(helpers$1.getStyle(canvas,"padding-left"));var paddingTop=parseFloat(helpers$1.getStyle(canvas,"padding-top"));var paddingRight=parseFloat(helpers$1.getStyle(canvas,"padding-right"));var paddingBottom=parseFloat(helpers$1.getStyle(canvas,"padding-bottom"));var width=boundingRect.right-boundingRect.left-paddingLeft-paddingRight;var height=boundingRect.bottom-boundingRect.top-paddingTop-paddingBottom;mouseX=Math.round((mouseX-boundingRect.left-paddingLeft)/width*canvas.width/chart.currentDevicePixelRatio);mouseY=Math.round((mouseY-boundingRect.top-paddingTop)/height*canvas.height/chart.currentDevicePixelRatio);return{x:mouseX,y:mouseY}};function parseMaxStyle(styleValue,node,parentProperty){var valueInPixels;if(typeof styleValue==="string"){valueInPixels=parseInt(styleValue,10);if(styleValue.indexOf("%")!==-1){valueInPixels=valueInPixels/100*node.parentNode[parentProperty]}}else{valueInPixels=styleValue}return valueInPixels}function isConstrainedValue(value){return value!==undefined&&value!==null&&value!=="none"}function getConstraintDimension(domNode,maxStyle,percentageProperty){var view=document.defaultView;var parentNode=helpers$1._getParentNode(domNode);var constrainedNode=view.getComputedStyle(domNode)[maxStyle];var constrainedContainer=view.getComputedStyle(parentNode)[maxStyle];var hasCNode=isConstrainedValue(constrainedNode);var hasCContainer=isConstrainedValue(constrainedContainer);var infinity=Number.POSITIVE_INFINITY;if(hasCNode||hasCContainer){return Math.min(hasCNode?parseMaxStyle(constrainedNode,domNode,percentageProperty):infinity,hasCContainer?parseMaxStyle(constrainedContainer,parentNode,percentageProperty):infinity)}return"none"}helpers$1.getConstraintWidth=function(domNode){return getConstraintDimension(domNode,"max-width","clientWidth")};helpers$1.getConstraintHeight=function(domNode){return getConstraintDimension(domNode,"max-height","clientHeight")};helpers$1._calculatePadding=function(container,padding,parentDimension){padding=helpers$1.getStyle(container,padding);return padding.indexOf("%")>-1?parentDimension*parseInt(padding,10)/100:parseInt(padding,10)};helpers$1._getParentNode=function(domNode){var parent=domNode.parentNode;if(parent&&parent.toString()==="[object ShadowRoot]"){parent=parent.host}return parent};helpers$1.getMaximumWidth=function(domNode){var container=helpers$1._getParentNode(domNode);if(!container){return domNode.clientWidth}var clientWidth=container.clientWidth;var paddingLeft=helpers$1._calculatePadding(container,"padding-left",clientWidth);var paddingRight=helpers$1._calculatePadding(container,"padding-right",clientWidth);var w=clientWidth-paddingLeft-paddingRight;var cw=helpers$1.getConstraintWidth(domNode);return isNaN(cw)?w:Math.min(w,cw)};helpers$1.getMaximumHeight=function(domNode){var container=helpers$1._getParentNode(domNode);if(!container){return domNode.clientHeight}var clientHeight=container.clientHeight;var paddingTop=helpers$1._calculatePadding(container,"padding-top",clientHeight);var paddingBottom=helpers$1._calculatePadding(container,"padding-bottom",clientHeight);var h=clientHeight-paddingTop-paddingBottom;var ch=helpers$1.getConstraintHeight(domNode);return isNaN(ch)?h:Math.min(h,ch)};helpers$1.getStyle=function(el,property){return el.currentStyle?el.currentStyle[property]:document.defaultView.getComputedStyle(el,null).getPropertyValue(property)};helpers$1.retinaScale=function(chart,forceRatio){var pixelRatio=chart.currentDevicePixelRatio=forceRatio||typeof window!=="undefined"&&window.devicePixelRatio||1;if(pixelRatio===1){return}var canvas=chart.canvas;var height=chart.height;var width=chart.width;canvas.height=height*pixelRatio;canvas.width=width*pixelRatio;chart.ctx.scale(pixelRatio,pixelRatio);if(!canvas.style.height&&!canvas.style.width){canvas.style.height=height+"px";canvas.style.width=width+"px"}};helpers$1.fontString=function(pixelSize,fontStyle,fontFamily){return fontStyle+" "+pixelSize+"px "+fontFamily};helpers$1.longestText=function(ctx,font,arrayOfThings,cache){cache=cache||{};var data=cache.data=cache.data||{};var gc=cache.garbageCollect=cache.garbageCollect||[];if(cache.font!==font){data=cache.data={};gc=cache.garbageCollect=[];cache.font=font}ctx.font=font;var longest=0;helpers$1.each(arrayOfThings,function(thing){if(thing!==undefined&&thing!==null&&helpers$1.isArray(thing)!==true){longest=helpers$1.measureText(ctx,data,gc,longest,thing)}else if(helpers$1.isArray(thing)){helpers$1.each(thing,function(nestedThing){if(nestedThing!==undefined&&nestedThing!==null&&!helpers$1.isArray(nestedThing)){longest=helpers$1.measureText(ctx,data,gc,longest,nestedThing)}})}});var gcLen=gc.length/2;if(gcLen>arrayOfThings.length){for(var i=0;i<gcLen;i++){delete data[gc[i]]}gc.splice(0,gcLen)}return longest};helpers$1.measureText=function(ctx,data,gc,longest,string){var textWidth=data[string];if(!textWidth){textWidth=data[string]=ctx.measureText(string).width;gc.push(string)}if(textWidth>longest){longest=textWidth}return longest};helpers$1.numberOfLabelLines=function(arrayOfThings){var numberOfLines=1;helpers$1.each(arrayOfThings,function(thing){if(helpers$1.isArray(thing)){if(thing.length>numberOfLines){numberOfLines=thing.length}}});return numberOfLines};helpers$1.color=!chartjsColor?function(value){console.error("Color.js not found!");return value}:function(value){if(value instanceof CanvasGradient){value=core_defaults.global.defaultColor}return chartjsColor(value)};helpers$1.getHoverColor=function(colorValue){return colorValue instanceof CanvasPattern||colorValue instanceof CanvasGradient?colorValue:helpers$1.color(colorValue).saturate(.5).darken(.1).rgbString()}};function abstract(){throw new Error("This method is not implemented: either no adapter can "+"be found or an incomplete integration was provided.")}function DateAdapter(options){this.options=options||{}}helpers$1.extend(DateAdapter.prototype,{formats:abstract,parse:abstract,format:abstract,add:abstract,diff:abstract,startOf:abstract,endOf:abstract,_create:function(value){return value}});DateAdapter.override=function(members){helpers$1.extend(DateAdapter.prototype,members)};var _date=DateAdapter;var core_adapters={_date:_date};var core_ticks={formatters:{values:function(value){return helpers$1.isArray(value)?value:""+value},linear:function(tickValue,index,ticks){var delta=ticks.length>3?ticks[2]-ticks[1]:ticks[1]-ticks[0];if(Math.abs(delta)>1){if(tickValue!==Math.floor(tickValue)){delta=tickValue-Math.floor(tickValue)}}var logDelta=helpers$1.log10(Math.abs(delta));var tickString="";if(tickValue!==0){var maxTick=Math.max(Math.abs(ticks[0]),Math.abs(ticks[ticks.length-1]));if(maxTick<1e-4){var logTick=helpers$1.log10(Math.abs(tickValue));tickString=tickValue.toExponential(Math.floor(logTick)-Math.floor(logDelta))}else{var numDecimal=-1*Math.floor(logDelta);numDecimal=Math.max(Math.min(numDecimal,20),0);tickString=tickValue.toFixed(numDecimal)}}else{tickString="0"}return tickString},logarithmic:function(tickValue,index,ticks){var remain=tickValue/Math.pow(10,Math.floor(helpers$1.log10(tickValue)));if(tickValue===0){return"0"}else if(remain===1||remain===2||remain===5||index===0||index===ticks.length-1){return tickValue.toExponential()}return""}}};var valueOrDefault$9=helpers$1.valueOrDefault;var valueAtIndexOrDefault=helpers$1.valueAtIndexOrDefault;core_defaults._set("scale",{display:true,position:"left",offset:false,gridLines:{display:true,color:"rgba(0, 0, 0, 0.1)",lineWidth:1,drawBorder:true,drawOnChartArea:true,drawTicks:true,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:false,borderDash:[],borderDashOffset:0},scaleLabel:{display:false,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:false,minRotation:0,maxRotation:50,mirror:false,padding:0,reverse:false,display:true,autoSkip:true,autoSkipPadding:0,labelOffset:0,callback:core_ticks.formatters.values,minor:{},major:{}}});function labelsFromTicks(ticks){var labels=[];var i,ilen;for(i=0,ilen=ticks.length;i<ilen;++i){labels.push(ticks[i].label)}return labels}function getPixelForGridLine(scale,index,offsetGridLines){var lineValue=scale.getPixelForTick(index);if(offsetGridLines){if(scale.getTicks().length===1){lineValue-=scale.isHorizontal()?Math.max(lineValue-scale.left,scale.right-lineValue):Math.max(lineValue-scale.top,scale.bottom-lineValue)}else if(index===0){lineValue-=(scale.getPixelForTick(1)-lineValue)/2}else{lineValue-=(lineValue-scale.getPixelForTick(index-1))/2}}return lineValue}function computeTextSize(context,tick,font){return helpers$1.isArray(tick)?helpers$1.longestText(context,font,tick):context.measureText(tick).width}var core_scale=core_element.extend({getPadding:function(){var me=this;return{left:me.paddingLeft||0,top:me.paddingTop||0,right:me.paddingRight||0,bottom:me.paddingBottom||0}},getTicks:function(){return this._ticks},mergeTicksOptions:function(){var ticks=this.options.ticks;if(ticks.minor===false){ticks.minor={display:false}}if(ticks.major===false){ticks.major={display:false}}for(var key in ticks){if(key!=="major"&&key!=="minor"){if(typeof ticks.minor[key]==="undefined"){ticks.minor[key]=ticks[key]}if(typeof ticks.major[key]==="undefined"){ticks.major[key]=ticks[key]}}}},beforeUpdate:function(){helpers$1.callback(this.options.beforeUpdate,[this])},update:function(maxWidth,maxHeight,margins){var me=this;var i,ilen,labels,label,ticks,tick;me.beforeUpdate();me.maxWidth=maxWidth;me.maxHeight=maxHeight;me.margins=helpers$1.extend({left:0,right:0,top:0,bottom:0},margins);me._maxLabelLines=0;me.longestLabelWidth=0;me.longestTextCache=me.longestTextCache||{};me.beforeSetDimensions();me.setDimensions();me.afterSetDimensions();me.beforeDataLimits();me.determineDataLimits();me.afterDataLimits();me.beforeBuildTicks();ticks=me.buildTicks()||[];ticks=me.afterBuildTicks(ticks)||ticks;me.beforeTickToLabelConversion();labels=me.convertTicksToLabels(ticks)||me.ticks;me.afterTickToLabelConversion();me.ticks=labels;for(i=0,ilen=labels.length;i<ilen;++i){label=labels[i];tick=ticks[i];if(!tick){ticks.push(tick={label:label,major:false})}else{tick.label=label}}me._ticks=ticks;me.beforeCalculateTickRotation();me.calculateTickRotation();me.afterCalculateTickRotation();me.beforeFit();me.fit();me.afterFit();me.afterUpdate();return me.minSize},afterUpdate:function(){helpers$1.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){helpers$1.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var me=this;if(me.isHorizontal()){me.width=me.maxWidth;me.left=0;me.right=me.width}else{me.height=me.maxHeight;me.top=0;me.bottom=me.height}me.paddingLeft=0;me.paddingTop=0;me.paddingRight=0;me.paddingBottom=0},afterSetDimensions:function(){helpers$1.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){helpers$1.callback(this.options.beforeDataLimits,[this])},determineDataLimits:helpers$1.noop,afterDataLimits:function(){helpers$1.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){helpers$1.callback(this.options.beforeBuildTicks,[this])},buildTicks:helpers$1.noop,afterBuildTicks:function(ticks){var me=this;if(helpers$1.isArray(ticks)&&ticks.length){return helpers$1.callback(me.options.afterBuildTicks,[me,ticks])}me.ticks=helpers$1.callback(me.options.afterBuildTicks,[me,me.ticks])||me.ticks;return ticks},beforeTickToLabelConversion:function(){helpers$1.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var me=this;var tickOpts=me.options.ticks;me.ticks=me.ticks.map(tickOpts.userCallback||tickOpts.callback,this)},afterTickToLabelConversion:function(){helpers$1.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){helpers$1.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var me=this;var context=me.ctx;var tickOpts=me.options.ticks;var labels=labelsFromTicks(me._ticks);var tickFont=helpers$1.options._parseFont(tickOpts);context.font=tickFont.string;var labelRotation=tickOpts.minRotation||0;if(labels.length&&me.options.display&&me.isHorizontal()){var originalLabelWidth=helpers$1.longestText(context,tickFont.string,labels,me.longestTextCache);var labelWidth=originalLabelWidth;var cosRotation,sinRotation;var tickWidth=me.getPixelForTick(1)-me.getPixelForTick(0)-6;while(labelWidth>tickWidth&&labelRotation<tickOpts.maxRotation){var angleRadians=helpers$1.toRadians(labelRotation);cosRotation=Math.cos(angleRadians);sinRotation=Math.sin(angleRadians);if(sinRotation*originalLabelWidth>me.maxHeight){labelRotation--;break}labelRotation++;labelWidth=cosRotation*originalLabelWidth}}me.labelRotation=labelRotation},afterCalculateTickRotation:function(){helpers$1.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){helpers$1.callback(this.options.beforeFit,[this])},fit:function(){var me=this;var minSize=me.minSize={width:0,height:0};var labels=labelsFromTicks(me._ticks);var opts=me.options;var tickOpts=opts.ticks;var scaleLabelOpts=opts.scaleLabel;var gridLineOpts=opts.gridLines;var display=me._isVisible();var position=opts.position;var isHorizontal=me.isHorizontal();var parseFont=helpers$1.options._parseFont;var tickFont=parseFont(tickOpts);var tickMarkLength=opts.gridLines.tickMarkLength;if(isHorizontal){minSize.width=me.isFullWidth()?me.maxWidth-me.margins.left-me.margins.right:me.maxWidth}else{minSize.width=display&&gridLineOpts.drawTicks?tickMarkLength:0}if(isHorizontal){minSize.height=display&&gridLineOpts.drawTicks?tickMarkLength:0}else{minSize.height=me.maxHeight}if(scaleLabelOpts.display&&display){var scaleLabelFont=parseFont(scaleLabelOpts);var scaleLabelPadding=helpers$1.options.toPadding(scaleLabelOpts.padding);var deltaHeight=scaleLabelFont.lineHeight+scaleLabelPadding.height;if(isHorizontal){minSize.height+=deltaHeight}else{minSize.width+=deltaHeight}}if(tickOpts.display&&display){var largestTextWidth=helpers$1.longestText(me.ctx,tickFont.string,labels,me.longestTextCache);var tallestLabelHeightInLines=helpers$1.numberOfLabelLines(labels);var lineSpace=tickFont.size*.5;var tickPadding=me.options.ticks.padding;me._maxLabelLines=tallestLabelHeightInLines;me.longestLabelWidth=largestTextWidth;if(isHorizontal){var angleRadians=helpers$1.toRadians(me.labelRotation);var cosRotation=Math.cos(angleRadians);var sinRotation=Math.sin(angleRadians);var labelHeight=sinRotation*largestTextWidth+tickFont.lineHeight*tallestLabelHeightInLines+lineSpace;minSize.height=Math.min(me.maxHeight,minSize.height+labelHeight+tickPadding);me.ctx.font=tickFont.string;var firstLabelWidth=computeTextSize(me.ctx,labels[0],tickFont.string);var lastLabelWidth=computeTextSize(me.ctx,labels[labels.length-1],tickFont.string);var offsetLeft=me.getPixelForTick(0)-me.left;var offsetRight=me.right-me.getPixelForTick(labels.length-1);var paddingLeft,paddingRight;if(me.labelRotation!==0){paddingLeft=position==="bottom"?cosRotation*firstLabelWidth:cosRotation*lineSpace;paddingRight=position==="bottom"?cosRotation*lineSpace:cosRotation*lastLabelWidth}else{paddingLeft=firstLabelWidth/2;paddingRight=lastLabelWidth/2}me.paddingLeft=Math.max(paddingLeft-offsetLeft,0)+3;me.paddingRight=Math.max(paddingRight-offsetRight,0)+3}else{if(tickOpts.mirror){largestTextWidth=0}else{largestTextWidth+=tickPadding+lineSpace}minSize.width=Math.min(me.maxWidth,minSize.width+largestTextWidth);me.paddingTop=tickFont.size/2;me.paddingBottom=tickFont.size/2}}me.handleMargins();me.width=minSize.width;me.height=minSize.height},handleMargins:function(){var me=this;if(me.margins){me.paddingLeft=Math.max(me.paddingLeft-me.margins.left,0);me.paddingTop=Math.max(me.paddingTop-me.margins.top,0);me.paddingRight=Math.max(me.paddingRight-me.margins.right,0);me.paddingBottom=Math.max(me.paddingBottom-me.margins.bottom,0)}},afterFit:function(){helpers$1.callback(this.options.afterFit,[this])},isHorizontal:function(){return this.options.position==="top"||this.options.position==="bottom"},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(rawValue){if(helpers$1.isNullOrUndef(rawValue)){return NaN}if((typeof rawValue==="number"||rawValue instanceof Number)&&!isFinite(rawValue)){return NaN}if(rawValue){if(this.isHorizontal()){if(rawValue.x!==undefined){return this.getRightValue(rawValue.x)}}else if(rawValue.y!==undefined){return this.getRightValue(rawValue.y)}}return rawValue},getLabelForIndex:helpers$1.noop,getPixelForValue:helpers$1.noop,getValueForPixel:helpers$1.noop,getPixelForTick:function(index){var me=this;var offset=me.options.offset;if(me.isHorizontal()){var innerWidth=me.width-(me.paddingLeft+me.paddingRight);var tickWidth=innerWidth/Math.max(me._ticks.length-(offset?0:1),1);var pixel=tickWidth*index+me.paddingLeft;if(offset){pixel+=tickWidth/2}var finalVal=me.left+pixel;finalVal+=me.isFullWidth()?me.margins.left:0;return finalVal}var innerHeight=me.height-(me.paddingTop+me.paddingBottom);return me.top+index*(innerHeight/(me._ticks.length-1))},getPixelForDecimal:function(decimal){var me=this;if(me.isHorizontal()){var innerWidth=me.width-(me.paddingLeft+me.paddingRight);var valueOffset=innerWidth*decimal+me.paddingLeft;var finalVal=me.left+valueOffset;finalVal+=me.isFullWidth()?me.margins.left:0;return finalVal}return me.top+decimal*me.height},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var me=this;var min=me.min;var max=me.max;return me.beginAtZero?0:min<0&&max<0?max:min>0&&max>0?min:0},_autoSkip:function(ticks){var me=this;var isHorizontal=me.isHorizontal();var optionTicks=me.options.ticks.minor;var tickCount=ticks.length;var skipRatio=false;var maxTicks=optionTicks.maxTicksLimit;var ticksLength=me._tickSize()*(tickCount-1);var axisLength=isHorizontal?me.width-(me.paddingLeft+me.paddingRight):me.height-(me.paddingTop+me.PaddingBottom);var result=[];var i,tick;if(ticksLength>axisLength){skipRatio=1+Math.floor(ticksLength/axisLength)}if(tickCount>maxTicks){skipRatio=Math.max(skipRatio,1+Math.floor(tickCount/maxTicks))}for(i=0;i<tickCount;i++){tick=ticks[i];if(skipRatio>1&&i%skipRatio>0){delete tick.label}result.push(tick)}return result},_tickSize:function(){var me=this;var isHorizontal=me.isHorizontal();var optionTicks=me.options.ticks.minor;var rot=helpers$1.toRadians(me.labelRotation);var cos=Math.abs(Math.cos(rot));var sin=Math.abs(Math.sin(rot));var padding=optionTicks.autoSkipPadding||0;var w=me.longestLabelWidth+padding||0;var tickFont=helpers$1.options._parseFont(optionTicks);var h=me._maxLabelLines*tickFont.lineHeight+padding||0;return isHorizontal?h*cos>w*sin?w/cos:h/sin:h*sin<w*cos?h/cos:w/sin},_isVisible:function(){var me=this;var chart=me.chart;var display=me.options.display;var i,ilen,meta;if(display!=="auto"){return!!display}for(i=0,ilen=chart.data.datasets.length;i<ilen;++i){if(chart.isDatasetVisible(i)){meta=chart.getDatasetMeta(i);if(meta.xAxisID===me.id||meta.yAxisID===me.id){return true}}}return false},draw:function(chartArea){var me=this;var options=me.options;if(!me._isVisible()){return}var chart=me.chart;var context=me.ctx;var globalDefaults=core_defaults.global;var defaultFontColor=globalDefaults.defaultFontColor;var optionTicks=options.ticks.minor;var optionMajorTicks=options.ticks.major||optionTicks;var gridLines=options.gridLines;var scaleLabel=options.scaleLabel;var position=options.position;var isRotated=me.labelRotation!==0;var isMirrored=optionTicks.mirror;var isHorizontal=me.isHorizontal();var parseFont=helpers$1.options._parseFont;var ticks=optionTicks.display&&optionTicks.autoSkip?me._autoSkip(me.getTicks()):me.getTicks();var tickFontColor=valueOrDefault$9(optionTicks.fontColor,defaultFontColor);var tickFont=parseFont(optionTicks);var lineHeight=tickFont.lineHeight;var majorTickFontColor=valueOrDefault$9(optionMajorTicks.fontColor,defaultFontColor);var majorTickFont=parseFont(optionMajorTicks);var tickPadding=optionTicks.padding;var labelOffset=optionTicks.labelOffset;var tl=gridLines.drawTicks?gridLines.tickMarkLength:0;var scaleLabelFontColor=valueOrDefault$9(scaleLabel.fontColor,defaultFontColor);var scaleLabelFont=parseFont(scaleLabel);var scaleLabelPadding=helpers$1.options.toPadding(scaleLabel.padding);var labelRotationRadians=helpers$1.toRadians(me.labelRotation);var itemsToDraw=[];var axisWidth=gridLines.drawBorder?valueAtIndexOrDefault(gridLines.lineWidth,0,0):0;var alignPixel=helpers$1._alignPixel;var borderValue,tickStart,tickEnd;if(position==="top"){borderValue=alignPixel(chart,me.bottom,axisWidth);tickStart=me.bottom-tl;tickEnd=borderValue-axisWidth/2}else if(position==="bottom"){borderValue=alignPixel(chart,me.top,axisWidth);tickStart=borderValue+axisWidth/2;tickEnd=me.top+tl}else if(position==="left"){borderValue=alignPixel(chart,me.right,axisWidth);tickStart=me.right-tl;tickEnd=borderValue-axisWidth/2}else{borderValue=alignPixel(chart,me.left,axisWidth);tickStart=borderValue+axisWidth/2;tickEnd=me.left+tl}var epsilon=1e-7;helpers$1.each(ticks,function(tick,index){if(helpers$1.isNullOrUndef(tick.label)){return}var label=tick.label;var lineWidth,lineColor,borderDash,borderDashOffset;if(index===me.zeroLineIndex&&options.offset===gridLines.offsetGridLines){lineWidth=gridLines.zeroLineWidth;lineColor=gridLines.zeroLineColor;borderDash=gridLines.zeroLineBorderDash||[];borderDashOffset=gridLines.zeroLineBorderDashOffset||0}else{lineWidth=valueAtIndexOrDefault(gridLines.lineWidth,index);lineColor=valueAtIndexOrDefault(gridLines.color,index);borderDash=gridLines.borderDash||[];borderDashOffset=gridLines.borderDashOffset||0}var tx1,ty1,tx2,ty2,x1,y1,x2,y2,labelX,labelY,textOffset,textAlign;var labelCount=helpers$1.isArray(label)?label.length:1;var lineValue=getPixelForGridLine(me,index,gridLines.offsetGridLines);if(isHorizontal){var labelYOffset=tl+tickPadding;if(lineValue<me.left-epsilon){lineColor="rgba(0,0,0,0)"}tx1=tx2=x1=x2=alignPixel(chart,lineValue,lineWidth);ty1=tickStart;ty2=tickEnd;labelX=me.getPixelForTick(index)+labelOffset;if(position==="top"){y1=alignPixel(chart,chartArea.top,axisWidth)+axisWidth/2;y2=chartArea.bottom;textOffset=((!isRotated?.5:1)-labelCount)*lineHeight;textAlign=!isRotated?"center":"left";labelY=me.bottom-labelYOffset}else{y1=chartArea.top;y2=alignPixel(chart,chartArea.bottom,axisWidth)-axisWidth/2;textOffset=(!isRotated?.5:0)*lineHeight;textAlign=!isRotated?"center":"right";labelY=me.top+labelYOffset}}else{var labelXOffset=(isMirrored?0:tl)+tickPadding;if(lineValue<me.top-epsilon){lineColor="rgba(0,0,0,0)"}tx1=tickStart;tx2=tickEnd;ty1=ty2=y1=y2=alignPixel(chart,lineValue,lineWidth);labelY=me.getPixelForTick(index)+labelOffset;textOffset=(1-labelCount)*lineHeight/2;if(position==="left"){x1=alignPixel(chart,chartArea.left,axisWidth)+axisWidth/2;x2=chartArea.right;textAlign=isMirrored?"left":"right";labelX=me.right-labelXOffset}else{x1=chartArea.left;x2=alignPixel(chart,chartArea.right,axisWidth)-axisWidth/2;textAlign=isMirrored?"right":"left";labelX=me.left+labelXOffset}}itemsToDraw.push({tx1:tx1,ty1:ty1,tx2:tx2,ty2:ty2,x1:x1,y1:y1,x2:x2,y2:y2,labelX:labelX,labelY:labelY,glWidth:lineWidth,glColor:lineColor,glBorderDash:borderDash,glBorderDashOffset:borderDashOffset,rotation:-1*labelRotationRadians,label:label,major:tick.major,textOffset:textOffset,textAlign:textAlign})});helpers$1.each(itemsToDraw,function(itemToDraw){var glWidth=itemToDraw.glWidth;var glColor=itemToDraw.glColor;if(gridLines.display&&glWidth&&glColor){context.save();context.lineWidth=glWidth;context.strokeStyle=glColor;if(context.setLineDash){context.setLineDash(itemToDraw.glBorderDash);context.lineDashOffset=itemToDraw.glBorderDashOffset}context.beginPath();if(gridLines.drawTicks){context.moveTo(itemToDraw.tx1,itemToDraw.ty1);context.lineTo(itemToDraw.tx2,itemToDraw.ty2)}if(gridLines.drawOnChartArea){context.moveTo(itemToDraw.x1,itemToDraw.y1);context.lineTo(itemToDraw.x2,itemToDraw.y2)}context.stroke();context.restore()}if(optionTicks.display){context.save();context.translate(itemToDraw.labelX,itemToDraw.labelY);context.rotate(itemToDraw.rotation);context.font=itemToDraw.major?majorTickFont.string:tickFont.string;context.fillStyle=itemToDraw.major?majorTickFontColor:tickFontColor;context.textBaseline="middle";context.textAlign=itemToDraw.textAlign;var label=itemToDraw.label;var y=itemToDraw.textOffset;if(helpers$1.isArray(label)){for(var i=0;i<label.length;++i){context.fillText(""+label[i],0,y);y+=lineHeight}}else{context.fillText(label,0,y)}context.restore()}});if(scaleLabel.display){var scaleLabelX;var scaleLabelY;var rotation=0;var halfLineHeight=scaleLabelFont.lineHeight/2;if(isHorizontal){scaleLabelX=me.left+(me.right-me.left)/2;scaleLabelY=position==="bottom"?me.bottom-halfLineHeight-scaleLabelPadding.bottom:me.top+halfLineHeight+scaleLabelPadding.top}else{var isLeft=position==="left";scaleLabelX=isLeft?me.left+halfLineHeight+scaleLabelPadding.top:me.right-halfLineHeight-scaleLabelPadding.top;scaleLabelY=me.top+(me.bottom-me.top)/2;rotation=isLeft?-.5*Math.PI:.5*Math.PI}context.save();context.translate(scaleLabelX,scaleLabelY);context.rotate(rotation);context.textAlign="center";context.textBaseline="middle";context.fillStyle=scaleLabelFontColor;context.font=scaleLabelFont.string;context.fillText(scaleLabel.labelString,0,0);context.restore()}if(axisWidth){var firstLineWidth=axisWidth;var lastLineWidth=valueAtIndexOrDefault(gridLines.lineWidth,ticks.length-1,0);var x1,x2,y1,y2;if(isHorizontal){x1=alignPixel(chart,me.left,firstLineWidth)-firstLineWidth/2;x2=alignPixel(chart,me.right,lastLineWidth)+lastLineWidth/2;y1=y2=borderValue}else{y1=alignPixel(chart,me.top,firstLineWidth)-firstLineWidth/2;y2=alignPixel(chart,me.bottom,lastLineWidth)+lastLineWidth/2;x1=x2=borderValue}context.lineWidth=axisWidth;context.strokeStyle=valueAtIndexOrDefault(gridLines.color,0);context.beginPath();context.moveTo(x1,y1);context.lineTo(x2,y2);context.stroke()}}});var defaultConfig={position:"bottom"};var scale_category=core_scale.extend({getLabels:function(){var data=this.chart.data;return this.options.labels||(this.isHorizontal()?data.xLabels:data.yLabels)||data.labels},determineDataLimits:function(){var me=this;var labels=me.getLabels();me.minIndex=0;me.maxIndex=labels.length-1;var findIndex;if(me.options.ticks.min!==undefined){findIndex=labels.indexOf(me.options.ticks.min);me.minIndex=findIndex!==-1?findIndex:me.minIndex}if(me.options.ticks.max!==undefined){findIndex=labels.indexOf(me.options.ticks.max);me.maxIndex=findIndex!==-1?findIndex:me.maxIndex}me.min=labels[me.minIndex];me.max=labels[me.maxIndex]},buildTicks:function(){var me=this;var labels=me.getLabels();me.ticks=me.minIndex===0&&me.maxIndex===labels.length-1?labels:labels.slice(me.minIndex,me.maxIndex+1)},getLabelForIndex:function(index,datasetIndex){var me=this;var chart=me.chart;if(chart.getDatasetMeta(datasetIndex).controller._getValueScaleId()===me.id){return me.getRightValue(chart.data.datasets[datasetIndex].data[index])}return me.ticks[index-me.minIndex]},getPixelForValue:function(value,index){var me=this;var offset=me.options.offset;var offsetAmt=Math.max(me.maxIndex+1-me.minIndex-(offset?0:1),1);var valueCategory;if(value!==undefined&&value!==null){valueCategory=me.isHorizontal()?value.x:value.y}if(valueCategory!==undefined||value!==undefined&&isNaN(index)){var labels=me.getLabels();value=valueCategory||value;var idx=labels.indexOf(value);index=idx!==-1?idx:index}if(me.isHorizontal()){var valueWidth=me.width/offsetAmt;var widthOffset=valueWidth*(index-me.minIndex);if(offset){widthOffset+=valueWidth/2}return me.left+widthOffset}var valueHeight=me.height/offsetAmt;var heightOffset=valueHeight*(index-me.minIndex);if(offset){heightOffset+=valueHeight/2}return me.top+heightOffset},getPixelForTick:function(index){return this.getPixelForValue(this.ticks[index],index+this.minIndex,null)},getValueForPixel:function(pixel){var me=this;var offset=me.options.offset;var value;var offsetAmt=Math.max(me._ticks.length-(offset?0:1),1);var horz=me.isHorizontal();var valueDimension=(horz?me.width:me.height)/offsetAmt;pixel-=horz?me.left:me.top;if(offset){pixel-=valueDimension/2}if(pixel<=0){value=0}else{value=Math.round(pixel/valueDimension)}return value+me.minIndex},getBasePixel:function(){return this.bottom}});var _defaults=defaultConfig;scale_category._defaults=_defaults;var noop=helpers$1.noop;var isNullOrUndef=helpers$1.isNullOrUndef;function generateTicks(generationOptions,dataRange){var ticks=[];var MIN_SPACING=1e-14;var stepSize=generationOptions.stepSize;var unit=stepSize||1;var maxNumSpaces=generationOptions.maxTicks-1;var min=generationOptions.min;var max=generationOptions.max;var precision=generationOptions.precision;var rmin=dataRange.min;var rmax=dataRange.max;var spacing=helpers$1.niceNum((rmax-rmin)/maxNumSpaces/unit)*unit;var factor,niceMin,niceMax,numSpaces;if(spacing<MIN_SPACING&&isNullOrUndef(min)&&isNullOrUndef(max)){return[rmin,rmax]}numSpaces=Math.ceil(rmax/spacing)-Math.floor(rmin/spacing);if(numSpaces>maxNumSpaces){spacing=helpers$1.niceNum(numSpaces*spacing/maxNumSpaces/unit)*unit}if(stepSize||isNullOrUndef(precision)){factor=Math.pow(10,helpers$1._decimalPlaces(spacing))}else{factor=Math.pow(10,precision);spacing=Math.ceil(spacing*factor)/factor}niceMin=Math.floor(rmin/spacing)*spacing;niceMax=Math.ceil(rmax/spacing)*spacing;if(stepSize){if(!isNullOrUndef(min)&&helpers$1.almostWhole(min/spacing,spacing/1e3)){niceMin=min}if(!isNullOrUndef(max)&&helpers$1.almostWhole(max/spacing,spacing/1e3)){niceMax=max}}numSpaces=(niceMax-niceMin)/spacing;if(helpers$1.almostEquals(numSpaces,Math.round(numSpaces),spacing/1e3)){numSpaces=Math.round(numSpaces)}else{numSpaces=Math.ceil(numSpaces)}niceMin=Math.round(niceMin*factor)/factor;niceMax=Math.round(niceMax*factor)/factor;ticks.push(isNullOrUndef(min)?niceMin:min);for(var j=1;j<numSpaces;++j){ticks.push(Math.round((niceMin+j*spacing)*factor)/factor)}ticks.push(isNullOrUndef(max)?niceMax:max);return ticks}var scale_linearbase=core_scale.extend({getRightValue:function(value){if(typeof value==="string"){return+value}return core_scale.prototype.getRightValue.call(this,value)},handleTickRangeOptions:function(){var me=this;var opts=me.options;var tickOpts=opts.ticks;if(tickOpts.beginAtZero){var minSign=helpers$1.sign(me.min);var maxSign=helpers$1.sign(me.max);if(minSign<0&&maxSign<0){me.max=0}else if(minSign>0&&maxSign>0){me.min=0}}var setMin=tickOpts.min!==undefined||tickOpts.suggestedMin!==undefined;var setMax=tickOpts.max!==undefined||tickOpts.suggestedMax!==undefined;if(tickOpts.min!==undefined){me.min=tickOpts.min}else if(tickOpts.suggestedMin!==undefined){if(me.min===null){me.min=tickOpts.suggestedMin}else{me.min=Math.min(me.min,tickOpts.suggestedMin)}}if(tickOpts.max!==undefined){me.max=tickOpts.max}else if(tickOpts.suggestedMax!==undefined){if(me.max===null){me.max=tickOpts.suggestedMax}else{me.max=Math.max(me.max,tickOpts.suggestedMax)}}if(setMin!==setMax){if(me.min>=me.max){if(setMin){me.max=me.min+1}else{me.min=me.max-1}}}if(me.min===me.max){me.max++;if(!tickOpts.beginAtZero){me.min--}}},getTickLimit:function(){var me=this;var tickOpts=me.options.ticks;var stepSize=tickOpts.stepSize;var maxTicksLimit=tickOpts.maxTicksLimit;var maxTicks;if(stepSize){maxTicks=Math.ceil(me.max/stepSize)-Math.floor(me.min/stepSize)+1}else{maxTicks=me._computeTickLimit();maxTicksLimit=maxTicksLimit||11}if(maxTicksLimit){maxTicks=Math.min(maxTicksLimit,maxTicks)}return maxTicks},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:noop,buildTicks:function(){var me=this;var opts=me.options;var tickOpts=opts.ticks;var maxTicks=me.getTickLimit();maxTicks=Math.max(2,maxTicks);var numericGeneratorOptions={maxTicks:maxTicks,min:tickOpts.min,max:tickOpts.max,precision:tickOpts.precision,stepSize:helpers$1.valueOrDefault(tickOpts.fixedStepSize,tickOpts.stepSize)};var ticks=me.ticks=generateTicks(numericGeneratorOptions,me);me.handleDirectionalChanges();me.max=helpers$1.max(ticks);me.min=helpers$1.min(ticks);if(tickOpts.reverse){ticks.reverse();me.start=me.max;me.end=me.min}else{me.start=me.min;me.end=me.max}},convertTicksToLabels:function(){var me=this;me.ticksAsNumbers=me.ticks.slice();me.zeroLineIndex=me.ticks.indexOf(0);core_scale.prototype.convertTicksToLabels.call(me)}});var defaultConfig$1={position:"left",ticks:{callback:core_ticks.formatters.linear}};var scale_linear=scale_linearbase.extend({determineDataLimits:function(){var me=this;var opts=me.options;var chart=me.chart;var data=chart.data;var datasets=data.datasets;var isHorizontal=me.isHorizontal();var DEFAULT_MIN=0;var DEFAULT_MAX=1;function IDMatches(meta){return isHorizontal?meta.xAxisID===me.id:meta.yAxisID===me.id}me.min=null;me.max=null;var hasStacks=opts.stacked;if(hasStacks===undefined){helpers$1.each(datasets,function(dataset,datasetIndex){if(hasStacks){return}var meta=chart.getDatasetMeta(datasetIndex);if(chart.isDatasetVisible(datasetIndex)&&IDMatches(meta)&&meta.stack!==undefined){hasStacks=true}})}if(opts.stacked||hasStacks){var valuesPerStack={};helpers$1.each(datasets,function(dataset,datasetIndex){var meta=chart.getDatasetMeta(datasetIndex);var key=[meta.type,opts.stacked===undefined&&meta.stack===undefined?datasetIndex:"",meta.stack].join(".");if(valuesPerStack[key]===undefined){valuesPerStack[key]={positiveValues:[],negativeValues:[]}}var positiveValues=valuesPerStack[key].positiveValues;var negativeValues=valuesPerStack[key].negativeValues;if(chart.isDatasetVisible(datasetIndex)&&IDMatches(meta)){helpers$1.each(dataset.data,function(rawValue,index){var value=+me.getRightValue(rawValue);if(isNaN(value)||meta.data[index].hidden){return}positiveValues[index]=positiveValues[index]||0;negativeValues[index]=negativeValues[index]||0;if(opts.relativePoints){positiveValues[index]=100}else if(value<0){negativeValues[index]+=value}else{positiveValues[index]+=value}})}});helpers$1.each(valuesPerStack,function(valuesForType){var values=valuesForType.positiveValues.concat(valuesForType.negativeValues);var minVal=helpers$1.min(values);var maxVal=helpers$1.max(values);me.min=me.min===null?minVal:Math.min(me.min,minVal);me.max=me.max===null?maxVal:Math.max(me.max,maxVal)})}else{helpers$1.each(datasets,function(dataset,datasetIndex){var meta=chart.getDatasetMeta(datasetIndex);if(chart.isDatasetVisible(datasetIndex)&&IDMatches(meta)){helpers$1.each(dataset.data,function(rawValue,index){var value=+me.getRightValue(rawValue);if(isNaN(value)||meta.data[index].hidden){return}if(me.min===null){me.min=value}else if(value<me.min){me.min=value}if(me.max===null){me.max=value}else if(value>me.max){me.max=value}})}})}me.min=isFinite(me.min)&&!isNaN(me.min)?me.min:DEFAULT_MIN;me.max=isFinite(me.max)&&!isNaN(me.max)?me.max:DEFAULT_MAX;this.handleTickRangeOptions()},_computeTickLimit:function(){var me=this;var tickFont;if(me.isHorizontal()){return Math.ceil(me.width/40)}tickFont=helpers$1.options._parseFont(me.options.ticks);return Math.ceil(me.height/tickFont.lineHeight)},handleDirectionalChanges:function(){if(!this.isHorizontal()){this.ticks.reverse()}},getLabelForIndex:function(index,datasetIndex){return+this.getRightValue(this.chart.data.datasets[datasetIndex].data[index])},getPixelForValue:function(value){var me=this;var start=me.start;var rightValue=+me.getRightValue(value);var pixel;var range=me.end-start;if(me.isHorizontal()){pixel=me.left+me.width/range*(rightValue-start)}else{pixel=me.bottom-me.height/range*(rightValue-start)}return pixel},getValueForPixel:function(pixel){var me=this;var isHorizontal=me.isHorizontal();var innerDimension=isHorizontal?me.width:me.height;var offset=(isHorizontal?pixel-me.left:me.bottom-pixel)/innerDimension;return me.start+(me.end-me.start)*offset},getPixelForTick:function(index){return this.getPixelForValue(this.ticksAsNumbers[index])}});var _defaults$1=defaultConfig$1;scale_linear._defaults=_defaults$1;var valueOrDefault$a=helpers$1.valueOrDefault;function generateTicks$1(generationOptions,dataRange){var ticks=[];var tickVal=valueOrDefault$a(generationOptions.min,Math.pow(10,Math.floor(helpers$1.log10(dataRange.min))));var endExp=Math.floor(helpers$1.log10(dataRange.max));var endSignificand=Math.ceil(dataRange.max/Math.pow(10,endExp));var exp,significand;if(tickVal===0){exp=Math.floor(helpers$1.log10(dataRange.minNotZero));significand=Math.floor(dataRange.minNotZero/Math.pow(10,exp));ticks.push(tickVal);tickVal=significand*Math.pow(10,exp)}else{exp=Math.floor(helpers$1.log10(tickVal));significand=Math.floor(tickVal/Math.pow(10,exp))}var precision=exp<0?Math.pow(10,Math.abs(exp)):1;do{ticks.push(tickVal);++significand;if(significand===10){significand=1;++exp;precision=exp>=0?1:precision}tickVal=Math.round(significand*Math.pow(10,exp)*precision)/precision}while(exp<endExp||exp===endExp&&significand<endSignificand);var lastTick=valueOrDefault$a(generationOptions.max,tickVal);ticks.push(lastTick);return ticks}var defaultConfig$2={position:"left",ticks:{callback:core_ticks.formatters.logarithmic}};function nonNegativeOrDefault(value,defaultValue){return helpers$1.isFinite(value)&&value>=0?value:defaultValue}var scale_logarithmic=core_scale.extend({determineDataLimits:function(){var me=this;var opts=me.options;var chart=me.chart;var data=chart.data;var datasets=data.datasets;var isHorizontal=me.isHorizontal();function IDMatches(meta){return isHorizontal?meta.xAxisID===me.id:meta.yAxisID===me.id}me.min=null;me.max=null;me.minNotZero=null;var hasStacks=opts.stacked;if(hasStacks===undefined){helpers$1.each(datasets,function(dataset,datasetIndex){if(hasStacks){return}var meta=chart.getDatasetMeta(datasetIndex);if(chart.isDatasetVisible(datasetIndex)&&IDMatches(meta)&&meta.stack!==undefined){hasStacks=true}})}if(opts.stacked||hasStacks){var valuesPerStack={};helpers$1.each(datasets,function(dataset,datasetIndex){var meta=chart.getDatasetMeta(datasetIndex);var key=[meta.type,opts.stacked===undefined&&meta.stack===undefined?datasetIndex:"",meta.stack].join(".");if(chart.isDatasetVisible(datasetIndex)&&IDMatches(meta)){if(valuesPerStack[key]===undefined){valuesPerStack[key]=[]}helpers$1.each(dataset.data,function(rawValue,index){var values=valuesPerStack[key];var value=+me.getRightValue(rawValue);if(isNaN(value)||meta.data[index].hidden||value<0){return}values[index]=values[index]||0;values[index]+=value})}});helpers$1.each(valuesPerStack,function(valuesForType){if(valuesForType.length>0){var minVal=helpers$1.min(valuesForType);var maxVal=helpers$1.max(valuesForType);me.min=me.min===null?minVal:Math.min(me.min,minVal);me.max=me.max===null?maxVal:Math.max(me.max,maxVal)}})}else{helpers$1.each(datasets,function(dataset,datasetIndex){var meta=chart.getDatasetMeta(datasetIndex);if(chart.isDatasetVisible(datasetIndex)&&IDMatches(meta)){helpers$1.each(dataset.data,function(rawValue,index){var value=+me.getRightValue(rawValue);if(isNaN(value)||meta.data[index].hidden||value<0){return}if(me.min===null){me.min=value}else if(value<me.min){me.min=value}if(me.max===null){me.max=value}else if(value>me.max){me.max=value}if(value!==0&&(me.minNotZero===null||value<me.minNotZero)){me.minNotZero=value}})}})}this.handleTickRangeOptions()},handleTickRangeOptions:function(){var me=this;var tickOpts=me.options.ticks;var DEFAULT_MIN=1;var DEFAULT_MAX=10;me.min=nonNegativeOrDefault(tickOpts.min,me.min);me.max=nonNegativeOrDefault(tickOpts.max,me.max);if(me.min===me.max){if(me.min!==0&&me.min!==null){me.min=Math.pow(10,Math.floor(helpers$1.log10(me.min))-1);me.max=Math.pow(10,Math.floor(helpers$1.log10(me.max))+1)}else{me.min=DEFAULT_MIN;me.max=DEFAULT_MAX}}if(me.min===null){me.min=Math.pow(10,Math.floor(helpers$1.log10(me.max))-1)}if(me.max===null){me.max=me.min!==0?Math.pow(10,Math.floor(helpers$1.log10(me.min))+1):DEFAULT_MAX}if(me.minNotZero===null){if(me.min>0){me.minNotZero=me.min}else if(me.max<1){me.minNotZero=Math.pow(10,Math.floor(helpers$1.log10(me.max)))}else{me.minNotZero=DEFAULT_MIN}}},buildTicks:function(){var me=this;var tickOpts=me.options.ticks;var reverse=!me.isHorizontal();var generationOptions={min:nonNegativeOrDefault(tickOpts.min),max:nonNegativeOrDefault(tickOpts.max)};var ticks=me.ticks=generateTicks$1(generationOptions,me);me.max=helpers$1.max(ticks);me.min=helpers$1.min(ticks);if(tickOpts.reverse){reverse=!reverse;me.start=me.max;me.end=me.min}else{me.start=me.min;me.end=me.max}if(reverse){ticks.reverse()}},convertTicksToLabels:function(){this.tickValues=this.ticks.slice();core_scale.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(index,datasetIndex){return+this.getRightValue(this.chart.data.datasets[datasetIndex].data[index])},getPixelForTick:function(index){return this.getPixelForValue(this.tickValues[index])},_getFirstTickValue:function(value){var exp=Math.floor(helpers$1.log10(value));var significand=Math.floor(value/Math.pow(10,exp));return significand*Math.pow(10,exp)},getPixelForValue:function(value){var me=this;var tickOpts=me.options.ticks;var reverse=tickOpts.reverse;var log10=helpers$1.log10;var firstTickValue=me._getFirstTickValue(me.minNotZero);var offset=0;var innerDimension,pixel,start,end,sign;value=+me.getRightValue(value);if(reverse){start=me.end;end=me.start;sign=-1}else{start=me.start;end=me.end;sign=1}if(me.isHorizontal()){innerDimension=me.width;pixel=reverse?me.right:me.left}else{innerDimension=me.height;sign*=-1;pixel=reverse?me.top:me.bottom}if(value!==start){if(start===0){offset=valueOrDefault$a(tickOpts.fontSize,core_defaults.global.defaultFontSize);innerDimension-=offset;start=firstTickValue}if(value!==0){offset+=innerDimension/(log10(end)-log10(start))*(log10(value)-log10(start))}pixel+=sign*offset}return pixel},getValueForPixel:function(pixel){var me=this;var tickOpts=me.options.ticks;var reverse=tickOpts.reverse;var log10=helpers$1.log10;var firstTickValue=me._getFirstTickValue(me.minNotZero);var innerDimension,start,end,value;if(reverse){start=me.end;end=me.start}else{start=me.start;end=me.end}if(me.isHorizontal()){innerDimension=me.width;value=reverse?me.right-pixel:pixel-me.left}else{innerDimension=me.height;value=reverse?pixel-me.top:me.bottom-pixel}if(value!==start){if(start===0){var offset=valueOrDefault$a(tickOpts.fontSize,core_defaults.global.defaultFontSize);value-=offset;innerDimension-=offset;start=firstTickValue}value*=log10(end)-log10(start);value/=innerDimension;value=Math.pow(10,log10(start)+value)}return value}});var _defaults$2=defaultConfig$2;scale_logarithmic._defaults=_defaults$2;var valueOrDefault$b=helpers$1.valueOrDefault;var valueAtIndexOrDefault$1=helpers$1.valueAtIndexOrDefault;var resolve$7=helpers$1.options.resolve;var defaultConfig$3={display:true,animate:true,position:"chartArea",angleLines:{display:true,color:"rgba(0, 0, 0, 0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:false},ticks:{showLabelBackdrop:true,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:core_ticks.formatters.linear},pointLabels:{display:true,fontSize:10,callback:function(label){return label}}};function getValueCount(scale){var opts=scale.options;return opts.angleLines.display||opts.pointLabels.display?scale.chart.data.labels.length:0}function getTickBackdropHeight(opts){var tickOpts=opts.ticks;if(tickOpts.display&&opts.display){return valueOrDefault$b(tickOpts.fontSize,core_defaults.global.defaultFontSize)+tickOpts.backdropPaddingY*2}return 0}function measureLabelSize(ctx,lineHeight,label){if(helpers$1.isArray(label)){return{w:helpers$1.longestText(ctx,ctx.font,label),h:label.length*lineHeight}}return{w:ctx.measureText(label).width,h:lineHeight}}function determineLimits(angle,pos,size,min,max){if(angle===min||angle===max){return{start:pos-size/2,end:pos+size/2}}else if(angle<min||angle>max){return{start:pos-size,end:pos}}return{start:pos,end:pos+size}}function fitWithPointLabels(scale){var plFont=helpers$1.options._parseFont(scale.options.pointLabels);var furthestLimits={l:0,r:scale.width,t:0,b:scale.height-scale.paddingTop};var furthestAngles={};var i,textSize,pointPosition;scale.ctx.font=plFont.string;scale._pointLabelSizes=[];var valueCount=getValueCount(scale);for(i=0;i<valueCount;i++){pointPosition=scale.getPointPosition(i,scale.drawingArea+5);textSize=measureLabelSize(scale.ctx,plFont.lineHeight,scale.pointLabels[i]||"");scale._pointLabelSizes[i]=textSize;var angleRadians=scale.getIndexAngle(i);var angle=helpers$1.toDegrees(angleRadians)%360;var hLimits=determineLimits(angle,pointPosition.x,textSize.w,0,180);var vLimits=determineLimits(angle,pointPosition.y,textSize.h,90,270);if(hLimits.start<furthestLimits.l){furthestLimits.l=hLimits.start;furthestAngles.l=angleRadians}if(hLimits.end>furthestLimits.r){furthestLimits.r=hLimits.end;furthestAngles.r=angleRadians}if(vLimits.start<furthestLimits.t){furthestLimits.t=vLimits.start;furthestAngles.t=angleRadians}if(vLimits.end>furthestLimits.b){furthestLimits.b=vLimits.end;furthestAngles.b=angleRadians}}scale.setReductions(scale.drawingArea,furthestLimits,furthestAngles)}function getTextAlignForAngle(angle){if(angle===0||angle===180){return"center"}else if(angle<180){return"left"}return"right"}function fillText(ctx,text,position,lineHeight){var y=position.y+lineHeight/2;var i,ilen;if(helpers$1.isArray(text)){for(i=0,ilen=text.length;i<ilen;++i){ctx.fillText(text[i],position.x,y);y+=lineHeight}}else{ctx.fillText(text,position.x,y)}}function adjustPointPositionForLabelHeight(angle,textSize,position){if(angle===90||angle===270){position.y-=textSize.h/2}else if(angle>270||angle<90){position.y-=textSize.h}}function drawPointLabels(scale){var ctx=scale.ctx;var opts=scale.options;var angleLineOpts=opts.angleLines;var gridLineOpts=opts.gridLines;var pointLabelOpts=opts.pointLabels;var lineWidth=valueOrDefault$b(angleLineOpts.lineWidth,gridLineOpts.lineWidth);var lineColor=valueOrDefault$b(angleLineOpts.color,gridLineOpts.color);var tickBackdropHeight=getTickBackdropHeight(opts);ctx.save();ctx.lineWidth=lineWidth;ctx.strokeStyle=lineColor;if(ctx.setLineDash){ctx.setLineDash(resolve$7([angleLineOpts.borderDash,gridLineOpts.borderDash,[]]));ctx.lineDashOffset=resolve$7([angleLineOpts.borderDashOffset,gridLineOpts.borderDashOffset,0])}var outerDistance=scale.getDistanceFromCenterForValue(opts.ticks.reverse?scale.min:scale.max);var plFont=helpers$1.options._parseFont(pointLabelOpts);ctx.font=plFont.string;ctx.textBaseline="middle";for(var i=getValueCount(scale)-1;i>=0;i--){if(angleLineOpts.display&&lineWidth&&lineColor){var outerPosition=scale.getPointPosition(i,outerDistance);ctx.beginPath();ctx.moveTo(scale.xCenter,scale.yCenter);ctx.lineTo(outerPosition.x,outerPosition.y);ctx.stroke()}if(pointLabelOpts.display){var extra=i===0?tickBackdropHeight/2:0;var pointLabelPosition=scale.getPointPosition(i,outerDistance+extra+5);var pointLabelFontColor=valueAtIndexOrDefault$1(pointLabelOpts.fontColor,i,core_defaults.global.defaultFontColor);ctx.fillStyle=pointLabelFontColor;var angleRadians=scale.getIndexAngle(i);var angle=helpers$1.toDegrees(angleRadians);ctx.textAlign=getTextAlignForAngle(angle);adjustPointPositionForLabelHeight(angle,scale._pointLabelSizes[i],pointLabelPosition);fillText(ctx,scale.pointLabels[i]||"",pointLabelPosition,plFont.lineHeight)}}ctx.restore()}function drawRadiusLine(scale,gridLineOpts,radius,index){var ctx=scale.ctx;var circular=gridLineOpts.circular;var valueCount=getValueCount(scale);var lineColor=valueAtIndexOrDefault$1(gridLineOpts.color,index-1);var lineWidth=valueAtIndexOrDefault$1(gridLineOpts.lineWidth,index-1);var pointPosition;if(!circular&&!valueCount||!lineColor||!lineWidth){return}ctx.save();ctx.strokeStyle=lineColor;ctx.lineWidth=lineWidth;if(ctx.setLineDash){ctx.setLineDash(gridLineOpts.borderDash||[]);ctx.lineDashOffset=gridLineOpts.borderDashOffset||0}ctx.beginPath();if(circular){ctx.arc(scale.xCenter,scale.yCenter,radius,0,Math.PI*2)}else{pointPosition=scale.getPointPosition(0,radius);ctx.moveTo(pointPosition.x,pointPosition.y);for(var i=1;i<valueCount;i++){pointPosition=scale.getPointPosition(i,radius);ctx.lineTo(pointPosition.x,pointPosition.y)}}ctx.closePath();ctx.stroke();ctx.restore()}function numberOrZero(param){return helpers$1.isNumber(param)?param:0}var scale_radialLinear=scale_linearbase.extend({setDimensions:function(){var me=this;me.width=me.maxWidth;me.height=me.maxHeight;me.paddingTop=getTickBackdropHeight(me.options)/2;me.xCenter=Math.floor(me.width/2);me.yCenter=Math.floor((me.height-me.paddingTop)/2);me.drawingArea=Math.min(me.height-me.paddingTop,me.width)/2},determineDataLimits:function(){var me=this;var chart=me.chart;var min=Number.POSITIVE_INFINITY;var max=Number.NEGATIVE_INFINITY;helpers$1.each(chart.data.datasets,function(dataset,datasetIndex){if(chart.isDatasetVisible(datasetIndex)){var meta=chart.getDatasetMeta(datasetIndex);helpers$1.each(dataset.data,function(rawValue,index){var value=+me.getRightValue(rawValue);if(isNaN(value)||meta.data[index].hidden){return}min=Math.min(value,min);max=Math.max(value,max)})}});me.min=min===Number.POSITIVE_INFINITY?0:min;me.max=max===Number.NEGATIVE_INFINITY?0:max;me.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/getTickBackdropHeight(this.options))},convertTicksToLabels:function(){var me=this;scale_linearbase.prototype.convertTicksToLabels.call(me);me.pointLabels=me.chart.data.labels.map(me.options.pointLabels.callback,me)},getLabelForIndex:function(index,datasetIndex){return+this.getRightValue(this.chart.data.datasets[datasetIndex].data[index])},fit:function(){var me=this;var opts=me.options;if(opts.display&&opts.pointLabels.display){fitWithPointLabels(me)}else{me.setCenterPoint(0,0,0,0)}},setReductions:function(largestPossibleRadius,furthestLimits,furthestAngles){var me=this;var radiusReductionLeft=furthestLimits.l/Math.sin(furthestAngles.l);var radiusReductionRight=Math.max(furthestLimits.r-me.width,0)/Math.sin(furthestAngles.r);var radiusReductionTop=-furthestLimits.t/Math.cos(furthestAngles.t);var radiusReductionBottom=-Math.max(furthestLimits.b-(me.height-me.paddingTop),0)/Math.cos(furthestAngles.b);radiusReductionLeft=numberOrZero(radiusReductionLeft);radiusReductionRight=numberOrZero(radiusReductionRight);radiusReductionTop=numberOrZero(radiusReductionTop);radiusReductionBottom=numberOrZero(radiusReductionBottom);me.drawingArea=Math.min(Math.floor(largestPossibleRadius-(radiusReductionLeft+radiusReductionRight)/2),Math.floor(largestPossibleRadius-(radiusReductionTop+radiusReductionBottom)/2));me.setCenterPoint(radiusReductionLeft,radiusReductionRight,radiusReductionTop,radiusReductionBottom)},setCenterPoint:function(leftMovement,rightMovement,topMovement,bottomMovement){var me=this;var maxRight=me.width-rightMovement-me.drawingArea;var maxLeft=leftMovement+me.drawingArea;var maxTop=topMovement+me.drawingArea;var maxBottom=me.height-me.paddingTop-bottomMovement-me.drawingArea;me.xCenter=Math.floor((maxLeft+maxRight)/2+me.left);me.yCenter=Math.floor((maxTop+maxBottom)/2+me.top+me.paddingTop)},getIndexAngle:function(index){var angleMultiplier=Math.PI*2/getValueCount(this);var startAngle=this.chart.options&&this.chart.options.startAngle?this.chart.options.startAngle:0;var startAngleRadians=startAngle*Math.PI*2/360;return index*angleMultiplier+startAngleRadians},getDistanceFromCenterForValue:function(value){var me=this;if(value===null){return 0}var scalingFactor=me.drawingArea/(me.max-me.min);if(me.options.ticks.reverse){return(me.max-value)*scalingFactor}return(value-me.min)*scalingFactor},getPointPosition:function(index,distanceFromCenter){var me=this;var thisAngle=me.getIndexAngle(index)-Math.PI/2;return{x:Math.cos(thisAngle)*distanceFromCenter+me.xCenter,y:Math.sin(thisAngle)*distanceFromCenter+me.yCenter}},getPointPositionForValue:function(index,value){return this.getPointPosition(index,this.getDistanceFromCenterForValue(value))},getBasePosition:function(){var me=this;var min=me.min;var max=me.max;return me.getPointPositionForValue(0,me.beginAtZero?0:min<0&&max<0?max:min>0&&max>0?min:0)},draw:function(){var me=this;var opts=me.options;var gridLineOpts=opts.gridLines;var tickOpts=opts.ticks;if(opts.display){var ctx=me.ctx;var startAngle=this.getIndexAngle(0);var tickFont=helpers$1.options._parseFont(tickOpts);if(opts.angleLines.display||opts.pointLabels.display){drawPointLabels(me)}helpers$1.each(me.ticks,function(label,index){if(index>0||tickOpts.reverse){var yCenterOffset=me.getDistanceFromCenterForValue(me.ticksAsNumbers[index]);if(gridLineOpts.display&&index!==0){drawRadiusLine(me,gridLineOpts,yCenterOffset,index)}if(tickOpts.display){var tickFontColor=valueOrDefault$b(tickOpts.fontColor,core_defaults.global.defaultFontColor);ctx.font=tickFont.string;ctx.save();ctx.translate(me.xCenter,me.yCenter);ctx.rotate(startAngle);if(tickOpts.showLabelBackdrop){var labelWidth=ctx.measureText(label).width;ctx.fillStyle=tickOpts.backdropColor;ctx.fillRect(-labelWidth/2-tickOpts.backdropPaddingX,-yCenterOffset-tickFont.size/2-tickOpts.backdropPaddingY,labelWidth+tickOpts.backdropPaddingX*2,tickFont.size+tickOpts.backdropPaddingY*2)}ctx.textAlign="center";ctx.textBaseline="middle";ctx.fillStyle=tickFontColor;ctx.fillText(label,0,-yCenterOffset);ctx.restore()}}})}}});var _defaults$3=defaultConfig$3;scale_radialLinear._defaults=_defaults$3;var valueOrDefault$c=helpers$1.valueOrDefault;var MIN_INTEGER=Number.MIN_SAFE_INTEGER||-9007199254740991;var MAX_INTEGER=Number.MAX_SAFE_INTEGER||9007199254740991;var INTERVALS={millisecond:{common:true,size:1,steps:[1,2,5,10,20,50,100,250,500]},second:{common:true,size:1e3,steps:[1,2,5,10,15,30]},minute:{common:true,size:6e4,steps:[1,2,5,10,15,30]},hour:{common:true,size:36e5,steps:[1,2,3,6,12]},day:{common:true,size:864e5,steps:[1,2,5]},week:{common:false,size:6048e5,steps:[1,2,3,4]},month:{common:true,size:2628e6,steps:[1,2,3]},quarter:{common:false,size:7884e6,steps:[1,2,3,4]},year:{common:true,size:3154e7}};var UNITS=Object.keys(INTERVALS);function sorter(a,b){return a-b}function arrayUnique(items){var hash={};var out=[];var i,ilen,item;for(i=0,ilen=items.length;i<ilen;++i){item=items[i];if(!hash[item]){hash[item]=true;out.push(item)}}return out}function buildLookupTable(timestamps,min,max,distribution){if(distribution==="linear"||!timestamps.length){return[{time:min,pos:0},{time:max,pos:1}]}var table=[];var items=[min];var i,ilen,prev,curr,next;for(i=0,ilen=timestamps.length;i<ilen;++i){curr=timestamps[i];if(curr>min&&curr<max){items.push(curr)}}items.push(max);for(i=0,ilen=items.length;i<ilen;++i){next=items[i+1];prev=items[i-1];curr=items[i];if(prev===undefined||next===undefined||Math.round((next+prev)/2)!==curr){table.push({time:curr,pos:i/(ilen-1)})}}return table}function lookup(table,key,value){var lo=0;var hi=table.length-1;var mid,i0,i1;while(lo>=0&&lo<=hi){mid=lo+hi>>1;i0=table[mid-1]||null;i1=table[mid];if(!i0){return{lo:null,hi:i1}}else if(i1[key]<value){lo=mid+1}else if(i0[key]>value){hi=mid-1}else{return{lo:i0,hi:i1}}}return{lo:i1,hi:null}}function interpolate$1(table,skey,sval,tkey){var range=lookup(table,skey,sval);var prev=!range.lo?table[0]:!range.hi?table[table.length-2]:range.lo;var next=!range.lo?table[1]:!range.hi?table[table.length-1]:range.hi;var span=next[skey]-prev[skey];var ratio=span?(sval-prev[skey])/span:0;var offset=(next[tkey]-prev[tkey])*ratio;return prev[tkey]+offset}function toTimestamp(scale,input){var adapter=scale._adapter;var options=scale.options.time;var parser=options.parser;var format=parser||options.format;var value=input;if(typeof parser==="function"){value=parser(value)}if(!helpers$1.isFinite(value)){value=typeof format==="string"?adapter.parse(value,format):adapter.parse(value)}if(value!==null){return+value}if(!parser&&typeof format==="function"){value=format(input);if(!helpers$1.isFinite(value)){value=adapter.parse(value)}}return value}function parse(scale,input){if(helpers$1.isNullOrUndef(input)){return null}var options=scale.options.time;var value=toTimestamp(scale,scale.getRightValue(input));if(value===null){return value}if(options.round){value=+scale._adapter.startOf(value,options.round)}return value}function determineStepSize(min,max,unit,capacity){var range=max-min;var interval=INTERVALS[unit];var milliseconds=interval.size;var steps=interval.steps;var i,ilen,factor;if(!steps){return Math.ceil(range/(capacity*milliseconds))}for(i=0,ilen=steps.length;i<ilen;++i){factor=steps[i];if(Math.ceil(range/(milliseconds*factor))<=capacity){break}}return factor}function determineUnitForAutoTicks(minUnit,min,max,capacity){var ilen=UNITS.length;var i,interval,factor;for(i=UNITS.indexOf(minUnit);i<ilen-1;++i){interval=INTERVALS[UNITS[i]];factor=interval.steps?interval.steps[interval.steps.length-1]:MAX_INTEGER;if(interval.common&&Math.ceil((max-min)/(factor*interval.size))<=capacity){return UNITS[i]}}return UNITS[ilen-1]}function determineUnitForFormatting(scale,ticks,minUnit,min,max){var ilen=UNITS.length;var i,unit;for(i=ilen-1;i>=UNITS.indexOf(minUnit);i--){unit=UNITS[i];if(INTERVALS[unit].common&&scale._adapter.diff(max,min,unit)>=ticks.length){return unit}}return UNITS[minUnit?UNITS.indexOf(minUnit):0]}function determineMajorUnit(unit){for(var i=UNITS.indexOf(unit)+1,ilen=UNITS.length;i<ilen;++i){if(INTERVALS[UNITS[i]].common){return UNITS[i]}}}function generate(scale,min,max,capacity){var adapter=scale._adapter;var options=scale.options;var timeOpts=options.time;var minor=timeOpts.unit||determineUnitForAutoTicks(timeOpts.minUnit,min,max,capacity);var major=determineMajorUnit(minor);var stepSize=valueOrDefault$c(timeOpts.stepSize,timeOpts.unitStepSize);var weekday=minor==="week"?timeOpts.isoWeekday:false;var majorTicksEnabled=options.ticks.major.enabled;var interval=INTERVALS[minor];var first=min;var last=max;var ticks=[];var time;if(!stepSize){stepSize=determineStepSize(min,max,minor,capacity)}if(weekday){first=+adapter.startOf(first,"isoWeek",weekday);last=+adapter.startOf(last,"isoWeek",weekday)}first=+adapter.startOf(first,weekday?"day":minor);last=+adapter.startOf(last,weekday?"day":minor);if(last<max){last=+adapter.add(last,1,minor)}time=first;if(majorTicksEnabled&&major&&!weekday&&!timeOpts.round){time=+adapter.startOf(time,major);time=+adapter.add(time,~~((first-time)/(interval.size*stepSize))*stepSize,minor)}for(;time<last;time=+adapter.add(time,stepSize,minor)){ticks.push(+time)}ticks.push(+time);return ticks}function computeOffsets(table,ticks,min,max,options){var start=0;var end=0;var first,last;if(options.offset&&ticks.length){if(!options.time.min){first=interpolate$1(table,"time",ticks[0],"pos");if(ticks.length===1){start=1-first}else{start=(interpolate$1(table,"time",ticks[1],"pos")-first)/2}}if(!options.time.max){last=interpolate$1(table,"time",ticks[ticks.length-1],"pos");if(ticks.length===1){end=last}else{end=(last-interpolate$1(table,"time",ticks[ticks.length-2],"pos"))/2}}}return{start:start,end:end}}function ticksFromTimestamps(scale,values,majorUnit){var ticks=[];var i,ilen,value,major;for(i=0,ilen=values.length;i<ilen;++i){value=values[i];major=majorUnit?value===+scale._adapter.startOf(value,majorUnit):false;ticks.push({value:value,major:major})}return ticks}var defaultConfig$4={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:false,format:false,unit:false,round:false,displayFormat:false,isoWeekday:false,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:false,source:"auto",major:{enabled:false}}};var scale_time=core_scale.extend({initialize:function(){this.mergeTicksOptions();core_scale.prototype.initialize.call(this)},update:function(){var me=this;var options=me.options;var time=options.time||(options.time={});var adapter=me._adapter=new core_adapters._date(options.adapters.date);if(time.format){console.warn("options.time.format is deprecated and replaced by options.time.parser.")}helpers$1.mergeIf(time.displayFormats,adapter.formats());return core_scale.prototype.update.apply(me,arguments)},getRightValue:function(rawValue){if(rawValue&&rawValue.t!==undefined){rawValue=rawValue.t}return core_scale.prototype.getRightValue.call(this,rawValue)},determineDataLimits:function(){var me=this;var chart=me.chart;var adapter=me._adapter;var timeOpts=me.options.time;var unit=timeOpts.unit||"day";var min=MAX_INTEGER;var max=MIN_INTEGER;var timestamps=[];var datasets=[];var labels=[];var i,j,ilen,jlen,data,timestamp;var dataLabels=chart.data.labels||[];for(i=0,ilen=dataLabels.length;i<ilen;++i){labels.push(parse(me,dataLabels[i]))}for(i=0,ilen=(chart.data.datasets||[]).length;i<ilen;++i){if(chart.isDatasetVisible(i)){data=chart.data.datasets[i].data;if(helpers$1.isObject(data[0])){datasets[i]=[];for(j=0,jlen=data.length;j<jlen;++j){timestamp=parse(me,data[j]);timestamps.push(timestamp);datasets[i][j]=timestamp}}else{for(j=0,jlen=labels.length;j<jlen;++j){timestamps.push(labels[j])}datasets[i]=labels.slice(0)}}else{datasets[i]=[]}}if(labels.length){labels=arrayUnique(labels).sort(sorter);min=Math.min(min,labels[0]);max=Math.max(max,labels[labels.length-1])}if(timestamps.length){timestamps=arrayUnique(timestamps).sort(sorter);min=Math.min(min,timestamps[0]);max=Math.max(max,timestamps[timestamps.length-1])}min=parse(me,timeOpts.min)||min;max=parse(me,timeOpts.max)||max;min=min===MAX_INTEGER?+adapter.startOf(Date.now(),unit):min;max=max===MIN_INTEGER?+adapter.endOf(Date.now(),unit)+1:max;me.min=Math.min(min,max);me.max=Math.max(min+1,max);me._horizontal=me.isHorizontal();me._table=[];me._timestamps={data:timestamps,datasets:datasets,labels:labels}},buildTicks:function(){var me=this;var min=me.min;var max=me.max;var options=me.options;var timeOpts=options.time;var timestamps=[];var ticks=[];var i,ilen,timestamp;switch(options.ticks.source){case"data":timestamps=me._timestamps.data;break;case"labels":timestamps=me._timestamps.labels;break;case"auto":default:timestamps=generate(me,min,max,me.getLabelCapacity(min),options)}if(options.bounds==="ticks"&&timestamps.length){min=timestamps[0];max=timestamps[timestamps.length-1]}min=parse(me,timeOpts.min)||min;max=parse(me,timeOpts.max)||max;for(i=0,ilen=timestamps.length;i<ilen;++i){timestamp=timestamps[i];if(timestamp>=min&&timestamp<=max){ticks.push(timestamp)}}me.min=min;me.max=max;me._unit=timeOpts.unit||determineUnitForFormatting(me,ticks,timeOpts.minUnit,me.min,me.max);me._majorUnit=determineMajorUnit(me._unit);me._table=buildLookupTable(me._timestamps.data,min,max,options.distribution);me._offsets=computeOffsets(me._table,ticks,min,max,options);if(options.ticks.reverse){ticks.reverse()}return ticksFromTimestamps(me,ticks,me._majorUnit)},getLabelForIndex:function(index,datasetIndex){var me=this;var adapter=me._adapter;var data=me.chart.data;var timeOpts=me.options.time;var label=data.labels&&index<data.labels.length?data.labels[index]:"";var value=data.datasets[datasetIndex].data[index];if(helpers$1.isObject(value)){label=me.getRightValue(value)}if(timeOpts.tooltipFormat){return adapter.format(toTimestamp(me,label),timeOpts.tooltipFormat)}if(typeof label==="string"){return label}return adapter.format(toTimestamp(me,label),timeOpts.displayFormats.datetime)},tickFormatFunction:function(time,index,ticks,format){var me=this;var adapter=me._adapter;var options=me.options;var formats=options.time.displayFormats;var minorFormat=formats[me._unit];var majorUnit=me._majorUnit;var majorFormat=formats[majorUnit];var majorTime=+adapter.startOf(time,majorUnit);var majorTickOpts=options.ticks.major;var major=majorTickOpts.enabled&&majorUnit&&majorFormat&&time===majorTime;var label=adapter.format(time,format?format:major?majorFormat:minorFormat);var tickOpts=major?majorTickOpts:options.ticks.minor;var formatter=valueOrDefault$c(tickOpts.callback,tickOpts.userCallback);return formatter?formatter(label,index,ticks):label},convertTicksToLabels:function(ticks){var labels=[];var i,ilen;for(i=0,ilen=ticks.length;i<ilen;++i){labels.push(this.tickFormatFunction(ticks[i].value,i,ticks))}return labels},getPixelForOffset:function(time){var me=this;var isReverse=me.options.ticks.reverse;var size=me._horizontal?me.width:me.height;var start=me._horizontal?isReverse?me.right:me.left:isReverse?me.bottom:me.top;var pos=interpolate$1(me._table,"time",time,"pos");var offset=size*(me._offsets.start+pos)/(me._offsets.start+1+me._offsets.end);return isReverse?start-offset:start+offset},getPixelForValue:function(value,index,datasetIndex){var me=this;var time=null;if(index!==undefined&&datasetIndex!==undefined){time=me._timestamps.datasets[datasetIndex][index]}if(time===null){time=parse(me,value)}if(time!==null){return me.getPixelForOffset(time)}},getPixelForTick:function(index){var ticks=this.getTicks();return index>=0&&index<ticks.length?this.getPixelForOffset(ticks[index].value):null},getValueForPixel:function(pixel){var me=this;var size=me._horizontal?me.width:me.height;var start=me._horizontal?me.left:me.top;var pos=(size?(pixel-start)/size:0)*(me._offsets.start+1+me._offsets.start)-me._offsets.end;var time=interpolate$1(me._table,"pos",pos,"time");return me._adapter._create(time)},getLabelWidth:function(label){var me=this;var ticksOpts=me.options.ticks;var tickLabelWidth=me.ctx.measureText(label).width;var angle=helpers$1.toRadians(ticksOpts.maxRotation);var cosRotation=Math.cos(angle);var sinRotation=Math.sin(angle);var tickFontSize=valueOrDefault$c(ticksOpts.fontSize,core_defaults.global.defaultFontSize);return tickLabelWidth*cosRotation+tickFontSize*sinRotation},getLabelCapacity:function(exampleTime){var me=this;var format=me.options.time.displayFormats.millisecond;var exampleLabel=me.tickFormatFunction(exampleTime,0,[],format);var tickLabelWidth=me.getLabelWidth(exampleLabel);var innerWidth=me.isHorizontal()?me.width:me.height;var capacity=Math.floor(innerWidth/tickLabelWidth);return capacity>0?capacity:1}});var _defaults$4=defaultConfig$4;scale_time._defaults=_defaults$4;var scales={category:scale_category,linear:scale_linear,logarithmic:scale_logarithmic,radialLinear:scale_radialLinear,time:scale_time};var FORMATS={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};core_adapters._date.override(typeof moment==="function"?{_id:"moment",formats:function(){return FORMATS},parse:function(value,format){if(typeof value==="string"&&typeof format==="string"){value=moment(value,format)}else if(!(value instanceof moment)){value=moment(value)}return value.isValid()?value.valueOf():null},format:function(time,format){return moment(time).format(format)},add:function(time,amount,unit){return moment(time).add(amount,unit).valueOf()},diff:function(max,min,unit){return moment.duration(moment(max).diff(moment(min))).as(unit)},startOf:function(time,unit,weekday){time=moment(time);if(unit==="isoWeek"){return time.isoWeekday(weekday).valueOf()}return time.startOf(unit).valueOf()},endOf:function(time,unit){return moment(time).endOf(unit).valueOf()},_create:function(time){return moment(time)}}:{});core_defaults._set("global",{plugins:{filler:{propagate:true}}});var mappers={dataset:function(source){var index=source.fill;var chart=source.chart;var meta=chart.getDatasetMeta(index);var visible=meta&&chart.isDatasetVisible(index);var points=visible&&meta.dataset._children||[];var length=points.length||0;return!length?null:function(point,i){return i<length&&points[i]._view||null}},boundary:function(source){var boundary=source.boundary;var x=boundary?boundary.x:null;var y=boundary?boundary.y:null;return function(point){return{x:x===null?point.x:x,y:y===null?point.y:y}}}};function decodeFill(el,index,count){var model=el._model||{};var fill=model.fill;var target;if(fill===undefined){fill=!!model.backgroundColor}if(fill===false||fill===null){return false}if(fill===true){return"origin"}target=parseFloat(fill,10);if(isFinite(target)&&Math.floor(target)===target){if(fill[0]==="-"||fill[0]==="+"){target=index+target}if(target===index||target<0||target>=count){return false}return target}switch(fill){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return fill;default:return false}}function computeBoundary(source){var model=source.el._model||{};var scale=source.el._scale||{};var fill=source.fill;var target=null;var horizontal;if(isFinite(fill)){return null}if(fill==="start"){target=model.scaleBottom===undefined?scale.bottom:model.scaleBottom}else if(fill==="end"){target=model.scaleTop===undefined?scale.top:model.scaleTop}else if(model.scaleZero!==undefined){target=model.scaleZero}else if(scale.getBasePosition){target=scale.getBasePosition()}else if(scale.getBasePixel){target=scale.getBasePixel()}if(target!==undefined&&target!==null){if(target.x!==undefined&&target.y!==undefined){return target}if(helpers$1.isFinite(target)){horizontal=scale.isHorizontal();return{x:horizontal?target:null,y:horizontal?null:target}}}return null}function resolveTarget(sources,index,propagate){var source=sources[index];var fill=source.fill;var visited=[index];var target;if(!propagate){return fill}while(fill!==false&&visited.indexOf(fill)===-1){if(!isFinite(fill)){return fill}target=sources[fill];if(!target){return false}if(target.visible){return fill}visited.push(fill);fill=target.fill}return false}function createMapper(source){var fill=source.fill;var type="dataset";if(fill===false){return null}if(!isFinite(fill)){type="boundary"}return mappers[type](source)}function isDrawable(point){return point&&!point.skip}function drawArea(ctx,curve0,curve1,len0,len1){var i;if(!len0||!len1){return}ctx.moveTo(curve0[0].x,curve0[0].y);for(i=1;i<len0;++i){helpers$1.canvas.lineTo(ctx,curve0[i-1],curve0[i])}ctx.lineTo(curve1[len1-1].x,curve1[len1-1].y);for(i=len1-1;i>0;--i){helpers$1.canvas.lineTo(ctx,curve1[i],curve1[i-1],true)}}function doFill(ctx,points,mapper,view,color,loop){var count=points.length;var span=view.spanGaps;var curve0=[];var curve1=[];var len0=0;var len1=0;var i,ilen,index,p0,p1,d0,d1;ctx.beginPath();for(i=0,ilen=count+!!loop;i<ilen;++i){index=i%count;p0=points[index]._view;p1=mapper(p0,index,view);d0=isDrawable(p0);d1=isDrawable(p1);if(d0&&d1){len0=curve0.push(p0);len1=curve1.push(p1)}else if(len0&&len1){if(!span){drawArea(ctx,curve0,curve1,len0,len1);len0=len1=0;curve0=[];curve1=[]}else{if(d0){curve0.push(p0)}if(d1){curve1.push(p1)}}}}drawArea(ctx,curve0,curve1,len0,len1);ctx.closePath();ctx.fillStyle=color;ctx.fill()}var plugin_filler={id:"filler",afterDatasetsUpdate:function(chart,options){var count=(chart.data.datasets||[]).length;var propagate=options.propagate;var sources=[];var meta,i,el,source;for(i=0;i<count;++i){meta=chart.getDatasetMeta(i);el=meta.dataset;source=null;if(el&&el._model&&el instanceof elements.Line){source={visible:chart.isDatasetVisible(i),fill:decodeFill(el,i,count),chart:chart,el:el}}meta.$filler=source;sources.push(source)}for(i=0;i<count;++i){source=sources[i];if(!source){continue}source.fill=resolveTarget(sources,i,propagate);source.boundary=computeBoundary(source);source.mapper=createMapper(source)}},beforeDatasetDraw:function(chart,args){var meta=args.meta.$filler;if(!meta){return}var ctx=chart.ctx;var el=meta.el;var view=el._view;var points=el._children||[];var mapper=meta.mapper;var color=view.backgroundColor||core_defaults.global.defaultColor;if(mapper&&color&&points.length){helpers$1.canvas.clipArea(ctx,chart.chartArea);doFill(ctx,points,mapper,view,color,el._loop);helpers$1.canvas.unclipArea(ctx)}}};var noop$1=helpers$1.noop;var valueOrDefault$d=helpers$1.valueOrDefault;core_defaults._set("global",{legend:{display:true,position:"top",fullWidth:true,reverse:false,weight:1e3,onClick:function(e,legendItem){var index=legendItem.datasetIndex;var ci=this.chart;var meta=ci.getDatasetMeta(index);meta.hidden=meta.hidden===null?!ci.data.datasets[index].hidden:null;ci.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(chart){var data=chart.data;return helpers$1.isArray(data.datasets)?data.datasets.map(function(dataset,i){return{text:dataset.label,fillStyle:!helpers$1.isArray(dataset.backgroundColor)?dataset.backgroundColor:dataset.backgroundColor[0],hidden:!chart.isDatasetVisible(i),lineCap:dataset.borderCapStyle,lineDash:dataset.borderDash,lineDashOffset:dataset.borderDashOffset,lineJoin:dataset.borderJoinStyle,lineWidth:dataset.borderWidth,strokeStyle:dataset.borderColor,pointStyle:dataset.pointStyle,datasetIndex:i}},this):[]}}},legendCallback:function(chart){var text=[];text.push('<ul class="'+chart.id+'-legend">');for(var i=0;i<chart.data.datasets.length;i++){text.push('<li><span style="background-color:'+chart.data.datasets[i].backgroundColor+'"></span>');if(chart.data.datasets[i].label){text.push(chart.data.datasets[i].label)}text.push("</li>")}text.push("</ul>");return text.join("")}});function getBoxWidth(labelOpts,fontSize){return labelOpts.usePointStyle&&labelOpts.boxWidth>fontSize?fontSize:labelOpts.boxWidth}var Legend=core_element.extend({initialize:function(config){helpers$1.extend(this,config);this.legendHitBoxes=[];this._hoveredItem=null;this.doughnutMode=false},beforeUpdate:noop$1,update:function(maxWidth,maxHeight,margins){var me=this;me.beforeUpdate();me.maxWidth=maxWidth;me.maxHeight=maxHeight;me.margins=margins;me.beforeSetDimensions();me.setDimensions();me.afterSetDimensions();me.beforeBuildLabels();me.buildLabels();me.afterBuildLabels();me.beforeFit();me.fit();me.afterFit();me.afterUpdate();return me.minSize},afterUpdate:noop$1,beforeSetDimensions:noop$1,setDimensions:function(){var me=this;if(me.isHorizontal()){me.width=me.maxWidth;me.left=0;me.right=me.width}else{me.height=me.maxHeight;me.top=0;me.bottom=me.height}me.paddingLeft=0;me.paddingTop=0;me.paddingRight=0;me.paddingBottom=0;me.minSize={width:0,height:0}},afterSetDimensions:noop$1,beforeBuildLabels:noop$1,buildLabels:function(){var me=this;var labelOpts=me.options.labels||{};var legendItems=helpers$1.callback(labelOpts.generateLabels,[me.chart],me)||[];if(labelOpts.filter){legendItems=legendItems.filter(function(item){return labelOpts.filter(item,me.chart.data)})}if(me.options.reverse){legendItems.reverse()}me.legendItems=legendItems},afterBuildLabels:noop$1,beforeFit:noop$1,fit:function(){var me=this;var opts=me.options;var labelOpts=opts.labels;var display=opts.display;var ctx=me.ctx;var labelFont=helpers$1.options._parseFont(labelOpts);var fontSize=labelFont.size;var hitboxes=me.legendHitBoxes=[];var minSize=me.minSize;var isHorizontal=me.isHorizontal();if(isHorizontal){minSize.width=me.maxWidth;minSize.height=display?10:0}else{minSize.width=display?10:0;minSize.height=me.maxHeight}if(display){ctx.font=labelFont.string;if(isHorizontal){var lineWidths=me.lineWidths=[0];var totalHeight=0;ctx.textAlign="left";ctx.textBaseline="top";helpers$1.each(me.legendItems,function(legendItem,i){var boxWidth=getBoxWidth(labelOpts,fontSize);var width=boxWidth+fontSize/2+ctx.measureText(legendItem.text).width;if(i===0||lineWidths[lineWidths.length-1]+width+labelOpts.padding>minSize.width){totalHeight+=fontSize+labelOpts.padding;lineWidths[lineWidths.length-(i>0?0:1)]=labelOpts.padding}hitboxes[i]={left:0,top:0,width:width,height:fontSize};lineWidths[lineWidths.length-1]+=width+labelOpts.padding});minSize.height+=totalHeight}else{var vPadding=labelOpts.padding;var columnWidths=me.columnWidths=[];var totalWidth=labelOpts.padding;var currentColWidth=0;var currentColHeight=0;var itemHeight=fontSize+vPadding;helpers$1.each(me.legendItems,function(legendItem,i){var boxWidth=getBoxWidth(labelOpts,fontSize);var itemWidth=boxWidth+fontSize/2+ctx.measureText(legendItem.text).width;if(i>0&&currentColHeight+itemHeight>minSize.height-vPadding){totalWidth+=currentColWidth+labelOpts.padding;columnWidths.push(currentColWidth);currentColWidth=0;currentColHeight=0}currentColWidth=Math.max(currentColWidth,itemWidth);currentColHeight+=itemHeight;hitboxes[i]={left:0,top:0,width:itemWidth,height:fontSize}});totalWidth+=currentColWidth;columnWidths.push(currentColWidth);minSize.width+=totalWidth}}me.width=minSize.width;me.height=minSize.height},afterFit:noop$1,isHorizontal:function(){return this.options.position==="top"||this.options.position==="bottom"},draw:function(){var me=this;var opts=me.options;var labelOpts=opts.labels;var globalDefaults=core_defaults.global;var defaultColor=globalDefaults.defaultColor;var lineDefault=globalDefaults.elements.line;var legendWidth=me.width;var lineWidths=me.lineWidths;if(opts.display){var ctx=me.ctx;var fontColor=valueOrDefault$d(labelOpts.fontColor,globalDefaults.defaultFontColor);var labelFont=helpers$1.options._parseFont(labelOpts);var fontSize=labelFont.size;var cursor;ctx.textAlign="left";ctx.textBaseline="middle";ctx.lineWidth=.5;ctx.strokeStyle=fontColor;ctx.fillStyle=fontColor;ctx.font=labelFont.string;var boxWidth=getBoxWidth(labelOpts,fontSize);var hitboxes=me.legendHitBoxes;var drawLegendBox=function(x,y,legendItem){if(isNaN(boxWidth)||boxWidth<=0){return}ctx.save();var lineWidth=valueOrDefault$d(legendItem.lineWidth,lineDefault.borderWidth);ctx.fillStyle=valueOrDefault$d(legendItem.fillStyle,defaultColor);ctx.lineCap=valueOrDefault$d(legendItem.lineCap,lineDefault.borderCapStyle);ctx.lineDashOffset=valueOrDefault$d(legendItem.lineDashOffset,lineDefault.borderDashOffset);ctx.lineJoin=valueOrDefault$d(legendItem.lineJoin,lineDefault.borderJoinStyle);ctx.lineWidth=lineWidth;ctx.strokeStyle=valueOrDefault$d(legendItem.strokeStyle,defaultColor);if(ctx.setLineDash){ctx.setLineDash(valueOrDefault$d(legendItem.lineDash,lineDefault.borderDash))}if(opts.labels&&opts.labels.usePointStyle){var radius=boxWidth*Math.SQRT2/2;var centerX=x+boxWidth/2;var centerY=y+fontSize/2;helpers$1.canvas.drawPoint(ctx,legendItem.pointStyle,radius,centerX,centerY)}else{if(lineWidth!==0){ctx.strokeRect(x,y,boxWidth,fontSize)}ctx.fillRect(x,y,boxWidth,fontSize)}ctx.restore()};var fillText=function(x,y,legendItem,textWidth){var halfFontSize=fontSize/2;var xLeft=boxWidth+halfFontSize+x;var yMiddle=y+halfFontSize;ctx.fillText(legendItem.text,xLeft,yMiddle);if(legendItem.hidden){ctx.beginPath();ctx.lineWidth=2;ctx.moveTo(xLeft,yMiddle);ctx.lineTo(xLeft+textWidth,yMiddle);ctx.stroke()}};var isHorizontal=me.isHorizontal();if(isHorizontal){cursor={x:me.left+(legendWidth-lineWidths[0])/2+labelOpts.padding,y:me.top+labelOpts.padding,line:0}}else{cursor={x:me.left+labelOpts.padding,y:me.top+labelOpts.padding,line:0}}var itemHeight=fontSize+labelOpts.padding;helpers$1.each(me.legendItems,function(legendItem,i){var textWidth=ctx.measureText(legendItem.text).width;var width=boxWidth+fontSize/2+textWidth;var x=cursor.x;var y=cursor.y;if(isHorizontal){if(i>0&&x+width+labelOpts.padding>me.left+me.minSize.width){y=cursor.y+=itemHeight;cursor.line++;x=cursor.x=me.left+(legendWidth-lineWidths[cursor.line])/2+labelOpts.padding}}else if(i>0&&y+itemHeight>me.top+me.minSize.height){x=cursor.x=x+me.columnWidths[cursor.line]+labelOpts.padding;y=cursor.y=me.top+labelOpts.padding;cursor.line++}drawLegendBox(x,y,legendItem);hitboxes[i].left=x;hitboxes[i].top=y;fillText(x,y,legendItem,textWidth);if(isHorizontal){cursor.x+=width+labelOpts.padding}else{cursor.y+=itemHeight}})}},_getLegendItemAt:function(x,y){var me=this;var i,hitBox,lh;if(x>=me.left&&x<=me.right&&y>=me.top&&y<=me.bottom){lh=me.legendHitBoxes;for(i=0;i<lh.length;++i){hitBox=lh[i];if(x>=hitBox.left&&x<=hitBox.left+hitBox.width&&y>=hitBox.top&&y<=hitBox.top+hitBox.height){return me.legendItems[i]}}}return null},handleEvent:function(e){var me=this;var opts=me.options;var type=e.type==="mouseup"?"click":e.type;var hoveredItem;if(type==="mousemove"){if(!opts.onHover&&!opts.onLeave){return}}else if(type==="click"){if(!opts.onClick){return}}else{return}hoveredItem=me._getLegendItemAt(e.x,e.y);if(type==="click"){if(hoveredItem&&opts.onClick){opts.onClick.call(me,e.native,hoveredItem)}}else{if(opts.onLeave&&hoveredItem!==me._hoveredItem){if(me._hoveredItem){opts.onLeave.call(me,e.native,me._hoveredItem)}me._hoveredItem=hoveredItem}if(opts.onHover&&hoveredItem){opts.onHover.call(me,e.native,hoveredItem)}}}});function createNewLegendAndAttach(chart,legendOpts){var legend=new Legend({ctx:chart.ctx,options:legendOpts,chart:chart});core_layouts.configure(chart,legend,legendOpts);core_layouts.addBox(chart,legend);chart.legend=legend}var plugin_legend={id:"legend",_element:Legend,beforeInit:function(chart){var legendOpts=chart.options.legend;if(legendOpts){createNewLegendAndAttach(chart,legendOpts)}},beforeUpdate:function(chart){var legendOpts=chart.options.legend;var legend=chart.legend;if(legendOpts){helpers$1.mergeIf(legendOpts,core_defaults.global.legend);if(legend){core_layouts.configure(chart,legend,legendOpts);legend.options=legendOpts}else{createNewLegendAndAttach(chart,legendOpts)}}else if(legend){core_layouts.removeBox(chart,legend);delete chart.legend}},afterEvent:function(chart,e){var legend=chart.legend;if(legend){legend.handleEvent(e)}}};var noop$2=helpers$1.noop;core_defaults._set("global",{title:{display:false,fontStyle:"bold",fullWidth:true,padding:10,position:"top",text:"",weight:2e3}});var Title=core_element.extend({initialize:function(config){var me=this;helpers$1.extend(me,config);me.legendHitBoxes=[]},beforeUpdate:noop$2,update:function(maxWidth,maxHeight,margins){var me=this;me.beforeUpdate();me.maxWidth=maxWidth;me.maxHeight=maxHeight;me.margins=margins;me.beforeSetDimensions();me.setDimensions();me.afterSetDimensions();me.beforeBuildLabels();me.buildLabels();me.afterBuildLabels();me.beforeFit();me.fit();me.afterFit();me.afterUpdate();return me.minSize},afterUpdate:noop$2,beforeSetDimensions:noop$2,setDimensions:function(){var me=this;if(me.isHorizontal()){me.width=me.maxWidth;me.left=0;me.right=me.width}else{me.height=me.maxHeight;me.top=0;me.bottom=me.height}me.paddingLeft=0;me.paddingTop=0;me.paddingRight=0;me.paddingBottom=0;me.minSize={width:0,height:0}},afterSetDimensions:noop$2,beforeBuildLabels:noop$2,buildLabels:noop$2,afterBuildLabels:noop$2,beforeFit:noop$2,fit:function(){var me=this;var opts=me.options;var display=opts.display;var minSize=me.minSize;var lineCount=helpers$1.isArray(opts.text)?opts.text.length:1;var fontOpts=helpers$1.options._parseFont(opts);var textSize=display?lineCount*fontOpts.lineHeight+opts.padding*2:0;if(me.isHorizontal()){minSize.width=me.maxWidth;minSize.height=textSize}else{minSize.width=textSize;minSize.height=me.maxHeight}me.width=minSize.width;me.height=minSize.height},afterFit:noop$2,isHorizontal:function(){var pos=this.options.position;return pos==="top"||pos==="bottom"},draw:function(){var me=this;var ctx=me.ctx;var opts=me.options;if(opts.display){var fontOpts=helpers$1.options._parseFont(opts);var lineHeight=fontOpts.lineHeight;var offset=lineHeight/2+opts.padding;var rotation=0;var top=me.top;var left=me.left;var bottom=me.bottom;var right=me.right;var maxWidth,titleX,titleY;ctx.fillStyle=helpers$1.valueOrDefault(opts.fontColor,core_defaults.global.defaultFontColor);ctx.font=fontOpts.string;if(me.isHorizontal()){titleX=left+(right-left)/2;titleY=top+offset;maxWidth=right-left}else{titleX=opts.position==="left"?left+offset:right-offset;titleY=top+(bottom-top)/2;maxWidth=bottom-top;rotation=Math.PI*(opts.position==="left"?-.5:.5)}ctx.save();ctx.translate(titleX,titleY);ctx.rotate(rotation);ctx.textAlign="center";ctx.textBaseline="middle";var text=opts.text;if(helpers$1.isArray(text)){var y=0;for(var i=0;i<text.length;++i){ctx.fillText(text[i],0,y,maxWidth);y+=lineHeight}}else{ctx.fillText(text,0,0,maxWidth)}ctx.restore()}}});function createNewTitleBlockAndAttach(chart,titleOpts){var title=new Title({ctx:chart.ctx,options:titleOpts,chart:chart});core_layouts.configure(chart,title,titleOpts);core_layouts.addBox(chart,title);chart.titleBlock=title}var plugin_title={id:"title",_element:Title,beforeInit:function(chart){var titleOpts=chart.options.title;if(titleOpts){createNewTitleBlockAndAttach(chart,titleOpts)}},beforeUpdate:function(chart){var titleOpts=chart.options.title;var titleBlock=chart.titleBlock;if(titleOpts){helpers$1.mergeIf(titleOpts,core_defaults.global.title);if(titleBlock){core_layouts.configure(chart,titleBlock,titleOpts);titleBlock.options=titleOpts}else{createNewTitleBlockAndAttach(chart,titleOpts)}}else if(titleBlock){core_layouts.removeBox(chart,titleBlock);delete chart.titleBlock}}};var plugins={};var filler=plugin_filler;var legend=plugin_legend;var title=plugin_title;plugins.filler=filler;plugins.legend=legend;plugins.title=title;core_controller.helpers=helpers$1;core_helpers(core_controller);core_controller._adapters=core_adapters;core_controller.Animation=core_animation;core_controller.animationService=core_animations;core_controller.controllers=controllers;core_controller.DatasetController=core_datasetController;core_controller.defaults=core_defaults;core_controller.Element=core_element;core_controller.elements=elements;core_controller.Interaction=core_interaction;core_controller.layouts=core_layouts;core_controller.platform=platform;core_controller.plugins=core_plugins;core_controller.Scale=core_scale;core_controller.scaleService=core_scaleService;core_controller.Ticks=core_ticks;core_controller.Tooltip=core_tooltip;core_controller.helpers.each(scales,function(scale,type){core_controller.scaleService.registerScaleType(type,scale,scale._defaults)});for(var k in plugins){if(plugins.hasOwnProperty(k)){core_controller.plugins.register(plugins[k])}}core_controller.platform.initialize();var src=core_controller;if(typeof window!=="undefined"){window.Chart=core_controller}core_controller.Chart=core_controller;core_controller.Legend=plugins.legend._element;core_controller.Title=plugins.title._element;core_controller.pluginService=core_controller.plugins;core_controller.PluginBase=core_controller.Element.extend({});core_controller.canvasHelpers=core_controller.helpers.canvas;core_controller.layoutService=core_controller.layouts;core_controller.LinearScaleBase=scale_linearbase;core_controller.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],function(klass){core_controller[klass]=function(ctx,cfg){return new core_controller(ctx,core_controller.helpers.merge(cfg||{},{type:klass.charAt(0).toLowerCase()+klass.slice(1)}))}});return src})},{moment:36}],9:[function(require,module,exports){module.exports=require("./src-es5/dygraph")},{"./src-es5/dygraph":26}],10:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _bars=require("./bars");var _bars2=_interopRequireDefault(_bars);var CustomBarsHandler=function CustomBarsHandler(){};CustomBarsHandler.prototype=new _bars2["default"];CustomBarsHandler.prototype.extractSeries=function(rawData,i,options){var series=[];var x,y,point;var logScale=options.get("logscale");for(var j=0;j<rawData.length;j++){x=rawData[j][0];point=rawData[j][i];if(logScale&&point!==null){if(point[0]<=0||point[1]<=0||point[2]<=0){point=null}}if(point!==null){y=point[1];if(y!==null&&!isNaN(y)){series.push([x,y,[point[0],point[2]]])}else{series.push([x,y,[y,y]])}}else{series.push([x,null,[null,null]])}}return series};CustomBarsHandler.prototype.rollingAverage=function(originalData,rollPeriod,options){rollPeriod=Math.min(rollPeriod,originalData.length);var rollingData=[];var y,low,high,mid,count,i,extremes;low=0;mid=0;high=0;count=0;for(i=0;i<originalData.length;i++){y=originalData[i][1];extremes=originalData[i][2];rollingData[i]=originalData[i];if(y!==null&&!isNaN(y)){low+=extremes[0];mid+=y;high+=extremes[1];count+=1}if(i-rollPeriod>=0){var prev=originalData[i-rollPeriod];if(prev[1]!==null&&!isNaN(prev[1])){low-=prev[2][0];mid-=prev[1];high-=prev[2][1];count-=1}}if(count){rollingData[i]=[originalData[i][0],1*mid/count,[1*low/count,1*high/count]]}else{rollingData[i]=[originalData[i][0],null,[null,null]]}}return rollingData};exports["default"]=CustomBarsHandler;module.exports=exports["default"]},{"./bars":13}],11:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _bars=require("./bars");var _bars2=_interopRequireDefault(_bars);var ErrorBarsHandler=function ErrorBarsHandler(){};ErrorBarsHandler.prototype=new _bars2["default"];ErrorBarsHandler.prototype.extractSeries=function(rawData,i,options){var series=[];var x,y,variance,point;var sigma=options.get("sigma");var logScale=options.get("logscale");for(var j=0;j<rawData.length;j++){x=rawData[j][0];point=rawData[j][i];if(logScale&&point!==null){if(point[0]<=0||point[0]-sigma*point[1]<=0){point=null}}if(point!==null){y=point[0];if(y!==null&&!isNaN(y)){variance=sigma*point[1];series.push([x,y,[y-variance,y+variance,point[1]]])}else{series.push([x,y,[y,y,y]])}}else{series.push([x,null,[null,null,null]])}}return series};ErrorBarsHandler.prototype.rollingAverage=function(originalData,rollPeriod,options){rollPeriod=Math.min(rollPeriod,originalData.length);var rollingData=[];var sigma=options.get("sigma");var i,j,y,v,sum,num_ok,stddev,variance,value;for(i=0;i<originalData.length;i++){sum=0;variance=0;num_ok=0;for(j=Math.max(0,i-rollPeriod+1);j<i+1;j++){y=originalData[j][1];if(y===null||isNaN(y))continue;num_ok++;sum+=y;variance+=Math.pow(originalData[j][2][2],2)}if(num_ok){stddev=Math.sqrt(variance)/num_ok;value=sum/num_ok;rollingData[i]=[originalData[i][0],value,[value-sigma*stddev,value+sigma*stddev]]}else{v=rollPeriod==1?originalData[i][1]:null;rollingData[i]=[originalData[i][0],v,[v,v]]}}return rollingData};exports["default"]=ErrorBarsHandler;module.exports=exports["default"]},{"./bars":13}],12:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _bars=require("./bars");var _bars2=_interopRequireDefault(_bars);var FractionsBarsHandler=function FractionsBarsHandler(){};FractionsBarsHandler.prototype=new _bars2["default"];FractionsBarsHandler.prototype.extractSeries=function(rawData,i,options){var series=[];var x,y,point,num,den,value,stddev,variance;var mult=100;var sigma=options.get("sigma");var logScale=options.get("logscale");for(var j=0;j<rawData.length;j++){x=rawData[j][0];point=rawData[j][i];if(logScale&&point!==null){if(point[0]<=0||point[1]<=0){point=null}}if(point!==null){num=point[0];den=point[1];if(num!==null&&!isNaN(num)){value=den?num/den:0;stddev=den?sigma*Math.sqrt(value*(1-value)/den):1;variance=mult*stddev;y=mult*value;series.push([x,y,[y-variance,y+variance,num,den]])}else{series.push([x,num,[num,num,num,den]])}}else{series.push([x,null,[null,null,null,null]])}}return series};FractionsBarsHandler.prototype.rollingAverage=function(originalData,rollPeriod,options){rollPeriod=Math.min(rollPeriod,originalData.length);var rollingData=[];var sigma=options.get("sigma");var wilsonInterval=options.get("wilsonInterval");var low,high,i,stddev;var num=0;var den=0;var mult=100;for(i=0;i<originalData.length;i++){num+=originalData[i][2][2];den+=originalData[i][2][3];if(i-rollPeriod>=0){num-=originalData[i-rollPeriod][2][2];den-=originalData[i-rollPeriod][2][3]}var date=originalData[i][0];var value=den?num/den:0;if(wilsonInterval){if(den){var p=value<0?0:value,n=den;var pm=sigma*Math.sqrt(p*(1-p)/n+sigma*sigma/(4*n*n));var denom=1+sigma*sigma/den;low=(p+sigma*sigma/(2*den)-pm)/denom;high=(p+sigma*sigma/(2*den)+pm)/denom;rollingData[i]=[date,p*mult,[low*mult,high*mult]]}else{rollingData[i]=[date,0,[0,0]]}}else{stddev=den?sigma*Math.sqrt(value*(1-value)/den):1;rollingData[i]=[date,mult*value,[mult*(value-stddev),mult*(value+stddev)]]}}return rollingData};exports["default"]=FractionsBarsHandler;module.exports=exports["default"]},{"./bars":13}],13:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _datahandler=require("./datahandler");var _datahandler2=_interopRequireDefault(_datahandler);var _dygraphLayout=require("../dygraph-layout");var _dygraphLayout2=_interopRequireDefault(_dygraphLayout);var BarsHandler=function BarsHandler(){_datahandler2["default"].call(this)};BarsHandler.prototype=new _datahandler2["default"];BarsHandler.prototype.extractSeries=function(rawData,seriesIndex,options){};BarsHandler.prototype.rollingAverage=function(series,rollPeriod,options){};BarsHandler.prototype.onPointsCreated_=function(series,points){for(var i=0;i<series.length;++i){var item=series[i];var point=points[i];point.y_top=NaN;point.y_bottom=NaN;point.yval_minus=_datahandler2["default"].parseFloat(item[2][0]);point.yval_plus=_datahandler2["default"].parseFloat(item[2][1])}};BarsHandler.prototype.getExtremeYValues=function(series,dateWindow,options){var minY=null,maxY=null,y;var firstIdx=0;var lastIdx=series.length-1;for(var j=firstIdx;j<=lastIdx;j++){y=series[j][1];if(y===null||isNaN(y))continue;var low=series[j][2][0];var high=series[j][2][1];if(low>y)low=y;if(high<y)high=y;if(maxY===null||high>maxY)maxY=high;if(minY===null||low<minY)minY=low}return[minY,maxY]};BarsHandler.prototype.onLineEvaluated=function(points,axis,logscale){var point;for(var j=0;j<points.length;j++){point=points[j];point.y_top=_dygraphLayout2["default"].calcYNormal_(axis,point.yval_minus,logscale);point.y_bottom=_dygraphLayout2["default"].calcYNormal_(axis,point.yval_plus,logscale)}};exports["default"]=BarsHandler;module.exports=exports["default"]},{"../dygraph-layout":21,"./datahandler":14}],14:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var DygraphDataHandler=function DygraphDataHandler(){};var handler=DygraphDataHandler;handler.X=0;handler.Y=1;handler.EXTRAS=2;handler.prototype.extractSeries=function(rawData,seriesIndex,options){};handler.prototype.seriesToPoints=function(series,setName,boundaryIdStart){var points=[];for(var i=0;i<series.length;++i){var item=series[i];var yraw=item[1];var yval=yraw===null?null:handler.parseFloat(yraw);var point={x:NaN,y:NaN,xval:handler.parseFloat(item[0]),yval:yval,name:setName,idx:i+boundaryIdStart};points.push(point)}this.onPointsCreated_(series,points);return points};handler.prototype.onPointsCreated_=function(series,points){};handler.prototype.rollingAverage=function(series,rollPeriod,options){};handler.prototype.getExtremeYValues=function(series,dateWindow,options){};handler.prototype.onLineEvaluated=function(points,axis,logscale){};handler.parseFloat=function(val){if(val===null){return NaN}return val};exports["default"]=DygraphDataHandler;module.exports=exports["default"]},{}],15:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _datahandler=require("./datahandler");var _datahandler2=_interopRequireDefault(_datahandler);var _default=require("./default");var _default2=_interopRequireDefault(_default);var DefaultFractionHandler=function DefaultFractionHandler(){};DefaultFractionHandler.prototype=new _default2["default"];DefaultFractionHandler.prototype.extractSeries=function(rawData,i,options){var series=[];var x,y,point,num,den,value;var mult=100;var logScale=options.get("logscale");for(var j=0;j<rawData.length;j++){x=rawData[j][0];point=rawData[j][i];if(logScale&&point!==null){if(point[0]<=0||point[1]<=0){point=null}}if(point!==null){num=point[0];den=point[1];if(num!==null&&!isNaN(num)){value=den?num/den:0;y=mult*value;series.push([x,y,[num,den]])}else{series.push([x,num,[num,den]])}}else{series.push([x,null,[null,null]])}}return series};DefaultFractionHandler.prototype.rollingAverage=function(originalData,rollPeriod,options){rollPeriod=Math.min(rollPeriod,originalData.length);var rollingData=[];var i;var num=0;var den=0;var mult=100;for(i=0;i<originalData.length;i++){num+=originalData[i][2][0];den+=originalData[i][2][1];if(i-rollPeriod>=0){num-=originalData[i-rollPeriod][2][0];den-=originalData[i-rollPeriod][2][1]}var date=originalData[i][0];var value=den?num/den:0;rollingData[i]=[date,mult*value]}return rollingData};exports["default"]=DefaultFractionHandler;module.exports=exports["default"]},{"./datahandler":14,"./default":16}],16:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _datahandler=require("./datahandler");var _datahandler2=_interopRequireDefault(_datahandler);var DefaultHandler=function DefaultHandler(){};DefaultHandler.prototype=new _datahandler2["default"];DefaultHandler.prototype.extractSeries=function(rawData,i,options){var series=[];var logScale=options.get("logscale");for(var j=0;j<rawData.length;j++){var x=rawData[j][0];var point=rawData[j][i];if(logScale){if(point<=0){point=null}}series.push([x,point])}return series};DefaultHandler.prototype.rollingAverage=function(originalData,rollPeriod,options){rollPeriod=Math.min(rollPeriod,originalData.length);var rollingData=[];var i,j,y,sum,num_ok;if(rollPeriod==1){return originalData}for(i=0;i<originalData.length;i++){sum=0;num_ok=0;for(j=Math.max(0,i-rollPeriod+1);j<i+1;j++){y=originalData[j][1];if(y===null||isNaN(y))continue;num_ok++;sum+=originalData[j][1]}if(num_ok){rollingData[i]=[originalData[i][0],sum/num_ok]}else{rollingData[i]=[originalData[i][0],null]}}return rollingData};DefaultHandler.prototype.getExtremeYValues=function(series,dateWindow,options){var minY=null,maxY=null,y;var firstIdx=0,lastIdx=series.length-1;for(var j=firstIdx;j<=lastIdx;j++){y=series[j][1];if(y===null||isNaN(y))continue;if(maxY===null||y>maxY){maxY=y}if(minY===null||y<minY){minY=y}}return[minY,maxY]};exports["default"]=DefaultHandler;module.exports=exports["default"]},{"./datahandler":14}],17:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}var _dygraphUtils=require("./dygraph-utils");var utils=_interopRequireWildcard(_dygraphUtils);var _dygraph=require("./dygraph");var _dygraph2=_interopRequireDefault(_dygraph);var DygraphCanvasRenderer=function DygraphCanvasRenderer(dygraph,element,elementContext,layout){this.dygraph_=dygraph;this.layout=layout;this.element=element;this.elementContext=elementContext;this.height=dygraph.height_;this.width=dygraph.width_;if(!utils.isCanvasSupported(this.element)){throw"Canvas is not supported."}this.area=layout.getPlotArea();var ctx=this.dygraph_.canvas_ctx_;ctx.beginPath();ctx.rect(this.area.x,this.area.y,this.area.w,this.area.h);ctx.clip();ctx=this.dygraph_.hidden_ctx_;ctx.beginPath();ctx.rect(this.area.x,this.area.y,this.area.w,this.area.h);ctx.clip()};DygraphCanvasRenderer.prototype.clear=function(){this.elementContext.clearRect(0,0,this.width,this.height)};DygraphCanvasRenderer.prototype.render=function(){this._updatePoints();this._renderLineChart()};DygraphCanvasRenderer._getIteratorPredicate=function(connectSeparatedPoints){return connectSeparatedPoints?DygraphCanvasRenderer._predicateThatSkipsEmptyPoints:null};DygraphCanvasRenderer._predicateThatSkipsEmptyPoints=function(array,idx){return array[idx].yval!==null};DygraphCanvasRenderer._drawStyledLine=function(e,color,strokeWidth,strokePattern,drawPoints,drawPointCallback,pointSize){var g=e.dygraph;var stepPlot=g.getBooleanOption("stepPlot",e.setName);if(!utils.isArrayLike(strokePattern)){strokePattern=null}var drawGapPoints=g.getBooleanOption("drawGapEdgePoints",e.setName);var points=e.points;var setName=e.setName;var iter=utils.createIterator(points,0,points.length,DygraphCanvasRenderer._getIteratorPredicate(g.getBooleanOption("connectSeparatedPoints",setName)));var stroking=strokePattern&&strokePattern.length>=2;var ctx=e.drawingContext;ctx.save();if(stroking){if(ctx.setLineDash)ctx.setLineDash(strokePattern)}var pointsOnLine=DygraphCanvasRenderer._drawSeries(e,iter,strokeWidth,pointSize,drawPoints,drawGapPoints,stepPlot,color);DygraphCanvasRenderer._drawPointsOnLine(e,pointsOnLine,drawPointCallback,color,pointSize);if(stroking){if(ctx.setLineDash)ctx.setLineDash([])}ctx.restore()};DygraphCanvasRenderer._drawSeries=function(e,iter,strokeWidth,pointSize,drawPoints,drawGapPoints,stepPlot,color){var prevCanvasX=null;var prevCanvasY=null;var nextCanvasY=null;var isIsolated;var point;var pointsOnLine=[];var first=true;var ctx=e.drawingContext;ctx.beginPath();ctx.strokeStyle=color;ctx.lineWidth=strokeWidth;var arr=iter.array_;var limit=iter.end_;var predicate=iter.predicate_;for(var i=iter.start_;i<limit;i++){point=arr[i];if(predicate){while(i<limit&&!predicate(arr,i)){i++}if(i==limit)break;point=arr[i]}if(point.canvasy===null||point.canvasy!=point.canvasy){if(stepPlot&&prevCanvasX!==null){ctx.moveTo(prevCanvasX,prevCanvasY);ctx.lineTo(point.canvasx,prevCanvasY)}prevCanvasX=prevCanvasY=null}else{isIsolated=false;if(drawGapPoints||prevCanvasX===null){iter.nextIdx_=i;iter.next();nextCanvasY=iter.hasNext?iter.peek.canvasy:null;var isNextCanvasYNullOrNaN=nextCanvasY===null||nextCanvasY!=nextCanvasY;isIsolated=prevCanvasX===null&&isNextCanvasYNullOrNaN;if(drawGapPoints){if(!first&&prevCanvasX===null||iter.hasNext&&isNextCanvasYNullOrNaN){isIsolated=true}}}if(prevCanvasX!==null){if(strokeWidth){if(stepPlot){ctx.moveTo(prevCanvasX,prevCanvasY);ctx.lineTo(point.canvasx,prevCanvasY)}ctx.lineTo(point.canvasx,point.canvasy)}}else{ctx.moveTo(point.canvasx,point.canvasy)}if(drawPoints||isIsolated){pointsOnLine.push([point.canvasx,point.canvasy,point.idx])}prevCanvasX=point.canvasx;prevCanvasY=point.canvasy}first=false}ctx.stroke();return pointsOnLine};DygraphCanvasRenderer._drawPointsOnLine=function(e,pointsOnLine,drawPointCallback,color,pointSize){var ctx=e.drawingContext;for(var idx=0;idx<pointsOnLine.length;idx++){var cb=pointsOnLine[idx];ctx.save();drawPointCallback.call(e.dygraph,e.dygraph,e.setName,ctx,cb[0],cb[1],color,pointSize,cb[2]);ctx.restore()}};DygraphCanvasRenderer.prototype._updatePoints=function(){var sets=this.layout.points;for(var i=sets.length;i--;){var points=sets[i];for(var j=points.length;j--;){var point=points[j];point.canvasx=this.area.w*point.x+this.area.x;point.canvasy=this.area.h*point.y+this.area.y}}};DygraphCanvasRenderer.prototype._renderLineChart=function(opt_seriesName,opt_ctx){var ctx=opt_ctx||this.elementContext;var i;var sets=this.layout.points;var setNames=this.layout.setNames;var setName;this.colors=this.dygraph_.colorsMap_;var plotter_attr=this.dygraph_.getOption("plotter");var plotters=plotter_attr;if(!utils.isArrayLike(plotters)){plotters=[plotters]}var setPlotters={};for(i=0;i<setNames.length;i++){setName=setNames[i];var setPlotter=this.dygraph_.getOption("plotter",setName);if(setPlotter==plotter_attr)continue;setPlotters[setName]=setPlotter}for(i=0;i<plotters.length;i++){var plotter=plotters[i];var is_last=i==plotters.length-1;for(var j=0;j<sets.length;j++){setName=setNames[j];if(opt_seriesName&&setName!=opt_seriesName)continue;var points=sets[j];var p=plotter;if(setName in setPlotters){if(is_last){p=setPlotters[setName]}else{continue}}var color=this.colors[setName];var strokeWidth=this.dygraph_.getOption("strokeWidth",setName);ctx.save();ctx.strokeStyle=color;ctx.lineWidth=strokeWidth;p({points:points,setName:setName,drawingContext:ctx,color:color,strokeWidth:strokeWidth,dygraph:this.dygraph_,axis:this.dygraph_.axisPropertiesForSeries(setName),plotArea:this.area,seriesIndex:j,seriesCount:sets.length,singleSeriesName:opt_seriesName,allSeriesPoints:sets});ctx.restore()}}};DygraphCanvasRenderer._Plotters={linePlotter:function linePlotter(e){DygraphCanvasRenderer._linePlotter(e)},fillPlotter:function fillPlotter(e){DygraphCanvasRenderer._fillPlotter(e)},errorPlotter:function errorPlotter(e){DygraphCanvasRenderer._errorPlotter(e)}};DygraphCanvasRenderer._linePlotter=function(e){var g=e.dygraph;var setName=e.setName;var strokeWidth=e.strokeWidth;var borderWidth=g.getNumericOption("strokeBorderWidth",setName);var drawPointCallback=g.getOption("drawPointCallback",setName)||utils.Circles.DEFAULT;var strokePattern=g.getOption("strokePattern",setName);var drawPoints=g.getBooleanOption("drawPoints",setName);var pointSize=g.getNumericOption("pointSize",setName);if(borderWidth&&strokeWidth){DygraphCanvasRenderer._drawStyledLine(e,g.getOption("strokeBorderColor",setName),strokeWidth+2*borderWidth,strokePattern,drawPoints,drawPointCallback,pointSize)}DygraphCanvasRenderer._drawStyledLine(e,e.color,strokeWidth,strokePattern,drawPoints,drawPointCallback,pointSize)};DygraphCanvasRenderer._errorPlotter=function(e){var g=e.dygraph;var setName=e.setName;var errorBars=g.getBooleanOption("errorBars")||g.getBooleanOption("customBars");if(!errorBars)return;var fillGraph=g.getBooleanOption("fillGraph",setName);if(fillGraph){console.warn("Can't use fillGraph option with error bars")}var ctx=e.drawingContext;var color=e.color;var fillAlpha=g.getNumericOption("fillAlpha",setName);var stepPlot=g.getBooleanOption("stepPlot",setName);var points=e.points;var iter=utils.createIterator(points,0,points.length,DygraphCanvasRenderer._getIteratorPredicate(g.getBooleanOption("connectSeparatedPoints",setName)));var newYs;var prevX=NaN;var prevY=NaN;var prevYs=[-1,-1];var rgb=utils.toRGB_(color);var err_color="rgba("+rgb.r+","+rgb.g+","+rgb.b+","+fillAlpha+")";ctx.fillStyle=err_color;ctx.beginPath();var isNullUndefinedOrNaN=function isNullUndefinedOrNaN(x){return x===null||x===undefined||isNaN(x)};while(iter.hasNext){var point=iter.next();if(!stepPlot&&isNullUndefinedOrNaN(point.y)||stepPlot&&!isNaN(prevY)&&isNullUndefinedOrNaN(prevY)){prevX=NaN;continue}newYs=[point.y_bottom,point.y_top];if(stepPlot){prevY=point.y}if(isNaN(newYs[0]))newYs[0]=point.y;if(isNaN(newYs[1]))newYs[1]=point.y;newYs[0]=e.plotArea.h*newYs[0]+e.plotArea.y;newYs[1]=e.plotArea.h*newYs[1]+e.plotArea.y;if(!isNaN(prevX)){if(stepPlot){ctx.moveTo(prevX,prevYs[0]);ctx.lineTo(point.canvasx,prevYs[0]);ctx.lineTo(point.canvasx,prevYs[1])}else{ctx.moveTo(prevX,prevYs[0]);ctx.lineTo(point.canvasx,newYs[0]);ctx.lineTo(point.canvasx,newYs[1])}ctx.lineTo(prevX,prevYs[1]);ctx.closePath()}prevYs=newYs;prevX=point.canvasx}ctx.fill()};DygraphCanvasRenderer._fastCanvasProxy=function(context){var pendingActions=[];var lastRoundedX=null;var lastFlushedX=null;var LINE_TO=1,MOVE_TO=2;var actionCount=0;var compressActions=function compressActions(opt_losslessOnly){if(pendingActions.length<=1)return;for(var i=pendingActions.length-1;i>0;i--){var action=pendingActions[i];if(action[0]==MOVE_TO){var prevAction=pendingActions[i-1];if(prevAction[1]==action[1]&&prevAction[2]==action[2]){pendingActions.splice(i,1)}}}for(var i=0;i<pendingActions.length-1;){var action=pendingActions[i];if(action[0]==MOVE_TO&&pendingActions[i+1][0]==MOVE_TO){pendingActions.splice(i,1)}else{i++}}if(pendingActions.length>2&&!opt_losslessOnly){var startIdx=0;if(pendingActions[0][0]==MOVE_TO)startIdx++;var minIdx=null,maxIdx=null;for(var i=startIdx;i<pendingActions.length;i++){var action=pendingActions[i];if(action[0]!=LINE_TO)continue;if(minIdx===null&&maxIdx===null){minIdx=i;maxIdx=i}else{var y=action[2];if(y<pendingActions[minIdx][2]){minIdx=i}else if(y>pendingActions[maxIdx][2]){maxIdx=i}}}var minAction=pendingActions[minIdx],maxAction=pendingActions[maxIdx];pendingActions.splice(startIdx,pendingActions.length-startIdx);if(minIdx<maxIdx){pendingActions.push(minAction);pendingActions.push(maxAction)}else if(minIdx>maxIdx){pendingActions.push(maxAction);pendingActions.push(minAction)}else{pendingActions.push(minAction)}}};var flushActions=function flushActions(opt_noLossyCompression){compressActions(opt_noLossyCompression);for(var i=0,len=pendingActions.length;i<len;i++){var action=pendingActions[i];if(action[0]==LINE_TO){context.lineTo(action[1],action[2])}else if(action[0]==MOVE_TO){context.moveTo(action[1],action[2])}}if(pendingActions.length){lastFlushedX=pendingActions[pendingActions.length-1][1]}actionCount+=pendingActions.length;pendingActions=[]};var addAction=function addAction(action,x,y){var rx=Math.round(x);if(lastRoundedX===null||rx!=lastRoundedX){var hasGapOnLeft=lastRoundedX-lastFlushedX>1,hasGapOnRight=rx-lastRoundedX>1,hasGap=hasGapOnLeft||hasGapOnRight;flushActions(hasGap);lastRoundedX=rx}pendingActions.push([action,x,y])};return{moveTo:function moveTo(x,y){addAction(MOVE_TO,x,y)},lineTo:function lineTo(x,y){addAction(LINE_TO,x,y)},stroke:function stroke(){flushActions(true);context.stroke()},fill:function fill(){flushActions(true);context.fill()},beginPath:function beginPath(){flushActions(true);context.beginPath()},closePath:function closePath(){flushActions(true);context.closePath()},_count:function _count(){return actionCount}}};DygraphCanvasRenderer._fillPlotter=function(e){if(e.singleSeriesName)return;if(e.seriesIndex!==0)return;var g=e.dygraph;var setNames=g.getLabels().slice(1);for(var i=setNames.length;i>=0;i--){if(!g.visibility()[i])setNames.splice(i,1)}var anySeriesFilled=function(){for(var i=0;i<setNames.length;i++){if(g.getBooleanOption("fillGraph",setNames[i]))return true}return false}();if(!anySeriesFilled)return;var area=e.plotArea;var sets=e.allSeriesPoints;var setCount=sets.length;var stackedGraph=g.getBooleanOption("stackedGraph");var colors=g.getColors();var baseline={};var currBaseline;var prevStepPlot;var traceBackPath=function traceBackPath(ctx,baselineX,baselineY,pathBack){ctx.lineTo(baselineX,baselineY);if(stackedGraph){for(var i=pathBack.length-1;i>=0;i--){var pt=pathBack[i];ctx.lineTo(pt[0],pt[1])}}};for(var setIdx=setCount-1;setIdx>=0;setIdx--){var ctx=e.drawingContext;var setName=setNames[setIdx];if(!g.getBooleanOption("fillGraph",setName))continue;var fillAlpha=g.getNumericOption("fillAlpha",setName);var stepPlot=g.getBooleanOption("stepPlot",setName);var color=colors[setIdx];var axis=g.axisPropertiesForSeries(setName);var axisY=1+axis.minyval*axis.yscale;if(axisY<0)axisY=0;else if(axisY>1)axisY=1;axisY=area.h*axisY+area.y;var points=sets[setIdx];var iter=utils.createIterator(points,0,points.length,DygraphCanvasRenderer._getIteratorPredicate(g.getBooleanOption("connectSeparatedPoints",setName)));var prevX=NaN;var prevYs=[-1,-1];var newYs;var rgb=utils.toRGB_(color);var err_color="rgba("+rgb.r+","+rgb.g+","+rgb.b+","+fillAlpha+")";ctx.fillStyle=err_color;ctx.beginPath();var last_x,is_first=true;if(points.length>2*g.width_||_dygraph2["default"].FORCE_FAST_PROXY){ctx=DygraphCanvasRenderer._fastCanvasProxy(ctx)}var pathBack=[];var point;while(iter.hasNext){point=iter.next();if(!utils.isOK(point.y)&&!stepPlot){traceBackPath(ctx,prevX,prevYs[1],pathBack);pathBack=[];prevX=NaN;if(point.y_stacked!==null&&!isNaN(point.y_stacked)){baseline[point.canvasx]=area.h*point.y_stacked+area.y}continue}if(stackedGraph){if(!is_first&&last_x==point.xval){continue}else{is_first=false;last_x=point.xval}currBaseline=baseline[point.canvasx];var lastY;if(currBaseline===undefined){lastY=axisY}else{if(prevStepPlot){lastY=currBaseline[0]}else{lastY=currBaseline}}newYs=[point.canvasy,lastY];if(stepPlot){if(prevYs[0]===-1){baseline[point.canvasx]=[point.canvasy,axisY]}else{baseline[point.canvasx]=[point.canvasy,prevYs[0]]}}else{baseline[point.canvasx]=point.canvasy}}else{if(isNaN(point.canvasy)&&stepPlot){newYs=[area.y+area.h,axisY]}else{newYs=[point.canvasy,axisY]}}if(!isNaN(prevX)){if(stepPlot){ctx.lineTo(point.canvasx,prevYs[0]);ctx.lineTo(point.canvasx,newYs[0])}else{ctx.lineTo(point.canvasx,newYs[0])}if(stackedGraph){pathBack.push([prevX,prevYs[1]]);if(prevStepPlot&&currBaseline){pathBack.push([point.canvasx,currBaseline[1]])}else{pathBack.push([point.canvasx,newYs[1]])}}}else{ctx.moveTo(point.canvasx,newYs[1]);ctx.lineTo(point.canvasx,newYs[0])}prevYs=newYs;prevX=point.canvasx}prevStepPlot=stepPlot;if(newYs&&point){traceBackPath(ctx,point.canvasx,newYs[1],pathBack);pathBack=[]}ctx.fill()}};exports["default"]=DygraphCanvasRenderer;module.exports=exports["default"]},{"./dygraph":26,"./dygraph-utils":25}],18:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}var _dygraphTickers=require("./dygraph-tickers");var DygraphTickers=_interopRequireWildcard(_dygraphTickers);var _dygraphInteractionModel=require("./dygraph-interaction-model");var _dygraphInteractionModel2=_interopRequireDefault(_dygraphInteractionModel);var _dygraphCanvas=require("./dygraph-canvas");var _dygraphCanvas2=_interopRequireDefault(_dygraphCanvas);var _dygraphUtils=require("./dygraph-utils");var utils=_interopRequireWildcard(_dygraphUtils);var DEFAULT_ATTRS={highlightCircleSize:3,highlightSeriesOpts:null,highlightSeriesBackgroundAlpha:.5,highlightSeriesBackgroundColor:"rgb(255, 255, 255)",labelsSeparateLines:false,labelsShowZeroValues:true,labelsKMB:false,labelsKMG2:false,showLabelsOnHighlight:true,digitsAfterDecimal:2,maxNumberWidth:6,sigFigs:null,strokeWidth:1,strokeBorderWidth:0,strokeBorderColor:"white",axisTickSize:3,axisLabelFontSize:14,rightGap:5,showRoller:false,xValueParser:undefined,delimiter:",",sigma:2,errorBars:false,fractions:false,wilsonInterval:true,customBars:false,fillGraph:false,fillAlpha:.15,connectSeparatedPoints:false,stackedGraph:false,stackedGraphNaNFill:"all",hideOverlayOnMouseOut:true,legend:"onmouseover",stepPlot:false,xRangePad:0,yRangePad:null,drawAxesAtZero:false,titleHeight:28,xLabelHeight:18,yLabelWidth:18,axisLineColor:"black",axisLineWidth:.3,gridLineWidth:.3,axisLabelWidth:50,gridLineColor:"rgb(128,128,128)",interactionModel:_dygraphInteractionModel2["default"].defaultModel,animatedZooms:false,showRangeSelector:false,rangeSelectorHeight:40,rangeSelectorPlotStrokeColor:"#808FAB",rangeSelectorPlotFillGradientColor:"white",rangeSelectorPlotFillColor:"#A7B1C4",rangeSelectorBackgroundStrokeColor:"gray",rangeSelectorBackgroundLineWidth:1,rangeSelectorPlotLineWidth:1.5,rangeSelectorForegroundStrokeColor:"black",rangeSelectorForegroundLineWidth:1,rangeSelectorAlpha:.6,showInRangeSelector:null,plotter:[_dygraphCanvas2["default"]._fillPlotter,_dygraphCanvas2["default"]._errorPlotter,_dygraphCanvas2["default"]._linePlotter],plugins:[],axes:{x:{pixelsPerLabel:70,axisLabelWidth:60,axisLabelFormatter:utils.dateAxisLabelFormatter,valueFormatter:utils.dateValueFormatter,drawGrid:true,drawAxis:true,independentTicks:true,ticker:DygraphTickers.dateTicker},y:{axisLabelWidth:50,pixelsPerLabel:30,valueFormatter:utils.numberValueFormatter,axisLabelFormatter:utils.numberAxisLabelFormatter,drawGrid:true,drawAxis:true,independentTicks:true,ticker:DygraphTickers.numericTicks},y2:{axisLabelWidth:50,pixelsPerLabel:30,valueFormatter:utils.numberValueFormatter,axisLabelFormatter:utils.numberAxisLabelFormatter,drawAxis:true,drawGrid:false,independentTicks:false,ticker:DygraphTickers.numericTicks}}};exports["default"]=DEFAULT_ATTRS;module.exports=exports["default"]},{"./dygraph-canvas":17,"./dygraph-interaction-model":20,"./dygraph-tickers":24,"./dygraph-utils":25}],19:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _dygraph=require("./dygraph");var _dygraph2=_interopRequireDefault(_dygraph);var GVizChart=function GVizChart(container){this.container=container};GVizChart.prototype.draw=function(data,options){this.container.innerHTML="";if(typeof this.date_graph!="undefined"){this.date_graph.destroy()}this.date_graph=new _dygraph2["default"](this.container,data,options)};GVizChart.prototype.setSelection=function(selection_array){var row=false;if(selection_array.length){row=selection_array[0].row}this.date_graph.setSelection(row)};GVizChart.prototype.getSelection=function(){var selection=[];var row=this.date_graph.getSelection();if(row<0)return selection;var points=this.date_graph.layout_.points;for(var setIdx=0;setIdx<points.length;++setIdx){selection.push({row:row,column:setIdx+1})}return selection};exports["default"]=GVizChart;module.exports=exports["default"]},{"./dygraph":26}],20:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}var _dygraphUtils=require("./dygraph-utils");var utils=_interopRequireWildcard(_dygraphUtils);var DRAG_EDGE_MARGIN=100;var DygraphInteraction={};DygraphInteraction.maybeTreatMouseOpAsClick=function(event,g,context){context.dragEndX=utils.dragGetX_(event,context);context.dragEndY=utils.dragGetY_(event,context);var regionWidth=Math.abs(context.dragEndX-context.dragStartX);var regionHeight=Math.abs(context.dragEndY-context.dragStartY);if(regionWidth<2&&regionHeight<2&&g.lastx_!==undefined&&g.lastx_!=-1){DygraphInteraction.treatMouseOpAsClick(g,event,context)}context.regionWidth=regionWidth;context.regionHeight=regionHeight};DygraphInteraction.startPan=function(event,g,context){var i,axis;context.isPanning=true;var xRange=g.xAxisRange();if(g.getOptionForAxis("logscale","x")){context.initialLeftmostDate=utils.log10(xRange[0]);context.dateRange=utils.log10(xRange[1])-utils.log10(xRange[0])}else{context.initialLeftmostDate=xRange[0];context.dateRange=xRange[1]-xRange[0]}context.xUnitsPerPixel=context.dateRange/(g.plotter_.area.w-1);if(g.getNumericOption("panEdgeFraction")){var maxXPixelsToDraw=g.width_*g.getNumericOption("panEdgeFraction");var xExtremes=g.xAxisExtremes();var boundedLeftX=g.toDomXCoord(xExtremes[0])-maxXPixelsToDraw;var boundedRightX=g.toDomXCoord(xExtremes[1])+maxXPixelsToDraw;var boundedLeftDate=g.toDataXCoord(boundedLeftX);var boundedRightDate=g.toDataXCoord(boundedRightX);context.boundedDates=[boundedLeftDate,boundedRightDate];var boundedValues=[];var maxYPixelsToDraw=g.height_*g.getNumericOption("panEdgeFraction");for(i=0;i<g.axes_.length;i++){axis=g.axes_[i];var yExtremes=axis.extremeRange;var boundedTopY=g.toDomYCoord(yExtremes[0],i)+maxYPixelsToDraw;var boundedBottomY=g.toDomYCoord(yExtremes[1],i)-maxYPixelsToDraw;var boundedTopValue=g.toDataYCoord(boundedTopY,i);var boundedBottomValue=g.toDataYCoord(boundedBottomY,i);boundedValues[i]=[boundedTopValue,boundedBottomValue]}context.boundedValues=boundedValues}context.is2DPan=false;context.axes=[];for(i=0;i<g.axes_.length;i++){axis=g.axes_[i];var axis_data={};var yRange=g.yAxisRange(i);var logscale=g.attributes_.getForAxis("logscale",i);if(logscale){axis_data.initialTopValue=utils.log10(yRange[1]);axis_data.dragValueRange=utils.log10(yRange[1])-utils.log10(yRange[0])}else{axis_data.initialTopValue=yRange[1];axis_data.dragValueRange=yRange[1]-yRange[0]}axis_data.unitsPerPixel=axis_data.dragValueRange/(g.plotter_.area.h-1);context.axes.push(axis_data);if(axis.valueRange)context.is2DPan=true}};DygraphInteraction.movePan=function(event,g,context){context.dragEndX=utils.dragGetX_(event,context);context.dragEndY=utils.dragGetY_(event,context);var minDate=context.initialLeftmostDate-(context.dragEndX-context.dragStartX)*context.xUnitsPerPixel;if(context.boundedDates){minDate=Math.max(minDate,context.boundedDates[0])}var maxDate=minDate+context.dateRange;if(context.boundedDates){if(maxDate>context.boundedDates[1]){minDate=minDate-(maxDate-context.boundedDates[1]);maxDate=minDate+context.dateRange}}if(g.getOptionForAxis("logscale","x")){g.dateWindow_=[Math.pow(utils.LOG_SCALE,minDate),Math.pow(utils.LOG_SCALE,maxDate)]}else{g.dateWindow_=[minDate,maxDate]}if(context.is2DPan){var pixelsDragged=context.dragEndY-context.dragStartY;for(var i=0;i<g.axes_.length;i++){var axis=g.axes_[i];var axis_data=context.axes[i];var unitsDragged=pixelsDragged*axis_data.unitsPerPixel;var boundedValue=context.boundedValues?context.boundedValues[i]:null;var maxValue=axis_data.initialTopValue+unitsDragged;if(boundedValue){maxValue=Math.min(maxValue,boundedValue[1])}var minValue=maxValue-axis_data.dragValueRange;if(boundedValue){if(minValue<boundedValue[0]){maxValue=maxValue-(minValue-boundedValue[0]);minValue=maxValue-axis_data.dragValueRange}}if(g.attributes_.getForAxis("logscale",i)){axis.valueRange=[Math.pow(utils.LOG_SCALE,minValue),Math.pow(utils.LOG_SCALE,maxValue)]}else{axis.valueRange=[minValue,maxValue]}}}g.drawGraph_(false)};DygraphInteraction.endPan=DygraphInteraction.maybeTreatMouseOpAsClick;DygraphInteraction.startZoom=function(event,g,context){context.isZooming=true;context.zoomMoved=false};DygraphInteraction.moveZoom=function(event,g,context){context.zoomMoved=true;context.dragEndX=utils.dragGetX_(event,context);context.dragEndY=utils.dragGetY_(event,context);var xDelta=Math.abs(context.dragStartX-context.dragEndX);var yDelta=Math.abs(context.dragStartY-context.dragEndY);context.dragDirection=xDelta<yDelta/2?utils.VERTICAL:utils.HORIZONTAL;g.drawZoomRect_(context.dragDirection,context.dragStartX,context.dragEndX,context.dragStartY,context.dragEndY,context.prevDragDirection,context.prevEndX,context.prevEndY);context.prevEndX=context.dragEndX;context.prevEndY=context.dragEndY;context.prevDragDirection=context.dragDirection};DygraphInteraction.treatMouseOpAsClick=function(g,event,context){var clickCallback=g.getFunctionOption("clickCallback");var pointClickCallback=g.getFunctionOption("pointClickCallback");var selectedPoint=null;var closestIdx=-1;var closestDistance=Number.MAX_VALUE;for(var i=0;i<g.selPoints_.length;i++){var p=g.selPoints_[i];var distance=Math.pow(p.canvasx-context.dragEndX,2)+Math.pow(p.canvasy-context.dragEndY,2);if(!isNaN(distance)&&(closestIdx==-1||distance<closestDistance)){closestDistance=distance;closestIdx=i}}var radius=g.getNumericOption("highlightCircleSize")+2;if(closestDistance<=radius*radius){selectedPoint=g.selPoints_[closestIdx]}if(selectedPoint){var e={cancelable:true,point:selectedPoint,canvasx:context.dragEndX,canvasy:context.dragEndY};var defaultPrevented=g.cascadeEvents_("pointClick",e);if(defaultPrevented){return}if(pointClickCallback){pointClickCallback.call(g,event,selectedPoint)}}var e={cancelable:true,xval:g.lastx_,pts:g.selPoints_,canvasx:context.dragEndX,canvasy:context.dragEndY};if(!g.cascadeEvents_("click",e)){if(clickCallback){clickCallback.call(g,event,g.lastx_,g.selPoints_)}}};DygraphInteraction.endZoom=function(event,g,context){g.clearZoomRect_();context.isZooming=false;DygraphInteraction.maybeTreatMouseOpAsClick(event,g,context);var plotArea=g.getArea();if(context.regionWidth>=10&&context.dragDirection==utils.HORIZONTAL){var left=Math.min(context.dragStartX,context.dragEndX),right=Math.max(context.dragStartX,context.dragEndX);left=Math.max(left,plotArea.x);right=Math.min(right,plotArea.x+plotArea.w);if(left<right){g.doZoomX_(left,right)}context.cancelNextDblclick=true}else if(context.regionHeight>=10&&context.dragDirection==utils.VERTICAL){var top=Math.min(context.dragStartY,context.dragEndY),bottom=Math.max(context.dragStartY,context.dragEndY);top=Math.max(top,plotArea.y);bottom=Math.min(bottom,plotArea.y+plotArea.h);if(top<bottom){g.doZoomY_(top,bottom)}context.cancelNextDblclick=true}context.dragStartX=null;context.dragStartY=null};DygraphInteraction.startTouch=function(event,g,context){event.preventDefault();if(event.touches.length>1){context.startTimeForDoubleTapMs=null}var touches=[];for(var i=0;i<event.touches.length;i++){var t=event.touches[i];touches.push({pageX:t.pageX,pageY:t.pageY,dataX:g.toDataXCoord(t.pageX),dataY:g.toDataYCoord(t.pageY)})}context.initialTouches=touches;if(touches.length==1){context.initialPinchCenter=touches[0];context.touchDirections={x:true,y:true}}else if(touches.length>=2){context.initialPinchCenter={pageX:.5*(touches[0].pageX+touches[1].pageX),pageY:.5*(touches[0].pageY+touches[1].pageY),dataX:.5*(touches[0].dataX+touches[1].dataX),dataY:.5*(touches[0].dataY+touches[1].dataY)};var initialAngle=180/Math.PI*Math.atan2(context.initialPinchCenter.pageY-touches[0].pageY,touches[0].pageX-context.initialPinchCenter.pageX);initialAngle=Math.abs(initialAngle);if(initialAngle>90)initialAngle=90-initialAngle;context.touchDirections={x:initialAngle<90-45/2,y:initialAngle>45/2}}context.initialRange={x:g.xAxisRange(),y:g.yAxisRange()}};DygraphInteraction.moveTouch=function(event,g,context){context.startTimeForDoubleTapMs=null;var i,touches=[];for(i=0;i<event.touches.length;i++){var t=event.touches[i];touches.push({pageX:t.pageX,pageY:t.pageY})}var initialTouches=context.initialTouches;var c_now;var c_init=context.initialPinchCenter;if(touches.length==1){c_now=touches[0]}else{c_now={pageX:.5*(touches[0].pageX+touches[1].pageX),pageY:.5*(touches[0].pageY+touches[1].pageY)}}var swipe={pageX:c_now.pageX-c_init.pageX,pageY:c_now.pageY-c_init.pageY};var dataWidth=context.initialRange.x[1]-context.initialRange.x[0];var dataHeight=context.initialRange.y[0]-context.initialRange.y[1];swipe.dataX=swipe.pageX/g.plotter_.area.w*dataWidth;swipe.dataY=swipe.pageY/g.plotter_.area.h*dataHeight;var xScale,yScale;if(touches.length==1){xScale=1;yScale=1}else if(touches.length>=2){var initHalfWidth=initialTouches[1].pageX-c_init.pageX;xScale=(touches[1].pageX-c_now.pageX)/initHalfWidth;var initHalfHeight=initialTouches[1].pageY-c_init.pageY;yScale=(touches[1].pageY-c_now.pageY)/initHalfHeight}xScale=Math.min(8,Math.max(.125,xScale));yScale=Math.min(8,Math.max(.125,yScale));var didZoom=false;if(context.touchDirections.x){g.dateWindow_=[c_init.dataX-swipe.dataX+(context.initialRange.x[0]-c_init.dataX)/xScale,c_init.dataX-swipe.dataX+(context.initialRange.x[1]-c_init.dataX)/xScale];didZoom=true}if(context.touchDirections.y){for(i=0;i<1;i++){var axis=g.axes_[i];var logscale=g.attributes_.getForAxis("logscale",i);if(logscale){}else{axis.valueRange=[c_init.dataY-swipe.dataY+(context.initialRange.y[0]-c_init.dataY)/yScale,c_init.dataY-swipe.dataY+(context.initialRange.y[1]-c_init.dataY)/yScale];didZoom=true}}}g.drawGraph_(false);if(didZoom&&touches.length>1&&g.getFunctionOption("zoomCallback")){var viewWindow=g.xAxisRange();g.getFunctionOption("zoomCallback").call(g,viewWindow[0],viewWindow[1],g.yAxisRanges())}};DygraphInteraction.endTouch=function(event,g,context){if(event.touches.length!==0){DygraphInteraction.startTouch(event,g,context)}else if(event.changedTouches.length==1){var now=(new Date).getTime();var t=event.changedTouches[0];if(context.startTimeForDoubleTapMs&&now-context.startTimeForDoubleTapMs<500&&context.doubleTapX&&Math.abs(context.doubleTapX-t.screenX)<50&&context.doubleTapY&&Math.abs(context.doubleTapY-t.screenY)<50){g.resetZoom()}else{context.startTimeForDoubleTapMs=now;context.doubleTapX=t.screenX;context.doubleTapY=t.screenY}}};var distanceFromInterval=function distanceFromInterval(x,left,right){if(x<left){return left-x}else if(x>right){return x-right}else{return 0}};var distanceFromChart=function distanceFromChart(event,g){var chartPos=utils.findPos(g.canvas_);var box={left:chartPos.x,right:chartPos.x+g.canvas_.offsetWidth,top:chartPos.y,bottom:chartPos.y+g.canvas_.offsetHeight};var pt={x:utils.pageX(event),y:utils.pageY(event)};var dx=distanceFromInterval(pt.x,box.left,box.right),dy=distanceFromInterval(pt.y,box.top,box.bottom);return Math.max(dx,dy)};DygraphInteraction.defaultModel={mousedown:function mousedown(event,g,context){if(event.button&&event.button==2)return;context.initializeMouseDown(event,g,context);if(event.altKey||event.shiftKey){DygraphInteraction.startPan(event,g,context)}else{DygraphInteraction.startZoom(event,g,context)}var mousemove=function mousemove(event){if(context.isZooming){var d=distanceFromChart(event,g);if(d<DRAG_EDGE_MARGIN){DygraphInteraction.moveZoom(event,g,context)}else{if(context.dragEndX!==null){context.dragEndX=null;context.dragEndY=null;g.clearZoomRect_()}}}else if(context.isPanning){DygraphInteraction.movePan(event,g,context)}};var mouseup=function mouseup(event){if(context.isZooming){if(context.dragEndX!==null){DygraphInteraction.endZoom(event,g,context)}else{DygraphInteraction.maybeTreatMouseOpAsClick(event,g,context)}}else if(context.isPanning){DygraphInteraction.endPan(event,g,context)}utils.removeEvent(document,"mousemove",mousemove);utils.removeEvent(document,"mouseup",mouseup);context.destroy()};g.addAndTrackEvent(document,"mousemove",mousemove);g.addAndTrackEvent(document,"mouseup",mouseup)},willDestroyContextMyself:true,touchstart:function touchstart(event,g,context){DygraphInteraction.startTouch(event,g,context)},touchmove:function touchmove(event,g,context){DygraphInteraction.moveTouch(event,g,context)},touchend:function touchend(event,g,context){DygraphInteraction.endTouch(event,g,context)},dblclick:function dblclick(event,g,context){if(context.cancelNextDblclick){context.cancelNextDblclick=false;return}var e={canvasx:context.dragEndX,canvasy:context.dragEndY,cancelable:true};if(g.cascadeEvents_("dblclick",e)){return}if(event.altKey||event.shiftKey){return}g.resetZoom()}};DygraphInteraction.nonInteractiveModel_={mousedown:function mousedown(event,g,context){context.initializeMouseDown(event,g,context)},mouseup:DygraphInteraction.maybeTreatMouseOpAsClick};DygraphInteraction.dragIsPanInteractionModel={mousedown:function mousedown(event,g,context){context.initializeMouseDown(event,g,context);DygraphInteraction.startPan(event,g,context)},mousemove:function mousemove(event,g,context){if(context.isPanning){DygraphInteraction.movePan(event,g,context)}},mouseup:function mouseup(event,g,context){if(context.isPanning){DygraphInteraction.endPan(event,g,context)}}};exports["default"]=DygraphInteraction;module.exports=exports["default"]},{"./dygraph-utils":25}],21:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}var _dygraphUtils=require("./dygraph-utils");var utils=_interopRequireWildcard(_dygraphUtils);var DygraphLayout=function DygraphLayout(dygraph){this.dygraph_=dygraph;this.points=[];this.setNames=[];this.annotations=[];this.yAxes_=null;this.xTicks_=null;this.yTicks_=null};DygraphLayout.prototype.addDataset=function(setname,set_xy){this.points.push(set_xy);this.setNames.push(setname)};DygraphLayout.prototype.getPlotArea=function(){return this.area_};DygraphLayout.prototype.computePlotArea=function(){var area={x:0,y:0};area.w=this.dygraph_.width_-area.x-this.dygraph_.getOption("rightGap");area.h=this.dygraph_.height_;var e={chart_div:this.dygraph_.graphDiv,reserveSpaceLeft:function reserveSpaceLeft(px){var r={x:area.x,y:area.y,w:px,h:area.h};area.x+=px;area.w-=px;return r},reserveSpaceRight:function reserveSpaceRight(px){var r={x:area.x+area.w-px,y:area.y,w:px,h:area.h};area.w-=px;return r},reserveSpaceTop:function reserveSpaceTop(px){var r={x:area.x,y:area.y,w:area.w,h:px};area.y+=px;area.h-=px;return r},reserveSpaceBottom:function reserveSpaceBottom(px){var r={x:area.x,y:area.y+area.h-px,w:area.w,h:px};area.h-=px;return r},chartRect:function chartRect(){return{x:area.x,y:area.y,w:area.w,h:area.h}}};this.dygraph_.cascadeEvents_("layout",e);this.area_=area};DygraphLayout.prototype.setAnnotations=function(ann){this.annotations=[];var parse=this.dygraph_.getOption("xValueParser")||function(x){return x};for(var i=0;i<ann.length;i++){var a={};if(!ann[i].xval&&ann[i].x===undefined){console.error("Annotations must have an 'x' property");return}if(ann[i].icon&&!(ann[i].hasOwnProperty("width")&&ann[i].hasOwnProperty("height"))){console.error("Must set width and height when setting "+"annotation.icon property");return}utils.update(a,ann[i]);if(!a.xval)a.xval=parse(a.x);this.annotations.push(a)}};DygraphLayout.prototype.setXTicks=function(xTicks){this.xTicks_=xTicks};DygraphLayout.prototype.setYAxes=function(yAxes){this.yAxes_=yAxes};DygraphLayout.prototype.evaluate=function(){this._xAxis={};this._evaluateLimits();this._evaluateLineCharts();this._evaluateLineTicks();this._evaluateAnnotations()};DygraphLayout.prototype._evaluateLimits=function(){var xlimits=this.dygraph_.xAxisRange();this._xAxis.minval=xlimits[0];this._xAxis.maxval=xlimits[1];var xrange=xlimits[1]-xlimits[0];this._xAxis.scale=xrange!==0?1/xrange:1;if(this.dygraph_.getOptionForAxis("logscale","x")){this._xAxis.xlogrange=utils.log10(this._xAxis.maxval)-utils.log10(this._xAxis.minval);this._xAxis.xlogscale=this._xAxis.xlogrange!==0?1/this._xAxis.xlogrange:1}for(var i=0;i<this.yAxes_.length;i++){var axis=this.yAxes_[i];axis.minyval=axis.computedValueRange[0];axis.maxyval=axis.computedValueRange[1];axis.yrange=axis.maxyval-axis.minyval;axis.yscale=axis.yrange!==0?1/axis.yrange:1;if(this.dygraph_.getOption("logscale")){axis.ylogrange=utils.log10(axis.maxyval)-utils.log10(axis.minyval);axis.ylogscale=axis.ylogrange!==0?1/axis.ylogrange:1;if(!isFinite(axis.ylogrange)||isNaN(axis.ylogrange)){console.error("axis "+i+" of graph at "+axis.g+" can't be displayed in log scale for range ["+axis.minyval+" - "+axis.maxyval+"]")}}}};DygraphLayout.calcXNormal_=function(value,xAxis,logscale){if(logscale){return(utils.log10(value)-utils.log10(xAxis.minval))*xAxis.xlogscale}else{return(value-xAxis.minval)*xAxis.scale}};DygraphLayout.calcYNormal_=function(axis,value,logscale){if(logscale){var x=1-(utils.log10(value)-utils.log10(axis.minyval))*axis.ylogscale;return isFinite(x)?x:NaN}else{return 1-(value-axis.minyval)*axis.yscale}};DygraphLayout.prototype._evaluateLineCharts=function(){var isStacked=this.dygraph_.getOption("stackedGraph");var isLogscaleForX=this.dygraph_.getOptionForAxis("logscale","x");for(var setIdx=0;setIdx<this.points.length;setIdx++){var points=this.points[setIdx];var setName=this.setNames[setIdx];var connectSeparated=this.dygraph_.getOption("connectSeparatedPoints",setName);var axis=this.dygraph_.axisPropertiesForSeries(setName);var logscale=this.dygraph_.attributes_.getForSeries("logscale",setName);for(var j=0;j<points.length;j++){var point=points[j];point.x=DygraphLayout.calcXNormal_(point.xval,this._xAxis,isLogscaleForX);var yval=point.yval;if(isStacked){point.y_stacked=DygraphLayout.calcYNormal_(axis,point.yval_stacked,logscale);if(yval!==null&&!isNaN(yval)){yval=point.yval_stacked}}if(yval===null){yval=NaN;if(!connectSeparated){point.yval=NaN}}point.y=DygraphLayout.calcYNormal_(axis,yval,logscale)}this.dygraph_.dataHandler_.onLineEvaluated(points,axis,logscale)}};DygraphLayout.prototype._evaluateLineTicks=function(){var i,tick,label,pos,v,has_tick;this.xticks=[];for(i=0;i<this.xTicks_.length;i++){tick=this.xTicks_[i];label=tick.label;has_tick=!("label_v"in tick);v=has_tick?tick.v:tick.label_v;pos=this.dygraph_.toPercentXCoord(v);if(pos>=0&&pos<1){this.xticks.push({pos:pos,label:label,has_tick:has_tick})}}this.yticks=[];for(i=0;i<this.yAxes_.length;i++){var axis=this.yAxes_[i];for(var j=0;j<axis.ticks.length;j++){tick=axis.ticks[j];label=tick.label;has_tick=!("label_v"in tick);v=has_tick?tick.v:tick.label_v;pos=this.dygraph_.toPercentYCoord(v,i);if(pos>0&&pos<=1){this.yticks.push({axis:i,pos:pos,label:label,has_tick:has_tick})}}}};DygraphLayout.prototype._evaluateAnnotations=function(){var i;var annotations={};for(i=0;i<this.annotations.length;i++){var a=this.annotations[i];annotations[a.xval+","+a.series]=a}this.annotated_points=[];if(!this.annotations||!this.annotations.length){return}for(var setIdx=0;setIdx<this.points.length;setIdx++){var points=this.points[setIdx];for(i=0;i<points.length;i++){var p=points[i];var k=p.xval+","+p.name;if(k in annotations){p.annotation=annotations[k];this.annotated_points.push(p)}}}};DygraphLayout.prototype.removeAllDatasets=function(){delete this.points;delete this.setNames;delete this.setPointsLengths;delete this.setPointsOffsets;this.points=[];this.setNames=[];this.setPointsLengths=[];this.setPointsOffsets=[]};exports["default"]=DygraphLayout;module.exports=exports["default"]},{"./dygraph-utils":25}],22:[function(require,module,exports){(function(process){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var OPTIONS_REFERENCE=null;if(typeof process!=="undefined"){if(process.env.NODE_ENV!="production"){OPTIONS_REFERENCE={xValueParser:{default:"parseFloat() or Date.parse()*",labels:["CSV parsing"],type:"function(str) -> number",description:"A function which parses x-values (i.e. the dependent series). Must return a number, even when the values are dates. In this case, millis since epoch are used. This is used primarily for parsing CSV data. *=Dygraphs is slightly more accepting in the dates which it will parse. See code for details."},stackedGraph:{default:"false",labels:["Data Line display"],type:"boolean",description:"If set, stack series on top of one another rather than drawing them independently. The first series specified in the input data will wind up on top of the chart and the last will be on bottom. NaN values are drawn as white areas without a line on top, see stackedGraphNaNFill for details."},stackedGraphNaNFill:{default:"all",labels:["Data Line display"],type:"string",description:'Controls handling of NaN values inside a stacked graph. NaN values are interpolated/extended for stacking purposes, but the actual point value remains NaN in the legend display. Valid option values are "all" (interpolate internally, repeat leftmost and rightmost value as needed), "inside" (interpolate internally only, use zero outside leftmost and rightmost value), and "none" (treat NaN as zero everywhere).'},pointSize:{default:"1",labels:["Data Line display"],type:"integer",description:'The size of the dot to draw on each point in pixels (see drawPoints). A dot is always drawn when a point is "isolated", i.e. there is a missing point on either side of it. This also controls the size of those dots.'},drawPoints:{default:"false",labels:["Data Line display"],type:"boolean",description:"Draw a small dot at each point, in addition to a line going through the point. This makes the individual data points easier to see, but can increase visual clutter in the chart. The small dot can be replaced with a custom rendering by supplying a <a href='#drawPointCallback'>drawPointCallback</a>."},drawGapEdgePoints:{default:"false",labels:["Data Line display"],type:"boolean",description:"Draw points at the edges of gaps in the data. This improves visibility of small data segments or other data irregularities."},drawPointCallback:{default:"null",labels:["Data Line display"],type:"function(g, seriesName, canvasContext, cx, cy, color, pointSize)",parameters:[["g","the reference graph"],["seriesName","the name of the series"],["canvasContext","the canvas to draw on"],["cx","center x coordinate"],["cy","center y coordinate"],["color","series color"],["pointSize","the radius of the image."],["idx","the row-index of the point in the data."]],description:"Draw a custom item when drawPoints is enabled. Default is a small dot matching the series color. This method should constrain drawing to within pointSize pixels from (cx, cy).  Also see <a href='#drawHighlightPointCallback'>drawHighlightPointCallback</a>"},height:{default:"320",labels:["Overall display"],type:"integer",description:"Height, in pixels, of the chart. If the container div has been explicitly sized, this will be ignored."},zoomCallback:{default:"null",labels:["Callbacks"],type:"function(minDate, maxDate, yRanges)",parameters:[["minDate","milliseconds since epoch"],["maxDate","milliseconds since epoch."],["yRanges","is an array of [bottom, top] pairs, one for each y-axis."]],description:"A function to call when the zoom window is changed (either by zooming in or out). When animatedZooms is set, zoomCallback is called once at the end of the transition (it will not be called for intermediate frames)."},pointClickCallback:{snippet:"function(e, point){<br>&nbsp;&nbsp;alert(point);<br>}",default:"null",labels:["Callbacks","Interactive Elements"],type:"function(e, point)",parameters:[["e","the event object for the click"],["point","the point that was clicked See <a href='#point_properties'>Point properties</a> for details"]],description:"A function to call when a data point is clicked. and the point that was clicked."},color:{default:"(see description)",labels:["Data Series Colors"],type:"string",example:"red",description:"A per-series color definition. Used in conjunction with, and overrides, the colors option."},colors:{default:"(see description)",labels:["Data Series Colors"],type:"array<string>",example:"['red', '#00FF00']",description:'List of colors for the data series. These can be of the form "#AABBCC" or "rgb(255,100,200)" or "yellow", etc. If not specified, equally-spaced points around a color wheel are used. Overridden by the \'color\' option.'},connectSeparatedPoints:{default:"false",labels:["Data Line display"],type:"boolean",description:"Usually, when Dygraphs encounters a missing value in a data series, it interprets this as a gap and draws it as such. If, instead, the missing values represents an x-value for which only a different series has data, then you'll want to connect the dots by setting this to true. To explicitly include a gap with this option set, use a value of NaN."},highlightCallback:{default:"null",labels:["Callbacks"],type:"function(event, x, points, row, seriesName)",description:"When set, this callback gets called every time a new point is highlighted.",parameters:[["event","the JavaScript mousemove event"],["x","the x-coordinate of the highlighted points"],["points","an array of highlighted points: <code>[ {name: 'series', yval: y-value}, &hellip; ]</code>"],["row","integer index of the highlighted row in the data table, starting from 0"],["seriesName","name of the highlighted series, only present if highlightSeriesOpts is set."]]},drawHighlightPointCallback:{default:"null",labels:["Data Line display"],type:"function(g, seriesName, canvasContext, cx, cy, color, pointSize)",parameters:[["g","the reference graph"],["seriesName","the name of the series"],["canvasContext","the canvas to draw on"],["cx","center x coordinate"],["cy","center y coordinate"],["color","series color"],["pointSize","the radius of the image."],["idx","the row-index of the point in the data."]],description:"Draw a custom item when a point is highlighted.  Default is a small dot matching the series color. This method should constrain drawing to within pointSize pixels from (cx, cy) Also see <a href='#drawPointCallback'>drawPointCallback</a>"},highlightSeriesOpts:{default:"null",labels:["Interactive Elements"],type:"Object",description:"When set, the options from this object are applied to the timeseries closest to the mouse pointer for interactive highlighting. See also 'highlightCallback'. Example: highlightSeriesOpts: { strokeWidth: 3 }."},highlightSeriesBackgroundAlpha:{default:"0.5",labels:["Interactive Elements"],type:"float",description:"Fade the background while highlighting series. 1=fully visible background (disable fading), 0=hiddden background (show highlighted series only)."},highlightSeriesBackgroundColor:{default:"rgb(255, 255, 255)",labels:["Interactive Elements"],type:"string",description:"Sets the background color used to fade out the series in conjunction with 'highlightSeriesBackgroundAlpha'."},includeZero:{default:"false",labels:["Axis display"],type:"boolean",description:"Usually, dygraphs will use the range of the data plus some padding to set the range of the y-axis. If this option is set, the y-axis will always include zero, typically as the lowest value. This can be used to avoid exaggerating the variance in the data"},rollPeriod:{default:"1",labels:["Error Bars","Rolling Averages"],type:"integer &gt;= 1",description:"Number of days over which to average data. Discussed extensively above."},unhighlightCallback:{default:"null",labels:["Callbacks"],type:"function(event)",parameters:[["event","the mouse event"]],description:"When set, this callback gets called every time the user stops highlighting any point by mousing out of the graph."},axisTickSize:{default:"3.0",labels:["Axis display"],type:"number",description:"The size of the line to display next to each tick mark on x- or y-axes."},labelsSeparateLines:{default:"false",labels:["Legend"],type:"boolean",description:"Put <code>&lt;br/&gt;</code> between lines in the label string. Often used in conjunction with <strong>labelsDiv</strong>."},valueFormatter:{default:"Depends on the type of your data.",labels:["Legend","Value display/formatting"],type:"function(num or millis, opts, seriesName, dygraph, row, col)",description:"Function to provide a custom display format for the values displayed on mouseover. This does not affect the values that appear on tick marks next to the axes. To format those, see axisLabelFormatter. This is usually set on a <a href='per-axis.html'>per-axis</a> basis. .",parameters:[["num_or_millis","The value to be formatted. This is always a number. For date axes, it's millis since epoch. You can call new Date(millis) to get a Date object."],["opts","This is a function you can call to access various options (e.g. opts('labelsKMB')). It returns per-axis values for the option when available."],["seriesName","The name of the series from which the point came, e.g. 'X', 'Y', 'A', etc."],["dygraph","The dygraph object for which the formatting is being done"],["row","The row of the data from which this point comes. g.getValue(row, 0) will return the x-value for this point."],["col","The column of the data from which this point comes. g.getValue(row, col) will return the original y-value for this point. This can be used to get the full confidence interval for the point, or access un-rolled values for the point."]]},annotationMouseOverHandler:{default:"null",labels:["Annotations"],type:"function(annotation, point, dygraph, event)",description:"If provided, this function is called whenever the user mouses over an annotation."},annotationMouseOutHandler:{default:"null",labels:["Annotations"],type:"function(annotation, point, dygraph, event)",parameters:[["annotation","the annotation left"],["point","the point associated with the annotation"],["dygraph","the reference graph"],["event","the mouse event"]],description:"If provided, this function is called whenever the user mouses out of an annotation."},annotationClickHandler:{default:"null",labels:["Annotations"],type:"function(annotation, point, dygraph, event)",parameters:[["annotation","the annotation left"],["point","the point associated with the annotation"],["dygraph","the reference graph"],["event","the mouse event"]],description:"If provided, this function is called whenever the user clicks on an annotation."},annotationDblClickHandler:{default:"null",labels:["Annotations"],type:"function(annotation, point, dygraph, event)",parameters:[["annotation","the annotation left"],["point","the point associated with the annotation"],["dygraph","the reference graph"],["event","the mouse event"]],description:"If provided, this function is called whenever the user double-clicks on an annotation."},drawCallback:{default:"null",labels:["Callbacks"],type:"function(dygraph, is_initial)",parameters:[["dygraph","The graph being drawn"],["is_initial","True if this is the initial draw, false for subsequent draws."]],description:"When set, this callback gets called every time the dygraph is drawn. This includes the initial draw, after zooming and repeatedly while panning."},labelsKMG2:{default:"false",labels:["Value display/formatting"],type:"boolean",description:"Show k/M/G for kilo/Mega/Giga on y-axis. This is different than <code>labelsKMB</code> in that it uses base 2, not 10."},delimiter:{default:",",labels:["CSV parsing"],type:"string",description:"The delimiter to look for when separating fields of a CSV file. Setting this to a tab is not usually necessary, since tab-delimited data is auto-detected."},axisLabelFontSize:{default:"14",labels:["Axis display"],type:"integer",description:"Size of the font (in pixels) to use in the axis labels, both x- and y-axis."},underlayCallback:{default:"null",labels:["Callbacks"],type:"function(context, area, dygraph)",parameters:[["context","the canvas drawing context on which to draw"],["area","An object with {x,y,w,h} properties describing the drawing area."],["dygraph","the reference graph"]],description:"When set, this callback gets called before the chart is drawn. It details on how to use this."},width:{default:"480",labels:["Overall display"],type:"integer",description:"Width, in pixels, of the chart. If the container div has been explicitly sized, this will be ignored."},pixelRatio:{default:"(devicePixelRatio / context.backingStoreRatio)",labels:["Overall display"],type:"float",description:"Overrides the pixel ratio scaling factor for the canvas's 2d context. Ordinarily, this is set to the devicePixelRatio / (context.backingStoreRatio || 1), so on mobile devices, where the devicePixelRatio can be somewhere around 3, performance can be improved by overriding this value to something less precise, like 1, at the expense of resolution."},interactionModel:{default:"...",labels:["Interactive Elements"],type:"Object",description:"TODO(konigsberg): document this"},ticker:{default:"Dygraph.dateTicker or Dygraph.numericTicks",labels:["Axis display"],type:"function(min, max, pixels, opts, dygraph, vals) -> [{v: ..., label: ...}, ...]",parameters:[["min",""],["max",""],["pixels",""],["opts",""],["dygraph","the reference graph"],["vals",""]],description:"This lets you specify an arbitrary function to generate tick marks on an axis. The tick marks are an array of (value, label) pairs. The built-in functions go to great lengths to choose good tick marks so, if you set this option, you'll most likely want to call one of them and modify the result. See dygraph-tickers.js for an extensive discussion. This is set on a <a href='per-axis.html'>per-axis</a> basis."},xAxisHeight:{default:"(null)",labels:["Axis display"],type:"integer",description:"Height, in pixels, of the x-axis. If not set explicitly, this is computed based on axisLabelFontSize and axisTickSize."},showLabelsOnHighlight:{default:"true",labels:["Interactive Elements","Legend"],type:"boolean",description:"Whether to show the legend upon mouseover."},axis:{default:"(none)",labels:["Axis display"],type:"string",description:"Set to either 'y1' or 'y2' to assign a series to a y-axis (primary or secondary). Must be set per-series."},pixelsPerLabel:{default:"70 (x-axis) or 30 (y-axes)",labels:["Axis display","Grid"],type:"integer",description:"Number of pixels to require between each x- and y-label. Larger values will yield a sparser axis with fewer ticks. This is set on a <a href='per-axis.html'>per-axis</a> basis."},labelsDiv:{default:"null",labels:["Legend"],type:"DOM element or string",example:"<code style='font-size: small'>document.getElementById('foo')</code>or<code>'foo'",description:"Show data labels in an external div, rather than on the graph.  This value can either be a div element or a div id."},fractions:{default:"false",labels:["CSV parsing","Error Bars"],type:"boolean",description:'When set, attempt to parse each cell in the CSV file as "a/b", where a and b are integers. The ratio will be plotted. This allows computation of Wilson confidence intervals (see below).'},logscale:{default:"false",labels:["Axis display"],type:"boolean",description:"When set for the y-axis or x-axis, the graph shows that axis in log scale. Any values less than or equal to zero are not displayed. Showing log scale with ranges that go below zero will result in an unviewable graph.\n\n Not compatible with showZero. connectSeparatedPoints is ignored. This is ignored for date-based x-axes."},strokeWidth:{default:"1.0",labels:["Data Line display"],type:"float",example:"0.5, 2.0",description:"The width of the lines connecting data points. This can be used to increase the contrast or some graphs."},strokePattern:{default:"null",labels:["Data Line display"],type:"array<integer>",example:"[10, 2, 5, 2]",description:"A custom pattern array where the even index is a draw and odd is a space in pixels. If null then it draws a solid line. The array should have a even length as any odd lengthed array could be expressed as a smaller even length array. This is used to create dashed lines."},strokeBorderWidth:{default:"null",labels:["Data Line display"],type:"float",example:"1.0",description:"Draw a border around graph lines to make crossing lines more easily distinguishable. Useful for graphs with many lines."},strokeBorderColor:{default:"white",labels:["Data Line display"],type:"string",example:"red, #ccffdd",description:"Color for the line border used if strokeBorderWidth is set."},wilsonInterval:{default:"true",labels:["Error Bars"],type:"boolean",description:'Use in conjunction with the "fractions" option. Instead of plotting +/- N standard deviations, dygraphs will compute a Wilson confidence interval and plot that. This has more reasonable behavior for ratios close to 0 or 1.'},fillGraph:{default:"false",labels:["Data Line display"],type:"boolean",description:"Should the area underneath the graph be filled? This option is not compatible with error bars. This may be set on a <a href='per-axis.html'>per-series</a> basis."},highlightCircleSize:{default:"3",labels:["Interactive Elements"],type:"integer",description:"The size in pixels of the dot drawn over highlighted points."},gridLineColor:{default:"rgb(128,128,128)",labels:["Grid"],type:"red, blue",description:"The color of the gridlines. This may be set on a per-axis basis to define each axis' grid separately."},gridLinePattern:{default:"null",labels:["Grid"],type:"array<integer>",example:"[10, 2, 5, 2]",description:"A custom pattern array where the even index is a draw and odd is a space in pixels. If null then it draws a solid line. The array should have a even length as any odd lengthed array could be expressed as a smaller even length array. This is used to create dashed gridlines."},visibility:{default:"[true, true, ...]",labels:["Data Line display"],type:"Array of booleans",description:"Which series should initially be visible? Once the Dygraph has been constructed, you can access and modify the visibility of each series using the <code>visibility</code> and <code>setVisibility</code> methods."},valueRange:{default:"Full range of the input is shown",labels:["Axis display"],type:"Array of two numbers",example:"[10, 110]",description:"Explicitly set the vertical range of the graph to [low, high]. This may be set on a per-axis basis to define each y-axis separately. If either limit is unspecified, it will be calculated automatically (e.g. [null, 30] to automatically calculate just the lower bound)"},colorSaturation:{default:"1.0",labels:["Data Series Colors"],type:"float (0.0 - 1.0)",description:"If <strong>colors</strong> is not specified, saturation of the automatically-generated data series colors."},hideOverlayOnMouseOut:{default:"true",labels:["Interactive Elements","Legend"],type:"boolean",description:"Whether to hide the legend when the mouse leaves the chart area."},legend:{default:"onmouseover",labels:["Legend"],type:"string",description:'When to display the legend. By default, it only appears when a user mouses over the chart. Set it to "always" to always display a legend of some sort. When set to "follow", legend follows highlighted points.'},legendFormatter:{default:"null",labels:["Legend"],type:"function(data): string",params:[["data",'An object containing information about the selection (or lack of a selection). This includes formatted values and series information. See <a href="https://github.com/danvk/dygraphs/pull/683">here</a> for sample values.']],description:'Set this to supply a custom formatter for the legend. See <a href="https://github.com/danvk/dygraphs/pull/683">this comment</a> and the <a href="tests/legend-formatter.html">legendFormatter demo</a> for usage.'},labelsShowZeroValues:{default:"true",labels:["Legend"],type:"boolean",description:"Show zero value labels in the labelsDiv."},stepPlot:{default:"false",labels:["Data Line display"],type:"boolean",description:"When set, display the graph as a step plot instead of a line plot. This option may either be set for the whole graph or for single series."},labelsUTC:{default:"false",labels:["Value display/formatting","Axis display"],type:"boolean",description:"Show date/time labels according to UTC (instead of local time)."},labelsKMB:{default:"false",labels:["Value display/formatting"],type:"boolean",description:"Show K/M/B for thousands/millions/billions on y-axis."},rightGap:{default:"5",labels:["Overall display"],type:"integer",description:"Number of pixels to leave blank at the right edge of the Dygraph. This makes it easier to highlight the right-most data point."},drawAxesAtZero:{default:"false",labels:["Axis display"],type:"boolean",description:"When set, draw the X axis at the Y=0 position and the Y axis at the X=0 position if those positions are inside the graph's visible area. Otherwise, draw the axes at the bottom or left graph edge as usual."},xRangePad:{default:"0",labels:["Axis display"],type:"float",description:"Add the specified amount of extra space (in pixels) around the X-axis value range to ensure points at the edges remain visible."},yRangePad:{default:"null",labels:["Axis display"],type:"float",description:"If set, add the specified amount of extra space (in pixels) around the Y-axis value range to ensure points at the edges remain visible. If unset, use the traditional Y padding algorithm."},axisLabelFormatter:{default:"Depends on the data type",labels:["Axis display"],type:"function(number or Date, granularity, opts, dygraph)",parameters:[["number or date","Either a number (for a numeric axis) or a Date object (for a date axis)"],["granularity","specifies how fine-grained the axis is. For date axes, this is a reference to the time granularity enumeration, defined in dygraph-tickers.js, e.g. Dygraph.WEEKLY."],["opts","a function which provides access to various options on the dygraph, e.g. opts('labelsKMB')."],["dygraph","the referenced graph"]],description:"Function to call to format the tick values that appear along an axis. This is usually set on a <a href='per-axis.html'>per-axis</a> basis."},clickCallback:{snippet:"function(e, date_millis){<br>&nbsp;&nbsp;alert(new Date(date_millis));<br>}",default:"null",labels:["Callbacks"],type:"function(e, x, points)",parameters:[["e","The event object for the click"],["x","The x value that was clicked (for dates, this is milliseconds since epoch)"],["points","The closest points along that date. See <a href='#point_properties'>Point properties</a> for details."]],description:"A function to call when the canvas is clicked."},labels:{default:'["X", "Y1", "Y2", ...]*',labels:["Legend"],type:"array<string>",description:"A name for each data series, including the independent (X) series. For CSV files and DataTable objections, this is determined by context. For raw data, this must be specified. If it is not, default values are supplied and a warning is logged."},dateWindow:{default:"Full range of the input is shown",labels:["Axis display"],type:"Array of two numbers",example:"[<br>&nbsp;&nbsp;Date.parse('2006-01-01'),<br>&nbsp;&nbsp;(new Date()).valueOf()<br>]",description:"Initially zoom in on a section of the graph. Is of the form [earliest, latest], where earliest/latest are milliseconds since epoch. If the data for the x-axis is numeric, the values in dateWindow must also be numbers."},showRoller:{default:"false",labels:["Interactive Elements","Rolling Averages"],type:"boolean",description:"If the rolling average period text box should be shown."},sigma:{default:"2.0",labels:["Error Bars"],type:"float",description:"When errorBars is set, shade this many standard deviations above/below each point."},customBars:{default:"false",labels:["CSV parsing","Error Bars"],type:"boolean",description:'When set, parse each CSV cell as "low;middle;high". Error bars will be drawn for each point between low and high, with the series itself going through middle.'},colorValue:{default:"1.0",labels:["Data Series Colors"],type:"float (0.0 - 1.0)",description:"If colors is not specified, value of the data series colors, as in hue/saturation/value. (0.0-1.0, default 0.5)"},errorBars:{default:"false",labels:["CSV parsing","Error Bars"],type:"boolean",description:"Does the data contain standard deviations? Setting this to true alters the input format (see above)."},displayAnnotations:{default:"false",labels:["Annotations"],type:"boolean",description:"Only applies when Dygraphs is used as a GViz chart. Causes string columns following a data series to be interpreted as annotations on points in that series. This is the same format used by Google's AnnotatedTimeLine chart."},panEdgeFraction:{default:"null",labels:["Axis display","Interactive Elements"],type:"float",description:"A value representing the farthest a graph may be panned, in percent of the display. For example, a value of 0.1 means that the graph can only be panned 10% passed the edges of the displayed values. null means no bounds."},title:{labels:["Chart labels"],type:"string",default:"null",description:"Text to display above the chart. You can supply any HTML for this value, not just text. If you wish to style it using CSS, use the 'dygraph-label' or 'dygraph-title' classes."},titleHeight:{default:"18",labels:["Chart labels"],type:"integer",description:"Height of the chart title, in pixels. This also controls the default font size of the title. If you style the title on your own, this controls how much space is set aside above the chart for the title's div."},xlabel:{labels:["Chart labels"],type:"string",default:"null",description:"Text to display below the chart's x-axis. You can supply any HTML for this value, not just text. If you wish to style it using CSS, use the 'dygraph-label' or 'dygraph-xlabel' classes."},xLabelHeight:{labels:["Chart labels"],type:"integer",default:"18",description:"Height of the x-axis label, in pixels. This also controls the default font size of the x-axis label. If you style the label on your own, this controls how much space is set aside below the chart for the x-axis label's div."},ylabel:{labels:["Chart labels"],type:"string",default:"null",description:"Text to display to the left of the chart's y-axis. You can supply any HTML for this value, not just text. If you wish to style it using CSS, use the 'dygraph-label' or 'dygraph-ylabel' classes. The text will be rotated 90 degrees by default, so CSS rules may behave in unintuitive ways. No additional space is set aside for a y-axis label. If you need more space, increase the width of the y-axis tick labels using the yAxisLabelWidth option. If you need a wider div for the y-axis label, either style it that way with CSS (but remember that it's rotated, so width is controlled by the 'height' property) or set the yLabelWidth option."},y2label:{labels:["Chart labels"],type:"string",default:"null",description:"Text to display to the right of the chart's secondary y-axis. This label is only displayed if a secondary y-axis is present. See <a href='http://dygraphs.com/tests/two-axes.html'>this test</a> for an example of how to do this. The comments for the 'ylabel' option generally apply here as well. This label gets a 'dygraph-y2label' instead of a 'dygraph-ylabel' class."},yLabelWidth:{labels:["Chart labels"],type:"integer",default:"18",description:"Width of the div which contains the y-axis label. Since the y-axis label appears rotated 90 degrees, this actually affects the height of its div."},drawGrid:{default:"true for x and y, false for y2",labels:["Grid"],type:"boolean",description:"Whether to display gridlines in the chart. This may be set on a per-axis basis to define the visibility of each axis' grid separately."},independentTicks:{default:"true for y, false for y2",labels:["Axis display","Grid"],type:"boolean",description:"Only valid for y and y2, has no effect on x: This option defines whether the y axes should align their ticks or if they should be independent. Possible combinations: 1.) y=true, y2=false (default): y is the primary axis and the y2 ticks are aligned to the the ones of y. (only 1 grid) 2.) y=false, y2=true: y2 is the primary axis and the y ticks are aligned to the the ones of y2. (only 1 grid) 3.) y=true, y2=true: Both axis are independent and have their own ticks. (2 grids) 4.) y=false, y2=false: Invalid configuration causes an error."},drawAxis:{default:"true for x and y, false for y2",labels:["Axis display"],type:"boolean",description:"Whether to draw the specified axis. This may be set on a per-axis basis to define the visibility of each axis separately. Setting this to false also prevents axis ticks from being drawn and reclaims the space for the chart grid/lines."},gridLineWidth:{default:"0.3",labels:["Grid"],type:"float",description:"Thickness (in pixels) of the gridlines drawn under the chart. The vertical/horizontal gridlines can be turned off entirely by using the drawGrid option. This may be set on a per-axis basis to define each axis' grid separately."},axisLineWidth:{default:"0.3",labels:["Axis display"],type:"float",description:"Thickness (in pixels) of the x- and y-axis lines."},axisLineColor:{default:"black",labels:["Axis display"],type:"string",description:"Color of the x- and y-axis lines. Accepts any value which the HTML canvas strokeStyle attribute understands, e.g. 'black' or 'rgb(0, 100, 255)'."},fillAlpha:{default:"0.15",labels:["Error Bars","Data Series Colors"],type:"float (0.0 - 1.0)",description:"Error bars (or custom bars) for each series are drawn in the same color as the series, but with partial transparency. This sets the transparency. A value of 0.0 means that the error bars will not be drawn, whereas a value of 1.0 means that the error bars will be as dark as the line for the series itself. This can be used to produce chart lines whose thickness varies at each point."},axisLabelWidth:{default:"50 (y-axis), 60 (x-axis)",labels:["Axis display","Chart labels"],type:"integer",description:"Width (in pixels) of the containing divs for x- and y-axis labels. For the y-axis, this also controls the width of the y-axis. Note that for the x-axis, this is independent from pixelsPerLabel, which controls the spacing between labels."},sigFigs:{default:"null",labels:["Value display/formatting"],type:"integer",description:"By default, dygraphs displays numbers with a fixed number of digits after the decimal point. If you'd prefer to have a fixed number of significant figures, set this option to that number of sig figs. A value of 2, for instance, would cause 1 to be display as 1.0 and 1234 to be displayed as 1.23e+3."},digitsAfterDecimal:{default:"2",labels:["Value display/formatting"],type:"integer",description:"Unless it's run in scientific mode (see the <code>sigFigs</code> option), dygraphs displays numbers with <code>digitsAfterDecimal</code> digits after the decimal point. Trailing zeros are not displayed, so with a value of 2 you'll get '0', '0.1', '0.12', '123.45' but not '123.456' (it will be rounded to '123.46'). Numbers with absolute value less than 0.1^digitsAfterDecimal (i.e. those which would show up as '0.00') will be displayed in scientific notation."},maxNumberWidth:{default:"6",labels:["Value display/formatting"],type:"integer",description:"When displaying numbers in normal (not scientific) mode, large numbers will be displayed with many trailing zeros (e.g. 100000000 instead of 1e9). This can lead to unwieldy y-axis labels. If there are more than <code>maxNumberWidth</code> digits to the left of the decimal in a number, dygraphs will switch to scientific notation, even when not operating in scientific mode. If you'd like to see all those digits, set this to something large, like 20 or 30."},file:{default:"(set when constructed)",labels:["Data"],type:"string (URL of CSV or CSV), GViz DataTable or 2D Array",description:"Sets the data being displayed in the chart. This can only be set when calling updateOptions; it cannot be set from the constructor. For a full description of valid data formats, see the <a href='http://dygraphs.com/data.html'>Data Formats</a> page."},timingName:{default:"null",labels:["Debugging","Deprecated"],type:"string",description:"Set this option to log timing information. The value of the option will be logged along with the timimg, so that you can distinguish multiple dygraphs on the same page."},showRangeSelector:{default:"false",labels:["Range Selector"],type:"boolean",description:"Show or hide the range selector widget."},rangeSelectorHeight:{default:"40",labels:["Range Selector"],type:"integer",description:"Height, in pixels, of the range selector widget. This option can only be specified at Dygraph creation time."},rangeSelectorPlotStrokeColor:{default:"#808FAB",labels:["Range Selector"],type:"string",description:'The range selector mini plot stroke color. This can be of the form "#AABBCC" or "rgb(255,100,200)" or "yellow". You can also specify null or "" to turn off stroke.'},rangeSelectorPlotFillColor:{default:"#A7B1C4",labels:["Range Selector"],type:"string",description:'The range selector mini plot fill color. This can be of the form "#AABBCC" or "rgb(255,100,200)" or "yellow". You can also specify null or "" to turn off fill.'},rangeSelectorPlotFillGradientColor:{default:"white",labels:["Range Selector"],type:"string",description:'The top color for the range selector mini plot fill color gradient. This can be of the form "#AABBCC" or "rgb(255,100,200)" or "rgba(255,100,200,42)" or "yellow". You can also specify null or "" to disable the gradient and fill with one single color.'},rangeSelectorBackgroundStrokeColor:{default:"gray",labels:["Range Selector"],type:"string",description:'The color of the lines below and on both sides of the range selector mini plot. This can be of the form "#AABBCC" or "rgb(255,100,200)" or "yellow".'},rangeSelectorBackgroundLineWidth:{default:"1",labels:["Range Selector"],type:"float",description:"The width of the lines below and on both sides of the range selector mini plot."},rangeSelectorPlotLineWidth:{default:"1.5",labels:["Range Selector"],type:"float",description:"The width of the range selector mini plot line."},rangeSelectorForegroundStrokeColor:{default:"black",labels:["Range Selector"],type:"string",description:'The color of the lines in the interactive layer of the range selector. This can be of the form "#AABBCC" or "rgb(255,100,200)" or "yellow".'},rangeSelectorForegroundLineWidth:{default:"1",labels:["Range Selector"],type:"float",description:"The width the lines in the interactive layer of the range selector."},rangeSelectorAlpha:{default:"0.6",labels:["Range Selector"],type:"float (0.0 - 1.0)",description:"The transparency of the veil that is drawn over the unselected portions of the range selector mini plot. A value of 0 represents full transparency and the unselected portions of the mini plot will appear as normal. A value of 1 represents full opacity and the unselected portions of the mini plot will be hidden."},showInRangeSelector:{default:"null",labels:["Range Selector"],type:"boolean",description:"Mark this series for inclusion in the range selector. The mini plot curve will be an average of all such series. If this is not specified for any series, the default behavior is to average all the visible series. Setting it for one series will result in that series being charted alone in the range selector. Once it's set for a single series, it needs to be set for all series which should be included (regardless of visibility)."},animatedZooms:{default:"false",labels:["Interactive Elements"],type:"boolean",description:"Set this option to animate the transition between zoom windows. Applies to programmatic and interactive zooms. Note that if you also set a drawCallback, it will be called several times on each zoom. If you set a zoomCallback, it will only be called after the animation is complete."},plotter:{default:"[DygraphCanvasRenderer.Plotters.fillPlotter, DygraphCanvasRenderer.Plotters.errorPlotter, DygraphCanvasRenderer.Plotters.linePlotter]",labels:["Data Line display"],type:"array or function",description:"A function (or array of functions) which plot each data series on the chart. TODO(danvk): more details! May be set per-series."},axes:{default:"null",labels:["Configuration"],type:"Object",description:"Defines per-axis options. Valid keys are 'x', 'y' and 'y2'. Only some options may be set on a per-axis basis. If an option may be set in this way, it will be noted on this page. See also documentation on <a href='http://dygraphs.com/per-axis.html'>per-series and per-axis options</a>."},series:{default:"null",labels:["Series"],type:"Object",description:"Defines per-series options. Its keys match the y-axis label names, and the values are dictionaries themselves that contain options specific to that series."},plugins:{default:"[]",labels:["Configuration"],type:"Array<plugin>",description:"Defines per-graph plugins. Useful for per-graph customization"},dataHandler:{default:"(depends on data)",labels:["Data"],type:"Dygraph.DataHandler",description:"Custom DataHandler. This is an advanced customization. See http://bit.ly/151E7Aq."}};var warn=function warn(msg){if(window.console)window.console.warn(msg)};var flds=["type","default","description"];var valid_cats=["Annotations","Axis display","Chart labels","CSV parsing","Callbacks","Data","Data Line display","Data Series Colors","Error Bars","Grid","Interactive Elements","Range Selector","Legend","Overall display","Rolling Averages","Series","Value display/formatting","Zooming","Debugging","Configuration","Deprecated"];var i;var cats={};for(i=0;i<valid_cats.length;i++)cats[valid_cats[i]]=true;for(var k in OPTIONS_REFERENCE){if(!OPTIONS_REFERENCE.hasOwnProperty(k))continue;var op=OPTIONS_REFERENCE[k];for(i=0;i<flds.length;i++){if(!op.hasOwnProperty(flds[i])){warn("Option "+k+' missing "'+flds[i]+'" property')}else if(typeof op[flds[i]]!="string"){warn(k+"."+flds[i]+" must be of type string")}}var labels=op.labels;if(typeof labels!=="object"){warn('Option "'+k+'" is missing a "labels": [...] option')}else{for(i=0;i<labels.length;i++){if(!cats.hasOwnProperty(labels[i])){warn('Option "'+k+'" has label "'+labels[i]+'", which is invalid.')}}}}}}exports["default"]=OPTIONS_REFERENCE;module.exports=exports["default"]}).call(this,require("_process"))},{_process:37}],23:[function(require,module,exports){(function(process){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}var _dygraphUtils=require("./dygraph-utils");var utils=_interopRequireWildcard(_dygraphUtils);var _dygraphDefaultAttrs=require("./dygraph-default-attrs");var _dygraphDefaultAttrs2=_interopRequireDefault(_dygraphDefaultAttrs);var _dygraphOptionsReference=require("./dygraph-options-reference");var _dygraphOptionsReference2=_interopRequireDefault(_dygraphOptionsReference);var DygraphOptions=function DygraphOptions(dygraph){this.dygraph_=dygraph;this.yAxes_=[];this.xAxis_={};this.series_={};this.global_=this.dygraph_.attrs_;this.user_=this.dygraph_.user_attrs_||{};this.labels_=[];this.highlightSeries_=this.get("highlightSeriesOpts")||{};this.reparseSeries()};DygraphOptions.AXIS_STRING_MAPPINGS_={y:0,Y:0,y1:0,Y1:0,y2:1,Y2:1};DygraphOptions.axisToIndex_=function(axis){if(typeof axis=="string"){if(DygraphOptions.AXIS_STRING_MAPPINGS_.hasOwnProperty(axis)){return DygraphOptions.AXIS_STRING_MAPPINGS_[axis]}throw"Unknown axis : "+axis}if(typeof axis=="number"){if(axis===0||axis===1){return axis}throw"Dygraphs only supports two y-axes, indexed from 0-1."}if(axis){throw"Unknown axis : "+axis}return 0};DygraphOptions.prototype.reparseSeries=function(){var labels=this.get("labels");if(!labels){return}this.labels_=labels.slice(1);this.yAxes_=[{series:[],options:{}}];this.xAxis_={options:{}};this.series_={};var seriesDict=this.user_.series||{};for(var idx=0;idx<this.labels_.length;idx++){var seriesName=this.labels_[idx];var optionsForSeries=seriesDict[seriesName]||{};var yAxis=DygraphOptions.axisToIndex_(optionsForSeries["axis"]);this.series_[seriesName]={idx:idx,yAxis:yAxis,options:optionsForSeries};if(!this.yAxes_[yAxis]){this.yAxes_[yAxis]={series:[seriesName],options:{}}}else{this.yAxes_[yAxis].series.push(seriesName)}}var axis_opts=this.user_["axes"]||{};utils.update(this.yAxes_[0].options,axis_opts["y"]||{});if(this.yAxes_.length>1){utils.update(this.yAxes_[1].options,axis_opts["y2"]||{})}utils.update(this.xAxis_.options,axis_opts["x"]||{});if(typeof process!=="undefined"){if(process.env.NODE_ENV!="production"){this.validateOptions_()}}};DygraphOptions.prototype.get=function(name){var result=this.getGlobalUser_(name);if(result!==null){return result}return this.getGlobalDefault_(name)};DygraphOptions.prototype.getGlobalUser_=function(name){if(this.user_.hasOwnProperty(name)){return this.user_[name]}return null};DygraphOptions.prototype.getGlobalDefault_=function(name){if(this.global_.hasOwnProperty(name)){return this.global_[name]}if(_dygraphDefaultAttrs2["default"].hasOwnProperty(name)){return _dygraphDefaultAttrs2["default"][name]}return null};DygraphOptions.prototype.getForAxis=function(name,axis){var axisIdx;var axisString;if(typeof axis=="number"){axisIdx=axis;axisString=axisIdx===0?"y":"y2"}else{if(axis=="y1"){axis="y"}if(axis=="y"){axisIdx=0}else if(axis=="y2"){axisIdx=1}else if(axis=="x"){axisIdx=-1}else{throw"Unknown axis "+axis}axisString=axis}var userAxis=axisIdx==-1?this.xAxis_:this.yAxes_[axisIdx];if(userAxis){var axisOptions=userAxis.options;if(axisOptions.hasOwnProperty(name)){return axisOptions[name]}}if(!(axis==="x"&&name==="logscale")){var result=this.getGlobalUser_(name);if(result!==null){return result}}var defaultAxisOptions=_dygraphDefaultAttrs2["default"].axes[axisString];if(defaultAxisOptions.hasOwnProperty(name)){return defaultAxisOptions[name]}return this.getGlobalDefault_(name)};DygraphOptions.prototype.getForSeries=function(name,series){if(series===this.dygraph_.getHighlightSeries()){if(this.highlightSeries_.hasOwnProperty(name)){return this.highlightSeries_[name]}}if(!this.series_.hasOwnProperty(series)){throw"Unknown series: "+series}var seriesObj=this.series_[series];var seriesOptions=seriesObj["options"];if(seriesOptions.hasOwnProperty(name)){return seriesOptions[name]}return this.getForAxis(name,seriesObj["yAxis"])};DygraphOptions.prototype.numAxes=function(){return this.yAxes_.length};DygraphOptions.prototype.axisForSeries=function(series){return this.series_[series].yAxis};DygraphOptions.prototype.axisOptions=function(yAxis){return this.yAxes_[yAxis].options};DygraphOptions.prototype.seriesForAxis=function(yAxis){return this.yAxes_[yAxis].series};DygraphOptions.prototype.seriesNames=function(){return this.labels_};if(typeof process!=="undefined"){if(process.env.NODE_ENV!="production"){DygraphOptions.prototype.validateOptions_=function(){if(typeof _dygraphOptionsReference2["default"]==="undefined"){throw"Called validateOptions_ in prod build."}var that=this;var validateOption=function validateOption(optionName){if(!_dygraphOptionsReference2["default"][optionName]){that.warnInvalidOption_(optionName)}};var optionsDicts=[this.xAxis_.options,this.yAxes_[0].options,this.yAxes_[1]&&this.yAxes_[1].options,this.global_,this.user_,this.highlightSeries_];var names=this.seriesNames();for(var i=0;i<names.length;i++){var name=names[i];if(this.series_.hasOwnProperty(name)){optionsDicts.push(this.series_[name].options)}}for(var i=0;i<optionsDicts.length;i++){var dict=optionsDicts[i];if(!dict)continue;for(var optionName in dict){if(dict.hasOwnProperty(optionName)){validateOption(optionName)}}}};var WARNINGS={};DygraphOptions.prototype.warnInvalidOption_=function(optionName){if(!WARNINGS[optionName]){WARNINGS[optionName]=true;var isSeries=this.labels_.indexOf(optionName)>=0;if(isSeries){console.warn("Use new-style per-series options (saw "+optionName+" as top-level options key). See http://bit.ly/1tceaJs")}else{console.warn("Unknown option "+optionName+" (full list of options at dygraphs.com/options.html")}throw"invalid option "+optionName}};DygraphOptions.resetWarnings_=function(){WARNINGS={}}}}exports["default"]=DygraphOptions;module.exports=exports["default"]}).call(this,require("_process"))},{"./dygraph-default-attrs":18,"./dygraph-options-reference":22,"./dygraph-utils":25,_process:37}],24:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}var _dygraphUtils=require("./dygraph-utils");var utils=_interopRequireWildcard(_dygraphUtils);var TickList=undefined;var Ticker=undefined;var numericLinearTicks=function numericLinearTicks(a,b,pixels,opts,dygraph,vals){var nonLogscaleOpts=function nonLogscaleOpts(opt){if(opt==="logscale")return false;return opts(opt)};return numericTicks(a,b,pixels,nonLogscaleOpts,dygraph,vals)};exports.numericLinearTicks=numericLinearTicks;var numericTicks=function numericTicks(a,b,pixels,opts,dygraph,vals){var pixels_per_tick=opts("pixelsPerLabel");var ticks=[];var i,j,tickV,nTicks;if(vals){for(i=0;i<vals.length;i++){ticks.push({v:vals[i]})}}else{if(opts("logscale")){nTicks=Math.floor(pixels/pixels_per_tick);var minIdx=utils.binarySearch(a,PREFERRED_LOG_TICK_VALUES,1);var maxIdx=utils.binarySearch(b,PREFERRED_LOG_TICK_VALUES,-1);if(minIdx==-1){minIdx=0}if(maxIdx==-1){maxIdx=PREFERRED_LOG_TICK_VALUES.length-1}var lastDisplayed=null;if(maxIdx-minIdx>=nTicks/4){for(var idx=maxIdx;idx>=minIdx;idx--){var tickValue=PREFERRED_LOG_TICK_VALUES[idx];var pixel_coord=Math.log(tickValue/a)/Math.log(b/a)*pixels;var tick={v:tickValue};if(lastDisplayed===null){lastDisplayed={tickValue:tickValue,pixel_coord:pixel_coord}}else{if(Math.abs(pixel_coord-lastDisplayed.pixel_coord)>=pixels_per_tick){lastDisplayed={tickValue:tickValue,pixel_coord:pixel_coord}}else{tick.label=""}}ticks.push(tick)}ticks.reverse()}}if(ticks.length===0){var kmg2=opts("labelsKMG2");var mults,base;if(kmg2){mults=[1,2,4,8,16,32,64,128,256];base=16}else{mults=[1,2,5,10,20,50,100];base=10}var max_ticks=Math.ceil(pixels/pixels_per_tick);var units_per_tick=Math.abs(b-a)/max_ticks;var base_power=Math.floor(Math.log(units_per_tick)/Math.log(base));var base_scale=Math.pow(base,base_power);var scale,low_val,high_val,spacing;for(j=0;j<mults.length;j++){scale=base_scale*mults[j];low_val=Math.floor(a/scale)*scale;high_val=Math.ceil(b/scale)*scale;nTicks=Math.abs(high_val-low_val)/scale;spacing=pixels/nTicks;if(spacing>pixels_per_tick)break}if(low_val>high_val)scale*=-1;for(i=0;i<=nTicks;i++){tickV=low_val+i*scale;ticks.push({v:tickV})}}}var formatter=opts("axisLabelFormatter");for(i=0;i<ticks.length;i++){if(ticks[i].label!==undefined)continue;ticks[i].label=formatter.call(dygraph,ticks[i].v,0,opts,dygraph)}return ticks};exports.numericTicks=numericTicks;var dateTicker=function dateTicker(a,b,pixels,opts,dygraph,vals){var chosen=pickDateTickGranularity(a,b,pixels,opts);if(chosen>=0){return getDateAxis(a,b,chosen,opts,dygraph)}else{return[]}};exports.dateTicker=dateTicker;var Granularity={MILLISECONDLY:0,TWO_MILLISECONDLY:1,FIVE_MILLISECONDLY:2,TEN_MILLISECONDLY:3,FIFTY_MILLISECONDLY:4,HUNDRED_MILLISECONDLY:5,FIVE_HUNDRED_MILLISECONDLY:6,SECONDLY:7,TWO_SECONDLY:8,FIVE_SECONDLY:9,TEN_SECONDLY:10,THIRTY_SECONDLY:11,MINUTELY:12,TWO_MINUTELY:13,FIVE_MINUTELY:14,TEN_MINUTELY:15,THIRTY_MINUTELY:16,HOURLY:17,TWO_HOURLY:18,SIX_HOURLY:19,DAILY:20,TWO_DAILY:21,WEEKLY:22,MONTHLY:23,QUARTERLY:24,BIANNUAL:25,ANNUAL:26,DECADAL:27,CENTENNIAL:28,NUM_GRANULARITIES:29};exports.Granularity=Granularity;var DateField={DATEFIELD_Y:0,DATEFIELD_M:1,DATEFIELD_D:2,DATEFIELD_HH:3,DATEFIELD_MM:4,DATEFIELD_SS:5,DATEFIELD_MS:6,NUM_DATEFIELDS:7};var TICK_PLACEMENT=[];TICK_PLACEMENT[Granularity.MILLISECONDLY]={datefield:DateField.DATEFIELD_MS,step:1,spacing:1};TICK_PLACEMENT[Granularity.TWO_MILLISECONDLY]={datefield:DateField.DATEFIELD_MS,step:2,spacing:2};TICK_PLACEMENT[Granularity.FIVE_MILLISECONDLY]={datefield:DateField.DATEFIELD_MS,step:5,spacing:5};TICK_PLACEMENT[Granularity.TEN_MILLISECONDLY]={datefield:DateField.DATEFIELD_MS,step:10,spacing:10};TICK_PLACEMENT[Granularity.FIFTY_MILLISECONDLY]={datefield:DateField.DATEFIELD_MS,step:50,spacing:50};TICK_PLACEMENT[Granularity.HUNDRED_MILLISECONDLY]={datefield:DateField.DATEFIELD_MS,step:100,spacing:100};TICK_PLACEMENT[Granularity.FIVE_HUNDRED_MILLISECONDLY]={datefield:DateField.DATEFIELD_MS,step:500,spacing:500};TICK_PLACEMENT[Granularity.SECONDLY]={datefield:DateField.DATEFIELD_SS,step:1,spacing:1e3*1};TICK_PLACEMENT[Granularity.TWO_SECONDLY]={datefield:DateField.DATEFIELD_SS,step:2,spacing:1e3*2};TICK_PLACEMENT[Granularity.FIVE_SECONDLY]={datefield:DateField.DATEFIELD_SS,step:5,spacing:1e3*5};TICK_PLACEMENT[Granularity.TEN_SECONDLY]={datefield:DateField.DATEFIELD_SS,step:10,spacing:1e3*10};TICK_PLACEMENT[Granularity.THIRTY_SECONDLY]={datefield:DateField.DATEFIELD_SS,step:30,spacing:1e3*30};TICK_PLACEMENT[Granularity.MINUTELY]={datefield:DateField.DATEFIELD_MM,step:1,spacing:1e3*60};TICK_PLACEMENT[Granularity.TWO_MINUTELY]={datefield:DateField.DATEFIELD_MM,step:2,spacing:1e3*60*2};TICK_PLACEMENT[Granularity.FIVE_MINUTELY]={datefield:DateField.DATEFIELD_MM,step:5,spacing:1e3*60*5};TICK_PLACEMENT[Granularity.TEN_MINUTELY]={datefield:DateField.DATEFIELD_MM,step:10,spacing:1e3*60*10};TICK_PLACEMENT[Granularity.THIRTY_MINUTELY]={datefield:DateField.DATEFIELD_MM,step:30,spacing:1e3*60*30};TICK_PLACEMENT[Granularity.HOURLY]={datefield:DateField.DATEFIELD_HH,step:1,spacing:1e3*3600};TICK_PLACEMENT[Granularity.TWO_HOURLY]={datefield:DateField.DATEFIELD_HH,step:2,spacing:1e3*3600*2};TICK_PLACEMENT[Granularity.SIX_HOURLY]={datefield:DateField.DATEFIELD_HH,step:6,spacing:1e3*3600*6};TICK_PLACEMENT[Granularity.DAILY]={datefield:DateField.DATEFIELD_D,step:1,spacing:1e3*86400};TICK_PLACEMENT[Granularity.TWO_DAILY]={datefield:DateField.DATEFIELD_D,step:2,spacing:1e3*86400*2};TICK_PLACEMENT[Granularity.WEEKLY]={datefield:DateField.DATEFIELD_D,step:7,spacing:1e3*604800};TICK_PLACEMENT[Granularity.MONTHLY]={datefield:DateField.DATEFIELD_M,step:1,spacing:1e3*7200*365.2524};TICK_PLACEMENT[Granularity.QUARTERLY]={datefield:DateField.DATEFIELD_M,step:3,spacing:1e3*21600*365.2524};TICK_PLACEMENT[Granularity.BIANNUAL]={datefield:DateField.DATEFIELD_M,step:6,spacing:1e3*43200*365.2524};TICK_PLACEMENT[Granularity.ANNUAL]={datefield:DateField.DATEFIELD_Y,step:1,spacing:1e3*86400*365.2524};TICK_PLACEMENT[Granularity.DECADAL]={datefield:DateField.DATEFIELD_Y,step:10,spacing:1e3*864e3*365.2524};TICK_PLACEMENT[Granularity.CENTENNIAL]={datefield:DateField.DATEFIELD_Y,step:100,spacing:1e3*864e4*365.2524};var PREFERRED_LOG_TICK_VALUES=function(){var vals=[];for(var power=-39;power<=39;power++){var range=Math.pow(10,power);for(var mult=1;mult<=9;mult++){var val=range*mult;vals.push(val)}}return vals}();var pickDateTickGranularity=function pickDateTickGranularity(a,b,pixels,opts){var pixels_per_tick=opts("pixelsPerLabel");for(var i=0;i<Granularity.NUM_GRANULARITIES;i++){var num_ticks=numDateTicks(a,b,i);if(pixels/num_ticks>=pixels_per_tick){return i}}return-1};var numDateTicks=function numDateTicks(start_time,end_time,granularity){var spacing=TICK_PLACEMENT[granularity].spacing;return Math.round(1*(end_time-start_time)/spacing)};var getDateAxis=function getDateAxis(start_time,end_time,granularity,opts,dg){var formatter=opts("axisLabelFormatter");var utc=opts("labelsUTC");var accessors=utc?utils.DateAccessorsUTC:utils.DateAccessorsLocal;var datefield=TICK_PLACEMENT[granularity].datefield;var step=TICK_PLACEMENT[granularity].step;var spacing=TICK_PLACEMENT[granularity].spacing;var start_date=new Date(start_time);var date_array=[];date_array[DateField.DATEFIELD_Y]=accessors.getFullYear(start_date);date_array[DateField.DATEFIELD_M]=accessors.getMonth(start_date);date_array[DateField.DATEFIELD_D]=accessors.getDate(start_date);date_array[DateField.DATEFIELD_HH]=accessors.getHours(start_date);date_array[DateField.DATEFIELD_MM]=accessors.getMinutes(start_date);date_array[DateField.DATEFIELD_SS]=accessors.getSeconds(start_date);date_array[DateField.DATEFIELD_MS]=accessors.getMilliseconds(start_date);var start_date_offset=date_array[datefield]%step;if(granularity==Granularity.WEEKLY){start_date_offset=accessors.getDay(start_date)}date_array[datefield]-=start_date_offset;for(var df=datefield+1;df<DateField.NUM_DATEFIELDS;df++){date_array[df]=df===DateField.DATEFIELD_D?1:0}var ticks=[];var tick_date=accessors.makeDate.apply(null,date_array);var tick_time=tick_date.getTime();if(granularity<=Granularity.HOURLY){if(tick_time<start_time){tick_time+=spacing;tick_date=new Date(tick_time)}while(tick_time<=end_time){ticks.push({v:tick_time,label:formatter.call(dg,tick_date,granularity,opts,dg)});tick_time+=spacing;tick_date=new Date(tick_time)}}else{if(tick_time<start_time){date_array[datefield]+=step;tick_date=accessors.makeDate.apply(null,date_array);tick_time=tick_date.getTime()}while(tick_time<=end_time){if(granularity>=Granularity.DAILY||accessors.getHours(tick_date)%step===0){ticks.push({v:tick_time,label:formatter.call(dg,tick_date,granularity,opts,dg)})}date_array[datefield]+=step;tick_date=accessors.makeDate.apply(null,date_array);tick_time=tick_date.getTime()}}return ticks};exports.getDateAxis=getDateAxis},{"./dygraph-utils":25}],25:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.removeEvent=removeEvent;exports.cancelEvent=cancelEvent;exports.hsvToRGB=hsvToRGB;exports.findPos=findPos;exports.pageX=pageX;exports.pageY=pageY;exports.dragGetX_=dragGetX_;exports.dragGetY_=dragGetY_;exports.isOK=isOK;exports.isValidPoint=isValidPoint;exports.floatFormat=floatFormat;exports.zeropad=zeropad;exports.hmsString_=hmsString_;exports.dateString_=dateString_;exports.round_=round_;exports.binarySearch=binarySearch;exports.dateParser=dateParser;exports.dateStrToMillis=dateStrToMillis;exports.update=update;exports.updateDeep=updateDeep;exports.isArrayLike=isArrayLike;exports.isDateLike=isDateLike;exports.clone=clone;exports.createCanvas=createCanvas;exports.getContextPixelRatio=getContextPixelRatio;exports.Iterator=Iterator;exports.createIterator=createIterator;exports.repeatAndCleanup=repeatAndCleanup;exports.isPixelChangingOptionList=isPixelChangingOptionList;exports.detectLineDelimiter=detectLineDelimiter;exports.isNodeContainedBy=isNodeContainedBy;exports.pow=pow;exports.toRGB_=toRGB_;exports.isCanvasSupported=isCanvasSupported;exports.parseFloat_=parseFloat_;exports.numberValueFormatter=numberValueFormatter;exports.numberAxisLabelFormatter=numberAxisLabelFormatter;exports.dateAxisLabelFormatter=dateAxisLabelFormatter;exports.dateValueFormatter=dateValueFormatter;function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}var _dygraphTickers=require("./dygraph-tickers");var DygraphTickers=_interopRequireWildcard(_dygraphTickers);var LOG_SCALE=10;exports.LOG_SCALE=LOG_SCALE;var LN_TEN=Math.log(LOG_SCALE);exports.LN_TEN=LN_TEN;var log10=function log10(x){return Math.log(x)/LN_TEN};exports.log10=log10;var logRangeFraction=function logRangeFraction(r0,r1,pct){var logr0=log10(r0);var logr1=log10(r1);var exponent=logr0+pct*(logr1-logr0);var value=Math.pow(LOG_SCALE,exponent);return value};exports.logRangeFraction=logRangeFraction;var DOTTED_LINE=[2,2];exports.DOTTED_LINE=DOTTED_LINE;var DASHED_LINE=[7,3];exports.DASHED_LINE=DASHED_LINE;var DOT_DASH_LINE=[7,2,2,2];exports.DOT_DASH_LINE=DOT_DASH_LINE;var HORIZONTAL=1;exports.HORIZONTAL=HORIZONTAL;var VERTICAL=2;exports.VERTICAL=VERTICAL;var getContext=function getContext(canvas){return canvas.getContext("2d")};exports.getContext=getContext;var addEvent=function addEvent(elem,type,fn){elem.addEventListener(type,fn,false)};exports.addEvent=addEvent;function removeEvent(elem,type,fn){elem.removeEventListener(type,fn,false)}function cancelEvent(e){e=e?e:window.event;if(e.stopPropagation){e.stopPropagation()}if(e.preventDefault){e.preventDefault()}e.cancelBubble=true;e.cancel=true;e.returnValue=false;return false}function hsvToRGB(hue,saturation,value){var red;var green;var blue;if(saturation===0){red=value;green=value;blue=value}else{var i=Math.floor(hue*6);var f=hue*6-i;var p=value*(1-saturation);var q=value*(1-saturation*f);var t=value*(1-saturation*(1-f));switch(i){case 1:red=q;green=value;blue=p;break;case 2:red=p;green=value;blue=t;break;case 3:red=p;green=q;blue=value;break;case 4:red=t;green=p;blue=value;break;case 5:red=value;green=p;blue=q;break;case 6:case 0:red=value;green=t;blue=p;break}}red=Math.floor(255*red+.5);green=Math.floor(255*green+.5);blue=Math.floor(255*blue+.5);return"rgb("+red+","+green+","+blue+")"}function findPos(obj){var p=obj.getBoundingClientRect(),w=window,d=document.documentElement;return{x:p.left+(w.pageXOffset||d.scrollLeft),y:p.top+(w.pageYOffset||d.scrollTop)}}function pageX(e){return!e.pageX||e.pageX<0?0:e.pageX}function pageY(e){return!e.pageY||e.pageY<0?0:e.pageY}function dragGetX_(e,context){return pageX(e)-context.px}function dragGetY_(e,context){return pageY(e)-context.py}function isOK(x){return!!x&&!isNaN(x)}function isValidPoint(p,opt_allowNaNY){if(!p)return false;if(p.yval===null)return false;if(p.x===null||p.x===undefined)return false;if(p.y===null||p.y===undefined)return false;if(isNaN(p.x)||!opt_allowNaNY&&isNaN(p.y))return false;return true}function floatFormat(x,opt_precision){var p=Math.min(Math.max(1,opt_precision||2),21);return Math.abs(x)<.001&&x!==0?x.toExponential(p-1):x.toPrecision(p)}function zeropad(x){if(x<10)return"0"+x;else return""+x}var DateAccessorsLocal={getFullYear:function getFullYear(d){return d.getFullYear()},getMonth:function getMonth(d){return d.getMonth()},getDate:function getDate(d){return d.getDate()},getHours:function getHours(d){return d.getHours()},getMinutes:function getMinutes(d){return d.getMinutes()},getSeconds:function getSeconds(d){return d.getSeconds()},getMilliseconds:function getMilliseconds(d){return d.getMilliseconds()},getDay:function getDay(d){return d.getDay()},makeDate:function makeDate(y,m,d,hh,mm,ss,ms){return new Date(y,m,d,hh,mm,ss,ms)}};exports.DateAccessorsLocal=DateAccessorsLocal;var DateAccessorsUTC={getFullYear:function getFullYear(d){return d.getUTCFullYear()},getMonth:function getMonth(d){return d.getUTCMonth()},getDate:function getDate(d){return d.getUTCDate()},getHours:function getHours(d){return d.getUTCHours()},getMinutes:function getMinutes(d){return d.getUTCMinutes()},getSeconds:function getSeconds(d){return d.getUTCSeconds()},getMilliseconds:function getMilliseconds(d){return d.getUTCMilliseconds()},getDay:function getDay(d){return d.getUTCDay()},makeDate:function makeDate(y,m,d,hh,mm,ss,ms){return new Date(Date.UTC(y,m,d,hh,mm,ss,ms))}};exports.DateAccessorsUTC=DateAccessorsUTC;function hmsString_(hh,mm,ss,ms){var ret=zeropad(hh)+":"+zeropad(mm);if(ss){ret+=":"+zeropad(ss);if(ms){var str=""+ms;ret+="."+("000"+str).substring(str.length)}}return ret}function dateString_(time,utc){var accessors=utc?DateAccessorsUTC:DateAccessorsLocal;var date=new Date(time);var y=accessors.getFullYear(date);var m=accessors.getMonth(date);var d=accessors.getDate(date);var hh=accessors.getHours(date);var mm=accessors.getMinutes(date);var ss=accessors.getSeconds(date);var ms=accessors.getMilliseconds(date);var year=""+y;var month=zeropad(m+1);var day=zeropad(d);var frac=hh*3600+mm*60+ss+.001*ms;var ret=year+"/"+month+"/"+day;if(frac){ret+=" "+hmsString_(hh,mm,ss,ms)}return ret}function round_(num,places){var shift=Math.pow(10,places);return Math.round(num*shift)/shift}function binarySearch(_x,_x2,_x3,_x4,_x5){var _again=true;_function:while(_again){var val=_x,arry=_x2,abs=_x3,low=_x4,high=_x5;_again=false;if(low===null||low===undefined||high===null||high===undefined){low=0;high=arry.length-1}if(low>high){return-1}if(abs===null||abs===undefined){abs=0}var validIndex=function validIndex(idx){return idx>=0&&idx<arry.length};var mid=parseInt((low+high)/2,10);var element=arry[mid];var idx;if(element==val){return mid}else if(element>val){if(abs>0){idx=mid-1;if(validIndex(idx)&&arry[idx]<val){return mid}}_x=val;_x2=arry;_x3=abs;_x4=low;_x5=mid-1;_again=true;validIndex=mid=element=idx=undefined;continue _function}else if(element<val){if(abs<0){idx=mid+1;if(validIndex(idx)&&arry[idx]>val){return mid}}_x=val;_x2=arry;_x3=abs;_x4=mid+1;_x5=high;_again=true;validIndex=mid=element=idx=undefined;continue _function}return-1}}function dateParser(dateStr){var dateStrSlashed;var d;if(dateStr.search("-")==-1||dateStr.search("T")!=-1||dateStr.search("Z")!=-1){d=dateStrToMillis(dateStr);if(d&&!isNaN(d))return d}if(dateStr.search("-")!=-1){dateStrSlashed=dateStr.replace("-","/","g");while(dateStrSlashed.search("-")!=-1){dateStrSlashed=dateStrSlashed.replace("-","/")}d=dateStrToMillis(dateStrSlashed)}else if(dateStr.length==8){dateStrSlashed=dateStr.substr(0,4)+"/"+dateStr.substr(4,2)+"/"+dateStr.substr(6,2);d=dateStrToMillis(dateStrSlashed)}else{d=dateStrToMillis(dateStr)}if(!d||isNaN(d)){console.error("Couldn't parse "+dateStr+" as a date")}return d}function dateStrToMillis(str){return new Date(str).getTime()}function update(self,o){if(typeof o!="undefined"&&o!==null){for(var k in o){if(o.hasOwnProperty(k)){self[k]=o[k]}}}return self}function updateDeep(self,o){function isNode(o){return typeof Node==="object"?o instanceof Node:typeof o==="object"&&typeof o.nodeType==="number"&&typeof o.nodeName==="string"}if(typeof o!="undefined"&&o!==null){for(var k in o){if(o.hasOwnProperty(k)){if(o[k]===null){self[k]=null}else if(isArrayLike(o[k])){self[k]=o[k].slice()}else if(isNode(o[k])){self[k]=o[k]}else if(typeof o[k]=="object"){if(typeof self[k]!="object"||self[k]===null){self[k]={}}updateDeep(self[k],o[k])}else{self[k]=o[k]}}}}return self}function isArrayLike(o){var typ=typeof o;if(typ!="object"&&!(typ=="function"&&typeof o.item=="function")||o===null||typeof o.length!="number"||o.nodeType===3){return false}return true}function isDateLike(o){if(typeof o!="object"||o===null||typeof o.getTime!="function"){return false}return true}function clone(o){var r=[];for(var i=0;i<o.length;i++){if(isArrayLike(o[i])){r.push(clone(o[i]))}else{r.push(o[i])}}return r}function createCanvas(){return document.createElement("canvas")}function getContextPixelRatio(context){try{var devicePixelRatio=window.devicePixelRatio;var backingStoreRatio=context.webkitBackingStorePixelRatio||context.mozBackingStorePixelRatio||context.msBackingStorePixelRatio||context.oBackingStorePixelRatio||context.backingStorePixelRatio||1;if(devicePixelRatio!==undefined){return devicePixelRatio/backingStoreRatio}else{return 1}}catch(e){return 1}}function Iterator(array,start,length,predicate){start=start||0;length=length||array.length;this.hasNext=true;this.peek=null;this.start_=start;this.array_=array;this.predicate_=predicate;this.end_=Math.min(array.length,start+length);this.nextIdx_=start-1;this.next()}Iterator.prototype.next=function(){if(!this.hasNext){return null}var obj=this.peek;var nextIdx=this.nextIdx_+1;var found=false;while(nextIdx<this.end_){if(!this.predicate_||this.predicate_(this.array_,nextIdx)){this.peek=this.array_[nextIdx];found=true;break}nextIdx++}this.nextIdx_=nextIdx;if(!found){this.hasNext=false;this.peek=null}return obj};function createIterator(array,start,length,opt_predicate){return new Iterator(array,start,length,opt_predicate)}var requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){window.setTimeout(callback,1e3/60)}}();exports.requestAnimFrame=requestAnimFrame;function repeatAndCleanup(repeatFn,maxFrames,framePeriodInMillis,cleanupFn){var frameNumber=0;var previousFrameNumber;var startTime=(new Date).getTime();repeatFn(frameNumber);if(maxFrames==1){cleanupFn();return}var maxFrameArg=maxFrames-1;(function loop(){if(frameNumber>=maxFrames)return;requestAnimFrame.call(window,function(){var currentTime=(new Date).getTime();var delayInMillis=currentTime-startTime;previousFrameNumber=frameNumber;frameNumber=Math.floor(delayInMillis/framePeriodInMillis);var frameDelta=frameNumber-previousFrameNumber;var predictOvershootStutter=frameNumber+frameDelta>maxFrameArg;if(predictOvershootStutter||frameNumber>=maxFrameArg){repeatFn(maxFrameArg);cleanupFn()}else{if(frameDelta!==0){repeatFn(frameNumber)}loop()}})})()}var pixelSafeOptions={annotationClickHandler:true,annotationDblClickHandler:true,annotationMouseOutHandler:true,annotationMouseOverHandler:true,axisLineColor:true,axisLineWidth:true,clickCallback:true,drawCallback:true,drawHighlightPointCallback:true,drawPoints:true,drawPointCallback:true,drawGrid:true,fillAlpha:true,gridLineColor:true,gridLineWidth:true,hideOverlayOnMouseOut:true,highlightCallback:true,highlightCircleSize:true,interactionModel:true,labelsDiv:true,labelsKMB:true,labelsKMG2:true,labelsSeparateLines:true,labelsShowZeroValues:true,legend:true,panEdgeFraction:true,pixelsPerYLabel:true,pointClickCallback:true,pointSize:true,rangeSelectorPlotFillColor:true,rangeSelectorPlotFillGradientColor:true,rangeSelectorPlotStrokeColor:true,rangeSelectorBackgroundStrokeColor:true,rangeSelectorBackgroundLineWidth:true,rangeSelectorPlotLineWidth:true,rangeSelectorForegroundStrokeColor:true,rangeSelectorForegroundLineWidth:true,rangeSelectorAlpha:true,showLabelsOnHighlight:true,showRoller:true,strokeWidth:true,underlayCallback:true,unhighlightCallback:true,zoomCallback:true};function isPixelChangingOptionList(labels,attrs){var seriesNamesDictionary={};if(labels){for(var i=1;i<labels.length;i++){seriesNamesDictionary[labels[i]]=true}}var scanFlatOptions=function scanFlatOptions(options){for(var property in options){if(options.hasOwnProperty(property)&&!pixelSafeOptions[property]){return true}}return false};for(var property in attrs){if(!attrs.hasOwnProperty(property))continue;if(property=="highlightSeriesOpts"||seriesNamesDictionary[property]&&!attrs.series){if(scanFlatOptions(attrs[property]))return true}else if(property=="series"||property=="axes"){var perSeries=attrs[property];for(var series in perSeries){if(perSeries.hasOwnProperty(series)&&scanFlatOptions(perSeries[series])){return true}}}else{if(!pixelSafeOptions[property])return true}}return false}var Circles={DEFAULT:function DEFAULT(g,name,ctx,canvasx,canvasy,color,radius){ctx.beginPath();ctx.fillStyle=color;ctx.arc(canvasx,canvasy,radius,0,2*Math.PI,false);ctx.fill()}};exports.Circles=Circles;function detectLineDelimiter(data){for(var i=0;i<data.length;i++){var code=data.charAt(i);if(code==="\r"){if(i+1<data.length&&data.charAt(i+1)==="\n"){return"\r\n"}return code}if(code==="\n"){if(i+1<data.length&&data.charAt(i+1)==="\r"){return"\n\r"}return code}}return null}function isNodeContainedBy(containee,container){if(container===null||containee===null){return false}var containeeNode=containee;while(containeeNode&&containeeNode!==container){containeeNode=containeeNode.parentNode}return containeeNode===container}function pow(base,exp){if(exp<0){return 1/Math.pow(base,-exp)}return Math.pow(base,exp)}var RGBA_RE=/^rgba?\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})(?:,\s*([01](?:\.\d+)?))?\)$/;function parseRGBA(rgbStr){var bits=RGBA_RE.exec(rgbStr);if(!bits)return null;var r=parseInt(bits[1],10),g=parseInt(bits[2],10),b=parseInt(bits[3],10);if(bits[4]){return{r:r,g:g,b:b,a:parseFloat(bits[4])}}else{return{r:r,g:g,b:b}}}function toRGB_(colorStr){var rgb=parseRGBA(colorStr);if(rgb)return rgb;var div=document.createElement("div");div.style.backgroundColor=colorStr;div.style.visibility="hidden";document.body.appendChild(div);var rgbStr=window.getComputedStyle(div,null).backgroundColor;document.body.removeChild(div);return parseRGBA(rgbStr)}function isCanvasSupported(opt_canvasElement){try{var canvas=opt_canvasElement||document.createElement("canvas");canvas.getContext("2d")}catch(e){return false}return true}function parseFloat_(x,opt_line_no,opt_line){var val=parseFloat(x);if(!isNaN(val))return val;if(/^ *$/.test(x))return null;if(/^ *nan *$/i.test(x))return NaN;var msg="Unable to parse '"+x+"' as a number";if(opt_line!==undefined&&opt_line_no!==undefined){msg+=" on line "+(1+(opt_line_no||0))+" ('"+opt_line+"') of CSV."}console.error(msg);return null}var KMB_LABELS=["K","M","B","T","Q"];var KMG2_BIG_LABELS=["k","M","G","T","P","E","Z","Y"];var KMG2_SMALL_LABELS=["m","u","n","p","f","a","z","y"];function numberValueFormatter(x,opts){var sigFigs=opts("sigFigs");if(sigFigs!==null){return floatFormat(x,sigFigs)}var digits=opts("digitsAfterDecimal");var maxNumberWidth=opts("maxNumberWidth");var kmb=opts("labelsKMB");var kmg2=opts("labelsKMG2");var label;if(x!==0&&(Math.abs(x)>=Math.pow(10,maxNumberWidth)||Math.abs(x)<Math.pow(10,-digits))){label=x.toExponential(digits)}else{label=""+round_(x,digits)}if(kmb||kmg2){var k;var k_labels=[];var m_labels=[];if(kmb){k=1e3;k_labels=KMB_LABELS}if(kmg2){if(kmb)console.warn("Setting both labelsKMB and labelsKMG2. Pick one!");k=1024;k_labels=KMG2_BIG_LABELS;m_labels=KMG2_SMALL_LABELS}var absx=Math.abs(x);var n=pow(k,k_labels.length);for(var j=k_labels.length-1;j>=0;j--,n/=k){if(absx>=n){label=round_(x/n,digits)+k_labels[j];break}}if(kmg2){var x_parts=String(x.toExponential()).split("e-");if(x_parts.length===2&&x_parts[1]>=3&&x_parts[1]<=24){if(x_parts[1]%3>0){label=round_(x_parts[0]/pow(10,x_parts[1]%3),digits)}else{label=Number(x_parts[0]).toFixed(2)}label+=m_labels[Math.floor(x_parts[1]/3)-1]}}}return label}function numberAxisLabelFormatter(x,granularity,opts){return numberValueFormatter.call(this,x,opts)}var SHORT_MONTH_NAMES_=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function dateAxisLabelFormatter(date,granularity,opts){var utc=opts("labelsUTC");var accessors=utc?DateAccessorsUTC:DateAccessorsLocal;var year=accessors.getFullYear(date),month=accessors.getMonth(date),day=accessors.getDate(date),hours=accessors.getHours(date),mins=accessors.getMinutes(date),secs=accessors.getSeconds(date),millis=accessors.getMilliseconds(date);if(granularity>=DygraphTickers.Granularity.DECADAL){return""+year}else if(granularity>=DygraphTickers.Granularity.MONTHLY){return SHORT_MONTH_NAMES_[month]+"&#160;"+year}else{var frac=hours*3600+mins*60+secs+.001*millis;if(frac===0||granularity>=DygraphTickers.Granularity.DAILY){return zeropad(day)+"&#160;"+SHORT_MONTH_NAMES_[month]}else if(granularity<DygraphTickers.Granularity.SECONDLY){var str=""+millis;return zeropad(secs)+"."+("000"+str).substring(str.length)}else if(granularity>DygraphTickers.Granularity.MINUTELY){return hmsString_(hours,mins,secs,0)}else{return hmsString_(hours,mins,secs,millis)}}}function dateValueFormatter(d,opts){return dateString_(d,opts("labelsUTC"))}},{"./dygraph-tickers":24}],26:[function(require,module,exports){(function(process){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _dygraphLayout=require("./dygraph-layout");var _dygraphLayout2=_interopRequireDefault(_dygraphLayout);var _dygraphCanvas=require("./dygraph-canvas");var _dygraphCanvas2=_interopRequireDefault(_dygraphCanvas);var _dygraphOptions=require("./dygraph-options");var _dygraphOptions2=_interopRequireDefault(_dygraphOptions);var _dygraphInteractionModel=require("./dygraph-interaction-model");var _dygraphInteractionModel2=_interopRequireDefault(_dygraphInteractionModel);var _dygraphTickers=require("./dygraph-tickers");var DygraphTickers=_interopRequireWildcard(_dygraphTickers);var _dygraphUtils=require("./dygraph-utils");var utils=_interopRequireWildcard(_dygraphUtils);var _dygraphDefaultAttrs=require("./dygraph-default-attrs");var _dygraphDefaultAttrs2=_interopRequireDefault(_dygraphDefaultAttrs);var _dygraphOptionsReference=require("./dygraph-options-reference");var _dygraphOptionsReference2=_interopRequireDefault(_dygraphOptionsReference);var _iframeTarp=require("./iframe-tarp");var _iframeTarp2=_interopRequireDefault(_iframeTarp);var _datahandlerDefault=require("./datahandler/default");var _datahandlerDefault2=_interopRequireDefault(_datahandlerDefault);var _datahandlerBarsError=require("./datahandler/bars-error");var _datahandlerBarsError2=_interopRequireDefault(_datahandlerBarsError);var _datahandlerBarsCustom=require("./datahandler/bars-custom");var _datahandlerBarsCustom2=_interopRequireDefault(_datahandlerBarsCustom);var _datahandlerDefaultFractions=require("./datahandler/default-fractions");var _datahandlerDefaultFractions2=_interopRequireDefault(_datahandlerDefaultFractions);var _datahandlerBarsFractions=require("./datahandler/bars-fractions");var _datahandlerBarsFractions2=_interopRequireDefault(_datahandlerBarsFractions);var _datahandlerBars=require("./datahandler/bars");var _datahandlerBars2=_interopRequireDefault(_datahandlerBars);var _pluginsAnnotations=require("./plugins/annotations");var _pluginsAnnotations2=_interopRequireDefault(_pluginsAnnotations);var _pluginsAxes=require("./plugins/axes");var _pluginsAxes2=_interopRequireDefault(_pluginsAxes);var _pluginsChartLabels=require("./plugins/chart-labels");var _pluginsChartLabels2=_interopRequireDefault(_pluginsChartLabels);var _pluginsGrid=require("./plugins/grid");var _pluginsGrid2=_interopRequireDefault(_pluginsGrid);var _pluginsLegend=require("./plugins/legend");var _pluginsLegend2=_interopRequireDefault(_pluginsLegend);var _pluginsRangeSelector=require("./plugins/range-selector");var _pluginsRangeSelector2=_interopRequireDefault(_pluginsRangeSelector);var _dygraphGviz=require("./dygraph-gviz");var _dygraphGviz2=_interopRequireDefault(_dygraphGviz);"use strict";var Dygraph=function Dygraph(div,data,opts){this.__init__(div,data,opts)};Dygraph.NAME="Dygraph";Dygraph.VERSION="2.0.0";Dygraph.DEFAULT_ROLL_PERIOD=1;Dygraph.DEFAULT_WIDTH=480;Dygraph.DEFAULT_HEIGHT=320;Dygraph.ANIMATION_STEPS=12;Dygraph.ANIMATION_DURATION=200;Dygraph.Plotters=_dygraphCanvas2["default"]._Plotters;Dygraph.addedAnnotationCSS=false;Dygraph.prototype.__init__=function(div,file,attrs){this.is_initial_draw_=true;this.readyFns_=[];if(attrs===null||attrs===undefined){attrs={}}attrs=Dygraph.copyUserAttrs_(attrs);if(typeof div=="string"){div=document.getElementById(div)}if(!div){throw new Error("Constructing dygraph with a non-existent div!")}this.maindiv_=div;this.file_=file;this.rollPeriod_=attrs.rollPeriod||Dygraph.DEFAULT_ROLL_PERIOD;this.previousVerticalX_=-1;this.fractions_=attrs.fractions||false;this.dateWindow_=attrs.dateWindow||null;this.annotations_=[];div.innerHTML="";if(div.style.width===""&&attrs.width){div.style.width=attrs.width+"px"}if(div.style.height===""&&attrs.height){div.style.height=attrs.height+"px"}if(div.style.height===""&&div.clientHeight===0){div.style.height=Dygraph.DEFAULT_HEIGHT+"px";if(div.style.width===""){div.style.width=Dygraph.DEFAULT_WIDTH+"px"}}this.width_=div.clientWidth||attrs.width||0;this.height_=div.clientHeight||attrs.height||0;if(attrs.stackedGraph){attrs.fillGraph=true}this.user_attrs_={};utils.update(this.user_attrs_,attrs);this.attrs_={};utils.updateDeep(this.attrs_,_dygraphDefaultAttrs2["default"]);this.boundaryIds_=[];this.setIndexByName_={};this.datasetIndex_=[];this.registeredEvents_=[];this.eventListeners_={};this.attributes_=new _dygraphOptions2["default"](this);this.createInterface_();this.plugins_=[];var plugins=Dygraph.PLUGINS.concat(this.getOption("plugins"));for(var i=0;i<plugins.length;i++){var Plugin=plugins[i];var pluginInstance;if(typeof Plugin.activate!=="undefined"){pluginInstance=Plugin}else{pluginInstance=new Plugin}var pluginDict={plugin:pluginInstance,events:{},options:{},pluginOptions:{}};var handlers=pluginInstance.activate(this);for(var eventName in handlers){if(!handlers.hasOwnProperty(eventName))continue;pluginDict.events[eventName]=handlers[eventName]}this.plugins_.push(pluginDict)}for(var i=0;i<this.plugins_.length;i++){var plugin_dict=this.plugins_[i];for(var eventName in plugin_dict.events){if(!plugin_dict.events.hasOwnProperty(eventName))continue;var callback=plugin_dict.events[eventName];var pair=[plugin_dict.plugin,callback];if(!(eventName in this.eventListeners_)){this.eventListeners_[eventName]=[pair]}else{this.eventListeners_[eventName].push(pair)}}}this.createDragInterface_();this.start_()};Dygraph.prototype.cascadeEvents_=function(name,extra_props){if(!(name in this.eventListeners_))return false;var e={dygraph:this,cancelable:false,defaultPrevented:false,preventDefault:function preventDefault(){if(!e.cancelable)throw"Cannot call preventDefault on non-cancelable event.";e.defaultPrevented=true},propagationStopped:false,stopPropagation:function stopPropagation(){e.propagationStopped=true}};utils.update(e,extra_props);var callback_plugin_pairs=this.eventListeners_[name];if(callback_plugin_pairs){for(var i=callback_plugin_pairs.length-1;i>=0;i--){var plugin=callback_plugin_pairs[i][0];var callback=callback_plugin_pairs[i][1];callback.call(plugin,e);if(e.propagationStopped)break}}return e.defaultPrevented};Dygraph.prototype.getPluginInstance_=function(type){for(var i=0;i<this.plugins_.length;i++){var p=this.plugins_[i];if(p.plugin instanceof type){return p.plugin}}return null};Dygraph.prototype.isZoomed=function(axis){var isZoomedX=!!this.dateWindow_;if(axis==="x")return isZoomedX;var isZoomedY=this.axes_.map(function(axis){return!!axis.valueRange}).indexOf(true)>=0;if(axis===null||axis===undefined){return isZoomedX||isZoomedY}if(axis==="y")return isZoomedY;throw new Error("axis parameter is ["+axis+"] must be null, 'x' or 'y'.")};Dygraph.prototype.toString=function(){var maindiv=this.maindiv_;var id=maindiv&&maindiv.id?maindiv.id:maindiv;return"[Dygraph "+id+"]"};Dygraph.prototype.attr_=function(name,seriesName){if(typeof process!=="undefined"){if(process.env.NODE_ENV!="production"){if(typeof _dygraphOptionsReference2["default"]==="undefined"){console.error("Must include options reference JS for testing")}else if(!_dygraphOptionsReference2["default"].hasOwnProperty(name)){console.error("Dygraphs is using property "+name+", which has no "+"entry in the Dygraphs.OPTIONS_REFERENCE listing.");_dygraphOptionsReference2["default"][name]=true}}}return seriesName?this.attributes_.getForSeries(name,seriesName):this.attributes_.get(name)};Dygraph.prototype.getOption=function(name,opt_seriesName){return this.attr_(name,opt_seriesName)};Dygraph.prototype.getNumericOption=function(name,opt_seriesName){return this.getOption(name,opt_seriesName)};Dygraph.prototype.getStringOption=function(name,opt_seriesName){return this.getOption(name,opt_seriesName)};Dygraph.prototype.getBooleanOption=function(name,opt_seriesName){return this.getOption(name,opt_seriesName)};Dygraph.prototype.getFunctionOption=function(name,opt_seriesName){return this.getOption(name,opt_seriesName)};Dygraph.prototype.getOptionForAxis=function(name,axis){return this.attributes_.getForAxis(name,axis)};Dygraph.prototype.optionsViewForAxis_=function(axis){var self=this;return function(opt){var axis_opts=self.user_attrs_.axes;if(axis_opts&&axis_opts[axis]&&axis_opts[axis].hasOwnProperty(opt)){return axis_opts[axis][opt]}if(axis==="x"&&opt==="logscale"){return false}if(typeof self.user_attrs_[opt]!="undefined"){return self.user_attrs_[opt]}axis_opts=self.attrs_.axes;if(axis_opts&&axis_opts[axis]&&axis_opts[axis].hasOwnProperty(opt)){return axis_opts[axis][opt]}if(axis=="y"&&self.axes_[0].hasOwnProperty(opt)){return self.axes_[0][opt]}else if(axis=="y2"&&self.axes_[1].hasOwnProperty(opt)){return self.axes_[1][opt]}return self.attr_(opt)}};Dygraph.prototype.rollPeriod=function(){return this.rollPeriod_};Dygraph.prototype.xAxisRange=function(){return this.dateWindow_?this.dateWindow_:this.xAxisExtremes()};Dygraph.prototype.xAxisExtremes=function(){var pad=this.getNumericOption("xRangePad")/this.plotter_.area.w;if(this.numRows()===0){return[0-pad,1+pad]}var left=this.rawData_[0][0];var right=this.rawData_[this.rawData_.length-1][0];if(pad){var range=right-left;left-=range*pad;right+=range*pad}return[left,right]};Dygraph.prototype.yAxisExtremes=function(){var packed=this.gatherDatasets_(this.rolledSeries_,null);var extremes=packed.extremes;var saveAxes=this.axes_;this.computeYAxisRanges_(extremes);var newAxes=this.axes_;this.axes_=saveAxes;return newAxes.map(function(axis){return axis.extremeRange})};Dygraph.prototype.yAxisRange=function(idx){if(typeof idx=="undefined")idx=0;if(idx<0||idx>=this.axes_.length){return null}var axis=this.axes_[idx];return[axis.computedValueRange[0],axis.computedValueRange[1]]};Dygraph.prototype.yAxisRanges=function(){var ret=[];for(var i=0;i<this.axes_.length;i++){ret.push(this.yAxisRange(i))}return ret};Dygraph.prototype.toDomCoords=function(x,y,axis){return[this.toDomXCoord(x),this.toDomYCoord(y,axis)]};Dygraph.prototype.toDomXCoord=function(x){if(x===null){return null}var area=this.plotter_.area;var xRange=this.xAxisRange();return area.x+(x-xRange[0])/(xRange[1]-xRange[0])*area.w};Dygraph.prototype.toDomYCoord=function(y,axis){var pct=this.toPercentYCoord(y,axis);if(pct===null){return null}var area=this.plotter_.area;return area.y+pct*area.h};Dygraph.prototype.toDataCoords=function(x,y,axis){return[this.toDataXCoord(x),this.toDataYCoord(y,axis)]};Dygraph.prototype.toDataXCoord=function(x){if(x===null){return null}var area=this.plotter_.area;var xRange=this.xAxisRange();if(!this.attributes_.getForAxis("logscale","x")){return xRange[0]+(x-area.x)/area.w*(xRange[1]-xRange[0])}else{var pct=(x-area.x)/area.w;return utils.logRangeFraction(xRange[0],xRange[1],pct)}};Dygraph.prototype.toDataYCoord=function(y,axis){if(y===null){return null}var area=this.plotter_.area;var yRange=this.yAxisRange(axis);if(typeof axis=="undefined")axis=0;if(!this.attributes_.getForAxis("logscale",axis)){return yRange[0]+(area.y+area.h-y)/area.h*(yRange[1]-yRange[0])}else{var pct=(y-area.y)/area.h;return utils.logRangeFraction(yRange[1],yRange[0],pct)}};Dygraph.prototype.toPercentYCoord=function(y,axis){if(y===null){return null}if(typeof axis=="undefined")axis=0;var yRange=this.yAxisRange(axis);var pct;var logscale=this.attributes_.getForAxis("logscale",axis);if(logscale){var logr0=utils.log10(yRange[0]);var logr1=utils.log10(yRange[1]);pct=(logr1-utils.log10(y))/(logr1-logr0)}else{pct=(yRange[1]-y)/(yRange[1]-yRange[0])}return pct};Dygraph.prototype.toPercentXCoord=function(x){if(x===null){return null}var xRange=this.xAxisRange();var pct;var logscale=this.attributes_.getForAxis("logscale","x");if(logscale===true){var logr0=utils.log10(xRange[0]);var logr1=utils.log10(xRange[1]);pct=(utils.log10(x)-logr0)/(logr1-logr0)}else{pct=(x-xRange[0])/(xRange[1]-xRange[0])}return pct};Dygraph.prototype.numColumns=function(){if(!this.rawData_)return 0;return this.rawData_[0]?this.rawData_[0].length:this.attr_("labels").length};Dygraph.prototype.numRows=function(){if(!this.rawData_)return 0;return this.rawData_.length};Dygraph.prototype.getValue=function(row,col){if(row<0||row>this.rawData_.length)return null;if(col<0||col>this.rawData_[row].length)return null;return this.rawData_[row][col]};Dygraph.prototype.createInterface_=function(){var enclosing=this.maindiv_;this.graphDiv=document.createElement("div");this.graphDiv.style.textAlign="left";this.graphDiv.style.position="relative";enclosing.appendChild(this.graphDiv);this.canvas_=utils.createCanvas();this.canvas_.style.position="absolute";this.hidden_=this.createPlotKitCanvas_(this.canvas_);this.canvas_ctx_=utils.getContext(this.canvas_);this.hidden_ctx_=utils.getContext(this.hidden_);this.resizeElements_();this.graphDiv.appendChild(this.hidden_);this.graphDiv.appendChild(this.canvas_);this.mouseEventElement_=this.createMouseEventElement_();this.layout_=new _dygraphLayout2["default"](this);var dygraph=this;this.mouseMoveHandler_=function(e){dygraph.mouseMove_(e)};this.mouseOutHandler_=function(e){var target=e.target||e.fromElement;var relatedTarget=e.relatedTarget||e.toElement;if(utils.isNodeContainedBy(target,dygraph.graphDiv)&&!utils.isNodeContainedBy(relatedTarget,dygraph.graphDiv)){dygraph.mouseOut_(e)}};this.addAndTrackEvent(window,"mouseout",this.mouseOutHandler_);this.addAndTrackEvent(this.mouseEventElement_,"mousemove",this.mouseMoveHandler_);if(!this.resizeHandler_){this.resizeHandler_=function(e){dygraph.resize()};this.addAndTrackEvent(window,"resize",this.resizeHandler_)}};Dygraph.prototype.resizeElements_=function(){this.graphDiv.style.width=this.width_+"px";this.graphDiv.style.height=this.height_+"px";var pixelRatioOption=this.getNumericOption("pixelRatio");var canvasScale=pixelRatioOption||utils.getContextPixelRatio(this.canvas_ctx_);this.canvas_.width=this.width_*canvasScale;this.canvas_.height=this.height_*canvasScale;this.canvas_.style.width=this.width_+"px";this.canvas_.style.height=this.height_+"px";if(canvasScale!==1){this.canvas_ctx_.scale(canvasScale,canvasScale)}var hiddenScale=pixelRatioOption||utils.getContextPixelRatio(this.hidden_ctx_);this.hidden_.width=this.width_*hiddenScale;this.hidden_.height=this.height_*hiddenScale;this.hidden_.style.width=this.width_+"px";this.hidden_.style.height=this.height_+"px";if(hiddenScale!==1){this.hidden_ctx_.scale(hiddenScale,hiddenScale)}};Dygraph.prototype.destroy=function(){this.canvas_ctx_.restore();this.hidden_ctx_.restore();for(var i=this.plugins_.length-1;i>=0;i--){var p=this.plugins_.pop();if(p.plugin.destroy)p.plugin.destroy()}var removeRecursive=function removeRecursive(node){while(node.hasChildNodes()){removeRecursive(node.firstChild);node.removeChild(node.firstChild)}};this.removeTrackedEvents_();utils.removeEvent(window,"mouseout",this.mouseOutHandler_);utils.removeEvent(this.mouseEventElement_,"mousemove",this.mouseMoveHandler_);utils.removeEvent(window,"resize",this.resizeHandler_);this.resizeHandler_=null;removeRecursive(this.maindiv_);var nullOut=function nullOut(obj){for(var n in obj){if(typeof obj[n]==="object"){obj[n]=null}}};nullOut(this.layout_);nullOut(this.plotter_);nullOut(this)};Dygraph.prototype.createPlotKitCanvas_=function(canvas){var h=utils.createCanvas();h.style.position="absolute";h.style.top=canvas.style.top;h.style.left=canvas.style.left;h.width=this.width_;h.height=this.height_;h.style.width=this.width_+"px";h.style.height=this.height_+"px";return h};Dygraph.prototype.createMouseEventElement_=function(){return this.canvas_};Dygraph.prototype.setColors_=function(){var labels=this.getLabels();var num=labels.length-1;this.colors_=[];this.colorsMap_={};var sat=this.getNumericOption("colorSaturation")||1;var val=this.getNumericOption("colorValue")||.5;var half=Math.ceil(num/2);var colors=this.getOption("colors");var visibility=this.visibility();for(var i=0;i<num;i++){if(!visibility[i]){continue}var label=labels[i+1];var colorStr=this.attributes_.getForSeries("color",label);if(!colorStr){if(colors){colorStr=colors[i%colors.length]}else{var idx=i%2?half+(i+1)/2:Math.ceil((i+1)/2);var hue=1*idx/(1+num);colorStr=utils.hsvToRGB(hue,sat,val)}}this.colors_.push(colorStr);this.colorsMap_[label]=colorStr}};Dygraph.prototype.getColors=function(){return this.colors_};Dygraph.prototype.getPropertiesForSeries=function(series_name){var idx=-1;var labels=this.getLabels();for(var i=1;i<labels.length;i++){if(labels[i]==series_name){idx=i;break}}if(idx==-1)return null;return{name:series_name,column:idx,visible:this.visibility()[idx-1],color:this.colorsMap_[series_name],axis:1+this.attributes_.axisForSeries(series_name)}};Dygraph.prototype.createRollInterface_=function(){var _this=this;var roller=this.roller_;if(!roller){this.roller_=roller=document.createElement("input");roller.type="text";roller.style.display="none";roller.className="dygraph-roller";this.graphDiv.appendChild(roller)}var display=this.getBooleanOption("showRoller")?"block":"none";var area=this.getArea();var textAttr={top:area.y+area.h-25+"px",left:area.x+1+"px",display:display};roller.size="2";roller.value=this.rollPeriod_;utils.update(roller.style,textAttr);roller.onchange=function(){return _this.adjustRoll(roller.value)}};Dygraph.prototype.createDragInterface_=function(){var context={isZooming:false,isPanning:false,is2DPan:false,dragStartX:null,dragStartY:null,dragEndX:null,dragEndY:null,dragDirection:null,prevEndX:null,prevEndY:null,prevDragDirection:null,cancelNextDblclick:false,initialLeftmostDate:null,xUnitsPerPixel:null,dateRange:null,px:0,py:0,boundedDates:null,boundedValues:null,tarp:new _iframeTarp2["default"],initializeMouseDown:function initializeMouseDown(event,g,contextB){if(event.preventDefault){event.preventDefault()}else{event.returnValue=false;event.cancelBubble=true}var canvasPos=utils.findPos(g.canvas_);contextB.px=canvasPos.x;contextB.py=canvasPos.y;contextB.dragStartX=utils.dragGetX_(event,contextB);contextB.dragStartY=utils.dragGetY_(event,contextB);contextB.cancelNextDblclick=false;contextB.tarp.cover()},destroy:function destroy(){var context=this;if(context.isZooming||context.isPanning){context.isZooming=false;context.dragStartX=null;context.dragStartY=null}if(context.isPanning){context.isPanning=false;context.draggingDate=null;context.dateRange=null;for(var i=0;i<self.axes_.length;i++){delete self.axes_[i].draggingValue;delete self.axes_[i].dragValueRange}}context.tarp.uncover()}};var interactionModel=this.getOption("interactionModel");var self=this;var bindHandler=function bindHandler(handler){return function(event){handler(event,self,context)}};for(var eventName in interactionModel){if(!interactionModel.hasOwnProperty(eventName))continue;this.addAndTrackEvent(this.mouseEventElement_,eventName,bindHandler(interactionModel[eventName]))}if(!interactionModel.willDestroyContextMyself){var mouseUpHandler=function mouseUpHandler(event){context.destroy()};this.addAndTrackEvent(document,"mouseup",mouseUpHandler)}};Dygraph.prototype.drawZoomRect_=function(direction,startX,endX,startY,endY,prevDirection,prevEndX,prevEndY){var ctx=this.canvas_ctx_;if(prevDirection==utils.HORIZONTAL){ctx.clearRect(Math.min(startX,prevEndX),this.layout_.getPlotArea().y,Math.abs(startX-prevEndX),this.layout_.getPlotArea().h)}else if(prevDirection==utils.VERTICAL){ctx.clearRect(this.layout_.getPlotArea().x,Math.min(startY,prevEndY),this.layout_.getPlotArea().w,Math.abs(startY-prevEndY))}if(direction==utils.HORIZONTAL){if(endX&&startX){ctx.fillStyle="rgba(128,128,128,0.33)";ctx.fillRect(Math.min(startX,endX),this.layout_.getPlotArea().y,Math.abs(endX-startX),this.layout_.getPlotArea().h)}}else if(direction==utils.VERTICAL){if(endY&&startY){ctx.fillStyle="rgba(128,128,128,0.33)";ctx.fillRect(this.layout_.getPlotArea().x,Math.min(startY,endY),this.layout_.getPlotArea().w,Math.abs(endY-startY))}}};Dygraph.prototype.clearZoomRect_=function(){this.currentZoomRectArgs_=null;this.canvas_ctx_.clearRect(0,0,this.width_,this.height_)};Dygraph.prototype.doZoomX_=function(lowX,highX){this.currentZoomRectArgs_=null;var minDate=this.toDataXCoord(lowX);var maxDate=this.toDataXCoord(highX);this.doZoomXDates_(minDate,maxDate)};Dygraph.prototype.doZoomXDates_=function(minDate,maxDate){var _this2=this;var old_window=this.xAxisRange();var new_window=[minDate,maxDate];var zoomCallback=this.getFunctionOption("zoomCallback");this.doAnimatedZoom(old_window,new_window,null,null,function(){if(zoomCallback){zoomCallback.call(_this2,minDate,maxDate,_this2.yAxisRanges())}})};Dygraph.prototype.doZoomY_=function(lowY,highY){var _this3=this;this.currentZoomRectArgs_=null;var oldValueRanges=this.yAxisRanges();var newValueRanges=[];for(var i=0;i<this.axes_.length;i++){var hi=this.toDataYCoord(lowY,i);var low=this.toDataYCoord(highY,i);newValueRanges.push([low,hi])}var zoomCallback=this.getFunctionOption("zoomCallback");this.doAnimatedZoom(null,null,oldValueRanges,newValueRanges,function(){if(zoomCallback){var _xAxisRange=_this3.xAxisRange();var _xAxisRange2=_slicedToArray(_xAxisRange,2);var minX=_xAxisRange2[0];var maxX=_xAxisRange2[1];zoomCallback.call(_this3,minX,maxX,_this3.yAxisRanges())}})};Dygraph.zoomAnimationFunction=function(frame,numFrames){var k=1.5;return(1-Math.pow(k,-frame))/(1-Math.pow(k,-numFrames))};Dygraph.prototype.resetZoom=function(){var _this4=this;var dirtyX=this.isZoomed("x");var dirtyY=this.isZoomed("y");var dirty=dirtyX||dirtyY;this.clearSelection();if(!dirty)return;var _xAxisExtremes=this.xAxisExtremes();var _xAxisExtremes2=_slicedToArray(_xAxisExtremes,2);var minDate=_xAxisExtremes2[0];var maxDate=_xAxisExtremes2[1];var animatedZooms=this.getBooleanOption("animatedZooms");var zoomCallback=this.getFunctionOption("zoomCallback");if(!animatedZooms){this.dateWindow_=null;this.axes_.forEach(function(axis){if(axis.valueRange)delete axis.valueRange});this.drawGraph_();if(zoomCallback){zoomCallback.call(this,minDate,maxDate,this.yAxisRanges())}return}var oldWindow=null,newWindow=null,oldValueRanges=null,newValueRanges=null;if(dirtyX){oldWindow=this.xAxisRange();newWindow=[minDate,maxDate]}if(dirtyY){oldValueRanges=this.yAxisRanges();newValueRanges=this.yAxisExtremes()}this.doAnimatedZoom(oldWindow,newWindow,oldValueRanges,newValueRanges,function(){_this4.dateWindow_=null;_this4.axes_.forEach(function(axis){if(axis.valueRange)delete axis.valueRange});if(zoomCallback){zoomCallback.call(_this4,minDate,maxDate,_this4.yAxisRanges())}})};Dygraph.prototype.doAnimatedZoom=function(oldXRange,newXRange,oldYRanges,newYRanges,callback){var _this5=this;var steps=this.getBooleanOption("animatedZooms")?Dygraph.ANIMATION_STEPS:1;var windows=[];var valueRanges=[];var step,frac;if(oldXRange!==null&&newXRange!==null){for(step=1;step<=steps;step++){frac=Dygraph.zoomAnimationFunction(step,steps);windows[step-1]=[oldXRange[0]*(1-frac)+frac*newXRange[0],oldXRange[1]*(1-frac)+frac*newXRange[1]]}}if(oldYRanges!==null&&newYRanges!==null){for(step=1;step<=steps;step++){frac=Dygraph.zoomAnimationFunction(step,steps);var thisRange=[];for(var j=0;j<this.axes_.length;j++){thisRange.push([oldYRanges[j][0]*(1-frac)+frac*newYRanges[j][0],oldYRanges[j][1]*(1-frac)+frac*newYRanges[j][1]])}valueRanges[step-1]=thisRange}}utils.repeatAndCleanup(function(step){if(valueRanges.length){for(var i=0;i<_this5.axes_.length;i++){var w=valueRanges[step][i];_this5.axes_[i].valueRange=[w[0],w[1]]}}if(windows.length){_this5.dateWindow_=windows[step]}_this5.drawGraph_()},steps,Dygraph.ANIMATION_DURATION/steps,callback)};Dygraph.prototype.getArea=function(){return this.plotter_.area};Dygraph.prototype.eventToDomCoords=function(event){if(event.offsetX&&event.offsetY){return[event.offsetX,event.offsetY]}else{var eventElementPos=utils.findPos(this.mouseEventElement_);var canvasx=utils.pageX(event)-eventElementPos.x;var canvasy=utils.pageY(event)-eventElementPos.y;return[canvasx,canvasy]}};Dygraph.prototype.findClosestRow=function(domX){var minDistX=Infinity;var closestRow=-1;var sets=this.layout_.points;for(var i=0;i<sets.length;i++){var points=sets[i];var len=points.length;for(var j=0;j<len;j++){var point=points[j];if(!utils.isValidPoint(point,true))continue;var dist=Math.abs(point.canvasx-domX);if(dist<minDistX){minDistX=dist;closestRow=point.idx}}}return closestRow};Dygraph.prototype.findClosestPoint=function(domX,domY){var minDist=Infinity;var dist,dx,dy,point,closestPoint,closestSeries,closestRow;for(var setIdx=this.layout_.points.length-1;setIdx>=0;--setIdx){var points=this.layout_.points[setIdx];for(var i=0;i<points.length;++i){point=points[i];if(!utils.isValidPoint(point))continue;dx=point.canvasx-domX;dy=point.canvasy-domY;dist=dx*dx+dy*dy;if(dist<minDist){minDist=dist;closestPoint=point;closestSeries=setIdx;closestRow=point.idx}}}var name=this.layout_.setNames[closestSeries];return{row:closestRow,seriesName:name,point:closestPoint}};Dygraph.prototype.findStackedPoint=function(domX,domY){var row=this.findClosestRow(domX);var closestPoint,closestSeries;for(var setIdx=0;setIdx<this.layout_.points.length;++setIdx){var boundary=this.getLeftBoundary_(setIdx);var rowIdx=row-boundary;var points=this.layout_.points[setIdx];if(rowIdx>=points.length)continue;var p1=points[rowIdx];if(!utils.isValidPoint(p1))continue;var py=p1.canvasy;if(domX>p1.canvasx&&rowIdx+1<points.length){var p2=points[rowIdx+1];if(utils.isValidPoint(p2)){var dx=p2.canvasx-p1.canvasx;if(dx>0){var r=(domX-p1.canvasx)/dx;py+=r*(p2.canvasy-p1.canvasy)}}}else if(domX<p1.canvasx&&rowIdx>0){var p0=points[rowIdx-1];if(utils.isValidPoint(p0)){var dx=p1.canvasx-p0.canvasx;if(dx>0){var r=(p1.canvasx-domX)/dx;py+=r*(p0.canvasy-p1.canvasy)}}}if(setIdx===0||py<domY){closestPoint=p1;closestSeries=setIdx}}var name=this.layout_.setNames[closestSeries];return{row:row,seriesName:name,point:closestPoint}};Dygraph.prototype.mouseMove_=function(event){var points=this.layout_.points;if(points===undefined||points===null)return;var canvasCoords=this.eventToDomCoords(event);var canvasx=canvasCoords[0];var canvasy=canvasCoords[1];var highlightSeriesOpts=this.getOption("highlightSeriesOpts");var selectionChanged=false;if(highlightSeriesOpts&&!this.isSeriesLocked()){var closest;if(this.getBooleanOption("stackedGraph")){closest=this.findStackedPoint(canvasx,canvasy)}else{closest=this.findClosestPoint(canvasx,canvasy)}selectionChanged=this.setSelection(closest.row,closest.seriesName)}else{var idx=this.findClosestRow(canvasx);selectionChanged=this.setSelection(idx)}var callback=this.getFunctionOption("highlightCallback");if(callback&&selectionChanged){callback.call(this,event,this.lastx_,this.selPoints_,this.lastRow_,this.highlightSet_)}};Dygraph.prototype.getLeftBoundary_=function(setIdx){if(this.boundaryIds_[setIdx]){return this.boundaryIds_[setIdx][0]}else{for(var i=0;i<this.boundaryIds_.length;i++){if(this.boundaryIds_[i]!==undefined){return this.boundaryIds_[i][0]}}return 0}};Dygraph.prototype.animateSelection_=function(direction){var totalSteps=10;var millis=30;if(this.fadeLevel===undefined)this.fadeLevel=0;if(this.animateId===undefined)this.animateId=0;var start=this.fadeLevel;var steps=direction<0?start:totalSteps-start;if(steps<=0){if(this.fadeLevel){this.updateSelection_(1)}return}var thisId=++this.animateId;var that=this;var cleanupIfClearing=function cleanupIfClearing(){if(that.fadeLevel!==0&&direction<0){that.fadeLevel=0;that.clearSelection()}};utils.repeatAndCleanup(function(n){if(that.animateId!=thisId)return;that.fadeLevel+=direction;if(that.fadeLevel===0){that.clearSelection()}else{that.updateSelection_(that.fadeLevel/totalSteps)}},steps,millis,cleanupIfClearing)};Dygraph.prototype.updateSelection_=function(opt_animFraction){this.cascadeEvents_("select",{selectedRow:this.lastRow_===-1?undefined:this.lastRow_,selectedX:this.lastx_===-1?undefined:this.lastx_,selectedPoints:this.selPoints_});var i;var ctx=this.canvas_ctx_;if(this.getOption("highlightSeriesOpts")){ctx.clearRect(0,0,this.width_,this.height_);var alpha=1-this.getNumericOption("highlightSeriesBackgroundAlpha");var backgroundColor=utils.toRGB_(this.getOption("highlightSeriesBackgroundColor"));if(alpha){var animateBackgroundFade=true;if(animateBackgroundFade){if(opt_animFraction===undefined){this.animateSelection_(1);return}alpha*=opt_animFraction}ctx.fillStyle="rgba("+backgroundColor.r+","+backgroundColor.g+","+backgroundColor.b+","+alpha+")";ctx.fillRect(0,0,this.width_,this.height_)}this.plotter_._renderLineChart(this.highlightSet_,ctx)}else if(this.previousVerticalX_>=0){var maxCircleSize=0;var labels=this.attr_("labels");for(i=1;i<labels.length;i++){var r=this.getNumericOption("highlightCircleSize",labels[i]);if(r>maxCircleSize)maxCircleSize=r}var px=this.previousVerticalX_;ctx.clearRect(px-maxCircleSize-1,0,2*maxCircleSize+2,this.height_)}if(this.selPoints_.length>0){var canvasx=this.selPoints_[0].canvasx;ctx.save();for(i=0;i<this.selPoints_.length;i++){var pt=this.selPoints_[i];if(isNaN(pt.canvasy))continue;var circleSize=this.getNumericOption("highlightCircleSize",pt.name);var callback=this.getFunctionOption("drawHighlightPointCallback",pt.name);var color=this.plotter_.colors[pt.name];if(!callback){callback=utils.Circles.DEFAULT}ctx.lineWidth=this.getNumericOption("strokeWidth",pt.name);ctx.strokeStyle=color;ctx.fillStyle=color;callback.call(this,this,pt.name,ctx,canvasx,pt.canvasy,color,circleSize,pt.idx)}ctx.restore();this.previousVerticalX_=canvasx}};Dygraph.prototype.setSelection=function(row,opt_seriesName,opt_locked){this.selPoints_=[];var changed=false;if(row!==false&&row>=0){if(row!=this.lastRow_)changed=true;this.lastRow_=row;for(var setIdx=0;setIdx<this.layout_.points.length;++setIdx){var points=this.layout_.points[setIdx];var setRow=row-this.getLeftBoundary_(setIdx);if(setRow>=0&&setRow<points.length&&points[setRow].idx==row){var point=points[setRow];if(point.yval!==null)this.selPoints_.push(point)}else{for(var pointIdx=0;pointIdx<points.length;++pointIdx){var point=points[pointIdx];if(point.idx==row){if(point.yval!==null){this.selPoints_.push(point)}break}}}}}else{if(this.lastRow_>=0)changed=true;this.lastRow_=-1}if(this.selPoints_.length){this.lastx_=this.selPoints_[0].xval}else{this.lastx_=-1}if(opt_seriesName!==undefined){if(this.highlightSet_!==opt_seriesName)changed=true;this.highlightSet_=opt_seriesName}if(opt_locked!==undefined){this.lockedSet_=opt_locked}if(changed){this.updateSelection_(undefined)}return changed};Dygraph.prototype.mouseOut_=function(event){if(this.getFunctionOption("unhighlightCallback")){this.getFunctionOption("unhighlightCallback").call(this,event)}if(this.getBooleanOption("hideOverlayOnMouseOut")&&!this.lockedSet_){this.clearSelection()}};Dygraph.prototype.clearSelection=function(){this.cascadeEvents_("deselect",{});this.lockedSet_=false;if(this.fadeLevel){this.animateSelection_(-1);return}this.canvas_ctx_.clearRect(0,0,this.width_,this.height_);this.fadeLevel=0;this.selPoints_=[];this.lastx_=-1;this.lastRow_=-1;this.highlightSet_=null};Dygraph.prototype.getSelection=function(){if(!this.selPoints_||this.selPoints_.length<1){return-1}for(var setIdx=0;setIdx<this.layout_.points.length;setIdx++){var points=this.layout_.points[setIdx];for(var row=0;row<points.length;row++){if(points[row].x==this.selPoints_[0].x){return points[row].idx}}}return-1};Dygraph.prototype.getHighlightSeries=function(){return this.highlightSet_};Dygraph.prototype.isSeriesLocked=function(){return this.lockedSet_};Dygraph.prototype.loadedEvent_=function(data){this.rawData_=this.parseCSV_(data);this.cascadeDataDidUpdateEvent_();this.predraw_()};Dygraph.prototype.addXTicks_=function(){var range;if(this.dateWindow_){range=[this.dateWindow_[0],this.dateWindow_[1]]}else{range=this.xAxisExtremes()}var xAxisOptionsView=this.optionsViewForAxis_("x");var xTicks=xAxisOptionsView("ticker")(range[0],range[1],this.plotter_.area.w,xAxisOptionsView,this);this.layout_.setXTicks(xTicks)};Dygraph.prototype.getHandlerClass_=function(){var handlerClass;if(this.attr_("dataHandler")){handlerClass=this.attr_("dataHandler")}else if(this.fractions_){if(this.getBooleanOption("errorBars")){handlerClass=_datahandlerBarsFractions2["default"]}else{handlerClass=_datahandlerDefaultFractions2["default"]}}else if(this.getBooleanOption("customBars")){handlerClass=_datahandlerBarsCustom2["default"]}else if(this.getBooleanOption("errorBars")){handlerClass=_datahandlerBarsError2["default"]}else{handlerClass=_datahandlerDefault2["default"]}return handlerClass};Dygraph.prototype.predraw_=function(){var start=new Date;this.dataHandler_=new(this.getHandlerClass_());this.layout_.computePlotArea();this.computeYAxes_();if(!this.is_initial_draw_){this.canvas_ctx_.restore();this.hidden_ctx_.restore()}this.canvas_ctx_.save();this.hidden_ctx_.save();this.plotter_=new _dygraphCanvas2["default"](this,this.hidden_,this.hidden_ctx_,this.layout_);this.createRollInterface_();this.cascadeEvents_("predraw");this.rolledSeries_=[null];for(var i=1;i<this.numColumns();i++){var series=this.dataHandler_.extractSeries(this.rawData_,i,this.attributes_);if(this.rollPeriod_>1){series=this.dataHandler_.rollingAverage(series,this.rollPeriod_,this.attributes_)}this.rolledSeries_.push(series)}this.drawGraph_();var end=new Date;this.drawingTimeMs_=end-start};Dygraph.PointType=undefined;Dygraph.stackPoints_=function(points,cumulativeYval,seriesExtremes,fillMethod){var lastXval=null;var prevPoint=null;var nextPoint=null;var nextPointIdx=-1;var updateNextPoint=function updateNextPoint(idx){if(nextPointIdx>=idx)return;for(var j=idx;j<points.length;++j){nextPoint=null;if(!isNaN(points[j].yval)&&points[j].yval!==null){nextPointIdx=j;nextPoint=points[j];break}}};for(var i=0;i<points.length;++i){var point=points[i];var xval=point.xval;if(cumulativeYval[xval]===undefined){cumulativeYval[xval]=0}var actualYval=point.yval;if(isNaN(actualYval)||actualYval===null){if(fillMethod=="none"){actualYval=0}else{updateNextPoint(i);if(prevPoint&&nextPoint&&fillMethod!="none"){actualYval=prevPoint.yval+(nextPoint.yval-prevPoint.yval)*((xval-prevPoint.xval)/(nextPoint.xval-prevPoint.xval))}else if(prevPoint&&fillMethod=="all"){actualYval=prevPoint.yval}else if(nextPoint&&fillMethod=="all"){actualYval=nextPoint.yval}else{actualYval=0}}}else{prevPoint=point}var stackedYval=cumulativeYval[xval];if(lastXval!=xval){stackedYval+=actualYval;cumulativeYval[xval]=stackedYval}lastXval=xval;point.yval_stacked=stackedYval;if(stackedYval>seriesExtremes[1]){seriesExtremes[1]=stackedYval}if(stackedYval<seriesExtremes[0]){seriesExtremes[0]=stackedYval}}};Dygraph.prototype.gatherDatasets_=function(rolledSeries,dateWindow){var boundaryIds=[];var points=[];var cumulativeYval=[];var extremes={};var seriesIdx,sampleIdx;var firstIdx,lastIdx;var axisIdx;var num_series=rolledSeries.length-1;var series;for(seriesIdx=num_series;seriesIdx>=1;seriesIdx--){if(!this.visibility()[seriesIdx-1])continue;if(dateWindow){series=rolledSeries[seriesIdx];var low=dateWindow[0];var high=dateWindow[1];firstIdx=null;lastIdx=null;for(sampleIdx=0;sampleIdx<series.length;sampleIdx++){if(series[sampleIdx][0]>=low&&firstIdx===null){firstIdx=sampleIdx}if(series[sampleIdx][0]<=high){lastIdx=sampleIdx}}if(firstIdx===null)firstIdx=0;var correctedFirstIdx=firstIdx;var isInvalidValue=true;while(isInvalidValue&&correctedFirstIdx>0){correctedFirstIdx--;isInvalidValue=series[correctedFirstIdx][1]===null}if(lastIdx===null)lastIdx=series.length-1;var correctedLastIdx=lastIdx;isInvalidValue=true;while(isInvalidValue&&correctedLastIdx<series.length-1){correctedLastIdx++;isInvalidValue=series[correctedLastIdx][1]===null}if(correctedFirstIdx!==firstIdx){firstIdx=correctedFirstIdx}if(correctedLastIdx!==lastIdx){lastIdx=correctedLastIdx}boundaryIds[seriesIdx-1]=[firstIdx,lastIdx];series=series.slice(firstIdx,lastIdx+1)}else{series=rolledSeries[seriesIdx];boundaryIds[seriesIdx-1]=[0,series.length-1]}var seriesName=this.attr_("labels")[seriesIdx];var seriesExtremes=this.dataHandler_.getExtremeYValues(series,dateWindow,this.getBooleanOption("stepPlot",seriesName));var seriesPoints=this.dataHandler_.seriesToPoints(series,seriesName,boundaryIds[seriesIdx-1][0]);if(this.getBooleanOption("stackedGraph")){axisIdx=this.attributes_.axisForSeries(seriesName);if(cumulativeYval[axisIdx]===undefined){cumulativeYval[axisIdx]=[]}Dygraph.stackPoints_(seriesPoints,cumulativeYval[axisIdx],seriesExtremes,this.getBooleanOption("stackedGraphNaNFill"))}extremes[seriesName]=seriesExtremes;points[seriesIdx]=seriesPoints}return{points:points,extremes:extremes,boundaryIds:boundaryIds}};Dygraph.prototype.drawGraph_=function(){var start=new Date;var is_initial_draw=this.is_initial_draw_;this.is_initial_draw_=false;this.layout_.removeAllDatasets();this.setColors_();this.attrs_.pointSize=.5*this.getNumericOption("highlightCircleSize");var packed=this.gatherDatasets_(this.rolledSeries_,this.dateWindow_);var points=packed.points;var extremes=packed.extremes;this.boundaryIds_=packed.boundaryIds;this.setIndexByName_={};var labels=this.attr_("labels");var dataIdx=0;for(var i=1;i<points.length;i++){if(!this.visibility()[i-1])continue;this.layout_.addDataset(labels[i],points[i]);this.datasetIndex_[i]=dataIdx++}for(var i=0;i<labels.length;i++){this.setIndexByName_[labels[i]]=i}this.computeYAxisRanges_(extremes);this.layout_.setYAxes(this.axes_);this.addXTicks_();this.layout_.evaluate();this.renderGraph_(is_initial_draw);if(this.getStringOption("timingName")){var end=new Date;console.log(this.getStringOption("timingName")+" - drawGraph: "+(end-start)+"ms")}};Dygraph.prototype.renderGraph_=function(is_initial_draw){this.cascadeEvents_("clearChart");this.plotter_.clear();var underlayCallback=this.getFunctionOption("underlayCallback");if(underlayCallback){underlayCallback.call(this,this.hidden_ctx_,this.layout_.getPlotArea(),this,this)}var e={canvas:this.hidden_,drawingContext:this.hidden_ctx_};this.cascadeEvents_("willDrawChart",e);this.plotter_.render();this.cascadeEvents_("didDrawChart",e);this.lastRow_=-1;this.canvas_.getContext("2d").clearRect(0,0,this.width_,this.height_);var drawCallback=this.getFunctionOption("drawCallback");if(drawCallback!==null){drawCallback.call(this,this,is_initial_draw)}if(is_initial_draw){this.readyFired_=true;while(this.readyFns_.length>0){var fn=this.readyFns_.pop();fn(this)}}};Dygraph.prototype.computeYAxes_=function(){var axis,index,opts,v;this.axes_=[];for(axis=0;axis<this.attributes_.numAxes();axis++){opts={g:this};utils.update(opts,this.attributes_.axisOptions(axis));this.axes_[axis]=opts}for(axis=0;axis<this.axes_.length;axis++){if(axis===0){opts=this.optionsViewForAxis_("y"+(axis?"2":""));v=opts("valueRange");if(v)this.axes_[axis].valueRange=v}else{var axes=this.user_attrs_.axes;if(axes&&axes.y2){v=axes.y2.valueRange;if(v)this.axes_[axis].valueRange=v}}}};Dygraph.prototype.numAxes=function(){return this.attributes_.numAxes()};Dygraph.prototype.axisPropertiesForSeries=function(series){return this.axes_[this.attributes_.axisForSeries(series)]};Dygraph.prototype.computeYAxisRanges_=function(extremes){var isNullUndefinedOrNaN=function isNullUndefinedOrNaN(num){return isNaN(parseFloat(num))};var numAxes=this.attributes_.numAxes();var ypadCompat,span,series,ypad;var p_axis;for(var i=0;i<numAxes;i++){var axis=this.axes_[i];var logscale=this.attributes_.getForAxis("logscale",i);var includeZero=this.attributes_.getForAxis("includeZero",i);var independentTicks=this.attributes_.getForAxis("independentTicks",i);series=this.attributes_.seriesForAxis(i);ypadCompat=true;ypad=.1;var yRangePad=this.getNumericOption("yRangePad");if(yRangePad!==null){ypadCompat=false;ypad=yRangePad/this.plotter_.area.h}if(series.length===0){axis.extremeRange=[0,1]}else{var minY=Infinity;var maxY=-Infinity;var extremeMinY,extremeMaxY;for(var j=0;j<series.length;j++){if(!extremes.hasOwnProperty(series[j]))continue;extremeMinY=extremes[series[j]][0];if(extremeMinY!==null){minY=Math.min(extremeMinY,minY)}extremeMaxY=extremes[series[j]][1];if(extremeMaxY!==null){maxY=Math.max(extremeMaxY,maxY)}}if(includeZero&&!logscale){if(minY>0)minY=0;if(maxY<0)maxY=0}if(minY==Infinity)minY=0;if(maxY==-Infinity)maxY=1;span=maxY-minY;if(span===0){if(maxY!==0){span=Math.abs(maxY)}else{maxY=1;span=1}}var maxAxisY=maxY,minAxisY=minY;if(ypadCompat){if(logscale){maxAxisY=maxY+ypad*span;minAxisY=minY}else{maxAxisY=maxY+ypad*span;minAxisY=minY-ypad*span;if(minAxisY<0&&minY>=0)minAxisY=0;if(maxAxisY>0&&maxY<=0)maxAxisY=0}}axis.extremeRange=[minAxisY,maxAxisY]}if(axis.valueRange){var y0=isNullUndefinedOrNaN(axis.valueRange[0])?axis.extremeRange[0]:axis.valueRange[0];var y1=isNullUndefinedOrNaN(axis.valueRange[1])?axis.extremeRange[1]:axis.valueRange[1];axis.computedValueRange=[y0,y1]}else{axis.computedValueRange=axis.extremeRange}if(!ypadCompat){if(logscale){y0=axis.computedValueRange[0];y1=axis.computedValueRange[1];var y0pct=ypad/(2*ypad-1);var y1pct=(ypad-1)/(2*ypad-1);axis.computedValueRange[0]=utils.logRangeFraction(y0,y1,y0pct);axis.computedValueRange[1]=utils.logRangeFraction(y0,y1,y1pct)}else{y0=axis.computedValueRange[0];y1=axis.computedValueRange[1];span=y1-y0;axis.computedValueRange[0]=y0-span*ypad;axis.computedValueRange[1]=y1+span*ypad}}if(independentTicks){axis.independentTicks=independentTicks;var opts=this.optionsViewForAxis_("y"+(i?"2":""));var ticker=opts("ticker");axis.ticks=ticker(axis.computedValueRange[0],axis.computedValueRange[1],this.plotter_.area.h,opts,this);if(!p_axis)p_axis=axis}}if(p_axis===undefined){throw'Configuration Error: At least one axis has to have the "independentTicks" option activated.'}for(var i=0;i<numAxes;i++){var axis=this.axes_[i];if(!axis.independentTicks){var opts=this.optionsViewForAxis_("y"+(i?"2":""));var ticker=opts("ticker");var p_ticks=p_axis.ticks;var p_scale=p_axis.computedValueRange[1]-p_axis.computedValueRange[0];var scale=axis.computedValueRange[1]-axis.computedValueRange[0];var tick_values=[];for(var k=0;k<p_ticks.length;k++){var y_frac=(p_ticks[k].v-p_axis.computedValueRange[0])/p_scale;var y_val=axis.computedValueRange[0]+y_frac*scale;tick_values.push(y_val)}axis.ticks=ticker(axis.computedValueRange[0],axis.computedValueRange[1],this.plotter_.area.h,opts,this,tick_values)}}};Dygraph.prototype.detectTypeFromString_=function(str){var isDate=false;var dashPos=str.indexOf("-");if(dashPos>0&&str[dashPos-1]!="e"&&str[dashPos-1]!="E"||str.indexOf("/")>=0||isNaN(parseFloat(str))){isDate=true}else if(str.length==8&&str>"19700101"&&str<"20371231"){isDate=true}this.setXAxisOptions_(isDate)};Dygraph.prototype.setXAxisOptions_=function(isDate){if(isDate){this.attrs_.xValueParser=utils.dateParser;this.attrs_.axes.x.valueFormatter=utils.dateValueFormatter;this.attrs_.axes.x.ticker=DygraphTickers.dateTicker;this.attrs_.axes.x.axisLabelFormatter=utils.dateAxisLabelFormatter}else{this.attrs_.xValueParser=function(x){return parseFloat(x)};this.attrs_.axes.x.valueFormatter=function(x){return x};this.attrs_.axes.x.ticker=DygraphTickers.numericTicks;this.attrs_.axes.x.axisLabelFormatter=this.attrs_.axes.x.valueFormatter}};Dygraph.prototype.parseCSV_=function(data){var ret=[];var line_delimiter=utils.detectLineDelimiter(data);var lines=data.split(line_delimiter||"\n");var vals,j;var delim=this.getStringOption("delimiter");if(lines[0].indexOf(delim)==-1&&lines[0].indexOf("\t")>=0){delim="\t"}var start=0;if(!("labels"in this.user_attrs_)){start=1;this.attrs_.labels=lines[0].split(delim);this.attributes_.reparseSeries()}var line_no=0;var xParser;var defaultParserSet=false;var expectedCols=this.attr_("labels").length;var outOfOrder=false;for(var i=start;i<lines.length;i++){var line=lines[i];line_no=i;if(line.length===0)continue;if(line[0]=="#")continue;var inFields=line.split(delim);if(inFields.length<2)continue;var fields=[];if(!defaultParserSet){this.detectTypeFromString_(inFields[0]);xParser=this.getFunctionOption("xValueParser");defaultParserSet=true}fields[0]=xParser(inFields[0],this);if(this.fractions_){for(j=1;j<inFields.length;j++){vals=inFields[j].split("/");if(vals.length!=2){console.error('Expected fractional "num/den" values in CSV data '+"but found a value '"+inFields[j]+"' on line "+(1+i)+" ('"+line+"') which is not of this form.");fields[j]=[0,0]}else{fields[j]=[utils.parseFloat_(vals[0],i,line),utils.parseFloat_(vals[1],i,line)]}}}else if(this.getBooleanOption("errorBars")){if(inFields.length%2!=1){console.error("Expected alternating (value, stdev.) pairs in CSV data "+"but line "+(1+i)+" has an odd number of values ("+(inFields.length-1)+"): '"+line+"'")}for(j=1;j<inFields.length;j+=2){fields[(j+1)/2]=[utils.parseFloat_(inFields[j],i,line),utils.parseFloat_(inFields[j+1],i,line)]}}else if(this.getBooleanOption("customBars")){for(j=1;j<inFields.length;j++){var val=inFields[j];if(/^ *$/.test(val)){fields[j]=[null,null,null]}else{vals=val.split(";");if(vals.length==3){fields[j]=[utils.parseFloat_(vals[0],i,line),utils.parseFloat_(vals[1],i,line),utils.parseFloat_(vals[2],i,line)]}else{console.warn("When using customBars, values must be either blank "+'or "low;center;high" tuples (got "'+val+'" on line '+(1+i))}}}}else{for(j=1;j<inFields.length;j++){fields[j]=utils.parseFloat_(inFields[j],i,line)}}if(ret.length>0&&fields[0]<ret[ret.length-1][0]){outOfOrder=true}if(fields.length!=expectedCols){console.error("Number of columns in line "+i+" ("+fields.length+") does not agree with number of labels ("+expectedCols+") "+line)}if(i===0&&this.attr_("labels")){var all_null=true;for(j=0;all_null&&j<fields.length;j++){if(fields[j])all_null=false}if(all_null){console.warn("The dygraphs 'labels' option is set, but the first row "+"of CSV data ('"+line+"') appears to also contain "+"labels. Will drop the CSV labels and use the option "+"labels.");continue}}ret.push(fields)}if(outOfOrder){console.warn("CSV is out of order; order it correctly to speed loading.");ret.sort(function(a,b){return a[0]-b[0]})}return ret};function validateNativeFormat(data){var firstRow=data[0];var firstX=firstRow[0];if(typeof firstX!=="number"&&!utils.isDateLike(firstX)){throw new Error("Expected number or date but got "+typeof firstX+": "+firstX+".")}for(var i=1;i<firstRow.length;i++){var val=firstRow[i];if(val===null||val===undefined)continue;if(typeof val==="number")continue;if(utils.isArrayLike(val))continue;throw new Error("Expected number or array but got "+typeof val+": "+val+".")}}Dygraph.prototype.parseArray_=function(data){if(data.length===0){console.error("Can't plot empty data set");return null}if(data[0].length===0){console.error("Data set cannot contain an empty row");return null}validateNativeFormat(data);var i;if(this.attr_("labels")===null){console.warn("Using default labels. Set labels explicitly via 'labels' "+"in the options parameter");this.attrs_.labels=["X"];for(i=1;i<data[0].length;i++){this.attrs_.labels.push("Y"+i)}this.attributes_.reparseSeries()}else{var num_labels=this.attr_("labels");if(num_labels.length!=data[0].length){console.error("Mismatch between number of labels ("+num_labels+")"+" and number of columns in array ("+data[0].length+")");return null}}if(utils.isDateLike(data[0][0])){this.attrs_.axes.x.valueFormatter=utils.dateValueFormatter;this.attrs_.axes.x.ticker=DygraphTickers.dateTicker;this.attrs_.axes.x.axisLabelFormatter=utils.dateAxisLabelFormatter;var parsedData=utils.clone(data);for(i=0;i<data.length;i++){if(parsedData[i].length===0){console.error("Row "+(1+i)+" of data is empty");return null}if(parsedData[i][0]===null||typeof parsedData[i][0].getTime!="function"||isNaN(parsedData[i][0].getTime())){console.error("x value in row "+(1+i)+" is not a Date");return null}parsedData[i][0]=parsedData[i][0].getTime()}return parsedData}else{this.attrs_.axes.x.valueFormatter=function(x){return x};this.attrs_.axes.x.ticker=DygraphTickers.numericTicks;this.attrs_.axes.x.axisLabelFormatter=utils.numberAxisLabelFormatter;return data}};Dygraph.prototype.parseDataTable_=function(data){var shortTextForAnnotationNum=function shortTextForAnnotationNum(num){var shortText=String.fromCharCode(65+num%26);num=Math.floor(num/26);while(num>0){shortText=String.fromCharCode(65+(num-1)%26)+shortText.toLowerCase();num=Math.floor((num-1)/26)}return shortText};var cols=data.getNumberOfColumns();var rows=data.getNumberOfRows();var indepType=data.getColumnType(0);if(indepType=="date"||indepType=="datetime"){this.attrs_.xValueParser=utils.dateParser;this.attrs_.axes.x.valueFormatter=utils.dateValueFormatter;this.attrs_.axes.x.ticker=DygraphTickers.dateTicker;this.attrs_.axes.x.axisLabelFormatter=utils.dateAxisLabelFormatter}else if(indepType=="number"){this.attrs_.xValueParser=function(x){return parseFloat(x)};this.attrs_.axes.x.valueFormatter=function(x){return x};this.attrs_.axes.x.ticker=DygraphTickers.numericTicks;this.attrs_.axes.x.axisLabelFormatter=this.attrs_.axes.x.valueFormatter}else{throw new Error("only 'date', 'datetime' and 'number' types are supported "+"for column 1 of DataTable input (Got '"+indepType+"')")}var colIdx=[];var annotationCols={};var hasAnnotations=false;var i,j;for(i=1;i<cols;i++){var type=data.getColumnType(i);if(type=="number"){colIdx.push(i)}else if(type=="string"&&this.getBooleanOption("displayAnnotations")){var dataIdx=colIdx[colIdx.length-1];if(!annotationCols.hasOwnProperty(dataIdx)){annotationCols[dataIdx]=[i]}else{annotationCols[dataIdx].push(i)}hasAnnotations=true}else{throw new Error("Only 'number' is supported as a dependent type with Gviz."+" 'string' is only supported if displayAnnotations is true")}}var labels=[data.getColumnLabel(0)];for(i=0;i<colIdx.length;i++){labels.push(data.getColumnLabel(colIdx[i]));if(this.getBooleanOption("errorBars"))i+=1}this.attrs_.labels=labels;cols=labels.length;var ret=[];var outOfOrder=false;var annotations=[];for(i=0;i<rows;i++){var row=[];if(typeof data.getValue(i,0)==="undefined"||data.getValue(i,0)===null){console.warn("Ignoring row "+i+" of DataTable because of undefined or null first column.");continue}if(indepType=="date"||indepType=="datetime"){row.push(data.getValue(i,0).getTime())}else{row.push(data.getValue(i,0))}if(!this.getBooleanOption("errorBars")){for(j=0;j<colIdx.length;j++){var col=colIdx[j];row.push(data.getValue(i,col));if(hasAnnotations&&annotationCols.hasOwnProperty(col)&&data.getValue(i,annotationCols[col][0])!==null){var ann={};ann.series=data.getColumnLabel(col);ann.xval=row[0];ann.shortText=shortTextForAnnotationNum(annotations.length);ann.text="";for(var k=0;k<annotationCols[col].length;k++){if(k)ann.text+="\n";ann.text+=data.getValue(i,annotationCols[col][k])}annotations.push(ann)}}for(j=0;j<row.length;j++){if(!isFinite(row[j]))row[j]=null}}else{for(j=0;j<cols-1;j++){row.push([data.getValue(i,1+2*j),data.getValue(i,2+2*j)])}}if(ret.length>0&&row[0]<ret[ret.length-1][0]){outOfOrder=true}ret.push(row)}if(outOfOrder){console.warn("DataTable is out of order; order it correctly to speed loading.");ret.sort(function(a,b){return a[0]-b[0]})}this.rawData_=ret;if(annotations.length>0){this.setAnnotations(annotations,true)}this.attributes_.reparseSeries()};Dygraph.prototype.cascadeDataDidUpdateEvent_=function(){this.cascadeEvents_("dataDidUpdate",{})};Dygraph.prototype.start_=function(){var data=this.file_;if(typeof data=="function"){data=data()}if(utils.isArrayLike(data)){this.rawData_=this.parseArray_(data);this.cascadeDataDidUpdateEvent_();this.predraw_()}else if(typeof data=="object"&&typeof data.getColumnRange=="function"){this.parseDataTable_(data);this.cascadeDataDidUpdateEvent_();this.predraw_()}else if(typeof data=="string"){var line_delimiter=utils.detectLineDelimiter(data);if(line_delimiter){this.loadedEvent_(data)}else{var req;if(window.XMLHttpRequest){req=new XMLHttpRequest}else{req=new ActiveXObject("Microsoft.XMLHTTP")}var caller=this;req.onreadystatechange=function(){if(req.readyState==4){if(req.status===200||req.status===0){caller.loadedEvent_(req.responseText)}}};req.open("GET",data,true);req.send(null)}}else{console.error("Unknown data format: "+typeof data)}};Dygraph.prototype.updateOptions=function(input_attrs,block_redraw){if(typeof block_redraw=="undefined")block_redraw=false;var file=input_attrs.file;var attrs=Dygraph.copyUserAttrs_(input_attrs);if("rollPeriod"in attrs){this.rollPeriod_=attrs.rollPeriod}if("dateWindow"in attrs){this.dateWindow_=attrs.dateWindow}var requiresNewPoints=utils.isPixelChangingOptionList(this.attr_("labels"),attrs);utils.updateDeep(this.user_attrs_,attrs);this.attributes_.reparseSeries();if(file){this.cascadeEvents_("dataWillUpdate",{});this.file_=file;if(!block_redraw)this.start_()}else{if(!block_redraw){if(requiresNewPoints){this.predraw_()}else{this.renderGraph_(false)}}}};Dygraph.copyUserAttrs_=function(attrs){var my_attrs={};for(var k in attrs){if(!attrs.hasOwnProperty(k))continue;if(k=="file")continue;if(attrs.hasOwnProperty(k))my_attrs[k]=attrs[k]}return my_attrs};Dygraph.prototype.resize=function(width,height){if(this.resize_lock){return}this.resize_lock=true;if(width===null!=(height===null)){console.warn("Dygraph.resize() should be called with zero parameters or "+"two non-NULL parameters. Pretending it was zero.");width=height=null}var old_width=this.width_;var old_height=this.height_;if(width){this.maindiv_.style.width=width+"px";this.maindiv_.style.height=height+"px";this.width_=width;this.height_=height}else{this.width_=this.maindiv_.clientWidth;this.height_=this.maindiv_.clientHeight}if(old_width!=this.width_||old_height!=this.height_){this.resizeElements_();this.predraw_()}this.resize_lock=false};Dygraph.prototype.adjustRoll=function(length){this.rollPeriod_=length;this.predraw_()};Dygraph.prototype.visibility=function(){if(!this.getOption("visibility")){this.attrs_.visibility=[]}while(this.getOption("visibility").length<this.numColumns()-1){this.attrs_.visibility.push(true)}return this.getOption("visibility")};Dygraph.prototype.setVisibility=function(num,value){var x=this.visibility();var numIsObject=false;if(!Array.isArray(num)){if(num!==null&&typeof num==="object"){numIsObject=true}else{num=[num]}}if(numIsObject){for(var i in num){if(num.hasOwnProperty(i)){if(i<0||i>=x.length){console.warn("Invalid series number in setVisibility: "+i)}else{x[i]=num[i]}}}}else{for(var i=0;i<num.length;i++){if(typeof num[i]==="boolean"){if(i>=x.length){console.warn("Invalid series number in setVisibility: "+i)}else{x[i]=num[i]}}else{if(num[i]<0||num[i]>=x.length){console.warn("Invalid series number in setVisibility: "+num[i])}else{x[num[i]]=value}}}}this.predraw_()};Dygraph.prototype.size=function(){return{width:this.width_,height:this.height_}};Dygraph.prototype.setAnnotations=function(ann,suppressDraw){this.annotations_=ann;if(!this.layout_){console.warn("Tried to setAnnotations before dygraph was ready. "+"Try setting them in a ready() block. See "+"dygraphs.com/tests/annotation.html");return}this.layout_.setAnnotations(this.annotations_);if(!suppressDraw){this.predraw_()}};Dygraph.prototype.annotations=function(){return this.annotations_};Dygraph.prototype.getLabels=function(){var labels=this.attr_("labels");return labels?labels.slice():null};Dygraph.prototype.indexFromSetName=function(name){return this.setIndexByName_[name]};Dygraph.prototype.getRowForX=function(xVal){var low=0,high=this.numRows()-1;while(low<=high){var idx=high+low>>1;var x=this.getValue(idx,0);if(x<xVal){low=idx+1}else if(x>xVal){high=idx-1}else if(low!=idx){high=idx}else{return idx}}return null};Dygraph.prototype.ready=function(callback){if(this.is_initial_draw_){this.readyFns_.push(callback)}else{callback.call(this,this)}};Dygraph.prototype.addAndTrackEvent=function(elem,type,fn){utils.addEvent(elem,type,fn);this.registeredEvents_.push({elem:elem,type:type,fn:fn})};Dygraph.prototype.removeTrackedEvents_=function(){if(this.registeredEvents_){for(var idx=0;idx<this.registeredEvents_.length;idx++){var reg=this.registeredEvents_[idx];utils.removeEvent(reg.elem,reg.type,reg.fn)}}this.registeredEvents_=[]};Dygraph.PLUGINS=[_pluginsLegend2["default"],_pluginsAxes2["default"],_pluginsRangeSelector2["default"],_pluginsChartLabels2["default"],_pluginsAnnotations2["default"],_pluginsGrid2["default"]];Dygraph.GVizChart=_dygraphGviz2["default"];Dygraph.DASHED_LINE=utils.DASHED_LINE;Dygraph.DOT_DASH_LINE=utils.DOT_DASH_LINE;Dygraph.dateAxisLabelFormatter=utils.dateAxisLabelFormatter;Dygraph.toRGB_=utils.toRGB_;Dygraph.findPos=utils.findPos;Dygraph.pageX=utils.pageX;Dygraph.pageY=utils.pageY;Dygraph.dateString_=utils.dateString_;Dygraph.defaultInteractionModel=_dygraphInteractionModel2["default"].defaultModel;Dygraph.nonInteractiveModel=Dygraph.nonInteractiveModel_=_dygraphInteractionModel2["default"].nonInteractiveModel_;Dygraph.Circles=utils.Circles;Dygraph.Plugins={Legend:_pluginsLegend2["default"],Axes:_pluginsAxes2["default"],Annotations:_pluginsAnnotations2["default"],ChartLabels:_pluginsChartLabels2["default"],Grid:_pluginsGrid2["default"],RangeSelector:_pluginsRangeSelector2["default"]};Dygraph.DataHandlers={DefaultHandler:_datahandlerDefault2["default"],BarsHandler:_datahandlerBars2["default"],CustomBarsHandler:_datahandlerBarsCustom2["default"],DefaultFractionHandler:_datahandlerDefaultFractions2["default"],ErrorBarsHandler:_datahandlerBarsError2["default"],FractionsBarsHandler:_datahandlerBarsFractions2["default"]};Dygraph.startPan=_dygraphInteractionModel2["default"].startPan;Dygraph.startZoom=_dygraphInteractionModel2["default"].startZoom;Dygraph.movePan=_dygraphInteractionModel2["default"].movePan;Dygraph.moveZoom=_dygraphInteractionModel2["default"].moveZoom;Dygraph.endPan=_dygraphInteractionModel2["default"].endPan;Dygraph.endZoom=_dygraphInteractionModel2["default"].endZoom;Dygraph.numericLinearTicks=DygraphTickers.numericLinearTicks;Dygraph.numericTicks=DygraphTickers.numericTicks;Dygraph.dateTicker=DygraphTickers.dateTicker;Dygraph.Granularity=DygraphTickers.Granularity;Dygraph.getDateAxis=DygraphTickers.getDateAxis;Dygraph.floatFormat=utils.floatFormat;exports["default"]=Dygraph;module.exports=exports["default"]}).call(this,require("_process"))},{"./datahandler/bars":13,"./datahandler/bars-custom":10,"./datahandler/bars-error":11,"./datahandler/bars-fractions":12,"./datahandler/default":16,"./datahandler/default-fractions":15,"./dygraph-canvas":17,"./dygraph-default-attrs":18,"./dygraph-gviz":19,"./dygraph-interaction-model":20,"./dygraph-layout":21,"./dygraph-options":23,"./dygraph-options-reference":22,"./dygraph-tickers":24,"./dygraph-utils":25,"./iframe-tarp":27,"./plugins/annotations":28,"./plugins/axes":29,"./plugins/chart-labels":30,"./plugins/grid":31,"./plugins/legend":32,"./plugins/range-selector":33,_process:37}],27:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}var _dygraphUtils=require("./dygraph-utils");var utils=_interopRequireWildcard(_dygraphUtils);function IFrameTarp(){this.tarps=[]}IFrameTarp.prototype.cover=function(){var iframes=document.getElementsByTagName("iframe");for(var i=0;i<iframes.length;i++){var iframe=iframes[i];var pos=utils.findPos(iframe),x=pos.x,y=pos.y,width=iframe.offsetWidth,height=iframe.offsetHeight;var div=document.createElement("div");div.style.position="absolute";div.style.left=x+"px";div.style.top=y+"px";div.style.width=width+"px";div.style.height=height+"px";div.style.zIndex=999;document.body.appendChild(div);this.tarps.push(div)}};IFrameTarp.prototype.uncover=function(){for(var i=0;i<this.tarps.length;i++){this.tarps[i].parentNode.removeChild(this.tarps[i])}this.tarps=[]};exports["default"]=IFrameTarp;module.exports=exports["default"]},{"./dygraph-utils":25}],28:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var annotations=function annotations(){this.annotations_=[]};annotations.prototype.toString=function(){return"Annotations Plugin"};annotations.prototype.activate=function(g){return{clearChart:this.clearChart,didDrawChart:this.didDrawChart}};annotations.prototype.detachLabels=function(){for(var i=0;i<this.annotations_.length;i++){var a=this.annotations_[i];if(a.parentNode)a.parentNode.removeChild(a);this.annotations_[i]=null}this.annotations_=[]};annotations.prototype.clearChart=function(e){this.detachLabels()};annotations.prototype.didDrawChart=function(e){var g=e.dygraph;var points=g.layout_.annotated_points;if(!points||points.length===0)return;var containerDiv=e.canvas.parentNode;var bindEvt=function bindEvt(eventName,classEventName,pt){return function(annotation_event){var a=pt.annotation;if(a.hasOwnProperty(eventName)){a[eventName](a,pt,g,annotation_event)}else if(g.getOption(classEventName)){g.getOption(classEventName)(a,pt,g,annotation_event)}}};var area=e.dygraph.getArea();var xToUsedHeight={};for(var i=0;i<points.length;i++){var p=points[i];if(p.canvasx<area.x||p.canvasx>area.x+area.w||p.canvasy<area.y||p.canvasy>area.y+area.h){continue}var a=p.annotation;var tick_height=6;if(a.hasOwnProperty("tickHeight")){tick_height=a.tickHeight}var div=document.createElement("div");div.style["fontSize"]=g.getOption("axisLabelFontSize")+"px";var className="dygraph-annotation";if(!a.hasOwnProperty("icon")){className+=" dygraphDefaultAnnotation dygraph-default-annotation"}if(a.hasOwnProperty("cssClass")){className+=" "+a.cssClass}div.className=className;var width=a.hasOwnProperty("width")?a.width:16;var height=a.hasOwnProperty("height")?a.height:16;if(a.hasOwnProperty("icon")){var img=document.createElement("img");img.src=a.icon;img.width=width;img.height=height;div.appendChild(img)}else if(p.annotation.hasOwnProperty("shortText")){div.appendChild(document.createTextNode(p.annotation.shortText))}var left=p.canvasx-width/2;div.style.left=left+"px";var divTop=0;if(a.attachAtBottom){var y=area.y+area.h-height-tick_height;if(xToUsedHeight[left]){y-=xToUsedHeight[left]}else{xToUsedHeight[left]=0}xToUsedHeight[left]+=tick_height+height;divTop=y}else{divTop=p.canvasy-height-tick_height}div.style.top=divTop+"px";div.style.width=width+"px";div.style.height=height+"px";div.title=p.annotation.text;div.style.color=g.colorsMap_[p.name];div.style.borderColor=g.colorsMap_[p.name];a.div=div;g.addAndTrackEvent(div,"click",bindEvt("clickHandler","annotationClickHandler",p,this));g.addAndTrackEvent(div,"mouseover",bindEvt("mouseOverHandler","annotationMouseOverHandler",p,this));g.addAndTrackEvent(div,"mouseout",bindEvt("mouseOutHandler","annotationMouseOutHandler",p,this));g.addAndTrackEvent(div,"dblclick",bindEvt("dblClickHandler","annotationDblClickHandler",p,this));containerDiv.appendChild(div);this.annotations_.push(div);var ctx=e.drawingContext;ctx.save();ctx.strokeStyle=a.hasOwnProperty("tickColor")?a.tickColor:g.colorsMap_[p.name];ctx.lineWidth=a.hasOwnProperty("tickWidth")?a.tickWidth:g.getOption("strokeWidth");ctx.beginPath();if(!a.attachAtBottom){ctx.moveTo(p.canvasx,p.canvasy);ctx.lineTo(p.canvasx,p.canvasy-2-tick_height)}else{var y=divTop+height;ctx.moveTo(p.canvasx,y);ctx.lineTo(p.canvasx,y+tick_height)}ctx.closePath();ctx.stroke();ctx.restore()}};annotations.prototype.destroy=function(){this.detachLabels()};exports["default"]=annotations;module.exports=exports["default"]},{}],29:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}var _dygraphUtils=require("../dygraph-utils");var utils=_interopRequireWildcard(_dygraphUtils);var axes=function axes(){this.xlabels_=[];this.ylabels_=[]};axes.prototype.toString=function(){return"Axes Plugin"};axes.prototype.activate=function(g){return{layout:this.layout,clearChart:this.clearChart,willDrawChart:this.willDrawChart}};axes.prototype.layout=function(e){var g=e.dygraph;if(g.getOptionForAxis("drawAxis","y")){var w=g.getOptionForAxis("axisLabelWidth","y")+2*g.getOptionForAxis("axisTickSize","y");e.reserveSpaceLeft(w)}if(g.getOptionForAxis("drawAxis","x")){var h;if(g.getOption("xAxisHeight")){h=g.getOption("xAxisHeight")}else{h=g.getOptionForAxis("axisLabelFontSize","x")+2*g.getOptionForAxis("axisTickSize","x")}e.reserveSpaceBottom(h)}if(g.numAxes()==2){if(g.getOptionForAxis("drawAxis","y2")){var w=g.getOptionForAxis("axisLabelWidth","y2")+2*g.getOptionForAxis("axisTickSize","y2");e.reserveSpaceRight(w)}}else if(g.numAxes()>2){g.error("Only two y-axes are supported at this time. (Trying "+"to use "+g.numAxes()+")")}};axes.prototype.detachLabels=function(){function removeArray(ary){for(var i=0;i<ary.length;i++){var el=ary[i];if(el.parentNode)el.parentNode.removeChild(el)}}removeArray(this.xlabels_);removeArray(this.ylabels_);this.xlabels_=[];this.ylabels_=[]};axes.prototype.clearChart=function(e){this.detachLabels()};axes.prototype.willDrawChart=function(e){var _this=this;var g=e.dygraph;if(!g.getOptionForAxis("drawAxis","x")&&!g.getOptionForAxis("drawAxis","y")&&!g.getOptionForAxis("drawAxis","y2")){return}function halfUp(x){return Math.round(x)+.5}function halfDown(y){return Math.round(y)-.5}var context=e.drawingContext;var containerDiv=e.canvas.parentNode;var canvasWidth=g.width_;var canvasHeight=g.height_;var label,x,y,tick,i;var makeLabelStyle=function makeLabelStyle(axis){return{position:"absolute",fontSize:g.getOptionForAxis("axisLabelFontSize",axis)+"px",width:g.getOptionForAxis("axisLabelWidth",axis)+"px"}};var labelStyles={x:makeLabelStyle("x"),y:makeLabelStyle("y"),y2:makeLabelStyle("y2")};var makeDiv=function makeDiv(txt,axis,prec_axis){var div=document.createElement("div");var labelStyle=labelStyles[prec_axis=="y2"?"y2":axis];utils.update(div.style,labelStyle);var inner_div=document.createElement("div");inner_div.className="dygraph-axis-label"+" dygraph-axis-label-"+axis+(prec_axis?" dygraph-axis-label-"+prec_axis:"");inner_div.innerHTML=txt;div.appendChild(inner_div);return div};context.save();var layout=g.layout_;var area=e.dygraph.plotter_.area;var makeOptionGetter=function makeOptionGetter(axis){return function(option){return g.getOptionForAxis(option,axis)}};if(g.getOptionForAxis("drawAxis","y")){if(layout.yticks&&layout.yticks.length>0){var num_axes=g.numAxes();var getOptions=[makeOptionGetter("y"),makeOptionGetter("y2")];layout.yticks.forEach(function(tick){if(tick.label===undefined)return;x=area.x;var sgn=1;var prec_axis="y1";var getAxisOption=getOptions[0];if(tick.axis==1){x=area.x+area.w;sgn=-1;prec_axis="y2";getAxisOption=getOptions[1]}var fontSize=getAxisOption("axisLabelFontSize");y=area.y+tick.pos*area.h;label=makeDiv(tick.label,"y",num_axes==2?prec_axis:null);var top=y-fontSize/2;if(top<0)top=0;if(top+fontSize+3>canvasHeight){label.style.bottom="0"}else{label.style.top=top+"px"}if(tick.axis===0){label.style.left=area.x-getAxisOption("axisLabelWidth")-getAxisOption("axisTickSize")+"px";label.style.textAlign="right"}else if(tick.axis==1){label.style.left=area.x+area.w+getAxisOption("axisTickSize")+"px";label.style.textAlign="left"}label.style.width=getAxisOption("axisLabelWidth")+"px";containerDiv.appendChild(label);_this.ylabels_.push(label)});var bottomTick=this.ylabels_[0];var fontSize=g.getOptionForAxis("axisLabelFontSize","y");var bottom=parseInt(bottomTick.style.top,10)+fontSize;if(bottom>canvasHeight-fontSize){bottomTick.style.top=parseInt(bottomTick.style.top,10)-fontSize/2+"px"}}var axisX;if(g.getOption("drawAxesAtZero")){var r=g.toPercentXCoord(0);if(r>1||r<0||isNaN(r))r=0;axisX=halfUp(area.x+r*area.w)}else{axisX=halfUp(area.x)}context.strokeStyle=g.getOptionForAxis("axisLineColor","y");context.lineWidth=g.getOptionForAxis("axisLineWidth","y");context.beginPath();context.moveTo(axisX,halfDown(area.y));context.lineTo(axisX,halfDown(area.y+area.h));context.closePath();context.stroke();if(g.numAxes()==2){context.strokeStyle=g.getOptionForAxis("axisLineColor","y2");context.lineWidth=g.getOptionForAxis("axisLineWidth","y2");context.beginPath();context.moveTo(halfDown(area.x+area.w),halfDown(area.y));context.lineTo(halfDown(area.x+area.w),halfDown(area.y+area.h));context.closePath();context.stroke()}}if(g.getOptionForAxis("drawAxis","x")){if(layout.xticks){var getAxisOption=makeOptionGetter("x");layout.xticks.forEach(function(tick){if(tick.label===undefined)return;x=area.x+tick.pos*area.w;y=area.y+area.h;label=makeDiv(tick.label,"x");label.style.textAlign="center";label.style.top=y+getAxisOption("axisTickSize")+"px";var left=x-getAxisOption("axisLabelWidth")/2;if(left+getAxisOption("axisLabelWidth")>canvasWidth){left=canvasWidth-getAxisOption("axisLabelWidth");label.style.textAlign="right"}if(left<0){left=0;label.style.textAlign="left"}label.style.left=left+"px";label.style.width=getAxisOption("axisLabelWidth")+"px";containerDiv.appendChild(label);_this.xlabels_.push(label)})}context.strokeStyle=g.getOptionForAxis("axisLineColor","x");context.lineWidth=g.getOptionForAxis("axisLineWidth","x");context.beginPath();var axisY;if(g.getOption("drawAxesAtZero")){var r=g.toPercentYCoord(0,0);if(r>1||r<0)r=1;axisY=halfDown(area.y+r*area.h)}else{axisY=halfDown(area.y+area.h)}context.moveTo(halfUp(area.x),axisY);context.lineTo(halfUp(area.x+area.w),axisY);context.closePath();context.stroke()}context.restore()};exports["default"]=axes;module.exports=exports["default"]},{"../dygraph-utils":25}],30:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var chart_labels=function chart_labels(){this.title_div_=null;this.xlabel_div_=null;this.ylabel_div_=null;this.y2label_div_=null};chart_labels.prototype.toString=function(){return"ChartLabels Plugin"};chart_labels.prototype.activate=function(g){return{layout:this.layout,didDrawChart:this.didDrawChart}};var createDivInRect=function createDivInRect(r){var div=document.createElement("div");div.style.position="absolute";div.style.left=r.x+"px";div.style.top=r.y+"px";div.style.width=r.w+"px";div.style.height=r.h+"px";return div};chart_labels.prototype.detachLabels_=function(){var els=[this.title_div_,this.xlabel_div_,this.ylabel_div_,this.y2label_div_];for(var i=0;i<els.length;i++){var el=els[i];if(!el)continue;if(el.parentNode)el.parentNode.removeChild(el)}this.title_div_=null;this.xlabel_div_=null;this.ylabel_div_=null;this.y2label_div_=null};var createRotatedDiv=function createRotatedDiv(g,box,axis,classes,html){var div=document.createElement("div");div.style.position="absolute";if(axis==1){div.style.left="0px"}else{div.style.left=box.x+"px"}div.style.top=box.y+"px";div.style.width=box.w+"px";div.style.height=box.h+"px";div.style.fontSize=g.getOption("yLabelWidth")-2+"px";var inner_div=document.createElement("div");inner_div.style.position="absolute";inner_div.style.width=box.h+"px";inner_div.style.height=box.w+"px";inner_div.style.top=box.h/2-box.w/2+"px";inner_div.style.left=box.w/2-box.h/2+"px";inner_div.className="dygraph-label-rotate-"+(axis==1?"right":"left");var class_div=document.createElement("div");class_div.className=classes;class_div.innerHTML=html;inner_div.appendChild(class_div);div.appendChild(inner_div);return div};chart_labels.prototype.layout=function(e){this.detachLabels_();var g=e.dygraph;var div=e.chart_div;if(g.getOption("title")){var title_rect=e.reserveSpaceTop(g.getOption("titleHeight"));this.title_div_=createDivInRect(title_rect);this.title_div_.style.fontSize=g.getOption("titleHeight")-8+"px";var class_div=document.createElement("div");class_div.className="dygraph-label dygraph-title";class_div.innerHTML=g.getOption("title");this.title_div_.appendChild(class_div);div.appendChild(this.title_div_)}if(g.getOption("xlabel")){var x_rect=e.reserveSpaceBottom(g.getOption("xLabelHeight"));this.xlabel_div_=createDivInRect(x_rect);this.xlabel_div_.style.fontSize=g.getOption("xLabelHeight")-2+"px";var class_div=document.createElement("div");class_div.className="dygraph-label dygraph-xlabel";class_div.innerHTML=g.getOption("xlabel");this.xlabel_div_.appendChild(class_div);div.appendChild(this.xlabel_div_)}if(g.getOption("ylabel")){var y_rect=e.reserveSpaceLeft(0);this.ylabel_div_=createRotatedDiv(g,y_rect,1,"dygraph-label dygraph-ylabel",g.getOption("ylabel"));div.appendChild(this.ylabel_div_)}if(g.getOption("y2label")&&g.numAxes()==2){var y2_rect=e.reserveSpaceRight(0);this.y2label_div_=createRotatedDiv(g,y2_rect,2,"dygraph-label dygraph-y2label",g.getOption("y2label"));div.appendChild(this.y2label_div_)}};chart_labels.prototype.didDrawChart=function(e){var g=e.dygraph;if(this.title_div_){this.title_div_.children[0].innerHTML=g.getOption("title")}if(this.xlabel_div_){this.xlabel_div_.children[0].innerHTML=g.getOption("xlabel")}if(this.ylabel_div_){this.ylabel_div_.children[0].children[0].innerHTML=g.getOption("ylabel")}if(this.y2label_div_){this.y2label_div_.children[0].children[0].innerHTML=g.getOption("y2label")}};chart_labels.prototype.clearChart=function(){};chart_labels.prototype.destroy=function(){this.detachLabels_()};exports["default"]=chart_labels;module.exports=exports["default"]},{}],31:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var grid=function grid(){};grid.prototype.toString=function(){return"Gridline Plugin"};grid.prototype.activate=function(g){return{willDrawChart:this.willDrawChart}};grid.prototype.willDrawChart=function(e){var g=e.dygraph;var ctx=e.drawingContext;var layout=g.layout_;var area=e.dygraph.plotter_.area;function halfUp(x){return Math.round(x)+.5}function halfDown(y){return Math.round(y)-.5}var x,y,i,ticks;if(g.getOptionForAxis("drawGrid","y")){var axes=["y","y2"];var strokeStyles=[],lineWidths=[],drawGrid=[],stroking=[],strokePattern=[];for(var i=0;i<axes.length;i++){drawGrid[i]=g.getOptionForAxis("drawGrid",axes[i]);if(drawGrid[i]){strokeStyles[i]=g.getOptionForAxis("gridLineColor",axes[i]);lineWidths[i]=g.getOptionForAxis("gridLineWidth",axes[i]);strokePattern[i]=g.getOptionForAxis("gridLinePattern",axes[i]);stroking[i]=strokePattern[i]&&strokePattern[i].length>=2}}ticks=layout.yticks;ctx.save();ticks.forEach(function(tick){if(!tick.has_tick)return;var axis=tick.axis;if(drawGrid[axis]){ctx.save();if(stroking[axis]){if(ctx.setLineDash)ctx.setLineDash(strokePattern[axis])}ctx.strokeStyle=strokeStyles[axis];ctx.lineWidth=lineWidths[axis];x=halfUp(area.x);y=halfDown(area.y+tick.pos*area.h);ctx.beginPath();ctx.moveTo(x,y);ctx.lineTo(x+area.w,y);ctx.stroke();ctx.restore()}});ctx.restore()}if(g.getOptionForAxis("drawGrid","x")){ticks=layout.xticks;ctx.save();var strokePattern=g.getOptionForAxis("gridLinePattern","x");var stroking=strokePattern&&strokePattern.length>=2;if(stroking){if(ctx.setLineDash)ctx.setLineDash(strokePattern)}ctx.strokeStyle=g.getOptionForAxis("gridLineColor","x");ctx.lineWidth=g.getOptionForAxis("gridLineWidth","x");ticks.forEach(function(tick){if(!tick.has_tick)return;x=halfUp(area.x+tick.pos*area.w);y=halfDown(area.y+area.h);ctx.beginPath();ctx.moveTo(x,y);ctx.lineTo(x,area.y);ctx.closePath();ctx.stroke()});if(stroking){if(ctx.setLineDash)ctx.setLineDash([])}ctx.restore()}};grid.prototype.destroy=function(){};exports["default"]=grid;module.exports=exports["default"]},{}],32:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}var _dygraphUtils=require("../dygraph-utils");var utils=_interopRequireWildcard(_dygraphUtils);var Legend=function Legend(){this.legend_div_=null;this.is_generated_div_=false};Legend.prototype.toString=function(){return"Legend Plugin"};Legend.prototype.activate=function(g){var div;var userLabelsDiv=g.getOption("labelsDiv");if(userLabelsDiv&&null!==userLabelsDiv){if(typeof userLabelsDiv=="string"||userLabelsDiv instanceof String){div=document.getElementById(userLabelsDiv)}else{div=userLabelsDiv}}else{div=document.createElement("div");div.className="dygraph-legend";g.graphDiv.appendChild(div);this.is_generated_div_=true}this.legend_div_=div;this.one_em_width_=10;return{select:this.select,deselect:this.deselect,predraw:this.predraw,didDrawChart:this.didDrawChart}};var calculateEmWidthInDiv=function calculateEmWidthInDiv(div){var sizeSpan=document.createElement("span");sizeSpan.setAttribute("style","margin: 0; padding: 0 0 0 1em; border: 0;");div.appendChild(sizeSpan);var oneEmWidth=sizeSpan.offsetWidth;div.removeChild(sizeSpan);return oneEmWidth};var escapeHTML=function escapeHTML(str){return str.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};Legend.prototype.select=function(e){var xValue=e.selectedX;var points=e.selectedPoints;var row=e.selectedRow;var legendMode=e.dygraph.getOption("legend");if(legendMode==="never"){this.legend_div_.style.display="none";return}if(legendMode==="follow"){var area=e.dygraph.plotter_.area;var labelsDivWidth=this.legend_div_.offsetWidth;var yAxisLabelWidth=e.dygraph.getOptionForAxis("axisLabelWidth","y");var leftLegend=points[0].x*area.w+50;var topLegend=points[0].y*area.h-50;if(leftLegend+labelsDivWidth+1>area.w){leftLegend=leftLegend-2*50-labelsDivWidth-(yAxisLabelWidth-area.x)}e.dygraph.graphDiv.appendChild(this.legend_div_);this.legend_div_.style.left=yAxisLabelWidth+leftLegend+"px";this.legend_div_.style.top=topLegend+"px"}var html=Legend.generateLegendHTML(e.dygraph,xValue,points,this.one_em_width_,row);this.legend_div_.innerHTML=html;this.legend_div_.style.display=""};Legend.prototype.deselect=function(e){var legendMode=e.dygraph.getOption("legend");if(legendMode!=="always"){this.legend_div_.style.display="none"}var oneEmWidth=calculateEmWidthInDiv(this.legend_div_);this.one_em_width_=oneEmWidth;var html=Legend.generateLegendHTML(e.dygraph,undefined,undefined,oneEmWidth,null);this.legend_div_.innerHTML=html};Legend.prototype.didDrawChart=function(e){this.deselect(e)};Legend.prototype.predraw=function(e){if(!this.is_generated_div_)return;e.dygraph.graphDiv.appendChild(this.legend_div_);var area=e.dygraph.getArea();var labelsDivWidth=this.legend_div_.offsetWidth;this.legend_div_.style.left=area.x+area.w-labelsDivWidth-1+"px";this.legend_div_.style.top=area.y+"px"};Legend.prototype.destroy=function(){this.legend_div_=null};Legend.generateLegendHTML=function(g,x,sel_points,oneEmWidth,row){var data={dygraph:g,x:x,series:[]};var labelToSeries={};var labels=g.getLabels();if(labels){for(var i=1;i<labels.length;i++){var series=g.getPropertiesForSeries(labels[i]);var strokePattern=g.getOption("strokePattern",labels[i]);var seriesData={dashHTML:generateLegendDashHTML(strokePattern,series.color,oneEmWidth),label:labels[i],labelHTML:escapeHTML(labels[i]),isVisible:series.visible,color:series.color};data.series.push(seriesData);labelToSeries[labels[i]]=seriesData}}if(typeof x!=="undefined"){var xOptView=g.optionsViewForAxis_("x");var xvf=xOptView("valueFormatter");data.xHTML=xvf.call(g,x,xOptView,labels[0],g,row,0);var yOptViews=[];var num_axes=g.numAxes();for(var i=0;i<num_axes;i++){yOptViews[i]=g.optionsViewForAxis_("y"+(i?1+i:""))}var showZeros=g.getOption("labelsShowZeroValues");var highlightSeries=g.getHighlightSeries();for(i=0;i<sel_points.length;i++){var pt=sel_points[i];var seriesData=labelToSeries[pt.name];seriesData.y=pt.yval;if(pt.yval===0&&!showZeros||isNaN(pt.canvasy)){seriesData.isVisible=false;continue}var series=g.getPropertiesForSeries(pt.name);var yOptView=yOptViews[series.axis-1];var fmtFunc=yOptView("valueFormatter");var yHTML=fmtFunc.call(g,pt.yval,yOptView,pt.name,g,row,labels.indexOf(pt.name));utils.update(seriesData,{yHTML:yHTML});if(pt.name==highlightSeries){seriesData.isHighlighted=true}}}var formatter=g.getOption("legendFormatter")||Legend.defaultFormatter;return formatter.call(g,data)};Legend.defaultFormatter=function(data){var g=data.dygraph;if(g.getOption("showLabelsOnHighlight")!==true)return"";var sepLines=g.getOption("labelsSeparateLines");var html;if(typeof data.x==="undefined"){if(g.getOption("legend")!="always"){return""}html="";for(var i=0;i<data.series.length;i++){var series=data.series[i];if(!series.isVisible)continue;if(html!=="")html+=sepLines?"<br/>":" ";html+="<span style='font-weight: bold; color: "+series.color+";'>"+series.dashHTML+" "+series.labelHTML+"</span>"}return html}html=data.xHTML+":";for(var i=0;i<data.series.length;i++){var series=data.series[i];if(!series.isVisible)continue;if(sepLines)html+="<br>";var cls=series.isHighlighted?' class="highlight"':"";html+="<span"+cls+"> <b><span style='color: "+series.color+";'>"+series.labelHTML+"</span></b>:&#160;"+series.yHTML+"</span>"}return html};function generateLegendDashHTML(strokePattern,color,oneEmWidth){if(!strokePattern||strokePattern.length<=1){return'<div class="dygraph-legend-line" style="border-bottom-color: '+color+';"></div>'}var i,j,paddingLeft,marginRight;var strokePixelLength=0,segmentLoop=0;var normalizedPattern=[];var loop;for(i=0;i<=strokePattern.length;i++){strokePixelLength+=strokePattern[i%strokePattern.length]}loop=Math.floor(oneEmWidth/(strokePixelLength-strokePattern[0]));if(loop>1){for(i=0;i<strokePattern.length;i++){normalizedPattern[i]=strokePattern[i]/oneEmWidth}segmentLoop=normalizedPattern.length}else{loop=1;for(i=0;i<strokePattern.length;i++){normalizedPattern[i]=strokePattern[i]/strokePixelLength}segmentLoop=normalizedPattern.length+1}var dash="";for(j=0;j<loop;j++){for(i=0;i<segmentLoop;i+=2){paddingLeft=normalizedPattern[i%normalizedPattern.length];if(i<strokePattern.length){marginRight=normalizedPattern[(i+1)%normalizedPattern.length]}else{marginRight=0}dash+='<div class="dygraph-legend-dash" style="margin-right: '+marginRight+"em; padding-left: "+paddingLeft+'em;"></div>'}}return dash}exports["default"]=Legend;module.exports=exports["default"]},{"../dygraph-utils":25}],33:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}var _dygraphUtils=require("../dygraph-utils");var utils=_interopRequireWildcard(_dygraphUtils);var _dygraphInteractionModel=require("../dygraph-interaction-model");var _dygraphInteractionModel2=_interopRequireDefault(_dygraphInteractionModel);var _iframeTarp=require("../iframe-tarp");var _iframeTarp2=_interopRequireDefault(_iframeTarp);var rangeSelector=function rangeSelector(){this.hasTouchInterface_=typeof TouchEvent!="undefined";this.isMobileDevice_=/mobile|android/gi.test(navigator.appVersion);this.interfaceCreated_=false};rangeSelector.prototype.toString=function(){return"RangeSelector Plugin"};rangeSelector.prototype.activate=function(dygraph){this.dygraph_=dygraph;if(this.getOption_("showRangeSelector")){this.createInterface_()}return{layout:this.reserveSpace_,predraw:this.renderStaticLayer_,didDrawChart:this.renderInteractiveLayer_}};rangeSelector.prototype.destroy=function(){this.bgcanvas_=null;this.fgcanvas_=null;this.leftZoomHandle_=null;this.rightZoomHandle_=null};rangeSelector.prototype.getOption_=function(name,opt_series){return this.dygraph_.getOption(name,opt_series)};rangeSelector.prototype.setDefaultOption_=function(name,value){this.dygraph_.attrs_[name]=value};rangeSelector.prototype.createInterface_=function(){this.createCanvases_();this.createZoomHandles_();this.initInteraction_();if(this.getOption_("animatedZooms")){console.warn("Animated zooms and range selector are not compatible; disabling animatedZooms.");this.dygraph_.updateOptions({animatedZooms:false},true)}this.interfaceCreated_=true;this.addToGraph_()};rangeSelector.prototype.addToGraph_=function(){var graphDiv=this.graphDiv_=this.dygraph_.graphDiv;graphDiv.appendChild(this.bgcanvas_);graphDiv.appendChild(this.fgcanvas_);graphDiv.appendChild(this.leftZoomHandle_);graphDiv.appendChild(this.rightZoomHandle_)};rangeSelector.prototype.removeFromGraph_=function(){var graphDiv=this.graphDiv_;graphDiv.removeChild(this.bgcanvas_);graphDiv.removeChild(this.fgcanvas_);graphDiv.removeChild(this.leftZoomHandle_);graphDiv.removeChild(this.rightZoomHandle_);this.graphDiv_=null};rangeSelector.prototype.reserveSpace_=function(e){if(this.getOption_("showRangeSelector")){e.reserveSpaceBottom(this.getOption_("rangeSelectorHeight")+4)}};rangeSelector.prototype.renderStaticLayer_=function(){if(!this.updateVisibility_()){return}this.resize_();this.drawStaticLayer_()};rangeSelector.prototype.renderInteractiveLayer_=function(){if(!this.updateVisibility_()||this.isChangingRange_){return}this.placeZoomHandles_();this.drawInteractiveLayer_()};rangeSelector.prototype.updateVisibility_=function(){var enabled=this.getOption_("showRangeSelector");if(enabled){if(!this.interfaceCreated_){this.createInterface_()}else if(!this.graphDiv_||!this.graphDiv_.parentNode){this.addToGraph_()}}else if(this.graphDiv_){this.removeFromGraph_();var dygraph=this.dygraph_;setTimeout(function(){dygraph.width_=0;dygraph.resize()},1)}return enabled};rangeSelector.prototype.resize_=function(){function setElementRect(canvas,context,rect,pixelRatioOption){var canvasScale=pixelRatioOption||utils.getContextPixelRatio(context);canvas.style.top=rect.y+"px";canvas.style.left=rect.x+"px";canvas.width=rect.w*canvasScale;canvas.height=rect.h*canvasScale;canvas.style.width=rect.w+"px";canvas.style.height=rect.h+"px";if(canvasScale!=1){context.scale(canvasScale,canvasScale)}}var plotArea=this.dygraph_.layout_.getPlotArea();var xAxisLabelHeight=0;if(this.dygraph_.getOptionForAxis("drawAxis","x")){xAxisLabelHeight=this.getOption_("xAxisHeight")||this.getOption_("axisLabelFontSize")+2*this.getOption_("axisTickSize")}this.canvasRect_={x:plotArea.x,y:plotArea.y+plotArea.h+xAxisLabelHeight+4,w:plotArea.w,h:this.getOption_("rangeSelectorHeight")};var pixelRatioOption=this.dygraph_.getNumericOption("pixelRatio");setElementRect(this.bgcanvas_,this.bgcanvas_ctx_,this.canvasRect_,pixelRatioOption);setElementRect(this.fgcanvas_,this.fgcanvas_ctx_,this.canvasRect_,pixelRatioOption)};rangeSelector.prototype.createCanvases_=function(){this.bgcanvas_=utils.createCanvas();this.bgcanvas_.className="dygraph-rangesel-bgcanvas";this.bgcanvas_.style.position="absolute";this.bgcanvas_.style.zIndex=9;this.bgcanvas_ctx_=utils.getContext(this.bgcanvas_);this.fgcanvas_=utils.createCanvas();this.fgcanvas_.className="dygraph-rangesel-fgcanvas";this.fgcanvas_.style.position="absolute";this.fgcanvas_.style.zIndex=9;this.fgcanvas_.style.cursor="default";this.fgcanvas_ctx_=utils.getContext(this.fgcanvas_)};rangeSelector.prototype.createZoomHandles_=function(){var img=new Image;img.className="dygraph-rangesel-zoomhandle";img.style.position="absolute";img.style.zIndex=10;img.style.visibility="hidden";img.style.cursor="col-resize";img.width=9;img.height=16;img.src="data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAAAkAAAAQCAYAAADESFVDAAAAAXNSR0IArs4c6QAAAAZiS0dEANAA"+"zwDP4Z7KegAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB9sHGw0cMqdt1UwAAAAZdEVYdENv"+"bW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAaElEQVQoz+3SsRFAQBCF4Z9WJM8KCDVwownl"+"6YXsTmCUsyKGkZzcl7zkz3YLkypgAnreFmDEpHkIwVOMfpdi9CEEN2nGpFdwD03yEqDtOgCaun7s"+"qSTDH32I1pQA2Pb9sZecAxc5r3IAb21d6878xsAAAAAASUVORK5CYII=";if(this.isMobileDevice_){img.width*=2;img.height*=2}this.leftZoomHandle_=img;this.rightZoomHandle_=img.cloneNode(false)};rangeSelector.prototype.initInteraction_=function(){var self=this;var topElem=document;var clientXLast=0;var handle=null;var isZooming=false;var isPanning=false;var dynamic=!this.isMobileDevice_;var tarp=new _iframeTarp2["default"];var toXDataWindow,onZoomStart,onZoom,onZoomEnd,doZoom,isMouseInPanZone,onPanStart,onPan,onPanEnd,doPan,onCanvasHover;var onZoomHandleTouchEvent,onCanvasTouchEvent,addTouchEvents;toXDataWindow=function(zoomHandleStatus){var xDataLimits=self.dygraph_.xAxisExtremes();var fact=(xDataLimits[1]-xDataLimits[0])/self.canvasRect_.w;var xDataMin=xDataLimits[0]+(zoomHandleStatus.leftHandlePos-self.canvasRect_.x)*fact;var xDataMax=xDataLimits[0]+(zoomHandleStatus.rightHandlePos-self.canvasRect_.x)*fact;return[xDataMin,xDataMax]};onZoomStart=function(e){utils.cancelEvent(e);isZooming=true;clientXLast=e.clientX;handle=e.target?e.target:e.srcElement;if(e.type==="mousedown"||e.type==="dragstart"){utils.addEvent(topElem,"mousemove",onZoom);utils.addEvent(topElem,"mouseup",onZoomEnd)}self.fgcanvas_.style.cursor="col-resize";tarp.cover();return true};onZoom=function(e){if(!isZooming){return false}utils.cancelEvent(e);var delX=e.clientX-clientXLast;if(Math.abs(delX)<4){return true}clientXLast=e.clientX;var zoomHandleStatus=self.getZoomHandleStatus_();var newPos;if(handle==self.leftZoomHandle_){newPos=zoomHandleStatus.leftHandlePos+delX;newPos=Math.min(newPos,zoomHandleStatus.rightHandlePos-handle.width-3);newPos=Math.max(newPos,self.canvasRect_.x)}else{newPos=zoomHandleStatus.rightHandlePos+delX;newPos=Math.min(newPos,self.canvasRect_.x+self.canvasRect_.w);newPos=Math.max(newPos,zoomHandleStatus.leftHandlePos+handle.width+3)}var halfHandleWidth=handle.width/2;handle.style.left=newPos-halfHandleWidth+"px";self.drawInteractiveLayer_();if(dynamic){doZoom()}return true};onZoomEnd=function(e){if(!isZooming){return false}isZooming=false;tarp.uncover();utils.removeEvent(topElem,"mousemove",onZoom);utils.removeEvent(topElem,"mouseup",onZoomEnd);self.fgcanvas_.style.cursor="default";if(!dynamic){doZoom()}return true};doZoom=function(){try{var zoomHandleStatus=self.getZoomHandleStatus_();self.isChangingRange_=true;if(!zoomHandleStatus.isZoomed){self.dygraph_.resetZoom()}else{var xDataWindow=toXDataWindow(zoomHandleStatus);self.dygraph_.doZoomXDates_(xDataWindow[0],xDataWindow[1])}}finally{self.isChangingRange_=false}};isMouseInPanZone=function(e){var rect=self.leftZoomHandle_.getBoundingClientRect();var leftHandleClientX=rect.left+rect.width/2;rect=self.rightZoomHandle_.getBoundingClientRect();var rightHandleClientX=rect.left+rect.width/2;return e.clientX>leftHandleClientX&&e.clientX<rightHandleClientX};onPanStart=function(e){if(!isPanning&&isMouseInPanZone(e)&&self.getZoomHandleStatus_().isZoomed){utils.cancelEvent(e);isPanning=true;clientXLast=e.clientX;if(e.type==="mousedown"){utils.addEvent(topElem,"mousemove",onPan);utils.addEvent(topElem,"mouseup",onPanEnd)}return true}return false};onPan=function(e){if(!isPanning){return false}utils.cancelEvent(e);var delX=e.clientX-clientXLast;if(Math.abs(delX)<4){return true}clientXLast=e.clientX;var zoomHandleStatus=self.getZoomHandleStatus_();var leftHandlePos=zoomHandleStatus.leftHandlePos;var rightHandlePos=zoomHandleStatus.rightHandlePos;var rangeSize=rightHandlePos-leftHandlePos;if(leftHandlePos+delX<=self.canvasRect_.x){leftHandlePos=self.canvasRect_.x;rightHandlePos=leftHandlePos+rangeSize}else if(rightHandlePos+delX>=self.canvasRect_.x+self.canvasRect_.w){rightHandlePos=self.canvasRect_.x+self.canvasRect_.w;leftHandlePos=rightHandlePos-rangeSize}else{leftHandlePos+=delX;rightHandlePos+=delX}var halfHandleWidth=self.leftZoomHandle_.width/2;self.leftZoomHandle_.style.left=leftHandlePos-halfHandleWidth+"px";self.rightZoomHandle_.style.left=rightHandlePos-halfHandleWidth+"px";self.drawInteractiveLayer_();if(dynamic){doPan()}return true};onPanEnd=function(e){if(!isPanning){return false}isPanning=false;utils.removeEvent(topElem,"mousemove",onPan);utils.removeEvent(topElem,"mouseup",onPanEnd);if(!dynamic){doPan()}return true};doPan=function(){try{self.isChangingRange_=true;self.dygraph_.dateWindow_=toXDataWindow(self.getZoomHandleStatus_());self.dygraph_.drawGraph_(false)}finally{self.isChangingRange_=false}};onCanvasHover=function(e){if(isZooming||isPanning){return}var cursor=isMouseInPanZone(e)?"move":"default";if(cursor!=self.fgcanvas_.style.cursor){self.fgcanvas_.style.cursor=cursor}};onZoomHandleTouchEvent=function(e){if(e.type=="touchstart"&&e.targetTouches.length==1){if(onZoomStart(e.targetTouches[0])){utils.cancelEvent(e)}}else if(e.type=="touchmove"&&e.targetTouches.length==1){if(onZoom(e.targetTouches[0])){utils.cancelEvent(e)}}else{onZoomEnd(e)}};onCanvasTouchEvent=function(e){if(e.type=="touchstart"&&e.targetTouches.length==1){if(onPanStart(e.targetTouches[0])){utils.cancelEvent(e)}}else if(e.type=="touchmove"&&e.targetTouches.length==1){if(onPan(e.targetTouches[0])){utils.cancelEvent(e)}}else{onPanEnd(e)}};addTouchEvents=function(elem,fn){var types=["touchstart","touchend","touchmove","touchcancel"];for(var i=0;i<types.length;i++){self.dygraph_.addAndTrackEvent(elem,types[i],fn)}};this.setDefaultOption_("interactionModel",_dygraphInteractionModel2["default"].dragIsPanInteractionModel);this.setDefaultOption_("panEdgeFraction",1e-4);var dragStartEvent=window.opera?"mousedown":"dragstart";this.dygraph_.addAndTrackEvent(this.leftZoomHandle_,dragStartEvent,onZoomStart);this.dygraph_.addAndTrackEvent(this.rightZoomHandle_,dragStartEvent,onZoomStart);this.dygraph_.addAndTrackEvent(this.fgcanvas_,"mousedown",onPanStart);this.dygraph_.addAndTrackEvent(this.fgcanvas_,"mousemove",onCanvasHover);if(this.hasTouchInterface_){addTouchEvents(this.leftZoomHandle_,onZoomHandleTouchEvent);addTouchEvents(this.rightZoomHandle_,onZoomHandleTouchEvent);addTouchEvents(this.fgcanvas_,onCanvasTouchEvent)}};rangeSelector.prototype.drawStaticLayer_=function(){var ctx=this.bgcanvas_ctx_;ctx.clearRect(0,0,this.canvasRect_.w,this.canvasRect_.h);try{this.drawMiniPlot_()}catch(ex){console.warn(ex)}var margin=.5;this.bgcanvas_ctx_.lineWidth=this.getOption_("rangeSelectorBackgroundLineWidth");ctx.strokeStyle=this.getOption_("rangeSelectorBackgroundStrokeColor");ctx.beginPath();ctx.moveTo(margin,margin);ctx.lineTo(margin,this.canvasRect_.h-margin);ctx.lineTo(this.canvasRect_.w-margin,this.canvasRect_.h-margin);ctx.lineTo(this.canvasRect_.w-margin,margin);ctx.stroke()};rangeSelector.prototype.drawMiniPlot_=function(){var fillStyle=this.getOption_("rangeSelectorPlotFillColor");var fillGradientStyle=this.getOption_("rangeSelectorPlotFillGradientColor");var strokeStyle=this.getOption_("rangeSelectorPlotStrokeColor");if(!fillStyle&&!strokeStyle){return}var stepPlot=this.getOption_("stepPlot");var combinedSeriesData=this.computeCombinedSeriesAndLimits_();var yRange=combinedSeriesData.yMax-combinedSeriesData.yMin;var ctx=this.bgcanvas_ctx_;var margin=.5;var xExtremes=this.dygraph_.xAxisExtremes();var xRange=Math.max(xExtremes[1]-xExtremes[0],1e-30);var xFact=(this.canvasRect_.w-margin)/xRange;var yFact=(this.canvasRect_.h-margin)/yRange;var canvasWidth=this.canvasRect_.w-margin;var canvasHeight=this.canvasRect_.h-margin;var prevX=null,prevY=null;ctx.beginPath();ctx.moveTo(margin,canvasHeight);for(var i=0;i<combinedSeriesData.data.length;i++){var dataPoint=combinedSeriesData.data[i];var x=dataPoint[0]!==null?(dataPoint[0]-xExtremes[0])*xFact:NaN;var y=dataPoint[1]!==null?canvasHeight-(dataPoint[1]-combinedSeriesData.yMin)*yFact:NaN;if(!stepPlot&&prevX!==null&&Math.round(x)==Math.round(prevX)){continue}if(isFinite(x)&&isFinite(y)){if(prevX===null){ctx.lineTo(x,canvasHeight)}else if(stepPlot){ctx.lineTo(x,prevY)}ctx.lineTo(x,y);prevX=x;prevY=y}else{if(prevX!==null){if(stepPlot){ctx.lineTo(x,prevY);ctx.lineTo(x,canvasHeight)}else{ctx.lineTo(prevX,canvasHeight)}}prevX=prevY=null}}ctx.lineTo(canvasWidth,canvasHeight);ctx.closePath();if(fillStyle){var lingrad=this.bgcanvas_ctx_.createLinearGradient(0,0,0,canvasHeight);if(fillGradientStyle){lingrad.addColorStop(0,fillGradientStyle)}lingrad.addColorStop(1,fillStyle);this.bgcanvas_ctx_.fillStyle=lingrad;ctx.fill()}if(strokeStyle){this.bgcanvas_ctx_.strokeStyle=strokeStyle;this.bgcanvas_ctx_.lineWidth=this.getOption_("rangeSelectorPlotLineWidth");ctx.stroke()}};rangeSelector.prototype.computeCombinedSeriesAndLimits_=function(){var g=this.dygraph_;var logscale=this.getOption_("logscale");var i;var numColumns=g.numColumns();var labels=g.getLabels();var includeSeries=new Array(numColumns);var anySet=false;var visibility=g.visibility();var inclusion=[];for(i=1;i<numColumns;i++){var include=this.getOption_("showInRangeSelector",labels[i]);inclusion.push(include);if(include!==null)anySet=true}if(anySet){for(i=1;i<numColumns;i++){includeSeries[i]=inclusion[i-1]}}else{for(i=1;i<numColumns;i++){includeSeries[i]=visibility[i-1]}}var rolledSeries=[];var dataHandler=g.dataHandler_;var options=g.attributes_;for(i=1;i<g.numColumns();i++){if(!includeSeries[i])continue;var series=dataHandler.extractSeries(g.rawData_,i,options);if(g.rollPeriod()>1){series=dataHandler.rollingAverage(series,g.rollPeriod(),options)}rolledSeries.push(series)}var combinedSeries=[];for(i=0;i<rolledSeries[0].length;i++){var sum=0;var count=0;for(var j=0;j<rolledSeries.length;j++){var y=rolledSeries[j][i][1];if(y===null||isNaN(y))continue;count++;sum+=y}combinedSeries.push([rolledSeries[0][i][0],sum/count])}var yMin=Number.MAX_VALUE;var yMax=-Number.MAX_VALUE;for(i=0;i<combinedSeries.length;i++){var yVal=combinedSeries[i][1];if(yVal!==null&&isFinite(yVal)&&(!logscale||yVal>0)){yMin=Math.min(yMin,yVal);yMax=Math.max(yMax,yVal)}}var extraPercent=.25;if(logscale){yMax=utils.log10(yMax);yMax+=yMax*extraPercent;yMin=utils.log10(yMin);for(i=0;i<combinedSeries.length;i++){combinedSeries[i][1]=utils.log10(combinedSeries[i][1])}}else{var yExtra;var yRange=yMax-yMin;if(yRange<=Number.MIN_VALUE){yExtra=yMax*extraPercent}else{yExtra=yRange*extraPercent}yMax+=yExtra;yMin-=yExtra}return{data:combinedSeries,yMin:yMin,yMax:yMax}};rangeSelector.prototype.placeZoomHandles_=function(){var xExtremes=this.dygraph_.xAxisExtremes();var xWindowLimits=this.dygraph_.xAxisRange();var xRange=xExtremes[1]-xExtremes[0];var leftPercent=Math.max(0,(xWindowLimits[0]-xExtremes[0])/xRange);var rightPercent=Math.max(0,(xExtremes[1]-xWindowLimits[1])/xRange);var leftCoord=this.canvasRect_.x+this.canvasRect_.w*leftPercent;var rightCoord=this.canvasRect_.x+this.canvasRect_.w*(1-rightPercent);var handleTop=Math.max(this.canvasRect_.y,this.canvasRect_.y+(this.canvasRect_.h-this.leftZoomHandle_.height)/2);var halfHandleWidth=this.leftZoomHandle_.width/2;this.leftZoomHandle_.style.left=leftCoord-halfHandleWidth+"px";this.leftZoomHandle_.style.top=handleTop+"px";this.rightZoomHandle_.style.left=rightCoord-halfHandleWidth+"px";this.rightZoomHandle_.style.top=this.leftZoomHandle_.style.top;this.leftZoomHandle_.style.visibility="visible";this.rightZoomHandle_.style.visibility="visible"};rangeSelector.prototype.drawInteractiveLayer_=function(){var ctx=this.fgcanvas_ctx_;ctx.clearRect(0,0,this.canvasRect_.w,this.canvasRect_.h);var margin=1;var width=this.canvasRect_.w-margin;var height=this.canvasRect_.h-margin;var zoomHandleStatus=this.getZoomHandleStatus_();ctx.strokeStyle=this.getOption_("rangeSelectorForegroundStrokeColor");ctx.lineWidth=this.getOption_("rangeSelectorForegroundLineWidth");if(!zoomHandleStatus.isZoomed){ctx.beginPath();ctx.moveTo(margin,margin);ctx.lineTo(margin,height);ctx.lineTo(width,height);ctx.lineTo(width,margin);ctx.stroke()}else{var leftHandleCanvasPos=Math.max(margin,zoomHandleStatus.leftHandlePos-this.canvasRect_.x);var rightHandleCanvasPos=Math.min(width,zoomHandleStatus.rightHandlePos-this.canvasRect_.x);ctx.fillStyle="rgba(240, 240, 240, "+this.getOption_("rangeSelectorAlpha").toString()+")";ctx.fillRect(0,0,leftHandleCanvasPos,this.canvasRect_.h);ctx.fillRect(rightHandleCanvasPos,0,this.canvasRect_.w-rightHandleCanvasPos,this.canvasRect_.h);ctx.beginPath();ctx.moveTo(margin,margin);ctx.lineTo(leftHandleCanvasPos,margin);ctx.lineTo(leftHandleCanvasPos,height);ctx.lineTo(rightHandleCanvasPos,height);ctx.lineTo(rightHandleCanvasPos,margin);ctx.lineTo(width,margin);ctx.stroke()}};rangeSelector.prototype.getZoomHandleStatus_=function(){var halfHandleWidth=this.leftZoomHandle_.width/2;var leftHandlePos=parseFloat(this.leftZoomHandle_.style.left)+halfHandleWidth;var rightHandlePos=parseFloat(this.rightZoomHandle_.style.left)+halfHandleWidth;return{leftHandlePos:leftHandlePos,rightHandlePos:rightHandlePos,isZoomed:leftHandlePos-1>this.canvasRect_.x||rightHandlePos+1<this.canvasRect_.x+this.canvasRect_.w}};exports["default"]=rangeSelector;module.exports=exports["default"]},{"../dygraph-interaction-model":20,"../dygraph-utils":25,"../iframe-tarp":27}],34:[function(require,module,exports){(function($){$.support.touch="ontouchend"in document;if(!$.support.touch){return}var mouseProto=$.ui.mouse.prototype,_mouseInit=mouseProto._mouseInit,_mouseDestroy=mouseProto._mouseDestroy,touchHandled;function simulateMouseEvent(event,simulatedType){if(event.originalEvent.touches.length>1){return}event.preventDefault();var touch=event.originalEvent.changedTouches[0],simulatedEvent=document.createEvent("MouseEvents");simulatedEvent.initMouseEvent(simulatedType,true,true,window,1,touch.screenX,touch.screenY,touch.clientX,touch.clientY,false,false,false,false,0,null);event.target.dispatchEvent(simulatedEvent)}mouseProto._touchStart=function(event){var self=this;if(touchHandled||!self._mouseCapture(event.originalEvent.changedTouches[0])){return}touchHandled=true;self._touchMoved=false;simulateMouseEvent(event,"mouseover");simulateMouseEvent(event,"mousemove");simulateMouseEvent(event,"mousedown")};mouseProto._touchMove=function(event){if(!touchHandled){return}this._touchMoved=true;simulateMouseEvent(event,"mousemove")};mouseProto._touchEnd=function(event){if(!touchHandled){return}simulateMouseEvent(event,"mouseup");simulateMouseEvent(event,"mouseout");if(!this._touchMoved){simulateMouseEvent(event,"click")}touchHandled=false};mouseProto._mouseInit=function(){var self=this;self.element.bind({touchstart:$.proxy(self,"_touchStart"),touchmove:$.proxy(self,"_touchMove"),touchend:$.proxy(self,"_touchEnd")});_mouseInit.call(self)};mouseProto._mouseDestroy=function(){var self=this;self.element.unbind({touchstart:$.proxy(self,"_touchStart"),touchmove:$.proxy(self,"_touchMove"),touchend:$.proxy(self,"_touchEnd")});_mouseDestroy.call(self)}})(jQuery)},{}],35:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype);subClass.prototype.constructor=subClass;_setPrototypeOf(subClass,superClass)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}function _construct(Parent,args,Class){if(_isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _createForOfIteratorHelperLoose(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(it)return(it=it.call(o)).next.bind(it);if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;return function(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var LuxonError=function(_Error){_inheritsLoose(LuxonError,_Error);function LuxonError(){return _Error.apply(this,arguments)||this}return LuxonError}(_wrapNativeSuper(Error));var InvalidDateTimeError=function(_LuxonError){_inheritsLoose(InvalidDateTimeError,_LuxonError);function InvalidDateTimeError(reason){return _LuxonError.call(this,"Invalid DateTime: "+reason.toMessage())||this}return InvalidDateTimeError}(LuxonError);var InvalidIntervalError=function(_LuxonError2){_inheritsLoose(InvalidIntervalError,_LuxonError2);function InvalidIntervalError(reason){return _LuxonError2.call(this,"Invalid Interval: "+reason.toMessage())||this}return InvalidIntervalError}(LuxonError);var InvalidDurationError=function(_LuxonError3){_inheritsLoose(InvalidDurationError,_LuxonError3);function InvalidDurationError(reason){return _LuxonError3.call(this,"Invalid Duration: "+reason.toMessage())||this}return InvalidDurationError}(LuxonError);var ConflictingSpecificationError=function(_LuxonError4){_inheritsLoose(ConflictingSpecificationError,_LuxonError4);function ConflictingSpecificationError(){return _LuxonError4.apply(this,arguments)||this}return ConflictingSpecificationError}(LuxonError);var InvalidUnitError=function(_LuxonError5){_inheritsLoose(InvalidUnitError,_LuxonError5);function InvalidUnitError(unit){return _LuxonError5.call(this,"Invalid unit "+unit)||this}return InvalidUnitError}(LuxonError);var InvalidArgumentError=function(_LuxonError6){_inheritsLoose(InvalidArgumentError,_LuxonError6);function InvalidArgumentError(){return _LuxonError6.apply(this,arguments)||this}return InvalidArgumentError}(LuxonError);var ZoneIsAbstractError=function(_LuxonError7){_inheritsLoose(ZoneIsAbstractError,_LuxonError7);function ZoneIsAbstractError(){return _LuxonError7.call(this,"Zone is an abstract class")||this}return ZoneIsAbstractError}(LuxonError);var n="numeric",s="short",l="long";var DATE_SHORT={year:n,month:n,day:n};var DATE_MED={year:n,month:s,day:n};var DATE_MED_WITH_WEEKDAY={year:n,month:s,day:n,weekday:s};var DATE_FULL={year:n,month:l,day:n};var DATE_HUGE={year:n,month:l,day:n,weekday:l};var TIME_SIMPLE={hour:n,minute:n};var TIME_WITH_SECONDS={hour:n,minute:n,second:n};var TIME_WITH_SHORT_OFFSET={hour:n,minute:n,second:n,timeZoneName:s};var TIME_WITH_LONG_OFFSET={hour:n,minute:n,second:n,timeZoneName:l};var TIME_24_SIMPLE={hour:n,minute:n,hourCycle:"h23"};var TIME_24_WITH_SECONDS={hour:n,minute:n,second:n,hourCycle:"h23"};var TIME_24_WITH_SHORT_OFFSET={hour:n,minute:n,second:n,hourCycle:"h23",timeZoneName:s};var TIME_24_WITH_LONG_OFFSET={hour:n,minute:n,second:n,hourCycle:"h23",timeZoneName:l};var DATETIME_SHORT={year:n,month:n,day:n,hour:n,minute:n};var DATETIME_SHORT_WITH_SECONDS={year:n,month:n,day:n,hour:n,minute:n,second:n};var DATETIME_MED={year:n,month:s,day:n,hour:n,minute:n};var DATETIME_MED_WITH_SECONDS={year:n,month:s,day:n,hour:n,minute:n,second:n};var DATETIME_MED_WITH_WEEKDAY={year:n,month:s,day:n,weekday:s,hour:n,minute:n};var DATETIME_FULL={year:n,month:l,day:n,hour:n,minute:n,timeZoneName:s};var DATETIME_FULL_WITH_SECONDS={year:n,month:l,day:n,hour:n,minute:n,second:n,timeZoneName:s};var DATETIME_HUGE={year:n,month:l,day:n,weekday:l,hour:n,minute:n,timeZoneName:l};var DATETIME_HUGE_WITH_SECONDS={year:n,month:l,day:n,weekday:l,hour:n,minute:n,second:n,timeZoneName:l};function isUndefined(o){return typeof o==="undefined"}function isNumber(o){return typeof o==="number"}function isInteger(o){return typeof o==="number"&&o%1===0}function isString(o){return typeof o==="string"}function isDate(o){return Object.prototype.toString.call(o)==="[object Date]"}function hasRelative(){try{return typeof Intl!=="undefined"&&!!Intl.RelativeTimeFormat}catch(e){return false}}function maybeArray(thing){return Array.isArray(thing)?thing:[thing]}function bestBy(arr,by,compare){if(arr.length===0){return undefined}return arr.reduce(function(best,next){var pair=[by(next),next];if(!best){return pair}else if(compare(best[0],pair[0])===best[0]){return best}else{return pair}},null)[1]}function pick(obj,keys){return keys.reduce(function(a,k){a[k]=obj[k];return a},{})}function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}function integerBetween(thing,bottom,top){return isInteger(thing)&&thing>=bottom&&thing<=top}function floorMod(x,n){return x-n*Math.floor(x/n)}function padStart(input,n){if(n===void 0){n=2}var isNeg=input<0;var padded;if(isNeg){padded="-"+(""+-input).padStart(n,"0")}else{padded=(""+input).padStart(n,"0")}return padded}function parseInteger(string){if(isUndefined(string)||string===null||string===""){return undefined}else{return parseInt(string,10)}}function parseFloating(string){if(isUndefined(string)||string===null||string===""){return undefined}else{return parseFloat(string)}}function parseMillis(fraction){if(isUndefined(fraction)||fraction===null||fraction===""){return undefined}else{var f=parseFloat("0."+fraction)*1e3;return Math.floor(f)}}function roundTo(number,digits,towardZero){if(towardZero===void 0){towardZero=false}var factor=Math.pow(10,digits),rounder=towardZero?Math.trunc:Math.round;return rounder(number*factor)/factor}function isLeapYear(year){return year%4===0&&(year%100!==0||year%400===0)}function daysInYear(year){return isLeapYear(year)?366:365}function daysInMonth(year,month){var modMonth=floorMod(month-1,12)+1,modYear=year+(month-modMonth)/12;if(modMonth===2){return isLeapYear(modYear)?29:28}else{return[31,null,31,30,31,30,31,31,30,31,30,31][modMonth-1]}}function objToLocalTS(obj){var d=Date.UTC(obj.year,obj.month-1,obj.day,obj.hour,obj.minute,obj.second,obj.millisecond);if(obj.year<100&&obj.year>=0){d=new Date(d);d.setUTCFullYear(d.getUTCFullYear()-1900)}return+d}function weeksInWeekYear(weekYear){var p1=(weekYear+Math.floor(weekYear/4)-Math.floor(weekYear/100)+Math.floor(weekYear/400))%7,last=weekYear-1,p2=(last+Math.floor(last/4)-Math.floor(last/100)+Math.floor(last/400))%7;return p1===4||p2===3?53:52}function untruncateYear(year){if(year>99){return year}else return year>60?1900+year:2e3+year}function parseZoneInfo(ts,offsetFormat,locale,timeZone){if(timeZone===void 0){timeZone=null}var date=new Date(ts),intlOpts={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};if(timeZone){intlOpts.timeZone=timeZone}var modified=_extends({timeZoneName:offsetFormat},intlOpts);var parsed=new Intl.DateTimeFormat(locale,modified).formatToParts(date).find(function(m){return m.type.toLowerCase()==="timezonename"});return parsed?parsed.value:null}function signedOffset(offHourStr,offMinuteStr){var offHour=parseInt(offHourStr,10);if(Number.isNaN(offHour)){offHour=0}var offMin=parseInt(offMinuteStr,10)||0,offMinSigned=offHour<0||Object.is(offHour,-0)?-offMin:offMin;return offHour*60+offMinSigned}function asNumber(value){var numericValue=Number(value);if(typeof value==="boolean"||value===""||Number.isNaN(numericValue))throw new InvalidArgumentError("Invalid unit value "+value);return numericValue}function normalizeObject(obj,normalizer){var normalized={};for(var u in obj){if(hasOwnProperty(obj,u)){var v=obj[u];if(v===undefined||v===null)continue;normalized[normalizer(u)]=asNumber(v)}}return normalized}function formatOffset(offset,format){var hours=Math.trunc(Math.abs(offset/60)),minutes=Math.trunc(Math.abs(offset%60)),sign=offset>=0?"+":"-";switch(format){case"short":return""+sign+padStart(hours,2)+":"+padStart(minutes,2);case"narrow":return""+sign+hours+(minutes>0?":"+minutes:"");case"techie":return""+sign+padStart(hours,2)+padStart(minutes,2);default:throw new RangeError("Value format "+format+" is out of range for property format")}}function timeObject(obj){return pick(obj,["hour","minute","second","millisecond"])}var ianaRegex=/[A-Za-z_+-]{1,256}(:?\/[A-Za-z0-9_+-]{1,256}(\/[A-Za-z0-9_+-]{1,256})?)?/;var monthsLong=["January","February","March","April","May","June","July","August","September","October","November","December"];var monthsShort=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var monthsNarrow=["J","F","M","A","M","J","J","A","S","O","N","D"];function months(length){switch(length){case"narrow":return[].concat(monthsNarrow);case"short":return[].concat(monthsShort);case"long":return[].concat(monthsLong);case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var weekdaysLong=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];var weekdaysShort=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];var weekdaysNarrow=["M","T","W","T","F","S","S"];function weekdays(length){switch(length){case"narrow":return[].concat(weekdaysNarrow);case"short":return[].concat(weekdaysShort);case"long":return[].concat(weekdaysLong);case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var meridiems=["AM","PM"];var erasLong=["Before Christ","Anno Domini"];var erasShort=["BC","AD"];var erasNarrow=["B","A"];function eras(length){switch(length){case"narrow":return[].concat(erasNarrow);case"short":return[].concat(erasShort);case"long":return[].concat(erasLong);default:return null}}function meridiemForDateTime(dt){return meridiems[dt.hour<12?0:1]}function weekdayForDateTime(dt,length){return weekdays(length)[dt.weekday-1]}function monthForDateTime(dt,length){return months(length)[dt.month-1]}function eraForDateTime(dt,length){return eras(length)[dt.year<0?0:1]}function formatRelativeTime(unit,count,numeric,narrow){if(numeric===void 0){numeric="always"}if(narrow===void 0){narrow=false}var units={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]};var lastable=["hours","minutes","seconds"].indexOf(unit)===-1;if(numeric==="auto"&&lastable){var isDay=unit==="days";switch(count){case 1:return isDay?"tomorrow":"next "+units[unit][0];case-1:return isDay?"yesterday":"last "+units[unit][0];case 0:return isDay?"today":"this "+units[unit][0]}}var isInPast=Object.is(count,-0)||count<0,fmtValue=Math.abs(count),singular=fmtValue===1,lilUnits=units[unit],fmtUnit=narrow?singular?lilUnits[1]:lilUnits[2]||lilUnits[1]:singular?units[unit][0]:unit;return isInPast?fmtValue+" "+fmtUnit+" ago":"in "+fmtValue+" "+fmtUnit}function stringifyTokens(splits,tokenToString){var s="";for(var _iterator=_createForOfIteratorHelperLoose(splits),_step;!(_step=_iterator()).done;){var token=_step.value;if(token.literal){s+=token.val}else{s+=tokenToString(token.val)}}return s}var _macroTokenToFormatOpts={D:DATE_SHORT,DD:DATE_MED,DDD:DATE_FULL,DDDD:DATE_HUGE,t:TIME_SIMPLE,tt:TIME_WITH_SECONDS,ttt:TIME_WITH_SHORT_OFFSET,tttt:TIME_WITH_LONG_OFFSET,T:TIME_24_SIMPLE,TT:TIME_24_WITH_SECONDS,TTT:TIME_24_WITH_SHORT_OFFSET,TTTT:TIME_24_WITH_LONG_OFFSET,f:DATETIME_SHORT,ff:DATETIME_MED,fff:DATETIME_FULL,ffff:DATETIME_HUGE,F:DATETIME_SHORT_WITH_SECONDS,FF:DATETIME_MED_WITH_SECONDS,FFF:DATETIME_FULL_WITH_SECONDS,FFFF:DATETIME_HUGE_WITH_SECONDS};var Formatter=function(){Formatter.create=function create(locale,opts){if(opts===void 0){opts={}}return new Formatter(locale,opts)};Formatter.parseFormat=function parseFormat(fmt){var current=null,currentFull="",bracketed=false;var splits=[];for(var i=0;i<fmt.length;i++){var c=fmt.charAt(i);if(c==="'"){if(currentFull.length>0){splits.push({literal:bracketed,val:currentFull})}current=null;currentFull="";bracketed=!bracketed}else if(bracketed){currentFull+=c}else if(c===current){currentFull+=c}else{if(currentFull.length>0){splits.push({literal:false,val:currentFull})}currentFull=c;current=c}}if(currentFull.length>0){splits.push({literal:bracketed,val:currentFull})}return splits};Formatter.macroTokenToFormatOpts=function macroTokenToFormatOpts(token){return _macroTokenToFormatOpts[token]};function Formatter(locale,formatOpts){this.opts=formatOpts;this.loc=locale;this.systemLoc=null}var _proto=Formatter.prototype;_proto.formatWithSystemDefault=function formatWithSystemDefault(dt,opts){if(this.systemLoc===null){this.systemLoc=this.loc.redefaultToSystem()}var df=this.systemLoc.dtFormatter(dt,_extends({},this.opts,opts));return df.format()};_proto.formatDateTime=function formatDateTime(dt,opts){if(opts===void 0){opts={}}var df=this.loc.dtFormatter(dt,_extends({},this.opts,opts));return df.format()};_proto.formatDateTimeParts=function formatDateTimeParts(dt,opts){if(opts===void 0){opts={}}var df=this.loc.dtFormatter(dt,_extends({},this.opts,opts));return df.formatToParts()};_proto.resolvedOptions=function resolvedOptions(dt,opts){if(opts===void 0){opts={}}var df=this.loc.dtFormatter(dt,_extends({},this.opts,opts));return df.resolvedOptions()};_proto.num=function num(n,p){if(p===void 0){p=0}if(this.opts.forceSimple){return padStart(n,p)}var opts=_extends({},this.opts);if(p>0){opts.padTo=p}return this.loc.numberFormatter(opts).format(n)};_proto.formatDateTimeFromString=function formatDateTimeFromString(dt,fmt){var _this=this;var knownEnglish=this.loc.listingMode()==="en",useDateTimeFormatter=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",string=function string(opts,extract){return _this.loc.extract(dt,opts,extract)},formatOffset=function formatOffset(opts){if(dt.isOffsetFixed&&dt.offset===0&&opts.allowZ){return"Z"}return dt.isValid?dt.zone.formatOffset(dt.ts,opts.format):""},meridiem=function meridiem(){return knownEnglish?meridiemForDateTime(dt):string({hour:"numeric",hourCycle:"h12"},"dayperiod")},month=function month(length,standalone){return knownEnglish?monthForDateTime(dt,length):string(standalone?{month:length}:{month:length,day:"numeric"},"month")},weekday=function weekday(length,standalone){return knownEnglish?weekdayForDateTime(dt,length):string(standalone?{weekday:length}:{weekday:length,month:"long",day:"numeric"},"weekday")},maybeMacro=function maybeMacro(token){var formatOpts=Formatter.macroTokenToFormatOpts(token);if(formatOpts){return _this.formatWithSystemDefault(dt,formatOpts)}else{return token}},era=function era(length){return knownEnglish?eraForDateTime(dt,length):string({era:length},"era")},tokenToString=function tokenToString(token){switch(token){case"S":return _this.num(dt.millisecond);case"u":case"SSS":return _this.num(dt.millisecond,3);case"s":return _this.num(dt.second);case"ss":return _this.num(dt.second,2);case"uu":return _this.num(Math.floor(dt.millisecond/10),2);case"uuu":return _this.num(Math.floor(dt.millisecond/100));case"m":return _this.num(dt.minute);case"mm":return _this.num(dt.minute,2);case"h":return _this.num(dt.hour%12===0?12:dt.hour%12);case"hh":return _this.num(dt.hour%12===0?12:dt.hour%12,2);case"H":return _this.num(dt.hour);case"HH":return _this.num(dt.hour,2);case"Z":return formatOffset({format:"narrow",allowZ:_this.opts.allowZ});case"ZZ":return formatOffset({format:"short",allowZ:_this.opts.allowZ});case"ZZZ":return formatOffset({format:"techie",allowZ:_this.opts.allowZ});case"ZZZZ":return dt.zone.offsetName(dt.ts,{format:"short",locale:_this.loc.locale});case"ZZZZZ":return dt.zone.offsetName(dt.ts,{format:"long",locale:_this.loc.locale});case"z":return dt.zoneName;case"a":return meridiem();case"d":return useDateTimeFormatter?string({day:"numeric"},"day"):_this.num(dt.day);case"dd":return useDateTimeFormatter?string({day:"2-digit"},"day"):_this.num(dt.day,2);case"c":return _this.num(dt.weekday);case"ccc":return weekday("short",true);case"cccc":return weekday("long",true);case"ccccc":return weekday("narrow",true);case"E":return _this.num(dt.weekday);case"EEE":return weekday("short",false);case"EEEE":return weekday("long",false);case"EEEEE":return weekday("narrow",false);case"L":return useDateTimeFormatter?string({month:"numeric",day:"numeric"},"month"):_this.num(dt.month);case"LL":return useDateTimeFormatter?string({month:"2-digit",day:"numeric"},"month"):_this.num(dt.month,2);case"LLL":return month("short",true);case"LLLL":return month("long",true);case"LLLLL":return month("narrow",true);case"M":return useDateTimeFormatter?string({month:"numeric"},"month"):_this.num(dt.month);case"MM":return useDateTimeFormatter?string({month:"2-digit"},"month"):_this.num(dt.month,2);case"MMM":return month("short",false);case"MMMM":return month("long",false);case"MMMMM":return month("narrow",false);case"y":return useDateTimeFormatter?string({year:"numeric"},"year"):_this.num(dt.year);case"yy":return useDateTimeFormatter?string({year:"2-digit"},"year"):_this.num(dt.year.toString().slice(-2),2);case"yyyy":return useDateTimeFormatter?string({year:"numeric"},"year"):_this.num(dt.year,4);case"yyyyyy":return useDateTimeFormatter?string({year:"numeric"},"year"):_this.num(dt.year,6);case"G":return era("short");case"GG":return era("long");case"GGGGG":return era("narrow");case"kk":return _this.num(dt.weekYear.toString().slice(-2),2);case"kkkk":return _this.num(dt.weekYear,4);case"W":return _this.num(dt.weekNumber);case"WW":return _this.num(dt.weekNumber,2);case"o":return _this.num(dt.ordinal);case"ooo":return _this.num(dt.ordinal,3);case"q":return _this.num(dt.quarter);case"qq":return _this.num(dt.quarter,2);case"X":return _this.num(Math.floor(dt.ts/1e3));case"x":return _this.num(dt.ts);default:return maybeMacro(token)}};return stringifyTokens(Formatter.parseFormat(fmt),tokenToString)};_proto.formatDurationFromString=function formatDurationFromString(dur,fmt){var _this2=this;var tokenToField=function tokenToField(token){switch(token[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"M":return"month";case"y":return"year";default:return null}},tokenToString=function tokenToString(lildur){return function(token){var mapped=tokenToField(token);if(mapped){return _this2.num(lildur.get(mapped),token.length)}else{return token}}},tokens=Formatter.parseFormat(fmt),realTokens=tokens.reduce(function(found,_ref){var literal=_ref.literal,val=_ref.val;return literal?found:found.concat(val)},[]),collapsed=dur.shiftTo.apply(dur,realTokens.map(tokenToField).filter(function(t){return t}));return stringifyTokens(tokens,tokenToString(collapsed))};return Formatter}();var Invalid=function(){function Invalid(reason,explanation){this.reason=reason;this.explanation=explanation}var _proto=Invalid.prototype;_proto.toMessage=function toMessage(){if(this.explanation){return this.reason+": "+this.explanation}else{return this.reason}};return Invalid}();var Zone=function(){function Zone(){}var _proto=Zone.prototype;_proto.offsetName=function offsetName(ts,opts){throw new ZoneIsAbstractError};_proto.formatOffset=function formatOffset(ts,format){throw new ZoneIsAbstractError};_proto.offset=function offset(ts){throw new ZoneIsAbstractError};_proto.equals=function equals(otherZone){throw new ZoneIsAbstractError};_createClass(Zone,[{key:"type",get:function get(){throw new ZoneIsAbstractError}},{key:"name",get:function get(){throw new ZoneIsAbstractError}},{key:"isUniversal",get:function get(){throw new ZoneIsAbstractError}},{key:"isValid",get:function get(){throw new ZoneIsAbstractError}}]);return Zone}();var singleton$1=null;var SystemZone=function(_Zone){_inheritsLoose(SystemZone,_Zone);function SystemZone(){return _Zone.apply(this,arguments)||this}var _proto=SystemZone.prototype;_proto.offsetName=function offsetName(ts,_ref){var format=_ref.format,locale=_ref.locale;return parseZoneInfo(ts,format,locale)};_proto.formatOffset=function formatOffset$1(ts,format){return formatOffset(this.offset(ts),format)};_proto.offset=function offset(ts){return-new Date(ts).getTimezoneOffset()};_proto.equals=function equals(otherZone){return otherZone.type==="system"};_createClass(SystemZone,[{key:"type",get:function get(){return"system"}},{key:"name",get:function get(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}},{key:"isUniversal",get:function get(){return false}},{key:"isValid",get:function get(){return true}}],[{key:"instance",get:function get(){if(singleton$1===null){singleton$1=new SystemZone}return singleton$1}}]);return SystemZone}(Zone);var matchingRegex=RegExp("^"+ianaRegex.source+"$");var dtfCache={};function makeDTF(zone){if(!dtfCache[zone]){dtfCache[zone]=new Intl.DateTimeFormat("en-US",{hour12:false,timeZone:zone,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return dtfCache[zone]}var typeToPos={year:0,month:1,day:2,hour:3,minute:4,second:5};function hackyOffset(dtf,date){var formatted=dtf.format(date).replace(/\u200E/g,""),parsed=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(formatted),fMonth=parsed[1],fDay=parsed[2],fYear=parsed[3],fHour=parsed[4],fMinute=parsed[5],fSecond=parsed[6];return[fYear,fMonth,fDay,fHour,fMinute,fSecond]}function partsOffset(dtf,date){var formatted=dtf.formatToParts(date),filled=[];for(var i=0;i<formatted.length;i++){var _formatted$i=formatted[i],type=_formatted$i.type,value=_formatted$i.value,pos=typeToPos[type];if(!isUndefined(pos)){filled[pos]=parseInt(value,10)}}return filled}var ianaZoneCache={};var IANAZone=function(_Zone){_inheritsLoose(IANAZone,_Zone);IANAZone.create=function create(name){if(!ianaZoneCache[name]){ianaZoneCache[name]=new IANAZone(name)}return ianaZoneCache[name]};IANAZone.resetCache=function resetCache(){ianaZoneCache={};dtfCache={}};IANAZone.isValidSpecifier=function isValidSpecifier(s){return!!(s&&s.match(matchingRegex))};IANAZone.isValidZone=function isValidZone(zone){if(!zone){return false}try{new Intl.DateTimeFormat("en-US",{timeZone:zone}).format();return true}catch(e){return false}};function IANAZone(name){var _this;_this=_Zone.call(this)||this;_this.zoneName=name;_this.valid=IANAZone.isValidZone(name);return _this}var _proto=IANAZone.prototype;_proto.offsetName=function offsetName(ts,_ref){var format=_ref.format,locale=_ref.locale;return parseZoneInfo(ts,format,locale,this.name)};_proto.formatOffset=function formatOffset$1(ts,format){return formatOffset(this.offset(ts),format)};_proto.offset=function offset(ts){var date=new Date(ts);if(isNaN(date))return NaN;var dtf=makeDTF(this.name),_ref2=dtf.formatToParts?partsOffset(dtf,date):hackyOffset(dtf,date),year=_ref2[0],month=_ref2[1],day=_ref2[2],hour=_ref2[3],minute=_ref2[4],second=_ref2[5];var adjustedHour=hour===24?0:hour;var asUTC=objToLocalTS({year:year,month:month,day:day,hour:adjustedHour,minute:minute,second:second,millisecond:0});var asTS=+date;var over=asTS%1e3;asTS-=over>=0?over:1e3+over;return(asUTC-asTS)/(60*1e3)};_proto.equals=function equals(otherZone){return otherZone.type==="iana"&&otherZone.name===this.name};_createClass(IANAZone,[{key:"type",get:function get(){return"iana"}},{key:"name",get:function get(){return this.zoneName}},{key:"isUniversal",get:function get(){return false}},{key:"isValid",get:function get(){return this.valid}}]);return IANAZone}(Zone);var singleton=null;var FixedOffsetZone=function(_Zone){_inheritsLoose(FixedOffsetZone,_Zone);FixedOffsetZone.instance=function instance(offset){return offset===0?FixedOffsetZone.utcInstance:new FixedOffsetZone(offset)};FixedOffsetZone.parseSpecifier=function parseSpecifier(s){if(s){var r=s.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r){return new FixedOffsetZone(signedOffset(r[1],r[2]))}}return null};function FixedOffsetZone(offset){var _this;_this=_Zone.call(this)||this;_this.fixed=offset;return _this}var _proto=FixedOffsetZone.prototype;_proto.offsetName=function offsetName(){return this.name};_proto.formatOffset=function formatOffset$1(ts,format){return formatOffset(this.fixed,format)};_proto.offset=function offset(){return this.fixed};_proto.equals=function equals(otherZone){return otherZone.type==="fixed"&&otherZone.fixed===this.fixed};_createClass(FixedOffsetZone,[{key:"type",get:function get(){return"fixed"}},{key:"name",get:function get(){return this.fixed===0?"UTC":"UTC"+formatOffset(this.fixed,"narrow")}},{key:"isUniversal",get:function get(){return true}},{key:"isValid",get:function get(){return true}}],[{key:"utcInstance",get:function get(){if(singleton===null){singleton=new FixedOffsetZone(0)}return singleton}}]);return FixedOffsetZone}(Zone);var InvalidZone=function(_Zone){_inheritsLoose(InvalidZone,_Zone);function InvalidZone(zoneName){var _this;_this=_Zone.call(this)||this;_this.zoneName=zoneName;return _this}var _proto=InvalidZone.prototype;_proto.offsetName=function offsetName(){return null};_proto.formatOffset=function formatOffset(){return""};_proto.offset=function offset(){return NaN};_proto.equals=function equals(){return false};_createClass(InvalidZone,[{key:"type",get:function get(){return"invalid"}},{key:"name",get:function get(){return this.zoneName}},{key:"isUniversal",get:function get(){return false}},{key:"isValid",get:function get(){return false}}]);return InvalidZone}(Zone);function normalizeZone(input,defaultZone){if(isUndefined(input)||input===null){return defaultZone}else if(input instanceof Zone){return input}else if(isString(input)){var lowered=input.toLowerCase();if(lowered==="local"||lowered==="system")return defaultZone;else if(lowered==="utc"||lowered==="gmt")return FixedOffsetZone.utcInstance;else if(IANAZone.isValidSpecifier(lowered))return IANAZone.create(input);else return FixedOffsetZone.parseSpecifier(lowered)||new InvalidZone(input)}else if(isNumber(input)){return FixedOffsetZone.instance(input)}else if(typeof input==="object"&&input.offset&&typeof input.offset==="number"){return input}else{return new InvalidZone(input)}}var now=function now(){return Date.now()},defaultZone="system",defaultLocale=null,defaultNumberingSystem=null,defaultOutputCalendar=null,throwOnInvalid;var Settings=function(){function Settings(){}Settings.resetCaches=function resetCaches(){Locale.resetCache();IANAZone.resetCache()};_createClass(Settings,null,[{key:"now",get:function get(){return now},set:function set(n){now=n}},{key:"defaultZone",get:function get(){return normalizeZone(defaultZone,SystemZone.instance)},set:function set(zone){defaultZone=zone}},{key:"defaultLocale",get:function get(){return defaultLocale},set:function set(locale){defaultLocale=locale}},{key:"defaultNumberingSystem",get:function get(){return defaultNumberingSystem},set:function set(numberingSystem){defaultNumberingSystem=numberingSystem}},{key:"defaultOutputCalendar",get:function get(){return defaultOutputCalendar},set:function set(outputCalendar){defaultOutputCalendar=outputCalendar}},{key:"throwOnInvalid",get:function get(){return throwOnInvalid},set:function set(t){throwOnInvalid=t}}]);return Settings}();var _excluded=["base"],_excluded2=["padTo","floor"];var intlLFCache={};function getCachedLF(locString,opts){if(opts===void 0){opts={}}var key=JSON.stringify([locString,opts]);var dtf=intlLFCache[key];if(!dtf){dtf=new Intl.ListFormat(locString,opts);intlLFCache[key]=dtf}return dtf}var intlDTCache={};function getCachedDTF(locString,opts){if(opts===void 0){opts={}}var key=JSON.stringify([locString,opts]);var dtf=intlDTCache[key];if(!dtf){dtf=new Intl.DateTimeFormat(locString,opts);intlDTCache[key]=dtf}return dtf}var intlNumCache={};function getCachedINF(locString,opts){if(opts===void 0){opts={}}var key=JSON.stringify([locString,opts]);var inf=intlNumCache[key];if(!inf){inf=new Intl.NumberFormat(locString,opts);intlNumCache[key]=inf}return inf}var intlRelCache={};function getCachedRTF(locString,opts){if(opts===void 0){opts={}}var _opts=opts;_opts.base;var cacheKeyOpts=_objectWithoutPropertiesLoose(_opts,_excluded);var key=JSON.stringify([locString,cacheKeyOpts]);var inf=intlRelCache[key];if(!inf){inf=new Intl.RelativeTimeFormat(locString,opts);intlRelCache[key]=inf}return inf}var sysLocaleCache=null;function systemLocale(){if(sysLocaleCache){return sysLocaleCache}else{sysLocaleCache=(new Intl.DateTimeFormat).resolvedOptions().locale;return sysLocaleCache}}function parseLocaleString(localeStr){var uIndex=localeStr.indexOf("-u-");if(uIndex===-1){return[localeStr]}else{var options;var smaller=localeStr.substring(0,uIndex);try{options=getCachedDTF(localeStr).resolvedOptions()}catch(e){options=getCachedDTF(smaller).resolvedOptions()}var _options=options,numberingSystem=_options.numberingSystem,calendar=_options.calendar;return[smaller,numberingSystem,calendar]}}function intlConfigString(localeStr,numberingSystem,outputCalendar){if(outputCalendar||numberingSystem){localeStr+="-u";if(outputCalendar){localeStr+="-ca-"+outputCalendar}if(numberingSystem){localeStr+="-nu-"+numberingSystem}return localeStr}else{return localeStr}}function mapMonths(f){var ms=[];for(var i=1;i<=12;i++){var dt=DateTime.utc(2016,i,1);ms.push(f(dt))}return ms}function mapWeekdays(f){var ms=[];for(var i=1;i<=7;i++){var dt=DateTime.utc(2016,11,13+i);ms.push(f(dt))}return ms}function listStuff(loc,length,defaultOK,englishFn,intlFn){var mode=loc.listingMode(defaultOK);if(mode==="error"){return null}else if(mode==="en"){return englishFn(length)}else{return intlFn(length)}}function supportsFastNumbers(loc){if(loc.numberingSystem&&loc.numberingSystem!=="latn"){return false}else{return loc.numberingSystem==="latn"||!loc.locale||loc.locale.startsWith("en")||new Intl.DateTimeFormat(loc.intl).resolvedOptions().numberingSystem==="latn"}}var PolyNumberFormatter=function(){function PolyNumberFormatter(intl,forceSimple,opts){this.padTo=opts.padTo||0;this.floor=opts.floor||false;opts.padTo;opts.floor;var otherOpts=_objectWithoutPropertiesLoose(opts,_excluded2);if(!forceSimple||Object.keys(otherOpts).length>0){var intlOpts=_extends({useGrouping:false},opts);if(opts.padTo>0)intlOpts.minimumIntegerDigits=opts.padTo;this.inf=getCachedINF(intl,intlOpts)}}var _proto=PolyNumberFormatter.prototype;_proto.format=function format(i){if(this.inf){var fixed=this.floor?Math.floor(i):i;return this.inf.format(fixed)}else{var _fixed=this.floor?Math.floor(i):roundTo(i,3);return padStart(_fixed,this.padTo)}};return PolyNumberFormatter}();var PolyDateFormatter=function(){function PolyDateFormatter(dt,intl,opts){this.opts=opts;var z;if(dt.zone.isUniversal){var gmtOffset=-1*(dt.offset/60);var offsetZ=gmtOffset>=0?"Etc/GMT+"+gmtOffset:"Etc/GMT"+gmtOffset;if(dt.offset!==0&&IANAZone.create(offsetZ).valid){z=offsetZ;this.dt=dt}else{z="UTC";if(opts.timeZoneName){this.dt=dt}else{this.dt=dt.offset===0?dt:DateTime.fromMillis(dt.ts+dt.offset*60*1e3)}}}else if(dt.zone.type==="system"){this.dt=dt}else{this.dt=dt;z=dt.zone.name}var intlOpts=_extends({},this.opts);if(z){intlOpts.timeZone=z}this.dtf=getCachedDTF(intl,intlOpts)}var _proto2=PolyDateFormatter.prototype;_proto2.format=function format(){return this.dtf.format(this.dt.toJSDate())};_proto2.formatToParts=function formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())};_proto2.resolvedOptions=function resolvedOptions(){return this.dtf.resolvedOptions()};return PolyDateFormatter}();var PolyRelFormatter=function(){function PolyRelFormatter(intl,isEnglish,opts){this.opts=_extends({style:"long"},opts);if(!isEnglish&&hasRelative()){this.rtf=getCachedRTF(intl,opts)}}var _proto3=PolyRelFormatter.prototype;_proto3.format=function format(count,unit){if(this.rtf){return this.rtf.format(count,unit)}else{return formatRelativeTime(unit,count,this.opts.numeric,this.opts.style!=="long")}};_proto3.formatToParts=function formatToParts(count,unit){if(this.rtf){return this.rtf.formatToParts(count,unit)}else{return[]}};return PolyRelFormatter}();var Locale=function(){Locale.fromOpts=function fromOpts(opts){return Locale.create(opts.locale,opts.numberingSystem,opts.outputCalendar,opts.defaultToEN)};Locale.create=function create(locale,numberingSystem,outputCalendar,defaultToEN){if(defaultToEN===void 0){defaultToEN=false}var specifiedLocale=locale||Settings.defaultLocale;var localeR=specifiedLocale||(defaultToEN?"en-US":systemLocale());var numberingSystemR=numberingSystem||Settings.defaultNumberingSystem;var outputCalendarR=outputCalendar||Settings.defaultOutputCalendar;return new Locale(localeR,numberingSystemR,outputCalendarR,specifiedLocale)};Locale.resetCache=function resetCache(){sysLocaleCache=null;intlDTCache={};intlNumCache={};intlRelCache={}};Locale.fromObject=function fromObject(_temp){var _ref=_temp===void 0?{}:_temp,locale=_ref.locale,numberingSystem=_ref.numberingSystem,outputCalendar=_ref.outputCalendar;return Locale.create(locale,numberingSystem,outputCalendar)};function Locale(locale,numbering,outputCalendar,specifiedLocale){var _parseLocaleString=parseLocaleString(locale),parsedLocale=_parseLocaleString[0],parsedNumberingSystem=_parseLocaleString[1],parsedOutputCalendar=_parseLocaleString[2];this.locale=parsedLocale;this.numberingSystem=numbering||parsedNumberingSystem||null;this.outputCalendar=outputCalendar||parsedOutputCalendar||null;this.intl=intlConfigString(this.locale,this.numberingSystem,this.outputCalendar);this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=specifiedLocale;this.fastNumbersCached=null}var _proto4=Locale.prototype;_proto4.listingMode=function listingMode(){var isActuallyEn=this.isEnglish();var hasNoWeirdness=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return isActuallyEn&&hasNoWeirdness?"en":"intl"};_proto4.clone=function clone(alts){if(!alts||Object.getOwnPropertyNames(alts).length===0){return this}else{return Locale.create(alts.locale||this.specifiedLocale,alts.numberingSystem||this.numberingSystem,alts.outputCalendar||this.outputCalendar,alts.defaultToEN||false)}};_proto4.redefaultToEN=function redefaultToEN(alts){if(alts===void 0){alts={}}return this.clone(_extends({},alts,{defaultToEN:true}))};_proto4.redefaultToSystem=function redefaultToSystem(alts){if(alts===void 0){alts={}}return this.clone(_extends({},alts,{defaultToEN:false}))};_proto4.months=function months$1(length,format,defaultOK){var _this=this;if(format===void 0){format=false}if(defaultOK===void 0){defaultOK=true}return listStuff(this,length,defaultOK,months,function(){var intl=format?{month:length,day:"numeric"}:{month:length},formatStr=format?"format":"standalone";if(!_this.monthsCache[formatStr][length]){_this.monthsCache[formatStr][length]=mapMonths(function(dt){return _this.extract(dt,intl,"month")})}return _this.monthsCache[formatStr][length]})};_proto4.weekdays=function weekdays$1(length,format,defaultOK){var _this2=this;if(format===void 0){format=false}if(defaultOK===void 0){defaultOK=true}return listStuff(this,length,defaultOK,weekdays,function(){var intl=format?{weekday:length,year:"numeric",month:"long",day:"numeric"}:{weekday:length},formatStr=format?"format":"standalone";if(!_this2.weekdaysCache[formatStr][length]){_this2.weekdaysCache[formatStr][length]=mapWeekdays(function(dt){return _this2.extract(dt,intl,"weekday")})}return _this2.weekdaysCache[formatStr][length]})};_proto4.meridiems=function meridiems$1(defaultOK){var _this3=this;if(defaultOK===void 0){defaultOK=true}return listStuff(this,undefined,defaultOK,function(){return meridiems},function(){if(!_this3.meridiemCache){var intl={hour:"numeric",hourCycle:"h12"};_this3.meridiemCache=[DateTime.utc(2016,11,13,9),DateTime.utc(2016,11,13,19)].map(function(dt){return _this3.extract(dt,intl,"dayperiod")})}return _this3.meridiemCache})};_proto4.eras=function eras$1(length,defaultOK){var _this4=this;if(defaultOK===void 0){defaultOK=true}return listStuff(this,length,defaultOK,eras,function(){var intl={era:length};if(!_this4.eraCache[length]){_this4.eraCache[length]=[DateTime.utc(-40,1,1),DateTime.utc(2017,1,1)].map(function(dt){return _this4.extract(dt,intl,"era")})}return _this4.eraCache[length]})};_proto4.extract=function extract(dt,intlOpts,field){var df=this.dtFormatter(dt,intlOpts),results=df.formatToParts(),matching=results.find(function(m){return m.type.toLowerCase()===field});return matching?matching.value:null};_proto4.numberFormatter=function numberFormatter(opts){if(opts===void 0){opts={}}return new PolyNumberFormatter(this.intl,opts.forceSimple||this.fastNumbers,opts)};_proto4.dtFormatter=function dtFormatter(dt,intlOpts){if(intlOpts===void 0){intlOpts={}}return new PolyDateFormatter(dt,this.intl,intlOpts)};_proto4.relFormatter=function relFormatter(opts){if(opts===void 0){opts={}}return new PolyRelFormatter(this.intl,this.isEnglish(),opts)};_proto4.listFormatter=function listFormatter(opts){if(opts===void 0){opts={}}return getCachedLF(this.intl,opts)};_proto4.isEnglish=function isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")};_proto4.equals=function equals(other){return this.locale===other.locale&&this.numberingSystem===other.numberingSystem&&this.outputCalendar===other.outputCalendar};_createClass(Locale,[{key:"fastNumbers",get:function get(){if(this.fastNumbersCached==null){this.fastNumbersCached=supportsFastNumbers(this)}return this.fastNumbersCached}}]);return Locale}();function combineRegexes(){for(var _len=arguments.length,regexes=new Array(_len),_key=0;_key<_len;_key++){regexes[_key]=arguments[_key]}var full=regexes.reduce(function(f,r){return f+r.source},"");return RegExp("^"+full+"$")}function combineExtractors(){for(var _len2=arguments.length,extractors=new Array(_len2),_key2=0;_key2<_len2;_key2++){extractors[_key2]=arguments[_key2]}return function(m){return extractors.reduce(function(_ref,ex){var mergedVals=_ref[0],mergedZone=_ref[1],cursor=_ref[2];var _ex=ex(m,cursor),val=_ex[0],zone=_ex[1],next=_ex[2];return[_extends({},mergedVals,val),mergedZone||zone,next]},[{},null,1]).slice(0,2)}}function parse(s){if(s==null){return[null,null]}for(var _len3=arguments.length,patterns=new Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++){patterns[_key3-1]=arguments[_key3]}for(var _i=0,_patterns=patterns;_i<_patterns.length;_i++){var _patterns$_i=_patterns[_i],regex=_patterns$_i[0],extractor=_patterns$_i[1];var m=regex.exec(s);if(m){return extractor(m)}}return[null,null]}function simpleParse(){for(var _len4=arguments.length,keys=new Array(_len4),_key4=0;_key4<_len4;_key4++){keys[_key4]=arguments[_key4]}return function(match,cursor){var ret={};var i;for(i=0;i<keys.length;i++){ret[keys[i]]=parseInteger(match[cursor+i])}return[ret,null,cursor+i]}}var offsetRegex=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,isoTimeBaseRegex=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,isoTimeRegex=RegExp(""+isoTimeBaseRegex.source+offsetRegex.source+"?"),isoTimeExtensionRegex=RegExp("(?:T"+isoTimeRegex.source+")?"),isoYmdRegex=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,isoWeekRegex=/(\d{4})-?W(\d\d)(?:-?(\d))?/,isoOrdinalRegex=/(\d{4})-?(\d{3})/,extractISOWeekData=simpleParse("weekYear","weekNumber","weekDay"),extractISOOrdinalData=simpleParse("year","ordinal"),sqlYmdRegex=/(\d{4})-(\d\d)-(\d\d)/,sqlTimeRegex=RegExp(isoTimeBaseRegex.source+" ?(?:"+offsetRegex.source+"|("+ianaRegex.source+"))?"),sqlTimeExtensionRegex=RegExp("(?: "+sqlTimeRegex.source+")?");function int(match,pos,fallback){var m=match[pos];return isUndefined(m)?fallback:parseInteger(m)}function extractISOYmd(match,cursor){var item={year:int(match,cursor),month:int(match,cursor+1,1),day:int(match,cursor+2,1)};return[item,null,cursor+3]}function extractISOTime(match,cursor){var item={hours:int(match,cursor,0),minutes:int(match,cursor+1,0),seconds:int(match,cursor+2,0),milliseconds:parseMillis(match[cursor+3])};return[item,null,cursor+4]}function extractISOOffset(match,cursor){var local=!match[cursor]&&!match[cursor+1],fullOffset=signedOffset(match[cursor+1],match[cursor+2]),zone=local?null:FixedOffsetZone.instance(fullOffset);return[{},zone,cursor+3]}function extractIANAZone(match,cursor){var zone=match[cursor]?IANAZone.create(match[cursor]):null;return[{},zone,cursor+1]}var isoTimeOnly=RegExp("^T?"+isoTimeBaseRegex.source+"$");var isoDuration=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/;function extractISODuration(match){var s=match[0],yearStr=match[1],monthStr=match[2],weekStr=match[3],dayStr=match[4],hourStr=match[5],minuteStr=match[6],secondStr=match[7],millisecondsStr=match[8];var hasNegativePrefix=s[0]==="-";var negativeSeconds=secondStr&&secondStr[0]==="-";var maybeNegate=function maybeNegate(num,force){if(force===void 0){force=false}return num!==undefined&&(force||num&&hasNegativePrefix)?-num:num};return[{years:maybeNegate(parseFloating(yearStr)),months:maybeNegate(parseFloating(monthStr)),weeks:maybeNegate(parseFloating(weekStr)),days:maybeNegate(parseFloating(dayStr)),hours:maybeNegate(parseFloating(hourStr)),minutes:maybeNegate(parseFloating(minuteStr)),seconds:maybeNegate(parseFloating(secondStr),secondStr==="-0"),milliseconds:maybeNegate(parseMillis(millisecondsStr),negativeSeconds)}]}var obsOffsets={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function fromStrings(weekdayStr,yearStr,monthStr,dayStr,hourStr,minuteStr,secondStr){var result={year:yearStr.length===2?untruncateYear(parseInteger(yearStr)):parseInteger(yearStr),month:monthsShort.indexOf(monthStr)+1,day:parseInteger(dayStr),hour:parseInteger(hourStr),minute:parseInteger(minuteStr)};if(secondStr)result.second=parseInteger(secondStr);if(weekdayStr){result.weekday=weekdayStr.length>3?weekdaysLong.indexOf(weekdayStr)+1:weekdaysShort.indexOf(weekdayStr)+1}return result}var rfc2822=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function extractRFC2822(match){var weekdayStr=match[1],dayStr=match[2],monthStr=match[3],yearStr=match[4],hourStr=match[5],minuteStr=match[6],secondStr=match[7],obsOffset=match[8],milOffset=match[9],offHourStr=match[10],offMinuteStr=match[11],result=fromStrings(weekdayStr,yearStr,monthStr,dayStr,hourStr,minuteStr,secondStr);var offset;if(obsOffset){offset=obsOffsets[obsOffset]}else if(milOffset){offset=0}else{offset=signedOffset(offHourStr,offMinuteStr)}return[result,new FixedOffsetZone(offset)]}function preprocessRFC2822(s){return s.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}var rfc1123=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,rfc850=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,ascii=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function extractRFC1123Or850(match){var weekdayStr=match[1],dayStr=match[2],monthStr=match[3],yearStr=match[4],hourStr=match[5],minuteStr=match[6],secondStr=match[7],result=fromStrings(weekdayStr,yearStr,monthStr,dayStr,hourStr,minuteStr,secondStr);return[result,FixedOffsetZone.utcInstance]}function extractASCII(match){var weekdayStr=match[1],monthStr=match[2],dayStr=match[3],hourStr=match[4],minuteStr=match[5],secondStr=match[6],yearStr=match[7],result=fromStrings(weekdayStr,yearStr,monthStr,dayStr,hourStr,minuteStr,secondStr);return[result,FixedOffsetZone.utcInstance]}var isoYmdWithTimeExtensionRegex=combineRegexes(isoYmdRegex,isoTimeExtensionRegex);var isoWeekWithTimeExtensionRegex=combineRegexes(isoWeekRegex,isoTimeExtensionRegex);var isoOrdinalWithTimeExtensionRegex=combineRegexes(isoOrdinalRegex,isoTimeExtensionRegex);var isoTimeCombinedRegex=combineRegexes(isoTimeRegex);var extractISOYmdTimeAndOffset=combineExtractors(extractISOYmd,extractISOTime,extractISOOffset);var extractISOWeekTimeAndOffset=combineExtractors(extractISOWeekData,extractISOTime,extractISOOffset);var extractISOOrdinalDateAndTime=combineExtractors(extractISOOrdinalData,extractISOTime,extractISOOffset);var extractISOTimeAndOffset=combineExtractors(extractISOTime,extractISOOffset);function parseISODate(s){return parse(s,[isoYmdWithTimeExtensionRegex,extractISOYmdTimeAndOffset],[isoWeekWithTimeExtensionRegex,extractISOWeekTimeAndOffset],[isoOrdinalWithTimeExtensionRegex,extractISOOrdinalDateAndTime],[isoTimeCombinedRegex,extractISOTimeAndOffset])}function parseRFC2822Date(s){return parse(preprocessRFC2822(s),[rfc2822,extractRFC2822])}function parseHTTPDate(s){return parse(s,[rfc1123,extractRFC1123Or850],[rfc850,extractRFC1123Or850],[ascii,extractASCII])}function parseISODuration(s){return parse(s,[isoDuration,extractISODuration])}var extractISOTimeOnly=combineExtractors(extractISOTime);function parseISOTimeOnly(s){return parse(s,[isoTimeOnly,extractISOTimeOnly])}var sqlYmdWithTimeExtensionRegex=combineRegexes(sqlYmdRegex,sqlTimeExtensionRegex);var sqlTimeCombinedRegex=combineRegexes(sqlTimeRegex);var extractISOYmdTimeOffsetAndIANAZone=combineExtractors(extractISOYmd,extractISOTime,extractISOOffset,extractIANAZone);var extractISOTimeOffsetAndIANAZone=combineExtractors(extractISOTime,extractISOOffset,extractIANAZone);function parseSQL(s){return parse(s,[sqlYmdWithTimeExtensionRegex,extractISOYmdTimeOffsetAndIANAZone],[sqlTimeCombinedRegex,extractISOTimeOffsetAndIANAZone])}var INVALID$2="Invalid Duration";var lowOrderMatrix={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},casualMatrix=_extends({years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3}},lowOrderMatrix),daysInYearAccurate=146097/400,daysInMonthAccurate=146097/4800,accurateMatrix=_extends({years:{quarters:4,months:12,weeks:daysInYearAccurate/7,days:daysInYearAccurate,hours:daysInYearAccurate*24,minutes:daysInYearAccurate*24*60,seconds:daysInYearAccurate*24*60*60,milliseconds:daysInYearAccurate*24*60*60*1e3},quarters:{months:3,weeks:daysInYearAccurate/28,days:daysInYearAccurate/4,hours:daysInYearAccurate*24/4,minutes:daysInYearAccurate*24*60/4,seconds:daysInYearAccurate*24*60*60/4,milliseconds:daysInYearAccurate*24*60*60*1e3/4},months:{weeks:daysInMonthAccurate/7,days:daysInMonthAccurate,hours:daysInMonthAccurate*24,minutes:daysInMonthAccurate*24*60,seconds:daysInMonthAccurate*24*60*60,milliseconds:daysInMonthAccurate*24*60*60*1e3}},lowOrderMatrix);var orderedUnits$1=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"];var reverseUnits=orderedUnits$1.slice(0).reverse();function clone$1(dur,alts,clear){if(clear===void 0){clear=false}var conf={values:clear?alts.values:_extends({},dur.values,alts.values||{}),loc:dur.loc.clone(alts.loc),conversionAccuracy:alts.conversionAccuracy||dur.conversionAccuracy};return new Duration(conf)}function antiTrunc(n){return n<0?Math.floor(n):Math.ceil(n)}function convert(matrix,fromMap,fromUnit,toMap,toUnit){var conv=matrix[toUnit][fromUnit],raw=fromMap[fromUnit]/conv,sameSign=Math.sign(raw)===Math.sign(toMap[toUnit]),added=!sameSign&&toMap[toUnit]!==0&&Math.abs(raw)<=1?antiTrunc(raw):Math.trunc(raw);toMap[toUnit]+=added;fromMap[fromUnit]-=added*conv}function normalizeValues(matrix,vals){reverseUnits.reduce(function(previous,current){if(!isUndefined(vals[current])){if(previous){convert(matrix,vals,previous,vals,current)}return current}else{return previous}},null)}var Duration=function(){function Duration(config){var accurate=config.conversionAccuracy==="longterm"||false;this.values=config.values;this.loc=config.loc||Locale.create();this.conversionAccuracy=accurate?"longterm":"casual";this.invalid=config.invalid||null;this.matrix=accurate?accurateMatrix:casualMatrix;this.isLuxonDuration=true}Duration.fromMillis=function fromMillis(count,opts){return Duration.fromObject({milliseconds:count},opts)};Duration.fromObject=function fromObject(obj,opts){if(opts===void 0){opts={}}if(obj==null||typeof obj!=="object"){throw new InvalidArgumentError("Duration.fromObject: argument expected to be an object, got "+(obj===null?"null":typeof obj))}return new Duration({values:normalizeObject(obj,Duration.normalizeUnit),loc:Locale.fromObject(opts),conversionAccuracy:opts.conversionAccuracy})};Duration.fromDurationLike=function fromDurationLike(durationLike){if(isNumber(durationLike)){return Duration.fromMillis(durationLike)}else if(Duration.isDuration(durationLike)){return durationLike}else if(typeof durationLike==="object"){return Duration.fromObject(durationLike)}else{throw new InvalidArgumentError("Unknown duration argument "+durationLike+" of type "+typeof durationLike)}};Duration.fromISO=function fromISO(text,opts){var _parseISODuration=parseISODuration(text),parsed=_parseISODuration[0];if(parsed){return Duration.fromObject(parsed,opts)}else{return Duration.invalid("unparsable",'the input "'+text+"\" can't be parsed as ISO 8601")}};Duration.fromISOTime=function fromISOTime(text,opts){var _parseISOTimeOnly=parseISOTimeOnly(text),parsed=_parseISOTimeOnly[0];if(parsed){return Duration.fromObject(parsed,opts)}else{return Duration.invalid("unparsable",'the input "'+text+"\" can't be parsed as ISO 8601")}};Duration.invalid=function invalid(reason,explanation){if(explanation===void 0){explanation=null}if(!reason){throw new InvalidArgumentError("need to specify a reason the Duration is invalid")}var invalid=reason instanceof Invalid?reason:new Invalid(reason,explanation);if(Settings.throwOnInvalid){throw new InvalidDurationError(invalid)}else{return new Duration({invalid:invalid})}};Duration.normalizeUnit=function normalizeUnit(unit){var normalized={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[unit?unit.toLowerCase():unit];if(!normalized)throw new InvalidUnitError(unit);return normalized};Duration.isDuration=function isDuration(o){return o&&o.isLuxonDuration||false};var _proto=Duration.prototype;_proto.toFormat=function toFormat(fmt,opts){if(opts===void 0){opts={}}var fmtOpts=_extends({},opts,{floor:opts.round!==false&&opts.floor!==false});return this.isValid?Formatter.create(this.loc,fmtOpts).formatDurationFromString(this,fmt):INVALID$2};_proto.toHuman=function toHuman(opts){var _this=this;if(opts===void 0){opts={}}var l=orderedUnits$1.map(function(unit){var val=_this.values[unit];if(isUndefined(val)){return null}return _this.loc.numberFormatter(_extends({style:"unit",unitDisplay:"long"},opts,{unit:unit.slice(0,-1)})).format(val)}).filter(function(n){return n});return this.loc.listFormatter(_extends({type:"conjunction",style:opts.listStyle||"narrow"},opts)).format(l)};_proto.toObject=function toObject(){if(!this.isValid)return{};return _extends({},this.values)};_proto.toISO=function toISO(){if(!this.isValid)return null;var s="P";if(this.years!==0)s+=this.years+"Y";if(this.months!==0||this.quarters!==0)s+=this.months+this.quarters*3+"M";if(this.weeks!==0)s+=this.weeks+"W";if(this.days!==0)s+=this.days+"D";if(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)s+="T";if(this.hours!==0)s+=this.hours+"H";if(this.minutes!==0)s+=this.minutes+"M";if(this.seconds!==0||this.milliseconds!==0)s+=roundTo(this.seconds+this.milliseconds/1e3,3)+"S";if(s==="P")s+="T0S";return s};_proto.toISOTime=function toISOTime(opts){if(opts===void 0){opts={}}if(!this.isValid)return null;var millis=this.toMillis();if(millis<0||millis>=864e5)return null;opts=_extends({suppressMilliseconds:false,suppressSeconds:false,includePrefix:false,format:"extended"},opts);var value=this.shiftTo("hours","minutes","seconds","milliseconds");var fmt=opts.format==="basic"?"hhmm":"hh:mm";if(!opts.suppressSeconds||value.seconds!==0||value.milliseconds!==0){fmt+=opts.format==="basic"?"ss":":ss";if(!opts.suppressMilliseconds||value.milliseconds!==0){fmt+=".SSS"}}var str=value.toFormat(fmt);if(opts.includePrefix){str="T"+str}return str};_proto.toJSON=function toJSON(){return this.toISO()};_proto.toString=function toString(){return this.toISO()};_proto.toMillis=function toMillis(){return this.as("milliseconds")};_proto.valueOf=function valueOf(){return this.toMillis()};_proto.plus=function plus(duration){if(!this.isValid)return this;var dur=Duration.fromDurationLike(duration),result={};for(var _iterator=_createForOfIteratorHelperLoose(orderedUnits$1),_step;!(_step=_iterator()).done;){var k=_step.value;if(hasOwnProperty(dur.values,k)||hasOwnProperty(this.values,k)){result[k]=dur.get(k)+this.get(k)}}return clone$1(this,{values:result},true)};_proto.minus=function minus(duration){if(!this.isValid)return this;var dur=Duration.fromDurationLike(duration);return this.plus(dur.negate())};_proto.mapUnits=function mapUnits(fn){if(!this.isValid)return this;var result={};for(var _i=0,_Object$keys=Object.keys(this.values);_i<_Object$keys.length;_i++){var k=_Object$keys[_i];result[k]=asNumber(fn(this.values[k],k))}return clone$1(this,{values:result},true)};_proto.get=function get(unit){return this[Duration.normalizeUnit(unit)]};_proto.set=function set(values){if(!this.isValid)return this;var mixed=_extends({},this.values,normalizeObject(values,Duration.normalizeUnit));return clone$1(this,{values:mixed})};_proto.reconfigure=function reconfigure(_temp){var _ref=_temp===void 0?{}:_temp,locale=_ref.locale,numberingSystem=_ref.numberingSystem,conversionAccuracy=_ref.conversionAccuracy;var loc=this.loc.clone({locale:locale,numberingSystem:numberingSystem}),opts={loc:loc};if(conversionAccuracy){opts.conversionAccuracy=conversionAccuracy}return clone$1(this,opts)};_proto.as=function as(unit){return this.isValid?this.shiftTo(unit).get(unit):NaN};_proto.normalize=function normalize(){if(!this.isValid)return this;var vals=this.toObject();normalizeValues(this.matrix,vals);return clone$1(this,{values:vals},true)};_proto.shiftTo=function shiftTo(){for(var _len=arguments.length,units=new Array(_len),_key=0;_key<_len;_key++){units[_key]=arguments[_key]}if(!this.isValid)return this;if(units.length===0){return this}units=units.map(function(u){return Duration.normalizeUnit(u)});var built={},accumulated={},vals=this.toObject();var lastUnit;for(var _iterator2=_createForOfIteratorHelperLoose(orderedUnits$1),_step2;!(_step2=_iterator2()).done;){var k=_step2.value;if(units.indexOf(k)>=0){lastUnit=k;var own=0;for(var ak in accumulated){own+=this.matrix[ak][k]*accumulated[ak];accumulated[ak]=0}if(isNumber(vals[k])){own+=vals[k]}var i=Math.trunc(own);built[k]=i;accumulated[k]=(own*1e3-i*1e3)/1e3;for(var down in vals){if(orderedUnits$1.indexOf(down)>orderedUnits$1.indexOf(k)){convert(this.matrix,vals,down,built,k)}}}else if(isNumber(vals[k])){accumulated[k]=vals[k]}}for(var key in accumulated){if(accumulated[key]!==0){built[lastUnit]+=key===lastUnit?accumulated[key]:accumulated[key]/this.matrix[lastUnit][key]}}return clone$1(this,{values:built},true).normalize()};_proto.negate=function negate(){if(!this.isValid)return this;var negated={};for(var _i2=0,_Object$keys2=Object.keys(this.values);_i2<_Object$keys2.length;_i2++){var k=_Object$keys2[_i2];negated[k]=-this.values[k]}return clone$1(this,{values:negated},true)};_proto.equals=function equals(other){if(!this.isValid||!other.isValid){return false}if(!this.loc.equals(other.loc)){return false}function eq(v1,v2){if(v1===undefined||v1===0)return v2===undefined||v2===0;return v1===v2}for(var _iterator3=_createForOfIteratorHelperLoose(orderedUnits$1),_step3;!(_step3=_iterator3()).done;){var u=_step3.value;if(!eq(this.values[u],other.values[u])){return false}}return true};_createClass(Duration,[{key:"locale",get:function get(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function get(){return this.isValid?this.loc.numberingSystem:null}},{key:"years",get:function get(){return this.isValid?this.values.years||0:NaN}},{key:"quarters",get:function get(){return this.isValid?this.values.quarters||0:NaN}},{key:"months",get:function get(){return this.isValid?this.values.months||0:NaN}},{key:"weeks",get:function get(){return this.isValid?this.values.weeks||0:NaN}},{key:"days",get:function get(){return this.isValid?this.values.days||0:NaN}},{key:"hours",get:function get(){return this.isValid?this.values.hours||0:NaN}},{key:"minutes",get:function get(){return this.isValid?this.values.minutes||0:NaN}},{key:"seconds",get:function get(){return this.isValid?this.values.seconds||0:NaN}},{key:"milliseconds",get:function get(){return this.isValid?this.values.milliseconds||0:NaN}},{key:"isValid",get:function get(){return this.invalid===null}},{key:"invalidReason",get:function get(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function get(){return this.invalid?this.invalid.explanation:null}}]);return Duration}();var INVALID$1="Invalid Interval";function validateStartEnd(start,end){if(!start||!start.isValid){return Interval.invalid("missing or invalid start")}else if(!end||!end.isValid){return Interval.invalid("missing or invalid end")}else if(end<start){return Interval.invalid("end before start","The end of an interval must be after its start, but you had start="+start.toISO()+" and end="+end.toISO())}else{return null}}var Interval=function(){function Interval(config){this.s=config.start;this.e=config.end;this.invalid=config.invalid||null;this.isLuxonInterval=true}Interval.invalid=function invalid(reason,explanation){if(explanation===void 0){explanation=null}if(!reason){throw new InvalidArgumentError("need to specify a reason the Interval is invalid")}var invalid=reason instanceof Invalid?reason:new Invalid(reason,explanation);if(Settings.throwOnInvalid){throw new InvalidIntervalError(invalid)}else{return new Interval({invalid:invalid})}};Interval.fromDateTimes=function fromDateTimes(start,end){var builtStart=friendlyDateTime(start),builtEnd=friendlyDateTime(end);var validateError=validateStartEnd(builtStart,builtEnd);if(validateError==null){return new Interval({start:builtStart,end:builtEnd})}else{return validateError}};Interval.after=function after(start,duration){var dur=Duration.fromDurationLike(duration),dt=friendlyDateTime(start);return Interval.fromDateTimes(dt,dt.plus(dur))};Interval.before=function before(end,duration){var dur=Duration.fromDurationLike(duration),dt=friendlyDateTime(end);return Interval.fromDateTimes(dt.minus(dur),dt)};Interval.fromISO=function fromISO(text,opts){var _split=(text||"").split("/",2),s=_split[0],e=_split[1];if(s&&e){var start,startIsValid;try{start=DateTime.fromISO(s,opts);startIsValid=start.isValid}catch(e){startIsValid=false}var end,endIsValid;try{end=DateTime.fromISO(e,opts);endIsValid=end.isValid}catch(e){endIsValid=false}if(startIsValid&&endIsValid){return Interval.fromDateTimes(start,end)}if(startIsValid){var dur=Duration.fromISO(e,opts);if(dur.isValid){return Interval.after(start,dur)}}else if(endIsValid){var _dur=Duration.fromISO(s,opts);if(_dur.isValid){return Interval.before(end,_dur)}}}return Interval.invalid("unparsable",'the input "'+text+"\" can't be parsed as ISO 8601")};Interval.isInterval=function isInterval(o){return o&&o.isLuxonInterval||false};var _proto=Interval.prototype;_proto.length=function length(unit){if(unit===void 0){unit="milliseconds"}return this.isValid?this.toDuration.apply(this,[unit]).get(unit):NaN};_proto.count=function count(unit){if(unit===void 0){unit="milliseconds"}if(!this.isValid)return NaN;var start=this.start.startOf(unit),end=this.end.startOf(unit);return Math.floor(end.diff(start,unit).get(unit))+1};_proto.hasSame=function hasSame(unit){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,unit):false};_proto.isEmpty=function isEmpty(){return this.s.valueOf()===this.e.valueOf()};_proto.isAfter=function isAfter(dateTime){if(!this.isValid)return false;return this.s>dateTime};_proto.isBefore=function isBefore(dateTime){if(!this.isValid)return false;return this.e<=dateTime};_proto.contains=function contains(dateTime){if(!this.isValid)return false;return this.s<=dateTime&&this.e>dateTime};_proto.set=function set(_temp){var _ref=_temp===void 0?{}:_temp,start=_ref.start,end=_ref.end;if(!this.isValid)return this;return Interval.fromDateTimes(start||this.s,end||this.e)};_proto.splitAt=function splitAt(){var _this=this;if(!this.isValid)return[];for(var _len=arguments.length,dateTimes=new Array(_len),_key=0;_key<_len;_key++){dateTimes[_key]=arguments[_key]}var sorted=dateTimes.map(friendlyDateTime).filter(function(d){return _this.contains(d)}).sort(),results=[];var s=this.s,i=0;while(s<this.e){var added=sorted[i]||this.e,next=+added>+this.e?this.e:added;results.push(Interval.fromDateTimes(s,next));s=next;i+=1}return results};_proto.splitBy=function splitBy(duration){var dur=Duration.fromDurationLike(duration);if(!this.isValid||!dur.isValid||dur.as("milliseconds")===0){return[]}var s=this.s,idx=1,next;var results=[];while(s<this.e){var added=this.start.plus(dur.mapUnits(function(x){return x*idx}));next=+added>+this.e?this.e:added;results.push(Interval.fromDateTimes(s,next));s=next;idx+=1}return results};_proto.divideEqually=function divideEqually(numberOfParts){if(!this.isValid)return[];return this.splitBy(this.length()/numberOfParts).slice(0,numberOfParts)};_proto.overlaps=function overlaps(other){return this.e>other.s&&this.s<other.e};_proto.abutsStart=function abutsStart(other){if(!this.isValid)return false;return+this.e===+other.s};_proto.abutsEnd=function abutsEnd(other){if(!this.isValid)return false;return+other.e===+this.s};_proto.engulfs=function engulfs(other){if(!this.isValid)return false;return this.s<=other.s&&this.e>=other.e};_proto.equals=function equals(other){if(!this.isValid||!other.isValid){return false}return this.s.equals(other.s)&&this.e.equals(other.e)};_proto.intersection=function intersection(other){if(!this.isValid)return this;var s=this.s>other.s?this.s:other.s,e=this.e<other.e?this.e:other.e;if(s>=e){return null}else{return Interval.fromDateTimes(s,e)}};_proto.union=function union(other){if(!this.isValid)return this;var s=this.s<other.s?this.s:other.s,e=this.e>other.e?this.e:other.e;return Interval.fromDateTimes(s,e)};Interval.merge=function merge(intervals){var _intervals$sort$reduc=intervals.sort(function(a,b){return a.s-b.s}).reduce(function(_ref2,item){var sofar=_ref2[0],current=_ref2[1];if(!current){return[sofar,item]}else if(current.overlaps(item)||current.abutsStart(item)){return[sofar,current.union(item)]}else{return[sofar.concat([current]),item]}},[[],null]),found=_intervals$sort$reduc[0],final=_intervals$sort$reduc[1];if(final){found.push(final)}return found};Interval.xor=function xor(intervals){var _Array$prototype;var start=null,currentCount=0;var results=[],ends=intervals.map(function(i){return[{time:i.s,type:"s"},{time:i.e,type:"e"}]}),flattened=(_Array$prototype=Array.prototype).concat.apply(_Array$prototype,ends),arr=flattened.sort(function(a,b){return a.time-b.time});for(var _iterator=_createForOfIteratorHelperLoose(arr),_step;!(_step=_iterator()).done;){var i=_step.value;currentCount+=i.type==="s"?1:-1;if(currentCount===1){start=i.time}else{if(start&&+start!==+i.time){results.push(Interval.fromDateTimes(start,i.time))}start=null}}return Interval.merge(results)};_proto.difference=function difference(){var _this2=this;for(var _len2=arguments.length,intervals=new Array(_len2),_key2=0;_key2<_len2;_key2++){intervals[_key2]=arguments[_key2]}return Interval.xor([this].concat(intervals)).map(function(i){return _this2.intersection(i)}).filter(function(i){return i&&!i.isEmpty()})};_proto.toString=function toString(){if(!this.isValid)return INVALID$1;return"["+this.s.toISO()+" – "+this.e.toISO()+")"};_proto.toISO=function toISO(opts){if(!this.isValid)return INVALID$1;return this.s.toISO(opts)+"/"+this.e.toISO(opts)};_proto.toISODate=function toISODate(){if(!this.isValid)return INVALID$1;return this.s.toISODate()+"/"+this.e.toISODate()};_proto.toISOTime=function toISOTime(opts){if(!this.isValid)return INVALID$1;return this.s.toISOTime(opts)+"/"+this.e.toISOTime(opts)};_proto.toFormat=function toFormat(dateFormat,_temp2){var _ref3=_temp2===void 0?{}:_temp2,_ref3$separator=_ref3.separator,separator=_ref3$separator===void 0?" – ":_ref3$separator;if(!this.isValid)return INVALID$1;return""+this.s.toFormat(dateFormat)+separator+this.e.toFormat(dateFormat)};_proto.toDuration=function toDuration(unit,opts){if(!this.isValid){return Duration.invalid(this.invalidReason)}return this.e.diff(this.s,unit,opts)};_proto.mapEndpoints=function mapEndpoints(mapFn){return Interval.fromDateTimes(mapFn(this.s),mapFn(this.e))};_createClass(Interval,[{key:"start",get:function get(){return this.isValid?this.s:null}},{key:"end",get:function get(){return this.isValid?this.e:null}},{key:"isValid",get:function get(){return this.invalidReason===null}},{key:"invalidReason",get:function get(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function get(){return this.invalid?this.invalid.explanation:null}}]);return Interval}();var Info=function(){function Info(){}Info.hasDST=function hasDST(zone){if(zone===void 0){zone=Settings.defaultZone}var proto=DateTime.now().setZone(zone).set({month:12});return!zone.isUniversal&&proto.offset!==proto.set({month:6}).offset};Info.isValidIANAZone=function isValidIANAZone(zone){return IANAZone.isValidSpecifier(zone)&&IANAZone.isValidZone(zone)};Info.normalizeZone=function normalizeZone$1(input){return normalizeZone(input,Settings.defaultZone)};Info.months=function months(length,_temp){if(length===void 0){length="long"}var _ref=_temp===void 0?{}:_temp,_ref$locale=_ref.locale,locale=_ref$locale===void 0?null:_ref$locale,_ref$numberingSystem=_ref.numberingSystem,numberingSystem=_ref$numberingSystem===void 0?null:_ref$numberingSystem,_ref$locObj=_ref.locObj,locObj=_ref$locObj===void 0?null:_ref$locObj,_ref$outputCalendar=_ref.outputCalendar,outputCalendar=_ref$outputCalendar===void 0?"gregory":_ref$outputCalendar;return(locObj||Locale.create(locale,numberingSystem,outputCalendar)).months(length)};Info.monthsFormat=function monthsFormat(length,_temp2){if(length===void 0){length="long"}var _ref2=_temp2===void 0?{}:_temp2,_ref2$locale=_ref2.locale,locale=_ref2$locale===void 0?null:_ref2$locale,_ref2$numberingSystem=_ref2.numberingSystem,numberingSystem=_ref2$numberingSystem===void 0?null:_ref2$numberingSystem,_ref2$locObj=_ref2.locObj,locObj=_ref2$locObj===void 0?null:_ref2$locObj,_ref2$outputCalendar=_ref2.outputCalendar,outputCalendar=_ref2$outputCalendar===void 0?"gregory":_ref2$outputCalendar;return(locObj||Locale.create(locale,numberingSystem,outputCalendar)).months(length,true)};Info.weekdays=function weekdays(length,_temp3){if(length===void 0){length="long"}var _ref3=_temp3===void 0?{}:_temp3,_ref3$locale=_ref3.locale,locale=_ref3$locale===void 0?null:_ref3$locale,_ref3$numberingSystem=_ref3.numberingSystem,numberingSystem=_ref3$numberingSystem===void 0?null:_ref3$numberingSystem,_ref3$locObj=_ref3.locObj,locObj=_ref3$locObj===void 0?null:_ref3$locObj;return(locObj||Locale.create(locale,numberingSystem,null)).weekdays(length)};Info.weekdaysFormat=function weekdaysFormat(length,_temp4){if(length===void 0){length="long"}var _ref4=_temp4===void 0?{}:_temp4,_ref4$locale=_ref4.locale,locale=_ref4$locale===void 0?null:_ref4$locale,_ref4$numberingSystem=_ref4.numberingSystem,numberingSystem=_ref4$numberingSystem===void 0?null:_ref4$numberingSystem,_ref4$locObj=_ref4.locObj,locObj=_ref4$locObj===void 0?null:_ref4$locObj;return(locObj||Locale.create(locale,numberingSystem,null)).weekdays(length,true)};Info.meridiems=function meridiems(_temp5){var _ref5=_temp5===void 0?{}:_temp5,_ref5$locale=_ref5.locale,locale=_ref5$locale===void 0?null:_ref5$locale;return Locale.create(locale).meridiems()};Info.eras=function eras(length,_temp6){if(length===void 0){length="short"}var _ref6=_temp6===void 0?{}:_temp6,_ref6$locale=_ref6.locale,locale=_ref6$locale===void 0?null:_ref6$locale;return Locale.create(locale,null,"gregory").eras(length)};Info.features=function features(){return{relative:hasRelative()}};return Info}();function dayDiff(earlier,later){var utcDayStart=function utcDayStart(dt){return dt.toUTC(0,{keepLocalTime:true}).startOf("day").valueOf()},ms=utcDayStart(later)-utcDayStart(earlier);return Math.floor(Duration.fromMillis(ms).as("days"))}function highOrderDiffs(cursor,later,units){var differs=[["years",function(a,b){return b.year-a.year}],["quarters",function(a,b){return b.quarter-a.quarter}],["months",function(a,b){return b.month-a.month+(b.year-a.year)*12}],["weeks",function(a,b){var days=dayDiff(a,b);return(days-days%7)/7}],["days",dayDiff]];var results={};var lowestOrder,highWater;for(var _i=0,_differs=differs;_i<_differs.length;_i++){var _differs$_i=_differs[_i],unit=_differs$_i[0],differ=_differs$_i[1];if(units.indexOf(unit)>=0){var _cursor$plus;lowestOrder=unit;var delta=differ(cursor,later);highWater=cursor.plus((_cursor$plus={},_cursor$plus[unit]=delta,_cursor$plus));if(highWater>later){var _cursor$plus2;cursor=cursor.plus((_cursor$plus2={},_cursor$plus2[unit]=delta-1,_cursor$plus2));delta-=1}else{cursor=highWater}results[unit]=delta}}return[cursor,results,highWater,lowestOrder]}function _diff(earlier,later,units,opts){var _highOrderDiffs=highOrderDiffs(earlier,later,units),cursor=_highOrderDiffs[0],results=_highOrderDiffs[1],highWater=_highOrderDiffs[2],lowestOrder=_highOrderDiffs[3];var remainingMillis=later-cursor;var lowerOrderUnits=units.filter(function(u){return["hours","minutes","seconds","milliseconds"].indexOf(u)>=0});if(lowerOrderUnits.length===0){if(highWater<later){var _cursor$plus3;highWater=cursor.plus((_cursor$plus3={},_cursor$plus3[lowestOrder]=1,_cursor$plus3))}if(highWater!==cursor){results[lowestOrder]=(results[lowestOrder]||0)+remainingMillis/(highWater-cursor)}}var duration=Duration.fromObject(results,opts);if(lowerOrderUnits.length>0){var _Duration$fromMillis;return(_Duration$fromMillis=Duration.fromMillis(remainingMillis,opts)).shiftTo.apply(_Duration$fromMillis,lowerOrderUnits).plus(duration)}else{return duration}}var numberingSystems={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"};var numberingSystemsUTF16={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]};var hanidecChars=numberingSystems.hanidec.replace(/[\[|\]]/g,"").split("");function parseDigits(str){var value=parseInt(str,10);if(isNaN(value)){value="";for(var i=0;i<str.length;i++){var code=str.charCodeAt(i);if(str[i].search(numberingSystems.hanidec)!==-1){value+=hanidecChars.indexOf(str[i])}else{for(var key in numberingSystemsUTF16){var _numberingSystemsUTF=numberingSystemsUTF16[key],min=_numberingSystemsUTF[0],max=_numberingSystemsUTF[1];if(code>=min&&code<=max){value+=code-min}}}}return parseInt(value,10)}else{return value}}function digitRegex(_ref,append){var numberingSystem=_ref.numberingSystem;if(append===void 0){append=""}return new RegExp(""+numberingSystems[numberingSystem||"latn"]+append)}var MISSING_FTP="missing Intl.DateTimeFormat.formatToParts support";function intUnit(regex,post){if(post===void 0){post=function post(i){return i}}return{regex:regex,deser:function deser(_ref){var s=_ref[0];return post(parseDigits(s))}}}var NBSP=String.fromCharCode(160);var spaceOrNBSP="( |"+NBSP+")";var spaceOrNBSPRegExp=new RegExp(spaceOrNBSP,"g");function fixListRegex(s){return s.replace(/\./g,"\\.?").replace(spaceOrNBSPRegExp,spaceOrNBSP)}function stripInsensitivities(s){return s.replace(/\./g,"").replace(spaceOrNBSPRegExp," ").toLowerCase()}function oneOf(strings,startIndex){if(strings===null){return null}else{return{regex:RegExp(strings.map(fixListRegex).join("|")),deser:function deser(_ref2){var s=_ref2[0];return strings.findIndex(function(i){return stripInsensitivities(s)===stripInsensitivities(i)})+startIndex}}}}function offset(regex,groups){return{regex:regex,deser:function deser(_ref3){var h=_ref3[1],m=_ref3[2];return signedOffset(h,m)},groups:groups}}function simple(regex){return{regex:regex,deser:function deser(_ref4){var s=_ref4[0];return s}}}function escapeToken(value){return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function unitForToken(token,loc){var one=digitRegex(loc),two=digitRegex(loc,"{2}"),three=digitRegex(loc,"{3}"),four=digitRegex(loc,"{4}"),six=digitRegex(loc,"{6}"),oneOrTwo=digitRegex(loc,"{1,2}"),oneToThree=digitRegex(loc,"{1,3}"),oneToSix=digitRegex(loc,"{1,6}"),oneToNine=digitRegex(loc,"{1,9}"),twoToFour=digitRegex(loc,"{2,4}"),fourToSix=digitRegex(loc,"{4,6}"),literal=function literal(t){return{regex:RegExp(escapeToken(t.val)),deser:function deser(_ref5){var s=_ref5[0];return s},literal:true}},unitate=function unitate(t){if(token.literal){return literal(t)}switch(t.val){case"G":return oneOf(loc.eras("short",false),0);case"GG":return oneOf(loc.eras("long",false),0);case"y":return intUnit(oneToSix);case"yy":return intUnit(twoToFour,untruncateYear);case"yyyy":return intUnit(four);case"yyyyy":return intUnit(fourToSix);case"yyyyyy":return intUnit(six);case"M":return intUnit(oneOrTwo);case"MM":return intUnit(two);case"MMM":return oneOf(loc.months("short",true,false),1);case"MMMM":return oneOf(loc.months("long",true,false),1);case"L":return intUnit(oneOrTwo);case"LL":return intUnit(two);case"LLL":return oneOf(loc.months("short",false,false),1);case"LLLL":return oneOf(loc.months("long",false,false),1);case"d":return intUnit(oneOrTwo);case"dd":return intUnit(two);case"o":return intUnit(oneToThree);case"ooo":return intUnit(three);case"HH":return intUnit(two);case"H":return intUnit(oneOrTwo);case"hh":return intUnit(two);case"h":return intUnit(oneOrTwo);case"mm":return intUnit(two);case"m":return intUnit(oneOrTwo);case"q":return intUnit(oneOrTwo);case"qq":return intUnit(two);case"s":return intUnit(oneOrTwo);case"ss":return intUnit(two);case"S":return intUnit(oneToThree);case"SSS":return intUnit(three);case"u":return simple(oneToNine);case"uu":return simple(oneOrTwo);case"uuu":return intUnit(one);case"a":return oneOf(loc.meridiems(),0);case"kkkk":return intUnit(four);case"kk":return intUnit(twoToFour,untruncateYear);case"W":return intUnit(oneOrTwo);case"WW":return intUnit(two);case"E":case"c":return intUnit(one);case"EEE":return oneOf(loc.weekdays("short",false,false),1);case"EEEE":return oneOf(loc.weekdays("long",false,false),1);case"ccc":return oneOf(loc.weekdays("short",true,false),1);case"cccc":return oneOf(loc.weekdays("long",true,false),1);case"Z":case"ZZ":return offset(new RegExp("([+-]"+oneOrTwo.source+")(?::("+two.source+"))?"),2);case"ZZZ":return offset(new RegExp("([+-]"+oneOrTwo.source+")("+two.source+")?"),2);case"z":return simple(/[a-z_+-/]{1,256}?/i);default:return literal(t)}};var unit=unitate(token)||{invalidReason:MISSING_FTP};unit.token=token;return unit}var partTypeStyleToTokenVal={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};function tokenForPart(part,locale,formatOpts){var type=part.type,value=part.value;if(type==="literal"){return{literal:true,val:value}}var style=formatOpts[type];var val=partTypeStyleToTokenVal[type];if(typeof val==="object"){val=val[style]}if(val){return{literal:false,val:val}}return undefined}function buildRegex(units){var re=units.map(function(u){return u.regex}).reduce(function(f,r){return f+"("+r.source+")"},"");return["^"+re+"$",units]}function match(input,regex,handlers){var matches=input.match(regex);if(matches){var all={};var matchIndex=1;for(var i in handlers){if(hasOwnProperty(handlers,i)){var h=handlers[i],groups=h.groups?h.groups+1:1;if(!h.literal&&h.token){all[h.token.val[0]]=h.deser(matches.slice(matchIndex,matchIndex+groups))}matchIndex+=groups}}return[matches,all]}else{return[matches,{}]}}function dateTimeFromMatches(matches){var toField=function toField(token){switch(token){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};var zone=null;var specificOffset;if(!isUndefined(matches.z)){zone=IANAZone.create(matches.z)}if(!isUndefined(matches.Z)){if(!zone){zone=new FixedOffsetZone(matches.Z)}specificOffset=matches.Z}if(!isUndefined(matches.q)){matches.M=(matches.q-1)*3+1}if(!isUndefined(matches.h)){if(matches.h<12&&matches.a===1){matches.h+=12}else if(matches.h===12&&matches.a===0){matches.h=0}}if(matches.G===0&&matches.y){matches.y=-matches.y}if(!isUndefined(matches.u)){matches.S=parseMillis(matches.u)}var vals=Object.keys(matches).reduce(function(r,k){var f=toField(k);if(f){r[f]=matches[k]}return r},{});return[vals,zone,specificOffset]}var dummyDateTimeCache=null;function getDummyDateTime(){if(!dummyDateTimeCache){dummyDateTimeCache=DateTime.fromMillis(1555555555555)}return dummyDateTimeCache}function maybeExpandMacroToken(token,locale){if(token.literal){return token}var formatOpts=Formatter.macroTokenToFormatOpts(token.val);if(!formatOpts){return token}var formatter=Formatter.create(locale,formatOpts);var parts=formatter.formatDateTimeParts(getDummyDateTime());var tokens=parts.map(function(p){return tokenForPart(p,locale,formatOpts)});if(tokens.includes(undefined)){return token}return tokens}function expandMacroTokens(tokens,locale){var _Array$prototype;return(_Array$prototype=Array.prototype).concat.apply(_Array$prototype,tokens.map(function(t){return maybeExpandMacroToken(t,locale)}))}function explainFromTokens(locale,input,format){var tokens=expandMacroTokens(Formatter.parseFormat(format),locale),units=tokens.map(function(t){return unitForToken(t,locale)}),disqualifyingUnit=units.find(function(t){return t.invalidReason});if(disqualifyingUnit){return{input:input,tokens:tokens,invalidReason:disqualifyingUnit.invalidReason}}else{var _buildRegex=buildRegex(units),regexString=_buildRegex[0],handlers=_buildRegex[1],regex=RegExp(regexString,"i"),_match=match(input,regex,handlers),rawMatches=_match[0],matches=_match[1],_ref6=matches?dateTimeFromMatches(matches):[null,null,undefined],result=_ref6[0],zone=_ref6[1],specificOffset=_ref6[2];if(hasOwnProperty(matches,"a")&&hasOwnProperty(matches,"H")){throw new ConflictingSpecificationError("Can't include meridiem when specifying 24-hour format")}return{input:input,tokens:tokens,regex:regex,rawMatches:rawMatches,matches:matches,result:result,zone:zone,specificOffset:specificOffset}}}function parseFromTokens(locale,input,format){var _explainFromTokens=explainFromTokens(locale,input,format),result=_explainFromTokens.result,zone=_explainFromTokens.zone,specificOffset=_explainFromTokens.specificOffset,invalidReason=_explainFromTokens.invalidReason;return[result,zone,specificOffset,invalidReason]}var nonLeapLadder=[0,31,59,90,120,151,181,212,243,273,304,334],leapLadder=[0,31,60,91,121,152,182,213,244,274,305,335];function unitOutOfRange(unit,value){return new Invalid("unit out of range","you specified "+value+" (of type "+typeof value+") as a "+unit+", which is invalid")}function dayOfWeek(year,month,day){var js=new Date(Date.UTC(year,month-1,day)).getUTCDay();return js===0?7:js}function computeOrdinal(year,month,day){return day+(isLeapYear(year)?leapLadder:nonLeapLadder)[month-1]}function uncomputeOrdinal(year,ordinal){var table=isLeapYear(year)?leapLadder:nonLeapLadder,month0=table.findIndex(function(i){return i<ordinal}),day=ordinal-table[month0];return{month:month0+1,day:day}}function gregorianToWeek(gregObj){var year=gregObj.year,month=gregObj.month,day=gregObj.day,ordinal=computeOrdinal(year,month,day),weekday=dayOfWeek(year,month,day);var weekNumber=Math.floor((ordinal-weekday+10)/7),weekYear;if(weekNumber<1){weekYear=year-1;weekNumber=weeksInWeekYear(weekYear)}else if(weekNumber>weeksInWeekYear(year)){weekYear=year+1;weekNumber=1}else{weekYear=year}return _extends({weekYear:weekYear,weekNumber:weekNumber,weekday:weekday},timeObject(gregObj))}function weekToGregorian(weekData){var weekYear=weekData.weekYear,weekNumber=weekData.weekNumber,weekday=weekData.weekday,weekdayOfJan4=dayOfWeek(weekYear,1,4),yearInDays=daysInYear(weekYear);var ordinal=weekNumber*7+weekday-weekdayOfJan4-3,year;if(ordinal<1){year=weekYear-1;ordinal+=daysInYear(year)}else if(ordinal>yearInDays){year=weekYear+1;ordinal-=daysInYear(weekYear)}else{year=weekYear}var _uncomputeOrdinal=uncomputeOrdinal(year,ordinal),month=_uncomputeOrdinal.month,day=_uncomputeOrdinal.day;return _extends({year:year,month:month,day:day},timeObject(weekData))}function gregorianToOrdinal(gregData){var year=gregData.year,month=gregData.month,day=gregData.day;var ordinal=computeOrdinal(year,month,day);return _extends({year:year,ordinal:ordinal},timeObject(gregData))}function ordinalToGregorian(ordinalData){var year=ordinalData.year,ordinal=ordinalData.ordinal;var _uncomputeOrdinal2=uncomputeOrdinal(year,ordinal),month=_uncomputeOrdinal2.month,day=_uncomputeOrdinal2.day;return _extends({year:year,month:month,day:day},timeObject(ordinalData))}function hasInvalidWeekData(obj){var validYear=isInteger(obj.weekYear),validWeek=integerBetween(obj.weekNumber,1,weeksInWeekYear(obj.weekYear)),validWeekday=integerBetween(obj.weekday,1,7);if(!validYear){return unitOutOfRange("weekYear",obj.weekYear)}else if(!validWeek){return unitOutOfRange("week",obj.week)}else if(!validWeekday){return unitOutOfRange("weekday",obj.weekday)}else return false}function hasInvalidOrdinalData(obj){var validYear=isInteger(obj.year),validOrdinal=integerBetween(obj.ordinal,1,daysInYear(obj.year));if(!validYear){return unitOutOfRange("year",obj.year)}else if(!validOrdinal){return unitOutOfRange("ordinal",obj.ordinal)}else return false}function hasInvalidGregorianData(obj){var validYear=isInteger(obj.year),validMonth=integerBetween(obj.month,1,12),validDay=integerBetween(obj.day,1,daysInMonth(obj.year,obj.month));if(!validYear){return unitOutOfRange("year",obj.year)}else if(!validMonth){return unitOutOfRange("month",obj.month)}else if(!validDay){return unitOutOfRange("day",obj.day)}else return false}function hasInvalidTimeData(obj){var hour=obj.hour,minute=obj.minute,second=obj.second,millisecond=obj.millisecond;var validHour=integerBetween(hour,0,23)||hour===24&&minute===0&&second===0&&millisecond===0,validMinute=integerBetween(minute,0,59),validSecond=integerBetween(second,0,59),validMillisecond=integerBetween(millisecond,0,999);if(!validHour){return unitOutOfRange("hour",hour)}else if(!validMinute){return unitOutOfRange("minute",minute)}else if(!validSecond){return unitOutOfRange("second",second)}else if(!validMillisecond){return unitOutOfRange("millisecond",millisecond)}else return false}var INVALID="Invalid DateTime";var MAX_DATE=864e13;function unsupportedZone(zone){return new Invalid("unsupported zone",'the zone "'+zone.name+'" is not supported')}function possiblyCachedWeekData(dt){if(dt.weekData===null){dt.weekData=gregorianToWeek(dt.c)}return dt.weekData}function clone(inst,alts){var current={ts:inst.ts,zone:inst.zone,c:inst.c,o:inst.o,loc:inst.loc,invalid:inst.invalid};return new DateTime(_extends({},current,alts,{old:current}))}function fixOffset(localTS,o,tz){var utcGuess=localTS-o*60*1e3;var o2=tz.offset(utcGuess);if(o===o2){return[utcGuess,o]}utcGuess-=(o2-o)*60*1e3;var o3=tz.offset(utcGuess);if(o2===o3){return[utcGuess,o2]}return[localTS-Math.min(o2,o3)*60*1e3,Math.max(o2,o3)]}function tsToObj(ts,offset){ts+=offset*60*1e3;var d=new Date(ts);return{year:d.getUTCFullYear(),month:d.getUTCMonth()+1,day:d.getUTCDate(),hour:d.getUTCHours(),minute:d.getUTCMinutes(),second:d.getUTCSeconds(),millisecond:d.getUTCMilliseconds()}}function objToTS(obj,offset,zone){return fixOffset(objToLocalTS(obj),offset,zone)}function adjustTime(inst,dur){var oPre=inst.o,year=inst.c.year+Math.trunc(dur.years),month=inst.c.month+Math.trunc(dur.months)+Math.trunc(dur.quarters)*3,c=_extends({},inst.c,{year:year,month:month,day:Math.min(inst.c.day,daysInMonth(year,month))+Math.trunc(dur.days)+Math.trunc(dur.weeks)*7}),millisToAdd=Duration.fromObject({years:dur.years-Math.trunc(dur.years),quarters:dur.quarters-Math.trunc(dur.quarters),months:dur.months-Math.trunc(dur.months),weeks:dur.weeks-Math.trunc(dur.weeks),days:dur.days-Math.trunc(dur.days),hours:dur.hours,minutes:dur.minutes,seconds:dur.seconds,milliseconds:dur.milliseconds}).as("milliseconds"),localTS=objToLocalTS(c);var _fixOffset=fixOffset(localTS,oPre,inst.zone),ts=_fixOffset[0],o=_fixOffset[1];if(millisToAdd!==0){ts+=millisToAdd;o=inst.zone.offset(ts)}return{ts:ts,o:o}}function parseDataToDateTime(parsed,parsedZone,opts,format,text,specificOffset){var setZone=opts.setZone,zone=opts.zone;if(parsed&&Object.keys(parsed).length!==0){var interpretationZone=parsedZone||zone,inst=DateTime.fromObject(parsed,_extends({},opts,{zone:interpretationZone,specificOffset:specificOffset}));return setZone?inst:inst.setZone(zone)}else{return DateTime.invalid(new Invalid("unparsable",'the input "'+text+"\" can't be parsed as "+format))}}function toTechFormat(dt,format,allowZ){if(allowZ===void 0){allowZ=true}return dt.isValid?Formatter.create(Locale.create("en-US"),{allowZ:allowZ,forceSimple:true}).formatDateTimeFromString(dt,format):null}function _toISODate(o,extended){var longFormat=o.c.year>9999||o.c.year<0;var c="";if(longFormat&&o.c.year>=0)c+="+";c+=padStart(o.c.year,longFormat?6:4);if(extended){c+="-";c+=padStart(o.c.month);c+="-";c+=padStart(o.c.day)}else{c+=padStart(o.c.month);c+=padStart(o.c.day)}return c}function _toISOTime(o,extended,suppressSeconds,suppressMilliseconds,includeOffset){var c=padStart(o.c.hour);if(extended){c+=":";c+=padStart(o.c.minute);if(o.c.second!==0||!suppressSeconds){c+=":"}}else{c+=padStart(o.c.minute)}if(o.c.second!==0||!suppressSeconds){c+=padStart(o.c.second);if(o.c.millisecond!==0||!suppressMilliseconds){c+=".";c+=padStart(o.c.millisecond,3)}}if(includeOffset){if(o.isOffsetFixed&&o.offset===0){c+="Z"}else if(o.o<0){c+="-";c+=padStart(Math.trunc(-o.o/60));c+=":";c+=padStart(Math.trunc(-o.o%60))}else{c+="+";c+=padStart(Math.trunc(o.o/60));c+=":";c+=padStart(Math.trunc(o.o%60))}}return c}var defaultUnitValues={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},defaultWeekUnitValues={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},defaultOrdinalUnitValues={ordinal:1,hour:0,minute:0,second:0,millisecond:0};var orderedUnits=["year","month","day","hour","minute","second","millisecond"],orderedWeekUnits=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],orderedOrdinalUnits=["year","ordinal","hour","minute","second","millisecond"];function normalizeUnit(unit){var normalized={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[unit.toLowerCase()];if(!normalized)throw new InvalidUnitError(unit);return normalized}function quickDT(obj,opts){var zone=normalizeZone(opts.zone,Settings.defaultZone),loc=Locale.fromObject(opts),tsNow=Settings.now();var ts,o;if(!isUndefined(obj.year)){for(var _iterator=_createForOfIteratorHelperLoose(orderedUnits),_step;!(_step=_iterator()).done;){var u=_step.value;if(isUndefined(obj[u])){obj[u]=defaultUnitValues[u]}}var invalid=hasInvalidGregorianData(obj)||hasInvalidTimeData(obj);if(invalid){return DateTime.invalid(invalid)}var offsetProvis=zone.offset(tsNow);var _objToTS=objToTS(obj,offsetProvis,zone);ts=_objToTS[0];o=_objToTS[1]}else{ts=tsNow}return new DateTime({ts:ts,zone:zone,loc:loc,o:o})}function diffRelative(start,end,opts){var round=isUndefined(opts.round)?true:opts.round,format=function format(c,unit){c=roundTo(c,round||opts.calendary?0:2,true);var formatter=end.loc.clone(opts).relFormatter(opts);return formatter.format(c,unit)},differ=function differ(unit){if(opts.calendary){if(!end.hasSame(start,unit)){return end.startOf(unit).diff(start.startOf(unit),unit).get(unit)}else return 0}else{return end.diff(start,unit).get(unit)}};if(opts.unit){return format(differ(opts.unit),opts.unit)}for(var _iterator2=_createForOfIteratorHelperLoose(opts.units),_step2;!(_step2=_iterator2()).done;){var unit=_step2.value;var count=differ(unit);if(Math.abs(count)>=1){return format(count,unit)}}return format(start>end?-0:0,opts.units[opts.units.length-1])}function lastOpts(argList){var opts={},args;if(argList.length>0&&typeof argList[argList.length-1]==="object"){opts=argList[argList.length-1];args=Array.from(argList).slice(0,argList.length-1)}else{args=Array.from(argList)}return[opts,args]}var DateTime=function(){function DateTime(config){var zone=config.zone||Settings.defaultZone;var invalid=config.invalid||(Number.isNaN(config.ts)?new Invalid("invalid input"):null)||(!zone.isValid?unsupportedZone(zone):null);this.ts=isUndefined(config.ts)?Settings.now():config.ts;var c=null,o=null;if(!invalid){var unchanged=config.old&&config.old.ts===this.ts&&config.old.zone.equals(zone);if(unchanged){var _ref=[config.old.c,config.old.o];c=_ref[0];o=_ref[1]}else{var ot=zone.offset(this.ts);c=tsToObj(this.ts,ot);invalid=Number.isNaN(c.year)?new Invalid("invalid input"):null;c=invalid?null:c;o=invalid?null:ot}}this._zone=zone;this.loc=config.loc||Locale.create();this.invalid=invalid;this.weekData=null;this.c=c;this.o=o;this.isLuxonDateTime=true}DateTime.now=function now(){return new DateTime({})};DateTime.local=function local(){var _lastOpts=lastOpts(arguments),opts=_lastOpts[0],args=_lastOpts[1],year=args[0],month=args[1],day=args[2],hour=args[3],minute=args[4],second=args[5],millisecond=args[6];return quickDT({year:year,month:month,day:day,hour:hour,minute:minute,second:second,millisecond:millisecond},opts)};DateTime.utc=function utc(){var _lastOpts2=lastOpts(arguments),opts=_lastOpts2[0],args=_lastOpts2[1],year=args[0],month=args[1],day=args[2],hour=args[3],minute=args[4],second=args[5],millisecond=args[6];opts.zone=FixedOffsetZone.utcInstance;return quickDT({year:year,month:month,day:day,hour:hour,minute:minute,second:second,millisecond:millisecond},opts)};DateTime.fromJSDate=function fromJSDate(date,options){if(options===void 0){options={}}var ts=isDate(date)?date.valueOf():NaN;if(Number.isNaN(ts)){return DateTime.invalid("invalid input")}var zoneToUse=normalizeZone(options.zone,Settings.defaultZone);if(!zoneToUse.isValid){return DateTime.invalid(unsupportedZone(zoneToUse))}return new DateTime({ts:ts,zone:zoneToUse,loc:Locale.fromObject(options)})};DateTime.fromMillis=function fromMillis(milliseconds,options){if(options===void 0){options={}}if(!isNumber(milliseconds)){throw new InvalidArgumentError("fromMillis requires a numerical input, but received a "+typeof milliseconds+" with value "+milliseconds)}else if(milliseconds<-MAX_DATE||milliseconds>MAX_DATE){return DateTime.invalid("Timestamp out of range")}else{return new DateTime({ts:milliseconds,zone:normalizeZone(options.zone,Settings.defaultZone),loc:Locale.fromObject(options)})}};DateTime.fromSeconds=function fromSeconds(seconds,options){if(options===void 0){options={}}if(!isNumber(seconds)){throw new InvalidArgumentError("fromSeconds requires a numerical input")}else{return new DateTime({ts:seconds*1e3,zone:normalizeZone(options.zone,Settings.defaultZone),loc:Locale.fromObject(options)})}};DateTime.fromObject=function fromObject(obj,opts){if(opts===void 0){opts={}}obj=obj||{};var zoneToUse=normalizeZone(opts.zone,Settings.defaultZone);if(!zoneToUse.isValid){return DateTime.invalid(unsupportedZone(zoneToUse))}var tsNow=Settings.now(),offsetProvis=!isUndefined(opts.specificOffset)?opts.specificOffset:zoneToUse.offset(tsNow),normalized=normalizeObject(obj,normalizeUnit),containsOrdinal=!isUndefined(normalized.ordinal),containsGregorYear=!isUndefined(normalized.year),containsGregorMD=!isUndefined(normalized.month)||!isUndefined(normalized.day),containsGregor=containsGregorYear||containsGregorMD,definiteWeekDef=normalized.weekYear||normalized.weekNumber,loc=Locale.fromObject(opts);if((containsGregor||containsOrdinal)&&definiteWeekDef){throw new ConflictingSpecificationError("Can't mix weekYear/weekNumber units with year/month/day or ordinals")}if(containsGregorMD&&containsOrdinal){throw new ConflictingSpecificationError("Can't mix ordinal dates with month/day")}var useWeekData=definiteWeekDef||normalized.weekday&&!containsGregor;var units,defaultValues,objNow=tsToObj(tsNow,offsetProvis);if(useWeekData){units=orderedWeekUnits;defaultValues=defaultWeekUnitValues;objNow=gregorianToWeek(objNow)}else if(containsOrdinal){units=orderedOrdinalUnits;defaultValues=defaultOrdinalUnitValues;objNow=gregorianToOrdinal(objNow)}else{units=orderedUnits;defaultValues=defaultUnitValues}var foundFirst=false;for(var _iterator3=_createForOfIteratorHelperLoose(units),_step3;!(_step3=_iterator3()).done;){var u=_step3.value;var v=normalized[u];if(!isUndefined(v)){foundFirst=true}else if(foundFirst){normalized[u]=defaultValues[u]}else{normalized[u]=objNow[u]}}var higherOrderInvalid=useWeekData?hasInvalidWeekData(normalized):containsOrdinal?hasInvalidOrdinalData(normalized):hasInvalidGregorianData(normalized),invalid=higherOrderInvalid||hasInvalidTimeData(normalized);if(invalid){return DateTime.invalid(invalid)}var gregorian=useWeekData?weekToGregorian(normalized):containsOrdinal?ordinalToGregorian(normalized):normalized,_objToTS2=objToTS(gregorian,offsetProvis,zoneToUse),tsFinal=_objToTS2[0],offsetFinal=_objToTS2[1],inst=new DateTime({ts:tsFinal,zone:zoneToUse,o:offsetFinal,loc:loc});if(normalized.weekday&&containsGregor&&obj.weekday!==inst.weekday){return DateTime.invalid("mismatched weekday","you can't specify both a weekday of "+normalized.weekday+" and a date of "+inst.toISO())}return inst};DateTime.fromISO=function fromISO(text,opts){if(opts===void 0){opts={}}var _parseISODate=parseISODate(text),vals=_parseISODate[0],parsedZone=_parseISODate[1];return parseDataToDateTime(vals,parsedZone,opts,"ISO 8601",text)};DateTime.fromRFC2822=function fromRFC2822(text,opts){if(opts===void 0){opts={}}var _parseRFC2822Date=parseRFC2822Date(text),vals=_parseRFC2822Date[0],parsedZone=_parseRFC2822Date[1];return parseDataToDateTime(vals,parsedZone,opts,"RFC 2822",text)};DateTime.fromHTTP=function fromHTTP(text,opts){if(opts===void 0){opts={}}var _parseHTTPDate=parseHTTPDate(text),vals=_parseHTTPDate[0],parsedZone=_parseHTTPDate[1];return parseDataToDateTime(vals,parsedZone,opts,"HTTP",opts)};DateTime.fromFormat=function fromFormat(text,fmt,opts){if(opts===void 0){opts={}}if(isUndefined(text)||isUndefined(fmt)){throw new InvalidArgumentError("fromFormat requires an input string and a format")}var _opts=opts,_opts$locale=_opts.locale,locale=_opts$locale===void 0?null:_opts$locale,_opts$numberingSystem=_opts.numberingSystem,numberingSystem=_opts$numberingSystem===void 0?null:_opts$numberingSystem,localeToUse=Locale.fromOpts({locale:locale,numberingSystem:numberingSystem,defaultToEN:true}),_parseFromTokens=parseFromTokens(localeToUse,text,fmt),vals=_parseFromTokens[0],parsedZone=_parseFromTokens[1],specificOffset=_parseFromTokens[2],invalid=_parseFromTokens[3];if(invalid){return DateTime.invalid(invalid)}else{return parseDataToDateTime(vals,parsedZone,opts,"format "+fmt,text,specificOffset)}};DateTime.fromString=function fromString(text,fmt,opts){if(opts===void 0){opts={}}return DateTime.fromFormat(text,fmt,opts)};DateTime.fromSQL=function fromSQL(text,opts){if(opts===void 0){opts={}}var _parseSQL=parseSQL(text),vals=_parseSQL[0],parsedZone=_parseSQL[1];return parseDataToDateTime(vals,parsedZone,opts,"SQL",text)};DateTime.invalid=function invalid(reason,explanation){if(explanation===void 0){explanation=null}if(!reason){throw new InvalidArgumentError("need to specify a reason the DateTime is invalid")}var invalid=reason instanceof Invalid?reason:new Invalid(reason,explanation);if(Settings.throwOnInvalid){throw new InvalidDateTimeError(invalid)}else{return new DateTime({invalid:invalid})}};DateTime.isDateTime=function isDateTime(o){return o&&o.isLuxonDateTime||false};var _proto=DateTime.prototype;_proto.get=function get(unit){return this[unit]};_proto.resolvedLocaleOptions=function resolvedLocaleOptions(opts){if(opts===void 0){opts={}}var _Formatter$create$res=Formatter.create(this.loc.clone(opts),opts).resolvedOptions(this),locale=_Formatter$create$res.locale,numberingSystem=_Formatter$create$res.numberingSystem,calendar=_Formatter$create$res.calendar;return{locale:locale,numberingSystem:numberingSystem,outputCalendar:calendar}};_proto.toUTC=function toUTC(offset,opts){if(offset===void 0){offset=0}if(opts===void 0){opts={}}return this.setZone(FixedOffsetZone.instance(offset),opts)};_proto.toLocal=function toLocal(){return this.setZone(Settings.defaultZone)};_proto.setZone=function setZone(zone,_temp){var _ref2=_temp===void 0?{}:_temp,_ref2$keepLocalTime=_ref2.keepLocalTime,keepLocalTime=_ref2$keepLocalTime===void 0?false:_ref2$keepLocalTime,_ref2$keepCalendarTim=_ref2.keepCalendarTime,keepCalendarTime=_ref2$keepCalendarTim===void 0?false:_ref2$keepCalendarTim;zone=normalizeZone(zone,Settings.defaultZone);if(zone.equals(this.zone)){return this}else if(!zone.isValid){return DateTime.invalid(unsupportedZone(zone))}else{var newTS=this.ts;if(keepLocalTime||keepCalendarTime){var offsetGuess=zone.offset(this.ts);var asObj=this.toObject();var _objToTS3=objToTS(asObj,offsetGuess,zone);newTS=_objToTS3[0]}return clone(this,{ts:newTS,zone:zone})}};_proto.reconfigure=function reconfigure(_temp2){var _ref3=_temp2===void 0?{}:_temp2,locale=_ref3.locale,numberingSystem=_ref3.numberingSystem,outputCalendar=_ref3.outputCalendar;var loc=this.loc.clone({locale:locale,numberingSystem:numberingSystem,outputCalendar:outputCalendar});return clone(this,{loc:loc})};_proto.setLocale=function setLocale(locale){return this.reconfigure({locale:locale})};_proto.set=function set(values){if(!this.isValid)return this;var normalized=normalizeObject(values,normalizeUnit),settingWeekStuff=!isUndefined(normalized.weekYear)||!isUndefined(normalized.weekNumber)||!isUndefined(normalized.weekday),containsOrdinal=!isUndefined(normalized.ordinal),containsGregorYear=!isUndefined(normalized.year),containsGregorMD=!isUndefined(normalized.month)||!isUndefined(normalized.day),containsGregor=containsGregorYear||containsGregorMD,definiteWeekDef=normalized.weekYear||normalized.weekNumber;if((containsGregor||containsOrdinal)&&definiteWeekDef){throw new ConflictingSpecificationError("Can't mix weekYear/weekNumber units with year/month/day or ordinals")}if(containsGregorMD&&containsOrdinal){throw new ConflictingSpecificationError("Can't mix ordinal dates with month/day")}var mixed;if(settingWeekStuff){mixed=weekToGregorian(_extends({},gregorianToWeek(this.c),normalized))}else if(!isUndefined(normalized.ordinal)){mixed=ordinalToGregorian(_extends({},gregorianToOrdinal(this.c),normalized))}else{mixed=_extends({},this.toObject(),normalized);if(isUndefined(normalized.day)){mixed.day=Math.min(daysInMonth(mixed.year,mixed.month),mixed.day)}}var _objToTS4=objToTS(mixed,this.o,this.zone),ts=_objToTS4[0],o=_objToTS4[1];return clone(this,{ts:ts,o:o})};_proto.plus=function plus(duration){if(!this.isValid)return this;var dur=Duration.fromDurationLike(duration);return clone(this,adjustTime(this,dur))};_proto.minus=function minus(duration){if(!this.isValid)return this;var dur=Duration.fromDurationLike(duration).negate();return clone(this,adjustTime(this,dur))};_proto.startOf=function startOf(unit){if(!this.isValid)return this;var o={},normalizedUnit=Duration.normalizeUnit(unit);switch(normalizedUnit){case"years":o.month=1;case"quarters":case"months":o.day=1;case"weeks":case"days":o.hour=0;case"hours":o.minute=0;case"minutes":o.second=0;case"seconds":o.millisecond=0;break}if(normalizedUnit==="weeks"){o.weekday=1}if(normalizedUnit==="quarters"){var q=Math.ceil(this.month/3);o.month=(q-1)*3+1}return this.set(o)};_proto.endOf=function endOf(unit){var _this$plus;return this.isValid?this.plus((_this$plus={},_this$plus[unit]=1,_this$plus)).startOf(unit).minus(1):this};_proto.toFormat=function toFormat(fmt,opts){if(opts===void 0){opts={}}return this.isValid?Formatter.create(this.loc.redefaultToEN(opts)).formatDateTimeFromString(this,fmt):INVALID};_proto.toLocaleString=function toLocaleString(formatOpts,opts){if(formatOpts===void 0){formatOpts=DATE_SHORT}if(opts===void 0){opts={}}return this.isValid?Formatter.create(this.loc.clone(opts),formatOpts).formatDateTime(this):INVALID};_proto.toLocaleParts=function toLocaleParts(opts){if(opts===void 0){opts={}}return this.isValid?Formatter.create(this.loc.clone(opts),opts).formatDateTimeParts(this):[]};_proto.toISO=function toISO(_temp3){var _ref4=_temp3===void 0?{}:_temp3,_ref4$format=_ref4.format,format=_ref4$format===void 0?"extended":_ref4$format,_ref4$suppressSeconds=_ref4.suppressSeconds,suppressSeconds=_ref4$suppressSeconds===void 0?false:_ref4$suppressSeconds,_ref4$suppressMillise=_ref4.suppressMilliseconds,suppressMilliseconds=_ref4$suppressMillise===void 0?false:_ref4$suppressMillise,_ref4$includeOffset=_ref4.includeOffset,includeOffset=_ref4$includeOffset===void 0?true:_ref4$includeOffset;if(!this.isValid){return null}var ext=format==="extended";var c=_toISODate(this,ext);c+="T";c+=_toISOTime(this,ext,suppressSeconds,suppressMilliseconds,includeOffset);return c};_proto.toISODate=function toISODate(_temp4){var _ref5=_temp4===void 0?{}:_temp4,_ref5$format=_ref5.format,format=_ref5$format===void 0?"extended":_ref5$format;if(!this.isValid){return null}return _toISODate(this,format==="extended")};_proto.toISOWeekDate=function toISOWeekDate(){return toTechFormat(this,"kkkk-'W'WW-c")};_proto.toISOTime=function toISOTime(_temp5){var _ref6=_temp5===void 0?{}:_temp5,_ref6$suppressMillise=_ref6.suppressMilliseconds,suppressMilliseconds=_ref6$suppressMillise===void 0?false:_ref6$suppressMillise,_ref6$suppressSeconds=_ref6.suppressSeconds,suppressSeconds=_ref6$suppressSeconds===void 0?false:_ref6$suppressSeconds,_ref6$includeOffset=_ref6.includeOffset,includeOffset=_ref6$includeOffset===void 0?true:_ref6$includeOffset,_ref6$includePrefix=_ref6.includePrefix,includePrefix=_ref6$includePrefix===void 0?false:_ref6$includePrefix,_ref6$format=_ref6.format,format=_ref6$format===void 0?"extended":_ref6$format;if(!this.isValid){return null}var c=includePrefix?"T":"";return c+_toISOTime(this,format==="extended",suppressSeconds,suppressMilliseconds,includeOffset)};_proto.toRFC2822=function toRFC2822(){return toTechFormat(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",false)};_proto.toHTTP=function toHTTP(){return toTechFormat(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")};_proto.toSQLDate=function toSQLDate(){if(!this.isValid){return null}return _toISODate(this,true)};_proto.toSQLTime=function toSQLTime(_temp6){var _ref7=_temp6===void 0?{}:_temp6,_ref7$includeOffset=_ref7.includeOffset,includeOffset=_ref7$includeOffset===void 0?true:_ref7$includeOffset,_ref7$includeZone=_ref7.includeZone,includeZone=_ref7$includeZone===void 0?false:_ref7$includeZone;var fmt="HH:mm:ss.SSS";if(includeZone||includeOffset){fmt+=" ";if(includeZone){fmt+="z"}else if(includeOffset){fmt+="ZZ"}}return toTechFormat(this,fmt,true)};_proto.toSQL=function toSQL(opts){if(opts===void 0){opts={}}if(!this.isValid){return null}return this.toSQLDate()+" "+this.toSQLTime(opts)};_proto.toString=function toString(){return this.isValid?this.toISO():INVALID};_proto.valueOf=function valueOf(){return this.toMillis()};_proto.toMillis=function toMillis(){return this.isValid?this.ts:NaN};_proto.toSeconds=function toSeconds(){return this.isValid?this.ts/1e3:NaN};_proto.toJSON=function toJSON(){return this.toISO()};_proto.toBSON=function toBSON(){return this.toJSDate()};_proto.toObject=function toObject(opts){if(opts===void 0){opts={}}if(!this.isValid)return{};var base=_extends({},this.c);if(opts.includeConfig){base.outputCalendar=this.outputCalendar;base.numberingSystem=this.loc.numberingSystem;base.locale=this.loc.locale}return base};_proto.toJSDate=function toJSDate(){return new Date(this.isValid?this.ts:NaN)};_proto.diff=function diff(otherDateTime,unit,opts){if(unit===void 0){unit="milliseconds"}if(opts===void 0){opts={}}if(!this.isValid||!otherDateTime.isValid){return Duration.invalid("created by diffing an invalid DateTime")}var durOpts=_extends({locale:this.locale,numberingSystem:this.numberingSystem},opts);var units=maybeArray(unit).map(Duration.normalizeUnit),otherIsLater=otherDateTime.valueOf()>this.valueOf(),earlier=otherIsLater?this:otherDateTime,later=otherIsLater?otherDateTime:this,diffed=_diff(earlier,later,units,durOpts);return otherIsLater?diffed.negate():diffed};_proto.diffNow=function diffNow(unit,opts){if(unit===void 0){unit="milliseconds"}if(opts===void 0){opts={}}return this.diff(DateTime.now(),unit,opts)};_proto.until=function until(otherDateTime){return this.isValid?Interval.fromDateTimes(this,otherDateTime):this};_proto.hasSame=function hasSame(otherDateTime,unit){if(!this.isValid)return false;var inputMs=otherDateTime.valueOf();var adjustedToZone=this.setZone(otherDateTime.zone,{keepLocalTime:true});return adjustedToZone.startOf(unit)<=inputMs&&inputMs<=adjustedToZone.endOf(unit)};_proto.equals=function equals(other){return this.isValid&&other.isValid&&this.valueOf()===other.valueOf()&&this.zone.equals(other.zone)&&this.loc.equals(other.loc)};_proto.toRelative=function toRelative(options){if(options===void 0){options={}}if(!this.isValid)return null;var base=options.base||DateTime.fromObject({},{zone:this.zone}),padding=options.padding?this<base?-options.padding:options.padding:0;var units=["years","months","days","hours","minutes","seconds"];var unit=options.unit;if(Array.isArray(options.unit)){units=options.unit;unit=undefined}return diffRelative(base,this.plus(padding),_extends({},options,{numeric:"always",units:units,unit:unit}))};_proto.toRelativeCalendar=function toRelativeCalendar(options){if(options===void 0){options={}}if(!this.isValid)return null;return diffRelative(options.base||DateTime.fromObject({},{zone:this.zone}),this,_extends({},options,{numeric:"auto",units:["years","months","days"],calendary:true}))};DateTime.min=function min(){for(var _len=arguments.length,dateTimes=new Array(_len),_key=0;_key<_len;_key++){dateTimes[_key]=arguments[_key]}if(!dateTimes.every(DateTime.isDateTime)){throw new InvalidArgumentError("min requires all arguments be DateTimes")}return bestBy(dateTimes,function(i){return i.valueOf()},Math.min)};DateTime.max=function max(){for(var _len2=arguments.length,dateTimes=new Array(_len2),_key2=0;_key2<_len2;_key2++){dateTimes[_key2]=arguments[_key2]}if(!dateTimes.every(DateTime.isDateTime)){throw new InvalidArgumentError("max requires all arguments be DateTimes")}return bestBy(dateTimes,function(i){return i.valueOf()},Math.max)};DateTime.fromFormatExplain=function fromFormatExplain(text,fmt,options){if(options===void 0){options={}}var _options=options,_options$locale=_options.locale,locale=_options$locale===void 0?null:_options$locale,_options$numberingSys=_options.numberingSystem,numberingSystem=_options$numberingSys===void 0?null:_options$numberingSys,localeToUse=Locale.fromOpts({locale:locale,numberingSystem:numberingSystem,defaultToEN:true});return explainFromTokens(localeToUse,text,fmt)};DateTime.fromStringExplain=function fromStringExplain(text,fmt,options){if(options===void 0){options={}}return DateTime.fromFormatExplain(text,fmt,options)};_createClass(DateTime,[{key:"isValid",get:function get(){return this.invalid===null}},{key:"invalidReason",get:function get(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function get(){return this.invalid?this.invalid.explanation:null}},{key:"locale",get:function get(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function get(){return this.isValid?this.loc.numberingSystem:null}},{key:"outputCalendar",get:function get(){return this.isValid?this.loc.outputCalendar:null}},{key:"zone",get:function get(){return this._zone}},{key:"zoneName",get:function get(){return this.isValid?this.zone.name:null}},{key:"year",get:function get(){return this.isValid?this.c.year:NaN}},{key:"quarter",get:function get(){return this.isValid?Math.ceil(this.c.month/3):NaN}},{key:"month",get:function get(){return this.isValid?this.c.month:NaN}},{key:"day",get:function get(){return this.isValid?this.c.day:NaN}},{key:"hour",get:function get(){return this.isValid?this.c.hour:NaN}},{key:"minute",get:function get(){return this.isValid?this.c.minute:NaN}},{key:"second",get:function get(){return this.isValid?this.c.second:NaN}},{key:"millisecond",get:function get(){return this.isValid?this.c.millisecond:NaN}},{key:"weekYear",get:function get(){return this.isValid?possiblyCachedWeekData(this).weekYear:NaN}},{key:"weekNumber",get:function get(){return this.isValid?possiblyCachedWeekData(this).weekNumber:NaN}},{key:"weekday",get:function get(){return this.isValid?possiblyCachedWeekData(this).weekday:NaN}},{key:"ordinal",get:function get(){return this.isValid?gregorianToOrdinal(this.c).ordinal:NaN}},{key:"monthShort",get:function get(){return this.isValid?Info.months("short",{locObj:this.loc})[this.month-1]:null}},{key:"monthLong",get:function get(){return this.isValid?Info.months("long",{locObj:this.loc})[this.month-1]:null}},{key:"weekdayShort",get:function get(){return this.isValid?Info.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}},{key:"weekdayLong",get:function get(){return this.isValid?Info.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}},{key:"offset",get:function get(){return this.isValid?+this.o:NaN}},{key:"offsetNameShort",get:function get(){if(this.isValid){return this.zone.offsetName(this.ts,{format:"short",locale:this.locale})}else{return null}}},{key:"offsetNameLong",get:function get(){if(this.isValid){return this.zone.offsetName(this.ts,{format:"long",locale:this.locale})}else{return null}}},{key:"isOffsetFixed",get:function get(){return this.isValid?this.zone.isUniversal:null}},{key:"isInDST",get:function get(){if(this.isOffsetFixed){return false}else{return this.offset>this.set({month:1}).offset||this.offset>this.set({month:5}).offset}}},{key:"isInLeapYear",get:function get(){return isLeapYear(this.year)}},{key:"daysInMonth",get:function get(){return daysInMonth(this.year,this.month)}},{key:"daysInYear",get:function get(){return this.isValid?daysInYear(this.year):NaN}},{key:"weeksInWeekYear",get:function get(){return this.isValid?weeksInWeekYear(this.weekYear):NaN}}],[{key:"DATE_SHORT",get:function get(){return DATE_SHORT}},{key:"DATE_MED",get:function get(){return DATE_MED}},{key:"DATE_MED_WITH_WEEKDAY",get:function get(){return DATE_MED_WITH_WEEKDAY}},{key:"DATE_FULL",get:function get(){return DATE_FULL}},{key:"DATE_HUGE",get:function get(){return DATE_HUGE}},{key:"TIME_SIMPLE",get:function get(){return TIME_SIMPLE}},{key:"TIME_WITH_SECONDS",get:function get(){return TIME_WITH_SECONDS}},{key:"TIME_WITH_SHORT_OFFSET",get:function get(){return TIME_WITH_SHORT_OFFSET}},{key:"TIME_WITH_LONG_OFFSET",get:function get(){return TIME_WITH_LONG_OFFSET}},{key:"TIME_24_SIMPLE",get:function get(){return TIME_24_SIMPLE}},{key:"TIME_24_WITH_SECONDS",get:function get(){return TIME_24_WITH_SECONDS}},{key:"TIME_24_WITH_SHORT_OFFSET",get:function get(){return TIME_24_WITH_SHORT_OFFSET}},{key:"TIME_24_WITH_LONG_OFFSET",get:function get(){return TIME_24_WITH_LONG_OFFSET}},{key:"DATETIME_SHORT",get:function get(){return DATETIME_SHORT}},{key:"DATETIME_SHORT_WITH_SECONDS",get:function get(){return DATETIME_SHORT_WITH_SECONDS}},{key:"DATETIME_MED",get:function get(){return DATETIME_MED}},{key:"DATETIME_MED_WITH_SECONDS",get:function get(){return DATETIME_MED_WITH_SECONDS}},{key:"DATETIME_MED_WITH_WEEKDAY",get:function get(){return DATETIME_MED_WITH_WEEKDAY}},{key:"DATETIME_FULL",get:function get(){return DATETIME_FULL}},{key:"DATETIME_FULL_WITH_SECONDS",get:function get(){return DATETIME_FULL_WITH_SECONDS}},{key:"DATETIME_HUGE",get:function get(){return DATETIME_HUGE}},{key:"DATETIME_HUGE_WITH_SECONDS",get:function get(){return DATETIME_HUGE_WITH_SECONDS}}]);return DateTime}();function friendlyDateTime(dateTimeish){if(DateTime.isDateTime(dateTimeish)){return dateTimeish}else if(dateTimeish&&dateTimeish.valueOf&&isNumber(dateTimeish.valueOf())){return DateTime.fromJSDate(dateTimeish)}else if(dateTimeish&&typeof dateTimeish==="object"){return DateTime.fromObject(dateTimeish)}else{throw new InvalidArgumentError("Unknown datetime argument: "+dateTimeish+", of type "+typeof dateTimeish)}}var VERSION="2.3.0";exports.DateTime=DateTime;exports.Duration=Duration;exports.FixedOffsetZone=FixedOffsetZone;exports.IANAZone=IANAZone;exports.Info=Info;exports.Interval=Interval;exports.InvalidZone=InvalidZone;exports.Settings=Settings;exports.SystemZone=SystemZone;exports.VERSION=VERSION;exports.Zone=Zone},{}],36:[function(require,module,exports){(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?module.exports=factory():typeof define==="function"&&define.amd?define(factory):global.moment=factory()})(this,function(){"use strict";var hookCallback;function hooks(){return hookCallback.apply(null,arguments)}function setHookCallback(callback){hookCallback=callback}function isArray(input){return input instanceof Array||Object.prototype.toString.call(input)==="[object Array]"}function isObject(input){return input!=null&&Object.prototype.toString.call(input)==="[object Object]"}function hasOwnProp(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function isObjectEmpty(obj){if(Object.getOwnPropertyNames){return Object.getOwnPropertyNames(obj).length===0}else{var k;for(k in obj){if(hasOwnProp(obj,k)){return false}}return true}}function isUndefined(input){return input===void 0}function isNumber(input){return typeof input==="number"||Object.prototype.toString.call(input)==="[object Number]"}function isDate(input){return input instanceof Date||Object.prototype.toString.call(input)==="[object Date]"}function map(arr,fn){var res=[],i;for(i=0;i<arr.length;++i){res.push(fn(arr[i],i))}return res}function extend(a,b){for(var i in b){if(hasOwnProp(b,i)){a[i]=b[i]}}if(hasOwnProp(b,"toString")){a.toString=b.toString}if(hasOwnProp(b,"valueOf")){a.valueOf=b.valueOf}return a}function createUTC(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,true).utc()}function defaultParsingFlags(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidEra:null,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false,parsedDateParts:[],era:null,meridiem:null,rfc2822:false,weekdayMismatch:false}}function getParsingFlags(m){if(m._pf==null){m._pf=defaultParsingFlags()}return m._pf}var some;if(Array.prototype.some){some=Array.prototype.some}else{some=function(fun){var t=Object(this),len=t.length>>>0,i;for(i=0;i<len;i++){if(i in t&&fun.call(this,t[i],i,t)){return true}}return false}}function isValid(m){if(m._isValid==null){var flags=getParsingFlags(m),parsedParts=some.call(flags.parsedDateParts,function(i){return i!=null}),isNowValid=!isNaN(m._d.getTime())&&flags.overflow<0&&!flags.empty&&!flags.invalidEra&&!flags.invalidMonth&&!flags.invalidWeekday&&!flags.weekdayMismatch&&!flags.nullInput&&!flags.invalidFormat&&!flags.userInvalidated&&(!flags.meridiem||flags.meridiem&&parsedParts);if(m._strict){isNowValid=isNowValid&&flags.charsLeftOver===0&&flags.unusedTokens.length===0&&flags.bigHour===undefined}if(Object.isFrozen==null||!Object.isFrozen(m)){m._isValid=isNowValid}else{return isNowValid}}return m._isValid}function createInvalid(flags){var m=createUTC(NaN);if(flags!=null){extend(getParsingFlags(m),flags)}else{getParsingFlags(m).userInvalidated=true}return m}var momentProperties=hooks.momentProperties=[],updateInProgress=false;function copyConfig(to,from){var i,prop,val;if(!isUndefined(from._isAMomentObject)){to._isAMomentObject=from._isAMomentObject}if(!isUndefined(from._i)){to._i=from._i}if(!isUndefined(from._f)){to._f=from._f}if(!isUndefined(from._l)){to._l=from._l}if(!isUndefined(from._strict)){to._strict=from._strict}if(!isUndefined(from._tzm)){to._tzm=from._tzm}if(!isUndefined(from._isUTC)){to._isUTC=from._isUTC}if(!isUndefined(from._offset)){to._offset=from._offset}if(!isUndefined(from._pf)){to._pf=getParsingFlags(from)}if(!isUndefined(from._locale)){to._locale=from._locale}if(momentProperties.length>0){for(i=0;i<momentProperties.length;i++){prop=momentProperties[i];val=from[prop];if(!isUndefined(val)){to[prop]=val}}}return to}function Moment(config){copyConfig(this,config);this._d=new Date(config._d!=null?config._d.getTime():NaN);if(!this.isValid()){this._d=new Date(NaN)}if(updateInProgress===false){updateInProgress=true;hooks.updateOffset(this);updateInProgress=false}}function isMoment(obj){return obj instanceof Moment||obj!=null&&obj._isAMomentObject!=null}function warn(msg){if(hooks.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+msg)}}function deprecate(msg,fn){var firstTime=true;return extend(function(){if(hooks.deprecationHandler!=null){hooks.deprecationHandler(null,msg)}if(firstTime){var args=[],arg,i,key;for(i=0;i<arguments.length;i++){arg="";if(typeof arguments[i]==="object"){arg+="\n["+i+"] ";for(key in arguments[0]){if(hasOwnProp(arguments[0],key)){arg+=key+": "+arguments[0][key]+", "}}arg=arg.slice(0,-2)}else{arg=arguments[i]}args.push(arg)}warn(msg+"\nArguments: "+Array.prototype.slice.call(args).join("")+"\n"+(new Error).stack);firstTime=false}return fn.apply(this,arguments)},fn)}var deprecations={};function deprecateSimple(name,msg){if(hooks.deprecationHandler!=null){hooks.deprecationHandler(name,msg)}if(!deprecations[name]){warn(msg);deprecations[name]=true}}hooks.suppressDeprecationWarnings=false;hooks.deprecationHandler=null;function isFunction(input){return typeof Function!=="undefined"&&input instanceof Function||Object.prototype.toString.call(input)==="[object Function]"}function set(config){var prop,i;for(i in config){if(hasOwnProp(config,i)){prop=config[i];if(isFunction(prop)){this[i]=prop}else{this["_"+i]=prop}}}this._config=config;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function mergeConfigs(parentConfig,childConfig){var res=extend({},parentConfig),prop;for(prop in childConfig){if(hasOwnProp(childConfig,prop)){if(isObject(parentConfig[prop])&&isObject(childConfig[prop])){res[prop]={};extend(res[prop],parentConfig[prop]);extend(res[prop],childConfig[prop])}else if(childConfig[prop]!=null){res[prop]=childConfig[prop]}else{delete res[prop]}}}for(prop in parentConfig){if(hasOwnProp(parentConfig,prop)&&!hasOwnProp(childConfig,prop)&&isObject(parentConfig[prop])){res[prop]=extend({},res[prop])}}return res}function Locale(config){if(config!=null){this.set(config)}}var keys;if(Object.keys){keys=Object.keys}else{keys=function(obj){var i,res=[];for(i in obj){if(hasOwnProp(obj,i)){res.push(i)}}return res}}var defaultCalendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function calendar(key,mom,now){var output=this._calendar[key]||this._calendar["sameElse"];return isFunction(output)?output.call(mom,now):output}function zeroFill(number,targetLength,forceSign){var absNumber=""+Math.abs(number),zerosToFill=targetLength-absNumber.length,sign=number>=0;return(sign?forceSign?"+":"":"-")+Math.pow(10,Math.max(0,zerosToFill)).toString().substr(1)+absNumber}var formattingTokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,formatFunctions={},formatTokenFunctions={};function addFormatToken(token,padded,ordinal,callback){var func=callback;if(typeof callback==="string"){func=function(){return this[callback]()}}if(token){formatTokenFunctions[token]=func}if(padded){formatTokenFunctions[padded[0]]=function(){return zeroFill(func.apply(this,arguments),padded[1],padded[2])}}if(ordinal){formatTokenFunctions[ordinal]=function(){return this.localeData().ordinal(func.apply(this,arguments),token)}}}function removeFormattingTokens(input){if(input.match(/\[[\s\S]/)){return input.replace(/^\[|\]$/g,"")}return input.replace(/\\/g,"")}function makeFormatFunction(format){var array=format.match(formattingTokens),i,length;for(i=0,length=array.length;i<length;i++){if(formatTokenFunctions[array[i]]){array[i]=formatTokenFunctions[array[i]]}else{array[i]=removeFormattingTokens(array[i])}}return function(mom){var output="",i;for(i=0;i<length;i++){output+=isFunction(array[i])?array[i].call(mom,format):array[i]}return output}}function formatMoment(m,format){if(!m.isValid()){return m.localeData().invalidDate()}format=expandFormat(format,m.localeData());formatFunctions[format]=formatFunctions[format]||makeFormatFunction(format);return formatFunctions[format](m)}function expandFormat(format,locale){var i=5;function replaceLongDateFormatTokens(input){return locale.longDateFormat(input)||input}localFormattingTokens.lastIndex=0;while(i>=0&&localFormattingTokens.test(format)){format=format.replace(localFormattingTokens,replaceLongDateFormatTokens);localFormattingTokens.lastIndex=0;i-=1}return format}var defaultLongDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function longDateFormat(key){var format=this._longDateFormat[key],formatUpper=this._longDateFormat[key.toUpperCase()];if(format||!formatUpper){return format}this._longDateFormat[key]=formatUpper.match(formattingTokens).map(function(tok){if(tok==="MMMM"||tok==="MM"||tok==="DD"||tok==="dddd"){return tok.slice(1)}return tok}).join("");return this._longDateFormat[key]}var defaultInvalidDate="Invalid date";function invalidDate(){return this._invalidDate}var defaultOrdinal="%d",defaultDayOfMonthOrdinalParse=/\d{1,2}/;function ordinal(number){return this._ordinal.replace("%d",number)}var defaultRelativeTime={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function relativeTime(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return isFunction(output)?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number)}function pastFuture(diff,output){var format=this._relativeTime[diff>0?"future":"past"];return isFunction(format)?format(output):format.replace(/%s/i,output)}var aliases={};function addUnitAlias(unit,shorthand){var lowerCase=unit.toLowerCase();aliases[lowerCase]=aliases[lowerCase+"s"]=aliases[shorthand]=unit}function normalizeUnits(units){return typeof units==="string"?aliases[units]||aliases[units.toLowerCase()]:undefined}function normalizeObjectUnits(inputObject){var normalizedInput={},normalizedProp,prop;for(prop in inputObject){if(hasOwnProp(inputObject,prop)){normalizedProp=normalizeUnits(prop);if(normalizedProp){normalizedInput[normalizedProp]=inputObject[prop]}}}return normalizedInput}var priorities={};function addUnitPriority(unit,priority){priorities[unit]=priority}function getPrioritizedUnits(unitsObj){var units=[],u;for(u in unitsObj){if(hasOwnProp(unitsObj,u)){units.push({unit:u,priority:priorities[u]})}}units.sort(function(a,b){return a.priority-b.priority});return units}function isLeapYear(year){return year%4===0&&year%100!==0||year%400===0}function absFloor(number){if(number<0){return Math.ceil(number)||0}else{return Math.floor(number)}}function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;if(coercedNumber!==0&&isFinite(coercedNumber)){value=absFloor(coercedNumber)}return value}function makeGetSet(unit,keepTime){return function(value){if(value!=null){set$1(this,unit,value);hooks.updateOffset(this,keepTime);return this}else{return get(this,unit)}}}function get(mom,unit){return mom.isValid()?mom._d["get"+(mom._isUTC?"UTC":"")+unit]():NaN}function set$1(mom,unit,value){if(mom.isValid()&&!isNaN(value)){if(unit==="FullYear"&&isLeapYear(mom.year())&&mom.month()===1&&mom.date()===29){value=toInt(value);mom._d["set"+(mom._isUTC?"UTC":"")+unit](value,mom.month(),daysInMonth(value,mom.month()))}else{mom._d["set"+(mom._isUTC?"UTC":"")+unit](value)}}}function stringGet(units){units=normalizeUnits(units);if(isFunction(this[units])){return this[units]()}return this}function stringSet(units,value){if(typeof units==="object"){units=normalizeObjectUnits(units);var prioritized=getPrioritizedUnits(units),i;for(i=0;i<prioritized.length;i++){this[prioritized[i].unit](units[prioritized[i].unit])}}else{units=normalizeUnits(units);if(isFunction(this[units])){return this[units](value)}}return this}var match1=/\d/,match2=/\d\d/,match3=/\d{3}/,match4=/\d{4}/,match6=/[+-]?\d{6}/,match1to2=/\d\d?/,match3to4=/\d\d\d\d?/,match5to6=/\d\d\d\d\d\d?/,match1to3=/\d{1,3}/,match1to4=/\d{1,4}/,match1to6=/[+-]?\d{1,6}/,matchUnsigned=/\d+/,matchSigned=/[+-]?\d+/,matchOffset=/Z|[+-]\d\d:?\d\d/gi,matchShortOffset=/Z|[+-]\d\d(?::?\d\d)?/gi,matchTimestamp=/[+-]?\d+(\.\d{1,3})?/,matchWord=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,regexes;regexes={};function addRegexToken(token,regex,strictRegex){regexes[token]=isFunction(regex)?regex:function(isStrict,localeData){return isStrict&&strictRegex?strictRegex:regex}}function getParseRegexForToken(token,config){if(!hasOwnProp(regexes,token)){return new RegExp(unescapeFormat(token))}return regexes[token](config._strict,config._locale)}function unescapeFormat(s){return regexEscape(s.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4}))}function regexEscape(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var tokens={};function addParseToken(token,callback){var i,func=callback;if(typeof token==="string"){token=[token]}if(isNumber(callback)){func=function(input,array){array[callback]=toInt(input)}}for(i=0;i<token.length;i++){tokens[token[i]]=func}}function addWeekParseToken(token,callback){addParseToken(token,function(input,array,config,token){config._w=config._w||{};callback(input,config._w,config,token)})}function addTimeToArrayFromToken(token,input,config){if(input!=null&&hasOwnProp(tokens,token)){tokens[token](input,config._a,config,token)}}var YEAR=0,MONTH=1,DATE=2,HOUR=3,MINUTE=4,SECOND=5,MILLISECOND=6,WEEK=7,WEEKDAY=8;function mod(n,x){return(n%x+x)%x}var indexOf;if(Array.prototype.indexOf){indexOf=Array.prototype.indexOf}else{indexOf=function(o){var i;for(i=0;i<this.length;++i){if(this[i]===o){return i}}return-1}}function daysInMonth(year,month){if(isNaN(year)||isNaN(month)){return NaN}var modMonth=mod(month,12);year+=(month-modMonth)/12;return modMonth===1?isLeapYear(year)?29:28:31-modMonth%7%2}addFormatToken("M",["MM",2],"Mo",function(){return this.month()+1});addFormatToken("MMM",0,0,function(format){return this.localeData().monthsShort(this,format)});addFormatToken("MMMM",0,0,function(format){return this.localeData().months(this,format)});addUnitAlias("month","M");addUnitPriority("month",8);addRegexToken("M",match1to2);addRegexToken("MM",match1to2,match2);addRegexToken("MMM",function(isStrict,locale){return locale.monthsShortRegex(isStrict)});addRegexToken("MMMM",function(isStrict,locale){return locale.monthsRegex(isStrict)});addParseToken(["M","MM"],function(input,array){array[MONTH]=toInt(input)-1});addParseToken(["MMM","MMMM"],function(input,array,config,token){var month=config._locale.monthsParse(input,token,config._strict);if(month!=null){array[MONTH]=month}else{getParsingFlags(config).invalidMonth=input}});var defaultLocaleMonths="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),defaultLocaleMonthsShort="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),MONTHS_IN_FORMAT=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,defaultMonthsShortRegex=matchWord,defaultMonthsRegex=matchWord;function localeMonths(m,format){if(!m){return isArray(this._months)?this._months:this._months["standalone"]}return isArray(this._months)?this._months[m.month()]:this._months[(this._months.isFormat||MONTHS_IN_FORMAT).test(format)?"format":"standalone"][m.month()]}function localeMonthsShort(m,format){if(!m){return isArray(this._monthsShort)?this._monthsShort:this._monthsShort["standalone"]}return isArray(this._monthsShort)?this._monthsShort[m.month()]:this._monthsShort[MONTHS_IN_FORMAT.test(format)?"format":"standalone"][m.month()]}function handleStrictParse(monthName,format,strict){var i,ii,mom,llc=monthName.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];for(i=0;i<12;++i){mom=createUTC([2e3,i]);this._shortMonthsParse[i]=this.monthsShort(mom,"").toLocaleLowerCase();this._longMonthsParse[i]=this.months(mom,"").toLocaleLowerCase()}}if(strict){if(format==="MMM"){ii=indexOf.call(this._shortMonthsParse,llc);return ii!==-1?ii:null}else{ii=indexOf.call(this._longMonthsParse,llc);return ii!==-1?ii:null}}else{if(format==="MMM"){ii=indexOf.call(this._shortMonthsParse,llc);if(ii!==-1){return ii}ii=indexOf.call(this._longMonthsParse,llc);return ii!==-1?ii:null}else{ii=indexOf.call(this._longMonthsParse,llc);if(ii!==-1){return ii}ii=indexOf.call(this._shortMonthsParse,llc);return ii!==-1?ii:null}}}function localeMonthsParse(monthName,format,strict){var i,mom,regex;if(this._monthsParseExact){return handleStrictParse.call(this,monthName,format,strict)}if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(i=0;i<12;i++){mom=createUTC([2e3,i]);if(strict&&!this._longMonthsParse[i]){this._longMonthsParse[i]=new RegExp("^"+this.months(mom,"").replace(".","")+"$","i");this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(mom,"").replace(".","")+"$","i")}if(!strict&&!this._monthsParse[i]){regex="^"+this.months(mom,"")+"|^"+this.monthsShort(mom,"");this._monthsParse[i]=new RegExp(regex.replace(".",""),"i")}if(strict&&format==="MMMM"&&this._longMonthsParse[i].test(monthName)){return i}else if(strict&&format==="MMM"&&this._shortMonthsParse[i].test(monthName)){return i}else if(!strict&&this._monthsParse[i].test(monthName)){return i}}}function setMonth(mom,value){var dayOfMonth;if(!mom.isValid()){return mom}if(typeof value==="string"){if(/^\d+$/.test(value)){value=toInt(value)}else{value=mom.localeData().monthsParse(value);if(!isNumber(value)){return mom}}}dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value));mom._d["set"+(mom._isUTC?"UTC":"")+"Month"](value,dayOfMonth);return mom}function getSetMonth(value){if(value!=null){setMonth(this,value);hooks.updateOffset(this,true);return this}else{return get(this,"Month")}}function getDaysInMonth(){return daysInMonth(this.year(),this.month())}function monthsShortRegex(isStrict){if(this._monthsParseExact){if(!hasOwnProp(this,"_monthsRegex")){computeMonthsParse.call(this)}if(isStrict){return this._monthsShortStrictRegex}else{return this._monthsShortRegex}}else{if(!hasOwnProp(this,"_monthsShortRegex")){this._monthsShortRegex=defaultMonthsShortRegex}return this._monthsShortStrictRegex&&isStrict?this._monthsShortStrictRegex:this._monthsShortRegex}}function monthsRegex(isStrict){if(this._monthsParseExact){if(!hasOwnProp(this,"_monthsRegex")){computeMonthsParse.call(this)}if(isStrict){return this._monthsStrictRegex}else{return this._monthsRegex}}else{if(!hasOwnProp(this,"_monthsRegex")){this._monthsRegex=defaultMonthsRegex}return this._monthsStrictRegex&&isStrict?this._monthsStrictRegex:this._monthsRegex}}function computeMonthsParse(){function cmpLenRev(a,b){return b.length-a.length}var shortPieces=[],longPieces=[],mixedPieces=[],i,mom;for(i=0;i<12;i++){mom=createUTC([2e3,i]);shortPieces.push(this.monthsShort(mom,""));longPieces.push(this.months(mom,""));mixedPieces.push(this.months(mom,""));mixedPieces.push(this.monthsShort(mom,""))}shortPieces.sort(cmpLenRev);longPieces.sort(cmpLenRev);mixedPieces.sort(cmpLenRev);for(i=0;i<12;i++){shortPieces[i]=regexEscape(shortPieces[i]);longPieces[i]=regexEscape(longPieces[i])}for(i=0;i<24;i++){mixedPieces[i]=regexEscape(mixedPieces[i])}this._monthsRegex=new RegExp("^("+mixedPieces.join("|")+")","i");this._monthsShortRegex=this._monthsRegex;this._monthsStrictRegex=new RegExp("^("+longPieces.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+shortPieces.join("|")+")","i")}addFormatToken("Y",0,0,function(){var y=this.year();return y<=9999?zeroFill(y,4):"+"+y});addFormatToken(0,["YY",2],0,function(){return this.year()%100});addFormatToken(0,["YYYY",4],0,"year");addFormatToken(0,["YYYYY",5],0,"year");addFormatToken(0,["YYYYYY",6,true],0,"year");addUnitAlias("year","y");addUnitPriority("year",1);addRegexToken("Y",matchSigned);addRegexToken("YY",match1to2,match2);addRegexToken("YYYY",match1to4,match4);addRegexToken("YYYYY",match1to6,match6);addRegexToken("YYYYYY",match1to6,match6);addParseToken(["YYYYY","YYYYYY"],YEAR);addParseToken("YYYY",function(input,array){array[YEAR]=input.length===2?hooks.parseTwoDigitYear(input):toInt(input)});addParseToken("YY",function(input,array){array[YEAR]=hooks.parseTwoDigitYear(input)});addParseToken("Y",function(input,array){array[YEAR]=parseInt(input,10)});function daysInYear(year){return isLeapYear(year)?366:365}hooks.parseTwoDigitYear=function(input){return toInt(input)+(toInt(input)>68?1900:2e3)};var getSetYear=makeGetSet("FullYear",true);function getIsLeapYear(){return isLeapYear(this.year())}function createDate(y,m,d,h,M,s,ms){var date;if(y<100&&y>=0){date=new Date(y+400,m,d,h,M,s,ms);if(isFinite(date.getFullYear())){date.setFullYear(y)}}else{date=new Date(y,m,d,h,M,s,ms)}return date}function createUTCDate(y){var date,args;if(y<100&&y>=0){args=Array.prototype.slice.call(arguments);args[0]=y+400;date=new Date(Date.UTC.apply(null,args));if(isFinite(date.getUTCFullYear())){date.setUTCFullYear(y)}}else{date=new Date(Date.UTC.apply(null,arguments))}return date}function firstWeekOffset(year,dow,doy){var fwd=7+dow-doy,fwdlw=(7+createUTCDate(year,0,fwd).getUTCDay()-dow)%7;return-fwdlw+fwd-1}function dayOfYearFromWeeks(year,week,weekday,dow,doy){var localWeekday=(7+weekday-dow)%7,weekOffset=firstWeekOffset(year,dow,doy),dayOfYear=1+7*(week-1)+localWeekday+weekOffset,resYear,resDayOfYear;if(dayOfYear<=0){resYear=year-1;resDayOfYear=daysInYear(resYear)+dayOfYear}else if(dayOfYear>daysInYear(year)){resYear=year+1;resDayOfYear=dayOfYear-daysInYear(year)}else{resYear=year;resDayOfYear=dayOfYear}return{year:resYear,dayOfYear:resDayOfYear}}function weekOfYear(mom,dow,doy){var weekOffset=firstWeekOffset(mom.year(),dow,doy),week=Math.floor((mom.dayOfYear()-weekOffset-1)/7)+1,resWeek,resYear;if(week<1){resYear=mom.year()-1;resWeek=week+weeksInYear(resYear,dow,doy)}else if(week>weeksInYear(mom.year(),dow,doy)){resWeek=week-weeksInYear(mom.year(),dow,doy);resYear=mom.year()+1}else{resYear=mom.year();resWeek=week}return{week:resWeek,year:resYear}}function weeksInYear(year,dow,doy){var weekOffset=firstWeekOffset(year,dow,doy),weekOffsetNext=firstWeekOffset(year+1,dow,doy);return(daysInYear(year)-weekOffset+weekOffsetNext)/7}addFormatToken("w",["ww",2],"wo","week");addFormatToken("W",["WW",2],"Wo","isoWeek");addUnitAlias("week","w");addUnitAlias("isoWeek","W");addUnitPriority("week",5);addUnitPriority("isoWeek",5);addRegexToken("w",match1to2);addRegexToken("ww",match1to2,match2);addRegexToken("W",match1to2);addRegexToken("WW",match1to2,match2);addWeekParseToken(["w","ww","W","WW"],function(input,week,config,token){week[token.substr(0,1)]=toInt(input)});function localeWeek(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week}var defaultLocaleWeek={dow:0,doy:6};function localeFirstDayOfWeek(){return this._week.dow}function localeFirstDayOfYear(){return this._week.doy}function getSetWeek(input){var week=this.localeData().week(this);return input==null?week:this.add((input-week)*7,"d")}function getSetISOWeek(input){var week=weekOfYear(this,1,4).week;return input==null?week:this.add((input-week)*7,"d")}addFormatToken("d",0,"do","day");addFormatToken("dd",0,0,function(format){return this.localeData().weekdaysMin(this,format)});addFormatToken("ddd",0,0,function(format){return this.localeData().weekdaysShort(this,format)});addFormatToken("dddd",0,0,function(format){return this.localeData().weekdays(this,format)});addFormatToken("e",0,0,"weekday");addFormatToken("E",0,0,"isoWeekday");addUnitAlias("day","d");addUnitAlias("weekday","e");addUnitAlias("isoWeekday","E");addUnitPriority("day",11);addUnitPriority("weekday",11);addUnitPriority("isoWeekday",11);addRegexToken("d",match1to2);addRegexToken("e",match1to2);addRegexToken("E",match1to2);addRegexToken("dd",function(isStrict,locale){return locale.weekdaysMinRegex(isStrict)});addRegexToken("ddd",function(isStrict,locale){return locale.weekdaysShortRegex(isStrict)});addRegexToken("dddd",function(isStrict,locale){return locale.weekdaysRegex(isStrict)});addWeekParseToken(["dd","ddd","dddd"],function(input,week,config,token){var weekday=config._locale.weekdaysParse(input,token,config._strict);if(weekday!=null){week.d=weekday}else{getParsingFlags(config).invalidWeekday=input}});addWeekParseToken(["d","e","E"],function(input,week,config,token){week[token]=toInt(input)});function parseWeekday(input,locale){if(typeof input!=="string"){return input}if(!isNaN(input)){return parseInt(input,10)}input=locale.weekdaysParse(input);if(typeof input==="number"){return input}return null}function parseIsoWeekday(input,locale){if(typeof input==="string"){return locale.weekdaysParse(input)%7||7}return isNaN(input)?null:input}function shiftWeekdays(ws,n){return ws.slice(n,7).concat(ws.slice(0,n))}var defaultLocaleWeekdays="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),defaultLocaleWeekdaysShort="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),defaultLocaleWeekdaysMin="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),defaultWeekdaysRegex=matchWord,defaultWeekdaysShortRegex=matchWord,defaultWeekdaysMinRegex=matchWord;function localeWeekdays(m,format){var weekdays=isArray(this._weekdays)?this._weekdays:this._weekdays[m&&m!==true&&this._weekdays.isFormat.test(format)?"format":"standalone"];return m===true?shiftWeekdays(weekdays,this._week.dow):m?weekdays[m.day()]:weekdays}function localeWeekdaysShort(m){return m===true?shiftWeekdays(this._weekdaysShort,this._week.dow):m?this._weekdaysShort[m.day()]:this._weekdaysShort}function localeWeekdaysMin(m){return m===true?shiftWeekdays(this._weekdaysMin,this._week.dow):m?this._weekdaysMin[m.day()]:this._weekdaysMin}function handleStrictParse$1(weekdayName,format,strict){var i,ii,mom,llc=weekdayName.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[];this._shortWeekdaysParse=[];this._minWeekdaysParse=[];for(i=0;i<7;++i){mom=createUTC([2e3,1]).day(i);this._minWeekdaysParse[i]=this.weekdaysMin(mom,"").toLocaleLowerCase();this._shortWeekdaysParse[i]=this.weekdaysShort(mom,"").toLocaleLowerCase();this._weekdaysParse[i]=this.weekdays(mom,"").toLocaleLowerCase()}}if(strict){if(format==="dddd"){ii=indexOf.call(this._weekdaysParse,llc);return ii!==-1?ii:null}else if(format==="ddd"){ii=indexOf.call(this._shortWeekdaysParse,llc);return ii!==-1?ii:null}else{ii=indexOf.call(this._minWeekdaysParse,llc);return ii!==-1?ii:null}}else{if(format==="dddd"){ii=indexOf.call(this._weekdaysParse,llc);if(ii!==-1){return ii}ii=indexOf.call(this._shortWeekdaysParse,llc);if(ii!==-1){return ii}ii=indexOf.call(this._minWeekdaysParse,llc);return ii!==-1?ii:null}else if(format==="ddd"){ii=indexOf.call(this._shortWeekdaysParse,llc);if(ii!==-1){return ii}ii=indexOf.call(this._weekdaysParse,llc);if(ii!==-1){return ii}ii=indexOf.call(this._minWeekdaysParse,llc);return ii!==-1?ii:null}else{ii=indexOf.call(this._minWeekdaysParse,llc);if(ii!==-1){return ii}ii=indexOf.call(this._weekdaysParse,llc);if(ii!==-1){return ii}ii=indexOf.call(this._shortWeekdaysParse,llc);return ii!==-1?ii:null}}}function localeWeekdaysParse(weekdayName,format,strict){var i,mom,regex;if(this._weekdaysParseExact){return handleStrictParse$1.call(this,weekdayName,format,strict)}if(!this._weekdaysParse){this._weekdaysParse=[];this._minWeekdaysParse=[];this._shortWeekdaysParse=[];this._fullWeekdaysParse=[]}for(i=0;i<7;i++){mom=createUTC([2e3,1]).day(i);if(strict&&!this._fullWeekdaysParse[i]){this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(mom,"").replace(".","\\.?")+"$","i");this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(mom,"").replace(".","\\.?")+"$","i");this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(mom,"").replace(".","\\.?")+"$","i")}if(!this._weekdaysParse[i]){regex="^"+this.weekdays(mom,"")+"|^"+this.weekdaysShort(mom,"")+"|^"+this.weekdaysMin(mom,"");this._weekdaysParse[i]=new RegExp(regex.replace(".",""),"i")}if(strict&&format==="dddd"&&this._fullWeekdaysParse[i].test(weekdayName)){return i}else if(strict&&format==="ddd"&&this._shortWeekdaysParse[i].test(weekdayName)){return i}else if(strict&&format==="dd"&&this._minWeekdaysParse[i].test(weekdayName)){return i}else if(!strict&&this._weekdaysParse[i].test(weekdayName)){return i}}}function getSetDayOfWeek(input){if(!this.isValid()){return input!=null?this:NaN}var day=this._isUTC?this._d.getUTCDay():this._d.getDay();if(input!=null){input=parseWeekday(input,this.localeData());return this.add(input-day,"d")}else{return day}}function getSetLocaleDayOfWeek(input){if(!this.isValid()){return input!=null?this:NaN}var weekday=(this.day()+7-this.localeData()._week.dow)%7;return input==null?weekday:this.add(input-weekday,"d")}function getSetISODayOfWeek(input){if(!this.isValid()){return input!=null?this:NaN}if(input!=null){var weekday=parseIsoWeekday(input,this.localeData());return this.day(this.day()%7?weekday:weekday-7)}else{return this.day()||7}}function weekdaysRegex(isStrict){if(this._weekdaysParseExact){if(!hasOwnProp(this,"_weekdaysRegex")){computeWeekdaysParse.call(this)}if(isStrict){return this._weekdaysStrictRegex}else{return this._weekdaysRegex}}else{if(!hasOwnProp(this,"_weekdaysRegex")){this._weekdaysRegex=defaultWeekdaysRegex}return this._weekdaysStrictRegex&&isStrict?this._weekdaysStrictRegex:this._weekdaysRegex}}function weekdaysShortRegex(isStrict){if(this._weekdaysParseExact){if(!hasOwnProp(this,"_weekdaysRegex")){computeWeekdaysParse.call(this)}if(isStrict){return this._weekdaysShortStrictRegex}else{return this._weekdaysShortRegex}}else{if(!hasOwnProp(this,"_weekdaysShortRegex")){this._weekdaysShortRegex=defaultWeekdaysShortRegex}return this._weekdaysShortStrictRegex&&isStrict?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}}function weekdaysMinRegex(isStrict){if(this._weekdaysParseExact){if(!hasOwnProp(this,"_weekdaysRegex")){computeWeekdaysParse.call(this)}if(isStrict){return this._weekdaysMinStrictRegex}else{return this._weekdaysMinRegex}}else{if(!hasOwnProp(this,"_weekdaysMinRegex")){this._weekdaysMinRegex=defaultWeekdaysMinRegex}return this._weekdaysMinStrictRegex&&isStrict?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}}function computeWeekdaysParse(){function cmpLenRev(a,b){return b.length-a.length}var minPieces=[],shortPieces=[],longPieces=[],mixedPieces=[],i,mom,minp,shortp,longp;for(i=0;i<7;i++){mom=createUTC([2e3,1]).day(i);minp=regexEscape(this.weekdaysMin(mom,""));shortp=regexEscape(this.weekdaysShort(mom,""));longp=regexEscape(this.weekdays(mom,""));minPieces.push(minp);shortPieces.push(shortp);longPieces.push(longp);mixedPieces.push(minp);mixedPieces.push(shortp);mixedPieces.push(longp)}minPieces.sort(cmpLenRev);shortPieces.sort(cmpLenRev);longPieces.sort(cmpLenRev);mixedPieces.sort(cmpLenRev);this._weekdaysRegex=new RegExp("^("+mixedPieces.join("|")+")","i");this._weekdaysShortRegex=this._weekdaysRegex;this._weekdaysMinRegex=this._weekdaysRegex;this._weekdaysStrictRegex=new RegExp("^("+longPieces.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+shortPieces.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+minPieces.join("|")+")","i")}function hFormat(){return this.hours()%12||12}function kFormat(){return this.hours()||24}addFormatToken("H",["HH",2],0,"hour");addFormatToken("h",["hh",2],0,hFormat);addFormatToken("k",["kk",2],0,kFormat);addFormatToken("hmm",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)});addFormatToken("hmmss",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)});addFormatToken("Hmm",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2)});addFormatToken("Hmmss",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)});function meridiem(token,lowercase){addFormatToken(token,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),lowercase)})}meridiem("a",true);meridiem("A",false);addUnitAlias("hour","h");addUnitPriority("hour",13);function matchMeridiem(isStrict,locale){return locale._meridiemParse}addRegexToken("a",matchMeridiem);addRegexToken("A",matchMeridiem);addRegexToken("H",match1to2);addRegexToken("h",match1to2);addRegexToken("k",match1to2);addRegexToken("HH",match1to2,match2);addRegexToken("hh",match1to2,match2);addRegexToken("kk",match1to2,match2);addRegexToken("hmm",match3to4);addRegexToken("hmmss",match5to6);addRegexToken("Hmm",match3to4);addRegexToken("Hmmss",match5to6);addParseToken(["H","HH"],HOUR);addParseToken(["k","kk"],function(input,array,config){var kInput=toInt(input);array[HOUR]=kInput===24?0:kInput});addParseToken(["a","A"],function(input,array,config){config._isPm=config._locale.isPM(input);config._meridiem=input});addParseToken(["h","hh"],function(input,array,config){array[HOUR]=toInt(input);getParsingFlags(config).bigHour=true});addParseToken("hmm",function(input,array,config){var pos=input.length-2;array[HOUR]=toInt(input.substr(0,pos));array[MINUTE]=toInt(input.substr(pos));getParsingFlags(config).bigHour=true});addParseToken("hmmss",function(input,array,config){var pos1=input.length-4,pos2=input.length-2;array[HOUR]=toInt(input.substr(0,pos1));array[MINUTE]=toInt(input.substr(pos1,2));array[SECOND]=toInt(input.substr(pos2));getParsingFlags(config).bigHour=true});addParseToken("Hmm",function(input,array,config){var pos=input.length-2;array[HOUR]=toInt(input.substr(0,pos));array[MINUTE]=toInt(input.substr(pos))});addParseToken("Hmmss",function(input,array,config){var pos1=input.length-4,pos2=input.length-2;array[HOUR]=toInt(input.substr(0,pos1));array[MINUTE]=toInt(input.substr(pos1,2));array[SECOND]=toInt(input.substr(pos2))});function localeIsPM(input){return(input+"").toLowerCase().charAt(0)==="p"}var defaultLocaleMeridiemParse=/[ap]\.?m?\.?/i,getSetHour=makeGetSet("Hours",true);function localeMeridiem(hours,minutes,isLower){if(hours>11){return isLower?"pm":"PM"}else{return isLower?"am":"AM"}}var baseConfig={calendar:defaultCalendar,longDateFormat:defaultLongDateFormat,invalidDate:defaultInvalidDate,ordinal:defaultOrdinal,dayOfMonthOrdinalParse:defaultDayOfMonthOrdinalParse,relativeTime:defaultRelativeTime,months:defaultLocaleMonths,monthsShort:defaultLocaleMonthsShort,week:defaultLocaleWeek,weekdays:defaultLocaleWeekdays,weekdaysMin:defaultLocaleWeekdaysMin,weekdaysShort:defaultLocaleWeekdaysShort,meridiemParse:defaultLocaleMeridiemParse};var locales={},localeFamilies={},globalLocale;function commonPrefix(arr1,arr2){var i,minl=Math.min(arr1.length,arr2.length);for(i=0;i<minl;i+=1){if(arr1[i]!==arr2[i]){return i}}return minl}function normalizeLocale(key){return key?key.toLowerCase().replace("_","-"):key}function chooseLocale(names){var i=0,j,next,locale,split;while(i<names.length){split=normalizeLocale(names[i]).split("-");j=split.length;next=normalizeLocale(names[i+1]);next=next?next.split("-"):null;while(j>0){locale=loadLocale(split.slice(0,j).join("-"));if(locale){return locale}if(next&&next.length>=j&&commonPrefix(split,next)>=j-1){break}j--}i++}return globalLocale}function loadLocale(name){var oldLocale=null,aliasedRequire;if(locales[name]===undefined&&typeof module!=="undefined"&&module&&module.exports){try{oldLocale=globalLocale._abbr;aliasedRequire=require;aliasedRequire("./locale/"+name);getSetGlobalLocale(oldLocale)}catch(e){locales[name]=null}}return locales[name]}function getSetGlobalLocale(key,values){var data;if(key){if(isUndefined(values)){data=getLocale(key)}else{data=defineLocale(key,values)}if(data){globalLocale=data}else{if(typeof console!=="undefined"&&console.warn){console.warn("Locale "+key+" not found. Did you forget to load it?")}}}return globalLocale._abbr}function defineLocale(name,config){if(config!==null){var locale,parentConfig=baseConfig;config.abbr=name;if(locales[name]!=null){deprecateSimple("defineLocaleOverride","use moment.updateLocale(localeName, config) to change "+"an existing locale. moment.defineLocale(localeName, "+"config) should only be used for creating a new locale "+"See http://momentjs.com/guides/#/warnings/define-locale/ for more info.");parentConfig=locales[name]._config}else if(config.parentLocale!=null){if(locales[config.parentLocale]!=null){parentConfig=locales[config.parentLocale]._config}else{locale=loadLocale(config.parentLocale);if(locale!=null){parentConfig=locale._config}else{if(!localeFamilies[config.parentLocale]){localeFamilies[config.parentLocale]=[]}localeFamilies[config.parentLocale].push({name:name,config:config});return null}}}locales[name]=new Locale(mergeConfigs(parentConfig,config));if(localeFamilies[name]){localeFamilies[name].forEach(function(x){defineLocale(x.name,x.config)})}getSetGlobalLocale(name);return locales[name]}else{delete locales[name];return null}}function updateLocale(name,config){if(config!=null){var locale,tmpLocale,parentConfig=baseConfig;if(locales[name]!=null&&locales[name].parentLocale!=null){locales[name].set(mergeConfigs(locales[name]._config,config))}else{tmpLocale=loadLocale(name);if(tmpLocale!=null){parentConfig=tmpLocale._config}config=mergeConfigs(parentConfig,config);if(tmpLocale==null){config.abbr=name}locale=new Locale(config);locale.parentLocale=locales[name];locales[name]=locale}getSetGlobalLocale(name)}else{if(locales[name]!=null){if(locales[name].parentLocale!=null){locales[name]=locales[name].parentLocale;if(name===getSetGlobalLocale()){getSetGlobalLocale(name)}}else if(locales[name]!=null){delete locales[name]}}}return locales[name]}function getLocale(key){var locale;if(key&&key._locale&&key._locale._abbr){key=key._locale._abbr}if(!key){return globalLocale}if(!isArray(key)){locale=loadLocale(key);if(locale){return locale}key=[key]}return chooseLocale(key)}function listLocales(){return keys(locales)}function checkOverflow(m){var overflow,a=m._a;if(a&&getParsingFlags(m).overflow===-2){overflow=a[MONTH]<0||a[MONTH]>11?MONTH:a[DATE]<1||a[DATE]>daysInMonth(a[YEAR],a[MONTH])?DATE:a[HOUR]<0||a[HOUR]>24||a[HOUR]===24&&(a[MINUTE]!==0||a[SECOND]!==0||a[MILLISECOND]!==0)?HOUR:a[MINUTE]<0||a[MINUTE]>59?MINUTE:a[SECOND]<0||a[SECOND]>59?SECOND:a[MILLISECOND]<0||a[MILLISECOND]>999?MILLISECOND:-1;if(getParsingFlags(m)._overflowDayOfYear&&(overflow<YEAR||overflow>DATE)){overflow=DATE}if(getParsingFlags(m)._overflowWeeks&&overflow===-1){overflow=WEEK}if(getParsingFlags(m)._overflowWeekday&&overflow===-1){overflow=WEEKDAY}getParsingFlags(m).overflow=overflow}return m}var extendedIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,basicIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,tzRegex=/Z|[+-]\d\d(?::?\d\d)?/,isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,false],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,false],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,false],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,false],["YYYY",/\d{4}/,false]],isoTimes=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],aspNetJsonRegex=/^\/?Date\((-?\d+)/i,rfc2822=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,obsOffsets={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function configFromISO(config){var i,l,string=config._i,match=extendedIsoRegex.exec(string)||basicIsoRegex.exec(string),allowTime,dateFormat,timeFormat,tzFormat;if(match){getParsingFlags(config).iso=true;for(i=0,l=isoDates.length;i<l;i++){if(isoDates[i][1].exec(match[1])){dateFormat=isoDates[i][0];allowTime=isoDates[i][2]!==false;break}}if(dateFormat==null){config._isValid=false;return}if(match[3]){for(i=0,l=isoTimes.length;i<l;i++){if(isoTimes[i][1].exec(match[3])){timeFormat=(match[2]||" ")+isoTimes[i][0];break}}if(timeFormat==null){config._isValid=false;return}}if(!allowTime&&timeFormat!=null){config._isValid=false;return}if(match[4]){if(tzRegex.exec(match[4])){tzFormat="Z"}else{config._isValid=false;return}}config._f=dateFormat+(timeFormat||"")+(tzFormat||"");configFromStringAndFormat(config)}else{config._isValid=false}}function extractFromRFC2822Strings(yearStr,monthStr,dayStr,hourStr,minuteStr,secondStr){var result=[untruncateYear(yearStr),defaultLocaleMonthsShort.indexOf(monthStr),parseInt(dayStr,10),parseInt(hourStr,10),parseInt(minuteStr,10)];if(secondStr){result.push(parseInt(secondStr,10))}return result}function untruncateYear(yearStr){var year=parseInt(yearStr,10);if(year<=49){return 2e3+year}else if(year<=999){return 1900+year}return year}function preprocessRFC2822(s){return s.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function checkWeekday(weekdayStr,parsedInput,config){if(weekdayStr){var weekdayProvided=defaultLocaleWeekdaysShort.indexOf(weekdayStr),weekdayActual=new Date(parsedInput[0],parsedInput[1],parsedInput[2]).getDay();if(weekdayProvided!==weekdayActual){getParsingFlags(config).weekdayMismatch=true;config._isValid=false;return false}}return true}function calculateOffset(obsOffset,militaryOffset,numOffset){if(obsOffset){return obsOffsets[obsOffset]}else if(militaryOffset){return 0}else{var hm=parseInt(numOffset,10),m=hm%100,h=(hm-m)/100;return h*60+m}}function configFromRFC2822(config){var match=rfc2822.exec(preprocessRFC2822(config._i)),parsedArray;if(match){parsedArray=extractFromRFC2822Strings(match[4],match[3],match[2],match[5],match[6],match[7]);if(!checkWeekday(match[1],parsedArray,config)){return}config._a=parsedArray;config._tzm=calculateOffset(match[8],match[9],match[10]);config._d=createUTCDate.apply(null,config._a);config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm);getParsingFlags(config).rfc2822=true}else{config._isValid=false}}function configFromString(config){var matched=aspNetJsonRegex.exec(config._i);if(matched!==null){config._d=new Date(+matched[1]);return}configFromISO(config);if(config._isValid===false){delete config._isValid}else{return}configFromRFC2822(config);if(config._isValid===false){delete config._isValid}else{return}if(config._strict){config._isValid=false}else{hooks.createFromInputFallback(config)}}hooks.createFromInputFallback=deprecate("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), "+"which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are "+"discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(config){config._d=new Date(config._i+(config._useUTC?" UTC":""))});function defaults(a,b,c){if(a!=null){return a}if(b!=null){return b}return c}function currentDateArray(config){var nowValue=new Date(hooks.now());if(config._useUTC){return[nowValue.getUTCFullYear(),nowValue.getUTCMonth(),nowValue.getUTCDate()]}return[nowValue.getFullYear(),nowValue.getMonth(),nowValue.getDate()]}function configFromArray(config){var i,date,input=[],currentDate,expectedWeekday,yearToUse;if(config._d){return}currentDate=currentDateArray(config);if(config._w&&config._a[DATE]==null&&config._a[MONTH]==null){dayOfYearFromWeekInfo(config)}if(config._dayOfYear!=null){yearToUse=defaults(config._a[YEAR],currentDate[YEAR]);if(config._dayOfYear>daysInYear(yearToUse)||config._dayOfYear===0){getParsingFlags(config)._overflowDayOfYear=true}date=createUTCDate(yearToUse,0,config._dayOfYear);config._a[MONTH]=date.getUTCMonth();config._a[DATE]=date.getUTCDate()}for(i=0;i<3&&config._a[i]==null;++i){config._a[i]=input[i]=currentDate[i]}for(;i<7;i++){config._a[i]=input[i]=config._a[i]==null?i===2?1:0:config._a[i]}if(config._a[HOUR]===24&&config._a[MINUTE]===0&&config._a[SECOND]===0&&config._a[MILLISECOND]===0){config._nextDay=true;config._a[HOUR]=0}config._d=(config._useUTC?createUTCDate:createDate).apply(null,input);expectedWeekday=config._useUTC?config._d.getUTCDay():config._d.getDay();if(config._tzm!=null){config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm)}if(config._nextDay){config._a[HOUR]=24}if(config._w&&typeof config._w.d!=="undefined"&&config._w.d!==expectedWeekday){getParsingFlags(config).weekdayMismatch=true}}function dayOfYearFromWeekInfo(config){var w,weekYear,week,weekday,dow,doy,temp,weekdayOverflow,curWeek;w=config._w;if(w.GG!=null||w.W!=null||w.E!=null){dow=1;doy=4;weekYear=defaults(w.GG,config._a[YEAR],weekOfYear(createLocal(),1,4).year);week=defaults(w.W,1);weekday=defaults(w.E,1);if(weekday<1||weekday>7){weekdayOverflow=true}}else{dow=config._locale._week.dow;doy=config._locale._week.doy;curWeek=weekOfYear(createLocal(),dow,doy);weekYear=defaults(w.gg,config._a[YEAR],curWeek.year);week=defaults(w.w,curWeek.week);if(w.d!=null){weekday=w.d;if(weekday<0||weekday>6){weekdayOverflow=true}}else if(w.e!=null){weekday=w.e+dow;if(w.e<0||w.e>6){weekdayOverflow=true}}else{weekday=dow}}if(week<1||week>weeksInYear(weekYear,dow,doy)){getParsingFlags(config)._overflowWeeks=true}else if(weekdayOverflow!=null){getParsingFlags(config)._overflowWeekday=true}else{temp=dayOfYearFromWeeks(weekYear,week,weekday,dow,doy);config._a[YEAR]=temp.year;config._dayOfYear=temp.dayOfYear}}hooks.ISO_8601=function(){};hooks.RFC_2822=function(){};function configFromStringAndFormat(config){if(config._f===hooks.ISO_8601){configFromISO(config);return}if(config._f===hooks.RFC_2822){configFromRFC2822(config);return}config._a=[];getParsingFlags(config).empty=true;var string=""+config._i,i,parsedInput,tokens,token,skipped,stringLength=string.length,totalParsedInputLength=0,era;tokens=expandFormat(config._f,config._locale).match(formattingTokens)||[];for(i=0;i<tokens.length;i++){token=tokens[i];parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0];if(parsedInput){skipped=string.substr(0,string.indexOf(parsedInput));if(skipped.length>0){getParsingFlags(config).unusedInput.push(skipped)}string=string.slice(string.indexOf(parsedInput)+parsedInput.length);totalParsedInputLength+=parsedInput.length}if(formatTokenFunctions[token]){if(parsedInput){getParsingFlags(config).empty=false}else{getParsingFlags(config).unusedTokens.push(token)}addTimeToArrayFromToken(token,parsedInput,config)}else if(config._strict&&!parsedInput){getParsingFlags(config).unusedTokens.push(token)}}getParsingFlags(config).charsLeftOver=stringLength-totalParsedInputLength;if(string.length>0){getParsingFlags(config).unusedInput.push(string)}if(config._a[HOUR]<=12&&getParsingFlags(config).bigHour===true&&config._a[HOUR]>0){getParsingFlags(config).bigHour=undefined}getParsingFlags(config).parsedDateParts=config._a.slice(0);getParsingFlags(config).meridiem=config._meridiem;config._a[HOUR]=meridiemFixWrap(config._locale,config._a[HOUR],config._meridiem);era=getParsingFlags(config).era;if(era!==null){config._a[YEAR]=config._locale.erasConvertYear(era,config._a[YEAR])}configFromArray(config);checkOverflow(config)}function meridiemFixWrap(locale,hour,meridiem){var isPm;if(meridiem==null){return hour}if(locale.meridiemHour!=null){return locale.meridiemHour(hour,meridiem)}else if(locale.isPM!=null){isPm=locale.isPM(meridiem);if(isPm&&hour<12){hour+=12}if(!isPm&&hour===12){hour=0}return hour}else{return hour}}function configFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore,validFormatFound,bestFormatIsValid=false;if(config._f.length===0){getParsingFlags(config).invalidFormat=true;config._d=new Date(NaN);return}for(i=0;i<config._f.length;i++){currentScore=0;validFormatFound=false;tempConfig=copyConfig({},config);if(config._useUTC!=null){tempConfig._useUTC=config._useUTC}tempConfig._f=config._f[i];configFromStringAndFormat(tempConfig);if(isValid(tempConfig)){validFormatFound=true}currentScore+=getParsingFlags(tempConfig).charsLeftOver;currentScore+=getParsingFlags(tempConfig).unusedTokens.length*10;getParsingFlags(tempConfig).score=currentScore;if(!bestFormatIsValid){if(scoreToBeat==null||currentScore<scoreToBeat||validFormatFound){scoreToBeat=currentScore;bestMoment=tempConfig;if(validFormatFound){bestFormatIsValid=true}}}else{if(currentScore<scoreToBeat){scoreToBeat=currentScore;bestMoment=tempConfig}}}extend(config,bestMoment||tempConfig)}function configFromObject(config){if(config._d){return}var i=normalizeObjectUnits(config._i),dayOrDate=i.day===undefined?i.date:i.day;config._a=map([i.year,i.month,dayOrDate,i.hour,i.minute,i.second,i.millisecond],function(obj){return obj&&parseInt(obj,10)});configFromArray(config)}function createFromConfig(config){var res=new Moment(checkOverflow(prepareConfig(config)));if(res._nextDay){res.add(1,"d");res._nextDay=undefined}return res}function prepareConfig(config){var input=config._i,format=config._f;config._locale=config._locale||getLocale(config._l);if(input===null||format===undefined&&input===""){return createInvalid({nullInput:true})}if(typeof input==="string"){config._i=input=config._locale.preparse(input)}if(isMoment(input)){return new Moment(checkOverflow(input))}else if(isDate(input)){config._d=input}else if(isArray(format)){configFromStringAndArray(config)}else if(format){configFromStringAndFormat(config)}else{configFromInput(config)}if(!isValid(config)){config._d=null}return config}function configFromInput(config){var input=config._i;if(isUndefined(input)){config._d=new Date(hooks.now())}else if(isDate(input)){config._d=new Date(input.valueOf())}else if(typeof input==="string"){configFromString(config)}else if(isArray(input)){config._a=map(input.slice(0),function(obj){return parseInt(obj,10)});configFromArray(config)}else if(isObject(input)){configFromObject(config)}else if(isNumber(input)){config._d=new Date(input)}else{hooks.createFromInputFallback(config)}}function createLocalOrUTC(input,format,locale,strict,isUTC){var c={};if(format===true||format===false){strict=format;format=undefined}if(locale===true||locale===false){strict=locale;locale=undefined}if(isObject(input)&&isObjectEmpty(input)||isArray(input)&&input.length===0){input=undefined}c._isAMomentObject=true;c._useUTC=c._isUTC=isUTC;c._l=locale;c._i=input;c._f=format;c._strict=strict;return createFromConfig(c)}function createLocal(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,false)}var prototypeMin=deprecate("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var other=createLocal.apply(null,arguments);if(this.isValid()&&other.isValid()){return other<this?this:other}else{return createInvalid()}}),prototypeMax=deprecate("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var other=createLocal.apply(null,arguments);if(this.isValid()&&other.isValid()){return other>this?this:other}else{return createInvalid()}});function pickBy(fn,moments){var res,i;if(moments.length===1&&isArray(moments[0])){moments=moments[0]}if(!moments.length){return createLocal()}res=moments[0];for(i=1;i<moments.length;++i){if(!moments[i].isValid()||moments[i][fn](res)){res=moments[i]}}return res}function min(){var args=[].slice.call(arguments,0);return pickBy("isBefore",args)}function max(){var args=[].slice.call(arguments,0);return pickBy("isAfter",args)}var now=function(){return Date.now?Date.now():+new Date};var ordering=["year","quarter","month","week","day","hour","minute","second","millisecond"];function isDurationValid(m){var key,unitHasDecimal=false,i;for(key in m){if(hasOwnProp(m,key)&&!(indexOf.call(ordering,key)!==-1&&(m[key]==null||!isNaN(m[key])))){return false}}for(i=0;i<ordering.length;++i){if(m[ordering[i]]){if(unitHasDecimal){return false}if(parseFloat(m[ordering[i]])!==toInt(m[ordering[i]])){unitHasDecimal=true}}}return true}function isValid$1(){return this._isValid}function createInvalid$1(){return createDuration(NaN)}function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months=normalizedInput.month||0,weeks=normalizedInput.week||normalizedInput.isoWeek||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._isValid=isDurationValid(normalizedInput);this._milliseconds=+milliseconds+seconds*1e3+minutes*6e4+hours*1e3*60*60;this._days=+days+weeks*7;this._months=+months+quarters*3+years*12;this._data={};this._locale=getLocale();this._bubble()}function isDuration(obj){return obj instanceof Duration}function absRound(number){if(number<0){return Math.round(-1*number)*-1}else{return Math.round(number)}}function compareArrays(array1,array2,dontConvert){var len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0,i;for(i=0;i<len;i++){if(dontConvert&&array1[i]!==array2[i]||!dontConvert&&toInt(array1[i])!==toInt(array2[i])){diffs++}}return diffs+lengthDiff}function offset(token,separator){addFormatToken(token,0,0,function(){var offset=this.utcOffset(),sign="+";if(offset<0){offset=-offset;sign="-"}return sign+zeroFill(~~(offset/60),2)+separator+zeroFill(~~offset%60,2)})}offset("Z",":");offset("ZZ","");addRegexToken("Z",matchShortOffset);addRegexToken("ZZ",matchShortOffset);addParseToken(["Z","ZZ"],function(input,array,config){config._useUTC=true;config._tzm=offsetFromString(matchShortOffset,input)});var chunkOffset=/([\+\-]|\d\d)/gi;function offsetFromString(matcher,string){var matches=(string||"").match(matcher),chunk,parts,minutes;if(matches===null){return null}chunk=matches[matches.length-1]||[];parts=(chunk+"").match(chunkOffset)||["-",0,0];minutes=+(parts[1]*60)+toInt(parts[2]);return minutes===0?0:parts[0]==="+"?minutes:-minutes}function cloneWithOffset(input,model){var res,diff;if(model._isUTC){res=model.clone();diff=(isMoment(input)||isDate(input)?input.valueOf():createLocal(input).valueOf())-res.valueOf();res._d.setTime(res._d.valueOf()+diff);hooks.updateOffset(res,false);return res}else{return createLocal(input).local()}}function getDateOffset(m){return-Math.round(m._d.getTimezoneOffset())}hooks.updateOffset=function(){};function getSetOffset(input,keepLocalTime,keepMinutes){var offset=this._offset||0,localAdjust;if(!this.isValid()){return input!=null?this:NaN}if(input!=null){if(typeof input==="string"){input=offsetFromString(matchShortOffset,input);if(input===null){return this}}else if(Math.abs(input)<16&&!keepMinutes){input=input*60}if(!this._isUTC&&keepLocalTime){localAdjust=getDateOffset(this)}this._offset=input;this._isUTC=true;if(localAdjust!=null){this.add(localAdjust,"m")}if(offset!==input){if(!keepLocalTime||this._changeInProgress){addSubtract(this,createDuration(input-offset,"m"),1,false)}else if(!this._changeInProgress){this._changeInProgress=true;hooks.updateOffset(this,true);this._changeInProgress=null}}return this}else{return this._isUTC?offset:getDateOffset(this)}}function getSetZone(input,keepLocalTime){if(input!=null){if(typeof input!=="string"){input=-input}this.utcOffset(input,keepLocalTime);return this}else{return-this.utcOffset()}}function setOffsetToUTC(keepLocalTime){return this.utcOffset(0,keepLocalTime)}function setOffsetToLocal(keepLocalTime){if(this._isUTC){this.utcOffset(0,keepLocalTime);this._isUTC=false;if(keepLocalTime){this.subtract(getDateOffset(this),"m")}}return this}function setOffsetToParsedOffset(){if(this._tzm!=null){this.utcOffset(this._tzm,false,true)}else if(typeof this._i==="string"){var tZone=offsetFromString(matchOffset,this._i);if(tZone!=null){this.utcOffset(tZone)}else{this.utcOffset(0,true)}}return this}function hasAlignedHourOffset(input){if(!this.isValid()){return false}input=input?createLocal(input).utcOffset():0;return(this.utcOffset()-input)%60===0}function isDaylightSavingTime(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function isDaylightSavingTimeShifted(){if(!isUndefined(this._isDSTShifted)){return this._isDSTShifted}var c={},other;copyConfig(c,this);c=prepareConfig(c);if(c._a){other=c._isUTC?createUTC(c._a):createLocal(c._a);this._isDSTShifted=this.isValid()&&compareArrays(c._a,other.toArray())>0}else{this._isDSTShifted=false}return this._isDSTShifted}function isLocal(){return this.isValid()?!this._isUTC:false}function isUtcOffset(){return this.isValid()?this._isUTC:false}function isUtc(){return this.isValid()?this._isUTC&&this._offset===0:false}var aspNetRegex=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,isoRegex=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function createDuration(input,key){var duration=input,match=null,sign,ret,diffRes;if(isDuration(input)){duration={ms:input._milliseconds,d:input._days,M:input._months}}else if(isNumber(input)||!isNaN(+input)){duration={};if(key){duration[key]=+input}else{duration.milliseconds=+input}}else if(match=aspNetRegex.exec(input)){sign=match[1]==="-"?-1:1;duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(absRound(match[MILLISECOND]*1e3))*sign}}else if(match=isoRegex.exec(input)){sign=match[1]==="-"?-1:1;duration={y:parseIso(match[2],sign),M:parseIso(match[3],sign),w:parseIso(match[4],sign),d:parseIso(match[5],sign),h:parseIso(match[6],sign),m:parseIso(match[7],sign),s:parseIso(match[8],sign)}}else if(duration==null){duration={}}else if(typeof duration==="object"&&("from"in duration||"to"in duration)){diffRes=momentsDifference(createLocal(duration.from),createLocal(duration.to));duration={};duration.ms=diffRes.milliseconds;duration.M=diffRes.months}ret=new Duration(duration);if(isDuration(input)&&hasOwnProp(input,"_locale")){ret._locale=input._locale}if(isDuration(input)&&hasOwnProp(input,"_isValid")){ret._isValid=input._isValid}return ret}createDuration.fn=Duration.prototype;createDuration.invalid=createInvalid$1;function parseIso(inp,sign){var res=inp&&parseFloat(inp.replace(",","."));return(isNaN(res)?0:res)*sign}function positiveMomentsDifference(base,other){var res={};res.months=other.month()-base.month()+(other.year()-base.year())*12;if(base.clone().add(res.months,"M").isAfter(other)){--res.months}res.milliseconds=+other-+base.clone().add(res.months,"M");return res}function momentsDifference(base,other){var res;if(!(base.isValid()&&other.isValid())){return{milliseconds:0,months:0}}other=cloneWithOffset(other,base);if(base.isBefore(other)){res=positiveMomentsDifference(base,other)}else{res=positiveMomentsDifference(other,base);res.milliseconds=-res.milliseconds;res.months=-res.months}return res}function createAdder(direction,name){return function(val,period){var dur,tmp;if(period!==null&&!isNaN(+period)){deprecateSimple(name,"moment()."+name+"(period, number) is deprecated. Please use moment()."+name+"(number, period). "+"See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");tmp=val;val=period;period=tmp}dur=createDuration(val,period);addSubtract(this,dur,direction);return this}}function addSubtract(mom,duration,isAdding,updateOffset){var milliseconds=duration._milliseconds,days=absRound(duration._days),months=absRound(duration._months);if(!mom.isValid()){return}updateOffset=updateOffset==null?true:updateOffset;if(months){setMonth(mom,get(mom,"Month")+months*isAdding)}if(days){set$1(mom,"Date",get(mom,"Date")+days*isAdding)}if(milliseconds){mom._d.setTime(mom._d.valueOf()+milliseconds*isAdding)}if(updateOffset){hooks.updateOffset(mom,days||months)}}var add=createAdder(1,"add"),subtract=createAdder(-1,"subtract");function isString(input){return typeof input==="string"||input instanceof String}function isMomentInput(input){return isMoment(input)||isDate(input)||isString(input)||isNumber(input)||isNumberOrStringArray(input)||isMomentInputObject(input)||input===null||input===undefined}function isMomentInputObject(input){var objectTest=isObject(input)&&!isObjectEmpty(input),propertyTest=false,properties=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],i,property;for(i=0;i<properties.length;i+=1){property=properties[i];propertyTest=propertyTest||hasOwnProp(input,property)}return objectTest&&propertyTest}function isNumberOrStringArray(input){var arrayTest=isArray(input),dataTypeTest=false;if(arrayTest){dataTypeTest=input.filter(function(item){return!isNumber(item)&&isString(input)}).length===0}return arrayTest&&dataTypeTest}function isCalendarSpec(input){var objectTest=isObject(input)&&!isObjectEmpty(input),propertyTest=false,properties=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],i,property;for(i=0;i<properties.length;i+=1){property=properties[i];propertyTest=propertyTest||hasOwnProp(input,property)}return objectTest&&propertyTest}function getCalendarFormat(myMoment,now){var diff=myMoment.diff(now,"days",true);return diff<-6?"sameElse":diff<-1?"lastWeek":diff<0?"lastDay":diff<1?"sameDay":diff<2?"nextDay":diff<7?"nextWeek":"sameElse"}function calendar$1(time,formats){if(arguments.length===1){if(!arguments[0]){time=undefined;formats=undefined}else if(isMomentInput(arguments[0])){time=arguments[0];formats=undefined}else if(isCalendarSpec(arguments[0])){formats=arguments[0];time=undefined}}var now=time||createLocal(),sod=cloneWithOffset(now,this).startOf("day"),format=hooks.calendarFormat(this,sod)||"sameElse",output=formats&&(isFunction(formats[format])?formats[format].call(this,now):formats[format]);return this.format(output||this.localeData().calendar(format,this,createLocal(now)))}function clone(){return new Moment(this)}function isAfter(input,units){var localInput=isMoment(input)?input:createLocal(input);if(!(this.isValid()&&localInput.isValid())){return false}units=normalizeUnits(units)||"millisecond";if(units==="millisecond"){return this.valueOf()>localInput.valueOf()}else{return localInput.valueOf()<this.clone().startOf(units).valueOf()}}function isBefore(input,units){var localInput=isMoment(input)?input:createLocal(input);if(!(this.isValid()&&localInput.isValid())){return false}units=normalizeUnits(units)||"millisecond";if(units==="millisecond"){return this.valueOf()<localInput.valueOf()}else{return this.clone().endOf(units).valueOf()<localInput.valueOf()}}function isBetween(from,to,units,inclusivity){var localFrom=isMoment(from)?from:createLocal(from),localTo=isMoment(to)?to:createLocal(to);if(!(this.isValid()&&localFrom.isValid()&&localTo.isValid())){return false}inclusivity=inclusivity||"()";return(inclusivity[0]==="("?this.isAfter(localFrom,units):!this.isBefore(localFrom,units))&&(inclusivity[1]===")"?this.isBefore(localTo,units):!this.isAfter(localTo,units))}function isSame(input,units){var localInput=isMoment(input)?input:createLocal(input),inputMs;if(!(this.isValid()&&localInput.isValid())){return false}units=normalizeUnits(units)||"millisecond";if(units==="millisecond"){return this.valueOf()===localInput.valueOf()}else{inputMs=localInput.valueOf();return this.clone().startOf(units).valueOf()<=inputMs&&inputMs<=this.clone().endOf(units).valueOf()}}function isSameOrAfter(input,units){return this.isSame(input,units)||this.isAfter(input,units)}function isSameOrBefore(input,units){return this.isSame(input,units)||this.isBefore(input,units)}function diff(input,units,asFloat){var that,zoneDelta,output;if(!this.isValid()){return NaN}that=cloneWithOffset(input,this);if(!that.isValid()){return NaN}zoneDelta=(that.utcOffset()-this.utcOffset())*6e4;units=normalizeUnits(units);switch(units){case"year":output=monthDiff(this,that)/12;break;case"month":output=monthDiff(this,that);break;case"quarter":output=monthDiff(this,that)/3;break;case"second":output=(this-that)/1e3;break;case"minute":output=(this-that)/6e4;break;case"hour":output=(this-that)/36e5;break;case"day":output=(this-that-zoneDelta)/864e5;break;case"week":output=(this-that-zoneDelta)/6048e5;break;default:output=this-that}return asFloat?output:absFloor(output)}function monthDiff(a,b){if(a.date()<b.date()){return-monthDiff(b,a)}var wholeMonthDiff=(b.year()-a.year())*12+(b.month()-a.month()),anchor=a.clone().add(wholeMonthDiff,"months"),anchor2,adjust;if(b-anchor<0){anchor2=a.clone().add(wholeMonthDiff-1,"months");adjust=(b-anchor)/(anchor-anchor2)}else{anchor2=a.clone().add(wholeMonthDiff+1,"months");adjust=(b-anchor)/(anchor2-anchor)}return-(wholeMonthDiff+adjust)||0}hooks.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";hooks.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function toString(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function toISOString(keepOffset){if(!this.isValid()){return null}var utc=keepOffset!==true,m=utc?this.clone().utc():this;if(m.year()<0||m.year()>9999){return formatMoment(m,utc?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ")}if(isFunction(Date.prototype.toISOString)){if(utc){return this.toDate().toISOString()}else{return new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",formatMoment(m,"Z"))}}return formatMoment(m,utc?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function inspect(){if(!this.isValid()){return"moment.invalid(/* "+this._i+" */)"}var func="moment",zone="",prefix,year,datetime,suffix;if(!this.isLocal()){func=this.utcOffset()===0?"moment.utc":"moment.parseZone";zone="Z"}prefix="["+func+'("]';year=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY";datetime="-MM-DD[T]HH:mm:ss.SSS";suffix=zone+'[")]';return this.format(prefix+year+datetime+suffix)}function format(inputString){if(!inputString){inputString=this.isUtc()?hooks.defaultFormatUtc:hooks.defaultFormat}var output=formatMoment(this,inputString);return this.localeData().postformat(output)}function from(time,withoutSuffix){if(this.isValid()&&(isMoment(time)&&time.isValid()||createLocal(time).isValid())){return createDuration({to:this,from:time}).locale(this.locale()).humanize(!withoutSuffix)}else{return this.localeData().invalidDate()}}function fromNow(withoutSuffix){return this.from(createLocal(),withoutSuffix)}function to(time,withoutSuffix){if(this.isValid()&&(isMoment(time)&&time.isValid()||createLocal(time).isValid())){return createDuration({from:this,to:time}).locale(this.locale()).humanize(!withoutSuffix)}else{return this.localeData().invalidDate()}}function toNow(withoutSuffix){return this.to(createLocal(),withoutSuffix)}function locale(key){var newLocaleData;if(key===undefined){return this._locale._abbr}else{newLocaleData=getLocale(key);if(newLocaleData!=null){this._locale=newLocaleData}return this}}var lang=deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(key){if(key===undefined){return this.localeData()}else{return this.locale(key)}});function localeData(){return this._locale}var MS_PER_SECOND=1e3,MS_PER_MINUTE=60*MS_PER_SECOND,MS_PER_HOUR=60*MS_PER_MINUTE,MS_PER_400_YEARS=(365*400+97)*24*MS_PER_HOUR;function mod$1(dividend,divisor){return(dividend%divisor+divisor)%divisor}function localStartOfDate(y,m,d){if(y<100&&y>=0){return new Date(y+400,m,d)-MS_PER_400_YEARS}else{return new Date(y,m,d).valueOf()}}function utcStartOfDate(y,m,d){if(y<100&&y>=0){return Date.UTC(y+400,m,d)-MS_PER_400_YEARS}else{return Date.UTC(y,m,d)}}function startOf(units){var time,startOfDate;units=normalizeUnits(units);if(units===undefined||units==="millisecond"||!this.isValid()){return this}startOfDate=this._isUTC?utcStartOfDate:localStartOfDate;switch(units){case"year":time=startOfDate(this.year(),0,1);break;case"quarter":time=startOfDate(this.year(),this.month()-this.month()%3,1);break;case"month":time=startOfDate(this.year(),this.month(),1);break;case"week":time=startOfDate(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":time=startOfDate(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":time=startOfDate(this.year(),this.month(),this.date());break;case"hour":time=this._d.valueOf();time-=mod$1(time+(this._isUTC?0:this.utcOffset()*MS_PER_MINUTE),MS_PER_HOUR);break;case"minute":time=this._d.valueOf();time-=mod$1(time,MS_PER_MINUTE);break;case"second":time=this._d.valueOf();time-=mod$1(time,MS_PER_SECOND);break}this._d.setTime(time);hooks.updateOffset(this,true);return this}function endOf(units){var time,startOfDate;units=normalizeUnits(units);if(units===undefined||units==="millisecond"||!this.isValid()){return this}startOfDate=this._isUTC?utcStartOfDate:localStartOfDate;switch(units){case"year":time=startOfDate(this.year()+1,0,1)-1;break;case"quarter":time=startOfDate(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":time=startOfDate(this.year(),this.month()+1,1)-1;break;case"week":time=startOfDate(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":time=startOfDate(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":time=startOfDate(this.year(),this.month(),this.date()+1)-1;break;case"hour":time=this._d.valueOf();time+=MS_PER_HOUR-mod$1(time+(this._isUTC?0:this.utcOffset()*MS_PER_MINUTE),MS_PER_HOUR)-1;break;case"minute":time=this._d.valueOf();time+=MS_PER_MINUTE-mod$1(time,MS_PER_MINUTE)-1;break;case"second":time=this._d.valueOf();time+=MS_PER_SECOND-mod$1(time,MS_PER_SECOND)-1;break}this._d.setTime(time);hooks.updateOffset(this,true);return this}function valueOf(){return this._d.valueOf()-(this._offset||0)*6e4}function unix(){return Math.floor(this.valueOf()/1e3)}function toDate(){return new Date(this.valueOf())}function toArray(){var m=this;return[m.year(),m.month(),m.date(),m.hour(),m.minute(),m.second(),m.millisecond()]}function toObject(){var m=this;return{years:m.year(),months:m.month(),date:m.date(),hours:m.hours(),minutes:m.minutes(),seconds:m.seconds(),milliseconds:m.milliseconds()}}function toJSON(){return this.isValid()?this.toISOString():null}function isValid$2(){return isValid(this)}function parsingFlags(){return extend({},getParsingFlags(this))}function invalidAt(){return getParsingFlags(this).overflow}function creationData(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}addFormatToken("N",0,0,"eraAbbr");addFormatToken("NN",0,0,"eraAbbr");addFormatToken("NNN",0,0,"eraAbbr");addFormatToken("NNNN",0,0,"eraName");addFormatToken("NNNNN",0,0,"eraNarrow");addFormatToken("y",["y",1],"yo","eraYear");addFormatToken("y",["yy",2],0,"eraYear");addFormatToken("y",["yyy",3],0,"eraYear");addFormatToken("y",["yyyy",4],0,"eraYear");addRegexToken("N",matchEraAbbr);addRegexToken("NN",matchEraAbbr);addRegexToken("NNN",matchEraAbbr);addRegexToken("NNNN",matchEraName);addRegexToken("NNNNN",matchEraNarrow);addParseToken(["N","NN","NNN","NNNN","NNNNN"],function(input,array,config,token){var era=config._locale.erasParse(input,token,config._strict);if(era){getParsingFlags(config).era=era}else{getParsingFlags(config).invalidEra=input}});addRegexToken("y",matchUnsigned);addRegexToken("yy",matchUnsigned);addRegexToken("yyy",matchUnsigned);addRegexToken("yyyy",matchUnsigned);addRegexToken("yo",matchEraYearOrdinal);addParseToken(["y","yy","yyy","yyyy"],YEAR);addParseToken(["yo"],function(input,array,config,token){var match;if(config._locale._eraYearOrdinalRegex){match=input.match(config._locale._eraYearOrdinalRegex)}if(config._locale.eraYearOrdinalParse){array[YEAR]=config._locale.eraYearOrdinalParse(input,match)}else{array[YEAR]=parseInt(input,10)}});function localeEras(m,format){var i,l,date,eras=this._eras||getLocale("en")._eras;for(i=0,l=eras.length;i<l;++i){switch(typeof eras[i].since){case"string":date=hooks(eras[i].since).startOf("day");eras[i].since=date.valueOf();break}switch(typeof eras[i].until){case"undefined":eras[i].until=+Infinity;break;case"string":date=hooks(eras[i].until).startOf("day").valueOf();eras[i].until=date.valueOf();break}}return eras}function localeErasParse(eraName,format,strict){var i,l,eras=this.eras(),name,abbr,narrow;eraName=eraName.toUpperCase();for(i=0,l=eras.length;i<l;++i){name=eras[i].name.toUpperCase();abbr=eras[i].abbr.toUpperCase();narrow=eras[i].narrow.toUpperCase();if(strict){switch(format){case"N":case"NN":case"NNN":if(abbr===eraName){return eras[i]}break;case"NNNN":if(name===eraName){return eras[i]}break;case"NNNNN":if(narrow===eraName){return eras[i]}break}}else if([name,abbr,narrow].indexOf(eraName)>=0){return eras[i]}}}function localeErasConvertYear(era,year){var dir=era.since<=era.until?+1:-1;if(year===undefined){return hooks(era.since).year()}else{return hooks(era.since).year()+(year-era.offset)*dir}}function getEraName(){var i,l,val,eras=this.localeData().eras();for(i=0,l=eras.length;i<l;++i){val=this.clone().startOf("day").valueOf();if(eras[i].since<=val&&val<=eras[i].until){return eras[i].name}if(eras[i].until<=val&&val<=eras[i].since){return eras[i].name}}return""}function getEraNarrow(){var i,l,val,eras=this.localeData().eras();for(i=0,l=eras.length;i<l;++i){val=this.clone().startOf("day").valueOf();if(eras[i].since<=val&&val<=eras[i].until){return eras[i].narrow}if(eras[i].until<=val&&val<=eras[i].since){return eras[i].narrow}}return""}function getEraAbbr(){var i,l,val,eras=this.localeData().eras();for(i=0,l=eras.length;i<l;++i){val=this.clone().startOf("day").valueOf();if(eras[i].since<=val&&val<=eras[i].until){return eras[i].abbr}if(eras[i].until<=val&&val<=eras[i].since){return eras[i].abbr}}return""}function getEraYear(){var i,l,dir,val,eras=this.localeData().eras();for(i=0,l=eras.length;i<l;++i){dir=eras[i].since<=eras[i].until?+1:-1;val=this.clone().startOf("day").valueOf();if(eras[i].since<=val&&val<=eras[i].until||eras[i].until<=val&&val<=eras[i].since){return(this.year()-hooks(eras[i].since).year())*dir+eras[i].offset}}return this.year()}function erasNameRegex(isStrict){if(!hasOwnProp(this,"_erasNameRegex")){computeErasParse.call(this)}return isStrict?this._erasNameRegex:this._erasRegex}function erasAbbrRegex(isStrict){if(!hasOwnProp(this,"_erasAbbrRegex")){computeErasParse.call(this)}return isStrict?this._erasAbbrRegex:this._erasRegex}function erasNarrowRegex(isStrict){if(!hasOwnProp(this,"_erasNarrowRegex")){computeErasParse.call(this)}return isStrict?this._erasNarrowRegex:this._erasRegex}function matchEraAbbr(isStrict,locale){return locale.erasAbbrRegex(isStrict)}function matchEraName(isStrict,locale){return locale.erasNameRegex(isStrict)}function matchEraNarrow(isStrict,locale){return locale.erasNarrowRegex(isStrict)}function matchEraYearOrdinal(isStrict,locale){return locale._eraYearOrdinalRegex||matchUnsigned}function computeErasParse(){var abbrPieces=[],namePieces=[],narrowPieces=[],mixedPieces=[],i,l,eras=this.eras();for(i=0,l=eras.length;i<l;++i){namePieces.push(regexEscape(eras[i].name));abbrPieces.push(regexEscape(eras[i].abbr));narrowPieces.push(regexEscape(eras[i].narrow));mixedPieces.push(regexEscape(eras[i].name));mixedPieces.push(regexEscape(eras[i].abbr));mixedPieces.push(regexEscape(eras[i].narrow))}this._erasRegex=new RegExp("^("+mixedPieces.join("|")+")","i");this._erasNameRegex=new RegExp("^("+namePieces.join("|")+")","i");this._erasAbbrRegex=new RegExp("^("+abbrPieces.join("|")+")","i");this._erasNarrowRegex=new RegExp("^("+narrowPieces.join("|")+")","i")}addFormatToken(0,["gg",2],0,function(){return this.weekYear()%100});addFormatToken(0,["GG",2],0,function(){return this.isoWeekYear()%100});function addWeekYearFormatToken(token,getter){addFormatToken(0,[token,token.length],0,getter)}addWeekYearFormatToken("gggg","weekYear");addWeekYearFormatToken("ggggg","weekYear");addWeekYearFormatToken("GGGG","isoWeekYear");addWeekYearFormatToken("GGGGG","isoWeekYear");addUnitAlias("weekYear","gg");addUnitAlias("isoWeekYear","GG");addUnitPriority("weekYear",1);addUnitPriority("isoWeekYear",1);addRegexToken("G",matchSigned);addRegexToken("g",matchSigned);addRegexToken("GG",match1to2,match2);addRegexToken("gg",match1to2,match2);addRegexToken("GGGG",match1to4,match4);addRegexToken("gggg",match1to4,match4);addRegexToken("GGGGG",match1to6,match6);addRegexToken("ggggg",match1to6,match6);addWeekParseToken(["gggg","ggggg","GGGG","GGGGG"],function(input,week,config,token){week[token.substr(0,2)]=toInt(input)});addWeekParseToken(["gg","GG"],function(input,week,config,token){week[token]=hooks.parseTwoDigitYear(input)});function getSetWeekYear(input){return getSetWeekYearHelper.call(this,input,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function getSetISOWeekYear(input){return getSetWeekYearHelper.call(this,input,this.isoWeek(),this.isoWeekday(),1,4)}function getISOWeeksInYear(){return weeksInYear(this.year(),1,4)}function getISOWeeksInISOWeekYear(){return weeksInYear(this.isoWeekYear(),1,4)}function getWeeksInYear(){var weekInfo=this.localeData()._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy)}function getWeeksInWeekYear(){var weekInfo=this.localeData()._week;return weeksInYear(this.weekYear(),weekInfo.dow,weekInfo.doy)}function getSetWeekYearHelper(input,week,weekday,dow,doy){var weeksTarget;if(input==null){return weekOfYear(this,dow,doy).year}else{weeksTarget=weeksInYear(input,dow,doy);if(week>weeksTarget){week=weeksTarget}return setWeekAll.call(this,input,week,weekday,dow,doy)}}function setWeekAll(weekYear,week,weekday,dow,doy){var dayOfYearData=dayOfYearFromWeeks(weekYear,week,weekday,dow,doy),date=createUTCDate(dayOfYearData.year,0,dayOfYearData.dayOfYear);this.year(date.getUTCFullYear());this.month(date.getUTCMonth());this.date(date.getUTCDate());return this}addFormatToken("Q",0,"Qo","quarter");addUnitAlias("quarter","Q");addUnitPriority("quarter",7);addRegexToken("Q",match1);addParseToken("Q",function(input,array){array[MONTH]=(toInt(input)-1)*3});function getSetQuarter(input){return input==null?Math.ceil((this.month()+1)/3):this.month((input-1)*3+this.month()%3)}addFormatToken("D",["DD",2],"Do","date");addUnitAlias("date","D");addUnitPriority("date",9);addRegexToken("D",match1to2);addRegexToken("DD",match1to2,match2);addRegexToken("Do",function(isStrict,locale){return isStrict?locale._dayOfMonthOrdinalParse||locale._ordinalParse:locale._dayOfMonthOrdinalParseLenient});addParseToken(["D","DD"],DATE);addParseToken("Do",function(input,array){array[DATE]=toInt(input.match(match1to2)[0])});var getSetDayOfMonth=makeGetSet("Date",true);addFormatToken("DDD",["DDDD",3],"DDDo","dayOfYear");addUnitAlias("dayOfYear","DDD");addUnitPriority("dayOfYear",4);addRegexToken("DDD",match1to3);addRegexToken("DDDD",match3);addParseToken(["DDD","DDDD"],function(input,array,config){config._dayOfYear=toInt(input)});function getSetDayOfYear(input){var dayOfYear=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return input==null?dayOfYear:this.add(input-dayOfYear,"d")}addFormatToken("m",["mm",2],0,"minute");addUnitAlias("minute","m");addUnitPriority("minute",14);addRegexToken("m",match1to2);addRegexToken("mm",match1to2,match2);addParseToken(["m","mm"],MINUTE);var getSetMinute=makeGetSet("Minutes",false);addFormatToken("s",["ss",2],0,"second");addUnitAlias("second","s");addUnitPriority("second",15);addRegexToken("s",match1to2);addRegexToken("ss",match1to2,match2);addParseToken(["s","ss"],SECOND);var getSetSecond=makeGetSet("Seconds",false);addFormatToken("S",0,0,function(){return~~(this.millisecond()/100)});addFormatToken(0,["SS",2],0,function(){return~~(this.millisecond()/10)});addFormatToken(0,["SSS",3],0,"millisecond");addFormatToken(0,["SSSS",4],0,function(){return this.millisecond()*10});addFormatToken(0,["SSSSS",5],0,function(){return this.millisecond()*100});addFormatToken(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});addFormatToken(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});addFormatToken(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});addFormatToken(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});addUnitAlias("millisecond","ms");addUnitPriority("millisecond",16);addRegexToken("S",match1to3,match1);addRegexToken("SS",match1to3,match2);addRegexToken("SSS",match1to3,match3);var token,getSetMillisecond;for(token="SSSS";token.length<=9;token+="S"){addRegexToken(token,matchUnsigned)}function parseMs(input,array){array[MILLISECOND]=toInt(("0."+input)*1e3)}for(token="S";token.length<=9;token+="S"){addParseToken(token,parseMs)}getSetMillisecond=makeGetSet("Milliseconds",false);addFormatToken("z",0,0,"zoneAbbr");addFormatToken("zz",0,0,"zoneName");function getZoneAbbr(){return this._isUTC?"UTC":""}function getZoneName(){return this._isUTC?"Coordinated Universal Time":""}var proto=Moment.prototype;proto.add=add;proto.calendar=calendar$1;proto.clone=clone;proto.diff=diff;proto.endOf=endOf;proto.format=format;proto.from=from;proto.fromNow=fromNow;proto.to=to;proto.toNow=toNow;proto.get=stringGet;proto.invalidAt=invalidAt;proto.isAfter=isAfter;proto.isBefore=isBefore;proto.isBetween=isBetween;proto.isSame=isSame;proto.isSameOrAfter=isSameOrAfter;proto.isSameOrBefore=isSameOrBefore;proto.isValid=isValid$2;proto.lang=lang;proto.locale=locale;proto.localeData=localeData;proto.max=prototypeMax;proto.min=prototypeMin;proto.parsingFlags=parsingFlags;proto.set=stringSet;proto.startOf=startOf;proto.subtract=subtract;proto.toArray=toArray;proto.toObject=toObject;proto.toDate=toDate;proto.toISOString=toISOString;proto.inspect=inspect;if(typeof Symbol!=="undefined"&&Symbol.for!=null){proto[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}}proto.toJSON=toJSON;proto.toString=toString;proto.unix=unix;proto.valueOf=valueOf;proto.creationData=creationData;proto.eraName=getEraName;proto.eraNarrow=getEraNarrow;proto.eraAbbr=getEraAbbr;proto.eraYear=getEraYear;proto.year=getSetYear;proto.isLeapYear=getIsLeapYear;proto.weekYear=getSetWeekYear;proto.isoWeekYear=getSetISOWeekYear;proto.quarter=proto.quarters=getSetQuarter;proto.month=getSetMonth;proto.daysInMonth=getDaysInMonth;proto.week=proto.weeks=getSetWeek;proto.isoWeek=proto.isoWeeks=getSetISOWeek;proto.weeksInYear=getWeeksInYear;proto.weeksInWeekYear=getWeeksInWeekYear;proto.isoWeeksInYear=getISOWeeksInYear;proto.isoWeeksInISOWeekYear=getISOWeeksInISOWeekYear;proto.date=getSetDayOfMonth;proto.day=proto.days=getSetDayOfWeek;proto.weekday=getSetLocaleDayOfWeek;proto.isoWeekday=getSetISODayOfWeek;proto.dayOfYear=getSetDayOfYear;proto.hour=proto.hours=getSetHour;proto.minute=proto.minutes=getSetMinute;proto.second=proto.seconds=getSetSecond;proto.millisecond=proto.milliseconds=getSetMillisecond;proto.utcOffset=getSetOffset;proto.utc=setOffsetToUTC;proto.local=setOffsetToLocal;proto.parseZone=setOffsetToParsedOffset;proto.hasAlignedHourOffset=hasAlignedHourOffset;proto.isDST=isDaylightSavingTime;proto.isLocal=isLocal;proto.isUtcOffset=isUtcOffset;proto.isUtc=isUtc;proto.isUTC=isUtc;proto.zoneAbbr=getZoneAbbr;proto.zoneName=getZoneName;proto.dates=deprecate("dates accessor is deprecated. Use date instead.",getSetDayOfMonth);proto.months=deprecate("months accessor is deprecated. Use month instead",getSetMonth);proto.years=deprecate("years accessor is deprecated. Use year instead",getSetYear);proto.zone=deprecate("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",getSetZone);proto.isDSTShifted=deprecate("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",isDaylightSavingTimeShifted);function createUnix(input){return createLocal(input*1e3)}function createInZone(){return createLocal.apply(null,arguments).parseZone()}function preParsePostFormat(string){return string}var proto$1=Locale.prototype;proto$1.calendar=calendar;proto$1.longDateFormat=longDateFormat;proto$1.invalidDate=invalidDate;proto$1.ordinal=ordinal;proto$1.preparse=preParsePostFormat;proto$1.postformat=preParsePostFormat;proto$1.relativeTime=relativeTime;proto$1.pastFuture=pastFuture;proto$1.set=set;proto$1.eras=localeEras;proto$1.erasParse=localeErasParse;proto$1.erasConvertYear=localeErasConvertYear;proto$1.erasAbbrRegex=erasAbbrRegex;proto$1.erasNameRegex=erasNameRegex;proto$1.erasNarrowRegex=erasNarrowRegex;proto$1.months=localeMonths;proto$1.monthsShort=localeMonthsShort;proto$1.monthsParse=localeMonthsParse;proto$1.monthsRegex=monthsRegex;proto$1.monthsShortRegex=monthsShortRegex;proto$1.week=localeWeek;proto$1.firstDayOfYear=localeFirstDayOfYear;proto$1.firstDayOfWeek=localeFirstDayOfWeek;proto$1.weekdays=localeWeekdays;proto$1.weekdaysMin=localeWeekdaysMin;proto$1.weekdaysShort=localeWeekdaysShort;proto$1.weekdaysParse=localeWeekdaysParse;proto$1.weekdaysRegex=weekdaysRegex;proto$1.weekdaysShortRegex=weekdaysShortRegex;proto$1.weekdaysMinRegex=weekdaysMinRegex;proto$1.isPM=localeIsPM;proto$1.meridiem=localeMeridiem;function get$1(format,index,field,setter){var locale=getLocale(),utc=createUTC().set(setter,index);return locale[field](utc,format)}function listMonthsImpl(format,index,field){if(isNumber(format)){index=format;format=undefined}format=format||"";if(index!=null){return get$1(format,index,field,"month")}var i,out=[];for(i=0;i<12;i++){out[i]=get$1(format,i,field,"month")}return out}function listWeekdaysImpl(localeSorted,format,index,field){if(typeof localeSorted==="boolean"){if(isNumber(format)){index=format;format=undefined}format=format||""}else{format=localeSorted;index=format;localeSorted=false;if(isNumber(format)){index=format;format=undefined}format=format||""}var locale=getLocale(),shift=localeSorted?locale._week.dow:0,i,out=[];if(index!=null){return get$1(format,(index+shift)%7,field,"day")}for(i=0;i<7;i++){out[i]=get$1(format,(i+shift)%7,field,"day")}return out}function listMonths(format,index){return listMonthsImpl(format,index,"months")}function listMonthsShort(format,index){return listMonthsImpl(format,index,"monthsShort")}function listWeekdays(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,"weekdays")}function listWeekdaysShort(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,"weekdaysShort")}function listWeekdaysMin(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,"weekdaysMin")}getSetGlobalLocale("en",{eras:[{since:"0001-01-01",until:+Infinity,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-Infinity,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(number){var b=number%10,output=toInt(number%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th";return number+output}});hooks.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",getSetGlobalLocale);hooks.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",getLocale);var mathAbs=Math.abs;function abs(){var data=this._data;this._milliseconds=mathAbs(this._milliseconds);this._days=mathAbs(this._days);this._months=mathAbs(this._months);data.milliseconds=mathAbs(data.milliseconds);data.seconds=mathAbs(data.seconds);data.minutes=mathAbs(data.minutes);data.hours=mathAbs(data.hours);data.months=mathAbs(data.months);data.years=mathAbs(data.years);return this}function addSubtract$1(duration,input,value,direction){var other=createDuration(input,value);duration._milliseconds+=direction*other._milliseconds;duration._days+=direction*other._days;duration._months+=direction*other._months;return duration._bubble()}function add$1(input,value){return addSubtract$1(this,input,value,1)}function subtract$1(input,value){return addSubtract$1(this,input,value,-1)}function absCeil(number){if(number<0){return Math.floor(number)}else{return Math.ceil(number)}}function bubble(){var milliseconds=this._milliseconds,days=this._days,months=this._months,data=this._data,seconds,minutes,hours,years,monthsFromDays;if(!(milliseconds>=0&&days>=0&&months>=0||milliseconds<=0&&days<=0&&months<=0)){milliseconds+=absCeil(monthsToDays(months)+days)*864e5;days=0;months=0}data.milliseconds=milliseconds%1e3;seconds=absFloor(milliseconds/1e3);data.seconds=seconds%60;minutes=absFloor(seconds/60);data.minutes=minutes%60;hours=absFloor(minutes/60);data.hours=hours%24;days+=absFloor(hours/24);monthsFromDays=absFloor(daysToMonths(days));months+=monthsFromDays;days-=absCeil(monthsToDays(monthsFromDays));years=absFloor(months/12);months%=12;data.days=days;data.months=months;data.years=years;return this}function daysToMonths(days){return days*4800/146097}function monthsToDays(months){return months*146097/4800}function as(units){if(!this.isValid()){return NaN}var days,months,milliseconds=this._milliseconds;units=normalizeUnits(units);if(units==="month"||units==="quarter"||units==="year"){days=this._days+milliseconds/864e5;months=this._months+daysToMonths(days);switch(units){case"month":return months;case"quarter":return months/3;case"year":return months/12}}else{days=this._days+Math.round(monthsToDays(this._months));switch(units){case"week":return days/7+milliseconds/6048e5;case"day":return days+milliseconds/864e5;case"hour":return days*24+milliseconds/36e5;case"minute":return days*1440+milliseconds/6e4;case"second":return days*86400+milliseconds/1e3;case"millisecond":return Math.floor(days*864e5)+milliseconds;default:throw new Error("Unknown unit "+units)}}}function valueOf$1(){if(!this.isValid()){return NaN}return this._milliseconds+this._days*864e5+this._months%12*2592e6+toInt(this._months/12)*31536e6}function makeAs(alias){return function(){return this.as(alias)}}var asMilliseconds=makeAs("ms"),asSeconds=makeAs("s"),asMinutes=makeAs("m"),asHours=makeAs("h"),asDays=makeAs("d"),asWeeks=makeAs("w"),asMonths=makeAs("M"),asQuarters=makeAs("Q"),asYears=makeAs("y");function clone$1(){return createDuration(this)}function get$2(units){units=normalizeUnits(units);return this.isValid()?this[units+"s"]():NaN}function makeGetter(name){return function(){return this.isValid()?this._data[name]:NaN}}var milliseconds=makeGetter("milliseconds"),seconds=makeGetter("seconds"),minutes=makeGetter("minutes"),hours=makeGetter("hours"),days=makeGetter("days"),months=makeGetter("months"),years=makeGetter("years");function weeks(){return absFloor(this.days()/7)}var round=Math.round,thresholds={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function substituteTimeAgo(string,number,withoutSuffix,isFuture,locale){return locale.relativeTime(number||1,!!withoutSuffix,string,isFuture)}function relativeTime$1(posNegDuration,withoutSuffix,thresholds,locale){var duration=createDuration(posNegDuration).abs(),seconds=round(duration.as("s")),minutes=round(duration.as("m")),hours=round(duration.as("h")),days=round(duration.as("d")),months=round(duration.as("M")),weeks=round(duration.as("w")),years=round(duration.as("y")),a=seconds<=thresholds.ss&&["s",seconds]||seconds<thresholds.s&&["ss",seconds]||minutes<=1&&["m"]||minutes<thresholds.m&&["mm",minutes]||hours<=1&&["h"]||hours<thresholds.h&&["hh",hours]||days<=1&&["d"]||days<thresholds.d&&["dd",days];if(thresholds.w!=null){a=a||weeks<=1&&["w"]||weeks<thresholds.w&&["ww",weeks]}a=a||months<=1&&["M"]||months<thresholds.M&&["MM",months]||years<=1&&["y"]||["yy",years];a[2]=withoutSuffix;a[3]=+posNegDuration>0;a[4]=locale;return substituteTimeAgo.apply(null,a)}function getSetRelativeTimeRounding(roundingFunction){if(roundingFunction===undefined){return round}if(typeof roundingFunction==="function"){round=roundingFunction;return true}return false}function getSetRelativeTimeThreshold(threshold,limit){if(thresholds[threshold]===undefined){return false}if(limit===undefined){return thresholds[threshold]}thresholds[threshold]=limit;if(threshold==="s"){thresholds.ss=limit-1}return true}function humanize(argWithSuffix,argThresholds){if(!this.isValid()){return this.localeData().invalidDate()}var withSuffix=false,th=thresholds,locale,output;if(typeof argWithSuffix==="object"){argThresholds=argWithSuffix;argWithSuffix=false}if(typeof argWithSuffix==="boolean"){withSuffix=argWithSuffix}if(typeof argThresholds==="object"){th=Object.assign({},thresholds,argThresholds);if(argThresholds.s!=null&&argThresholds.ss==null){th.ss=argThresholds.s-1}}locale=this.localeData();output=relativeTime$1(this,!withSuffix,th,locale);if(withSuffix){output=locale.pastFuture(+this,output)}return locale.postformat(output)}var abs$1=Math.abs;function sign(x){return(x>0)-(x<0)||+x}function toISOString$1(){if(!this.isValid()){return this.localeData().invalidDate()}var seconds=abs$1(this._milliseconds)/1e3,days=abs$1(this._days),months=abs$1(this._months),minutes,hours,years,s,total=this.asSeconds(),totalSign,ymSign,daysSign,hmsSign;if(!total){return"P0D"}minutes=absFloor(seconds/60);hours=absFloor(minutes/60);seconds%=60;minutes%=60;years=absFloor(months/12);months%=12;s=seconds?seconds.toFixed(3).replace(/\.?0+$/,""):"";totalSign=total<0?"-":"";ymSign=sign(this._months)!==sign(total)?"-":"";daysSign=sign(this._days)!==sign(total)?"-":"";hmsSign=sign(this._milliseconds)!==sign(total)?"-":"";return totalSign+"P"+(years?ymSign+years+"Y":"")+(months?ymSign+months+"M":"")+(days?daysSign+days+"D":"")+(hours||minutes||seconds?"T":"")+(hours?hmsSign+hours+"H":"")+(minutes?hmsSign+minutes+"M":"")+(seconds?hmsSign+s+"S":"")}var proto$2=Duration.prototype;proto$2.isValid=isValid$1;proto$2.abs=abs;proto$2.add=add$1;proto$2.subtract=subtract$1;proto$2.as=as;proto$2.asMilliseconds=asMilliseconds;proto$2.asSeconds=asSeconds;proto$2.asMinutes=asMinutes;proto$2.asHours=asHours;proto$2.asDays=asDays;proto$2.asWeeks=asWeeks;proto$2.asMonths=asMonths;proto$2.asQuarters=asQuarters;proto$2.asYears=asYears;proto$2.valueOf=valueOf$1;proto$2._bubble=bubble;proto$2.clone=clone$1;proto$2.get=get$2;proto$2.milliseconds=milliseconds;proto$2.seconds=seconds;proto$2.minutes=minutes;proto$2.hours=hours;proto$2.days=days;proto$2.weeks=weeks;proto$2.months=months;proto$2.years=years;proto$2.humanize=humanize;proto$2.toISOString=toISOString$1;proto$2.toString=toISOString$1;proto$2.toJSON=toISOString$1;proto$2.locale=locale;proto$2.localeData=localeData;proto$2.toIsoString=deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",toISOString$1);proto$2.lang=lang;addFormatToken("X",0,0,"unix");addFormatToken("x",0,0,"valueOf");addRegexToken("x",matchSigned);addRegexToken("X",matchTimestamp);addParseToken("X",function(input,array,config){config._d=new Date(parseFloat(input)*1e3)});addParseToken("x",function(input,array,config){config._d=new Date(toInt(input))});hooks.version="2.29.1";setHookCallback(createLocal);hooks.fn=proto;hooks.min=min;hooks.max=max;hooks.now=now;hooks.utc=createUTC;hooks.unix=createUnix;hooks.months=listMonths;hooks.isDate=isDate;hooks.locale=getSetGlobalLocale;hooks.invalid=createInvalid;hooks.duration=createDuration;hooks.isMoment=isMoment;hooks.weekdays=listWeekdays;hooks.parseZone=createInZone;hooks.localeData=getLocale;hooks.isDuration=isDuration;hooks.monthsShort=listMonthsShort;hooks.weekdaysMin=listWeekdaysMin;hooks.defineLocale=defineLocale;hooks.updateLocale=updateLocale;hooks.locales=listLocales;hooks.weekdaysShort=listWeekdaysShort;hooks.normalizeUnits=normalizeUnits;hooks.relativeTimeRounding=getSetRelativeTimeRounding;hooks.relativeTimeThreshold=getSetRelativeTimeThreshold;hooks.calendarFormat=getCalendarFormat;hooks.prototype=proto;hooks.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};return hooks})},{}],37:[function(require,module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]};process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],38:[function(require,module,exports){!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.SlimSelect=t():e.SlimSelect=t()}(window,function(){return(s={},n.m=i=[function(e,t,i){"use strict";function s(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}var n;t.__esModule=!0,t.hasClassInTree=function(e,t){function s(e,t){return t&&e&&e.classList&&e.classList.contains(t)?e:null}return s(e,t)||function e(t,i){return t&&t!==document?s(t,i)?t:e(t.parentNode,i):null}(e,t)},t.ensureElementInView=function(e,t){var i=e.scrollTop+e.offsetTop,s=i+e.clientHeight,n=t.offsetTop,a=n+t.clientHeight;n<i?e.scrollTop-=i-n:s<a&&(e.scrollTop+=a-s)},t.putContent=function(e,t,i){var s=e.offsetHeight,n=e.getBoundingClientRect(),a=i?n.top:n.top-s,l=i?n.bottom:n.bottom+s;return a<=0?"below":l>=window.innerHeight?"above":i?t:"below"},t.debounce=function(n,a,l){var o;return void 0===a&&(a=100),void 0===l&&(l=!1),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=self,s=l&&!o;clearTimeout(o),o=setTimeout(function(){o=null,l||n.apply(i,e)},a),s&&n.apply(i,e)}},t.isValueInArrayOfObjects=function(e,t,i){if(!Array.isArray(e))return e[t]===i;for(var s=0,n=e;s<n.length;s++){var a=n[s];if(a&&a[t]&&a[t]===i)return!0}return!1},t.highlight=function(e,t,i){var s=e,n=new RegExp("("+t.trim()+")(?![^<]*>[^<>]*</)","i");if(!e.match(n))return e;var a=e.match(n).index,l=a+e.match(n)[0].toString().length,o=e.substring(a,l);return s=s.replace(n,'<mark class="'+i+'">'+o+"</mark>")},"function"!=typeof(n=window).CustomEvent&&(s.prototype=n.Event.prototype,n.CustomEvent=s)},function(e,t,i){"use strict";t.__esModule=!0;var s=(n.prototype.newOption=function(e){return{id:e.id?e.id:String(Math.floor(1e8*Math.random())),value:e.value?e.value:"",text:e.text?e.text:"",innerHTML:e.innerHTML?e.innerHTML:"",selected:!!e.selected&&e.selected,display:void 0===e.display||e.display,disabled:!!e.disabled&&e.disabled,placeholder:!!e.placeholder&&e.placeholder,class:e.class?e.class:void 0,data:e.data?e.data:{}}},n.prototype.add=function(e){this.data.push({id:String(Math.floor(1e8*Math.random())),value:e.value,text:e.text,innerHTML:"",selected:!1,display:!0,disabled:!1,placeholder:!1,class:void 0,data:{}})},n.prototype.parseSelectData=function(){this.data=[];for(var e=0,t=this.main.select.element.childNodes;e<t.length;e++){var i=t[e];if("OPTGROUP"===i.nodeName){for(var s={label:i.label,options:[]},n=0,a=i.childNodes;n<a.length;n++){var l=a[n];if("OPTION"===l.nodeName){var o=this.pullOptionData(l);s.options.push(o),o.placeholder&&""!==o.text.trim()&&(this.main.config.placeholderText=o.text)}}this.data.push(s)}else"OPTION"===i.nodeName&&(o=this.pullOptionData(i),this.data.push(o),o.placeholder&&""!==o.text.trim()&&(this.main.config.placeholderText=o.text))}},n.prototype.pullOptionData=function(e){return{id:!!e.dataset&&e.dataset.id||String(Math.floor(1e8*Math.random())),value:e.value,text:e.text,innerHTML:e.innerHTML,selected:e.selected,disabled:e.disabled,placeholder:"true"===e.dataset.placeholder,class:e.className,style:e.style.cssText,data:e.dataset}},n.prototype.setSelectedFromSelect=function(){if(this.main.config.isMultiple){for(var e=[],t=0,i=this.main.select.element.options;t<i.length;t++){var s=i[t];if(s.selected){var n=this.getObjectFromData(s.value,"value");n&&n.id&&e.push(n.id)}}this.setSelected(e,"id")}else{var a=this.main.select.element;if(-1!==a.selectedIndex){var l=a.options[a.selectedIndex].value;this.setSelected(l,"value")}}},n.prototype.setSelected=function(e,t){void 0===t&&(t="id");for(var i=0,s=this.data;i<s.length;i++){var n=s[i];if(n.hasOwnProperty("label")){if(n.hasOwnProperty("options")){var a=n.options;if(a)for(var l=0,o=a;l<o.length;l++){var r=o[l];r.placeholder||(r.selected=this.shouldBeSelected(r,e,t))}}}else n.selected=this.shouldBeSelected(n,e,t)}},n.prototype.shouldBeSelected=function(e,t,i){if(void 0===i&&(i="id"),Array.isArray(t))for(var s=0,n=t;s<n.length;s++){var a=n[s];if(i in e&&String(e[i])===String(a))return!0}else if(i in e&&String(e[i])===String(t))return!0;return!1},n.prototype.getSelected=function(){for(var e={text:""},t=[],i=0,s=this.data;i<s.length;i++){var n=s[i];if(n.hasOwnProperty("label")){if(n.hasOwnProperty("options")){var a=n.options;if(a)for(var l=0,o=a;l<o.length;l++){var r=o[l];r.selected&&(this.main.config.isMultiple?t.push(r):e=r)}}}else n.selected&&(this.main.config.isMultiple?t.push(n):e=n)}return this.main.config.isMultiple?t:e},n.prototype.addToSelected=function(e,t){if(void 0===t&&(t="id"),this.main.config.isMultiple){var i=[],s=this.getSelected();if(Array.isArray(s))for(var n=0,a=s;n<a.length;n++){var l=a[n];i.push(l[t])}i.push(e),this.setSelected(i,t)}},n.prototype.removeFromSelected=function(e,t){if(void 0===t&&(t="id"),this.main.config.isMultiple){for(var i=[],s=0,n=this.getSelected();s<n.length;s++){var a=n[s];String(a[t])!==String(e)&&i.push(a[t])}this.setSelected(i,t)}},n.prototype.onDataChange=function(){this.main.onChange&&this.isOnChangeEnabled&&this.main.onChange(JSON.parse(JSON.stringify(this.getSelected())))},n.prototype.getObjectFromData=function(e,t){void 0===t&&(t="id");for(var i=0,s=this.data;i<s.length;i++){var n=s[i];if(t in n&&String(n[t])===String(e))return n;if(n.hasOwnProperty("options")){var a=n;if(a.options)for(var l=0,o=a.options;l<o.length;l++){var r=o[l];if(String(r[t])===String(e))return r}}}return null},n.prototype.search=function(n){if(""!==(this.searchValue=n).trim()){var a=this.main.config.searchFilter,e=this.data.slice(0);n=n.trim();var t=e.map(function(e){if(e.hasOwnProperty("options")){var t=e,i=[];if(t.options&&(i=t.options.filter(function(e){return a(e,n)})),0!==i.length){var s=Object.assign({},t);return s.options=i,s}}return e.hasOwnProperty("text")&&a(e,n)?e:null});this.filtered=t.filter(function(e){return e})}else this.filtered=null},n);function n(e){this.contentOpen=!1,this.contentPosition="below",this.isOnChangeEnabled=!0,this.main=e.main,this.searchValue="",this.data=[],this.filtered=null,this.parseSelectData(),this.setSelectedFromSelect()}function r(e){return void 0!==e.text||(console.error("Data object option must have at least have a text value. Check object: "+JSON.stringify(e)),!1)}t.Data=s,t.validateData=function(e){if(!e)return console.error("Data must be an array of objects"),!1;for(var t=0,i=0,s=e;i<s.length;i++){var n=s[i];if(n.hasOwnProperty("label")){if(n.hasOwnProperty("options")){var a=n.options;if(a)for(var l=0,o=a;l<o.length;l++){r(o[l])||t++}}}else r(n)||t++}return 0===t},t.validateOption=r},function(e,t,i){"use strict";t.__esModule=!0;var s=i(3),n=i(4),a=i(5),l=i(1),o=i(0),r=(c.prototype.validate=function(e){var t="string"==typeof e.select?document.querySelector(e.select):e.select;if(!t)throw new Error("Could not find select element");if("SELECT"!==t.tagName)throw new Error("Element isnt of type select");return t},c.prototype.selected=function(){if(this.config.isMultiple){for(var e=[],t=0,i=n=this.data.getSelected();t<i.length;t++){var s=i[t];e.push(s.value)}return e}var n;return(n=this.data.getSelected())?n.value:""},c.prototype.set=function(e,t,i,s){void 0===t&&(t="value"),void 0===i&&(i=!0),void 0===s&&(s=!0),this.config.isMultiple&&!Array.isArray(e)?this.data.addToSelected(e,t):this.data.setSelected(e,t),this.select.setValue(),this.data.onDataChange(),this.render(),i&&this.close()},c.prototype.setSelected=function(e,t,i,s){void 0===t&&(t="value"),void 0===i&&(i=!0),void 0===s&&(s=!0),this.set(e,t,i,s)},c.prototype.setData=function(e){if(l.validateData(e)){var t=JSON.parse(JSON.stringify(e)),i=this.data.getSelected();if(this.config.isAjax&&i)if(this.config.isMultiple)for(var s=0,n=i.reverse();s<n.length;s++){var a=n[s];t.unshift(a)}else t.unshift(this.data.getSelected()),t.unshift({text:"",placeholder:!0});this.select.create(t),this.data.parseSelectData(),this.data.setSelectedFromSelect()}else console.error("Validation problem on: #"+this.select.element.id)},c.prototype.addData=function(e){l.validateData([e])?(this.data.add(this.data.newOption(e)),this.select.create(this.data.data),this.data.parseSelectData(),this.data.setSelectedFromSelect(),this.render()):console.error("Validation problem on: #"+this.select.element.id)},c.prototype.open=function(){var e=this;if(this.config.isEnabled&&!this.data.contentOpen){if(this.beforeOpen&&this.beforeOpen(),this.config.isMultiple&&this.slim.multiSelected?this.slim.multiSelected.plus.classList.add("ss-cross"):this.slim.singleSelected&&(this.slim.singleSelected.arrowIcon.arrow.classList.remove("arrow-down"),this.slim.singleSelected.arrowIcon.arrow.classList.add("arrow-up")),this.slim[this.config.isMultiple?"multiSelected":"singleSelected"].container.classList.add("above"===this.data.contentPosition?this.config.openAbove:this.config.openBelow),this.slim.content.classList.add(this.config.open),"up"===this.config.showContent.toLowerCase()?this.moveContentAbove():"down"===this.config.showContent.toLowerCase()?this.moveContentBelow():"above"===o.putContent(this.slim.content,this.data.contentPosition,this.data.contentOpen)?this.moveContentAbove():this.moveContentBelow(),!this.config.isMultiple){var t=this.data.getSelected();if(t){var i=t.id,s=this.slim.list.querySelector('[data-id="'+i+'"]');s&&o.ensureElementInView(this.slim.list,s)}}setTimeout(function(){e.data.contentOpen=!0,e.config.searchFocus&&e.slim.search.input.focus(),e.afterOpen&&e.afterOpen()},this.config.timeoutDelay)}},c.prototype.close=function(){var e=this;this.data.contentOpen&&(this.beforeClose&&this.beforeClose(),this.config.isMultiple&&this.slim.multiSelected?(this.slim.multiSelected.container.classList.remove(this.config.openAbove),this.slim.multiSelected.container.classList.remove(this.config.openBelow),this.slim.multiSelected.plus.classList.remove("ss-cross")):this.slim.singleSelected&&(this.slim.singleSelected.container.classList.remove(this.config.openAbove),this.slim.singleSelected.container.classList.remove(this.config.openBelow),this.slim.singleSelected.arrowIcon.arrow.classList.add("arrow-down"),this.slim.singleSelected.arrowIcon.arrow.classList.remove("arrow-up")),this.slim.content.classList.remove(this.config.open),this.data.contentOpen=!1,this.search(""),setTimeout(function(){e.slim.content.removeAttribute("style"),e.data.contentPosition="below",e.config.isMultiple&&e.slim.multiSelected?(e.slim.multiSelected.container.classList.remove(e.config.openAbove),e.slim.multiSelected.container.classList.remove(e.config.openBelow)):e.slim.singleSelected&&(e.slim.singleSelected.container.classList.remove(e.config.openAbove),e.slim.singleSelected.container.classList.remove(e.config.openBelow)),e.slim.search.input.blur(),e.afterClose&&e.afterClose()},this.config.timeoutDelay))},c.prototype.moveContentAbove=function(){var e=0;this.config.isMultiple&&this.slim.multiSelected?e=this.slim.multiSelected.container.offsetHeight:this.slim.singleSelected&&(e=this.slim.singleSelected.container.offsetHeight);var t=e+this.slim.content.offsetHeight-1;this.slim.content.style.margin="-"+t+"px 0 0 0",this.slim.content.style.height=t-e+1+"px",this.slim.content.style.transformOrigin="center bottom",this.data.contentPosition="above",this.config.isMultiple&&this.slim.multiSelected?(this.slim.multiSelected.container.classList.remove(this.config.openBelow),this.slim.multiSelected.container.classList.add(this.config.openAbove)):this.slim.singleSelected&&(this.slim.singleSelected.container.classList.remove(this.config.openBelow),this.slim.singleSelected.container.classList.add(this.config.openAbove))},c.prototype.moveContentBelow=function(){this.slim.content.removeAttribute("style"),this.data.contentPosition="below",this.config.isMultiple&&this.slim.multiSelected?(this.slim.multiSelected.container.classList.remove(this.config.openAbove),this.slim.multiSelected.container.classList.add(this.config.openBelow)):this.slim.singleSelected&&(this.slim.singleSelected.container.classList.remove(this.config.openAbove),this.slim.singleSelected.container.classList.add(this.config.openBelow))},c.prototype.enable=function(){this.config.isEnabled=!0,this.config.isMultiple&&this.slim.multiSelected?this.slim.multiSelected.container.classList.remove(this.config.disabled):this.slim.singleSelected&&this.slim.singleSelected.container.classList.remove(this.config.disabled),this.select.triggerMutationObserver=!1,this.select.element.disabled=!1,this.slim.search.input.disabled=!1,this.select.triggerMutationObserver=!0},c.prototype.disable=function(){this.config.isEnabled=!1,this.config.isMultiple&&this.slim.multiSelected?this.slim.multiSelected.container.classList.add(this.config.disabled):this.slim.singleSelected&&this.slim.singleSelected.container.classList.add(this.config.disabled),this.select.triggerMutationObserver=!1,this.select.element.disabled=!0,this.slim.search.input.disabled=!0,this.select.triggerMutationObserver=!0},c.prototype.search=function(t){if(this.data.searchValue!==t)if(this.slim.search.input.value=t,this.config.isAjax){var i=this;this.config.isSearching=!0,this.render(),this.ajax&&this.ajax(t,function(e){i.config.isSearching=!1,Array.isArray(e)?(e.unshift({text:"",placeholder:!0}),i.setData(e),i.data.search(t),i.render()):"string"==typeof e?i.slim.options(e):i.render()})}else this.data.search(t),this.render()},c.prototype.setSearchText=function(e){this.config.searchText=e},c.prototype.render=function(){this.config.isMultiple?this.slim.values():(this.slim.placeholder(),this.slim.deselect()),this.slim.options()},c.prototype.destroy=function(e){void 0===e&&(e=null);var t=e?document.querySelector("."+e):this.slim.container,i=e?document.querySelector("[data-ssid="+e+"]"):this.select.element;t&&i&&(i.style.display=null,delete i.dataset.ssid,i.slim=null,t.parentElement&&t.parentElement.removeChild(t))},c);function c(e){var t=this;this.ajax=null,this.addable=null,this.beforeOnChange=null,this.onChange=null,this.beforeOpen=null,this.afterOpen=null,this.beforeClose=null,this.afterClose=null;var i=this.validate(e);i.dataset.ssid&&this.destroy(i.dataset.ssid),e.ajax&&(this.ajax=e.ajax),e.addable&&(this.addable=e.addable),this.config=new s.Config({select:i,isAjax:!!e.ajax,showSearch:e.showSearch,searchPlaceholder:e.searchPlaceholder,searchText:e.searchText,searchingText:e.searchingText,searchFocus:e.searchFocus,searchHighlight:e.searchHighlight,searchFilter:e.searchFilter,closeOnSelect:e.closeOnSelect,showContent:e.showContent,placeholderText:e.placeholder,allowDeselect:e.allowDeselect,allowDeselectOption:e.allowDeselectOption,hideSelectedOption:e.hideSelectedOption,deselectLabel:e.deselectLabel,isEnabled:e.isEnabled,valuesUseText:e.valuesUseText,showOptionTooltips:e.showOptionTooltips,selectByGroup:e.selectByGroup,limit:e.limit,timeoutDelay:e.timeoutDelay}),this.select=new n.Select({select:i,main:this}),this.data=new l.Data({main:this}),this.slim=new a.Slim({main:this}),this.select.element.parentNode&&this.select.element.parentNode.insertBefore(this.slim.container,this.select.element.nextSibling),e.data?this.setData(e.data):this.render(),document.addEventListener("click",function(e){e.target&&!o.hasClassInTree(e.target,t.config.id)&&t.close()}),window.addEventListener("scroll",o.debounce(function(e){t.data.contentOpen&&"auto"===t.config.showContent&&("above"===o.putContent(t.slim.content,t.data.contentPosition,t.data.contentOpen)?t.moveContentAbove():t.moveContentBelow())}),!1),e.beforeOnChange&&(this.beforeOnChange=e.beforeOnChange),e.onChange&&(this.onChange=e.onChange),e.beforeOpen&&(this.beforeOpen=e.beforeOpen),e.afterOpen&&(this.afterOpen=e.afterOpen),e.beforeClose&&(this.beforeClose=e.beforeClose),e.afterClose&&(this.afterClose=e.afterClose),this.config.isEnabled||this.disable()}t.default=r},function(e,t,i){"use strict";t.__esModule=!0;var s=(n.prototype.searchFilter=function(e,t){return-1!==e.text.toLowerCase().indexOf(t.toLowerCase())},n);function n(e){this.id="",this.isMultiple=!1,this.isAjax=!1,this.isSearching=!1,this.showSearch=!0,this.searchFocus=!0,this.searchHighlight=!1,this.closeOnSelect=!0,this.showContent="auto",this.searchPlaceholder="Search",this.searchText="No Results",this.searchingText="Searching...",this.placeholderText="Select Value",this.allowDeselect=!1,this.allowDeselectOption=!1,this.hideSelectedOption=!1,this.deselectLabel="x",this.isEnabled=!0,this.valuesUseText=!1,this.showOptionTooltips=!1,this.selectByGroup=!1,this.limit=0,this.timeoutDelay=200,this.main="ss-main",this.singleSelected="ss-single-selected",this.arrow="ss-arrow",this.multiSelected="ss-multi-selected",this.add="ss-add",this.plus="ss-plus",this.values="ss-values",this.value="ss-value",this.valueText="ss-value-text",this.valueDelete="ss-value-delete",this.content="ss-content",this.open="ss-open",this.openAbove="ss-open-above",this.openBelow="ss-open-below",this.search="ss-search",this.searchHighlighter="ss-search-highlight",this.addable="ss-addable",this.list="ss-list",this.optgroup="ss-optgroup",this.optgroupLabel="ss-optgroup-label",this.optgroupLabelSelectable="ss-optgroup-label-selectable",this.option="ss-option",this.optionSelected="ss-option-selected",this.highlighted="ss-highlighted",this.disabled="ss-disabled",this.hide="ss-hide",this.id="ss-"+Math.floor(1e5*Math.random()),this.style=e.select.style.cssText,this.class=e.select.className.split(" "),this.isMultiple=e.select.multiple,this.isAjax=e.isAjax,this.showSearch=!1!==e.showSearch,this.searchFocus=!1!==e.searchFocus,this.searchHighlight=!0===e.searchHighlight,this.closeOnSelect=!1!==e.closeOnSelect,e.showContent&&(this.showContent=e.showContent),this.isEnabled=!1!==e.isEnabled,e.searchPlaceholder&&(this.searchPlaceholder=e.searchPlaceholder),e.searchText&&(this.searchText=e.searchText),e.searchingText&&(this.searchingText=e.searchingText),e.placeholderText&&(this.placeholderText=e.placeholderText),this.allowDeselect=!0===e.allowDeselect,this.allowDeselectOption=!0===e.allowDeselectOption,this.hideSelectedOption=!0===e.hideSelectedOption,e.deselectLabel&&(this.deselectLabel=e.deselectLabel),e.valuesUseText&&(this.valuesUseText=e.valuesUseText),e.showOptionTooltips&&(this.showOptionTooltips=e.showOptionTooltips),e.selectByGroup&&(this.selectByGroup=e.selectByGroup),e.limit&&(this.limit=e.limit),e.searchFilter&&(this.searchFilter=e.searchFilter),null!=e.timeoutDelay&&(this.timeoutDelay=e.timeoutDelay)}t.Config=s},function(e,t,i){"use strict";t.__esModule=!0;var s=(n.prototype.setValue=function(){if(this.main.data.getSelected()){if(this.main.config.isMultiple)for(var e=this.main.data.getSelected(),t=0,i=this.element.options;t<i.length;t++){var s=i[t];s.selected=!1;for(var n=0,a=e;n<a.length;n++)a[n].value===s.value&&(s.selected=!0)}else e=this.main.data.getSelected(),this.element.value=e?e.value:"";this.main.data.isOnChangeEnabled=!1,this.element.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.main.data.isOnChangeEnabled=!0}},n.prototype.addAttributes=function(){this.element.tabIndex=-1,this.element.style.display="none",this.element.dataset.ssid=this.main.config.id},n.prototype.addEventListeners=function(){var t=this;this.element.addEventListener("change",function(e){t.main.data.setSelectedFromSelect(),t.main.render()})},n.prototype.addMutationObserver=function(){var t=this;this.main.config.isAjax||(this.mutationObserver=new MutationObserver(function(e){t.triggerMutationObserver&&(t.main.data.parseSelectData(),t.main.data.setSelectedFromSelect(),t.main.render(),e.forEach(function(e){"class"===e.attributeName&&t.main.slim.updateContainerDivClass(t.main.slim.container)}))}),this.observeMutationObserver())},n.prototype.observeMutationObserver=function(){this.mutationObserver&&this.mutationObserver.observe(this.element,{attributes:!0,childList:!0,characterData:!0})},n.prototype.disconnectMutationObserver=function(){this.mutationObserver&&this.mutationObserver.disconnect()},n.prototype.create=function(e){this.element.innerHTML="";for(var t=0,i=e;t<i.length;t++){var s=i[t];if(s.hasOwnProperty("options")){var n=s,a=document.createElement("optgroup");if(a.label=n.label,n.options)for(var l=0,o=n.options;l<o.length;l++){var r=o[l];a.appendChild(this.createOption(r))}this.element.appendChild(a)}else this.element.appendChild(this.createOption(s))}},n.prototype.createOption=function(t){var i=document.createElement("option");return i.value=t.value||t.text,i.innerHTML=t.innerHTML||t.text,t.selected&&(i.selected=t.selected),t.disabled&&(i.disabled=!0),t.placeholder&&i.setAttribute("data-placeholder","true"),t.class&&t.class.split(" ").forEach(function(e){i.classList.add(e)}),t.data&&"object"==typeof t.data&&Object.keys(t.data).forEach(function(e){i.setAttribute("data-"+e,t.data[e])}),i},n);function n(e){this.triggerMutationObserver=!0,this.element=e.select,this.main=e.main,this.element.disabled&&(this.main.config.isEnabled=!1),this.addAttributes(),this.addEventListeners(),this.mutationObserver=null,this.addMutationObserver(),this.element.slim=e.main}t.Select=s},function(e,t,i){"use strict";t.__esModule=!0;var a=i(0),l=i(1),s=(n.prototype.containerDiv=function(){var e=document.createElement("div");return e.style.cssText=this.main.config.style,this.updateContainerDivClass(e),e},n.prototype.updateContainerDivClass=function(e){this.main.config.class=this.main.select.element.className.split(" "),e.className="",e.classList.add(this.main.config.id),e.classList.add(this.main.config.main);for(var t=0,i=this.main.config.class;t<i.length;t++){var s=i[t];""!==s.trim()&&e.classList.add(s)}},n.prototype.singleSelectedDiv=function(){var t=this,e=document.createElement("div");e.classList.add(this.main.config.singleSelected);var i=document.createElement("span");i.classList.add("placeholder"),e.appendChild(i);var s=document.createElement("span");s.innerHTML=this.main.config.deselectLabel,s.classList.add("ss-deselect"),s.onclick=function(e){e.stopPropagation(),t.main.config.isEnabled&&t.main.set("")},e.appendChild(s);var n=document.createElement("span");n.classList.add(this.main.config.arrow);var a=document.createElement("span");return a.classList.add("arrow-down"),n.appendChild(a),e.appendChild(n),e.onclick=function(){t.main.config.isEnabled&&(t.main.data.contentOpen?t.main.close():t.main.open())},{container:e,placeholder:i,deselect:s,arrowIcon:{container:n,arrow:a}}},n.prototype.placeholder=function(){var e=this.main.data.getSelected();if(null===e||e&&e.placeholder){var t=document.createElement("span");t.classList.add(this.main.config.disabled),t.innerHTML=this.main.config.placeholderText,this.singleSelected&&(this.singleSelected.placeholder.innerHTML=t.outerHTML)}else{var i="";e&&(i=e.innerHTML&&!0!==this.main.config.valuesUseText?e.innerHTML:e.text),this.singleSelected&&(this.singleSelected.placeholder.innerHTML=e?i:"")}},n.prototype.deselect=function(){if(this.singleSelected){if(!this.main.config.allowDeselect)return void this.singleSelected.deselect.classList.add("ss-hide");""===this.main.selected()?this.singleSelected.deselect.classList.add("ss-hide"):this.singleSelected.deselect.classList.remove("ss-hide")}},n.prototype.multiSelectedDiv=function(){var t=this,e=document.createElement("div");e.classList.add(this.main.config.multiSelected);var i=document.createElement("div");i.classList.add(this.main.config.values),e.appendChild(i);var s=document.createElement("div");s.classList.add(this.main.config.add);var n=document.createElement("span");return n.classList.add(this.main.config.plus),n.onclick=function(e){t.main.data.contentOpen&&(t.main.close(),e.stopPropagation())},s.appendChild(n),e.appendChild(s),e.onclick=function(e){t.main.config.isEnabled&&(e.target.classList.contains(t.main.config.valueDelete)||(t.main.data.contentOpen?t.main.close():t.main.open()))},{container:e,values:i,add:s,plus:n}},n.prototype.values=function(){if(this.multiSelected){for(var e,t=this.multiSelected.values.childNodes,i=this.main.data.getSelected(),s=[],n=0,a=t;n<a.length;n++){var l=a[n];e=!0;for(var o=0,r=i;o<r.length;o++){var c=r[o];String(c.id)===String(l.dataset.id)&&(e=!1)}e&&s.push(l)}for(var h=0,d=s;h<d.length;h++){var u=d[h];u.classList.add("ss-out"),this.multiSelected.values.removeChild(u)}for(t=this.multiSelected.values.childNodes,c=0;c<i.length;c++){e=!1;for(var p=0,m=t;p<m.length;p++)l=m[p],String(i[c].id)===String(l.dataset.id)&&(e=!0);e||(0!==t.length&&HTMLElement.prototype.insertAdjacentElement?0===c?this.multiSelected.values.insertBefore(this.valueDiv(i[c]),t[c]):t[c-1].insertAdjacentElement("afterend",this.valueDiv(i[c])):this.multiSelected.values.appendChild(this.valueDiv(i[c])))}if(0===i.length){var f=document.createElement("span");f.classList.add(this.main.config.disabled),f.innerHTML=this.main.config.placeholderText,this.multiSelected.values.innerHTML=f.outerHTML}}},n.prototype.valueDiv=function(a){var l=this,e=document.createElement("div");e.classList.add(this.main.config.value),e.dataset.id=a.id;var t=document.createElement("span");t.classList.add(this.main.config.valueText),t.innerHTML=a.innerHTML&&!0!==this.main.config.valuesUseText?a.innerHTML:a.text,e.appendChild(t);var i=document.createElement("span");return i.classList.add(this.main.config.valueDelete),i.innerHTML=this.main.config.deselectLabel,i.onclick=function(e){e.preventDefault(),e.stopPropagation();var t=!1;if(l.main.config.isEnabled){if(l.main.beforeOnChange||(t=!0),l.main.beforeOnChange){for(var i=l.main.data.getSelected(),s=JSON.parse(JSON.stringify(i)),n=0;n<s.length;n++)s[n].id===a.id&&s.splice(n,1);!1!==l.main.beforeOnChange(s)&&(t=!0)}t&&(l.main.data.removeFromSelected(a.id,"id"),l.main.render(),l.main.select.setValue(),l.main.data.onDataChange())}},e.appendChild(i),e},n.prototype.contentDiv=function(){var e=document.createElement("div");return e.classList.add(this.main.config.content),e},n.prototype.searchDiv=function(){var n=this,e=document.createElement("div"),s=document.createElement("input"),a=document.createElement("div");e.classList.add(this.main.config.search);var t={container:e,input:s};return this.main.config.showSearch||(e.classList.add(this.main.config.hide),s.readOnly=!0),s.type="search",s.placeholder=this.main.config.searchPlaceholder,s.tabIndex=0,s.setAttribute("aria-label",this.main.config.searchPlaceholder),s.onclick=function(e){setTimeout(function(){""===e.target.value&&n.main.search("")},10)},s.onkeydown=function(e){"ArrowUp"===e.key?(n.main.open(),n.highlightUp(),e.preventDefault()):"ArrowDown"===e.key?(n.main.open(),n.highlightDown(),e.preventDefault()):"Tab"===e.key?n.main.data.contentOpen?n.main.close():setTimeout(function(){n.main.close()},n.main.config.timeoutDelay):"Enter"===e.key&&e.preventDefault()},s.onkeyup=function(e){var t=e.target;if("Enter"===e.key){if(n.main.addable&&e.ctrlKey)return a.click(),e.preventDefault(),void e.stopPropagation();var i=n.list.querySelector("."+n.main.config.highlighted);i&&i.click()}else"ArrowUp"===e.key||"ArrowDown"===e.key||("Escape"===e.key?n.main.close():n.main.config.showSearch&&n.main.data.contentOpen?n.main.search(t.value):s.value="");e.preventDefault(),e.stopPropagation()},s.onfocus=function(){n.main.open()},e.appendChild(s),this.main.addable&&(a.classList.add(this.main.config.addable),a.innerHTML="+",a.onclick=function(e){if(n.main.addable){e.preventDefault(),e.stopPropagation();var t=n.search.input.value;if(""===t.trim())return void n.search.input.focus();var i=n.main.addable(t),s="";if(!i)return;"object"==typeof i?l.validateOption(i)&&(n.main.addData(i),s=i.value?i.value:i.text):(n.main.addData(n.main.data.newOption({text:i,value:i})),s=i),n.main.search(""),setTimeout(function(){n.main.set(s,"value",!1,!1)},100),n.main.config.closeOnSelect&&setTimeout(function(){n.main.close()},100)}},e.appendChild(a),t.addable=a),t},n.prototype.highlightUp=function(){var e=this.list.querySelector("."+this.main.config.highlighted),t=null;if(e)for(t=e.previousSibling;null!==t&&t.classList.contains(this.main.config.disabled);)t=t.previousSibling;else{var i=this.list.querySelectorAll("."+this.main.config.option+":not(."+this.main.config.disabled+")");t=i[i.length-1]}if(t&&t.classList.contains(this.main.config.optgroupLabel)&&(t=null),null===t){var s=e.parentNode;if(s.classList.contains(this.main.config.optgroup)&&s.previousSibling){var n=s.previousSibling.querySelectorAll("."+this.main.config.option+":not(."+this.main.config.disabled+")");n.length&&(t=n[n.length-1])}}t&&(e&&e.classList.remove(this.main.config.highlighted),t.classList.add(this.main.config.highlighted),a.ensureElementInView(this.list,t))},n.prototype.highlightDown=function(){var e=this.list.querySelector("."+this.main.config.highlighted),t=null;if(e)for(t=e.nextSibling;null!==t&&t.classList.contains(this.main.config.disabled);)t=t.nextSibling;else t=this.list.querySelector("."+this.main.config.option+":not(."+this.main.config.disabled+")");if(null===t&&null!==e){var i=e.parentNode;i.classList.contains(this.main.config.optgroup)&&i.nextSibling&&(t=i.nextSibling.querySelector("."+this.main.config.option+":not(."+this.main.config.disabled+")"))}t&&(e&&e.classList.remove(this.main.config.highlighted),t.classList.add(this.main.config.highlighted),a.ensureElementInView(this.list,t))},n.prototype.listDiv=function(){var e=document.createElement("div");return e.classList.add(this.main.config.list),e},n.prototype.options=function(e){void 0===e&&(e="");var t,i=this.main.data.filtered||this.main.data.data;if((this.list.innerHTML="")!==e)return(t=document.createElement("div")).classList.add(this.main.config.option),t.classList.add(this.main.config.disabled),t.innerHTML=e,void this.list.appendChild(t);if(this.main.config.isAjax&&this.main.config.isSearching)return(t=document.createElement("div")).classList.add(this.main.config.option),t.classList.add(this.main.config.disabled),t.innerHTML=this.main.config.searchingText,void this.list.appendChild(t);if(0===i.length){var s=document.createElement("div");return s.classList.add(this.main.config.option),s.classList.add(this.main.config.disabled),s.innerHTML=this.main.config.searchText,void this.list.appendChild(s)}for(var n=function(e){if(e.hasOwnProperty("label")){var t=e,n=document.createElement("div");n.classList.add(c.main.config.optgroup);var i=document.createElement("div");i.classList.add(c.main.config.optgroupLabel),c.main.config.selectByGroup&&c.main.config.isMultiple&&i.classList.add(c.main.config.optgroupLabelSelectable),i.innerHTML=t.label,n.appendChild(i);var s=t.options;if(s){for(var a=0,l=s;a<l.length;a++){var o=l[a];n.appendChild(c.option(o))}if(c.main.config.selectByGroup&&c.main.config.isMultiple){var r=c;i.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();for(var t=0,i=n.children;t<i.length;t++){var s=i[t];-1!==s.className.indexOf(r.main.config.option)&&s.click()}})}}c.list.appendChild(n)}else c.list.appendChild(c.option(e))},c=this,a=0,l=i;a<l.length;a++)n(l[a])},n.prototype.option=function(r){if(r.placeholder){var e=document.createElement("div");return e.classList.add(this.main.config.option),e.classList.add(this.main.config.hide),e}var t=document.createElement("div");t.classList.add(this.main.config.option),r.class&&r.class.split(" ").forEach(function(e){t.classList.add(e)}),r.style&&(t.style.cssText=r.style);var c=this.main.data.getSelected();t.dataset.id=r.id,this.main.config.searchHighlight&&this.main.slim&&r.innerHTML&&""!==this.main.slim.search.input.value.trim()?t.innerHTML=a.highlight(r.innerHTML,this.main.slim.search.input.value,this.main.config.searchHighlighter):r.innerHTML&&(t.innerHTML=r.innerHTML),this.main.config.showOptionTooltips&&t.textContent&&t.setAttribute("title",t.textContent);var h=this;t.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var t=this.dataset.id;if(!0===r.selected&&h.main.config.allowDeselectOption){var i=!1;if(h.main.beforeOnChange&&h.main.config.isMultiple||(i=!0),h.main.beforeOnChange&&h.main.config.isMultiple){for(var s=h.main.data.getSelected(),n=JSON.parse(JSON.stringify(s)),a=0;a<n.length;a++)n[a].id===t&&n.splice(a,1);!1!==h.main.beforeOnChange(n)&&(i=!0)}i&&(h.main.config.isMultiple?(h.main.data.removeFromSelected(t,"id"),h.main.render(),h.main.select.setValue(),h.main.data.onDataChange()):h.main.set(""))}else{if(r.disabled||r.selected)return;if(h.main.config.limit&&Array.isArray(c)&&h.main.config.limit<=c.length)return;if(h.main.beforeOnChange){var l=void 0,o=JSON.parse(JSON.stringify(h.main.data.getObjectFromData(t)));o.selected=!0,h.main.config.isMultiple?(l=JSON.parse(JSON.stringify(c))).push(o):l=JSON.parse(JSON.stringify(o)),!1!==h.main.beforeOnChange(l)&&h.main.set(t,"id",h.main.config.closeOnSelect)}else h.main.set(t,"id",h.main.config.closeOnSelect)}});var i=c&&a.isValueInArrayOfObjects(c,"id",r.id);return(r.disabled||i)&&(t.onclick=null,h.main.config.allowDeselectOption||t.classList.add(this.main.config.disabled),h.main.config.hideSelectedOption&&t.classList.add(this.main.config.hide)),i?t.classList.add(this.main.config.optionSelected):t.classList.remove(this.main.config.optionSelected),t},n);function n(e){this.main=e.main,this.container=this.containerDiv(),this.content=this.contentDiv(),this.search=this.searchDiv(),this.list=this.listDiv(),this.options(),this.singleSelected=null,this.multiSelected=null,this.main.config.isMultiple?(this.multiSelected=this.multiSelectedDiv(),this.multiSelected&&this.container.appendChild(this.multiSelected.container)):(this.singleSelected=this.singleSelectedDiv(),this.container.appendChild(this.singleSelected.container)),this.container.appendChild(this.content),this.content.appendChild(this.search.container),this.content.appendChild(this.list)}t.Slim=s}],n.c=s,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)).default;function n(e){if(s[e])return s[e].exports;var t=s[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var i,s})},{}],39:[function(require,module,exports){(function(root,factory){if(typeof define==="function"&&define.amd){define(function(){return factory(root,root.document)})}else if(typeof exports==="object"){module.exports=root.document?factory(root,root.document):function(w){return factory(w,w.document)}}else{root.SVG=factory(root,root.document)}})(typeof window!=="undefined"?window:this,function(window,document){var SVG=this.SVG=function(element){if(SVG.supported){element=new SVG.Doc(element);if(!SVG.parser.draw)SVG.prepare();return element}};SVG.ns="http://www.w3.org/2000/svg";SVG.xmlns="http://www.w3.org/2000/xmlns/";SVG.xlink="http://www.w3.org/1999/xlink";SVG.svgjs="http://svgjs.com/svgjs";SVG.supported=function(){return!!document.createElementNS&&!!document.createElementNS(SVG.ns,"svg").createSVGRect}();if(!SVG.supported)return false;SVG.did=1e3;SVG.eid=function(name){return"Svgjs"+capitalize(name)+SVG.did++};SVG.create=function(name){var element=document.createElementNS(this.ns,name);element.setAttribute("id",this.eid(name));return element};SVG.extend=function(){var modules,methods,key,i;modules=[].slice.call(arguments);methods=modules.pop();for(i=modules.length-1;i>=0;i--)if(modules[i])for(key in methods)modules[i].prototype[key]=methods[key];if(SVG.Set&&SVG.Set.inherit)SVG.Set.inherit()};SVG.invent=function(config){var initializer=typeof config.create=="function"?config.create:function(){this.constructor.call(this,SVG.create(config.create))};if(config.inherit)initializer.prototype=new config.inherit;if(config.extend)SVG.extend(initializer,config.extend);if(config.construct)SVG.extend(config.parent||SVG.Container,config.construct);return initializer};SVG.adopt=function(node){if(!node)return null;if(node.instance)return node.instance;var element;if(node.nodeName=="svg")element=node.parentNode instanceof window.SVGElement?new SVG.Nested:new SVG.Doc;else if(node.nodeName=="linearGradient")element=new SVG.Gradient("linear");else if(node.nodeName=="radialGradient")element=new SVG.Gradient("radial");else if(SVG[capitalize(node.nodeName)])element=new(SVG[capitalize(node.nodeName)]);else element=new SVG.Element(node);element.type=node.nodeName;element.node=node;node.instance=element;if(element instanceof SVG.Doc)element.namespace().defs();element.setData(JSON.parse(node.getAttribute("svgjs:data"))||{});return element};SVG.prepare=function(){var body=document.getElementsByTagName("body")[0],draw=(body?new SVG.Doc(body):SVG.adopt(document.documentElement).nested()).size(2,0);SVG.parser={body:body||document.documentElement,draw:draw.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:draw.polyline().node,path:draw.path().node,native:SVG.create("svg")}};SVG.parser={native:SVG.create("svg")};document.addEventListener("DOMContentLoaded",function(){if(!SVG.parser.draw)SVG.prepare()},false);SVG.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g};SVG.utils={map:function(array,block){var i,il=array.length,result=[];for(i=0;i<il;i++)result.push(block(array[i]));return result},filter:function(array,block){var i,il=array.length,result=[];for(i=0;i<il;i++)if(block(array[i]))result.push(array[i]);return result},radians:function(d){return d%360*Math.PI/180},degrees:function(r){return r*180/Math.PI%360},filterSVGElements:function(nodes){return this.filter(nodes,function(el){return el instanceof window.SVGElement})}};SVG.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}};SVG.Color=function(color){var match;this.r=0;this.g=0;this.b=0;if(!color)return;if(typeof color==="string"){if(SVG.regex.isRgb.test(color)){match=SVG.regex.rgb.exec(color.replace(SVG.regex.whitespace,""));this.r=parseInt(match[1]);this.g=parseInt(match[2]);this.b=parseInt(match[3])}else if(SVG.regex.isHex.test(color)){match=SVG.regex.hex.exec(fullHex(color));this.r=parseInt(match[1],16);this.g=parseInt(match[2],16);this.b=parseInt(match[3],16)}}else if(typeof color==="object"){this.r=color.r;this.g=color.g;this.b=color.b}};SVG.extend(SVG.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+compToHex(this.r)+compToHex(this.g)+compToHex(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(color){this.destination=new SVG.Color(color);return this},at:function(pos){if(!this.destination)return this;pos=pos<0?0:pos>1?1:pos;return new SVG.Color({r:~~(this.r+(this.destination.r-this.r)*pos),g:~~(this.g+(this.destination.g-this.g)*pos),b:~~(this.b+(this.destination.b-this.b)*pos)})}});SVG.Color.test=function(color){color+="";return SVG.regex.isHex.test(color)||SVG.regex.isRgb.test(color)};SVG.Color.isRgb=function(color){return color&&typeof color.r=="number"&&typeof color.g=="number"&&typeof color.b=="number"};SVG.Color.isColor=function(color){return SVG.Color.isRgb(color)||SVG.Color.test(color)};SVG.Array=function(array,fallback){array=(array||[]).valueOf();if(array.length==0&&fallback)array=fallback.valueOf();this.value=this.parse(array)};SVG.extend(SVG.Array,{morph:function(array){this.destination=this.parse(array);if(this.value.length!=this.destination.length){var lastValue=this.value[this.value.length-1],lastDestination=this.destination[this.destination.length-1];while(this.value.length>this.destination.length)this.destination.push(lastDestination);while(this.value.length<this.destination.length)this.value.push(lastValue)}return this},settle:function(){for(var i=0,il=this.value.length,seen=[];i<il;i++)if(seen.indexOf(this.value[i])==-1)seen.push(this.value[i]);return this.value=seen},at:function(pos){if(!this.destination)return this;for(var i=0,il=this.value.length,array=[];i<il;i++)array.push(this.value[i]+(this.destination[i]-this.value[i])*pos);return new SVG.Array(array)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(array){array=array.valueOf();if(Array.isArray(array))return array;return this.split(array)},split:function(string){return string.trim().split(SVG.regex.delimiter).map(parseFloat)},reverse:function(){this.value.reverse();return this},clone:function(){var clone=new this.constructor;clone.value=array_clone(this.value);return clone}});SVG.PointArray=function(array,fallback){SVG.Array.call(this,array,fallback||[[0,0]])};SVG.PointArray.prototype=new SVG.Array;SVG.PointArray.prototype.constructor=SVG.PointArray;SVG.extend(SVG.PointArray,{toString:function(){for(var i=0,il=this.value.length,array=[];i<il;i++)array.push(this.value[i].join(","));return array.join(" ")},toLine:function(){return{x1:this.value[0][0],y1:this.value[0][1],x2:this.value[1][0],y2:this.value[1][1]}},at:function(pos){if(!this.destination)return this;for(var i=0,il=this.value.length,array=[];i<il;i++)array.push([this.value[i][0]+(this.destination[i][0]-this.value[i][0])*pos,this.value[i][1]+(this.destination[i][1]-this.value[i][1])*pos]);return new SVG.PointArray(array)},parse:function(array){var points=[];array=array.valueOf();if(Array.isArray(array)){if(Array.isArray(array[0])){return array.map(function(el){return el.slice()})}else if(array[0].x!=null){return array.map(function(el){return[el.x,el.y]})}}else{array=array.trim().split(SVG.regex.delimiter).map(parseFloat)}if(array.length%2!==0)array.pop();for(var i=0,len=array.length;i<len;i=i+2)points.push([array[i],array[i+1]]);return points},move:function(x,y){var box=this.bbox();x-=box.x;y-=box.y;if(!isNaN(x)&&!isNaN(y))for(var i=this.value.length-1;i>=0;i--)this.value[i]=[this.value[i][0]+x,this.value[i][1]+y];return this},size:function(width,height){var i,box=this.bbox();for(i=this.value.length-1;i>=0;i--){if(box.width)this.value[i][0]=(this.value[i][0]-box.x)*width/box.width+box.x;if(box.height)this.value[i][1]=(this.value[i][1]-box.y)*height/box.height+box.y}return this},bbox:function(){SVG.parser.poly.setAttribute("points",this.toString());return SVG.parser.poly.getBBox()}});var pathHandlers={M:function(c,p,p0){p.x=p0.x=c[0];p.y=p0.y=c[1];return["M",p.x,p.y]},L:function(c,p){p.x=c[0];p.y=c[1];return["L",c[0],c[1]]},H:function(c,p){p.x=c[0];return["H",c[0]]},V:function(c,p){p.y=c[0];return["V",c[0]]},C:function(c,p){p.x=c[4];p.y=c[5];return["C",c[0],c[1],c[2],c[3],c[4],c[5]]},S:function(c,p){p.x=c[2];p.y=c[3];return["S",c[0],c[1],c[2],c[3]]},Q:function(c,p){p.x=c[2];p.y=c[3];return["Q",c[0],c[1],c[2],c[3]]},T:function(c,p){p.x=c[0];p.y=c[1];return["T",c[0],c[1]]},Z:function(c,p,p0){p.x=p0.x;p.y=p0.y;return["Z"]},A:function(c,p){p.x=c[5];p.y=c[6];return["A",c[0],c[1],c[2],c[3],c[4],c[5],c[6]]}};var mlhvqtcsa="mlhvqtcsaz".split("");for(var i=0,il=mlhvqtcsa.length;i<il;++i){pathHandlers[mlhvqtcsa[i]]=function(i){return function(c,p,p0){if(i=="H")c[0]=c[0]+p.x;else if(i=="V")c[0]=c[0]+p.y;else if(i=="A"){c[5]=c[5]+p.x,c[6]=c[6]+p.y}else for(var j=0,jl=c.length;j<jl;++j){c[j]=c[j]+(j%2?p.y:p.x)}return pathHandlers[i](c,p,p0)}}(mlhvqtcsa[i].toUpperCase())}SVG.PathArray=function(array,fallback){SVG.Array.call(this,array,fallback||[["M",0,0]])};SVG.PathArray.prototype=new SVG.Array;SVG.PathArray.prototype.constructor=SVG.PathArray;SVG.extend(SVG.PathArray,{toString:function(){return arrayToString(this.value)},move:function(x,y){var box=this.bbox();x-=box.x;y-=box.y;if(!isNaN(x)&&!isNaN(y)){for(var l,i=this.value.length-1;i>=0;i--){l=this.value[i][0];if(l=="M"||l=="L"||l=="T"){this.value[i][1]+=x;this.value[i][2]+=y}else if(l=="H"){this.value[i][1]+=x}else if(l=="V"){this.value[i][1]+=y}else if(l=="C"||l=="S"||l=="Q"){this.value[i][1]+=x;this.value[i][2]+=y;this.value[i][3]+=x;this.value[i][4]+=y;if(l=="C"){this.value[i][5]+=x;this.value[i][6]+=y}}else if(l=="A"){this.value[i][6]+=x;this.value[i][7]+=y}}}return this},size:function(width,height){var i,l,box=this.bbox();for(i=this.value.length-1;i>=0;i--){l=this.value[i][0];if(l=="M"||l=="L"||l=="T"){this.value[i][1]=(this.value[i][1]-box.x)*width/box.width+box.x;this.value[i][2]=(this.value[i][2]-box.y)*height/box.height+box.y}else if(l=="H"){this.value[i][1]=(this.value[i][1]-box.x)*width/box.width+box.x}else if(l=="V"){this.value[i][1]=(this.value[i][1]-box.y)*height/box.height+box.y}else if(l=="C"||l=="S"||l=="Q"){this.value[i][1]=(this.value[i][1]-box.x)*width/box.width+box.x;this.value[i][2]=(this.value[i][2]-box.y)*height/box.height+box.y;this.value[i][3]=(this.value[i][3]-box.x)*width/box.width+box.x;this.value[i][4]=(this.value[i][4]-box.y)*height/box.height+box.y;if(l=="C"){this.value[i][5]=(this.value[i][5]-box.x)*width/box.width+box.x;this.value[i][6]=(this.value[i][6]-box.y)*height/box.height+box.y}}else if(l=="A"){this.value[i][1]=this.value[i][1]*width/box.width;this.value[i][2]=this.value[i][2]*height/box.height;this.value[i][6]=(this.value[i][6]-box.x)*width/box.width+box.x;this.value[i][7]=(this.value[i][7]-box.y)*height/box.height+box.y}}return this},equalCommands:function(pathArray){var i,il,equalCommands;pathArray=new SVG.PathArray(pathArray);equalCommands=this.value.length===pathArray.value.length;for(i=0,il=this.value.length;equalCommands&&i<il;i++){equalCommands=this.value[i][0]===pathArray.value[i][0]}return equalCommands},morph:function(pathArray){pathArray=new SVG.PathArray(pathArray);if(this.equalCommands(pathArray)){this.destination=pathArray}else{this.destination=null}return this},at:function(pos){if(!this.destination)return this;var sourceArray=this.value,destinationArray=this.destination.value,array=[],pathArray=new SVG.PathArray,i,il,j,jl;for(i=0,il=sourceArray.length;i<il;i++){array[i]=[sourceArray[i][0]];for(j=1,jl=sourceArray[i].length;j<jl;j++){array[i][j]=sourceArray[i][j]+(destinationArray[i][j]-sourceArray[i][j])*pos}if(array[i][0]==="A"){array[i][4]=+(array[i][4]!=0);array[i][5]=+(array[i][5]!=0)}}pathArray.value=array;return pathArray},parse:function(array){if(array instanceof SVG.PathArray)return array.valueOf();var i,x0,y0,s,seg,arr,x=0,y=0,paramCnt={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};if(typeof array=="string"){array=array.replace(SVG.regex.numbersWithDots,pathRegReplace).replace(SVG.regex.pathLetters," $& ").replace(SVG.regex.hyphen,"$1 -").trim().split(SVG.regex.delimiter)}else{array=array.reduce(function(prev,curr){return[].concat.call(prev,curr)},[])}var arr=[],p=new SVG.Point,p0=new SVG.Point,index=0,len=array.length;do{if(SVG.regex.isPathLetter.test(array[index])){s=array[index];++index}else if(s=="M"){s="L"}else if(s=="m"){s="l"}arr.push(pathHandlers[s].call(null,array.slice(index,index=index+paramCnt[s.toUpperCase()]).map(parseFloat),p,p0))}while(len>index);return arr},bbox:function(){SVG.parser.path.setAttribute("d",this.toString());return SVG.parser.path.getBBox()}});SVG.Number=SVG.invent({create:function(value,unit){this.value=0;this.unit=unit||"";if(typeof value==="number"){this.value=isNaN(value)?0:!isFinite(value)?value<0?-3.4e38:+3.4e38:value}else if(typeof value==="string"){unit=value.match(SVG.regex.numberAndUnit);if(unit){this.value=parseFloat(unit[1]);if(unit[5]=="%")this.value/=100;else if(unit[5]=="s")this.value*=1e3;this.unit=unit[5]}}else{if(value instanceof SVG.Number){this.value=value.valueOf();this.unit=value.unit}}},extend:{toString:function(){return(this.unit=="%"?~~(this.value*1e8)/1e6:this.unit=="s"?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(number){number=new SVG.Number(number);return new SVG.Number(this+number,this.unit||number.unit)},minus:function(number){number=new SVG.Number(number);return new SVG.Number(this-number,this.unit||number.unit)},times:function(number){number=new SVG.Number(number);return new SVG.Number(this*number,this.unit||number.unit)},divide:function(number){number=new SVG.Number(number);return new SVG.Number(this/number,this.unit||number.unit)},to:function(unit){var number=new SVG.Number(this);if(typeof unit==="string")number.unit=unit;return number},morph:function(number){this.destination=new SVG.Number(number);if(number.relative){this.destination.value+=this.value}return this},at:function(pos){if(!this.destination)return this;return new SVG.Number(this.destination).minus(this).times(pos).plus(this)}}});SVG.Element=SVG.invent({create:function(node){this._stroke=SVG.defaults.attrs.stroke;this._event=null;this.dom={};if(this.node=node){this.type=node.nodeName;this.node.instance=this;this._stroke=node.getAttribute("stroke")||this._stroke}},extend:{x:function(x){return this.attr("x",x)},y:function(y){return this.attr("y",y)},cx:function(x){return x==null?this.x()+this.width()/2:this.x(x-this.width()/2)},cy:function(y){return y==null?this.y()+this.height()/2:this.y(y-this.height()/2)},move:function(x,y){return this.x(x).y(y)},center:function(x,y){return this.cx(x).cy(y)},width:function(width){return this.attr("width",width)},height:function(height){return this.attr("height",height)},size:function(width,height){var p=proportionalSize(this,width,height);return this.width(new SVG.Number(p.width)).height(new SVG.Number(p.height))},clone:function(parent){this.writeDataToDom();var clone=assignNewId(this.node.cloneNode(true));if(parent)parent.add(clone);else this.after(clone);return clone},remove:function(){if(this.parent())this.parent().removeElement(this);return this},replace:function(element){this.after(element).remove();return element},addTo:function(parent){return parent.put(this)},putIn:function(parent){return parent.add(this)},id:function(id){return this.attr("id",id)},inside:function(x,y){var box=this.bbox();return x>box.x&&y>box.y&&x<box.x+box.width&&y<box.y+box.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return this.style("display")!="none"},toString:function(){return this.attr("id")},classes:function(){var attr=this.attr("class");return attr==null?[]:attr.trim().split(SVG.regex.delimiter)},hasClass:function(name){return this.classes().indexOf(name)!=-1},addClass:function(name){if(!this.hasClass(name)){var array=this.classes();array.push(name);this.attr("class",array.join(" "))}return this},removeClass:function(name){if(this.hasClass(name)){this.attr("class",this.classes().filter(function(c){return c!=name}).join(" "))}return this},toggleClass:function(name){return this.hasClass(name)?this.removeClass(name):this.addClass(name)},reference:function(attr){return SVG.get(this.attr(attr))},parent:function(type){var parent=this;if(!parent.node.parentNode)return null;parent=SVG.adopt(parent.node.parentNode);if(!type)return parent;while(parent&&parent.node instanceof window.SVGElement){if(typeof type==="string"?parent.matches(type):parent instanceof type)return parent;if(!parent.node.parentNode||parent.node.parentNode.nodeName=="#document")return null;parent=SVG.adopt(parent.node.parentNode)}},doc:function(){return this instanceof SVG.Doc?this:this.parent(SVG.Doc)},parents:function(type){var parents=[],parent=this;do{parent=parent.parent(type);if(!parent||!parent.node)break;parents.push(parent)}while(parent.parent);return parents},matches:function(selector){return matches(this.node,selector)},native:function(){return this.node},svg:function(svg){var well=document.createElement("svg");if(svg&&this instanceof SVG.Parent){well.innerHTML="<svg>"+svg.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var i=0,il=well.firstChild.childNodes.length;i<il;i++)this.node.appendChild(well.firstChild.firstChild)}else{well.appendChild(svg=document.createElement("svg"));this.writeDataToDom();svg.appendChild(this.node.cloneNode(true));return well.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"")}return this},writeDataToDom:function(){if(this.each||this.lines){var fn=this.each?this:this.lines();fn.each(function(){this.writeDataToDom()})}this.node.removeAttribute("svgjs:data");if(Object.keys(this.dom).length)this.node.setAttribute("svgjs:data",JSON.stringify(this.dom));return this},setData:function(o){this.dom=o;return this},is:function(obj){return is(this,obj)}}});SVG.easing={"-":function(pos){return pos},"<>":function(pos){return-Math.cos(pos*Math.PI)/2+.5},">":function(pos){return Math.sin(pos*Math.PI/2)},"<":function(pos){return-Math.cos(pos*Math.PI/2)+1}};SVG.morph=function(pos){return function(from,to){return new SVG.MorphObj(from,to).at(pos)}};SVG.Situation=SVG.invent({create:function(o){this.init=false;this.reversed=false;this.reversing=false;this.duration=new SVG.Number(o.duration).valueOf();this.delay=new SVG.Number(o.delay).valueOf();this.start=+new Date+this.delay;this.finish=this.start+this.duration;this.ease=o.ease;this.loop=0;this.loops=false;this.animations={};this.attrs={};this.styles={};this.transforms=[];this.once={}}});SVG.FX=SVG.invent({create:function(element){this._target=element;this.situations=[];this.active=false;this.situation=null;this.paused=false;this.lastPos=0;this.pos=0;this.absPos=0;this._speed=1},extend:{animate:function(o,ease,delay){if(typeof o=="object"){ease=o.ease;delay=o.delay;o=o.duration}var situation=new SVG.Situation({duration:o||1e3,delay:delay||0,ease:SVG.easing[ease||"-"]||ease});this.queue(situation);return this},delay:function(delay){var situation=new SVG.Situation({duration:delay,delay:0,ease:SVG.easing["-"]});return this.queue(situation)},target:function(target){if(target&&target instanceof SVG.Element){this._target=target;return this}return this._target},timeToAbsPos:function(timestamp){return(timestamp-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(absPos){return this.situation.duration/this._speed*absPos+this.situation.start},startAnimFrame:function(){this.stopAnimFrame();this.animationFrame=window.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){window.cancelAnimationFrame(this.animationFrame)},start:function(){if(!this.active&&this.situation){this.active=true;this.startCurrent()}return this},startCurrent:function(){this.situation.start=+new Date+this.situation.delay/this._speed;this.situation.finish=this.situation.start+this.situation.duration/this._speed;return this.initAnimations().step()},queue:function(fn){if(typeof fn=="function"||fn instanceof SVG.Situation)this.situations.push(fn);if(!this.situation)this.situation=this.situations.shift();return this},dequeue:function(){this.stop();this.situation=this.situations.shift();if(this.situation){if(this.situation instanceof SVG.Situation){this.start()}else{this.situation.call(this)}}return this},initAnimations:function(){var i,j,source;var s=this.situation;if(s.init)return this;for(i in s.animations){source=this.target()[i]();if(!Array.isArray(source)){source=[source]}if(!Array.isArray(s.animations[i])){s.animations[i]=[s.animations[i]]}for(j=source.length;j--;){if(s.animations[i][j]instanceof SVG.Number)source[j]=new SVG.Number(source[j]);s.animations[i][j]=source[j].morph(s.animations[i][j])}}for(i in s.attrs){s.attrs[i]=new SVG.MorphObj(this.target().attr(i),s.attrs[i])}for(i in s.styles){s.styles[i]=new SVG.MorphObj(this.target().style(i),s.styles[i])}s.initialTransformation=this.target().matrixify();s.init=true;return this},clearQueue:function(){this.situations=[];return this},clearCurrent:function(){this.situation=null;return this},stop:function(jumpToEnd,clearQueue){var active=this.active;this.active=false;if(clearQueue){this.clearQueue()}if(jumpToEnd&&this.situation){!active&&this.startCurrent();this.atEnd()}this.stopAnimFrame();return this.clearCurrent()},reset:function(){if(this.situation){var temp=this.situation;this.stop();this.situation=temp;this.atStart()}return this},finish:function(){this.stop(true,false);while(this.dequeue().situation&&this.stop(true,false));this.clearQueue().clearCurrent();return this},atStart:function(){return this.at(0,true)},atEnd:function(){if(this.situation.loops===true){this.situation.loops=this.situation.loop+1}if(typeof this.situation.loops=="number"){return this.at(this.situation.loops,true)}else{return this.at(1,true)}},at:function(pos,isAbsPos){var durDivSpd=this.situation.duration/this._speed;this.absPos=pos;if(!isAbsPos){if(this.situation.reversed)this.absPos=1-this.absPos;this.absPos+=this.situation.loop}this.situation.start=+new Date-this.absPos*durDivSpd;this.situation.finish=this.situation.start+durDivSpd;return this.step(true)},speed:function(speed){if(speed===0)return this.pause();if(speed){this._speed=speed;return this.at(this.absPos,true)}else return this._speed},loop:function(times,reverse){var c=this.last();c.loops=times!=null?times:true;c.loop=0;if(reverse)c.reversing=true;return this},pause:function(){this.paused=true;this.stopAnimFrame();return this},play:function(){if(!this.paused)return this;this.paused=false;return this.at(this.absPos,true)},reverse:function(reversed){var c=this.last();if(typeof reversed=="undefined")c.reversed=!c.reversed;else c.reversed=reversed;return this},progress:function(easeIt){return easeIt?this.situation.ease(this.pos):this.pos},after:function(fn){var c=this.last(),wrapper=function wrapper(e){if(e.detail.situation==c){fn.call(this,c);this.off("finished.fx",wrapper)}};this.target().on("finished.fx",wrapper);return this._callStart()},during:function(fn){var c=this.last(),wrapper=function(e){if(e.detail.situation==c){fn.call(this,e.detail.pos,SVG.morph(e.detail.pos),e.detail.eased,c)}};this.target().off("during.fx",wrapper).on("during.fx",wrapper);this.after(function(){this.off("during.fx",wrapper)});return this._callStart()},afterAll:function(fn){var wrapper=function wrapper(e){fn.call(this);this.off("allfinished.fx",wrapper)};this.target().off("allfinished.fx",wrapper).on("allfinished.fx",wrapper);return this._callStart()},duringAll:function(fn){var wrapper=function(e){fn.call(this,e.detail.pos,SVG.morph(e.detail.pos),e.detail.eased,e.detail.situation)};this.target().off("during.fx",wrapper).on("during.fx",wrapper);this.afterAll(function(){this.off("during.fx",wrapper)});return this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(method,args,type){this.last()[type||"animations"][method]=args;return this._callStart()},step:function(ignoreTime){if(!ignoreTime)this.absPos=this.timeToAbsPos(+new Date);if(this.situation.loops!==false){var absPos,absPosInt,lastLoop;absPos=Math.max(this.absPos,0);absPosInt=Math.floor(absPos);if(this.situation.loops===true||absPosInt<this.situation.loops){this.pos=absPos-absPosInt;lastLoop=this.situation.loop;this.situation.loop=absPosInt}else{this.absPos=this.situation.loops;this.pos=1;lastLoop=this.situation.loop-1;this.situation.loop=this.situation.loops}if(this.situation.reversing){this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-lastLoop)%2)}}else{this.absPos=Math.min(this.absPos,1);this.pos=this.absPos}if(this.pos<0)this.pos=0;if(this.situation.reversed)this.pos=1-this.pos;var eased=this.situation.ease(this.pos);for(var i in this.situation.once){if(i>this.lastPos&&i<=eased){this.situation.once[i].call(this.target(),this.pos,eased);delete this.situation.once[i]}}if(this.active)this.target().fire("during",{pos:this.pos,eased:eased,fx:this,situation:this.situation});if(!this.situation){return this}this.eachAt();if(this.pos==1&&!this.situation.reversed||this.situation.reversed&&this.pos==0){this.stopAnimFrame();this.target().fire("finished",{fx:this,situation:this.situation});if(!this.situations.length){this.target().fire("allfinished");if(!this.situations.length){this.target().off(".fx");this.active=false}}if(this.active)this.dequeue();else this.clearCurrent()}else if(!this.paused&&this.active){this.startAnimFrame()}this.lastPos=eased;return this},eachAt:function(){var i,len,at,self=this,target=this.target(),s=this.situation;for(i in s.animations){at=[].concat(s.animations[i]).map(function(el){return typeof el!=="string"&&el.at?el.at(s.ease(self.pos),self.pos):el});target[i].apply(target,at)}for(i in s.attrs){at=[i].concat(s.attrs[i]).map(function(el){return typeof el!=="string"&&el.at?el.at(s.ease(self.pos),self.pos):el});target.attr.apply(target,at)}for(i in s.styles){at=[i].concat(s.styles[i]).map(function(el){return typeof el!=="string"&&el.at?el.at(s.ease(self.pos),self.pos):el});target.style.apply(target,at)}if(s.transforms.length){at=s.initialTransformation;for(i=0,len=s.transforms.length;i<len;i++){var a=s.transforms[i];if(a instanceof SVG.Matrix){if(a.relative){at=at.multiply((new SVG.Matrix).morph(a).at(s.ease(this.pos)))}else{at=at.morph(a).at(s.ease(this.pos))}continue}if(!a.relative)a.undo(at.extract());at=at.multiply(a.at(s.ease(this.pos)))}target.matrix(at)}return this},once:function(pos,fn,isEased){var c=this.last();if(!isEased)pos=c.ease(pos);c.once[pos]=fn;return this},_callStart:function(){setTimeout(function(){this.start()}.bind(this),0);return this}},parent:SVG.Element,construct:{animate:function(o,ease,delay){return(this.fx||(this.fx=new SVG.FX(this))).animate(o,ease,delay)},delay:function(delay){return(this.fx||(this.fx=new SVG.FX(this))).delay(delay)},stop:function(jumpToEnd,clearQueue){if(this.fx)this.fx.stop(jumpToEnd,clearQueue);return this},finish:function(){if(this.fx)this.fx.finish();return this},pause:function(){if(this.fx)this.fx.pause();return this},play:function(){if(this.fx)this.fx.play();return this},speed:function(speed){if(this.fx)if(speed==null)return this.fx.speed();else this.fx.speed(speed);return this}}});SVG.MorphObj=SVG.invent({create:function(from,to){if(SVG.Color.isColor(to))return new SVG.Color(from).morph(to);if(SVG.regex.delimiter.test(from)){if(SVG.regex.pathLetters.test(from))return new SVG.PathArray(from).morph(to);else return new SVG.Array(from).morph(to)}if(SVG.regex.numberAndUnit.test(to))return new SVG.Number(from).morph(to);this.value=from;this.destination=to},extend:{at:function(pos,real){return real<1?this.value:this.destination},valueOf:function(){return this.value}}});SVG.extend(SVG.FX,{attr:function(a,v,relative){if(typeof a=="object"){for(var key in a)this.attr(key,a[key])}else{this.add(a,v,"attrs")}return this},style:function(s,v){if(typeof s=="object")for(var key in s)this.style(key,s[key]);else this.add(s,v,"styles");return this},x:function(x,relative){if(this.target()instanceof SVG.G){this.transform({x:x},relative);return this}var num=new SVG.Number(x);num.relative=relative;return this.add("x",num)},y:function(y,relative){if(this.target()instanceof SVG.G){this.transform({y:y},relative);return this}var num=new SVG.Number(y);num.relative=relative;return this.add("y",num)},cx:function(x){return this.add("cx",new SVG.Number(x))},cy:function(y){return this.add("cy",new SVG.Number(y))},move:function(x,y){return this.x(x).y(y)},center:function(x,y){return this.cx(x).cy(y)},size:function(width,height){if(this.target()instanceof SVG.Text){this.attr("font-size",width)}else{var box;if(!width||!height){box=this.target().bbox()}if(!width){width=box.width/box.height*height}if(!height){height=box.height/box.width*width}this.add("width",new SVG.Number(width)).add("height",new SVG.Number(height))}return this},width:function(width){return this.add("width",new SVG.Number(width))},height:function(height){return this.add("height",new SVG.Number(height))},plot:function(a,b,c,d){if(arguments.length==4){return this.plot([a,b,c,d])}return this.add("plot",new(this.target().morphArray)(a))},leading:function(value){return this.target().leading?this.add("leading",new SVG.Number(value)):this},viewbox:function(x,y,width,height){if(this.target()instanceof SVG.Container){this.add("viewbox",new SVG.ViewBox(x,y,width,height))}return this},update:function(o){if(this.target()instanceof SVG.Stop){if(typeof o=="number"||o instanceof SVG.Number){return this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]})}if(o.opacity!=null)this.attr("stop-opacity",o.opacity);if(o.color!=null)this.attr("stop-color",o.color);if(o.offset!=null)this.attr("offset",o.offset)}return this}});SVG.Box=SVG.invent({create:function(x,y,width,height){if(typeof x=="object"&&!(x instanceof SVG.Element)){return SVG.Box.call(this,x.left!=null?x.left:x.x,x.top!=null?x.top:x.y,x.width,x.height)}else if(arguments.length==4){this.x=x;this.y=y;this.width=width;this.height=height}fullBox(this)},extend:{merge:function(box){var b=new this.constructor;b.x=Math.min(this.x,box.x);b.y=Math.min(this.y,box.y);b.width=Math.max(this.x+this.width,box.x+box.width)-b.x;b.height=Math.max(this.y+this.height,box.y+box.height)-b.y;return fullBox(b)},transform:function(m){var xMin=Infinity,xMax=-Infinity,yMin=Infinity,yMax=-Infinity,p,bbox;var pts=[new SVG.Point(this.x,this.y),new SVG.Point(this.x2,this.y),new SVG.Point(this.x,this.y2),new SVG.Point(this.x2,this.y2)];pts.forEach(function(p){p=p.transform(m);xMin=Math.min(xMin,p.x);xMax=Math.max(xMax,p.x);yMin=Math.min(yMin,p.y);yMax=Math.max(yMax,p.y)});bbox=new this.constructor;bbox.x=xMin;bbox.width=xMax-xMin;bbox.y=yMin;bbox.height=yMax-yMin;fullBox(bbox);return bbox}}});SVG.BBox=SVG.invent({create:function(element){SVG.Box.apply(this,[].slice.call(arguments));if(element instanceof SVG.Element){var box;try{if(!document.documentElement.contains){var topParent=element.node;while(topParent.parentNode){topParent=topParent.parentNode}if(topParent!=document)throw new Exception("Element not in the dom")}else{if(!document.documentElement.contains(element.node))throw new Exception("Element not in the dom")}box=element.node.getBBox()}catch(e){if(element instanceof SVG.Shape){var clone=element.clone(SVG.parser.draw.instance).show();box=clone.node.getBBox();clone.remove()}else{box={x:element.node.clientLeft,y:element.node.clientTop,width:element.node.clientWidth,height:element.node.clientHeight}}}SVG.Box.call(this,box)}},inherit:SVG.Box,parent:SVG.Element,construct:{bbox:function(){return new SVG.BBox(this)}}});SVG.BBox.prototype.constructor=SVG.BBox;SVG.extend(SVG.Element,{tbox:function(){console.warn("Use of TBox is deprecated and mapped to RBox. Use .rbox() instead.");return this.rbox(this.doc())}});SVG.RBox=SVG.invent({create:function(element){SVG.Box.apply(this,[].slice.call(arguments));if(element instanceof SVG.Element){SVG.Box.call(this,element.node.getBoundingClientRect())}},inherit:SVG.Box,parent:SVG.Element,extend:{addOffset:function(){this.x+=window.pageXOffset;this.y+=window.pageYOffset;return this}},construct:{rbox:function(el){if(el)return new SVG.RBox(this).transform(el.screenCTM().inverse());return new SVG.RBox(this).addOffset()}}});SVG.RBox.prototype.constructor=SVG.RBox;SVG.Matrix=SVG.invent({create:function(source){var i,base=arrayToMatrix([1,0,0,1,0,0]);source=source instanceof SVG.Element?source.matrixify():typeof source==="string"?arrayToMatrix(source.split(SVG.regex.delimiter).map(parseFloat)):arguments.length==6?arrayToMatrix([].slice.call(arguments)):Array.isArray(source)?arrayToMatrix(source):typeof source==="object"?source:base;for(i=abcdef.length-1;i>=0;--i)this[abcdef[i]]=source[abcdef[i]]!=null?source[abcdef[i]]:base[abcdef[i]]},extend:{extract:function(){var px=deltaTransformPoint(this,0,1),py=deltaTransformPoint(this,1,0),skewX=180/Math.PI*Math.atan2(px.y,px.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(skewX*Math.PI/180)+this.f*Math.sin(skewX*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(skewX*Math.PI/180)+this.e*Math.sin(-skewX*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),skewX:-skewX,skewY:180/Math.PI*Math.atan2(py.y,py.x),scaleX:Math.sqrt(this.a*this.a+this.b*this.b),scaleY:Math.sqrt(this.c*this.c+this.d*this.d),rotation:skewX,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new SVG.Matrix(this)}},clone:function(){return new SVG.Matrix(this)},morph:function(matrix){this.destination=new SVG.Matrix(matrix);return this},at:function(pos){if(!this.destination)return this;var matrix=new SVG.Matrix({a:this.a+(this.destination.a-this.a)*pos,b:this.b+(this.destination.b-this.b)*pos,c:this.c+(this.destination.c-this.c)*pos,d:this.d+(this.destination.d-this.d)*pos,e:this.e+(this.destination.e-this.e)*pos,f:this.f+(this.destination.f-this.f)*pos});return matrix},multiply:function(matrix){return new SVG.Matrix(this.native().multiply(parseMatrix(matrix).native()))},inverse:function(){return new SVG.Matrix(this.native().inverse())},translate:function(x,y){return new SVG.Matrix(this.native().translate(x||0,y||0))},scale:function(x,y,cx,cy){if(arguments.length==1){y=x}else if(arguments.length==3){cy=cx;cx=y;y=x}return this.around(cx,cy,new SVG.Matrix(x,0,0,y,0,0))},rotate:function(r,cx,cy){r=SVG.utils.radians(r);return this.around(cx,cy,new SVG.Matrix(Math.cos(r),Math.sin(r),-Math.sin(r),Math.cos(r),0,0))},flip:function(a,o){return a=="x"?this.scale(-1,1,o,0):a=="y"?this.scale(1,-1,0,o):this.scale(-1,-1,a,o!=null?o:a)},skew:function(x,y,cx,cy){if(arguments.length==1){y=x}else if(arguments.length==3){cy=cx;cx=y;y=x}x=SVG.utils.radians(x);y=SVG.utils.radians(y);return this.around(cx,cy,new SVG.Matrix(1,Math.tan(y),Math.tan(x),1,0,0))},skewX:function(x,cx,cy){return this.skew(x,0,cx,cy)},skewY:function(y,cx,cy){return this.skew(0,y,cx,cy)},around:function(cx,cy,matrix){return this.multiply(new SVG.Matrix(1,0,0,1,cx||0,cy||0)).multiply(matrix).multiply(new SVG.Matrix(1,0,0,1,-cx||0,-cy||0))},native:function(){var matrix=SVG.parser.native.createSVGMatrix();for(var i=abcdef.length-1;i>=0;i--)matrix[abcdef[i]]=this[abcdef[i]];return matrix},toString:function(){return"matrix("+float32String(this.a)+","+float32String(this.b)+","+float32String(this.c)+","+float32String(this.d)+","+float32String(this.e)+","+float32String(this.f)+")"}},parent:SVG.Element,construct:{ctm:function(){return new SVG.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof SVG.Nested){var rect=this.rect(1,1);var m=rect.node.getScreenCTM();rect.remove();return new SVG.Matrix(m)}return new SVG.Matrix(this.node.getScreenCTM())}}});SVG.Point=SVG.invent({create:function(x,y){var i,source,base={x:0,y:0};source=Array.isArray(x)?{x:x[0],y:x[1]}:typeof x==="object"?{x:x.x,y:x.y}:x!=null?{x:x,y:y!=null?y:x}:base;this.x=source.x;this.y=source.y},extend:{clone:function(){return new SVG.Point(this)},morph:function(x,y){this.destination=new SVG.Point(x,y);return this},at:function(pos){if(!this.destination)return this;var point=new SVG.Point({x:this.x+(this.destination.x-this.x)*pos,y:this.y+(this.destination.y-this.y)*pos});return point},native:function(){var point=SVG.parser.native.createSVGPoint();point.x=this.x;point.y=this.y;return point},transform:function(matrix){return new SVG.Point(this.native().matrixTransform(matrix.native()))}}});SVG.extend(SVG.Element,{point:function(x,y){return new SVG.Point(x,y).transform(this.screenCTM().inverse())}});SVG.extend(SVG.Element,{attr:function(a,v,n){if(a==null){a={};v=this.node.attributes;for(n=v.length-1;n>=0;n--)a[v[n].nodeName]=SVG.regex.isNumber.test(v[n].nodeValue)?parseFloat(v[n].nodeValue):v[n].nodeValue;return a}else if(typeof a=="object"){for(v in a)this.attr(v,a[v])}else if(v===null){this.node.removeAttribute(a)}else if(v==null){v=this.node.getAttribute(a);return v==null?SVG.defaults.attrs[a]:SVG.regex.isNumber.test(v)?parseFloat(v):v}else{if(a=="stroke-width")this.attr("stroke",parseFloat(v)>0?this._stroke:null);else if(a=="stroke")this._stroke=v;if(a=="fill"||a=="stroke"){if(SVG.regex.isImage.test(v))v=this.doc().defs().image(v,0,0);if(v instanceof SVG.Image)v=this.doc().defs().pattern(0,0,function(){this.add(v)})}if(typeof v==="number")v=new SVG.Number(v);else if(SVG.Color.isColor(v))v=new SVG.Color(v);else if(Array.isArray(v))v=new SVG.Array(v);if(a=="leading"){if(this.leading)this.leading(v)}else{typeof n==="string"?this.node.setAttributeNS(n,a,v.toString()):this.node.setAttribute(a,v.toString())}if(this.rebuild&&(a=="font-size"||a=="x"))this.rebuild(a,v)}return this}});SVG.extend(SVG.Element,{transform:function(o,relative){var target=this,matrix,bbox;if(typeof o!=="object"){matrix=new SVG.Matrix(target).extract();return typeof o==="string"?matrix[o]:matrix}matrix=new SVG.Matrix(target);relative=!!relative||!!o.relative;if(o.a!=null){matrix=relative?matrix.multiply(new SVG.Matrix(o)):new SVG.Matrix(o)}else if(o.rotation!=null){ensureCentre(o,target);matrix=relative?matrix.rotate(o.rotation,o.cx,o.cy):matrix.rotate(o.rotation-matrix.extract().rotation,o.cx,o.cy)}else if(o.scale!=null||o.scaleX!=null||o.scaleY!=null){ensureCentre(o,target);o.scaleX=o.scale!=null?o.scale:o.scaleX!=null?o.scaleX:1;o.scaleY=o.scale!=null?o.scale:o.scaleY!=null?o.scaleY:1;if(!relative){var e=matrix.extract();o.scaleX=o.scaleX*1/e.scaleX;o.scaleY=o.scaleY*1/e.scaleY}matrix=matrix.scale(o.scaleX,o.scaleY,o.cx,o.cy)}else if(o.skew!=null||o.skewX!=null||o.skewY!=null){ensureCentre(o,target);o.skewX=o.skew!=null?o.skew:o.skewX!=null?o.skewX:0;o.skewY=o.skew!=null?o.skew:o.skewY!=null?o.skewY:0;if(!relative){var e=matrix.extract();matrix=matrix.multiply((new SVG.Matrix).skew(e.skewX,e.skewY,o.cx,o.cy).inverse())}matrix=matrix.skew(o.skewX,o.skewY,o.cx,o.cy)}else if(o.flip){if(o.flip=="x"||o.flip=="y"){o.offset=o.offset==null?target.bbox()["c"+o.flip]:o.offset}else{if(o.offset==null){bbox=target.bbox();o.flip=bbox.cx;o.offset=bbox.cy}else{o.flip=o.offset}}matrix=(new SVG.Matrix).flip(o.flip,o.offset)}else if(o.x!=null||o.y!=null){if(relative){matrix=matrix.translate(o.x,o.y)}else{if(o.x!=null)matrix.e=o.x;if(o.y!=null)matrix.f=o.y}}return this.attr("transform",matrix)}});SVG.extend(SVG.FX,{transform:function(o,relative){var target=this.target(),matrix,bbox;if(typeof o!=="object"){matrix=new SVG.Matrix(target).extract();return typeof o==="string"?matrix[o]:matrix}relative=!!relative||!!o.relative;if(o.a!=null){matrix=new SVG.Matrix(o)}else if(o.rotation!=null){ensureCentre(o,target);matrix=new SVG.Rotate(o.rotation,o.cx,o.cy)}else if(o.scale!=null||o.scaleX!=null||o.scaleY!=null){ensureCentre(o,target);o.scaleX=o.scale!=null?o.scale:o.scaleX!=null?o.scaleX:1;o.scaleY=o.scale!=null?o.scale:o.scaleY!=null?o.scaleY:1;matrix=new SVG.Scale(o.scaleX,o.scaleY,o.cx,o.cy)}else if(o.skewX!=null||o.skewY!=null){ensureCentre(o,target);o.skewX=o.skewX!=null?o.skewX:0;o.skewY=o.skewY!=null?o.skewY:0;matrix=new SVG.Skew(o.skewX,o.skewY,o.cx,o.cy)}else if(o.flip){if(o.flip=="x"||o.flip=="y"){o.offset=o.offset==null?target.bbox()["c"+o.flip]:o.offset}else{if(o.offset==null){bbox=target.bbox();o.flip=bbox.cx;o.offset=bbox.cy}else{o.flip=o.offset}}matrix=(new SVG.Matrix).flip(o.flip,o.offset)}else if(o.x!=null||o.y!=null){matrix=new SVG.Translate(o.x,o.y)}if(!matrix)return this;matrix.relative=relative;this.last().transforms.push(matrix);return this._callStart()}});SVG.extend(SVG.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){var matrix=(this.attr("transform")||"").split(SVG.regex.transforms).slice(0,-1).map(function(str){var kv=str.trim().split("(");return[kv[0],kv[1].split(SVG.regex.delimiter).map(function(str){return parseFloat(str)})]}).reduce(function(matrix,transform){if(transform[0]=="matrix")return matrix.multiply(arrayToMatrix(transform[1]));return matrix[transform[0]].apply(matrix,transform[1])},new SVG.Matrix);return matrix},toParent:function(parent){if(this==parent)return this;var ctm=this.screenCTM();var pCtm=parent.screenCTM().inverse();this.addTo(parent).untransform().transform(pCtm.multiply(ctm));return this},toDoc:function(){return this.toParent(this.doc())}});SVG.Transformation=SVG.invent({create:function(source,inversed){if(arguments.length>1&&typeof inversed!="boolean"){return this.constructor.call(this,[].slice.call(arguments))}if(Array.isArray(source)){for(var i=0,len=this.arguments.length;i<len;++i){this[this.arguments[i]]=source[i]}}else if(typeof source=="object"){for(var i=0,len=this.arguments.length;i<len;++i){this[this.arguments[i]]=source[this.arguments[i]]}}this.inversed=false;if(inversed===true){this.inversed=true}},extend:{arguments:[],method:"",at:function(pos){var params=[];for(var i=0,len=this.arguments.length;i<len;++i){params.push(this[this.arguments[i]])}var m=this._undo||new SVG.Matrix;m=(new SVG.Matrix).morph(SVG.Matrix.prototype[this.method].apply(m,params)).at(pos);return this.inversed?m.inverse():m},undo:function(o){for(var i=0,len=this.arguments.length;i<len;++i){o[this.arguments[i]]=typeof this[this.arguments[i]]=="undefined"?0:o[this.arguments[i]]}o.cx=this.cx;o.cy=this.cy;this._undo=new(SVG[capitalize(this.method)])(o,true).at(1);return this}}});SVG.Translate=SVG.invent({parent:SVG.Matrix,inherit:SVG.Transformation,create:function(source,inversed){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}});SVG.Rotate=SVG.invent({parent:SVG.Matrix,inherit:SVG.Transformation,create:function(source,inversed){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["rotation","cx","cy"],method:"rotate",at:function(pos){var m=(new SVG.Matrix).rotate((new SVG.Number).morph(this.rotation-(this._undo?this._undo.rotation:0)).at(pos),this.cx,this.cy);return this.inversed?m.inverse():m},undo:function(o){this._undo=o;return this}}});SVG.Scale=SVG.invent({parent:SVG.Matrix,inherit:SVG.Transformation,create:function(source,inversed){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["scaleX","scaleY","cx","cy"],method:"scale"}});SVG.Skew=SVG.invent({parent:SVG.Matrix,inherit:SVG.Transformation,create:function(source,inversed){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["skewX","skewY","cx","cy"],method:"skew"}});SVG.extend(SVG.Element,{style:function(s,v){if(arguments.length==0){return this.node.style.cssText||""}else if(arguments.length<2){if(typeof s=="object"){for(v in s)this.style(v,s[v])}else if(SVG.regex.isCss.test(s)){s=s.split(/\s*;\s*/).filter(function(e){return!!e}).map(function(e){return e.split(/\s*:\s*/)});while(v=s.pop()){this.style(v[0],v[1])}}else{return this.node.style[camelCase(s)]}}else{this.node.style[camelCase(s)]=v===null||SVG.regex.isBlank.test(v)?"":v}return this}});SVG.Parent=SVG.invent({create:function(element){this.constructor.call(this,element)},inherit:SVG.Element,extend:{children:function(){return SVG.utils.map(SVG.utils.filterSVGElements(this.node.childNodes),function(node){return SVG.adopt(node)})},add:function(element,i){if(i==null)this.node.appendChild(element.node);else if(element.node!=this.node.childNodes[i])this.node.insertBefore(element.node,this.node.childNodes[i]);return this},put:function(element,i){this.add(element,i);return element},has:function(element){return this.index(element)>=0},index:function(element){return[].slice.call(this.node.childNodes).indexOf(element.node)},get:function(i){return SVG.adopt(this.node.childNodes[i])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(block,deep){var i,il,children=this.children();for(i=0,il=children.length;i<il;i++){if(children[i]instanceof SVG.Element)block.apply(children[i],[i,children]);if(deep&&children[i]instanceof SVG.Container)children[i].each(block,deep)}return this},removeElement:function(element){this.node.removeChild(element.node);return this},clear:function(){while(this.node.hasChildNodes())this.node.removeChild(this.node.lastChild);delete this._defs;return this},defs:function(){return this.doc().defs()}}});SVG.extend(SVG.Parent,{ungroup:function(parent,depth){if(depth===0||this instanceof SVG.Defs||this.node==SVG.parser.draw)return this;parent=parent||(this instanceof SVG.Doc?this:this.parent(SVG.Parent));depth=depth||Infinity;this.each(function(){if(this instanceof SVG.Defs)return this;if(this instanceof SVG.Parent)return this.ungroup(parent,depth-1);return this.toParent(parent)});this.node.firstChild||this.remove();return this},flatten:function(parent,depth){return this.ungroup(parent,depth)}});SVG.Container=SVG.invent({create:function(element){this.constructor.call(this,element)},inherit:SVG.Parent});SVG.ViewBox=SVG.invent({create:function(source){var i,base=[0,0,0,0];var x,y,width,height,box,view,we,he,wm=1,hm=1,reg=/[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?/gi;if(source instanceof SVG.Element){we=source;he=source;view=(source.attr("viewBox")||"").match(reg);box=source.bbox;width=new SVG.Number(source.width());height=new SVG.Number(source.height());while(width.unit=="%"){wm*=width.value;width=new SVG.Number(we instanceof SVG.Doc?we.parent().offsetWidth:we.parent().width());we=we.parent()}while(height.unit=="%"){hm*=height.value;height=new SVG.Number(he instanceof SVG.Doc?he.parent().offsetHeight:he.parent().height());he=he.parent()}this.x=0;this.y=0;this.width=width*wm;this.height=height*hm;this.zoom=1;if(view){x=parseFloat(view[0]);y=parseFloat(view[1]);width=parseFloat(view[2]);height=parseFloat(view[3]);this.zoom=this.width/this.height>width/height?this.height/height:this.width/width;this.x=x;this.y=y;this.width=width;this.height=height}}else{source=typeof source==="string"?source.match(reg).map(function(el){return parseFloat(el)}):Array.isArray(source)?source:typeof source=="object"?[source.x,source.y,source.width,source.height]:arguments.length==4?[].slice.call(arguments):base;this.x=source[0];this.y=source[1];this.width=source[2];this.height=source[3]}},extend:{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height},morph:function(x,y,width,height){this.destination=new SVG.ViewBox(x,y,width,height);return this},at:function(pos){if(!this.destination)return this;return new SVG.ViewBox([this.x+(this.destination.x-this.x)*pos,this.y+(this.destination.y-this.y)*pos,this.width+(this.destination.width-this.width)*pos,this.height+(this.destination.height-this.height)*pos])}},parent:SVG.Container,construct:{viewbox:function(x,y,width,height){if(arguments.length==0)return new SVG.ViewBox(this);return this.attr("viewBox",new SVG.ViewBox(x,y,width,height))}}});["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(event){SVG.Element.prototype[event]=function(f){SVG.on(this.node,event,f);return this}});SVG.listeners=[];SVG.handlerMap=[];SVG.listenerId=0;SVG.on=function(node,event,listener,binding,options){var l=listener.bind(binding||node.instance||node),index=(SVG.handlerMap.indexOf(node)+1||SVG.handlerMap.push(node))-1,ev=event.split(".")[0],ns=event.split(".")[1]||"*";SVG.listeners[index]=SVG.listeners[index]||{};SVG.listeners[index][ev]=SVG.listeners[index][ev]||{};SVG.listeners[index][ev][ns]=SVG.listeners[index][ev][ns]||{};if(!listener._svgjsListenerId)listener._svgjsListenerId=++SVG.listenerId;SVG.listeners[index][ev][ns][listener._svgjsListenerId]=l;node.addEventListener(ev,l,options||false)};SVG.off=function(node,event,listener){var index=SVG.handlerMap.indexOf(node),ev=event&&event.split(".")[0],ns=event&&event.split(".")[1],namespace="";if(index==-1)return;if(listener){if(typeof listener=="function")listener=listener._svgjsListenerId;if(!listener)return;if(SVG.listeners[index][ev]&&SVG.listeners[index][ev][ns||"*"]){node.removeEventListener(ev,SVG.listeners[index][ev][ns||"*"][listener],false);delete SVG.listeners[index][ev][ns||"*"][listener]}}else if(ns&&ev){if(SVG.listeners[index][ev]&&SVG.listeners[index][ev][ns]){for(listener in SVG.listeners[index][ev][ns])SVG.off(node,[ev,ns].join("."),listener);delete SVG.listeners[index][ev][ns]}}else if(ns){for(event in SVG.listeners[index]){for(namespace in SVG.listeners[index][event]){if(ns===namespace){SVG.off(node,[event,ns].join("."))}}}}else if(ev){if(SVG.listeners[index][ev]){for(namespace in SVG.listeners[index][ev])SVG.off(node,[ev,namespace].join("."));delete SVG.listeners[index][ev]}}else{for(event in SVG.listeners[index])SVG.off(node,event);delete SVG.listeners[index];delete SVG.handlerMap[index]}};SVG.extend(SVG.Element,{on:function(event,listener,binding,options){SVG.on(this.node,event,listener,binding,options);return this},off:function(event,listener){SVG.off(this.node,event,listener);return this},fire:function(event,data){if(event instanceof window.Event){this.node.dispatchEvent(event)}else{this.node.dispatchEvent(event=new SVG.CustomEvent(event,{detail:data,cancelable:true}))}this._event=event;return this},event:function(){return this._event}});SVG.Defs=SVG.invent({create:"defs",inherit:SVG.Container});SVG.G=SVG.invent({create:"g",inherit:SVG.Container,extend:{x:function(x){return x==null?this.transform("x"):this.transform({x:x-this.x()},true)},y:function(y){return y==null?this.transform("y"):this.transform({y:y-this.y()},true)},cx:function(x){return x==null?this.gbox().cx:this.x(x-this.gbox().width/2)},cy:function(y){return y==null?this.gbox().cy:this.y(y-this.gbox().height/2)},gbox:function(){var bbox=this.bbox(),trans=this.transform();bbox.x+=trans.x;bbox.x2+=trans.x;bbox.cx+=trans.x;bbox.y+=trans.y;bbox.y2+=trans.y;bbox.cy+=trans.y;return bbox}},construct:{group:function(){return this.put(new SVG.G)}}});SVG.Doc=SVG.invent({create:function(element){if(element){element=typeof element=="string"?document.getElementById(element):element;if(element.nodeName=="svg"){this.constructor.call(this,element)}else{this.constructor.call(this,SVG.create("svg"));element.appendChild(this.node);this.size("100%","100%")}this.namespace().defs()}},inherit:SVG.Container,extend:{namespace:function(){return this.attr({xmlns:SVG.ns,version:"1.1"}).attr("xmlns:xlink",SVG.xlink,SVG.xmlns).attr("xmlns:svgjs",SVG.svgjs,SVG.xmlns)},defs:function(){if(!this._defs){var defs;if(defs=this.node.getElementsByTagName("defs")[0])this._defs=SVG.adopt(defs);else this._defs=new SVG.Defs;this.node.appendChild(this._defs.node)}return this._defs},parent:function(){if(!this.node.parentNode||this.node.parentNode.nodeName=="#document")return null;return this.node.parentNode},spof:function(){var pos=this.node.getScreenCTM();if(pos)this.style("left",-pos.e%1+"px").style("top",-pos.f%1+"px");return this},remove:function(){if(this.parent()){this.parent().removeChild(this.node)}return this},clear:function(){while(this.node.hasChildNodes())this.node.removeChild(this.node.lastChild);delete this._defs;if(!SVG.parser.draw.parentNode)this.node.appendChild(SVG.parser.draw);return this},clone:function(parent){this.writeDataToDom();var node=this.node;var clone=assignNewId(node.cloneNode(true));if(parent){(parent.node||parent).appendChild(clone.node)}else{node.parentNode.insertBefore(clone.node,node.nextSibling)}return clone}}});SVG.extend(SVG.Element,{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var i=this.position()+1,p=this.parent();p.removeElement(this).add(this,i);if(p instanceof SVG.Doc)p.node.appendChild(p.defs().node);return this},backward:function(){var i=this.position();if(i>0)this.parent().removeElement(this).add(this,i-1);return this},front:function(){var p=this.parent();p.node.appendChild(this.node);if(p instanceof SVG.Doc)p.node.appendChild(p.defs().node);return this},back:function(){if(this.position()>0)this.parent().removeElement(this).add(this,0);return this},before:function(element){element.remove();var i=this.position();this.parent().add(element,i);return this},after:function(element){element.remove();var i=this.position();this.parent().add(element,i+1);return this}});SVG.Mask=SVG.invent({create:function(){this.constructor.call(this,SVG.create("mask"));this.targets=[]},inherit:SVG.Container,extend:{remove:function(){for(var i=this.targets.length-1;i>=0;i--)if(this.targets[i])this.targets[i].unmask();this.targets=[];SVG.Element.prototype.remove.call(this);return this}},construct:{mask:function(){return this.defs().put(new SVG.Mask)}}});SVG.extend(SVG.Element,{maskWith:function(element){this.masker=element instanceof SVG.Mask?element:this.parent().mask().add(element);this.masker.targets.push(this);return this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){delete this.masker;return this.attr("mask",null)}});SVG.ClipPath=SVG.invent({create:function(){this.constructor.call(this,SVG.create("clipPath"));this.targets=[]},inherit:SVG.Container,extend:{remove:function(){for(var i=this.targets.length-1;i>=0;i--)if(this.targets[i])this.targets[i].unclip();this.targets=[];this.parent().removeElement(this);return this}},construct:{clip:function(){return this.defs().put(new SVG.ClipPath)}}});SVG.extend(SVG.Element,{clipWith:function(element){this.clipper=element instanceof SVG.ClipPath?element:this.parent().clip().add(element);this.clipper.targets.push(this);return this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){delete this.clipper;return this.attr("clip-path",null)}});SVG.Gradient=SVG.invent({create:function(type){this.constructor.call(this,SVG.create(type+"Gradient"));this.type=type},inherit:SVG.Container,extend:{at:function(offset,color,opacity){return this.put(new SVG.Stop).update(offset,color,opacity)},update:function(block){this.clear();if(typeof block=="function")block.call(this,this);return this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(a,b,c){if(a=="transform")a="gradientTransform";return SVG.Container.prototype.attr.call(this,a,b,c)}},construct:{gradient:function(type,block){return this.defs().gradient(type,block)}}});SVG.extend(SVG.Gradient,SVG.FX,{from:function(x,y){return(this._target||this).type=="radial"?this.attr({fx:new SVG.Number(x),fy:new SVG.Number(y)}):this.attr({x1:new SVG.Number(x),y1:new SVG.Number(y)})},to:function(x,y){return(this._target||this).type=="radial"?this.attr({cx:new SVG.Number(x),cy:new SVG.Number(y)}):this.attr({x2:new SVG.Number(x),y2:new SVG.Number(y)})}});SVG.extend(SVG.Defs,{gradient:function(type,block){return this.put(new SVG.Gradient(type)).update(block)}});SVG.Stop=SVG.invent({create:"stop",inherit:SVG.Element,extend:{update:function(o){if(typeof o=="number"||o instanceof SVG.Number){o={offset:arguments[0],color:arguments[1],opacity:arguments[2]}}if(o.opacity!=null)this.attr("stop-opacity",o.opacity);if(o.color!=null)this.attr("stop-color",o.color);if(o.offset!=null)this.attr("offset",new SVG.Number(o.offset));return this}}});SVG.Pattern=SVG.invent({create:"pattern",inherit:SVG.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(block){this.clear();if(typeof block=="function")block.call(this,this);return this},toString:function(){return this.fill()},attr:function(a,b,c){if(a=="transform")a="patternTransform";return SVG.Container.prototype.attr.call(this,a,b,c)}},construct:{pattern:function(width,height,block){return this.defs().pattern(width,height,block)}}});SVG.extend(SVG.Defs,{pattern:function(width,height,block){return this.put(new SVG.Pattern).update(block).attr({x:0,y:0,width:width,height:height,patternUnits:"userSpaceOnUse"})}});SVG.Shape=SVG.invent({create:function(element){this.constructor.call(this,element)},inherit:SVG.Element});SVG.Bare=SVG.invent({create:function(element,inherit){this.constructor.call(this,SVG.create(element));if(inherit)for(var method in inherit.prototype)if(typeof inherit.prototype[method]==="function")this[method]=inherit.prototype[method]},inherit:SVG.Element,extend:{words:function(text){while(this.node.hasChildNodes())this.node.removeChild(this.node.lastChild);this.node.appendChild(document.createTextNode(text));return this}}});SVG.extend(SVG.Parent,{element:function(element,inherit){return this.put(new SVG.Bare(element,inherit))}});SVG.Symbol=SVG.invent({create:"symbol",inherit:SVG.Container,construct:{symbol:function(){return this.put(new SVG.Symbol)}}});SVG.Use=SVG.invent({create:"use",inherit:SVG.Shape,extend:{element:function(element,file){return this.attr("href",(file||"")+"#"+element,SVG.xlink)}},construct:{use:function(element,file){return this.put(new SVG.Use).element(element,file)}}});SVG.Rect=SVG.invent({create:"rect",inherit:SVG.Shape,construct:{rect:function(width,height){return this.put(new SVG.Rect).size(width,height)}}});SVG.Circle=SVG.invent({create:"circle",inherit:SVG.Shape,construct:{circle:function(size){return this.put(new SVG.Circle).rx(new SVG.Number(size).divide(2)).move(0,0)}}});SVG.extend(SVG.Circle,SVG.FX,{rx:function(rx){return this.attr("r",rx)},ry:function(ry){return this.rx(ry)}});SVG.Ellipse=SVG.invent({create:"ellipse",inherit:SVG.Shape,construct:{ellipse:function(width,height){return this.put(new SVG.Ellipse).size(width,height).move(0,0)}}});SVG.extend(SVG.Ellipse,SVG.Rect,SVG.FX,{rx:function(rx){return this.attr("rx",rx)},ry:function(ry){return this.attr("ry",ry)}});SVG.extend(SVG.Circle,SVG.Ellipse,{x:function(x){return x==null?this.cx()-this.rx():this.cx(x+this.rx())},y:function(y){return y==null?this.cy()-this.ry():this.cy(y+this.ry())},cx:function(x){return x==null?this.attr("cx"):this.attr("cx",x)},cy:function(y){return y==null?this.attr("cy"):this.attr("cy",y)},width:function(width){return width==null?this.rx()*2:this.rx(new SVG.Number(width).divide(2))},height:function(height){return height==null?this.ry()*2:this.ry(new SVG.Number(height).divide(2))},size:function(width,height){var p=proportionalSize(this,width,height);return this.rx(new SVG.Number(p.width).divide(2)).ry(new SVG.Number(p.height).divide(2))}});SVG.Line=SVG.invent({create:"line",inherit:SVG.Shape,extend:{array:function(){return new SVG.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(x1,y1,x2,y2){if(x1==null)return this.array();else if(typeof y1!=="undefined")x1={x1:x1,y1:y1,x2:x2,y2:y2};else x1=new SVG.PointArray(x1).toLine();return this.attr(x1)},move:function(x,y){return this.attr(this.array().move(x,y).toLine())},size:function(width,height){var p=proportionalSize(this,width,height);return this.attr(this.array().size(p.width,p.height).toLine())}},construct:{line:function(x1,y1,x2,y2){return SVG.Line.prototype.plot.apply(this.put(new SVG.Line),x1!=null?[x1,y1,x2,y2]:[0,0,0,0])}}});SVG.Polyline=SVG.invent({create:"polyline",inherit:SVG.Shape,construct:{polyline:function(p){return this.put(new SVG.Polyline).plot(p||new SVG.PointArray)}}});SVG.Polygon=SVG.invent({create:"polygon",inherit:SVG.Shape,construct:{polygon:function(p){return this.put(new SVG.Polygon).plot(p||new SVG.PointArray)}}});SVG.extend(SVG.Polyline,SVG.Polygon,{array:function(){return this._array||(this._array=new SVG.PointArray(this.attr("points")))},plot:function(p){return p==null?this.array():this.clear().attr("points",typeof p=="string"?p:this._array=new SVG.PointArray(p))},clear:function(){delete this._array;return this},move:function(x,y){return this.attr("points",this.array().move(x,y))},size:function(width,height){var p=proportionalSize(this,width,height);return this.attr("points",this.array().size(p.width,p.height))}});SVG.extend(SVG.Line,SVG.Polyline,SVG.Polygon,{morphArray:SVG.PointArray,x:function(x){return x==null?this.bbox().x:this.move(x,this.bbox().y)},y:function(y){return y==null?this.bbox().y:this.move(this.bbox().x,y)},width:function(width){var b=this.bbox();return width==null?b.width:this.size(width,b.height)},height:function(height){var b=this.bbox();return height==null?b.height:this.size(b.width,height)}});SVG.Path=SVG.invent({create:"path",inherit:SVG.Shape,extend:{morphArray:SVG.PathArray,array:function(){return this._array||(this._array=new SVG.PathArray(this.attr("d")))},plot:function(d){return d==null?this.array():this.clear().attr("d",typeof d=="string"?d:this._array=new SVG.PathArray(d))},clear:function(){delete this._array;return this},move:function(x,y){return this.attr("d",this.array().move(x,y))},x:function(x){return x==null?this.bbox().x:this.move(x,this.bbox().y)},y:function(y){return y==null?this.bbox().y:this.move(this.bbox().x,y)},size:function(width,height){var p=proportionalSize(this,width,height);return this.attr("d",this.array().size(p.width,p.height))},width:function(width){return width==null?this.bbox().width:this.size(width,this.bbox().height)},height:function(height){return height==null?this.bbox().height:this.size(this.bbox().width,height)}},construct:{path:function(d){return this.put(new SVG.Path).plot(d||new SVG.PathArray)}}});SVG.Image=SVG.invent({create:"image",inherit:SVG.Shape,extend:{load:function(url){if(!url)return this;var self=this,img=new window.Image;SVG.on(img,"load",function(){SVG.off(img);var p=self.parent(SVG.Pattern);if(p===null)return;if(self.width()==0&&self.height()==0)self.size(img.width,img.height);if(p&&p.width()==0&&p.height()==0)p.size(self.width(),self.height());if(typeof self._loaded==="function")self._loaded.call(self,{width:img.width,height:img.height,ratio:img.width/img.height,url:url})});SVG.on(img,"error",function(e){SVG.off(img);if(typeof self._error==="function"){self._error.call(self,e)}});return this.attr("href",img.src=this.src=url,SVG.xlink)},loaded:function(loaded){this._loaded=loaded;return this},error:function(error){this._error=error;return this}},construct:{image:function(source,width,height){return this.put(new SVG.Image).load(source).size(width||0,height||width||0)}}});SVG.Text=SVG.invent({create:function(){this.constructor.call(this,SVG.create("text"));this.dom.leading=new SVG.Number(1.3);this._rebuild=true;this._build=false;this.attr("font-family",SVG.defaults.attrs["font-family"])},inherit:SVG.Shape,extend:{x:function(x){if(x==null)return this.attr("x");return this.attr("x",x)},y:function(y){var oy=this.attr("y"),o=typeof oy==="number"?oy-this.bbox().y:0;if(y==null)return typeof oy==="number"?oy-o:oy;return this.attr("y",typeof y.valueOf()==="number"?y+o:y)},cx:function(x){return x==null?this.bbox().cx:this.x(x-this.bbox().width/2)},cy:function(y){return y==null?this.bbox().cy:this.y(y-this.bbox().height/2)},text:function(text){if(typeof text==="undefined"){var text="";var children=this.node.childNodes;for(var i=0,len=children.length;i<len;++i){if(i!=0&&children[i].nodeType!=3&&SVG.adopt(children[i]).dom.newLined==true){text+="\n"}text+=children[i].textContent}return text}this.clear().build(true);if(typeof text==="function"){text.call(this,this)}else{text=text.split("\n");for(var i=0,il=text.length;i<il;i++)this.tspan(text[i]).newLine()}return this.build(false).rebuild()},size:function(size){return this.attr("font-size",size).rebuild()},leading:function(value){if(value==null)return this.dom.leading;this.dom.leading=new SVG.Number(value);return this.rebuild()},lines:function(){var node=(this.textPath&&this.textPath()||this).node;var lines=SVG.utils.map(SVG.utils.filterSVGElements(node.childNodes),function(el){return SVG.adopt(el)});return new SVG.Set(lines)},rebuild:function(rebuild){if(typeof rebuild=="boolean")this._rebuild=rebuild;if(this._rebuild){var self=this,blankLineOffset=0,dy=this.dom.leading*new SVG.Number(this.attr("font-size"));this.lines().each(function(){if(this.dom.newLined){if(!self.textPath())this.attr("x",self.attr("x"));if(this.text()=="\n"){blankLineOffset+=dy}else{this.attr("dy",dy+blankLineOffset);blankLineOffset=0}}});this.fire("rebuild")}return this},build:function(build){this._build=!!build;return this},setData:function(o){this.dom=o;this.dom.leading=new SVG.Number(o.leading||1.3);return this}},construct:{text:function(text){return this.put(new SVG.Text).text(text)},plain:function(text){return this.put(new SVG.Text).plain(text)}}});SVG.Tspan=SVG.invent({create:"tspan",inherit:SVG.Shape,extend:{text:function(text){if(text==null)return this.node.textContent+(this.dom.newLined?"\n":"");typeof text==="function"?text.call(this,this):this.plain(text);return this},dx:function(dx){return this.attr("dx",dx)},dy:function(dy){return this.attr("dy",dy)},newLine:function(){var t=this.parent(SVG.Text);this.dom.newLined=true;return this.dy(t.dom.leading*t.attr("font-size")).attr("x",t.x())}}});SVG.extend(SVG.Text,SVG.Tspan,{plain:function(text){if(this._build===false)this.clear();this.node.appendChild(document.createTextNode(text));return this},tspan:function(text){var node=(this.textPath&&this.textPath()||this).node,tspan=new SVG.Tspan;if(this._build===false)this.clear();node.appendChild(tspan.node);return tspan.text(text)},clear:function(){var node=(this.textPath&&this.textPath()||this).node;while(node.hasChildNodes())node.removeChild(node.lastChild);return this},length:function(){return this.node.getComputedTextLength()}});SVG.TextPath=SVG.invent({create:"textPath",inherit:SVG.Parent,parent:SVG.Text,construct:{morphArray:SVG.PathArray,path:function(d){var path=new SVG.TextPath,track=this.doc().defs().path(d);while(this.node.hasChildNodes())path.node.appendChild(this.node.firstChild);this.node.appendChild(path.node);path.attr("href","#"+track,SVG.xlink);return this},array:function(){var track=this.track();return track?track.array():null},plot:function(d){var track=this.track(),pathArray=null;if(track){pathArray=track.plot(d)}return d==null?pathArray:this},track:function(){var path=this.textPath();if(path)return path.reference("href")},textPath:function(){if(this.node.firstChild&&this.node.firstChild.nodeName=="textPath")return SVG.adopt(this.node.firstChild)}}});SVG.Nested=SVG.invent({create:function(){this.constructor.call(this,SVG.create("svg"));this.style("overflow","visible")},inherit:SVG.Container,construct:{nested:function(){return this.put(new SVG.Nested)}}});SVG.A=SVG.invent({create:"a",inherit:SVG.Container,extend:{to:function(url){return this.attr("href",url,SVG.xlink)},show:function(target){return this.attr("show",target,SVG.xlink)},target:function(target){return this.attr("target",target)}},construct:{link:function(url){return this.put(new SVG.A).to(url)}}});SVG.extend(SVG.Element,{linkTo:function(url){var link=new SVG.A;if(typeof url=="function")url.call(link,link);else link.to(url);return this.parent().put(link).put(this)}});SVG.Marker=SVG.invent({create:"marker",inherit:SVG.Container,extend:{width:function(width){return this.attr("markerWidth",width)},height:function(height){return this.attr("markerHeight",height)},ref:function(x,y){return this.attr("refX",x).attr("refY",y)},update:function(block){this.clear();if(typeof block=="function")block.call(this,this);return this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(width,height,block){return this.defs().marker(width,height,block)}}});SVG.extend(SVG.Defs,{marker:function(width,height,block){return this.put(new SVG.Marker).size(width,height).ref(width/2,height/2).viewbox(0,0,width,height).attr("orient","auto").update(block)}});SVG.extend(SVG.Line,SVG.Polyline,SVG.Polygon,SVG.Path,{marker:function(marker,width,height,block){var attr=["marker"];if(marker!="all")attr.push(marker);attr=attr.join("-");marker=arguments[1]instanceof SVG.Marker?arguments[1]:this.doc().marker(width,height,block);return this.attr(attr,marker)}});var sugar={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,a){return a=="color"?t:t+"-"+a}};["fill","stroke"].forEach(function(m){var i,extension={};extension[m]=function(o){if(typeof o=="undefined")return this;if(typeof o=="string"||SVG.Color.isRgb(o)||o&&typeof o.fill==="function")this.attr(m,o);else for(i=sugar[m].length-1;i>=0;i--)if(o[sugar[m][i]]!=null)this.attr(sugar.prefix(m,sugar[m][i]),o[sugar[m][i]]);return this};SVG.extend(SVG.Element,SVG.FX,extension)});SVG.extend(SVG.Element,SVG.FX,{rotate:function(d,cx,cy){return this.transform({rotation:d,cx:cx,cy:cy})},skew:function(x,y,cx,cy){return arguments.length==1||arguments.length==3?this.transform({skew:x,cx:y,cy:cx}):this.transform({skewX:x,skewY:y,cx:cx,cy:cy})},scale:function(x,y,cx,cy){return arguments.length==1||arguments.length==3?this.transform({scale:x,cx:y,cy:cx}):this.transform({scaleX:x,scaleY:y,cx:cx,cy:cy})},translate:function(x,y){return this.transform({x:x,y:y})},flip:function(a,o){o=typeof a=="number"?a:o;return this.transform({flip:a||"both",offset:o})},matrix:function(m){return this.attr("transform",new SVG.Matrix(arguments.length==6?[].slice.call(arguments):m))},opacity:function(value){return this.attr("opacity",value)},dx:function(x){return this.x(new SVG.Number(x).plus(this instanceof SVG.FX?0:this.x()),true)},dy:function(y){return this.y(new SVG.Number(y).plus(this instanceof SVG.FX?0:this.y()),true)},dmove:function(x,y){return this.dx(x).dy(y)}});SVG.extend(SVG.Rect,SVG.Ellipse,SVG.Circle,SVG.Gradient,SVG.FX,{radius:function(x,y){var type=(this._target||this).type;return type=="radial"||type=="circle"?this.attr("r",new SVG.Number(x)):this.rx(x).ry(y==null?x:y)}});SVG.extend(SVG.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(length){return this.node.getPointAtLength(length)}});SVG.extend(SVG.Parent,SVG.Text,SVG.Tspan,SVG.FX,{font:function(a,v){if(typeof a=="object"){for(v in a)this.font(v,a[v])}return a=="leading"?this.leading(v):a=="anchor"?this.attr("text-anchor",v):a=="size"||a=="family"||a=="weight"||a=="stretch"||a=="variant"||a=="style"?this.attr("font-"+a,v):this.attr(a,v)}});SVG.Set=SVG.invent({create:function(members){Array.isArray(members)?this.members=members:this.clear()},extend:{add:function(){var i,il,elements=[].slice.call(arguments);for(i=0,il=elements.length;i<il;i++)this.members.push(elements[i]);return this},remove:function(element){var i=this.index(element);if(i>-1)this.members.splice(i,1);return this},each:function(block){for(var i=0,il=this.members.length;i<il;i++)block.apply(this.members[i],[i,this.members]);return this},clear:function(){this.members=[];return this},length:function(){return this.members.length},has:function(element){return this.index(element)>=0},index:function(element){return this.members.indexOf(element)},get:function(i){return this.members[i]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){if(this.members.length==0)return new SVG.RBox;var rbox=this.members[0].rbox(this.members[0].doc());this.each(function(){rbox=rbox.merge(this.rbox(this.doc()))});return rbox}},construct:{set:function(members){return new SVG.Set(members)}}});SVG.FX.Set=SVG.invent({create:function(set){this.set=set}});SVG.Set.inherit=function(){var m,methods=[];for(var m in SVG.Shape.prototype)if(typeof SVG.Shape.prototype[m]=="function"&&typeof SVG.Set.prototype[m]!="function")methods.push(m);methods.forEach(function(method){SVG.Set.prototype[method]=function(){for(var i=0,il=this.members.length;i<il;i++)if(this.members[i]&&typeof this.members[i][method]=="function")this.members[i][method].apply(this.members[i],arguments);return method=="animate"?this.fx||(this.fx=new SVG.FX.Set(this)):this}});methods=[];for(var m in SVG.FX.prototype)if(typeof SVG.FX.prototype[m]=="function"&&typeof SVG.FX.Set.prototype[m]!="function")methods.push(m);methods.forEach(function(method){SVG.FX.Set.prototype[method]=function(){for(var i=0,il=this.set.members.length;i<il;i++)this.set.members[i].fx[method].apply(this.set.members[i].fx,arguments);return this}})};SVG.extend(SVG.Element,{data:function(a,v,r){if(typeof a=="object"){for(v in a)this.data(v,a[v])}else if(arguments.length<2){try{return JSON.parse(this.attr("data-"+a))}catch(e){return this.attr("data-"+a)}}else{this.attr("data-"+a,v===null?null:r===true||typeof v==="string"||typeof v==="number"?v:JSON.stringify(v))}return this}});SVG.extend(SVG.Element,{remember:function(k,v){if(typeof arguments[0]=="object")for(var v in k)this.remember(v,k[v]);else if(arguments.length==1)return this.memory()[k];else this.memory()[k]=v;return this},forget:function(){if(arguments.length==0)this._memory={};else for(var i=arguments.length-1;i>=0;i--)delete this.memory()[arguments[i]];return this},memory:function(){return this._memory||(this._memory={})}});SVG.get=function(id){var node=document.getElementById(idFromReference(id)||id);return SVG.adopt(node)};SVG.select=function(query,parent){return new SVG.Set(SVG.utils.map((parent||document).querySelectorAll(query),function(node){return SVG.adopt(node)}))};SVG.extend(SVG.Parent,{select:function(query){return SVG.select(query,this.node)}});function pathRegReplace(a,b,c,d){return c+d.replace(SVG.regex.dots," .")}function array_clone(arr){var clone=arr.slice(0);for(var i=clone.length;i--;){if(Array.isArray(clone[i])){clone[i]=array_clone(clone[i])}}return clone}function is(el,obj){return el instanceof obj}function matches(el,selector){return(el.matches||el.matchesSelector||el.msMatchesSelector||el.mozMatchesSelector||el.webkitMatchesSelector||el.oMatchesSelector).call(el,selector)}function camelCase(s){return s.toLowerCase().replace(/-(.)/g,function(m,g){return g.toUpperCase()})}function capitalize(s){return s.charAt(0).toUpperCase()+s.slice(1)}function fullHex(hex){return hex.length==4?["#",hex.substring(1,2),hex.substring(1,2),hex.substring(2,3),hex.substring(2,3),hex.substring(3,4),hex.substring(3,4)].join(""):hex}function compToHex(comp){var hex=comp.toString(16);return hex.length==1?"0"+hex:hex}function proportionalSize(element,width,height){if(width==null||height==null){var box=element.bbox();if(width==null)width=box.width/box.height*height;else if(height==null)height=box.height/box.width*width}return{width:width,height:height}}function deltaTransformPoint(matrix,x,y){return{x:x*matrix.a+y*matrix.c+0,y:x*matrix.b+y*matrix.d+0}}function arrayToMatrix(a){return{a:a[0],b:a[1],c:a[2],d:a[3],e:a[4],f:a[5]}}function parseMatrix(matrix){if(!(matrix instanceof SVG.Matrix))matrix=new SVG.Matrix(matrix);return matrix}function ensureCentre(o,target){o.cx=o.cx==null?target.bbox().cx:o.cx;o.cy=o.cy==null?target.bbox().cy:o.cy}function arrayToString(a){for(var i=0,il=a.length,s="";i<il;i++){s+=a[i][0];if(a[i][1]!=null){s+=a[i][1];if(a[i][2]!=null){s+=" ";s+=a[i][2];if(a[i][3]!=null){s+=" ";s+=a[i][3];s+=" ";s+=a[i][4];if(a[i][5]!=null){s+=" ";s+=a[i][5];s+=" ";s+=a[i][6];if(a[i][7]!=null){s+=" ";s+=a[i][7]}}}}}}return s+" "}function assignNewId(node){for(var i=node.childNodes.length-1;i>=0;i--)if(node.childNodes[i]instanceof window.SVGElement)assignNewId(node.childNodes[i]);return SVG.adopt(node).id(SVG.eid(node.nodeName))}function fullBox(b){if(b.x==null){b.x=0;b.y=0;b.width=0;b.height=0}b.w=b.width;b.h=b.height;b.x2=b.x+b.width;b.y2=b.y+b.height;b.cx=b.x+b.width/2;b.cy=b.y+b.height/2;return b}function idFromReference(url){var m=(url||"").toString().match(SVG.regex.reference);if(m)return m[1]}function float32String(v){return Math.abs(v)>1e-37?v:0}var abcdef="abcdef".split("");if(typeof window.CustomEvent!=="function"){var CustomEventPoly=function(event,options){options=options||{bubbles:false,cancelable:false,detail:undefined};var e=document.createEvent("CustomEvent");e.initCustomEvent(event,options.bubbles,options.cancelable,options.detail);return e};CustomEventPoly.prototype=window.Event.prototype;SVG.CustomEvent=CustomEventPoly}else{SVG.CustomEvent=window.CustomEvent}(function(w){var lastTime=0;var vendors=["moz","webkit"];for(var x=0;x<vendors.length&&!window.requestAnimationFrame;++x){w.requestAnimationFrame=w[vendors[x]+"RequestAnimationFrame"];w.cancelAnimationFrame=w[vendors[x]+"CancelAnimationFrame"]||w[vendors[x]+"CancelRequestAnimationFrame"]}w.requestAnimationFrame=w.requestAnimationFrame||function(callback){var currTime=(new Date).getTime();var timeToCall=Math.max(0,16-(currTime-lastTime));var id=w.setTimeout(function(){callback(currTime+timeToCall)},timeToCall);lastTime=currTime+timeToCall;return id};w.cancelAnimationFrame=w.cancelAnimationFrame||w.clearTimeout})(window);return SVG})},{}],40:[function(require,module,exports){(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?module.exports=factory():typeof define==="function"&&define.amd?define(factory):(global=typeof globalThis!=="undefined"?globalThis:global||self,global.Tabulator=factory())})(this,function(){"use strict";function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function(obj){return typeof obj}}else{_typeof=function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _createForOfIteratorHelper(o,allowArrayLike){var it;if(typeof Symbol==="undefined"||o[Symbol.iterator]==null){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function(){};return{s:F,n:function(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function(){it=o[Symbol.iterator]()},n:function(){var step=it.next();normalCompletion=step.done;return step},e:function(e){didErr=true;err=e},f:function(){try{if(!normalCompletion&&it.return!=null)it.return()}finally{if(didErr)throw err}}}}var defaultOptions={debugEventsExternal:false,debugEventsInternal:false,debugInvalidOptions:true,height:false,minHeight:false,maxHeight:false,columnMaxWidth:false,columnHeaderVertAlign:"top",columns:[],columnDefaults:{},data:false,autoColumns:false,autoColumnsDefinitions:false,nestedFieldSeparator:".",tooltipGenerationMode:"load",footerElement:false,index:"id",textDirection:"auto",addRowPos:"bottom",headerVisible:true,renderVertical:"virtual",renderHorizontal:"basic",renderVerticalBuffer:0,scrollToRowPosition:"top",scrollToRowIfVisible:true,scrollToColumnPosition:"left",scrollToColumnIfVisible:true,rowFormatter:false,rowFormatterPrint:null,rowFormatterClipboard:null,rowFormatterHtmlOutput:null,placeholder:false,dataLoader:true,dataLoaderLoading:false,dataLoaderError:false,dataSendParams:{},dataReceiveParams:{}};var CoreFeature=function(){function CoreFeature(table){_classCallCheck(this,CoreFeature);this.table=table}_createClass(CoreFeature,[{key:"reloadData",value:function reloadData(data,silent){return this.table.dataLoader.load(data,undefined,undefined,undefined,silent)}},{key:"langText",value:function langText(){var _this$table$modules$l;return(_this$table$modules$l=this.table.modules.localize).getText.apply(_this$table$modules$l,arguments)}},{key:"langBind",value:function langBind(){var _this$table$modules$l2;return(_this$table$modules$l2=this.table.modules.localize).bind.apply(_this$table$modules$l2,arguments)}},{key:"langLocale",value:function langLocale(){var _this$table$modules$l3;return(_this$table$modules$l3=this.table.modules.localize).getLocale.apply(_this$table$modules$l3,arguments)}},{key:"commsConnections",value:function commsConnections(){var _this$table$modules$c;return(_this$table$modules$c=this.table.modules.comms).getConnections.apply(_this$table$modules$c,arguments)}},{key:"commsSend",value:function commsSend(){var _this$table$modules$c2;return(_this$table$modules$c2=this.table.modules.comms).send.apply(_this$table$modules$c2,arguments)}},{key:"layoutMode",value:function layoutMode(){return this.table.modules.layout.getMode()}},{key:"layoutRefresh",value:function layoutRefresh(){return this.table.modules.layout.layout()}},{key:"subscribe",value:function subscribe(){var _this$table$eventBus;return(_this$table$eventBus=this.table.eventBus).subscribe.apply(_this$table$eventBus,arguments)}},{key:"unsubscribe",value:function unsubscribe(){var _this$table$eventBus2;return(_this$table$eventBus2=this.table.eventBus).unsubscribe.apply(_this$table$eventBus2,arguments)}},{key:"subscribed",value:function subscribed(key){return this.table.eventBus.subscribed(key)}},{key:"subscriptionChange",value:function subscriptionChange(){var _this$table$eventBus3;return(_this$table$eventBus3=this.table.eventBus).subscriptionChange.apply(_this$table$eventBus3,arguments)}},{key:"dispatch",value:function dispatch(){var _this$table$eventBus4;return(_this$table$eventBus4=this.table.eventBus).dispatch.apply(_this$table$eventBus4,arguments)}},{key:"chain",value:function chain(){var _this$table$eventBus5;return(_this$table$eventBus5=this.table.eventBus).chain.apply(_this$table$eventBus5,arguments)}},{key:"confirm",value:function confirm(){var _this$table$eventBus6;return(_this$table$eventBus6=this.table.eventBus).confirm.apply(_this$table$eventBus6,arguments)}},{key:"dispatchExternal",value:function dispatchExternal(){var _this$table$externalE;return(_this$table$externalE=this.table.externalEvents).dispatch.apply(_this$table$externalE,arguments)}},{key:"subscribedExternal",value:function subscribedExternal(key){return this.table.externalEvents.subscribed(key)}},{key:"subscriptionChangeExternal",value:function subscriptionChangeExternal(){var _this$table$externalE2;return(_this$table$externalE2=this.table.externalEvents).subscriptionChange.apply(_this$table$externalE2,arguments)}},{key:"options",value:function options(key){return this.table.options[key]}},{key:"setOption",value:function setOption(key,value){if(typeof value!=="undefined"){this.table.options[key]=value}return this.table.options[key]}},{key:"module",value:function module(key){return this.table.module(key)}}]);return CoreFeature}();var ColumnComponent=function(){function ColumnComponent(column){_classCallCheck(this,ColumnComponent);this._column=column;this.type="ColumnComponent";return new Proxy(this,{get:function get(target,name,receiver){if(typeof target[name]!=="undefined"){return target[name]}else{return target._column.table.componentFunctionBinder.handle("column",target._column,name)}}})}_createClass(ColumnComponent,[{key:"getElement",value:function getElement(){return this._column.getElement()}},{key:"getDefinition",value:function getDefinition(){return this._column.getDefinition()}},{key:"getField",value:function getField(){return this._column.getField()}},{key:"getCells",value:function getCells(){var cells=[];this._column.cells.forEach(function(cell){cells.push(cell.getComponent())});return cells}},{key:"isVisible",value:function isVisible(){return this._column.visible}},{key:"show",value:function show(){if(this._column.isGroup){this._column.columns.forEach(function(column){column.show()})}else{this._column.show()}}},{key:"hide",value:function hide(){if(this._column.isGroup){this._column.columns.forEach(function(column){column.hide()})}else{this._column.hide()}}},{key:"toggle",value:function toggle(){if(this._column.visible){this.hide()}else{this.show()}}},{key:"delete",value:function _delete(){return this._column["delete"]()}},{key:"getSubColumns",value:function getSubColumns(){var output=[];if(this._column.columns.length){this._column.columns.forEach(function(column){output.push(column.getComponent())})}return output}},{key:"getParentColumn",value:function getParentColumn(){return this._column.parent instanceof Column?this._column.parent.getComponent():false}},{key:"_getSelf",value:function _getSelf(){return this._column}},{key:"scrollTo",value:function scrollTo(){return this._column.table.columnManager.scrollToColumn(this._column)}},{key:"getTable",value:function getTable(){return this._column.table}},{key:"move",value:function move(to,after){var toColumn=this._column.table.columnManager.findColumn(to);if(toColumn){this._column.table.columnManager.moveColumn(this._column,toColumn,after)}else{console.warn("Move Error - No matching column found:",toColumn)}}},{key:"getNextColumn",value:function getNextColumn(){var nextCol=this._column.nextColumn();return nextCol?nextCol.getComponent():false}},{key:"getPrevColumn",value:function getPrevColumn(){var prevCol=this._column.prevColumn();return prevCol?prevCol.getComponent():false}},{key:"updateDefinition",value:function updateDefinition(updates){return this._column.updateDefinition(updates)}},{key:"getWidth",value:function getWidth(){return this._column.getWidth()}},{key:"setWidth",value:function setWidth(width){var result;if(width===true){result=this._column.reinitializeWidth(true)}else{result=this._column.setWidth(width)}this._column.table.columnManager.renderer.rerenderColumns(true);return result}}]);return ColumnComponent}();var defaultColumnOptions={title:undefined,field:undefined,columns:undefined,visible:undefined,hozAlign:undefined,vertAlign:undefined,width:undefined,minWidth:40,maxWidth:undefined,tooltip:undefined,cssClass:undefined,variableHeight:undefined,headerTooltip:undefined,headerVertical:undefined,headerHozAlign:undefined,editableTitle:undefined};var CellComponent=function(){function CellComponent(cell){_classCallCheck(this,CellComponent);this._cell=cell;return new Proxy(this,{get:function get(target,name,receiver){if(typeof target[name]!=="undefined"){return target[name]}else{return target._cell.table.componentFunctionBinder.handle("cell",target._cell,name)}}})}_createClass(CellComponent,[{key:"getValue",value:function getValue(){return this._cell.getValue()}},{key:"getOldValue",value:function getOldValue(){return this._cell.getOldValue()}},{key:"getInitialValue",value:function getInitialValue(){return this._cell.initialValue}},{key:"getElement",value:function getElement(){return this._cell.getElement()}},{key:"getRow",value:function getRow(){return this._cell.row.getComponent()}},{key:"getData",value:function getData(){return this._cell.row.getData()}},{key:"getField",value:function getField(){return this._cell.column.getField()}},{key:"getColumn",value:function getColumn(){return this._cell.column.getComponent()}},{key:"setValue",value:function setValue(value,mutate){if(typeof mutate=="undefined"){mutate=true}this._cell.setValue(value,mutate)}},{key:"restoreOldValue",value:function restoreOldValue(){this._cell.setValueActual(this._cell.getOldValue())}},{key:"restoreInitialValue",value:function restoreInitialValue(){this._cell.setValueActual(this._cell.initialValue)}},{key:"checkHeight",value:function checkHeight(){this._cell.checkHeight()}},{key:"getTable",value:function getTable(){return this._cell.table}},{key:"_getSelf",value:function _getSelf(){return this._cell}}]);return CellComponent}();var Cell=function(_CoreFeature){_inherits(Cell,_CoreFeature);var _super=_createSuper(Cell);function Cell(column,row){var _this;_classCallCheck(this,Cell);_this=_super.call(this,column.table);_this.table=column.table;_this.column=column;_this.row=row;_this.element=null;_this.value=null;_this.initialValue;_this.oldValue=null;_this.modules={};_this.height=null;_this.width=null;_this.minWidth=null;_this.component=null;_this.loaded=false;_this.build();return _this}_createClass(Cell,[{key:"build",value:function build(){this.generateElement();this.setWidth();this._configureCell();this.setValueActual(this.column.getFieldValue(this.row.data));this.initialValue=this.value}},{key:"generateElement",value:function generateElement(){this.element=document.createElement("div");this.element.className="tabulator-cell";this.element.setAttribute("role","gridcell");this.element=this.element}},{key:"_configureCell",value:function _configureCell(){var _this2=this;var element=this.element,field=this.column.getField(),vertAligns={top:"flex-start",bottom:"flex-end",middle:"center"},hozAligns={left:"flex-start",right:"flex-end",center:"center"};element.style.textAlign=this.column.hozAlign;if(this.column.vertAlign){element.style.display="inline-flex";element.style.alignItems=vertAligns[this.column.vertAlign]||"";if(this.column.hozAlign){element.style.justifyContent=hozAligns[this.column.hozAlign]||""}}if(field){element.setAttribute("tabulator-field",field)}if(this.column.definition.cssClass){var classNames=this.column.definition.cssClass.split(" ");classNames.forEach(function(className){element.classList.add(className)})}if(this.table.options.tooltipGenerationMode==="hover"){element.addEventListener("mouseenter",function(e){_this2._generateTooltip()})}this.dispatch("cell-init",this);if(!this.column.visible){this.hide()}}},{key:"_generateContents",value:function _generateContents(){var _this3=this;var val;val=this.chain("cell-format",this,null,function(){return _this3.element.innerHTML=_this3.value});switch(_typeof(val)){case"object":if(val instanceof Node){while(this.element.firstChild){this.element.removeChild(this.element.firstChild)}this.element.appendChild(val)}else{this.element.innerHTML="";if(val!=null){console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",val)}}break;case"undefined":case"null":this.element.innerHTML="";break;default:this.element.innerHTML=val}}},{key:"cellRendered",value:function cellRendered(){this.dispatch("cell-rendered",this)}},{key:"_generateTooltip",value:function _generateTooltip(){var tooltip=this.column.tooltip;if(tooltip){if(tooltip===true){tooltip=this.value}else if(typeof tooltip=="function"){tooltip=tooltip(this.getComponent());if(tooltip===false){tooltip=""}}if(typeof tooltip==="undefined"){tooltip=""}this.element.setAttribute("title",tooltip)}else{this.element.setAttribute("title","")}}},{key:"getElement",value:function getElement(containerOnly){if(!this.loaded){this.loaded=true;if(!containerOnly){this.layoutElement()}}return this.element}},{key:"getValue",value:function getValue(){return this.value}},{key:"getOldValue",value:function getOldValue(){return this.oldValue}},{key:"setValue",value:function setValue(value,mutate){var changed=this.setValueProcessData(value,mutate);if(changed){this.dispatch("cell-value-updated",this);this.cellRendered();this.dispatchExternal("cellEdited",this.getComponent());if(this.subscribedExternal("dataChanged")){this.dispatchExternal("dataChanged",this.table.rowManager.getData())}}}},{key:"setValueProcessData",value:function setValueProcessData(value,mutate){var changed=false;if(this.value!=value){changed=true;if(mutate){value=this.chain("cell-value-changing",[this,value],null,value)}}this.setValueActual(value);if(changed){this.dispatch("cell-value-changed",this)}return changed}},{key:"setValueActual",value:function setValueActual(value){this.oldValue=this.value;this.value=value;this.dispatch("cell-value-save-before",this);this.column.setFieldValue(this.row.data,value);this.dispatch("cell-value-save-after",this);if(this.loaded){this.layoutElement()}}},{key:"layoutElement",value:function layoutElement(){this._generateContents();this._generateTooltip();this.dispatch("cell-layout",this)}},{key:"setWidth",value:function setWidth(){this.width=this.column.width;this.element.style.width=this.column.widthStyled}},{key:"clearWidth",value:function clearWidth(){this.width="";this.element.style.width=""}},{key:"getWidth",value:function getWidth(){return this.width||this.element.offsetWidth}},{key:"setMinWidth",value:function setMinWidth(){this.minWidth=this.column.minWidth;this.element.style.minWidth=this.column.minWidthStyled}},{key:"setMaxWidth",value:function setMaxWidth(){this.maxWidth=this.column.maxWidth;this.element.style.maxWidth=this.column.maxWidthStyled}},{key:"checkHeight",value:function checkHeight(){this.row.reinitializeHeight()}},{key:"clearHeight",value:function clearHeight(){this.element.style.height="";this.height=null}},{key:"setHeight",value:function setHeight(){this.height=this.row.height;this.element.style.height=this.row.heightStyled}},{key:"getHeight",value:function getHeight(){return this.height||this.element.offsetHeight}},{key:"show",value:function show(){this.element.style.display=this.column.vertAlign?"inline-flex":""}},{key:"hide",value:function hide(){this.element.style.display="none"}},{key:"delete",value:function _delete(){this.dispatch("cell-delete",this);if(!this.table.rowManager.redrawBlock&&this.element.parentNode){this.element.parentNode.removeChild(this.element)}this.element=false;this.column.deleteCell(this);this.row.deleteCell(this);this.calcs={}}},{key:"getIndex",value:function getIndex(){return this.row.getCellIndex(this)}},{key:"getComponent",value:function getComponent(){if(!this.component){this.component=new CellComponent(this)}return this.component}}]);return Cell}(CoreFeature);var Column$1=function(_CoreFeature){_inherits(Column,_CoreFeature);var _super=_createSuper(Column);function Column(def,parent){var _this;_classCallCheck(this,Column);_this=_super.call(this,parent.table);_this.definition=def;_this.parent=parent;_this.type="column";_this.columns=[];_this.cells=[];_this.element=_this.createElement();_this.contentElement=false;_this.titleHolderElement=false;_this.titleElement=false;_this.groupElement=_this.createGroupElement();_this.isGroup=false;_this.tooltip=false;_this.hozAlign="";_this.vertAlign="";_this.field="";_this.fieldStructure="";_this.getFieldValue="";_this.setFieldValue="";_this.titleFormatterRendered=false;_this.mapDefinitions();_this.setField(_this.definition.field);_this.modules={};_this.width=null;_this.widthStyled="";_this.maxWidth=null;_this.maxWidthStyled="";_this.minWidth=null;_this.minWidthStyled="";_this.widthFixed=false;_this.visible=true;_this.component=null;if(_this.definition.columns){_this.isGroup=true;_this.definition.columns.forEach(function(def,i){var newCol=new Column(def,_assertThisInitialized(_this));_this.attachColumn(newCol)});_this.checkColumnVisibility()}else{parent.registerColumnField(_assertThisInitialized(_this))}_this._initialize();_this.bindModuleColumns();return _this}_createClass(Column,[{key:"createElement",value:function createElement(){var el=document.createElement("div");el.classList.add("tabulator-col");el.setAttribute("role","columnheader");el.setAttribute("aria-sort","none");return el}},{key:"createGroupElement",value:function createGroupElement(){var el=document.createElement("div");el.classList.add("tabulator-col-group-cols");return el}},{key:"mapDefinitions",value:function mapDefinitions(){var defaults=this.table.options.columnDefaults;if(defaults){for(var key in defaults){if(typeof this.definition[key]==="undefined"){this.definition[key]=defaults[key]}}}this.definition=this.table.columnManager.optionsList.generate(Column.defaultOptionList,this.definition)}},{key:"checkDefinition",value:function checkDefinition(){var _this2=this;Object.keys(this.definition).forEach(function(key){if(Column.defaultOptionList.indexOf(key)===-1){console.warn("Invalid column definition option in '"+(_this2.field||_this2.definition.title)+"' column:",key)}})}},{key:"setField",value:function setField(field){this.field=field;this.fieldStructure=field?this.table.options.nestedFieldSeparator?field.split(this.table.options.nestedFieldSeparator):[field]:[];this.getFieldValue=this.fieldStructure.length>1?this._getNestedData:this._getFlatData;this.setFieldValue=this.fieldStructure.length>1?this._setNestedData:this._setFlatData}},{key:"registerColumnPosition",value:function registerColumnPosition(column){this.parent.registerColumnPosition(column)}},{key:"registerColumnField",value:function registerColumnField(column){this.parent.registerColumnField(column)}},{key:"reRegisterPosition",value:function reRegisterPosition(){if(this.isGroup){this.columns.forEach(function(column){column.reRegisterPosition()})}else{this.registerColumnPosition(this)}}},{key:"_mapDepricatedFunctionality",value:function _mapDepricatedFunctionality(){}},{key:"setTooltip",value:function setTooltip(){var _this3=this;var def=this.definition;var tooltip=def.headerTooltip;if(tooltip){if(tooltip===true){if(def.field){this.langBind("columns|"+def.field,function(value){_this3.element.setAttribute("title",value||def.title)})}else{this.element.setAttribute("title",def.title)}}else{if(typeof tooltip=="function"){tooltip=tooltip(this.getComponent());if(tooltip===false){tooltip=""}}this.element.setAttribute("title",tooltip)}}else{this.element.setAttribute("title","")}}},{key:"_initialize",value:function _initialize(){var _this4=this;var def=this.definition;while(this.element.firstChild){this.element.removeChild(this.element.firstChild)}if(def.headerVertical){this.element.classList.add("tabulator-col-vertical");if(def.headerVertical==="flip"){this.element.classList.add("tabulator-col-vertical-flip")}}this.contentElement=this._bindEvents();this.contentElement=this._buildColumnHeaderContent();this.element.appendChild(this.contentElement);if(this.isGroup){this._buildGroupHeader()}else{this._buildColumnHeader()}this.setTooltip();this.dispatch("column-init",this);this.element.addEventListener("mouseenter",function(e){_this4.setTooltip()})}},{key:"_bindEvents",value:function _bindEvents(){var _this5=this;var def=this.definition,dblTap,tapHold,tap;if(typeof def.headerClick=="function"){this.element.addEventListener("click",function(e){def.headerClick(e,_this5.getComponent())})}if(typeof def.headerDblClick=="function"){this.element.addEventListener("dblclick",function(e){def.headerDblClick(e,_this5.getComponent())})}if(typeof def.headerContext=="function"){this.element.addEventListener("contextmenu",function(e){def.headerContext(e,_this5.getComponent())})}if(typeof def.headerTap=="function"){tap=false;this.element.addEventListener("touchstart",function(e){tap=true},{passive:true});this.element.addEventListener("touchend",function(e){if(tap){def.headerTap(e,_this5.getComponent())}tap=false})}if(typeof def.headerDblTap=="function"){dblTap=null;this.element.addEventListener("touchend",function(e){if(dblTap){clearTimeout(dblTap);dblTap=null;def.headerDblTap(e,_this5.getComponent())}else{dblTap=setTimeout(function(){clearTimeout(dblTap);dblTap=null},300)}})}if(typeof def.headerTapHold=="function"){tapHold=null;this.element.addEventListener("touchstart",function(e){clearTimeout(tapHold);tapHold=setTimeout(function(){clearTimeout(tapHold);tapHold=null;tap=false;def.headerTapHold(e,this.getComponent())},1e3)},{passive:true});this.element.addEventListener("touchend",function(e){clearTimeout(tapHold);tapHold=null})}}},{key:"_buildColumnHeader",value:function _buildColumnHeader(){var _this6=this;var def=this.definition,table=this.table;this.dispatch("column-layout",this);if(typeof def.visible!="undefined"){if(def.visible){this.show(true)}else{this.hide(true)}}if(def.cssClass){var classeNames=def.cssClass.split(" ");classeNames.forEach(function(className){_this6.element.classList.add(className)})}if(def.field){this.element.setAttribute("tabulator-field",def.field)}this.setMinWidth(parseInt(def.minWidth));if(def.maxWidth){this.setMaxWidth(parseInt(def.maxWidth))}this.reinitializeWidth();this.tooltip=this.definition.tooltip;this.hozAlign=this.definition.hozAlign;this.vertAlign=this.definition.vertAlign;this.titleElement.style.textAlign=this.definition.headerHozAlign}},{key:"_buildColumnHeaderContent",value:function _buildColumnHeaderContent(){var def=this.definition,table=this.table;var contentElement=document.createElement("div");contentElement.classList.add("tabulator-col-content");this.titleHolderElement=document.createElement("div");this.titleHolderElement.classList.add("tabulator-col-title-holder");contentElement.appendChild(this.titleHolderElement);this.titleElement=this._buildColumnHeaderTitle();this.titleHolderElement.appendChild(this.titleElement);return contentElement}},{key:"_buildColumnHeaderTitle",value:function _buildColumnHeaderTitle(){var _this7=this;var def=this.definition;var titleHolderElement=document.createElement("div");titleHolderElement.classList.add("tabulator-col-title");if(def.editableTitle){var titleElement=document.createElement("input");titleElement.classList.add("tabulator-title-editor");titleElement.addEventListener("click",function(e){e.stopPropagation();titleElement.focus()});titleElement.addEventListener("change",function(){def.title=titleElement.value;_this7.dispatchExternal("columnTitleChanged",_this7.getComponent())});titleHolderElement.appendChild(titleElement);if(def.field){this.langBind("columns|"+def.field,function(text){titleElement.value=text||def.title||"&nbsp;"})}else{titleElement.value=def.title||"&nbsp;"}}else{if(def.field){this.langBind("columns|"+def.field,function(text){_this7._formatColumnHeaderTitle(titleHolderElement,text||def.title||"&nbsp;")})}else{this._formatColumnHeaderTitle(titleHolderElement,def.title||"&nbsp;")}}return titleHolderElement}},{key:"_formatColumnHeaderTitle",value:function _formatColumnHeaderTitle(el,title){var contents=this.chain("column-format",[this,title,el],null,function(){return title});switch(_typeof(contents)){case"object":if(contents instanceof Node){el.appendChild(contents)}else{el.innerHTML="";console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",contents)}break;case"undefined":case"null":el.innerHTML="";break;default:el.innerHTML=contents}}},{key:"_buildGroupHeader",value:function _buildGroupHeader(){var _this8=this;this.element.classList.add("tabulator-col-group");this.element.setAttribute("role","columngroup");this.element.setAttribute("aria-title",this.definition.title);if(this.definition.cssClass){var classeNames=this.definition.cssClass.split(" ");classeNames.forEach(function(className){_this8.element.classList.add(className)})}this.titleElement.style.textAlign=this.definition.headerHozAlign;this.element.appendChild(this.groupElement)}},{key:"_getFlatData",value:function _getFlatData(data){return data[this.field]}},{key:"_getNestedData",value:function _getNestedData(data){var dataObj=data,structure=this.fieldStructure,length=structure.length,output;for(var i=0;i<length;i++){dataObj=dataObj[structure[i]];output=dataObj;if(!dataObj){break}}return output}},{key:"_setFlatData",value:function _setFlatData(data,value){if(this.field){data[this.field]=value}}},{key:"_setNestedData",value:function _setNestedData(data,value){var dataObj=data,structure=this.fieldStructure,length=structure.length;for(var i=0;i<length;i++){if(i==length-1){dataObj[structure[i]]=value}else{if(!dataObj[structure[i]]){if(typeof value!=="undefined"){dataObj[structure[i]]={}}else{break}}dataObj=dataObj[structure[i]]}}}},{key:"attachColumn",value:function attachColumn(column){if(this.groupElement){this.columns.push(column);this.groupElement.appendChild(column.getElement())}else{console.warn("Column Warning - Column being attached to another column instead of column group")}}},{key:"verticalAlign",value:function verticalAlign(alignment,height){var parentHeight=this.parent.isGroup?this.parent.getGroupElement().clientHeight:height||this.parent.getHeadersElement().clientHeight;this.element.style.height=parentHeight+"px";if(this.isGroup){this.groupElement.style.minHeight=parentHeight-this.contentElement.offsetHeight+"px"}if(!this.isGroup&&alignment!=="top"){if(alignment==="bottom"){this.element.style.paddingTop=this.element.clientHeight-this.contentElement.offsetHeight+"px"}else{this.element.style.paddingTop=(this.element.clientHeight-this.contentElement.offsetHeight)/2+"px"}}this.columns.forEach(function(column){column.verticalAlign(alignment)})}},{key:"clearVerticalAlign",value:function clearVerticalAlign(){this.element.style.paddingTop="";this.element.style.height="";this.element.style.minHeight="";this.groupElement.style.minHeight="";this.columns.forEach(function(column){column.clearVerticalAlign()})}},{key:"bindModuleColumns",value:function bindModuleColumns(){if(this.definition.formatter=="rownum"){this.table.rowManager.rowNumColumn=this}}},{key:"getElement",value:function getElement(){return this.element}},{key:"getGroupElement",value:function getGroupElement(){return this.groupElement}},{key:"getField",value:function getField(){return this.field}},{key:"getFirstColumn",value:function getFirstColumn(){if(!this.isGroup){return this}else{if(this.columns.length){return this.columns[0].getFirstColumn()}else{return false}}}},{key:"getLastColumn",value:function getLastColumn(){if(!this.isGroup){return this}else{if(this.columns.length){return this.columns[this.columns.length-1].getLastColumn()}else{return false}}}},{key:"getColumns",value:function getColumns(){return this.columns}},{key:"getCells",value:function getCells(){return this.cells}},{key:"getTopColumn",value:function getTopColumn(){if(this.parent.isGroup){return this.parent.getTopColumn()}else{return this}}},{key:"getDefinition",value:function getDefinition(updateBranches){var colDefs=[];if(this.isGroup&&updateBranches){this.columns.forEach(function(column){colDefs.push(column.getDefinition(true))});this.definition.columns=colDefs}return this.definition}},{key:"checkColumnVisibility",value:function checkColumnVisibility(){var visible=false;this.columns.forEach(function(column){if(column.visible){visible=true}});if(visible){this.show();this.dispatchExternal("columnVisibilityChanged",this.getComponent(),false)}else{this.hide()}}},{key:"show",value:function show(silent,responsiveToggle){if(!this.visible){this.visible=true;this.element.style.display="";if(this.parent.isGroup){this.parent.checkColumnVisibility()}this.cells.forEach(function(cell){cell.show()});if(!this.isGroup&&this.width===null){this.reinitializeWidth()}this.table.columnManager.verticalAlignHeaders();this.dispatch("column-show",this,responsiveToggle);if(!silent){this.dispatchExternal("columnVisibilityChanged",this.getComponent(),true)}if(this.parent.isGroup){this.parent.matchChildWidths()}if(!this.silent){this.table.columnManager.renderer.rerenderColumns()}}}},{key:"hide",value:function hide(silent,responsiveToggle){if(this.visible){this.visible=false;this.element.style.display="none";this.table.columnManager.verticalAlignHeaders();if(this.parent.isGroup){this.parent.checkColumnVisibility()}this.cells.forEach(function(cell){cell.hide()});this.dispatch("column-hide",this,responsiveToggle);if(!silent){this.dispatchExternal("columnVisibilityChanged",this.getComponent(),false)}if(this.parent.isGroup){this.parent.matchChildWidths()}if(!this.silent){this.table.columnManager.renderer.rerenderColumns()}}}},{key:"matchChildWidths",value:function matchChildWidths(){var childWidth=0;if(this.contentElement&&this.columns.length){this.columns.forEach(function(column){if(column.visible){childWidth+=column.getWidth()}});this.contentElement.style.maxWidth=childWidth-1+"px";if(this.parent.isGroup){this.parent.matchChildWidths()}}}},{key:"removeChild",value:function removeChild(child){var index=this.columns.indexOf(child);if(index>-1){this.columns.splice(index,1)}if(!this.columns.length){this["delete"]()}}},{key:"setWidth",value:function setWidth(width){this.widthFixed=true;this.setWidthActual(width)}},{key:"setWidthActual",value:function setWidthActual(width){if(isNaN(width)){width=Math.floor(this.table.element.clientWidth/100*parseInt(width))}width=Math.max(this.minWidth,width);if(this.maxWidth){width=Math.min(this.maxWidth,width)}this.width=width;this.widthStyled=width?width+"px":"";this.element.style.width=this.widthStyled;if(!this.isGroup){this.cells.forEach(function(cell){cell.setWidth()})}if(this.parent.isGroup){this.parent.matchChildWidths()}this.dispatch("column-width",this)}},{key:"checkCellHeights",value:function checkCellHeights(){var rows=[];this.cells.forEach(function(cell){if(cell.row.heightInitialized){if(cell.row.getElement().offsetParent!==null){rows.push(cell.row);cell.row.clearCellHeight()}else{cell.row.heightInitialized=false}}});rows.forEach(function(row){row.calcHeight()});rows.forEach(function(row){row.setCellHeight()})}},{key:"getWidth",value:function getWidth(){var width=0;if(this.isGroup){this.columns.forEach(function(column){if(column.visible){width+=column.getWidth()}})}else{width=this.width}return width}},{key:"getHeight",value:function getHeight(){return this.element.offsetHeight}},{key:"setMinWidth",value:function setMinWidth(minWidth){this.minWidth=minWidth;this.minWidthStyled=minWidth?minWidth+"px":"";this.element.style.minWidth=this.minWidthStyled;this.cells.forEach(function(cell){cell.setMinWidth()})}},{key:"setMaxWidth",value:function setMaxWidth(maxWidth){this.maxWidth=maxWidth;this.maxWidthStyled=maxWidth?maxWidth+"px":"";this.element.style.maxWidth=this.maxWidthStyled;this.cells.forEach(function(cell){cell.setMaxWidth()})}},{key:"delete",value:function _delete(){var _this9=this;return new Promise(function(resolve,reject){if(_this9.isGroup){_this9.columns.forEach(function(column){column["delete"]()})}_this9.dispatch("column-delete",_this9);var cellCount=_this9.cells.length;for(var i=0;i<cellCount;i++){_this9.cells[0]["delete"]()}if(_this9.element.parentNode){_this9.element.parentNode.removeChild(_this9.element)}_this9.element=false;_this9.contentElement=false;_this9.titleElement=false;_this9.groupElement=false;if(_this9.parent.isGroup){_this9.parent.removeChild(_this9)}_this9.table.columnManager.deregisterColumn(_this9);_this9.table.columnManager.renderer.rerenderColumns(true);resolve()})}},{key:"columnRendered",value:function columnRendered(){if(this.titleFormatterRendered){this.titleFormatterRendered()}}},{key:"generateCell",value:function generateCell(row){var cell=new Cell(this,row);this.cells.push(cell);return cell}},{key:"nextColumn",value:function nextColumn(){var index=this.table.columnManager.findColumnIndex(this);return index>-1?this._nextVisibleColumn(index+1):false}},{key:"_nextVisibleColumn",value:function _nextVisibleColumn(index){var column=this.table.columnManager.getColumnByIndex(index);return!column||column.visible?column:this._nextVisibleColumn(index+1)}},{key:"prevColumn",value:function prevColumn(){var index=this.table.columnManager.findColumnIndex(this);return index>-1?this._prevVisibleColumn(index-1):false}},{key:"_prevVisibleColumn",value:function _prevVisibleColumn(index){var column=this.table.columnManager.getColumnByIndex(index);return!column||column.visible?column:this._prevVisibleColumn(index-1)}},{key:"reinitializeWidth",value:function reinitializeWidth(force){this.widthFixed=false;if(typeof this.definition.width!=="undefined"&&!force){this.setWidth(this.definition.width)}this.dispatch("column-width-fit-before",this);this.fitToData();this.dispatch("column-width-fit-after",this)}},{key:"fitToData",value:function fitToData(){if(this.isGroup){return}if(!this.widthFixed){this.element.style.width="";this.cells.forEach(function(cell){cell.clearWidth()})}var maxWidth=this.element.offsetWidth;if(!this.width||!this.widthFixed){this.cells.forEach(function(cell){var width=cell.getWidth();if(width>maxWidth){maxWidth=width}});if(maxWidth){this.setWidthActual(maxWidth+1)}}}},{key:"updateDefinition",value:function updateDefinition(updates){var _this10=this;var definition;if(!this.isGroup){if(!this.parent.isGroup){definition=Object.assign({},this.getDefinition());definition=Object.assign(definition,updates);return this.table.columnManager.addColumn(definition,false,this).then(function(column){if(definition.field==_this10.field){_this10.field=false}return _this10["delete"]().then(function(){return column.getComponent()})})}else{console.error("Column Update Error - The updateDefinition function is only available on ungrouped columns");return Promise.reject("Column Update Error - The updateDefinition function is only available on columns, not column groups")}}else{console.error("Column Update Error - The updateDefinition function is only available on ungrouped columns");return Promise.reject("Column Update Error - The updateDefinition function is only available on columns, not column groups")}}},{key:"deleteCell",value:function deleteCell(cell){var index=this.cells.indexOf(cell);if(index>-1){this.cells.splice(index,1)}}},{key:"getComponent",value:function getComponent(){if(!this.component){this.component=new ColumnComponent(this)}return this.component}}]);return Column}(CoreFeature);Column$1.defaultOptionList=defaultColumnOptions;var Helpers=function(){function Helpers(){_classCallCheck(this,Helpers)}_createClass(Helpers,null,[{key:"elVisible",value:function elVisible(el){return!(el.offsetWidth<=0&&el.offsetHeight<=0)}},{key:"elOffset",value:function elOffset(el){var box=el.getBoundingClientRect();return{top:box.top+window.pageYOffset-document.documentElement.clientTop,left:box.left+window.pageXOffset-document.documentElement.clientLeft}}},{key:"deepClone",value:function deepClone(obj,clone){var _this=this;var list=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var objectProto={}.__proto__,arrayProto=[].__proto__;if(!clone){clone=Object.assign(Array.isArray(obj)?[]:{},obj)}var _loop=function _loop(){var subject=obj[i],match=void 0,copy=void 0;if(subject!=null&&_typeof(subject)==="object"&&(subject.__proto__===objectProto||subject.__proto__===arrayProto)){match=list.findIndex(function(item){return item.subject===subject});if(match>-1){clone[i]=list[match].copy}else{copy=Object.assign(Array.isArray(subject)?[]:{},subject);list.unshift({subject:subject,copy:copy});clone[i]=_this.deepClone(subject,copy,list)}}};for(var i in obj){_loop()}return clone}}]);return Helpers}();var OptionsList=function(){function OptionsList(table,msgType){var defaults=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,OptionsList);this.table=table;this.msgType=msgType;this.registeredDefaults=Object.assign({},defaults)}_createClass(OptionsList,[{key:"register",value:function register(option,value){this.registeredDefaults[option]=value}},{key:"generate",value:function generate(defaultOptions){var userOptions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var output=Object.assign({},this.registeredDefaults);Object.assign(output,defaultOptions);if(userOptions.debugInvalidOptions!==false||this.table.options.debugInvalidOptions){for(var key in userOptions){if(!output.hasOwnProperty(key)){console.warn("Invalid "+this.msgType+" option:",key)}}}for(var key in output){if(key in userOptions){output[key]=userOptions[key]}else{if(Array.isArray(output[key])){output[key]=Object.assign([],output[key])}else if(_typeof(output[key])==="object"&&output[key]!==null){output[key]=Object.assign({},output[key])}else if(typeof output[key]==="undefined"){delete output[key]}}}return output}}]);return OptionsList}();var Renderer=function(_CoreFeature){_inherits(Renderer,_CoreFeature);var _super=_createSuper(Renderer);function Renderer(table){var _this;_classCallCheck(this,Renderer);_this=_super.call(this,table);_this.elementVertical=table.rowManager.element;_this.elementHorizontal=table.columnManager.element;_this.tableElement=table.rowManager.tableElement;_this.verticalFillMode="fit";return _this}_createClass(Renderer,[{key:"initialize",value:function initialize(){}},{key:"clearRows",value:function clearRows(){}},{key:"clearColumns",value:function clearColumns(){}},{key:"reinitializeColumnWidths",value:function reinitializeColumnWidths(columns){}},{key:"renderRows",value:function renderRows(){}},{key:"renderColumns",value:function renderColumns(){}},{key:"rerenderRows",value:function rerenderRows(callback){if(callback){callback()}}},{key:"rerenderColumns",value:function rerenderColumns(update,blockRedraw){}},{key:"renderRowCells",value:function renderRowCells(row){}},{key:"rerenderRowCells",value:function rerenderRowCells(row,force){}},{key:"scrollColumns",value:function scrollColumns(left,dir){}},{key:"scrollRows",value:function scrollRows(top,dir){}},{key:"resize",value:function resize(){}},{key:"scrollToRow",value:function scrollToRow(row){}},{key:"scrollToRowNearestTop",value:function scrollToRowNearestTop(row){}},{key:"visibleRows",value:function visibleRows(includingBuffer){return[]}},{key:"rows",value:function rows(){return this.table.rowManager.getDisplayRows()}},{key:"styleRow",value:function styleRow(row,index){var rowEl=row.getElement();if(index%2){rowEl.classList.add("tabulator-row-even");rowEl.classList.remove("tabulator-row-odd")}else{rowEl.classList.add("tabulator-row-odd");rowEl.classList.remove("tabulator-row-even")}}},{key:"clear",value:function clear(){this.clearRows();this.clearColumns()}},{key:"render",value:function render(){this.renderRows();this.renderColumns()}},{key:"rerender",value:function rerender(callback){this.rerenderRows();this.rerenderColumns()}},{key:"scrollToRowPosition",value:function scrollToRowPosition(row,position,ifVisible){var _this2=this;var rowIndex=this.rows().indexOf(row),rowEl=row.getElement(),offset=0;return new Promise(function(resolve,reject){if(rowIndex>-1){if(typeof ifVisible==="undefined"){ifVisible=_this2.table.options.scrollToRowIfVisible}if(!ifVisible){if(Helpers.elVisible(rowEl)){offset=Helpers.elOffset(rowEl).top-Helpers.elOffset(_this2.elementVertical).top;if(offset>0&&offset<_this2.elementVertical.clientHeight-rowEl.offsetHeight){resolve();return false}}}if(typeof position==="undefined"){position=_this2.table.options.scrollToRowPosition}if(position==="nearest"){position=_this2.scrollToRowNearestTop(row)?"top":"bottom"}_this2.scrollToRow(row);switch(position){case"middle":case"center":if(_this2.elementVertical.scrollHeight-_this2.elementVertical.scrollTop==_this2.elementVertical.clientHeight){_this2.elementVertical.scrollTop=_this2.elementVertical.scrollTop+(rowEl.offsetTop-_this2.elementVertical.scrollTop)-(_this2.elementVertical.scrollHeight-rowEl.offsetTop)/2}else{_this2.elementVertical.scrollTop=_this2.elementVertical.scrollTop-_this2.elementVertical.clientHeight/2}break;case"bottom":if(_this2.elementVertical.scrollHeight-_this2.elementVertical.scrollTop==_this2.elementVertical.clientHeight){_this2.elementVertical.scrollTop=_this2.elementVertical.scrollTop-(_this2.elementVertical.scrollHeight-rowEl.offsetTop)+rowEl.offsetHeight}else{_this2.elementVertical.scrollTop=_this2.elementVertical.scrollTop-_this2.elementVertical.clientHeight+rowEl.offsetHeight}break}resolve()}else{console.warn("Scroll Error - Row not visible");reject("Scroll Error - Row not visible")}})}}]);return Renderer}(CoreFeature);var BaiscHorizontal=function(_Renderer){_inherits(BaiscHorizontal,_Renderer);var _super=_createSuper(BaiscHorizontal);function BaiscHorizontal(table){_classCallCheck(this,BaiscHorizontal);return _super.call(this,table)}_createClass(BaiscHorizontal,[{key:"renderRowCells",value:function renderRowCells(row){row.cells.forEach(function(cell){row.element.appendChild(cell.getElement());cell.cellRendered()})}},{key:"reinitializeColumnWidths",value:function reinitializeColumnWidths(columns){columns.forEach(function(column){column.reinitializeWidth()})}}]);return BaiscHorizontal}(Renderer);var VirtualDomHorizontal=function(_Renderer){_inherits(VirtualDomHorizontal,_Renderer);var _super=_createSuper(VirtualDomHorizontal);function VirtualDomHorizontal(table){var _this;_classCallCheck(this,VirtualDomHorizontal);_this=_super.call(this,table);_this.leftCol=0;_this.rightCol=0;_this.scrollLeft=0;_this.vDomScrollPosLeft=0;_this.vDomScrollPosRight=0;_this.vDomPadLeft=0;_this.vDomPadRight=0;_this.fitDataColAvg=0;_this.window=200;_this.initialized=false;_this.columns=[];return _this}_createClass(VirtualDomHorizontal,[{key:"initialize",value:function initialize(){this.compatabilityCheck()}},{key:"compatabilityCheck",value:function compatabilityCheck(){var columns=this.options("columns"),frozen=false,ok=true;if(this.options("layout")=="fitDataTable"){console.warn("Horizontal Virtual DOM is not compatible with fitDataTable layout mode");ok=false}if(this.options("responsiveLayout")){console.warn("Horizontal Virtual DOM is not compatible with responsive columns");ok=false}if(this.options("rtl")){console.warn("Horizontal Virtual DOM is not currently compatible with RTL text direction");ok=false}if(columns){frozen=columns.find(function(col){return col.frozen});if(frozen){console.warn("Horizontal Virtual DOM is not compatible with frozen columns");ok=false}}return ok}},{key:"renderColumns",value:function renderColumns(row,force){this.dataChange()}},{key:"scrollColumns",value:function scrollColumns(left,dir){if(this.scrollLeft!=left){this.scrollLeft=left;this.scroll(left-(this.vDomScrollPosLeft+this.window))}}},{key:"rerenderColumns",value:function rerenderColumns(update,blockRedraw){var _this2=this;var old={cols:this.columns,leftCol:this.leftCol,rightCol:this.rightCol};if(update&&!this.initialized){return}this.clear();this.scrollLeft=this.elementVertical.scrollLeft;this.vDomScrollPosLeft=this.scrollLeft-this.window;this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window;var colPos=0;this.table.columnManager.columnsByIndex.forEach(function(column){var config={};if(column.visible){var width=column.getWidth();config.leftPos=colPos;config.rightPos=colPos+width;config.width=width;if(_this2.options("layout")==="fitData"){config.fitDataCheck=true}if(colPos+width>_this2.vDomScrollPosLeft&&colPos<_this2.vDomScrollPosRight){if(_this2.leftCol==-1){_this2.leftCol=_this2.columns.length;_this2.vDomPadLeft=colPos}_this2.rightCol=_this2.columns.length}else{if(_this2.leftCol!==-1){_this2.vDomPadRight+=width}}_this2.columns.push(column);column.modules.vdomHoz=config;colPos+=width}});this.tableElement.style.paddingLeft=this.vDomPadLeft+"px";this.tableElement.style.paddingRight=this.vDomPadRight+"px";this.initialized=true;if(!blockRedraw){if(!update||this.reinitChanged(old)){this.reinitializeRows()}}this.elementVertical.scrollLeft=this.scrollLeft}},{key:"renderRowCells",value:function renderRowCells(row){if(this.initialized){this.initializeRow(row)}else{row.cells.forEach(function(cell){row.element.appendChild(cell.getElement());cell.cellRendered()})}}},{key:"rerenderRowCells",value:function rerenderRowCells(row,force){this.reinitializeRow(row,force)}},{key:"reinitializeColumnWidths",value:function reinitializeColumnWidths(columns){for(var i=this.leftCol;i<=this.rightCol;i++){this.columns[i].reinitializeWidth()}}},{key:"deinitialize",value:function deinitialize(){this.initialized=false}},{key:"clear",value:function clear(){this.columns=[];this.leftCol=-1;this.rightCol=0;this.vDomScrollPosLeft=0;this.vDomScrollPosRight=0;this.vDomPadLeft=0;this.vDomPadRight=0}},{key:"dataChange",value:function dataChange(){var _this3=this;var change=false,collsWidth=0,colEnd=0,row,rowEl;if(this.options("layout")==="fitData"){this.table.columnManager.columnsByIndex.forEach(function(column){if(!column.definition.width&&column.visible){change=true}});if(change){if(change&&this.table.rowManager.getDisplayRows().length){this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window;var row=this.chain("rows-sample",[1],[],function(){return _this3.table.rowManager.getDisplayRows()[0]})[0];if(row){rowEl=row.getElement();row.generateCells();this.tableElement.appendChild(rowEl);for(var colEnd=0;colEnd<row.cells.length;colEnd++){var cell=row.cells[colEnd];rowEl.appendChild(cell.getElement());cell.column.reinitializeWidth();collsWidth+=cell.column.getWidth();if(collsWidth>this.vDomScrollPosRight){break}}rowEl.parentNode.removeChild(rowEl);this.fitDataColAvg=Math.floor(collsWidth/(colEnd+1));for(colEnd;colEnd<this.table.columnManager.columnsByIndex.length;colEnd++){this.table.columnManager.columnsByIndex[colEnd].setWidth(this.fitDataColAvg)}this.rerenderColumns(false,true)}}}}else{if(this.options("layout")==="fitColumns"){this.layoutRefresh();this.rerenderColumns(false,true)}}}},{key:"reinitChanged",value:function reinitChanged(old){var _this4=this;var match=true;if(old.cols.length!==this.columns.length||old.leftCol!==this.leftCol||old.rightCol!==this.rightCol){return true}old.cols.forEach(function(col,i){if(col!==_this4.columns[i]){match=false}});return!match}},{key:"reinitializeRows",value:function reinitializeRows(){var _this5=this;var rows=this.table.rowManager.getVisibleRows();rows.forEach(function(row){_this5.reinitializeRow(row,true)})}},{key:"scroll",value:function scroll(diff){this.vDomScrollPosLeft+=diff;this.vDomScrollPosRight+=diff;if(diff>this.elementVertical.clientWidth*.8){this.rerenderColumns()}else{if(diff>0){this.addColRight();this.removeColLeft()}else{this.addColLeft();this.removeColRight()}}}},{key:"colPositionAdjust",value:function colPositionAdjust(start,end,diff){for(var i=start;i<end;i++){var column=this.columns[i];column.modules.vdomHoz.leftPos+=diff;column.modules.vdomHoz.rightPos+=diff}}},{key:"addColRight",value:function addColRight(){var column=this.columns[this.rightCol+1],rows;if(column&&column.modules.vdomHoz.leftPos<=this.vDomScrollPosRight){rows=this.table.rowManager.getVisibleRows();rows.forEach(function(row){if(row.type!=="group"){var cell=row.getCell(column);row.getElement().appendChild(cell.getElement());cell.cellRendered()}});this.fitDataColActualWidthCheck(column);this.rightCol++;if(this.rightCol>=this.columns.length-1){this.vDomPadRight=0}else{this.vDomPadRight-=column.getWidth()}this.tableElement.style.paddingRight=this.vDomPadRight+"px";this.addColRight()}}},{key:"addColLeft",value:function addColLeft(){var column=this.columns[this.leftCol-1],rows;if(column&&column.modules.vdomHoz.rightPos>=this.vDomScrollPosLeft){var rows=this.table.rowManager.getVisibleRows();rows.forEach(function(row){if(row.type!=="group"){var cell=row.getCell(column);row.getElement().prepend(cell.getElement());cell.cellRendered()}});this.fitDataColActualWidthCheck(column);if(!this.leftCol){this.vDomPadLeft=0}else{this.vDomPadLeft-=column.getWidth()}this.tableElement.style.paddingLeft=this.vDomPadLeft+"px";this.leftCol--;this.addColLeft()}}},{key:"removeColRight",value:function removeColRight(column){var column=this.columns[this.rightCol],rows;if(column&&column.modules.vdomHoz.leftPos>this.vDomScrollPosRight){rows=this.table.rowManager.getVisibleRows();column.modules.vdomHoz.visible=false;rows.forEach(function(row){if(row.type!=="group"){var cell=row.getCell(column);row.getElement().removeChild(cell.getElement())}});this.vDomPadRight+=column.getWidth();this.tableElement.style.paddingRight=this.vDomPadRight+"px";this.rightCol--;this.removeColRight()}}},{key:"removeColLeft",value:function removeColLeft(){var column=this.columns[this.leftCol],rows;if(column&&column.modules.vdomHoz.rightPos<this.vDomScrollPosLeft){rows=this.table.rowManager.getVisibleRows();rows.forEach(function(row){var cell,el;if(row.type!=="group"){cell=row.getCell(column);if(cell){el=cell.getElement();if(el.parentNode){row.getElement().removeChild(el)}}}});this.vDomPadLeft+=column.getWidth();this.tableElement.style.paddingLeft=this.vDomPadLeft+"px";this.leftCol++;this.removeColLeft()}}},{key:"fitDataColActualWidthCheck",value:function fitDataColActualWidthCheck(column){var newWidth,widthDiff;if(column.modules.vdomHoz.fitDataCheck){column.reinitializeWidth();newWidth=column.getWidth();widthDiff=newWidth-column.modules.vdomHoz.width;if(widthDiff){column.modules.vdomHoz.rightPos+=widthDiff;column.modules.vdomHoz.width=newWidth;this.colPositionAdjust(this.rightCol+2,this.columns.length,widthDiff)}column.modules.vdomHoz.fitDataCheck=false}}},{key:"initializeRow",value:function initializeRow(row){if(row.type!=="group"){row.modules.vdomHoz={leftCol:this.leftCol,rightCol:this.rightCol};for(var i=this.leftCol;i<=this.rightCol;i++){var column=this.columns[i];if(column&&column.visible){var cell=row.getCell(column);row.getElement().appendChild(cell.getElement());cell.cellRendered()}}}}},{key:"reinitializeRow",value:function reinitializeRow(row,force){if(row.type!=="group"){if(force||!row.modules.vdomHoz||row.modules.vdomHoz.leftCol!==this.leftCol||row.modules.vdomHoz.rightCol!==this.rightCol){var rowEl=row.getElement();while(rowEl.firstChild){rowEl.removeChild(rowEl.firstChild)}this.initializeRow(row)}}}}]);return VirtualDomHorizontal}(Renderer);var ColumnManager=function(_CoreFeature){_inherits(ColumnManager,_CoreFeature);var _super=_createSuper(ColumnManager);function ColumnManager(table){var _this;_classCallCheck(this,ColumnManager);_this=_super.call(this,table);_this.blockHozScrollEvent=false;_this.headersElement=null;_this.element=null;_this.columns=[];_this.columnsByIndex=[];_this.columnsByField={};_this.scrollLeft=0;_this.optionsList=new OptionsList(_this.table,"column definition",defaultColumnOptions);_this.renderer=null;return _this}_createClass(ColumnManager,[{key:"initialize",value:function initialize(){this.initializeRenderer();this.headersElement=this.createHeadersElement();this.element=this.createHeaderElement();this.element.insertBefore(this.headersElement,this.element.firstChild);this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this))}},{key:"initializeRenderer",value:function initializeRenderer(){var renderClass;var renderers={virtual:VirtualDomHorizontal,basic:BaiscHorizontal};if(typeof this.table.options.renderHorizontal==="string"){renderClass=renderers[this.table.options.renderHorizontal]}else{renderClass=this.table.options.renderHorizontal}if(renderClass){this.renderer=new renderClass(this.table,this.element,this.tableElement);this.renderer.initialize()}else{console.error("Unable to find matching renderer:",table.options.renderHorizontal)}}},{key:"createHeadersElement",value:function createHeadersElement(){var el=document.createElement("div");el.classList.add("tabulator-headers");el.setAttribute("role","row");return el}},{key:"createHeaderElement",value:function createHeaderElement(){var el=document.createElement("div");el.classList.add("tabulator-header");el.setAttribute("role","rowgroup");if(!this.table.options.headerVisible){el.classList.add("tabulator-header-hidden")}return el}},{key:"getElement",value:function getElement(){return this.element}},{key:"getHeadersElement",value:function getHeadersElement(){return this.headersElement}},{key:"scrollHorizontal",value:function scrollHorizontal(left){var hozAdjust=0,scrollWidth=this.element.scrollWidth-this.table.element.clientWidth;this.element.scrollLeft=left;if(left>scrollWidth){hozAdjust=left-scrollWidth;this.element.style.marginLeft=-hozAdjust+"px"}else{this.element.style.marginLeft=0}this.scrollLeft=left;this.renderer.scrollColumns(left)}},{key:"generateColumnsFromRowData",value:function generateColumnsFromRowData(data){var cols=[],definitions=this.table.options.autoColumnsDefinitions,row,sorter;if(data&&data.length){row=data[0];for(var key in row){var col={field:key,title:key};var value=row[key];switch(_typeof(value)){case"undefined":sorter="string";break;case"boolean":sorter="boolean";break;case"object":if(Array.isArray(value)){sorter="array"}else{sorter="string"}break;default:if(!isNaN(value)&&value!==""){sorter="number"}else{if(value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)){sorter="alphanum"}else{sorter="string"}}break}col.sorter=sorter;cols.push(col)}if(definitions){switch(_typeof(definitions)){case"function":this.table.options.columns=definitions.call(this.table,cols);break;case"object":if(Array.isArray(definitions)){cols.forEach(function(col){var match=definitions.find(function(def){return def.field===col.field});if(match){Object.assign(col,match)}})}else{cols.forEach(function(col){if(definitions[col.field]){Object.assign(col,definitions[col.field])}})}this.table.options.columns=cols;break}}else{this.table.options.columns=cols}this.setColumns(this.table.options.columns)}}},{key:"setColumns",value:function setColumns(cols,row){var _this2=this;while(this.headersElement.firstChild){this.headersElement.removeChild(this.headersElement.firstChild)}this.columns=[];this.columnsByIndex=[];this.columnsByField={};this.dispatch("columns-loading");cols.forEach(function(def,i){_this2._addColumn(def)});this._reIndexColumns();this.dispatch("columns-loaded");this.renderer.rerenderColumns(false,true);this.redraw(true)}},{key:"_addColumn",value:function _addColumn(definition,before,nextToColumn){var column=new Column$1(definition,this),colEl=column.getElement(),index=nextToColumn?this.findColumnIndex(nextToColumn):nextToColumn;if(nextToColumn&&index>-1){var topColumn=nextToColumn.getTopColumn();var parentIndex=this.columns.indexOf(topColumn);var nextEl=topColumn.getElement();if(before){this.columns.splice(parentIndex,0,column);nextEl.parentNode.insertBefore(colEl,nextEl)}else{this.columns.splice(parentIndex+1,0,column);nextEl.parentNode.insertBefore(colEl,nextEl.nextSibling)}}else{if(before){this.columns.unshift(column);this.headersElement.insertBefore(column.getElement(),this.headersElement.firstChild)}else{this.columns.push(column);this.headersElement.appendChild(column.getElement())}}column.columnRendered();return column}},{key:"registerColumnField",value:function registerColumnField(col){if(col.definition.field){this.columnsByField[col.definition.field]=col}}},{key:"registerColumnPosition",value:function registerColumnPosition(col){this.columnsByIndex.push(col)}},{key:"_reIndexColumns",value:function _reIndexColumns(){this.columnsByIndex=[];this.columns.forEach(function(column){column.reRegisterPosition()})}},{key:"verticalAlignHeaders",value:function verticalAlignHeaders(){var _this3=this;var minHeight=0;this.columns.forEach(function(column){var height;column.clearVerticalAlign();height=column.getHeight();if(height>minHeight){minHeight=height}});this.columns.forEach(function(column){column.verticalAlign(_this3.table.options.columnHeaderVertAlign,minHeight)});this.table.rowManager.adjustTableSize()}},{key:"findColumn",value:function findColumn(subject){if(_typeof(subject)=="object"){if(subject instanceof Column$1){return subject}else if(subject instanceof ColumnComponent){return subject._getSelf()||false}else if(typeof HTMLElement!=="undefined"&&subject instanceof HTMLElement){var match=this.columns.find(function(column){return column.element===subject});return match||false}}else{return this.columnsByField[subject]||false}return false}},{key:"getColumnByField",value:function getColumnByField(field){return this.columnsByField[field]}},{key:"getColumnsByFieldRoot",value:function getColumnsByFieldRoot(root){var _this4=this;var matches=[];Object.keys(this.columnsByField).forEach(function(field){var fieldRoot=field.split(".")[0];if(fieldRoot===root){matches.push(_this4.columnsByField[field])}});return matches}},{key:"getColumnByIndex",value:function getColumnByIndex(index){return this.columnsByIndex[index]}},{key:"getFirstVisibleColumn",value:function getFirstVisibleColumn(index){var index=this.columnsByIndex.findIndex(function(col){return col.visible});return index>-1?this.columnsByIndex[index]:false}},{key:"getColumns",value:function getColumns(){return this.columns}},{key:"findColumnIndex",value:function findColumnIndex(column){return this.columnsByIndex.findIndex(function(col){return column===col})}},{key:"getRealColumns",value:function getRealColumns(){return this.columnsByIndex}},{key:"traverse",value:function traverse(callback){this.columnsByIndex.forEach(function(column,i){callback(column,i)})}},{key:"getDefinitions",value:function getDefinitions(active){var output=[];this.columnsByIndex.forEach(function(column){if(!active||active&&column.visible){output.push(column.getDefinition())}});return output}},{key:"getDefinitionTree",value:function getDefinitionTree(){var output=[];this.columns.forEach(function(column){output.push(column.getDefinition(true))});return output}},{key:"getComponents",value:function getComponents(structured){var output=[],columns=structured?this.columns:this.columnsByIndex;columns.forEach(function(column){output.push(column.getComponent())});return output}},{key:"getWidth",value:function getWidth(){var width=0;this.columnsByIndex.forEach(function(column){if(column.visible){width+=column.getWidth()}});return width}},{key:"moveColumn",value:function moveColumn(from,to,after){this.moveColumnActual(from,to,after);to.element.parentNode.insertBefore(from.element,to.element);if(after){to.element.parentNode.insertBefore(to.element,from.element)}this.verticalAlignHeaders();this.table.rowManager.reinitialize()}},{key:"moveColumnActual",value:function moveColumnActual(from,to,after){if(from.parent.isGroup){this._moveColumnInArray(from.parent.columns,from,to,after)}else{this._moveColumnInArray(this.columns,from,to,after)}this._moveColumnInArray(this.columnsByIndex,from,to,after,true);this.renderer.rerenderColumns(true);this.dispatch("column-moved",from,to,after);if(this.subscribedExternal("columnMoved")){this.dispatchExternal("columnMoved",from.getComponent(),this.table.columnManager.getComponents())}}},{key:"_moveColumnInArray",value:function _moveColumnInArray(columns,from,to,after,updateRows){var fromIndex=columns.indexOf(from),toIndex,rows=[];if(fromIndex>-1){columns.splice(fromIndex,1);toIndex=columns.indexOf(to);if(toIndex>-1){if(after){toIndex=toIndex+1}}else{toIndex=fromIndex}columns.splice(toIndex,0,from);if(updateRows){rows=this.chain("column-moving-rows",[from,to,after],null,[])||[];rows=rows.concat(this.table.rowManager.rows);rows.forEach(function(row){if(row.cells.length){var cell=row.cells.splice(fromIndex,1)[0];row.cells.splice(toIndex,0,cell)}})}}}},{key:"scrollToColumn",value:function scrollToColumn(column,position,ifVisible){var _this5=this;var left=0,offset=0,adjust=0,colEl=column.getElement();return new Promise(function(resolve,reject){if(typeof position==="undefined"){position=_this5.table.options.scrollToColumnPosition}if(typeof ifVisible==="undefined"){ifVisible=_this5.table.options.scrollToColumnIfVisible}if(column.visible){switch(position){case"middle":case"center":adjust=-_this5.element.clientWidth/2;break;case"right":adjust=colEl.clientWidth-_this5.headersElement.clientWidth;break}if(!ifVisible){offset=colEl.offsetLeft;if(offset>0&&offset+colEl.offsetWidth<_this5.element.clientWidth){return false}}left=colEl.offsetLeft+adjust;left=Math.max(Math.min(left,_this5.table.rowManager.element.scrollWidth-_this5.table.rowManager.element.clientWidth),0);_this5.table.rowManager.scrollHorizontal(left);_this5.scrollHorizontal(left);resolve()}else{console.warn("Scroll Error - Column not visible");reject("Scroll Error - Column not visible")}})}},{key:"generateCells",value:function generateCells(row){var cells=[];this.columnsByIndex.forEach(function(column){cells.push(column.generateCell(row))});return cells}},{key:"getFlexBaseWidth",value:function getFlexBaseWidth(){var totalWidth=this.table.element.clientWidth,fixedWidth=0;if(this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight){totalWidth-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth}this.columnsByIndex.forEach(function(column){var width,minWidth,colWidth;if(column.visible){width=column.definition.width||0;minWidth=parseInt(column.minWidth);if(typeof width=="string"){if(width.indexOf("%")>-1){colWidth=totalWidth/100*parseInt(width)}else{colWidth=parseInt(width)}}else{colWidth=width}fixedWidth+=colWidth>minWidth?colWidth:minWidth}});return fixedWidth}},{key:"addColumn",value:function addColumn(definition,before,nextToColumn){var _this6=this;return new Promise(function(resolve,reject){var column=_this6._addColumn(definition,before,nextToColumn);_this6._reIndexColumns();_this6.dispatch("column-add",definition,before,nextToColumn);if(_this6.layoutMode()!="fitColumns"){column.reinitializeWidth()}_this6.redraw(true);_this6.table.rowManager.reinitialize();_this6.renderer.rerenderColumns();resolve(column)})}},{key:"deregisterColumn",value:function deregisterColumn(column){var field=column.getField(),index;if(field){delete this.columnsByField[field]}index=this.columnsByIndex.indexOf(column);if(index>-1){this.columnsByIndex.splice(index,1)}index=this.columns.indexOf(column);if(index>-1){this.columns.splice(index,1)}this.verticalAlignHeaders();this.redraw()}},{key:"redraw",value:function redraw(force){if(Helpers.elVisible(this.element)){this.verticalAlignHeaders()}if(force){this.table.rowManager.resetScroll();this.table.rowManager.reinitialize()}if(!this.confirm("table-redrawing",force)){this.layoutRefresh()}this.dispatch("table-redraw",force);this.table.footerManager.redraw()}}]);return ColumnManager}(CoreFeature);var RowComponent$1=function(){function RowComponent(row){_classCallCheck(this,RowComponent);this._row=row;return new Proxy(this,{get:function get(target,name,receiver){if(typeof target[name]!=="undefined"){return target[name]}else{return target._row.table.componentFunctionBinder.handle("row",target._row,name)}}})}_createClass(RowComponent,[{key:"getData",value:function getData(transform){return this._row.getData(transform)}},{key:"getElement",value:function getElement(){return this._row.getElement()}},{key:"getCells",value:function getCells(){var cells=[];this._row.getCells().forEach(function(cell){cells.push(cell.getComponent())});return cells}},{key:"getCell",value:function getCell(column){var cell=this._row.getCell(column);return cell?cell.getComponent():false}},{key:"getIndex",value:function getIndex(){return this._row.getData("data")[this._row.table.options.index]}},{key:"getPosition",value:function getPosition(active){return this._row.table.rowManager.getRowPosition(this._row,active)}},{key:"delete",value:function _delete(){return this._row["delete"]()}},{key:"scrollTo",value:function scrollTo(){return this._row.table.rowManager.scrollToRow(this._row)}},{key:"move",value:function move(to,after){this._row.moveToRow(to,after)}},{key:"update",value:function update(data){return this._row.updateData(data)}},{key:"normalizeHeight",value:function normalizeHeight(){this._row.normalizeHeight(true)}},{key:"_getSelf",value:function _getSelf(){return this._row}},{key:"reformat",value:function reformat(){return this._row.reinitialize()}},{key:"getTable",value:function getTable(){return this._row.table}},{key:"getNextRow",value:function getNextRow(){var row=this._row.nextRow();return row?row.getComponent():row}},{key:"getPrevRow",value:function getPrevRow(){var row=this._row.prevRow();return row?row.getComponent():row}}]);return RowComponent}();var Row=function(_CoreFeature){_inherits(Row,_CoreFeature);var _super=_createSuper(Row);function Row(data,parent){var _this;var type=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"row";_classCallCheck(this,Row);_this=_super.call(this,parent.table);_this.parent=parent;_this.data={};_this.type=type;_this.element=false;_this.modules={};_this.cells=[];_this.height=0;_this.heightStyled="";_this.manualHeight=false;_this.outerHeight=0;_this.initialized=false;_this.heightInitialized=false;_this.component=null;_this.created=false;_this.setData(data);return _this}_createClass(Row,[{key:"create",value:function create(){if(!this.created){this.created=true;this.generateElement()}}},{key:"createElement",value:function createElement(){var el=document.createElement("div");el.classList.add("tabulator-row");el.setAttribute("role","row");this.element=el}},{key:"getElement",value:function getElement(){this.create();return this.element}},{key:"detachElement",value:function detachElement(){if(this.element&&this.element.parentNode){this.element.parentNode.removeChild(this.element)}}},{key:"generateElement",value:function generateElement(){this.createElement();this.dispatch("row-init",this)}},{key:"generateCells",value:function generateCells(){this.cells=this.table.columnManager.generateCells(this)}},{key:"initialize",value:function initialize(force){this.create();if(!this.initialized||force){this.deleteCells();while(this.element.firstChild){this.element.removeChild(this.element.firstChild)}this.dispatch("row-layout-before",this);this.generateCells();this.table.columnManager.renderer.renderRowCells(this);if(force){this.normalizeHeight()}this.dispatch("row-layout",this);if(this.table.options.rowFormatter){this.table.options.rowFormatter(this.getComponent())}this.initialized=true;this.dispatch("row-layout-after",this)}else{this.table.columnManager.renderer.rerenderRowCells(this)}}},{key:"reinitializeHeight",value:function reinitializeHeight(){this.heightInitialized=false;if(this.element&&this.element.offsetParent!==null){this.normalizeHeight(true)}}},{key:"deinitializeHeight",value:function deinitializeHeight(){this.heightInitialized=false}},{key:"reinitialize",value:function reinitialize(children){this.initialized=false;this.heightInitialized=false;if(!this.manualHeight){this.height=0;this.heightStyled=""}if(this.element&&this.element.offsetParent!==null){this.initialize(true)}this.dispatch("row-relayout",this)}},{key:"calcHeight",value:function calcHeight(force){var maxHeight=0,minHeight=this.table.options.resizableRows?this.element.clientHeight:0;this.cells.forEach(function(cell){var height=cell.getHeight();if(height>maxHeight){maxHeight=height}});if(force){this.height=Math.max(maxHeight,minHeight)}else{this.height=this.manualHeight?this.height:Math.max(maxHeight,minHeight)}this.heightStyled=this.height?this.height+"px":"";this.outerHeight=this.element.offsetHeight}},{key:"setCellHeight",value:function setCellHeight(){this.cells.forEach(function(cell){cell.setHeight()});this.heightInitialized=true}},{key:"clearCellHeight",value:function clearCellHeight(){this.cells.forEach(function(cell){cell.clearHeight()})}},{key:"normalizeHeight",value:function normalizeHeight(force){if(force){this.clearCellHeight()}this.calcHeight(force);this.setCellHeight()}},{key:"setHeight",value:function setHeight(height,force){if(this.height!=height||force){this.manualHeight=true;this.height=height;this.heightStyled=height?height+"px":"";this.setCellHeight();this.outerHeight=this.element.offsetHeight}}},{key:"getHeight",value:function getHeight(){return this.outerHeight}},{key:"getWidth",value:function getWidth(){return this.element.offsetWidth}},{key:"deleteCell",value:function deleteCell(cell){var index=this.cells.indexOf(cell);if(index>-1){this.cells.splice(index,1)}}},{key:"setData",value:function setData(data){this.data=this.chain("row-data-init-before",[this,data],undefined,data);this.dispatch("row-data-init-after",this)}},{key:"updateData",value:function updateData(updatedData){var _this2=this;var visible=this.element&&Helpers.elVisible(this.element),tempData={},newRowData;return new Promise(function(resolve,reject){if(typeof updatedData==="string"){updatedData=JSON.parse(updatedData)}_this2.dispatch("row-data-save-before",_this2);if(_this2.subscribed("row-data-changing")){tempData=Object.assign(tempData,_this2.data);tempData=Object.assign(tempData,updatedData)}newRowData=_this2.chain("row-data-changing",[_this2,tempData,updatedData],null,updatedData);for(var attrname in newRowData){_this2.data[attrname]=newRowData[attrname]}_this2.dispatch("row-data-save-after",_this2);for(var attrname in updatedData){var columns=_this2.table.columnManager.getColumnsByFieldRoot(attrname);columns.forEach(function(column){var cell=_this2.getCell(column.getField());if(cell){var value=column.getFieldValue(newRowData);if(cell.getValue()!=value){cell.setValueProcessData(value);if(visible){cell.cellRendered()}}}})}if(visible){_this2.normalizeHeight(true);if(_this2.table.options.rowFormatter){_this2.table.options.rowFormatter(_this2.getComponent())}}else{_this2.initialized=false;_this2.height=0;_this2.heightStyled=""}_this2.dispatch("row-data-changed",_this2,visible,updatedData);_this2.dispatchExternal("rowUpdated",_this2.getComponent());if(_this2.subscribedExternal("dataChanged")){_this2.dispatchExternal("dataChanged",_this2.table.rowManager.getData())}resolve()})}},{key:"getData",value:function getData(transform){if(transform){return this.chain("row-data-retrieve",[this,transform],null,this.data)}return this.data}},{key:"getCell",value:function getCell(column){var match=false;column=this.table.columnManager.findColumn(column);if(!this.initialized){this.generateCells()}match=this.cells.find(function(cell){return cell.column===column});return match}},{key:"getCellIndex",value:function getCellIndex(findCell){return this.cells.findIndex(function(cell){return cell===findCell})}},{key:"findCell",value:function findCell(subject){return this.cells.find(function(cell){return cell.element===subject})}},{key:"getCells",value:function getCells(){if(!this.initialized){this.generateCells()}return this.cells}},{key:"nextRow",value:function nextRow(){var row=this.table.rowManager.nextDisplayRow(this,true);return row||false}},{key:"prevRow",value:function prevRow(){var row=this.table.rowManager.prevDisplayRow(this,true);return row||false}},{key:"moveToRow",value:function moveToRow(to,before){var toRow=this.table.rowManager.findRow(to);if(toRow){this.table.rowManager.moveRowActual(this,toRow,!before);this.table.rowManager.refreshActiveData("display",false,true)}else{console.warn("Move Error - No matching row found:",to)}}},{key:"delete",value:function _delete(){this.dispatch("row-delete",this);this.deleteActual();return Promise.resolve()}},{key:"deleteActual",value:function deleteActual(blockRedraw){var index=this.table.rowManager.getRowIndex(this);this.detatchModules();this.table.rowManager.deleteRow(this,blockRedraw);this.deleteCells();this.initialized=false;this.heightInitialized=false;this.element=false;this.dispatch("row-deleted",this)}},{key:"detatchModules",value:function detatchModules(){this.dispatch("row-deleting",this)}},{key:"deleteCells",value:function deleteCells(){var cellCount=this.cells.length;for(var i=0;i<cellCount;i++){this.cells[0]["delete"]()}}},{key:"wipe",value:function wipe(){this.detatchModules();this.deleteCells();if(this.element){while(this.element.firstChild){this.element.removeChild(this.element.firstChild)}if(this.element.parentNode){this.element.parentNode.removeChild(this.element)}}this.element=false;this.modules={}}},{key:"getGroup",value:function getGroup(){return this.modules.group||false}},{key:"getComponent",value:function getComponent(){if(!this.component){this.component=new RowComponent$1(this)}return this.component}}]);return Row}(CoreFeature);var BaiscVertical=function(_Renderer){_inherits(BaiscVertical,_Renderer);var _super=_createSuper(BaiscVertical);function BaiscVertical(table){var _this;_classCallCheck(this,BaiscVertical);_this=_super.call(this,table);_this.verticalFillMode="fill";_this.scrollTop=0;_this.scrollLeft=0;_this.scrollTop=0;_this.scrollLeft=0;return _this}_createClass(BaiscVertical,[{key:"clearRows",value:function clearRows(){var element=this.tableElement;while(element.firstChild){element.removeChild(element.firstChild)}element.scrollTop=0;element.scrollLeft=0;element.style.minWidth="";element.style.minHeight="";element.style.display="";element.style.visibility=""}},{key:"renderRows",value:function renderRows(){var _this2=this;var element=this.tableElement,onlyGroupHeaders=true;this.rows().forEach(function(row,index){_this2.styleRow(row,index);element.appendChild(row.getElement());row.initialize(true);if(row.type!=="group"){onlyGroupHeaders=false}});if(onlyGroupHeaders){element.style.minWidth=this.table.columnManager.getWidth()+"px"}else{element.style.minWidth=""}}},{key:"rerenderRows",value:function rerenderRows(callback){this.render();if(callback){callback()}}},{key:"scrollToRowNearestTop",value:function scrollToRowNearestTop(row){var rowTop=Helpers.elOffset(row.getElement()).top;return!(Math.abs(this.elementVertical.scrollTop-rowTop)>Math.abs(this.elementVertical.scrollTop+this.elementVertical.clientHeight-rowTop))}},{key:"scrollToRow",value:function scrollToRow(row){var rowEl=row.getElement();this.elementVertical.scrollTop=Helpers.elOffset(rowEl).top-Helpers.elOffset(this.elementVertical).top+this.elementVertical.scrollTop}},{key:"visibleRows",value:function visibleRows(includingBuffer){return this.rows()}}]);return BaiscVertical}(Renderer);var VirtualDomVertical=function(_Renderer){_inherits(VirtualDomVertical,_Renderer);var _super=_createSuper(VirtualDomVertical);function VirtualDomVertical(table){var _this;_classCallCheck(this,VirtualDomVertical);_this=_super.call(this,table);_this.verticalFillMode="fill";_this.scrollTop=0;_this.scrollLeft=0;_this.vDomRowHeight=20;_this.vDomTop=0;_this.vDomBottom=0;_this.vDomScrollPosTop=0;_this.vDomScrollPosBottom=0;_this.vDomTopPad=0;_this.vDomBottomPad=0;_this.vDomMaxRenderChain=90;_this.vDomWindowBuffer=0;_this.vDomWindowMinTotalRows=20;_this.vDomWindowMinMarginRows=5;_this.vDomTopNewRows=[];_this.vDomBottomNewRows=[];return _this}_createClass(VirtualDomVertical,[{key:"clearRows",value:function clearRows(){var element=this.tableElement;while(element.firstChild){element.removeChild(element.firstChild)}element.style.paddingTop="";element.style.paddingBottom="";element.style.minHeight="";element.style.display="";element.style.visibility="";this.elementVertical.scrollTop=0;this.elementVertical.scrollLeft=0;this.scrollTop=0;this.scrollLeft=0;this.vDomTop=0;this.vDomBottom=0;this.vDomTopPad=0;this.vDomBottomPad=0;this.vDomScrollPosTop=0;this.vDomScrollPosBottom=0}},{key:"renderRows",value:function renderRows(){this._virtualRenderFill()}},{key:"rerenderRows",value:function rerenderRows(callback){var scrollTop=this.elementVertical.scrollTop;var topRow=false;var topOffset=false;var left=this.table.rowManager.scrollLeft;var rows=this.rows();for(var i=this.vDomTop;i<=this.vDomBottom;i++){if(rows[i]){var diff=scrollTop-rows[i].getElement().offsetTop;if(topOffset===false||Math.abs(diff)<topOffset){topOffset=diff;topRow=i}else{break}}}rows.forEach(function(row){row.deinitializeHeight()});if(callback){callback()}this._virtualRenderFill(topRow===false?this.rows.length-1:topRow,true,topOffset||0);this.scrollColumns(left)}},{key:"scrollColumns",value:function scrollColumns(left){this.table.rowManager.scrollHorizontal(left)}},{key:"scrollRows",value:function scrollRows(top,dir){var topDiff=top-this.vDomScrollPosTop;var bottomDiff=top-this.vDomScrollPosBottom;var margin=this.vDomWindowBuffer*2;var rows=this.rows();this.scrollTop=top;if(-topDiff>margin||bottomDiff>margin){var left=this.table.rowManager.scrollLeft;this._virtualRenderFill(Math.floor(this.elementVertical.scrollTop/this.elementVertical.scrollHeight*rows.length));this.scrollColumns(left)}else{if(dir){if(topDiff<0){this._addTopRow(rows,-topDiff)}if(bottomDiff<0){if(this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer){this._removeBottomRow(rows,-bottomDiff)}else{this.vDomScrollPosBottom=this.scrollTop}}}else{if(bottomDiff>=0){this._addBottomRow(rows,bottomDiff)}if(topDiff>=0){if(this.scrollTop>this.vDomWindowBuffer){this._removeTopRow(rows,topDiff)}else{this.vDomScrollPosTop=this.scrollTop}}}}}},{key:"resize",value:function resize(){this.vDomWindowBuffer=this.table.options.renderVerticalBuffer||this.elementVertical.clientHeight}},{key:"scrollToRowNearestTop",value:function scrollToRowNearestTop(row){var rowIndex=this.rows().indexOf(row);return!(Math.abs(this.vDomTop-rowIndex)>Math.abs(this.vDomBottom-rowIndex))}},{key:"scrollToRow",value:function scrollToRow(row){var index=this.rows().indexOf(row);if(index>-1){this._virtualRenderFill(index,true)}}},{key:"visibleRows",value:function visibleRows(includingBuffer){var topEdge=this.elementVertical.scrollTop,bottomEdge=this.elementVertical.clientHeight+topEdge,topFound=false,topRow=0,bottomRow=0,rows=this.rows();if(includingBuffer){topRow=this.vDomTop;bottomRow=this.vDomBottom}else{for(var i=this.vDomTop;i<=this.vDomBottom;i++){if(rows[i]){if(!topFound){if(topEdge-rows[i].getElement().offsetTop>=0){topRow=i}else{topFound=true;if(bottomEdge-rows[i].getElement().offsetTop>=0){bottomRow=i}else{break}}}else{if(bottomEdge-rows[i].getElement().offsetTop>=0){bottomRow=i}else{break}}}}}return rows.slice(topRow,bottomRow+1)}},{key:"_virtualRenderFill",value:function _virtualRenderFill(position,forceMove,offset){var element=this.tableElement,holder=this.elementVertical,topPad=0,rowsHeight=0,heightOccupied=0,topPadHeight=0,i=0,rows=this.rows(),rowsCount=rows.length,containerHeight=this.elementVertical.clientHeight;position=position||0;offset=offset||0;if(!position){this.clear()}else{while(element.firstChild){element.removeChild(element.firstChild)}heightOccupied=(rowsCount-position+1)*this.vDomRowHeight;if(heightOccupied<containerHeight){position-=Math.ceil((containerHeight-heightOccupied)/this.vDomRowHeight);if(position<0){position=0}}topPad=Math.min(Math.max(Math.floor(this.vDomWindowBuffer/this.vDomRowHeight),this.vDomWindowMinMarginRows),position);position-=topPad}if(rowsCount&&Helpers.elVisible(this.elementVertical)){this.vDomTop=position;this.vDomBottom=position-1;while((rowsHeight<=containerHeight+this.vDomWindowBuffer||i<this.vDomWindowMinTotalRows)&&this.vDomBottom<rowsCount-1){var index=this.vDomBottom+1,row=rows[index],rowHeight=0;this.styleRow(row,index);element.appendChild(row.getElement());row.initialize();if(!row.heightInitialized){row.normalizeHeight(true)}rowHeight=row.getHeight();if(i<topPad){topPadHeight+=rowHeight}else{rowsHeight+=rowHeight}if(rowHeight>this.vDomWindowBuffer){this.vDomWindowBuffer=rowHeight*2}this.vDomBottom++;i++}if(!position){this.vDomTopPad=0;this.vDomRowHeight=Math.floor((rowsHeight+topPadHeight)/i);this.vDomBottomPad=this.vDomRowHeight*(rowsCount-this.vDomBottom-1);this.vDomScrollHeight=topPadHeight+rowsHeight+this.vDomBottomPad-containerHeight}else{this.vDomTopPad=!forceMove?this.scrollTop-topPadHeight:this.vDomRowHeight*this.vDomTop+offset;this.vDomBottomPad=this.vDomBottom==rowsCount-1?0:Math.max(this.vDomScrollHeight-this.vDomTopPad-rowsHeight-topPadHeight,0)}element.style.paddingTop=this.vDomTopPad+"px";element.style.paddingBottom=this.vDomBottomPad+"px";if(forceMove){this.scrollTop=this.vDomTopPad+topPadHeight+offset-(this.elementVertical.scrollWidth>this.elementVertical.clientWidth?this.elementVertical.offsetHeight-containerHeight:0)}this.scrollTop=Math.min(this.scrollTop,this.elementVertical.scrollHeight-containerHeight);if(this.elementVertical.scrollWidth>this.elementVertical.offsetWidth&&forceMove){this.scrollTop+=this.elementVertical.offsetHeight-containerHeight}this.vDomScrollPosTop=this.scrollTop;this.vDomScrollPosBottom=this.scrollTop;holder.scrollTop=this.scrollTop;this.dispatch("render-virtual-fill")}}},{key:"_addTopRow",value:function _addTopRow(rows,fillableSpace){var table=this.tableElement,addedRows=[],paddingAdjust=0,index=this.vDomTop-1,i=0;while(true){if(this.vDomTop){var row=rows[index],rowHeight=void 0,initialized=void 0;if(row&&i<this.vDomMaxRenderChain){rowHeight=row.getHeight()||this.vDomRowHeight;initialized=row.initialized;if(fillableSpace>=rowHeight){this.styleRow(row,index);table.insertBefore(row.getElement(),table.firstChild);if(!row.initialized||!row.heightInitialized){addedRows.push(row)}row.initialize();if(!initialized){rowHeight=row.getElement().offsetHeight;if(rowHeight>this.vDomWindowBuffer){this.vDomWindowBuffer=rowHeight*2}}fillableSpace-=rowHeight;paddingAdjust+=rowHeight;this.vDomTop--;index--;i++}else{break}}else{break}}else{break}}for(var _i=0,_addedRows=addedRows;_i<_addedRows.length;_i++){var _row=_addedRows[_i];_row.clearCellHeight()}this._quickNormalizeRowHeight(addedRows);if(paddingAdjust){this.vDomTopPad-=paddingAdjust;if(this.vDomTopPad<0){this.vDomTopPad=index*this.vDomRowHeight}if(index<1){this.vDomTopPad=0}table.style.paddingTop=this.vDomTopPad+"px";this.vDomScrollPosTop-=paddingAdjust}}},{key:"_removeTopRow",value:function _removeTopRow(rows,fillableSpace){var removableRows=[],paddingAdjust=0,i=0;while(true){var row=rows[this.vDomTop],rowHeight=void 0;if(row&&i<this.vDomMaxRenderChain){rowHeight=row.getHeight()||this.vDomRowHeight;if(fillableSpace>=rowHeight){this.vDomTop++;fillableSpace-=rowHeight;paddingAdjust+=rowHeight;removableRows.push(row);i++}else{break}}else{break}}for(var _i2=0,_removableRows=removableRows;_i2<_removableRows.length;_i2++){var _row2=_removableRows[_i2];var rowEl=_row2.getElement();if(rowEl.parentNode){rowEl.parentNode.removeChild(rowEl)}}if(paddingAdjust){this.vDomTopPad+=paddingAdjust;this.tableElement.style.paddingTop=this.vDomTopPad+"px";this.vDomScrollPosTop+=this.vDomTop?paddingAdjust:paddingAdjust+this.vDomWindowBuffer}}},{key:"_addBottomRow",value:function _addBottomRow(rows,fillableSpace){var table=this.tableElement,addedRows=[],paddingAdjust=0,index=this.vDomBottom+1,i=0;while(true){var row=rows[index],rowHeight=void 0,initialized=void 0;if(row&&i<this.vDomMaxRenderChain){rowHeight=row.getHeight()||this.vDomRowHeight;initialized=row.initialized;if(fillableSpace>=rowHeight){this.styleRow(row,index);table.appendChild(row.getElement());if(!row.initialized||!row.heightInitialized){addedRows.push(row)}row.initialize();if(!initialized){rowHeight=row.getElement().offsetHeight;if(rowHeight>this.vDomWindowBuffer){this.vDomWindowBuffer=rowHeight*2}}fillableSpace-=rowHeight;paddingAdjust+=rowHeight;this.vDomBottom++;index++;i++}else{break}}else{break}}for(var _i3=0,_addedRows2=addedRows;_i3<_addedRows2.length;_i3++){var _row3=_addedRows2[_i3];_row3.clearCellHeight()}this._quickNormalizeRowHeight(addedRows);if(paddingAdjust){this.vDomBottomPad-=paddingAdjust;if(this.vDomBottomPad<0||index==rows.length-1){this.vDomBottomPad=0}table.style.paddingBottom=this.vDomBottomPad+"px";this.vDomScrollPosBottom+=paddingAdjust}}},{key:"_removeBottomRow",value:function _removeBottomRow(rows,fillableSpace){var removableRows=[],paddingAdjust=0,i=0;while(true){var row=rows[this.vDomBottom],rowHeight=void 0;if(row&&i<this.vDomMaxRenderChain){rowHeight=row.getHeight()||this.vDomRowHeight;if(fillableSpace>=rowHeight){this.vDomBottom--;fillableSpace-=rowHeight;paddingAdjust+=rowHeight;removableRows.push(row);i++}else{break}}else{break}}for(var _i4=0,_removableRows2=removableRows;_i4<_removableRows2.length;_i4++){var _row4=_removableRows2[_i4];var rowEl=_row4.getElement();if(rowEl.parentNode){rowEl.parentNode.removeChild(rowEl)}}if(paddingAdjust){this.vDomBottomPad+=paddingAdjust;if(this.vDomBottomPad<0){this.vDomBottomPad=0}this.tableElement.style.paddingBottom=this.vDomBottomPad+"px";this.vDomScrollPosBottom-=paddingAdjust}}},{key:"_quickNormalizeRowHeight",value:function _quickNormalizeRowHeight(rows){var _iterator=_createForOfIteratorHelper(rows),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var row=_step.value;row.calcHeight()}}catch(err){_iterator.e(err)}finally{_iterator.f()}var _iterator2=_createForOfIteratorHelper(rows),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _row5=_step2.value;_row5.setCellHeight()}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}}]);return VirtualDomVertical}(Renderer);var RowManager=function(_CoreFeature){_inherits(RowManager,_CoreFeature);var _super=_createSuper(RowManager);function RowManager(table){var _this;_classCallCheck(this,RowManager);_this=_super.call(this,table);_this.element=_this.createHolderElement();_this.tableElement=_this.createTableElement();_this.heightFixer=_this.createTableElement();_this.firstRender=false;_this.renderMode="virtual";_this.fixedHeight=false;_this.rows=[];_this.activeRowsPipeline=[];_this.activeRows=[];_this.activeRowsCount=0;_this.displayRows=[];_this.displayRowsCount=0;_this.scrollTop=0;_this.scrollLeft=0;_this.rowNumColumn=false;_this.redrawBlock=false;_this.redrawBlockRestoreConfig=false;_this.redrawBlockRederInPosition=false;_this.dataPipeline=[];_this.displayPipeline=[];_this.renderer=null;return _this}_createClass(RowManager,[{key:"createHolderElement",value:function createHolderElement(){var el=document.createElement("div");el.classList.add("tabulator-tableholder");el.setAttribute("tabindex",0);el.setAttribute("role","rowgroup");return el}},{key:"createTableElement",value:function createTableElement(){var el=document.createElement("div");el.classList.add("tabulator-table");el.setAttribute("role","rowgroup");return el}},{key:"getElement",value:function getElement(){return this.element}},{key:"getTableElement",value:function getTableElement(){return this.tableElement}},{key:"getRowPosition",value:function getRowPosition(row,active){if(active){return this.activeRows.indexOf(row)}else{return this.rows.indexOf(row)}}},{key:"initialize",value:function initialize(){var _this2=this;this.initializeRenderer();this.element.appendChild(this.tableElement);this.firstRender=true;this.element.addEventListener("scroll",function(){var left=_this2.element.scrollLeft,leftDir=_this2.scrollLeft>left,top=_this2.element.scrollTop,topDir=_this2.scrollTop>top;if(_this2.scrollLeft!=left){_this2.scrollLeft=left;_this2.dispatch("scroll-horizontal",left,leftDir);_this2.dispatchExternal("scrollHorizontal",left,leftDir)}if(_this2.scrollTop!=top){_this2.scrollTop=top;_this2.renderer.scrollRows(top,topDir);_this2.dispatch("scroll-vertical",top,topDir);_this2.dispatchExternal("scrollVertical",top,topDir)}})}},{key:"findRow",value:function findRow(subject){var _this3=this;if(_typeof(subject)=="object"){if(subject instanceof Row){return subject}else if(subject instanceof RowComponent$1){return subject._getSelf()||false}else if(typeof HTMLElement!=="undefined"&&subject instanceof HTMLElement){var match=this.rows.find(function(row){return row.getElement()===subject});return match||false}}else if(typeof subject=="undefined"||subject===null){return false}else{var _match=this.rows.find(function(row){return row.data[_this3.table.options.index]==subject});return _match||false}return false}},{key:"getRowFromDataObject",value:function getRowFromDataObject(data){var match=this.rows.find(function(row){return row.data===data});return match||false}},{key:"getRowFromPosition",value:function getRowFromPosition(position,active){if(active){return this.activeRows[position]}else{return this.rows[position]}}},{key:"scrollToRow",value:function scrollToRow(row,position,ifVisible){return this.renderer.scrollToRowPosition(row,position,ifVisible)}},{key:"setData",value:function setData(data,renderInPosition,columnsChanged){var _this4=this;return new Promise(function(resolve,reject){if(renderInPosition&&_this4.getDisplayRows().length){if(_this4.table.options.pagination){_this4._setDataActual(data,true)}else{_this4.reRenderInPosition(function(){_this4._setDataActual(data)})}}else{if(_this4.table.options.autoColumns&&columnsChanged&&_this4.table.initialized){_this4.table.columnManager.generateColumnsFromRowData(data)}_this4.resetScroll();_this4._setDataActual(data)}resolve()})}},{key:"_setDataActual",value:function _setDataActual(data,renderInPosition){var _this5=this;this.dispatchExternal("dataProcessing",data);this._wipeElements();if(Array.isArray(data)){this.dispatch("data-processing",data);data.forEach(function(def,i){if(def&&_typeof(def)==="object"){var row=new Row(def,_this5);_this5.rows.push(row)}else{console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",def)}});this.refreshActiveData(false,false,renderInPosition);this.dispatch("data-processed",data);this.dispatchExternal("dataProcessed",data)}else{console.error("Data Loading Error - Unable to process data due to invalid data type \nExpecting: array \nReceived: ",_typeof(data),"\nData:     ",data)}}},{key:"_wipeElements",value:function _wipeElements(){this.dispatch("rows-wipe");this.rows.forEach(function(row){row.wipe()});this.rows=[];this.activeRows=[];this.activeRowsPipeline=[];this.activeRowsCount=0;this.displayRows=[];this.displayRowsCount=0;this.adjustTableSize()}},{key:"deleteRow",value:function deleteRow(row,blockRedraw){var allIndex=this.rows.indexOf(row),activeIndex=this.activeRows.indexOf(row);if(activeIndex>-1){this.activeRows.splice(activeIndex,1)}if(allIndex>-1){this.rows.splice(allIndex,1)}this.setActiveRows(this.activeRows);this.displayRowIterator(function(rows){var displayIndex=rows.indexOf(row);if(displayIndex>-1){rows.splice(displayIndex,1)}});if(!blockRedraw){this.reRenderInPosition()}this.regenerateRowNumbers();this.dispatchExternal("rowDeleted",row.getComponent());if(!this.displayRowsCount){this._showPlaceholder()}if(this.subscribedExternal("dataChanged")){this.dispatchExternal("dataChanged",this.getData())}}},{key:"addRow",value:function addRow(data,pos,index,blockRedraw){var row=this.addRowActual(data,pos,index,blockRedraw);this.dispatch("row-added",row,data,pos,index);return row}},{key:"addRows",value:function addRows(data,pos,index){var _this6=this;var rows=[];return new Promise(function(resolve,reject){pos=_this6.findAddRowPos(pos);if(!Array.isArray(data)){data=[data]}data.length-1;if(typeof index=="undefined"&&pos||typeof index!=="undefined"&&!pos){data.reverse()}data.forEach(function(item,i){var row=_this6.addRow(item,pos,index,true);rows.push(row);_this6.dispatch("row-added",row,data,pos,index)});_this6.refreshActiveData(false,false,true);_this6.regenerateRowNumbers();if(rows.length){_this6._clearPlaceholder()}resolve(rows)})}},{key:"findAddRowPos",value:function findAddRowPos(pos){if(typeof pos==="undefined"){pos=this.table.options.addRowPos}if(pos==="pos"){pos=true}if(pos==="bottom"){pos=false}return pos}},{key:"addRowActual",value:function addRowActual(data,pos,index,blockRedraw){var row=data instanceof Row?data:new Row(data||{},this),top=this.findAddRowPos(pos),allIndex=-1,activeIndex,chainResult;if(!index){chainResult=this.chain("row-adding-position",[row,top],null,{index:index,top:top});index=chainResult.index;top=chainResult.top}if(typeof index!=="undefined"){index=this.findRow(index)}index=this.chain("row-adding-index",[row,index,top],null,index);if(index){allIndex=this.rows.indexOf(index)}if(index&&allIndex>-1){activeIndex=this.activeRows.indexOf(index);this.displayRowIterator(function(rows){var displayIndex=rows.indexOf(index);if(displayIndex>-1){rows.splice(top?displayIndex:displayIndex+1,0,row)}});if(activeIndex>-1){this.activeRows.splice(top?activeIndex:activeIndex+1,0,row)}this.rows.splice(top?allIndex:allIndex+1,0,row)}else{if(top){this.displayRowIterator(function(rows){rows.unshift(row)});this.activeRows.unshift(row);this.rows.unshift(row)}else{this.displayRowIterator(function(rows){rows.push(row)});this.activeRows.push(row);this.rows.push(row)}}this.setActiveRows(this.activeRows);this.dispatchExternal("rowAdded",row.getComponent());if(this.subscribedExternal("dataChanged")){this.dispatchExternal("dataChanged",this.table.rowManager.getData())}if(!blockRedraw){this.reRenderInPosition()}return row}},{key:"moveRow",value:function moveRow(from,to,after){this.dispatch("row-move",from,to,after);this.moveRowActual(from,to,after);this.regenerateRowNumbers();this.dispatch("row-moved",from,to,after);this.dispatchExternal("rowMoved",from.getComponent())}},{key:"moveRowActual",value:function moveRowActual(from,to,after){var _this7=this;this.moveRowInArray(this.rows,from,to,after);this.moveRowInArray(this.activeRows,from,to,after);this.displayRowIterator(function(rows){_this7.moveRowInArray(rows,from,to,after)});this.dispatch("row-moving",from,to,after)}},{key:"moveRowInArray",value:function moveRowInArray(rows,from,to,after){var fromIndex,toIndex,start,end;if(from!==to){fromIndex=rows.indexOf(from);if(fromIndex>-1){rows.splice(fromIndex,1);toIndex=rows.indexOf(to);if(toIndex>-1){if(after){rows.splice(toIndex+1,0,from)}else{rows.splice(toIndex,0,from)}}else{rows.splice(fromIndex,0,from)}}if(rows===this.getDisplayRows()){start=fromIndex<toIndex?fromIndex:toIndex;end=toIndex>fromIndex?toIndex:fromIndex+1;for(var i=start;i<=end;i++){if(rows[i]){this.styleRow(rows[i],i)}}}}}},{key:"clearData",value:function clearData(){this.setData([])}},{key:"getRowIndex",value:function getRowIndex(row){return this.findRowIndex(row,this.rows)}},{key:"getDisplayRowIndex",value:function getDisplayRowIndex(row){var index=this.getDisplayRows().indexOf(row);return index>-1?index:false}},{key:"nextDisplayRow",value:function nextDisplayRow(row,rowOnly){var index=this.getDisplayRowIndex(row),nextRow=false;if(index!==false&&index<this.displayRowsCount-1){nextRow=this.getDisplayRows()[index+1]}if(nextRow&&(!(nextRow instanceof Row)||nextRow.type!="row")){return this.nextDisplayRow(nextRow,rowOnly)}return nextRow}},{key:"prevDisplayRow",value:function prevDisplayRow(row,rowOnly){var index=this.getDisplayRowIndex(row),prevRow=false;if(index){prevRow=this.getDisplayRows()[index-1]}if(rowOnly&&prevRow&&(!(prevRow instanceof Row)||prevRow.type!="row")){return this.prevDisplayRow(prevRow,rowOnly)}return prevRow}},{key:"findRowIndex",value:function findRowIndex(row,list){var rowIndex;row=this.findRow(row);if(row){rowIndex=list.indexOf(row);if(rowIndex>-1){return rowIndex}}return false}},{key:"getData",value:function getData(active,transform){var output=[],rows=this.getRows(active);rows.forEach(function(row){if(row.type=="row"){output.push(row.getData(transform||"data"))}});return output}},{key:"getComponents",value:function getComponents(active){var output=[],rows=this.getRows(active);rows.forEach(function(row){output.push(row.getComponent())});return output}},{key:"getDataCount",value:function getDataCount(active){var rows=this.getRows(active);return rows.length}},{key:"scrollHorizontal",value:function scrollHorizontal(left){this.scrollLeft=left;this.element.scrollLeft=left;this.dispatch("scroll-horizontal",left)}},{key:"registerDataPipelineHandler",value:function registerDataPipelineHandler(handler,priority){if(typeof priority!=="undefined"){this.dataPipeline.push({handler:handler,priority:priority});this.dataPipeline.sort(function(a,b){return a.priority-b.priority})}else{console.error("Data pipeline handlers must have a priority in order to be registered")}}},{key:"registerDisplayPipelineHandler",value:function registerDisplayPipelineHandler(handler,priority){if(typeof priority!=="undefined"){this.displayPipeline.push({handler:handler,priority:priority});this.displayPipeline.sort(function(a,b){return a.priority-b.priority})}else{console.error("Display pipeline handlers must have a priority in order to be registered")}}},{key:"refreshActiveData",value:function refreshActiveData(handler,skipStage,renderInPosition){var table=this.table,stage="",index=0,cascadeOrder=["all","dataPipeline","display","displayPipeline","end"];if(typeof handler==="function"){index=this.dataPipeline.findIndex(function(item){return item.handler===handler});if(index>-1){stage="dataPipeline";if(skipStage){if(index==this.dataPipeline.length-1){stage="display"}else{index++}}}else{index=this.displayPipeline.findIndex(function(item){return item.handler===handler});if(index>-1){stage="displayPipeline";if(skipStage){if(index==this.displayPipeline.length-1){stage="end"}else{index++}}}else{console.error("Unable to refresh data, invalid handler provided",handler);return}}}else{stage=handler||"all";index=0}if(this.redrawBlock){if(!this.redrawBlockRestoreConfig||this.redrawBlockRestoreConfig&&(this.redrawBlockRestoreConfig.stage===stage&&index<this.redrawBlockRestoreConfig.index||cascadeOrder.indexOf(stage)<cascadeOrder.indexOf(this.redrawBlockRestoreConfig.stage))){this.redrawBlockRestoreConfig={handler:handler,skipStage:skipStage,renderInPosition:renderInPosition,stage:stage,index:index}}return}else{this.dispatch("data-refeshing");if(!handler){this.activeRowsPipeline[0]=this.rows.slice(0)}switch(stage){case"all":case"dataPipeline":for(var i=index;i<this.dataPipeline.length;i++){var result=this.dataPipeline[i].handler(this.activeRowsPipeline[i].slice(0));this.activeRowsPipeline[i+1]=result||this.activeRowsPipeline[i].slice(0)}this.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]);this.regenerateRowNumbers();case"display":index=0;this.resetDisplayRows();case"displayPipeline":for(var _i=index;_i<this.displayPipeline.length;_i++){var _result=this.displayPipeline[_i].handler((_i?this.getDisplayRows(_i-1):this.activeRows).slice(0),renderInPosition);this.setDisplayRows(_result||this.getDisplayRows(_i-1).slice(0),_i)}}if(Helpers.elVisible(this.element)){if(renderInPosition){this.reRenderInPosition()}else{if(!handler){this.table.columnManager.renderer.renderColumns()}this.renderTable();if(table.options.layoutColumnsOnNewData){this.table.columnManager.redraw(true)}}}this.dispatch("data-refeshed")}}},{key:"regenerateRowNumbers",value:function regenerateRowNumbers(){var _this8=this;if(this.rowNumColumn){this.activeRows.forEach(function(row){var cell=row.getCell(_this8.rowNumColumn);if(cell){cell._generateContents()}})}}},{key:"setActiveRows",value:function setActiveRows(activeRows){this.activeRows=activeRows;this.activeRowsCount=this.activeRows.length}},{key:"resetDisplayRows",value:function resetDisplayRows(){this.displayRows=[];this.displayRows.push(this.activeRows.slice(0));this.displayRowsCount=this.displayRows[0].length}},{key:"getNextDisplayIndex",value:function getNextDisplayIndex(){return this.displayRows.length}},{key:"setDisplayRows",value:function setDisplayRows(displayRows,index){var output=true;if(index&&typeof this.displayRows[index]!="undefined"){this.displayRows[index]=displayRows;output=true}else{this.displayRows.push(displayRows);output=index=this.displayRows.length-1}if(index==this.displayRows.length-1){this.displayRowsCount=this.displayRows[this.displayRows.length-1].length}return output}},{key:"getDisplayRows",value:function getDisplayRows(index){if(typeof index=="undefined"){return this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]}else{return this.displayRows[index]||[]}}},{key:"getVisibleRows",value:function getVisibleRows(chain,viewable){var rows=Object.assign([],this.renderer.visibleRows(!viewable));if(chain){rows=this.chain("rows-visible",[viewable],rows,rows)}return rows}},{key:"displayRowIterator",value:function displayRowIterator(callback){this.activeRowsPipeline.forEach(callback);this.displayRows.forEach(callback);this.displayRowsCount=this.displayRows[this.displayRows.length-1].length}},{key:"getRows",value:function getRows(type){var rows;switch(type){case"active":rows=this.activeRows;break;case"display":rows=this.table.rowManager.getDisplayRows();break;case"visible":rows=this.getVisibleRows(true);break;default:rows=this.chain("rows-retrieve",type,null,this.rows)||this.rows}return rows}},{key:"reRenderInPosition",value:function reRenderInPosition(callback){if(this.redrawBlock){if(callback){callback()}else{this.redrawBlockRederInPosition=true}}else{this.renderer.rerenderRows(callback)}}},{key:"initializeRenderer",value:function initializeRenderer(){var renderClass;var renderers={virtual:VirtualDomVertical,basic:BaiscVertical};if(typeof this.table.options.renderVertical==="string"){renderClass=renderers[this.table.options.renderVertical]}else{renderClass=this.table.options.renderVertical}if(renderClass){this.renderer=new renderClass(this.table,this.element,this.tableElement);this.renderer.initialize();if(this.table.element.clientHeight||this.table.options.height){this.fixedHeight=true}else{this.fixedHeight=false}}else{console.error("Unable to find matching renderer:",table.options.renderVertical)}}},{key:"getRenderMode",value:function getRenderMode(){return this.renderMode}},{key:"renderTable",value:function renderTable(){this.dispatchExternal("renderStarted");this.element.scrollTop=0;this._clearTable();if(this.displayRowsCount){this.renderer.renderRows();if(this.firstRender){this.firstRender=false;this.layoutRefresh()}}else{this.renderEmptyScroll()}if(!this.fixedHeight){this.adjustTableSize()}this.dispatch("table-layout");if(!this.displayRowsCount){this._showPlaceholder()}this.dispatchExternal("renderComplete")}},{key:"renderEmptyScroll",value:function renderEmptyScroll(){if(this.table.options.placeholder){this.tableElement.style.display="none"}else{this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px"}}},{key:"_clearTable",value:function _clearTable(){var element=this.tableElement;this._clearPlaceholder();this.scrollTop=0;this.scrollLeft=0;this.renderer.clearRows()}},{key:"_showPlaceholder",value:function _showPlaceholder(){if(this.table.options.placeholder){this.table.options.placeholder.setAttribute("tabulator-render-mode",this.renderMode);this.getElement().appendChild(this.table.options.placeholder);this.table.options.placeholder.style.width=this.table.columnManager.getWidth()+"px"}}},{key:"_clearPlaceholder",value:function _clearPlaceholder(){if(this.table.options.placeholder&&this.table.options.placeholder.parentNode){this.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder)}}},{key:"styleRow",value:function styleRow(row,index){var rowEl=row.getElement();if(index%2){rowEl.classList.add("tabulator-row-even");rowEl.classList.remove("tabulator-row-odd")}else{rowEl.classList.add("tabulator-row-odd");rowEl.classList.remove("tabulator-row-even")}}},{key:"normalizeHeight",value:function normalizeHeight(){this.activeRows.forEach(function(row){row.normalizeHeight()})}},{key:"adjustTableSize",value:function adjustTableSize(){var initialHeight=this.element.clientHeight;if(this.renderer.verticalFillMode==="fill"){var otherHeight=Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height+(this.table.footerManager&&this.table.footerManager.active&&!this.table.footerManager.external?this.table.footerManager.getElement().getBoundingClientRect().height:0));if(this.fixedHeight){this.element.style.minHeight="calc(100% - "+otherHeight+"px)";this.element.style.height="calc(100% - "+otherHeight+"px)";this.element.style.maxHeight="calc(100% - "+otherHeight+"px)"}else{this.element.style.height="";this.element.style.height=this.table.element.clientHeight-otherHeight+"px";this.element.scrollTop=this.scrollTop}this.renderer.resize();if(!this.fixedHeight&&initialHeight!=this.element.clientHeight){if(this.subscribed("table-resize")){this.dispatch("table-resize")}else{this.redraw()}}}}},{key:"reinitialize",value:function reinitialize(){this.rows.forEach(function(row){row.reinitialize(true)})}},{key:"blockRedraw",value:function blockRedraw(){this.redrawBlock=true;this.redrawBlockRestoreConfig=false}},{key:"restoreRedraw",value:function restoreRedraw(){this.redrawBlock=false;if(this.redrawBlockRestoreConfig){this.refreshActiveData(this.redrawBlockRestoreConfig.handler,this.redrawBlockRestoreConfig.skipStage,this.redrawBlockRestoreConfig.renderInPosition);this.redrawBlockRestoreConfig=false}else{if(this.redrawBlockRederInPosition){this.reRenderInPosition()}}this.redrawBlockRederInPosition=false}},{key:"redraw",value:function redraw(force){var left=this.scrollLeft;this.adjustTableSize();this.table.tableWidth=this.table.element.clientWidth;if(!force){this.reRenderInPosition();this.scrollHorizontal(left);if(!this.displayRowsCount){if(this.table.options.placeholder){this.getElement().appendChild(this.table.options.placeholder)}}}else{this.renderTable()}}},{key:"resetScroll",value:function resetScroll(){this.element.scrollLeft=0;this.element.scrollTop=0;if(this.table.browser==="ie"){var event=document.createEvent("Event");event.initEvent("scroll",false,true);this.element.dispatchEvent(event)}else{this.element.dispatchEvent(new Event("scroll"))}}}]);return RowManager}(CoreFeature);var FooterManager=function(_CoreFeature){_inherits(FooterManager,_CoreFeature);var _super=_createSuper(FooterManager);function FooterManager(table){var _this;_classCallCheck(this,FooterManager);_this=_super.call(this,table);_this.active=false;_this.element=_this.createElement();_this.external=false;_this.links=[];_this.initializeElement();return _this}_createClass(FooterManager,[{key:"initialize",value:function initialize(){this.initializeElement()}},{key:"createElement",value:function createElement(){var el=document.createElement("div");el.classList.add("tabulator-footer");return el}},{key:"initializeElement",value:function initializeElement(){if(this.table.options.footerElement){switch(_typeof(this.table.options.footerElement)){case"string":if(this.table.options.footerElement[0]==="<"){this.element.innerHTML=this.table.options.footerElement}else{this.external=true;this.element=document.querySelector(this.table.options.footerElement)}break;default:this.element=this.table.options.footerElement;break}}}},{key:"getElement",value:function getElement(){return this.element}},{key:"append",value:function append(element,parent){this.activate(parent);this.element.appendChild(element);this.table.rowManager.adjustTableSize()}},{key:"prepend",value:function prepend(element,parent){this.activate(parent);this.element.insertBefore(element,this.element.firstChild);this.table.rowManager.adjustTableSize()}},{key:"remove",value:function remove(element){element.parentNode.removeChild(element);this.deactivate()}},{key:"deactivate",value:function deactivate(force){if(!this.element.firstChild||force){if(!this.external){this.element.parentNode.removeChild(this.element)}this.active=false}}},{key:"activate",value:function activate(parent){if(!this.active){this.active=true;if(!this.external){this.table.element.appendChild(this.getElement());this.table.element.style.display=""}}if(parent){this.links.push(parent)}}},{key:"redraw",value:function redraw(){this.links.forEach(function(link){link.footerRedraw()})}}]);return FooterManager}(CoreFeature);var InteractionManager=function(_CoreFeature){_inherits(InteractionManager,_CoreFeature);var _super=_createSuper(InteractionManager);function InteractionManager(table){var _this;_classCallCheck(this,InteractionManager);_this=_super.call(this,table);_this.el=null;_this.abortClasses=["tabulator-headers","tabulator-table"];_this.previousTargets={};_this.listeners=["click","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","touchstart","touchend"];_this.componentMap={"tabulator-cell":"cell","tabulator-row":"row","tabulator-group":"group","tabulator-col":"column"};_this.pseudoTrackers={row:{subscriber:null,target:null},cell:{subscriber:null,target:null},group:{subscriber:null,target:null},column:{subscriber:null,target:null}};_this.pseudoTracking=false;return _this}_createClass(InteractionManager,[{key:"initialize",value:function initialize(){this.el=this.table.element;this.buildListenerMap();this.bindSubscriptionWatchers()}},{key:"buildListenerMap",value:function buildListenerMap(){var listenerMap={};this.listeners.forEach(function(listener){listenerMap[listener]={handler:null,components:[]}});this.listeners=listenerMap}},{key:"bindPseudoEvents",value:function bindPseudoEvents(){var _this2=this;Object.keys(this.pseudoTrackers).forEach(function(key){_this2.pseudoTrackers[key].subscriber=_this2.pseudoMouseEnter.bind(_this2,key);_this2.subscribe(key+"-mouseover",_this2.pseudoTrackers[key].subscriber)});this.pseudoTracking=true}},{key:"pseudoMouseEnter",value:function pseudoMouseEnter(key,e,target){if(this.pseudoTrackers[key].target!==target){if(this.pseudoTrackers[key].target){this.dispatch(key+"-mouseleave",e,target)}this.pseudoMouseLeave(key,e);this.pseudoTrackers[key].target=target;this.dispatch(key+"-mouseenter",e,target)}}},{key:"pseudoMouseLeave",value:function pseudoMouseLeave(key,e){var _this3=this;var leaveList=Object.keys(this.pseudoTrackers),linkedKeys={row:["cell"],cell:["row"]};leaveList=leaveList.filter(function(item){var links=linkedKeys[key];return item!==key&&(!links||links&&!links.includes(item))});leaveList.forEach(function(key){var target=_this3.pseudoTrackers[key].target;if(_this3.pseudoTrackers[key].target){_this3.dispatch(key+"-mouseleave",e,target);_this3.pseudoTrackers[key].target=null}})}},{key:"bindSubscriptionWatchers",value:function bindSubscriptionWatchers(){var listeners=Object.keys(this.listeners),components=Object.values(this.componentMap);for(var _i=0,_components=components;_i<_components.length;_i++){var comp=_components[_i];var _iterator=_createForOfIteratorHelper(listeners),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var listener=_step.value;var key=comp+"-"+listener;this.subscriptionChange(key,this.subscriptionChanged.bind(this,comp,listener))}}catch(err){_iterator.e(err)}finally{_iterator.f()}}this.subscribe("table-destroy",this.clearWatchers.bind(this))}},{key:"subscriptionChanged",value:function subscriptionChanged(component,key,added){var listener=this.listeners[key].components,index=listener.indexOf(component),changed=false;if(added){if(index===-1){listener.push(component);changed=true}}else{if(!this.subscribed(component+"-"+key)){if(index>-1){listener.splice(index,1);changed=true}}}if((key==="mouseenter"||key==="mouseleave")&&!this.pseudoTracking){this.bindPseudoEvents()}if(changed){this.updateEventListeners()}}},{key:"updateEventListeners",value:function updateEventListeners(){for(var key in this.listeners){var listener=this.listeners[key];if(listener.components.length){if(!listener.handler){listener.handler=this.track.bind(this,key);this.el.addEventListener(key,listener.handler)}}else{if(listener.handler){this.el.removeEventListener(key,listener.handler);listener.handler=null}}}}},{key:"track",value:function track(type,e){var path=e.composedPath&&e.composedPath()||e.path;var targets=this.findTargets(path);targets=this.bindComponents(type,targets);this.triggerEvents(type,e,targets);if(this.pseudoTracking&&(type=="mouseover"||type=="mouseleave")&&!Object.keys(targets).length){this.pseudoMouseLeave("none",e)}}},{key:"findTargets",value:function findTargets(path){var _this4=this;var targets={};var componentMap=Object.keys(this.componentMap);var _iterator2=_createForOfIteratorHelper(path),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var el=_step2.value;var classList=el.classList?_toConsumableArray(el.classList):[];var abort=classList.filter(function(item){return _this4.abortClasses.includes(item)});if(abort.length){break}var elTargets=classList.filter(function(item){return componentMap.includes(item)});var _iterator3=_createForOfIteratorHelper(elTargets),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var target=_step3.value;targets[this.componentMap[target]]=el}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}if(targets.group&&targets.group===targets.row){delete targets.row}return targets}},{key:"bindComponents",value:function bindComponents(type,targets){var _this5=this;var keys=Object.keys(targets).reverse(),listener=this.listeners[type],targetMatches={};var _iterator4=_createForOfIteratorHelper(keys),_step4;try{var _loop=function _loop(){var key=_step4.value;var component=void 0;var target=targets[key];var previousTarget=_this5.previousTargets[key];if(previousTarget&&previousTarget.target===target){component=previousTarget.component}else{switch(key){case"row":case"group":if(listener.components.includes("row")||listener.components.includes("cell")){var rows=_this5.table.rowManager.getVisibleRows(true);component=rows.find(function(row){return row.getElement()===target})}break;case"column":if(listener.components.includes("column")){component=_this5.table.columnManager.findColumn(target)}break;case"cell":if(listener.components.includes("cell")){component=targets["row"].findCell(target)}break}}if(component){targets[key]=component;targetMatches[key]={target:target,component:component}}};for(_iterator4.s();!(_step4=_iterator4.n()).done;){_loop()}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}this.previousTargets=targetMatches;return targets}},{key:"triggerEvents",value:function triggerEvents(type,e,targets){var listener=this.listeners[type];for(var key in targets){if(targets[key]&&listener.components.includes(key)){this.dispatch(key+"-"+type,e,targets[key])}}}},{key:"clearWatchers",value:function clearWatchers(){for(var key in this.listeners){var listener=this.listeners[key];if(listener.handler){this.el.removeEventListener(key,listener.handler);listener.handler=null}}}}]);return InteractionManager}(CoreFeature);var ComponentFunctionBinder=function(){function ComponentFunctionBinder(table){_classCallCheck(this,ComponentFunctionBinder);this.table=table;this.bindings={}}_createClass(ComponentFunctionBinder,[{key:"bind",value:function bind(type,funcName,handler){if(!this.bindings[type]){this.bindings[type]={}}if(this.bindings[type][funcName]){console.warn("Unable to bind component handler, a matching function name is already bound",type,funcName,hanlder)}else{this.bindings[type][funcName]=handler}}},{key:"handle",value:function handle(type,component,name){if(this.bindings[type]&&this.bindings[type][name]){return this.bindings[type][name].bind(null,component)}else{if(name!=="then"&&typeof name==="string"&&!name.startsWith("_")){console.error("The "+type+" component does not have a "+name+" function, have you checked that you have the correct Tabulator module installed?")}}}}]);return ComponentFunctionBinder}();var DataLoader=function(_CoreFeature){_inherits(DataLoader,_CoreFeature);var _super=_createSuper(DataLoader);function DataLoader(table){var _this;_classCallCheck(this,DataLoader);_this=_super.call(this,table);_this.loaderElement=_this.createLoaderElement();_this.msgElement=_this.createMsgElement();_this.loadingElement=null;_this.errorElement=null;_this.requestOrder=0;_this.loading=false;return _this}_createClass(DataLoader,[{key:"initialize",value:function initialize(){var template;this.loaderElement.appendChild(this.msgElement);if(this.table.options.dataLoaderLoading){if(typeof this.table.options.dataLoaderLoading=="string"){template=document.createElement("template");template.innerHTML=this.table.options.dataLoaderLoading.trim();this.loadingElement=template.firstElementChild}else{this.loadingElement=this.table.options.dataLoaderLoading}}if(this.table.options.dataLoaderError){if(typeof this.table.options.dataLoaderError=="string"){template=document.createElement("template");template.innerHTML=this.table.options.dataLoaderError.trim();this.errorElement=template.firstElementChild}else{this.errorElement=this.table.options.dataLoaderError}}}},{key:"createLoaderElement",value:function createLoaderElement(){var el=document.createElement("div");el.classList.add("tabulator-loader");return el}},{key:"createMsgElement",value:function createMsgElement(){var el=document.createElement("div");el.classList.add("tabulator-loader-msg");el.setAttribute("role","alert");return el}},{key:"load",value:function load(data,params,config,replace,silent){var _this2=this;var requestNo=++this.requestOrder;this.dispatchExternal("dataLoading",data);if(data&&(data.indexOf("{")==0||data.indexOf("[")==0)){data=JSON.parse(data)}if(this.confirm("data-loading",[data,params,config,silent])){this.loading=true;if(!silent){this.showLoader()}params=this.chain("data-params",[data,config,silent],params||{},params||{});params=this.mapParams(params,this.table.options.dataSendParams);var result=this.chain("data-load",[data,params,config,silent],Promise.resolve([]));return result.then(function(response){if(!Array.isArray(response)&&_typeof(response)=="object"){response=_this2.mapParams(response,_this2.objectInvert(_this2.table.options.dataReceiveParams))}var rowData=_this2.chain("data-loaded",response,null,response);if(requestNo==_this2.requestOrder){_this2.hideLoader();if(rowData!==false){_this2.dispatchExternal("dataLoaded",rowData);_this2.table.rowManager.setData(rowData,replace,!replace)}}else{console.warn("Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made")}})["catch"](function(error){console.error("Data Load Error: ",error);_this2.dispatchExternal("dataLoadError",error);if(!silent){_this2.showError()}setTimeout(function(){_this2.hideLoader()},3e3)})["finally"](function(){_this2.loading=false})}else{this.dispatchExternal("dataLoaded",data);if(!data){data=[]}this.table.rowManager.setData(data,replace,!replace);return Promise.resolve()}}},{key:"mapParams",value:function mapParams(params,map){var output={};for(var key in params){output[map.hasOwnProperty(key)?map[key]:key]=params[key]}return output}},{key:"objectInvert",value:function objectInvert(obj){var output={};for(var key in obj){output[obj[key]]=key}return output}},{key:"blockActiveLoad",value:function blockActiveLoad(){this.requestOrder++}},{key:"showLoader",value:function showLoader(){var shouldLoad=typeof this.table.options.dataLoader==="function"?this.table.options.dataLoader():this.table.options.dataLoader;if(shouldLoad){this.hideLoader();while(this.msgElement.firstChild){this.msgElement.removeChild(this.msgElement.firstChild)}this.msgElement.classList.remove("tabulator-error");this.msgElement.classList.add("tabulator-loading");if(this.loadingElement){this.msgElement.appendChild(this.loadingElement)}else{this.msgElement.innerHTML=this.langText("data|loading")}this.table.element.appendChild(this.loaderElement)}}},{key:"showError",value:function showError(){this.hideLoader();while(this.msgElement.firstChild){this.msgElement.removeChild(this.msgElement.firstChild)}this.msgElement.classList.remove("tabulator-loading");this.msgElement.classList.add("tabulator-error");if(this.errorElement){this.msgElement.appendChild(this.errorElement)}else{this.msgElement.innerHTML=this.langText("data|error")}this.table.element.appendChild(this.loaderElement)}},{key:"hideLoader",value:function hideLoader(){if(this.loaderElement.parentNode){this.loaderElement.parentNode.removeChild(this.loaderElement)}}}]);return DataLoader}(CoreFeature);var ExternalEventBus=function(){function ExternalEventBus(table,optionsList,debug){_classCallCheck(this,ExternalEventBus);this.table=table;this.events={};this.optionsList=optionsList||{};this.subscriptionNotifiers={};this.dispatch=debug?this._debugDispatch.bind(this):this._dispatch.bind(this);this.debug=debug}_createClass(ExternalEventBus,[{key:"subscriptionChange",value:function subscriptionChange(key,callback){if(!this.subscriptionNotifiers[key]){this.subscriptionNotifiers[key]=[]}this.subscriptionNotifiers[key].push(callback);if(this.subscribed(key)){this._notifiySubscriptionChange(key,true)}}},{key:"subscribe",value:function subscribe(key,callback){if(!this.events[key]){this.events[key]=[]}this.events[key].push(callback);this._notifiySubscriptionChange(key,true)}},{key:"unsubscribe",value:function unsubscribe(key,callback){var index;if(this.events[key]){if(callback){index=this.events[key].findIndex(function(item){return item===callback});if(index>-1){this.events[key].splice(index,1)}else{console.warn("Cannot remove event, no matching event found:",key,callback);return}}else{delete this.events[key]}}else{console.warn("Cannot remove event, no events set on:",key);return}this._notifiySubscriptionChange(key,false)}},{key:"subscribed",value:function subscribed(key){return this.events[key]&&this.events[key].length}},{key:"_notifiySubscriptionChange",value:function _notifiySubscriptionChange(key,subscribed){var notifiers=this.subscriptionNotifiers[key];if(notifiers){notifiers.forEach(function(callback){callback(subscribed)})}}},{key:"_dispatch",value:function _dispatch(){var _this=this;var args=Array.from(arguments),key=args.shift(),result;if(this.events[key]){this.events[key].forEach(function(callback,i){var callResult=callback.apply(_this.table,args);if(!i){result=callResult}})}return result}},{key:"_debugDispatch",value:function _debugDispatch(){var args=Array.from(arguments),key=args[0];args[0]="ExternalEvent:"+args[0];if(this.debug===true||this.debug.includes(key)){var _console;(_console=console).log.apply(_console,_toConsumableArray(args))}return this._dispatch.apply(this,arguments)}}]);return ExternalEventBus}();var InternalEventBus=function(){function InternalEventBus(debug){_classCallCheck(this,InternalEventBus);this.events={};this.subscriptionNotifiers={};this.dispatch=debug?this._debugDispatch.bind(this):this._dispatch.bind(this);this.chain=debug?this._debugChain.bind(this):this._chain.bind(this);this.confirm=debug?this._debugConfirm.bind(this):this._confirm.bind(this);this.debug=debug}_createClass(InternalEventBus,[{key:"subscriptionChange",value:function subscriptionChange(key,callback){if(!this.subscriptionNotifiers[key]){this.subscriptionNotifiers[key]=[]}this.subscriptionNotifiers[key].push(callback);if(this.subscribed(key)){this._notifiySubscriptionChange(key,true)}}},{key:"subscribe",value:function subscribe(key,callback){var priority=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1e4;if(!this.events[key]){this.events[key]=[]}this.events[key].push({callback:callback,priority:priority});this.events[key].sort(function(a,b){return a.priority-b.priority});this._notifiySubscriptionChange(key,true)}},{key:"unsubscribe",value:function unsubscribe(key,callback){var index;if(this.events[key]){if(callback){index=this.events[key].findIndex(function(item){return item.callback===callback});if(index>-1){this.events[key].splice(index,1)}else{console.warn("Cannot remove event, no matching event found:",key,callback);return}}}else{console.warn("Cannot remove event, no events set on:",key);return}this._notifiySubscriptionChange(key,false)}},{key:"subscribed",value:function subscribed(key){return this.events[key]&&this.events[key].length}},{key:"_chain",value:function _chain(key,args,initialValue,fallback){var _this=this;var value=initialValue;if(!Array.isArray(args)){args=[args]}if(this.subscribed(key)){this.events[key].forEach(function(subscriber,i){value=subscriber.callback.apply(_this,args.concat([value]))});return value}else{return typeof fallback==="function"?fallback():fallback}}},{key:"_confirm",value:function _confirm(key,args){var _this2=this;var confirmed=false;if(!Array.isArray(args)){args=[args]}if(this.subscribed(key)){this.events[key].forEach(function(subscriber,i){if(subscriber.callback.apply(_this2,args)){confirmed=true}})}return confirmed}},{key:"_notifiySubscriptionChange",value:function _notifiySubscriptionChange(key,subscribed){var notifiers=this.subscriptionNotifiers[key];if(notifiers){notifiers.forEach(function(callback){callback(subscribed)})}}},{key:"_dispatch",value:function _dispatch(){var _this3=this;var args=Array.from(arguments),key=args.shift();if(this.events[key]){this.events[key].forEach(function(subscriber){var callResult=subscriber.callback.apply(_this3,args)})}}},{key:"_debugDispatch",value:function _debugDispatch(){var args=Array.from(arguments),key=args[0];args[0]="InternalEvent:"+key;if(this.debug===true||this.debug.includes(key)){var _console;(_console=console).log.apply(_console,_toConsumableArray(args))}return this._dispatch.apply(this,arguments)}},{key:"_debugChain",value:function _debugChain(){var args=Array.from(arguments),key=args[0];args[0]="InternalEvent:"+key;if(this.debug===true||this.debug.includes(key)){var _console2;(_console2=console).log.apply(_console2,_toConsumableArray(args))}return this._chain.apply(this,arguments)}},{key:"_debugConfirm",value:function _debugConfirm(){var args=Array.from(arguments),key=args[0];args[0]="InternalEvent:"+key;if(this.debug===true||this.debug.includes(key)){var _console3;(_console3=console).log.apply(_console3,_toConsumableArray(args))}return this._confirm.apply(this,arguments)}}]);return InternalEventBus}();var TableRegistry=function(){function TableRegistry(){_classCallCheck(this,TableRegistry)}_createClass(TableRegistry,null,[{key:"register",value:function register(table){TableRegistry.tables.push(table)}},{key:"deregister",value:function deregister(table){var index=TableRegistry.tables.indexOf(table);if(index>-1){TableRegistry.tables.splice(index,1)}}},{key:"lookupTable",value:function lookupTable(query,silent){var results=[],matches,match;if(typeof query==="string"){matches=document.querySelectorAll(query);if(matches.length){for(var i=0;i<matches.length;i++){match=TableRegistry.matchElement(matches[i]);if(match){results.push(match)}}}}else if(typeof HTMLElement!=="undefined"&&query instanceof HTMLElement||query instanceof Tabulator){match=TableRegistry.matchElement(query);if(match){results.push(match)}}else if(Array.isArray(query)){query.forEach(function(item){results=results.concat(TableRegistry.lookupTable(item))})}else{if(!silent){console.warn("Table Connection Error - Invalid Selector",query)}}return results}},{key:"matchElement",value:function matchElement(element){return TableRegistry.tables.find(function(table){return element instanceof Tabulator?table===element:table.element===element})}}]);return TableRegistry}();TableRegistry.tables=[];var Module=function(_CoreFeature){_inherits(Module,_CoreFeature);var _super=_createSuper(Module);function Module(table,name){var _this;_classCallCheck(this,Module);_this=_super.call(this,table);_this._handler=null;return _this}_createClass(Module,[{key:"initialize",value:function initialize(){}},{key:"registerTableOption",value:function registerTableOption(key,value){this.table.optionsList.register(key,value)}},{key:"registerColumnOption",value:function registerColumnOption(key,value){this.table.columnManager.optionsList.register(key,value)}},{key:"registerTableFunction",value:function registerTableFunction(name,func){if(typeof this.table[name]==="undefined"){this.table[name]=func}else{console.warn("Unable to bind table function, name already in use",name)}}},{key:"registerComponentFunction",value:function registerComponentFunction(component,func,handler){return this.table.componentFunctionBinder.bind(component,func,handler)}},{key:"registerDataHandler",value:function registerDataHandler(handler,priority){this.table.rowManager.registerDataPipelineHandler(handler,priority);this._handler=handler}},{key:"registerDisplayHandler",value:function registerDisplayHandler(handler,priority){this.table.rowManager.registerDisplayPipelineHandler(handler,priority);this._handler=handler}},{key:"refreshData",value:function refreshData(renderInPosition,handler){if(!handler){handler=this._handler}if(handler){this.table.rowManager.refreshActiveData(handler,false,renderInPosition)}}}]);return Module}(CoreFeature);function fitData(columns){this.table.columnManager.renderer.reinitializeColumnWidths(columns);if(this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",true)){this.table.modules.responsiveLayout.update()}}function fitDataGeneral(columns){columns.forEach(function(column){column.reinitializeWidth()});if(this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",true)){this.table.modules.responsiveLayout.update()}}function fitDataStretch(columns){var _this=this;var colsWidth=0,tableWidth=this.table.rowManager.element.clientWidth,gap=0,lastCol=false;columns.forEach(function(column,i){if(!column.widthFixed){column.reinitializeWidth()}if(_this.table.options.responsiveLayout?column.modules.responsive.visible:column.visible){lastCol=column}if(column.visible){colsWidth+=column.getWidth()}});if(lastCol){gap=tableWidth-colsWidth+lastCol.getWidth();if(this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",true)){lastCol.setWidth(0);this.table.modules.responsiveLayout.update()}if(gap>0){lastCol.setWidth(gap)}else{lastCol.reinitializeWidth()}}else{if(this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",true)){this.table.modules.responsiveLayout.update()}}}function fitColumns(columns){var totalWidth=this.table.element.clientWidth;var fixedWidth=0;var flexWidth=0;var flexGrowUnits=0;var flexColWidth=0;var flexColumns=[];var fixedShrinkColumns=[];var flexShrinkUnits=0;var overflowWidth=0;var gapFill=0;function calcWidth(width){var colWidth;if(typeof width=="string"){if(width.indexOf("%")>-1){colWidth=totalWidth/100*parseInt(width)}else{colWidth=parseInt(width)}}else{colWidth=width}return colWidth}function scaleColumns(columns,freeSpace,colWidth,shrinkCols){var oversizeCols=[],oversizeSpace=0,remainingSpace=0,nextColWidth=0,remainingFlexGrowUnits=flexGrowUnits,gap=0,changeUnits=0,undersizeCols=[];function calcGrow(col){return colWidth*(col.column.definition.widthGrow||1)}function calcShrink(col){return calcWidth(col.width)-colWidth*(col.column.definition.widthShrink||0)}columns.forEach(function(col,i){var width=shrinkCols?calcShrink(col):calcGrow(col);if(col.column.minWidth>=width){oversizeCols.push(col)}else{if(col.column.maxWidth&&col.column.maxWidth<width){col.width=col.column.maxWidth;freeSpace-=col.column.maxWidth;remainingFlexGrowUnits-=shrinkCols?col.column.definition.widthShrink||1:col.column.definition.widthGrow||1;if(remainingFlexGrowUnits){colWidth=Math.floor(freeSpace/remainingFlexGrowUnits)}}else{undersizeCols.push(col);changeUnits+=shrinkCols?col.column.definition.widthShrink||1:col.column.definition.widthGrow||1}}});if(oversizeCols.length){oversizeCols.forEach(function(col){oversizeSpace+=shrinkCols?col.width-col.column.minWidth:col.column.minWidth;col.width=col.column.minWidth});remainingSpace=freeSpace-oversizeSpace;nextColWidth=changeUnits?Math.floor(remainingSpace/changeUnits):remainingSpace;gap=remainingSpace-nextColWidth*changeUnits;gap+=scaleColumns(undersizeCols,remainingSpace,nextColWidth,shrinkCols)}else{gap=changeUnits?freeSpace-Math.floor(freeSpace/changeUnits)*changeUnits:freeSpace;undersizeCols.forEach(function(column){column.width=shrinkCols?calcShrink(column):calcGrow(column)})}return gap}if(this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",true)){this.table.modules.responsiveLayout.update()}if(this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight){totalWidth-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth}columns.forEach(function(column){var width,minWidth,colWidth;if(column.visible){width=column.definition.width;minWidth=parseInt(column.minWidth);if(width){colWidth=calcWidth(width);fixedWidth+=colWidth>minWidth?colWidth:minWidth;if(column.definition.widthShrink){fixedShrinkColumns.push({column:column,width:colWidth>minWidth?colWidth:minWidth});flexShrinkUnits+=column.definition.widthShrink}}else{flexColumns.push({column:column,width:0});flexGrowUnits+=column.definition.widthGrow||1}}});flexWidth=totalWidth-fixedWidth;flexColWidth=Math.floor(flexWidth/flexGrowUnits);var gapFill=scaleColumns(flexColumns,flexWidth,flexColWidth,false);if(flexColumns.length&&gapFill>0){flexColumns[flexColumns.length-1].width+=+gapFill}flexColumns.forEach(function(col){flexWidth-=col.width});overflowWidth=Math.abs(gapFill)+flexWidth;if(overflowWidth>0&&flexShrinkUnits){gapFill=scaleColumns(fixedShrinkColumns,overflowWidth,Math.floor(overflowWidth/flexShrinkUnits),true)}if(fixedShrinkColumns.length){fixedShrinkColumns[fixedShrinkColumns.length-1].width-=gapFill}flexColumns.forEach(function(col){col.column.setWidth(col.width)});fixedShrinkColumns.forEach(function(col){col.column.setWidth(col.width)})}var defaultModes={fitData:fitData,fitDataFill:fitDataGeneral,fitDataTable:fitDataGeneral,fitDataStretch:fitDataStretch,fitColumns:fitColumns};var Layout=function(_Module){_inherits(Layout,_Module);var _super=_createSuper(Layout);function Layout(table){var _this;_classCallCheck(this,Layout);_this=_super.call(this,table,"layout");_this.mode=null;_this.registerTableOption("layout","fitData");_this.registerTableOption("layoutColumnsOnNewData",false);_this.registerColumnOption("widthGrow");_this.registerColumnOption("widthShrink");return _this}_createClass(Layout,[{key:"initialize",value:function initialize(){var layout=this.table.options.layout;if(Layout.modes[layout]){this.mode=layout}else{console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+layout);this.mode="fitData"}this.table.element.setAttribute("tabulator-layout",this.mode)}},{key:"getMode",value:function getMode(){return this.mode}},{key:"layout",value:function layout(){Layout.modes[this.mode].call(this,this.table.columnManager.columnsByIndex);this.dispatch("layout-refreshed")}}]);return Layout}(Module);Layout.moduleName="layout";Layout.modes=defaultModes;var defaultLangs={default:{groups:{item:"item",items:"items"},columns:{},data:{loading:"Loading",error:"Error"},pagination:{page_size:"Page Size",page_title:"Show Page",first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page",all:"All"},headerFilters:{default:"filter column...",columns:{}}}};var Localize=function(_Module){_inherits(Localize,_Module);var _super=_createSuper(Localize);function Localize(table){var _this;_classCallCheck(this,Localize);_this=_super.call(this,table);_this.locale="default";_this.lang=false;_this.bindings={};_this.langList={};_this.registerTableOption("locale",false);_this.registerTableOption("langs",{});return _this}_createClass(Localize,[{key:"initialize",value:function initialize(){this.langList=Helpers.deepClone(Localize.langs);if(this.table.options.columnDefaults.headerFilterPlaceholder!==false){this.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder)}for(var locale in this.table.options.langs){this.installLang(locale,this.table.options.langs[locale])}this.setLocale(this.table.options.locale);this.registerTableFunction("setLocale",this.setLocale.bind(this));this.registerTableFunction("getLocale",this.getLocale.bind(this));this.registerTableFunction("getLang",this.getLang.bind(this))}},{key:"setHeaderFilterPlaceholder",value:function setHeaderFilterPlaceholder(placeholder){this.langList["default"].headerFilters["default"]=placeholder}},{key:"setHeaderFilterColumnPlaceholder",value:function setHeaderFilterColumnPlaceholder(column,placeholder){this.langList["default"].headerFilters.columns[column]=placeholder;if(this.lang&&!this.lang.headerFilters.columns[column]){this.lang.headerFilters.columns[column]=placeholder}}},{key:"installLang",value:function installLang(locale,lang){if(this.langList[locale]){this._setLangProp(this.langList[locale],lang)}else{this.langList[locale]=lang}}},{key:"_setLangProp",value:function _setLangProp(lang,values){for(var key in values){if(lang[key]&&_typeof(lang[key])=="object"){this._setLangProp(lang[key],values[key])}else{lang[key]=values[key]}}}},{key:"setLocale",value:function setLocale(desiredLocale){desiredLocale=desiredLocale||"default";function traverseLang(trans,path){for(var prop in trans){if(_typeof(trans[prop])=="object"){if(!path[prop]){path[prop]={}}traverseLang(trans[prop],path[prop])}else{path[prop]=trans[prop]}}}if(desiredLocale===true&&navigator.language){desiredLocale=navigator.language.toLowerCase()}if(desiredLocale){if(!this.langList[desiredLocale]){var prefix=desiredLocale.split("-")[0];if(this.langList[prefix]){console.warn("Localization Error - Exact matching locale not found, using closest match: ",desiredLocale,prefix);desiredLocale=prefix}else{console.warn("Localization Error - Matching locale not found, using default: ",desiredLocale);desiredLocale="default"}}}this.locale=desiredLocale;this.lang=Helpers.deepClone(this.langList["default"]||{});if(desiredLocale!="default"){traverseLang(this.langList[desiredLocale],this.lang)}this.dispatchExternal("localized",this.locale,this.lang);this._executeBindings()}},{key:"getLocale",value:function getLocale(locale){return this.locale}},{key:"getLang",value:function getLang(locale){return locale?this.langList[locale]:this.lang}},{key:"getText",value:function getText(path,value){var path=value?path+"|"+value:path,pathArray=path.split("|"),text=this._getLangElement(pathArray,this.locale);return text||""}},{key:"_getLangElement",value:function _getLangElement(path,locale){var root=this.lang;path.forEach(function(level){var rootPath;if(root){rootPath=root[level];if(typeof rootPath!="undefined"){root=rootPath}else{root=false}}});return root}},{key:"bind",value:function bind(path,callback){if(!this.bindings[path]){this.bindings[path]=[]}this.bindings[path].push(callback);callback(this.getText(path),this.lang)}},{key:"_executeBindings",value:function _executeBindings(){var _this2=this;var _loop=function _loop(path){_this2.bindings[path].forEach(function(binding){binding(_this2.getText(path),_this2.lang)})};for(var path in this.bindings){_loop(path)}}}]);return Localize}(Module);Localize.moduleName="localize";Localize.langs=defaultLangs;var Comms=function(_Module){_inherits(Comms,_Module);var _super=_createSuper(Comms);function Comms(table){_classCallCheck(this,Comms);return _super.call(this,table)}_createClass(Comms,[{key:"initialize",value:function initialize(){this.registerTableFunction("tableComms",this.receive.bind(this))}},{key:"getConnections",value:function getConnections(selectors){var _this=this;var connections=[],connection;connection=TableRegistry.lookupTable(selectors);connection.forEach(function(con){if(_this.table!==con){connections.push(con)}});return connections}},{key:"send",value:function send(selectors,module,action,data){var _this2=this;var connections=this.getConnections(selectors);connections.forEach(function(connection){connection.tableComms(_this2.table.element,module,action,data)});if(!connections.length&&selectors){console.warn("Table Connection Error - No tables matching selector found",selectors)}}},{key:"receive",value:function receive(table,module,action,data){if(this.table.modExists(module)){return this.table.modules[module].commsReceived(table,action,data)}else{console.warn("Inter-table Comms Error - no such module:",module)}}}]);return Comms}(Module);Comms.moduleName="comms";var coreModules=Object.freeze({__proto__:null,LayoutModule:Layout,LocalizeModule:Localize,CommsModule:Comms});var ModuleBinder=function(){function ModuleBinder(tabulator,modules){_classCallCheck(this,ModuleBinder);this.bindStaticFuctionality(tabulator);this.bindModules(tabulator,coreModules,true);if(modules){this.bindModules(tabulator,modules)}}_createClass(ModuleBinder,[{key:"bindStaticFuctionality",value:function bindStaticFuctionality(tabulator){tabulator.moduleBindings={};tabulator.extendModule=function(name,property,values){if(tabulator.moduleBindings[name]){var source=tabulator.moduleBindings[name][property];if(source){if(_typeof(values)=="object"){for(var key in values){source[key]=values[key]}}else{console.warn("Module Error - Invalid value type, it must be an object")}}else{console.warn("Module Error - property does not exist:",property)}}else{console.warn("Module Error - module does not exist:",name)}};tabulator.registerModule=function(modules){if(!Array.isArray(modules)){modules=[modules]}modules.forEach(function(mod){tabulator.registerModuleBinding(mod)})};tabulator.registerModuleBinding=function(mod){tabulator.moduleBindings[mod.moduleName]=mod};tabulator.findTable=function(query){var results=TableRegistry.lookupTable(query,true);return Array.isArray(results)&&!results.length?false:results};tabulator.prototype.bindModules=function(){this.modules={};for(var name in tabulator.moduleBindings){var mod=tabulator.moduleBindings[name];this.modules[name]=new mod(this);if(mod.prototype.moduleCore){this.modulesCore[name]=this.modules[name]}else{this.modulesRegular[name]=this.modules[name]}}}}},{key:"bindModules",value:function bindModules(tabulator,modules,core){var mods=Object.values(modules);if(core){mods.forEach(function(mod){mod.prototype.moduleCore=true})}tabulator.registerModule(mods)}}]);return ModuleBinder}();var Tabulator=function(){function Tabulator(element,options){var _this=this;_classCallCheck(this,Tabulator);this.options={};this.columnManager=null;this.rowManager=null;this.footerManager=null;this.vdomHoz=null;this.externalEvents=null;this.eventBus=null;this.interactionMonitor=false;this.browser="";this.browserSlow=false;this.browserMobile=false;this.rtl=false;this.originalElement=null;this.componentFunctionBinder=new ComponentFunctionBinder(this);this.dataLoader=false;this.modules={};this.modulesCore={};this.modulesRegular={};this.optionsList=new OptionsList(this,"table constructor");this.initialized=false;if(this.initializeElement(element)){this.initialzeCoreSystems(options);setTimeout(function(){_this._create()})}TableRegistry.register(this)}_createClass(Tabulator,[{key:"initializeElement",value:function initializeElement(element){if(typeof HTMLElement!=="undefined"&&element instanceof HTMLElement){this.element=element;return true}else if(typeof element==="string"){this.element=document.querySelector(element);if(this.element){return true}else{console.error("Tabulator Creation Error - no element found matching selector: ",element);return false}}else{console.error("Tabulator Creation Error - Invalid element provided:",element);return false}}},{key:"initialzeCoreSystems",value:function initialzeCoreSystems(options){this.columnManager=new ColumnManager(this);this.rowManager=new RowManager(this);this.footerManager=new FooterManager(this);this.dataLoader=new DataLoader(this);this.bindModules();this.options=this.optionsList.generate(Tabulator.defaultOptions,options);this._clearObjectPointers();this._mapDeprecatedFunctionality();this.externalEvents=new ExternalEventBus(this,this.options,this.options.debugEventsExternal);this.eventBus=new InternalEventBus(this.options.debugEventsInternal);this.interactionMonitor=new InteractionManager(this);this.dataLoader.initialize();this.columnManager.initialize();this.rowManager.initialize();this.footerManager.initialize()}},{key:"_mapDeprecatedFunctionality",value:function _mapDeprecatedFunctionality(){}},{key:"_clearSelection",value:function _clearSelection(){this.element.classList.add("tabulator-block-select");if(window.getSelection){if(window.getSelection().empty){window.getSelection().empty()}else if(window.getSelection().removeAllRanges){window.getSelection().removeAllRanges()}}else if(document.selection){document.selection.empty()}this.element.classList.remove("tabulator-block-select")}},{key:"_create",value:function _create(){this.externalEvents.dispatch("tableBuilding");this.eventBus.dispatch("table-building");this._rtlCheck();this._buildElement();this._initializeTable();this._loadInitialData();this.initialized=true;this.externalEvents.dispatch("tableBuilt")}},{key:"_rtlCheck",value:function _rtlCheck(){var style=window.getComputedStyle(this.element);switch(this.options.textDirection){case"auto":if(style.direction!=="rtl"){break}case"rtl":this.element.classList.add("tabulator-rtl");this.rtl=true;break;case"ltr":this.element.classList.add("tabulator-ltr");default:this.rtl=false}}},{key:"_clearObjectPointers",value:function _clearObjectPointers(){this.options.columns=this.options.columns.slice(0);if(this.options.data&&!this.options.reactiveData){this.options.data=this.options.data.slice(0)}}},{key:"_buildElement",value:function _buildElement(){var element=this.element,options=this.options,newElement;if(element.tagName==="TABLE"){this.originalElement=this.element;newElement=document.createElement("div");var attributes=element.attributes;for(var i in attributes){if(_typeof(attributes[i])=="object"){newElement.setAttribute(attributes[i].name,attributes[i].value)}}element.parentNode.replaceChild(newElement,element);this.element=element=newElement}element.classList.add("tabulator");element.setAttribute("role","grid");while(element.firstChild){element.removeChild(element.firstChild)}if(options.height){options.height=isNaN(options.height)?options.height:options.height+"px";element.style.height=options.height}if(options.minHeight!==false){options.minHeight=isNaN(options.minHeight)?options.minHeight:options.minHeight+"px";element.style.minHeight=options.minHeight}if(options.maxHeight!==false){options.maxHeight=isNaN(options.maxHeight)?options.maxHeight:options.maxHeight+"px";element.style.maxHeight=options.maxHeight}}},{key:"_initializeTable",value:function _initializeTable(){var element=this.element,options=this.options;this.interactionMonitor.initialize();this.columnManager.initialize();this.rowManager.initialize();this._detectBrowser();for(var key in this.modulesCore){var mod=this.modulesCore[key];mod.initialize()}if(typeof options.placeholder=="string"){var el=document.createElement("div");el.classList.add("tabulator-placeholder");var span=document.createElement("span");span.innerHTML=options.placeholder;el.appendChild(span);options.placeholder=el}element.appendChild(this.columnManager.getElement());element.appendChild(this.rowManager.getElement());if(options.footerElement){this.footerManager.activate()}if(options.autoColumns&&options.data){this.columnManager.generateColumnsFromRowData(this.options.data)}for(var _key in this.modulesRegular){var _mod=this.modulesRegular[_key];_mod.initialize()}this.columnManager.setColumns(options.columns);this.eventBus.dispatch("table-built")}},{key:"_loadInitialData",value:function _loadInitialData(){this.dataLoader.load(this.options.data)}},{key:"destroy",value:function destroy(){var element=this.element;TableRegistry.deregister(this);this.eventBus.dispatch("table-destroy");this.rowManager.rows.forEach(function(row){row.wipe()});this.rowManager.rows=[];this.rowManager.activeRows=[];this.rowManager.displayRows=[];while(element.firstChild){element.removeChild(element.firstChild)}element.classList.remove("tabulator")}},{key:"_detectBrowser",value:function _detectBrowser(){var ua=navigator.userAgent||navigator.vendor||window.opera;if(ua.indexOf("Trident")>-1){this.browser="ie";this.browserSlow=true}else if(ua.indexOf("Edge")>-1){this.browser="edge";this.browserSlow=true}else if(ua.indexOf("Firefox")>-1){this.browser="firefox";this.browserSlow=false}else{this.browser="other";this.browserSlow=false}this.browserMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(ua)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(ua.substr(0,4))}},{key:"blockRedraw",value:function blockRedraw(){return this.rowManager.blockRedraw()}},{key:"restoreRedraw",value:function restoreRedraw(){return this.rowManager.restoreRedraw()}},{key:"setDataFromLocalFile",value:function setDataFromLocalFile(extensions){var _this2=this;return new Promise(function(resolve,reject){var input=document.createElement("input");input.type="file";input.accept=extensions||".json,application/json";input.addEventListener("change",function(e){var file=input.files[0],reader=new FileReader,data;reader.readAsText(file);reader.onload=function(e){try{data=JSON.parse(reader.result)}catch(e){console.warn("File Load Error - File contents is invalid JSON",e);reject(e);return}_this2.setData(data).then(function(data){resolve(data)})["catch"](function(err){resolve(err)})};reader.onerror=function(e){console.warn("File Load Error - Unable to read file");reject()}});input.click()})}},{key:"setData",value:function setData(data,params,config){if(this.initialized){return this.dataLoader.load(data,params,config,false)}else{console.warn("setData failed - table not yet initialized. To set initial data please use the 'data' property in the table constructor.")}}},{key:"clearData",value:function clearData(){this.dataLoader.blockActiveLoad();this.rowManager.clearData()}},{key:"getData",value:function getData(active){return this.rowManager.getData(active)}},{key:"getDataCount",value:function getDataCount(active){return this.rowManager.getDataCount(active)}},{key:"replaceData",value:function replaceData(data,params,config){if(this.initialized){return this.dataLoader.load(data,params,config,true,true)}else{console.warn("replaceData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}}},{key:"updateData",value:function updateData(data){var _this3=this;var responses=0;if(this.initialized){return new Promise(function(resolve,reject){_this3.dataLoader.blockActiveLoad();if(typeof data==="string"){data=JSON.parse(data)}if(data){data.forEach(function(item){var row=_this3.rowManager.findRow(item[_this3.options.index]);if(row){responses++;row.updateData(item).then(function(){responses--;if(!responses){resolve()}})}})}else{console.warn("Update Error - No data provided");reject("Update Error - No data provided")}})}else{console.warn("updateData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}}},{key:"addData",value:function addData(data,pos,index){var _this4=this;if(this.initialized){return new Promise(function(resolve,reject){_this4.dataLoader.blockActiveLoad();if(typeof data==="string"){data=JSON.parse(data)}if(data){_this4.rowManager.addRows(data,pos,index).then(function(rows){var output=[];rows.forEach(function(row){output.push(row.getComponent())});resolve(output)})}else{console.warn("Update Error - No data provided");reject("Update Error - No data provided")}})}else{console.warn("addData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}}},{key:"updateOrAddData",value:function updateOrAddData(data){var _this5=this;var rows=[],responses=0;if(this.initialized){return new Promise(function(resolve,reject){_this5.dataLoader.blockActiveLoad();if(typeof data==="string"){data=JSON.parse(data)}if(data){data.forEach(function(item){var row=_this5.rowManager.findRow(item[_this5.options.index]);responses++;if(row){row.updateData(item).then(function(){responses--;rows.push(row.getComponent());if(!responses){resolve(rows)}})}else{_this5.rowManager.addRows(item).then(function(newRows){responses--;rows.push(newRows[0].getComponent());if(!responses){resolve(rows)}})}})}else{console.warn("Update Error - No data provided");reject("Update Error - No data provided")}})}else{console.warn("updateOrAddData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}}},{key:"getRow",value:function getRow(index){var row=this.rowManager.findRow(index);if(row){return row.getComponent()}else{console.warn("Find Error - No matching row found:",index);return false}}},{key:"getRowFromPosition",value:function getRowFromPosition(position,active){var row=this.rowManager.getRowFromPosition(position,active);if(row){return row.getComponent()}else{console.warn("Find Error - No matching row found:",position);return false}}},{key:"deleteRow",value:function deleteRow(index){var _this6=this;var foundRows=[];if(!Array.isArray(index)){index=[index]}var _iterator=_createForOfIteratorHelper(index),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value;var row=this.rowManager.findRow(item,true);if(row){foundRows.push(row)}else{console.error("Delete Error - No matching row found:",item);return Promise.reject("Delete Error - No matching row found");break}}}catch(err){_iterator.e(err)}finally{_iterator.f()}foundRows.sort(function(a,b){return _this6.rowManager.rows.indexOf(a)>_this6.rowManager.rows.indexOf(b)?1:-1});foundRows.forEach(function(row){row["delete"]()});this.rowManager.reRenderInPosition();return Promise.resolve()}},{key:"addRow",value:function addRow(data,pos,index){if(this.initialized){if(typeof data==="string"){data=JSON.parse(data)}return this.rowManager.addRows(data,pos,index).then(function(rows){return rows[0].getComponent()})}else{console.warn("addRow failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}}},{key:"updateOrAddRow",value:function updateOrAddRow(index,data){var row=this.rowManager.findRow(index);if(typeof data==="string"){data=JSON.parse(data)}if(row){return row.updateData(data).then(function(){return row.getComponent()})}else{return this.rowManager.addRows(data).then(function(rows){return rows[0].getComponent()})}}},{key:"updateRow",value:function updateRow(index,data){var row=this.rowManager.findRow(index);if(typeof data==="string"){data=JSON.parse(data)}if(row){return row.updateData(data).then(function(){return Promise.resolve(row.getComponent())})}else{console.warn("Update Error - No matching row found:",index);return Promise.reject("Update Error - No matching row found")}}},{key:"scrollToRow",value:function scrollToRow(index,position,ifVisible){var row=this.rowManager.findRow(index);if(row){return this.rowManager.scrollToRow(row,position,ifVisible)}else{console.warn("Scroll Error - No matching row found:",index);return Promise.reject("Scroll Error - No matching row found")}}},{key:"moveRow",value:function moveRow(from,to,after){var fromRow=this.rowManager.findRow(from);if(fromRow){fromRow.moveToRow(to,after)}else{console.warn("Move Error - No matching row found:",from)}}},{key:"getRows",value:function getRows(active){return this.rowManager.getComponents(active)}},{key:"getRowPosition",value:function getRowPosition(index,active){var row=this.rowManager.findRow(index);if(row){return this.rowManager.getRowPosition(row,active)}else{console.warn("Position Error - No matching row found:",index);return false}}},{key:"setColumns",value:function setColumns(definition){if(this.initialized){this.columnManager.setColumns(definition)}else{console.warn("setColumns failed - table not yet initialized. To set initial data please use the 'columns' property in the table constructor.")}}},{key:"getColumns",value:function getColumns(structured){return this.columnManager.getComponents(structured)}},{key:"getColumn",value:function getColumn(field){var col=this.columnManager.findColumn(field);if(col){return col.getComponent()}else{console.warn("Find Error - No matching column found:",field);return false}}},{key:"getColumnDefinitions",value:function getColumnDefinitions(){return this.columnManager.getDefinitionTree()}},{key:"showColumn",value:function showColumn(field){var column=this.columnManager.findColumn(field);if(column){column.show()}else{console.warn("Column Show Error - No matching column found:",field);return false}}},{key:"hideColumn",value:function hideColumn(field){var column=this.columnManager.findColumn(field);if(column){column.hide()}else{console.warn("Column Hide Error - No matching column found:",field);return false}}},{key:"toggleColumn",value:function toggleColumn(field){var column=this.columnManager.findColumn(field);if(column){if(column.visible){column.hide()}else{column.show()}}else{console.warn("Column Visibility Toggle Error - No matching column found:",field);return false}}},{key:"addColumn",value:function addColumn(definition,before,field){var column=this.columnManager.findColumn(field);return this.columnManager.addColumn(definition,before,column).then(function(column){return column.getComponent()})}},{key:"deleteColumn",value:function deleteColumn(field){var column=this.columnManager.findColumn(field);if(column){return column["delete"]()}else{console.warn("Column Delete Error - No matching column found:",field);return Promise.reject()}}},{key:"updateColumnDefinition",value:function updateColumnDefinition(field,definition){var column=this.columnManager.findColumn(field);if(column){return column.updateDefinition(definition)}else{console.warn("Column Update Error - No matching column found:",field);return Promise.reject()}}},{key:"moveColumn",value:function moveColumn(from,to,after){var fromColumn=this.columnManager.findColumn(from);var toColumn=this.columnManager.findColumn(to);if(fromColumn){if(toColumn){this.columnManager.moveColumn(fromColumn,toColumn,after)}else{console.warn("Move Error - No matching column found:",toColumn)}}else{console.warn("Move Error - No matching column found:",from)}}},{key:"scrollToColumn",value:function scrollToColumn(field,position,ifVisible){var _this7=this;return new Promise(function(resolve,reject){var column=_this7.columnManager.findColumn(field);if(column){return _this7.columnManager.scrollToColumn(column,position,ifVisible)}else{console.warn("Scroll Error - No matching column found:",field);return Promise.reject("Scroll Error - No matching column found")}})}},{key:"redraw",value:function redraw(force){if(this.initialized){this.columnManager.redraw(force);this.rowManager.redraw(force)}else{console.warn("redraw failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}}},{key:"setHeight",value:function setHeight(height){this.options.height=isNaN(height)?height:height+"px";this.element.style.height=this.options.height;this.rowManager.initializeRenderer();this.rowManager.redraw()}},{key:"on",value:function on(key,callback){this.externalEvents.subscribe(key,callback)}},{key:"off",value:function off(key,callback){this.externalEvents.unsubscribe(key,callback)}},{key:"dispatchEvent",value:function dispatchEvent(){var _this$externalEvents;var args=Array.from(arguments),key=args.shift();(_this$externalEvents=this.externalEvents).dispatch.apply(_this$externalEvents,arguments)}},{key:"modExists",value:function modExists(plugin,required){if(this.modules[plugin]){return true}else{if(required){console.error("Tabulator Module Not Installed: "+plugin)}return false}}},{key:"module",value:function module(key){var mod=this.modules[key];if(!mod){console.error("Tabulator module not installed: "+key)}return mod}}]);return Tabulator}();Tabulator.defaultOptions=defaultOptions;new ModuleBinder(Tabulator);var defautlAccessors={};var Accessor=function(_Module){_inherits(Accessor,_Module);var _super=_createSuper(Accessor);function Accessor(table){var _this;_classCallCheck(this,Accessor);_this=_super.call(this,table);_this.allowedTypes=["","data","download","clipboard","print","htmlOutput"];_this.registerColumnOption("accessor");_this.registerColumnOption("accessorParams");_this.registerColumnOption("accessorData");_this.registerColumnOption("accessorDataParams");_this.registerColumnOption("accessorDownload");_this.registerColumnOption("accessorDownloadParams");_this.registerColumnOption("accessorClipboard");_this.registerColumnOption("accessorClipboardParams");_this.registerColumnOption("accessorPrint");_this.registerColumnOption("accessorPrintParams");_this.registerColumnOption("accessorHtmlOutput");_this.registerColumnOption("accessorHtmlOutputParams");return _this}_createClass(Accessor,[{key:"initialize",value:function initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this));this.subscribe("row-data-retrieve",this.transformRow.bind(this))}},{key:"initializeColumn",value:function initializeColumn(column){var _this2=this;var match=false,config={};this.allowedTypes.forEach(function(type){var key="accessor"+(type.charAt(0).toUpperCase()+type.slice(1)),accessor;if(column.definition[key]){accessor=_this2.lookupAccessor(column.definition[key]);if(accessor){match=true;config[key]={accessor:accessor,params:column.definition[key+"Params"]||{}}}}});if(match){column.modules.accessor=config}}},{key:"lookupAccessor",value:function lookupAccessor(value){var accessor=false;switch(_typeof(value)){case"string":if(Accessor.accessors[value]){accessor=Accessor.accessors[value]}else{console.warn("Accessor Error - No such accessor found, ignoring: ",value)}break;case"function":accessor=value;break}return accessor}},{key:"transformRow",value:function transformRow(row,type){var key="accessor"+(type.charAt(0).toUpperCase()+type.slice(1)),rowComponent=row.getComponent();var data=Helpers.deepClone(row.data||{});this.table.columnManager.traverse(function(column){var value,accessor,params,colCompnent;if(column.modules.accessor){accessor=column.modules.accessor[key]||column.modules.accessor.accessor||false;if(accessor){value=column.getFieldValue(data);if(value!="undefined"){colCompnent=column.getComponent();params=typeof accessor.params==="function"?accessor.params(value,data,type,colCompnent,rowComponent):accessor.params;column.setFieldValue(data,accessor.accessor(value,data,type,params,colCompnent,rowComponent))}}}});return data}}]);return Accessor}(Module);Accessor.moduleName="accessor";Accessor.accessors=defautlAccessors;var defaultConfig={method:"GET"};function generateParamsList(data,prefix){var output=[];prefix=prefix||"";if(Array.isArray(data)){data.forEach(function(item,i){output=output.concat(generateParamsList(item,prefix?prefix+"["+i+"]":i))})}else if(_typeof(data)==="object"){for(var key in data){output=output.concat(generateParamsList(data[key],prefix?prefix+"["+key+"]":key))}}else{output.push({key:prefix,value:data})}return output}function serializeParams(params){var output=generateParamsList(params),encoded=[];output.forEach(function(item){encoded.push(encodeURIComponent(item.key)+"="+encodeURIComponent(item.value))});return encoded.join("&")}function defaultURLGenerator(url,config,params){if(url){if(params&&Object.keys(params).length){if(!config.method||config.method.toLowerCase()=="get"){config.method="get";url+=(url.includes("?")?"&":"?")+serializeParams(params)}}}return url}function defaultLoaderPromise(url,config,params){var _this=this;var contentType;return new Promise(function(resolve,reject){url=_this.urlGenerator.call(_this.table,url,config,params);if(config.method.toUpperCase()!="GET"){contentType=_typeof(_this.table.options.ajaxContentType)==="object"?_this.table.options.ajaxContentType:_this.contentTypeFormatters[_this.table.options.ajaxContentType];if(contentType){for(var key in contentType.headers){if(!config.headers){config.headers={}}if(typeof config.headers[key]==="undefined"){config.headers[key]=contentType.headers[key]}}config.body=contentType.body.call(_this,url,config,params)}else{console.warn("Ajax Error - Invalid ajaxContentType value:",_this.table.options.ajaxContentType)}}if(url){if(typeof config.headers==="undefined"){config.headers={}}if(typeof config.headers.Accept==="undefined"){config.headers.Accept="application/json"}if(typeof config.headers["X-Requested-With"]==="undefined"){config.headers["X-Requested-With"]="XMLHttpRequest"}if(typeof config.mode==="undefined"){config.mode="cors"}if(config.mode=="cors"){if(typeof config.headers["Origin"]==="undefined"){config.headers["Origin"]=window.location.origin}if(typeof config.credentials==="undefined"){config.credentials="same-origin"}}else{if(typeof config.credentials==="undefined"){config.credentials="include"}}fetch(url,config).then(function(response){if(response.ok){response.json().then(function(data){resolve(data)})["catch"](function(error){reject(error);console.warn("Ajax Load Error - Invalid JSON returned",error)})}else{console.error("Ajax Load Error - Connection Error: "+response.status,response.statusText);reject(response)}})["catch"](function(error){console.error("Ajax Load Error - Connection Error: ",error);reject(error)})}else{console.warn("Ajax Load Error - No URL Set");resolve([])}})}function generateParamsList$1(data,prefix){var output=[];prefix=prefix||"";if(Array.isArray(data)){data.forEach(function(item,i){output=output.concat(generateParamsList$1(item,prefix?prefix+"["+i+"]":i))})}else if(_typeof(data)==="object"){for(var key in data){output=output.concat(generateParamsList$1(data[key],prefix?prefix+"["+key+"]":key))}}else{output.push({key:prefix,value:data})}return output}var defaultContentTypeFormatters={json:{headers:{"Content-Type":"application/json"},body:function body(url,config,params){return JSON.stringify(params)}},form:{headers:{},body:function body(url,config,params){var output=generateParamsList$1(params),form=new FormData;output.forEach(function(item){form.append(item.key,item.value)});return form}}};var Ajax=function(_Module){_inherits(Ajax,_Module);var _super=_createSuper(Ajax);function Ajax(table){var _this;_classCallCheck(this,Ajax);_this=_super.call(this,table);_this.config=false;_this.url="";_this.urlGenerator=false;_this.params=false;_this.loaderPromise=false;_this.registerTableOption("ajaxURL",false);_this.registerTableOption("ajaxURLGenerator",false);_this.registerTableOption("ajaxParams",{});_this.registerTableOption("ajaxConfig","get");_this.registerTableOption("ajaxContentType","form");_this.registerTableOption("ajaxRequestFunc",false);_this.registerTableOption("ajaxRequesting",function(){});_this.registerTableOption("ajaxResponse",false);_this.contentTypeFormatters=Ajax.contentTypeFormatters;return _this}_createClass(Ajax,[{key:"initialize",value:function initialize(){this.loaderPromise=this.table.options.ajaxRequestFunc||Ajax.defaultLoaderPromise;this.urlGenerator=this.table.options.ajaxURLGenerator||Ajax.defaultURLGenerator;if(this.table.options.ajaxParams){this.setParams(this.table.options.ajaxParams)}if(this.table.options.ajaxConfig){this.setConfig(this.table.options.ajaxConfig)}if(this.table.options.ajaxURL){this.setUrl(this.table.options.ajaxURL)}this.registerTableFunction("getAjaxUrl",this.getUrl.bind(this));this.subscribe("data-loading",this.requestDataCheck.bind(this));this.subscribe("data-load",this.requestData.bind(this))}},{key:"requestDataCheck",value:function requestDataCheck(data,params,config,silent){return!!(!data&&this.url||typeof data==="string")}},{key:"requestData",value:function requestData(data,params,config,silent,previousData){if(this.requestDataCheck(data)){if(data){this.setUrl(data)}if(params){this.setParams(params,true)}if(config){this.setConfig(config)}return this.sendRequest()}else{return previousData}}},{key:"setParams",value:function setParams(params,update){if(update){this.params=this.params||{};for(var key in params){this.params[key]=params[key]}}else{this.params=params}}},{key:"getParams",value:function getParams(){return this.params||{}}},{key:"setConfig",value:function setConfig(config){this._loadDefaultConfig();if(typeof config=="string"){this.config.method=config}else{for(var key in config){this.config[key]=config[key]}}}},{key:"_loadDefaultConfig",value:function _loadDefaultConfig(force){if(!this.config||force){this.config={};for(var key in Ajax.defaultConfig){this.config[key]=Ajax.defaultConfig[key]}}}},{key:"setUrl",value:function setUrl(url){this.url=url}},{key:"getUrl",value:function getUrl(){return this.url}},{key:"sendRequest",value:function sendRequest(silent){var _this2=this;var url=this.url;this._loadDefaultConfig();if(this.table.options.ajaxRequesting.call(this.table,this.url,this.params)!==false){return this.loaderPromise(url,this.config,this.params).then(function(data){if(_this2.table.options.ajaxResponse){data=_this2.table.options.ajaxResponse.call(_this2.table,_this2.url,_this2.params,data)}return data})}else{return Promise.reject()}}}]);return Ajax}(Module);Ajax.moduleName="ajax";Ajax.defaultConfig=defaultConfig;Ajax.defaultURLGenerator=defaultURLGenerator;Ajax.defaultLoaderPromise=defaultLoaderPromise;Ajax.contentTypeFormatters=defaultContentTypeFormatters;var defaultPasteActions={replace:function replace(rows){return this.table.setData(rows)},update:function update(rows){return this.table.updateOrAddData(rows)},insert:function insert(rows){return this.table.addData(rows)}};var defaultPasteParsers={table:function table(clipboard){var data=[],headerFindSuccess=true,columns=this.table.columnManager.columns,columnMap=[],rows=[];clipboard=clipboard.split("\n");clipboard.forEach(function(row){data.push(row.split("\t"))});if(data.length&&!(data.length===1&&data[0].length<2)){data[0].forEach(function(value){var column=columns.find(function(column){return value&&column.definition.title&&value.trim()&&column.definition.title.trim()===value.trim()});if(column){columnMap.push(column)}else{headerFindSuccess=false}});if(!headerFindSuccess){headerFindSuccess=true;columnMap=[];data[0].forEach(function(value){var column=columns.find(function(column){return value&&column.field&&value.trim()&&column.field.trim()===value.trim()});if(column){columnMap.push(column)}else{headerFindSuccess=false}});if(!headerFindSuccess){columnMap=this.table.columnManager.columnsByIndex}}if(headerFindSuccess){data.shift()}data.forEach(function(item){var row={};item.forEach(function(value,i){if(columnMap[i]){row[columnMap[i].field]=value}});rows.push(row)});return rows}else{return false}}};var Clipboard=function(_Module){_inherits(Clipboard,_Module);var _super=_createSuper(Clipboard);function Clipboard(table){var _this;_classCallCheck(this,Clipboard);_this=_super.call(this,table);_this.mode=true;_this.pasteParser=function(){};_this.pasteAction=function(){};_this.customSelection=false;_this.rowRange=false;_this.blocked=true;_this.registerTableOption("clipboard",false);_this.registerTableOption("clipboardCopyStyled",true);_this.registerTableOption("clipboardCopyConfig",false);_this.registerTableOption("clipboardCopyFormatter",false);_this.registerTableOption("clipboardCopyRowRange","active");_this.registerTableOption("clipboardPasteParser","table");_this.registerTableOption("clipboardPasteAction","insert");_this.registerColumnOption("clipboard");_this.registerColumnOption("titleClipboard");return _this}_createClass(Clipboard,[{key:"initialize",value:function initialize(){var _this2=this;this.mode=this.table.options.clipboard;this.rowRange=this.table.options.clipboardCopyRowRange;if(this.mode===true||this.mode==="copy"){this.table.element.addEventListener("copy",function(e){var plain,html,list;if(!_this2.blocked){e.preventDefault();if(_this2.customSelection){plain=_this2.customSelection;if(_this2.table.options.clipboardCopyFormatter){plain=_this2.table.options.clipboardCopyFormatter("plain",plain)}}else{var list=_this2.table.modules["export"].generateExportList(_this2.table.options.clipboardCopyConfig,_this2.table.options.clipboardCopyStyled,_this2.rowRange,"clipboard");html=_this2.table.modules["export"].genereateHTMLTable(list);plain=html?_this2.generatePlainContent(list):"";if(_this2.table.options.clipboardCopyFormatter){plain=_this2.table.options.clipboardCopyFormatter("plain",plain);html=_this2.table.options.clipboardCopyFormatter("html",html)}}if(window.clipboardData&&window.clipboardData.setData){window.clipboardData.setData("Text",plain)}else if(e.clipboardData&&e.clipboardData.setData){e.clipboardData.setData("text/plain",plain);if(html){e.clipboardData.setData("text/html",html)}}else if(e.originalEvent&&e.originalEvent.clipboardData.setData){e.originalEvent.clipboardData.setData("text/plain",plain);if(html){e.originalEvent.clipboardData.setData("text/html",html)}}_this2.dispatchExternal("clipboardCopied",plain,html);_this2.reset()}})}if(this.mode===true||this.mode==="paste"){this.table.element.addEventListener("paste",function(e){_this2.paste(e)})}this.setPasteParser(this.table.options.clipboardPasteParser);this.setPasteAction(this.table.options.clipboardPasteAction);this.registerTableFunction("copyToClipboard",this.copy.bind(this))}},{key:"reset",value:function reset(){this.blocked=true;this.customSelection=false}},{key:"generatePlainContent",value:function generatePlainContent(list){var output=[];list.forEach(function(row){var rowData=[];row.columns.forEach(function(col){var value="";if(col){if(row.type==="group"){col.value=col.component.getKey()}if(col.value===null){value=""}else{switch(_typeof(col.value)){case"object":value=JSON.stringify(col.value);break;case"undefined":value="";break;default:value=col.value}}}rowData.push(value)});output.push(rowData.join("\t"))});return output.join("\n")}},{key:"copy",value:function copy(range,internal){var range,sel,textRange;this.blocked=false;this.customSelection=false;if(this.mode===true||this.mode==="copy"){this.rowRange=range||this.table.options.clipboardCopyRowRange;if(typeof window.getSelection!="undefined"&&typeof document.createRange!="undefined"){range=document.createRange();range.selectNodeContents(this.table.element);sel=window.getSelection();if(sel.toString()&&internal){this.customSelection=sel.toString()}sel.removeAllRanges();sel.addRange(range)}else if(typeof document.selection!="undefined"&&typeof document.body.createTextRange!="undefined"){textRange=document.body.createTextRange();textRange.moveToElementText(this.table.element);textRange.select()}document.execCommand("copy");if(sel){sel.removeAllRanges()}}}},{key:"setPasteAction",value:function setPasteAction(action){switch(_typeof(action)){case"string":this.pasteAction=Clipboard.pasteActions[action];if(!this.pasteAction){console.warn("Clipboard Error - No such paste action found:",action)}break;case"function":this.pasteAction=action;break}}},{key:"setPasteParser",value:function setPasteParser(parser){switch(_typeof(parser)){case"string":this.pasteParser=Clipboard.pasteParsers[parser];if(!this.pasteParser){console.warn("Clipboard Error - No such paste parser found:",parser)}break;case"function":this.pasteParser=parser;break}}},{key:"paste",value:function paste(e){var data,rowData,rows;if(this.checkPaseOrigin(e)){data=this.getPasteData(e);rowData=this.pasteParser.call(this,data);if(rowData){e.preventDefault();if(this.table.modExists("mutator")){rowData=this.mutateData(rowData)}rows=this.pasteAction.call(this,rowData);this.dispatchExternal("clipboardPasted",data,rowData,rows)}else{this.dispatchExternal("clipboardPasteError",data)}}}},{key:"mutateData",value:function mutateData(data){var _this3=this;var output=[];if(Array.isArray(data)){data.forEach(function(row){output.push(_this3.table.modules.mutator.transformRow(row,"clipboard"))})}else{output=data}return output}},{key:"checkPaseOrigin",value:function checkPaseOrigin(e){var valid=true;if(e.target.tagName!="DIV"||this.table.modules.edit.currentCell){valid=false}return valid}},{key:"getPasteData",value:function getPasteData(e){var data;if(window.clipboardData&&window.clipboardData.getData){data=window.clipboardData.getData("Text")}else if(e.clipboardData&&e.clipboardData.getData){data=e.clipboardData.getData("text/plain")}else if(e.originalEvent&&e.originalEvent.clipboardData.getData){data=e.originalEvent.clipboardData.getData("text/plain")}return data}}]);return Clipboard}(Module);Clipboard.moduleName="clipboard";Clipboard.pasteActions=defaultPasteActions;Clipboard.pasteParsers=defaultPasteParsers;var CalcComponent=function(){function CalcComponent(row){_classCallCheck(this,CalcComponent);this._row=row;return new Proxy(this,{get:function get(target,name,receiver){if(typeof target[name]!=="undefined"){return target[name]}else{return target._row.table.componentFunctionBinder.handle("row",target._row,name)}}})}_createClass(CalcComponent,[{key:"getData",value:function getData(transform){return this._row.getData(transform)}},{key:"getElement",value:function getElement(){return this._row.getElement()}},{key:"getTable",value:function getTable(){return this._row.table}},{key:"getCells",value:function getCells(){var cells=[];this._row.getCells().forEach(function(cell){cells.push(cell.getComponent())});return cells}},{key:"getCell",value:function getCell(column){var cell=this._row.getCell(column);return cell?cell.getComponent():false}},{key:"_getSelf",value:function _getSelf(){return this._row}}]);return CalcComponent}();var defaultCalculations={avg:function avg(values,data,calcParams){var output=0,precision=typeof calcParams.precision!=="undefined"?calcParams.precision:2;if(values.length){output=values.reduce(function(sum,value){return Number(sum)+Number(value)});output=output/values.length;output=precision!==false?output.toFixed(precision):output}return parseFloat(output).toString()},max:function max(values,data,calcParams){var output=null,precision=typeof calcParams.precision!=="undefined"?calcParams.precision:false;values.forEach(function(value){value=Number(value);if(value>output||output===null){output=value}});return output!==null?precision!==false?output.toFixed(precision):output:""},min:function min(values,data,calcParams){var output=null,precision=typeof calcParams.precision!=="undefined"?calcParams.precision:false;values.forEach(function(value){value=Number(value);if(value<output||output===null){output=value}});return output!==null?precision!==false?output.toFixed(precision):output:""},sum:function sum(values,data,calcParams){var output=0,precision=typeof calcParams.precision!=="undefined"?calcParams.precision:false;if(values.length){values.forEach(function(value){value=Number(value);output+=!isNaN(value)?Number(value):0})}return precision!==false?output.toFixed(precision):output},concat:function concat(values,data,calcParams){var output=0;if(values.length){output=values.reduce(function(sum,value){return String(sum)+String(value)})}return output},count:function count(values,data,calcParams){var output=0;if(values.length){values.forEach(function(value){if(value){output++}})}return output}};var ColumnCalcs=function(_Module){_inherits(ColumnCalcs,_Module);var _super=_createSuper(ColumnCalcs);function ColumnCalcs(table){var _this;_classCallCheck(this,ColumnCalcs);_this=_super.call(this,table);_this.topCalcs=[];_this.botCalcs=[];_this.genColumn=false;_this.topElement=_this.createElement();_this.botElement=_this.createElement();_this.topRow=false;_this.botRow=false;_this.topInitialized=false;_this.botInitialized=false;_this.registerTableOption("columnCalcs",true);_this.registerColumnOption("topCalc");_this.registerColumnOption("topCalcParams");_this.registerColumnOption("topCalcFormatter");_this.registerColumnOption("topCalcFormatterParams");_this.registerColumnOption("bottomCalc");_this.registerColumnOption("bottomCalcParams");_this.registerColumnOption("bottomCalcFormatter");_this.registerColumnOption("bottomCalcFormatterParams");return _this}_createClass(ColumnCalcs,[{key:"createElement",value:function createElement(){var el=document.createElement("div");el.classList.add("tabulator-calcs-holder");return el}},{key:"initialize",value:function initialize(){this.genColumn=new Column$1({field:"value"},this);this.subscribe("cell-value-changed",this.cellValueChanged.bind(this));this.subscribe("column-init",this.initializeColumnCheck.bind(this));this.subscribe("row-deleted",this.rowsUpdated.bind(this));this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this));this.subscribe("row-added",this.rowsUpdated.bind(this));this.subscribe("column-moved",this.recalcActiveRows.bind(this));this.subscribe("column-add",this.recalcActiveRows.bind(this));this.subscribe("data-refeshed",this.recalcActiveRows.bind(this));this.subscribe("table-redraw",this.tableRedraw.bind(this));this.subscribe("rows-visible",this.visibleRows.bind(this));this.registerTableFunction("getCalcResults",this.getResults.bind(this));this.registerTableFunction("recalc",this.userRecalc.bind(this))}},{key:"tableRedraw",value:function tableRedraw(force){this.recalc(this.table.rowManager.activeRows);if(force){this.redraw()}}},{key:"userRecalc",value:function userRecalc(){this.recalc(this.table.rowManager.activeRows)}},{key:"visibleRows",value:function visibleRows(viewable,rows){if(this.topRow){rows.unshift(this.topRow)}if(this.botRow){rows.push(this.botRow)}return rows}},{key:"rowsUpdated",value:function rowsUpdated(row){if(this.table.options.groupBy){this.recalcRowGroup(this)}else{this.recalcActiveRows()}}},{key:"recalcActiveRows",value:function recalcActiveRows(){this.recalc(this.table.rowManager.activeRows)}},{key:"cellValueChanged",value:function cellValueChanged(cell){if(cell.column.definition.topCalc||cell.column.definition.bottomCalc){if(this.table.options.groupBy){if(this.table.options.columnCalcs=="table"||this.table.options.columnCalcs=="both"){this.recalcActiveRows()}if(this.table.options.columnCalcs!="table"){this.recalcRowGroup(cell.row)}}else{this.recalcActiveRows()}}}},{key:"initializeColumnCheck",value:function initializeColumnCheck(column){if(column.definition.topCalc||column.definition.bottomCalc){this.initializeColumn(column)}}},{key:"initializeColumn",value:function initializeColumn(column){var def=column.definition;var config={topCalcParams:def.topCalcParams||{},botCalcParams:def.bottomCalcParams||{}};if(def.topCalc){switch(_typeof(def.topCalc)){case"string":if(ColumnCalcs.calculations[def.topCalc]){config.topCalc=ColumnCalcs.calculations[def.topCalc]}else{console.warn("Column Calc Error - No such calculation found, ignoring: ",def.topCalc)}break;case"function":config.topCalc=def.topCalc;break}if(config.topCalc){column.modules.columnCalcs=config;this.topCalcs.push(column);if(this.table.options.columnCalcs!="group"){this.initializeTopRow()}}}if(def.bottomCalc){switch(_typeof(def.bottomCalc)){case"string":if(ColumnCalcs.calculations[def.bottomCalc]){config.botCalc=ColumnCalcs.calculations[def.bottomCalc]}else{console.warn("Column Calc Error - No such calculation found, ignoring: ",def.bottomCalc)}break;case"function":config.botCalc=def.bottomCalc;break}if(config.botCalc){column.modules.columnCalcs=config;this.botCalcs.push(column);if(this.table.options.columnCalcs!="group"){this.initializeBottomRow()}}}}},{key:"registerColumnField",value:function registerColumnField(){}},{key:"removeCalcs",value:function removeCalcs(){var changed=false;if(this.topInitialized){this.topInitialized=false;this.topElement.parentNode.removeChild(this.topElement);changed=true}if(this.botInitialized){this.botInitialized=false;this.table.footerManager.remove(this.botElement);changed=true}if(changed){this.table.rowManager.adjustTableSize()}}},{key:"initializeTopRow",value:function initializeTopRow(){if(!this.topInitialized){this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling);this.topInitialized=true}}},{key:"initializeBottomRow",value:function initializeBottomRow(){if(!this.botInitialized){this.table.footerManager.prepend(this.botElement);this.botInitialized=true}}},{key:"scrollHorizontal",value:function scrollHorizontal(left){if(this.botInitialized&&this.botRow){this.botRow.getElement().style.marginLeft=-left+"px"}}},{key:"recalc",value:function recalc(rows){var row;if(this.topInitialized||this.botInitialized){this.rowsToData(rows);if(this.topInitialized){if(this.topRow){this.topRow.deleteCells()}row=this.generateRow("top",this.rowsToData(rows));this.topRow=row;while(this.topElement.firstChild){this.topElement.removeChild(this.topElement.firstChild)}this.topElement.appendChild(row.getElement());row.initialize(true)}if(this.botInitialized){if(this.botRow){this.botRow.deleteCells()}row=this.generateRow("bottom",this.rowsToData(rows));this.botRow=row;while(this.botElement.firstChild){this.botElement.removeChild(this.botElement.firstChild)}this.botElement.appendChild(row.getElement());row.initialize(true)}this.table.rowManager.adjustTableSize();if(this.table.modExists("frozenColumns")){this.table.modules.frozenColumns.layout()}}}},{key:"recalcRowGroup",value:function recalcRowGroup(row){this.recalcGroup(this.table.modules.groupRows.getRowGroup(row))}},{key:"recalcAll",value:function recalcAll(){var _this2=this;if(this.topCalcs.length||this.botCalcs.length){if(this.table.options.columnCalcs!=="group"){this.recalcActiveRows()}if(this.table.options.groupBy&&this.table.options.columnCalcs!=="table"){var groups=this.table.modules.groupRows.getChildGroups();groups.forEach(function(group){_this2.recalcGroup(group)})}}}},{key:"recalcGroup",value:function recalcGroup(group){var data,rowData;if(group){if(group.calcs){if(group.calcs.bottom){data=this.rowsToData(group.rows);rowData=this.generateRowData("bottom",data);group.calcs.bottom.updateData(rowData);group.calcs.bottom.reinitialize()}if(group.calcs.top){data=this.rowsToData(group.rows);rowData=this.generateRowData("top",data);group.calcs.top.updateData(rowData);group.calcs.top.reinitialize()}}}}},{key:"generateTopRow",value:function generateTopRow(rows){return this.generateRow("top",this.rowsToData(rows))}},{key:"generateBottomRow",value:function generateBottomRow(rows){return this.generateRow("bottom",this.rowsToData(rows))}},{key:"rowsToData",value:function rowsToData(rows){var _this3=this;var data=[];rows.forEach(function(row){data.push(row.getData());if(_this3.table.options.dataTree&&_this3.table.options.dataTreeChildColumnCalcs){if(row.modules.dataTree.open){var children=_this3.rowsToData(_this3.table.modules.dataTree.getFilteredTreeChildren(row));data=data.concat(children)}}});return data}},{key:"generateRow",value:function generateRow(pos,data){var _this4=this;var rowData=this.generateRowData(pos,data),row;if(this.table.modExists("mutator")){this.table.modules.mutator.disable()}row=new Row(rowData,this,"calc");if(this.table.modExists("mutator")){this.table.modules.mutator.enable()}row.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+pos);row.component=false;row.getComponent=function(){if(!row.component){row.component=new CalcComponent(row)}return row.component};row.generateCells=function(){var cells=[];_this4.table.columnManager.columnsByIndex.forEach(function(column){_this4.genColumn.setField(column.getField());_this4.genColumn.hozAlign=column.hozAlign;if(column.definition[pos+"CalcFormatter"]&&_this4.table.modExists("format")){_this4.genColumn.modules.format={formatter:_this4.table.modules.format.getFormatter(column.definition[pos+"CalcFormatter"]),params:column.definition[pos+"CalcFormatterParams"]||{}}}else{_this4.genColumn.modules.format={formatter:_this4.table.modules.format.getFormatter("plaintext"),params:{}}}_this4.genColumn.definition.cssClass=column.definition.cssClass;var cell=new Cell(_this4.genColumn,row);cell.getElement();cell.column=column;cell.setWidth();column.cells.push(cell);cells.push(cell);if(!column.visible){cell.hide()}});row.cells=cells};return row}},{key:"generateRowData",value:function generateRowData(pos,data){var rowData={},calcs=pos=="top"?this.topCalcs:this.botCalcs,type=pos=="top"?"topCalc":"botCalc",params,paramKey;calcs.forEach(function(column){var values=[];if(column.modules.columnCalcs&&column.modules.columnCalcs[type]){data.forEach(function(item){values.push(column.getFieldValue(item))});paramKey=type+"Params";params=typeof column.modules.columnCalcs[paramKey]==="function"?column.modules.columnCalcs[paramKey](values,data):column.modules.columnCalcs[paramKey];column.setFieldValue(rowData,column.modules.columnCalcs[type](values,data,params))}});return rowData}},{key:"hasTopCalcs",value:function hasTopCalcs(){return!!this.topCalcs.length}},{key:"hasBottomCalcs",value:function hasBottomCalcs(){return!!this.botCalcs.length}},{key:"redraw",value:function redraw(){if(this.topRow){this.topRow.normalizeHeight(true)}if(this.botRow){this.botRow.normalizeHeight(true)}}},{key:"getResults",value:function getResults(){var _this5=this;var results={},groups;if(this.table.options.groupBy&&this.table.modExists("groupRows")){groups=this.table.modules.groupRows.getGroups(true);groups.forEach(function(group){results[group.getKey()]=_this5.getGroupResults(group)})}else{results={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}}}return results}},{key:"getGroupResults",value:function getGroupResults(group){var _this6=this;var groupObj=group._getSelf(),subGroups=group.getSubGroups(),subGroupResults={},results={};subGroups.forEach(function(subgroup){subGroupResults[subgroup.getKey()]=_this6.getGroupResults(subgroup)});results={top:groupObj.calcs.top?groupObj.calcs.top.getData():{},bottom:groupObj.calcs.bottom?groupObj.calcs.bottom.getData():{},groups:subGroupResults};return results}}]);return ColumnCalcs}(Module);ColumnCalcs.moduleName="columnCalcs";ColumnCalcs.calculations=defaultCalculations;var DataTree=function(_Module){_inherits(DataTree,_Module);var _super=_createSuper(DataTree);function DataTree(table){var _this;_classCallCheck(this,DataTree);_this=_super.call(this,table);_this.indent=10;_this.field="";_this.collapseEl=null;_this.expandEl=null;_this.branchEl=null;_this.elementField=false;_this.startOpen=function(){};_this.displayIndex=0;_this.registerTableOption("dataTree",false);_this.registerTableOption("dataTreeFilter",true);_this.registerTableOption("dataTreeSort",true);_this.registerTableOption("dataTreeElementColumn",false);_this.registerTableOption("dataTreeBranchElement",true);_this.registerTableOption("dataTreeChildIndent",9);_this.registerTableOption("dataTreeChildField","_children");_this.registerTableOption("dataTreeCollapseElement",false);_this.registerTableOption("dataTreeExpandElement",false);_this.registerTableOption("dataTreeStartExpanded",false);_this.registerTableOption("dataTreeChildColumnCalcs",false);_this.registerTableOption("dataTreeSelectPropagate",false);_this.registerComponentFunction("row","treeCollapse",_this.collapseRow.bind(_assertThisInitialized(_this)));_this.registerComponentFunction("row","treeExpand",_this.expandRow.bind(_assertThisInitialized(_this)));_this.registerComponentFunction("row","treeToggle",_this.toggleRow.bind(_assertThisInitialized(_this)));_this.registerComponentFunction("row","getTreeParent",_this.getTreeParent.bind(_assertThisInitialized(_this)));_this.registerComponentFunction("row","getTreeChildren",_this.getRowChildren.bind(_assertThisInitialized(_this)));_this.registerComponentFunction("row","addTreeChild",_this.addTreeChildRow.bind(_assertThisInitialized(_this)));return _this}_createClass(DataTree,[{key:"initialize",value:function initialize(){if(this.table.options.dataTree){var dummyEl=null,options=this.table.options;this.field=options.dataTreeChildField;this.indent=options.dataTreeChildIndent;if(options.dataTreeBranchElement){if(options.dataTreeBranchElement===true){this.branchEl=document.createElement("div");this.branchEl.classList.add("tabulator-data-tree-branch")}else{if(typeof options.dataTreeBranchElement==="string"){dummyEl=document.createElement("div");dummyEl.innerHTML=options.dataTreeBranchElement;this.branchEl=dummyEl.firstChild}else{this.branchEl=options.dataTreeBranchElement}}}if(options.dataTreeCollapseElement){if(typeof options.dataTreeCollapseElement==="string"){dummyEl=document.createElement("div");dummyEl.innerHTML=options.dataTreeCollapseElement;this.collapseEl=dummyEl.firstChild}else{this.collapseEl=options.dataTreeCollapseElement}}else{this.collapseEl=document.createElement("div");this.collapseEl.classList.add("tabulator-data-tree-control");this.collapseEl.tabIndex=0;this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"}if(options.dataTreeExpandElement){if(typeof options.dataTreeExpandElement==="string"){dummyEl=document.createElement("div");dummyEl.innerHTML=options.dataTreeExpandElement;this.expandEl=dummyEl.firstChild}else{this.expandEl=options.dataTreeExpandElement}}else{this.expandEl=document.createElement("div");this.expandEl.classList.add("tabulator-data-tree-control");this.expandEl.tabIndex=0;this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>"}switch(_typeof(options.dataTreeStartExpanded)){case"boolean":this.startOpen=function(row,index){return options.dataTreeStartExpanded};break;case"function":this.startOpen=options.dataTreeStartExpanded;break;default:this.startOpen=function(row,index){return options.dataTreeStartExpanded[index]};break}this.subscribe("row-init",this.initializeRow.bind(this));this.subscribe("row-layout-after",this.layoutRow.bind(this));this.subscribe("row-deleted",this.rowDelete.bind(this),0);this.subscribe("row-data-changed",this.rowDataChanged.bind(this),10);this.subscribe("cell-value-updated",this.cellValueChanged.bind(this));this.subscribe("edit-cancelled",this.cellValueChanged.bind(this));this.subscribe("column-moving-rows",this.columnMoving.bind(this));this.subscribe("table-built",this.initializeElementField.bind(this));this.registerDisplayHandler(this.getRows.bind(this),30)}}},{key:"initializeElementField",value:function initializeElementField(){var firstCol=this.table.columnManager.getFirstVisibleColumn();this.elementField=this.table.options.dataTreeElementColumn||(firstCol?firstCol.field:false)}},{key:"getRowChildren",value:function getRowChildren(row){return this.getTreeChildren(row,true)}},{key:"columnMoving",value:function columnMoving(){var _this2=this;var rows=[];this.table.rowManager.rows.forEach(function(row){rows=rows.concat(_this2.getTreeChildren(row,false,true))});return rows}},{key:"rowDataChanged",value:function rowDataChanged(row,visible,updatedData){if(this.redrawNeeded(updatedData)){this.initializeRow(row);if(visible){this.layoutRow(row);this.refreshData(true)}}}},{key:"cellValueChanged",value:function cellValueChanged(cell){var field=cell.column.getField();if(field===this.elementField){this.layoutRow(cell.row)}}},{key:"initializeRow",value:function initializeRow(row){var childArray=row.getData()[this.field];var isArray=Array.isArray(childArray);var children=isArray||!isArray&&_typeof(childArray)==="object"&&childArray!==null;if(!children&&row.modules.dataTree&&row.modules.dataTree.branchEl){row.modules.dataTree.branchEl.parentNode.removeChild(row.modules.dataTree.branchEl)}if(!children&&row.modules.dataTree&&row.modules.dataTree.controlEl){row.modules.dataTree.controlEl.parentNode.removeChild(row.modules.dataTree.controlEl)}row.modules.dataTree={index:row.modules.dataTree?row.modules.dataTree.index:0,open:children?row.modules.dataTree?row.modules.dataTree.open:this.startOpen(row.getComponent(),0):false,controlEl:row.modules.dataTree&&children?row.modules.dataTree.controlEl:false,branchEl:row.modules.dataTree&&children?row.modules.dataTree.branchEl:false,parent:row.modules.dataTree?row.modules.dataTree.parent:false,children:children}}},{key:"reinitializeRowChildren",value:function reinitializeRowChildren(row){var children=this.getTreeChildren(row,false,true);children.forEach(function(child){child.reinitialize(true)})}},{key:"layoutRow",value:function layoutRow(row){var cell=this.elementField?row.getCell(this.elementField):row.getCells()[0],el=cell.getElement(),config=row.modules.dataTree;if(config.branchEl){if(config.branchEl.parentNode){config.branchEl.parentNode.removeChild(config.branchEl)}config.branchEl=false}if(config.controlEl){if(config.controlEl.parentNode){config.controlEl.parentNode.removeChild(config.controlEl)}config.controlEl=false}this.generateControlElement(row,el);row.getElement().classList.add("tabulator-tree-level-"+config.index);if(config.index){if(this.branchEl){config.branchEl=this.branchEl.cloneNode(true);el.insertBefore(config.branchEl,el.firstChild);if(this.table.rtl){config.branchEl.style.marginRight=(config.branchEl.offsetWidth+config.branchEl.style.marginLeft)*(config.index-1)+config.index*this.indent+"px"}else{config.branchEl.style.marginLeft=(config.branchEl.offsetWidth+config.branchEl.style.marginRight)*(config.index-1)+config.index*this.indent+"px"}}else{if(this.table.rtl){el.style.paddingRight=parseInt(window.getComputedStyle(el,null).getPropertyValue("padding-right"))+config.index*this.indent+"px"}else{el.style.paddingLeft=parseInt(window.getComputedStyle(el,null).getPropertyValue("padding-left"))+config.index*this.indent+"px"}}}}},{key:"generateControlElement",value:function generateControlElement(row,el){var _this3=this;var config=row.modules.dataTree,el=el||row.getCells()[0].getElement(),oldControl=config.controlEl;if(config.children!==false){if(config.open){config.controlEl=this.collapseEl.cloneNode(true);config.controlEl.addEventListener("click",function(e){e.stopPropagation();_this3.collapseRow(row)})}else{config.controlEl=this.expandEl.cloneNode(true);config.controlEl.addEventListener("click",function(e){e.stopPropagation();_this3.expandRow(row)})}config.controlEl.addEventListener("mousedown",function(e){e.stopPropagation()});if(oldControl&&oldControl.parentNode===el){oldControl.parentNode.replaceChild(config.controlEl,oldControl)}else{el.insertBefore(config.controlEl,el.firstChild)}}}},{key:"setDisplayIndex",value:function setDisplayIndex(index){this.displayIndex=index}},{key:"getDisplayIndex",value:function getDisplayIndex(){return this.displayIndex}},{key:"getRows",value:function getRows(rows){var _this4=this;var output=[];rows.forEach(function(row,i){var config,children;output.push(row);if(row instanceof Row){row.create();config=row.modules.dataTree.children;if(!config.index&&config.children!==false){children=_this4.getChildren(row);children.forEach(function(child){child.create();output.push(child)})}}});return output}},{key:"getChildren",value:function getChildren(row,allChildren){var _this5=this;var config=row.modules.dataTree,children=[],output=[];if(config.children!==false&&(config.open||allChildren)){if(!Array.isArray(config.children)){config.children=this.generateChildren(row)}if(this.table.modExists("filter")&&this.table.options.dataTreeFilter){children=this.table.modules.filter.filter(config.children)}else{children=config.children}if(this.table.modExists("sort")&&this.table.options.dataTreeSort){this.table.modules.sort.sort(children)}children.forEach(function(child){output.push(child);var subChildren=_this5.getChildren(child);subChildren.forEach(function(sub){output.push(sub)})})}return output}},{key:"generateChildren",value:function generateChildren(row){var _this6=this;var children=[];var childArray=row.getData()[this.field];if(!Array.isArray(childArray)){childArray=[childArray]}childArray.forEach(function(childData){var childRow=new Row(childData||{},_this6.table.rowManager);childRow.create();childRow.modules.dataTree.index=row.modules.dataTree.index+1;childRow.modules.dataTree.parent=row;if(childRow.modules.dataTree.children){childRow.modules.dataTree.open=_this6.startOpen(childRow.getComponent(),childRow.modules.dataTree.index)}children.push(childRow)});return children}},{key:"expandRow",value:function expandRow(row,silent){var config=row.modules.dataTree;if(config.children!==false){config.open=true;row.reinitialize();this.refreshData(true);this.dispatchExternal("dataTreeRowExpanded",row.getComponent(),row.modules.dataTree.index)}}},{key:"collapseRow",value:function collapseRow(row){var config=row.modules.dataTree;if(config.children!==false){config.open=false;row.reinitialize();this.refreshData(true);this.dispatchExternal("dataTreeRowCollapsed",row.getComponent(),row.modules.dataTree.index)}}},{key:"toggleRow",value:function toggleRow(row){var config=row.modules.dataTree;if(config.children!==false){if(config.open){this.collapseRow(row)}else{this.expandRow(row)}}}},{key:"getTreeParent",value:function getTreeParent(row){return row.modules.dataTree.parent?row.modules.dataTree.parent.getComponent():false}},{key:"getFilteredTreeChildren",value:function getFilteredTreeChildren(row){var config=row.modules.dataTree,output=[],children;if(config.children){if(!Array.isArray(config.children)){config.children=this.generateChildren(row)}if(this.table.modExists("filter")&&this.table.options.dataTreeFilter){children=this.table.modules.filter.filter(config.children)}else{children=config.children}children.forEach(function(childRow){if(childRow instanceof Row){output.push(childRow)}})}return output}},{key:"rowDelete",value:function rowDelete(row){var parent=row.modules.dataTree.parent,childIndex;if(parent){childIndex=this.findChildIndex(row,parent);if(childIndex!==false){parent.data[this.field].splice(childIndex,1)}if(!parent.data[this.field].length){delete parent.data[this.field]}this.initializeRow(parent);this.layoutRow(parent)}this.refreshData(true)}},{key:"addTreeChildRow",value:function addTreeChildRow(row,data,top,index){var childIndex=false;if(typeof data==="string"){data=JSON.parse(data)}if(!Array.isArray(row.data[this.field])){row.data[this.field]=[];row.modules.dataTree.open=this.startOpen(row.getComponent(),row.modules.dataTree.index)}if(typeof index!=="undefined"){childIndex=this.findChildIndex(index,row);if(childIndex!==false){row.data[this.field].splice(top?childIndex:childIndex+1,0,data)}}if(childIndex===false){if(top){row.data[this.field].unshift(data)}else{row.data[this.field].push(data)}}this.initializeRow(row);this.layoutRow(row);this.refreshData(true)}},{key:"findChildIndex",value:function findChildIndex(subject,parent){var _this7=this;var match=false;if(_typeof(subject)=="object"){if(subject instanceof Row){match=subject.data}else if(subject instanceof RowComponent){match=subject._getSelf().data}else if(typeof HTMLElement!=="undefined"&&subject instanceof HTMLElement){if(parent.modules.dataTree){match=parent.modules.dataTree.children.find(function(childRow){return childRow instanceof Row?childRow.element===subject:false});if(match){match=match.data}}}}else if(typeof subject=="undefined"||subject===null){match=false}else{match=parent.data[this.field].find(function(row){return row.data[_this7.table.options.index]==subject})}if(match){if(Array.isArray(parent.data[this.field])){match=parent.data[this.field].indexOf(match)}if(match==-1){match=false}}return match}},{key:"getTreeChildren",value:function getTreeChildren(row,component,recurse){var _this8=this;var config=row.modules.dataTree,output=[];if(config.children){if(!Array.isArray(config.children)){config.children=this.generateChildren(row)}config.children.forEach(function(childRow){if(childRow instanceof Row){output.push(component?childRow.getComponent():childRow);if(recurse){output=output.concat(_this8.getTreeChildren(childRow,component,recurse))}}})}return output}},{key:"getChildField",value:function getChildField(){return this.field}},{key:"redrawNeeded",value:function redrawNeeded(data){console.log("needed?",data);return(this.field?typeof data[this.field]!=="undefined":false)||(this.elementField?typeof data[this.elementField]!=="undefined":false)}}]);return DataTree}(Module);DataTree.moduleName="dataTree";function csv(list,options,setFileContents){var delimiter=options&&options.delimiter?options.delimiter:",",fileContents=[],headers=[];list.forEach(function(row){var item=[];switch(row.type){case"group":console.warn("Download Warning - CSV downloader cannot process row groups");break;case"calc":console.warn("Download Warning - CSV downloader cannot process column calculations");break;case"header":row.columns.forEach(function(col,i){if(col&&col.depth===1){headers[i]=typeof col.value=="undefined"||col.value===null?"":'"'+String(col.value).split('"').join('""')+'"'}});break;case"row":row.columns.forEach(function(col){if(col){switch(_typeof(col.value)){case"object":col.value=JSON.stringify(col.value);break;case"undefined":case"null":col.value="";break}item.push('"'+String(col.value).split('"').join('""')+'"')}});fileContents.push(item.join(delimiter));break}});if(headers.length){fileContents.unshift(headers.join(delimiter))}fileContents=fileContents.join("\n");if(options.bom){fileContents="\ufeff"+fileContents}setFileContents(fileContents,"text/csv")}function json(list,options,setFileContents){var fileContents=[];list.forEach(function(row){var item={};switch(row.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":row.columns.forEach(function(col){if(col){item[col.component.getField()]=col.value}});fileContents.push(item);break}});fileContents=JSON.stringify(fileContents,null,"\t");setFileContents(fileContents,"application/json")}function pdf(list,options,setFileContents){var header=[],body=[],autoTableParams={},rowGroupStyles=options.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},rowCalcStyles=options.rowCalcStyles||{fontStyle:"bold",fontSize:10,cellPadding:4,fillColor:232},jsPDFParams=options.jsPDF||{},title=options&&options.title?options.title:"";if(!jsPDFParams.orientation){jsPDFParams.orientation=options.orientation||"landscape"}if(!jsPDFParams.unit){jsPDFParams.unit="pt"}list.forEach(function(row){switch(row.type){case"header":header.push(parseRow(row));break;case"group":body.push(parseRow(row,rowGroupStyles));break;case"calc":body.push(parseRow(row,rowCalcStyles));break;case"row":body.push(parseRow(row));break}});function parseRow(row,styles){var rowData=[];row.columns.forEach(function(col){var cell;if(col){switch(_typeof(col.value)){case"object":col.value=JSON.stringify(col.value);break;case"undefined":case"null":col.value="";break}cell={content:col.value,colSpan:col.width,rowSpan:col.height};if(styles){cell.styles=styles}rowData.push(cell)}});return rowData}var doc=new jspdf.jsPDF(jsPDFParams);if(options&&options.autoTable){if(typeof options.autoTable==="function"){autoTableParams=options.autoTable(doc)||{}}else{autoTableParams=options.autoTable}}if(title){autoTableParams.didDrawPage=function(data){doc.text(title,40,30)}}autoTableParams.head=header;autoTableParams.body=body;doc.autoTable(autoTableParams);if(options&&options.documentProcessing){options.documentProcessing(doc)}setFileContents(doc.output("arraybuffer"),"application/pdf")}function xlsx(list,options,setFileContents){var self=this,sheetName=options.sheetName||"Sheet1",workbook=XLSX.utils.book_new(),tableFeatures=new CoreFeature(this),output;workbook.SheetNames=[];workbook.Sheets={};function generateSheet(){var rows=[],merges=[],worksheet={},range={s:{c:0,r:0},e:{c:list[0]?list[0].columns.reduce(function(a,b){return a+(b&&b.width?b.width:1)},0):0,r:list.length}};list.forEach(function(row,i){var rowData=[];row.columns.forEach(function(col,j){if(col){rowData.push(!(col.value instanceof Date)&&_typeof(col.value)==="object"?JSON.stringify(col.value):col.value);if(col.width>1||col.height>-1){if(col.height>1||col.width>1){merges.push({s:{r:i,c:j},e:{r:i+col.height-1,c:j+col.width-1}})}}}else{rowData.push("")}});rows.push(rowData)});XLSX.utils.sheet_add_aoa(worksheet,rows);worksheet["!ref"]=XLSX.utils.encode_range(range);if(merges.length){worksheet["!merges"]=merges}return worksheet}if(options.sheetOnly){setFileContents(generateSheet());return}if(options.sheets){for(var sheet in options.sheets){if(options.sheets[sheet]===true){workbook.SheetNames.push(sheet);workbook.Sheets[sheet]=generateSheet()}else{workbook.SheetNames.push(sheet);tableFeatures.commsSend(options.sheets[sheet],"download","intercept",{type:"xlsx",options:{sheetOnly:true},active:self.active,intercept:function intercept(data){workbook.Sheets[sheet]=data}})}}}else{workbook.SheetNames.push(sheetName);workbook.Sheets[sheetName]=generateSheet()}if(options.documentProcessing){workbook=options.documentProcessing(workbook)}function s2ab(s){var buf=new ArrayBuffer(s.length);var view=new Uint8Array(buf);for(var i=0;i!=s.length;++i){view[i]=s.charCodeAt(i)&255}return buf}output=XLSX.write(workbook,{bookType:"xlsx",bookSST:true,type:"binary"});setFileContents(s2ab(output),"application/octet-stream")}function html(list,options,setFileContents){if(this.modExists("export",true)){setFileContents(this.modules["export"].genereateHTMLTable(list),"text/html")}}var defaultDownloaders={csv:csv,json:json,pdf:pdf,xlsx:xlsx,html:html};var Download=function(_Module){_inherits(Download,_Module);var _super=_createSuper(Download);function Download(table){var _this;_classCallCheck(this,Download);_this=_super.call(this,table);_this.registerTableOption("downloadReady",function(data,blob){return blob});_this.registerTableOption("downloadConfig",{});_this.registerTableOption("downloadRowRange","active");_this.registerColumnOption("download");_this.registerColumnOption("titleDownload");return _this}_createClass(Download,[{key:"initialize",value:function initialize(){this.registerTableFunction("download",this.download.bind(this));this.registerTableFunction("downloadToTab",this.downloadToTab.bind(this))}},{key:"downloadToTab",value:function downloadToTab(type,filename,options,active){this.download(type,filename,options,active,true)}},{key:"download",value:function download(type,filename,options,range,interceptCallback){var downloadFunc=false;function buildLink(data,mime){if(interceptCallback){if(interceptCallback===true){this.triggerDownload(data,mime,type,filename,true)}else{interceptCallback(data)}}else{this.triggerDownload(data,mime,type,filename)}}if(typeof type=="function"){downloadFunc=type}else{if(Download.downloaders[type]){downloadFunc=Download.downloaders[type]}else{console.warn("Download Error - No such download type found: ",type)}}if(downloadFunc){var list=this.generateExportList(range);downloadFunc.call(this.table,list,options||{},buildLink.bind(this))}}},{key:"generateExportList",value:function generateExportList(range){var list=this.table.modules["export"].generateExportList(this.table.options.downloadConfig,false,range||this.table.options.downloadRowRange,"download");var groupHeader=this.table.options.groupHeaderDownload;if(groupHeader&&!Array.isArray(groupHeader)){groupHeader=[groupHeader]}list.forEach(function(row){var group;if(row.type==="group"){group=row.columns[0];if(groupHeader&&groupHeader[row.indent]){group.value=groupHeader[row.indent](group.value,row.component._group.getRowCount(),row.component._group.getData(),row.component)}}});return list}},{key:"triggerDownload",value:function triggerDownload(data,mime,type,filename,newTab){var element=document.createElement("a"),blob=new Blob([data],{type:mime}),filename=filename||"Tabulator."+(typeof type==="function"?"txt":type);blob=this.table.options.downloadReady(data,blob);if(blob){if(newTab){window.open(window.URL.createObjectURL(blob))}else{if(navigator.msSaveOrOpenBlob){navigator.msSaveOrOpenBlob(blob,filename)}else{element.setAttribute("href",window.URL.createObjectURL(blob));element.setAttribute("download",filename);element.style.display="none";document.body.appendChild(element);element.click();document.body.removeChild(element)}}this.dispatchExternal("downloadComplete")}}},{key:"commsReceived",value:function commsReceived(table,action,data){switch(action){case"intercept":this.download(data.type,"",data.options,data.active,data.intercept);break}}}]);return Download}(Module);Download.moduleName="download";Download.downloaders=defaultDownloaders;function maskInput(el,options){var mask=options.mask,maskLetter=typeof options.maskLetterChar!=="undefined"?options.maskLetterChar:"A",maskNumber=typeof options.maskNumberChar!=="undefined"?options.maskNumberChar:"9",maskWildcard=typeof options.maskWildcardChar!=="undefined"?options.maskWildcardChar:"*";function fillSymbols(index){var symbol=mask[index];if(typeof symbol!=="undefined"&&symbol!==maskWildcard&&symbol!==maskLetter&&symbol!==maskNumber){el.value=el.value+""+symbol;fillSymbols(index+1)}}el.addEventListener("keydown",function(e){var index=el.value.length,_char=e.key;if(e.keyCode>46){if(index>=mask.length){e.preventDefault();e.stopPropagation();return false}else{switch(mask[index]){case maskLetter:if(_char.toUpperCase()==_char.toLowerCase()){e.preventDefault();e.stopPropagation();return false}break;case maskNumber:if(isNaN(_char)){e.preventDefault();e.stopPropagation();return false}break;case maskWildcard:break;default:if(_char!==mask[index]){e.preventDefault();e.stopPropagation();return false}}}}return});el.addEventListener("keyup",function(e){if(e.keyCode>46){if(options.maskAutoFill){fillSymbols(el.value.length)}}});if(!el.placeholder){el.placeholder=mask}if(options.maskAutoFill){fillSymbols(el.value.length)}}function input(cell,onRendered,success,cancel,editorParams){var cellValue=cell.getValue(),input=document.createElement("input");input.setAttribute("type",editorParams.search?"search":"text");input.style.padding="4px";input.style.width="100%";input.style.boxSizing="border-box";if(editorParams.elementAttributes&&_typeof(editorParams.elementAttributes)=="object"){for(var key in editorParams.elementAttributes){if(key.charAt(0)=="+"){key=key.slice(1);input.setAttribute(key,input.getAttribute(key)+editorParams.elementAttributes["+"+key])}else{input.setAttribute(key,editorParams.elementAttributes[key])}}}input.value=typeof cellValue!=="undefined"?cellValue:"";onRendered(function(){input.focus({preventScroll:true});input.style.height="100%"});function onChange(e){if((cellValue===null||typeof cellValue==="undefined")&&input.value!==""||input.value!==cellValue){if(success(input.value)){cellValue=input.value}}else{cancel()}}input.addEventListener("change",onChange);input.addEventListener("blur",onChange);input.addEventListener("keydown",function(e){switch(e.keyCode){case 13:onChange();break;case 27:cancel();break;case 35:case 36:e.stopPropagation();break}});if(editorParams.mask){maskInput(input,editorParams)}return input}function textarea(cell,onRendered,success,cancel,editorParams){var cellValue=cell.getValue(),vertNav=editorParams.verticalNavigation||"hybrid",value=String(cellValue!==null&&typeof cellValue!=="undefined"?cellValue:""),count=(value.match(/(?:\r\n|\r|\n)/g)||[]).length+1,input=document.createElement("textarea"),scrollHeight=0;input.style.display="block";input.style.padding="2px";input.style.height="100%";input.style.width="100%";input.style.boxSizing="border-box";input.style.whiteSpace="pre-wrap";input.style.resize="none";if(editorParams.elementAttributes&&_typeof(editorParams.elementAttributes)=="object"){for(var key in editorParams.elementAttributes){if(key.charAt(0)=="+"){key=key.slice(1);input.setAttribute(key,input.getAttribute(key)+editorParams.elementAttributes["+"+key])}else{input.setAttribute(key,editorParams.elementAttributes[key])}}}input.value=value;onRendered(function(){input.focus({preventScroll:true});input.style.height="100%";input.scrollHeight;input.style.height=input.scrollHeight+"px";cell.getRow().normalizeHeight()});function onChange(e){if((cellValue===null||typeof cellValue==="undefined")&&input.value!==""||input.value!==cellValue){if(success(input.value)){cellValue=input.value}setTimeout(function(){cell.getRow().normalizeHeight()},300)}else{cancel()}}input.addEventListener("change",onChange);input.addEventListener("blur",onChange);input.addEventListener("keyup",function(){input.style.height="";var heightNow=input.scrollHeight;input.style.height=heightNow+"px";if(heightNow!=scrollHeight){scrollHeight=heightNow;cell.getRow().normalizeHeight()}});input.addEventListener("keydown",function(e){switch(e.keyCode){case 27:cancel();break;case 38:if(vertNav=="editor"||vertNav=="hybrid"&&input.selectionStart){e.stopImmediatePropagation();e.stopPropagation()}break;case 40:if(vertNav=="editor"||vertNav=="hybrid"&&input.selectionStart!==input.value.length){e.stopImmediatePropagation();e.stopPropagation()}break;case 35:case 36:e.stopPropagation();break}});if(editorParams.mask){maskInput(input,editorParams)}return input}function number(cell,onRendered,success,cancel,editorParams){var cellValue=cell.getValue(),vertNav=editorParams.verticalNavigation||"editor",input=document.createElement("input");input.setAttribute("type","number");if(typeof editorParams.max!="undefined"){input.setAttribute("max",editorParams.max)}if(typeof editorParams.min!="undefined"){input.setAttribute("min",editorParams.min)}if(typeof editorParams.step!="undefined"){input.setAttribute("step",editorParams.step)}input.style.padding="4px";input.style.width="100%";input.style.boxSizing="border-box";if(editorParams.elementAttributes&&_typeof(editorParams.elementAttributes)=="object"){for(var key in editorParams.elementAttributes){if(key.charAt(0)=="+"){key=key.slice(1);input.setAttribute(key,input.getAttribute(key)+editorParams.elementAttributes["+"+key])}else{input.setAttribute(key,editorParams.elementAttributes[key])}}}input.value=cellValue;var blurFunc=function blurFunc(e){onChange()};onRendered(function(){input.removeEventListener("blur",blurFunc);input.focus({preventScroll:true});input.style.height="100%";input.addEventListener("blur",blurFunc)});function onChange(){var value=input.value;if(!isNaN(value)&&value!==""){value=Number(value)}if(value!==cellValue){if(success(value)){cellValue=value}}else{cancel()}}input.addEventListener("keydown",function(e){switch(e.keyCode){case 13:onChange();break;case 27:cancel();break;case 38:case 40:if(vertNav=="editor"){e.stopImmediatePropagation();e.stopPropagation()}break;case 35:case 36:e.stopPropagation();break}});if(editorParams.mask){maskInput(input,editorParams)}return input}function range(cell,onRendered,success,cancel,editorParams){var cellValue=cell.getValue(),input=document.createElement("input");input.setAttribute("type","range");if(typeof editorParams.max!="undefined"){input.setAttribute("max",editorParams.max)}if(typeof editorParams.min!="undefined"){input.setAttribute("min",editorParams.min)}if(typeof editorParams.step!="undefined"){input.setAttribute("step",editorParams.step)}input.style.padding="4px";input.style.width="100%";input.style.boxSizing="border-box";if(editorParams.elementAttributes&&_typeof(editorParams.elementAttributes)=="object"){for(var key in editorParams.elementAttributes){if(key.charAt(0)=="+"){key=key.slice(1);input.setAttribute(key,input.getAttribute(key)+editorParams.elementAttributes["+"+key])}else{input.setAttribute(key,editorParams.elementAttributes[key])}}}input.value=cellValue;onRendered(function(){input.focus({preventScroll:true});input.style.height="100%"});function onChange(){var value=input.value;if(!isNaN(value)&&value!==""){value=Number(value)}if(value!=cellValue){if(success(value)){cellValue=value}}else{cancel()}}input.addEventListener("blur",function(e){onChange()});input.addEventListener("keydown",function(e){switch(e.keyCode){case 13:onChange();break;case 27:cancel();break}});return input}function select(cell,onRendered,success,cancel,editorParams){var _this=this;var self=this,cellEl=cell.getElement(),initialValue=cell.getValue(),vertNav=editorParams.verticalNavigation||"editor",initialDisplayValue=typeof initialValue!=="undefined"||initialValue===null?Array.isArray(initialValue)?initialValue:[initialValue]:typeof editorParams.defaultValue!=="undefined"?editorParams.defaultValue:[],input=document.createElement("input"),listEl=document.createElement("div"),multiselect=editorParams.multiselect,dataItems=[],currentItem={},displayItems=[],currentItems=[],blurable=true,blockListShow=false,searchWord="",searchWordTimeout=null;if(Array.isArray(editorParams)||!Array.isArray(editorParams)&&_typeof(editorParams)==="object"&&!editorParams.values){console.warn("DEPRECATION WARNING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object");editorParams={values:editorParams}}function getUniqueColumnValues(field){var output={},data=self.table.getData(),column;if(field){column=self.table.columnManager.getColumnByField(field)}else{column=cell.getColumn()._getSelf()}if(column){data.forEach(function(row){var val=column.getFieldValue(row);if(val!==null&&typeof val!=="undefined"&&val!==""){output[val]=true}})}else{console.warn("unable to find matching column to create select lookup list:",field)}return Object.keys(output)}function parseItems(inputValues,curentValues){var dataList=[];var displayList=[];function processComplexListItem(item){var item={label:item.label,value:item.value,itemParams:item.itemParams,elementAttributes:item.elementAttributes,element:false};if(curentValues.indexOf(item.value)>-1){setItem(item)}dataList.push(item);displayList.push(item);return item}if(typeof inputValues=="function"){inputValues=inputValues(cell)}if(Array.isArray(inputValues)){inputValues.forEach(function(value){var item;if(_typeof(value)==="object"){if(value.options){item={label:value.label,group:true,itemParams:value.itemParams,elementAttributes:value.elementAttributes,element:false};displayList.push(item);value.options.forEach(function(item){processComplexListItem(item)})}else{processComplexListItem(value)}}else{item={label:value,value:value,element:false};if(curentValues.indexOf(item.value)>-1){setItem(item)}dataList.push(item);displayList.push(item)}})}else{for(var key in inputValues){var item={label:inputValues[key],value:key,element:false};if(curentValues.indexOf(item.value)>-1){setItem(item)}dataList.push(item);displayList.push(item)}}if(editorParams.sortValuesList){dataList.sort(function(a,b){return a.label<b.label?-1:a.label>b.label?1:0});displayList.sort(function(a,b){return a.label<b.label?-1:a.label>b.label?1:0});if(editorParams.sortValuesList!=="asc"){dataList.reverse();displayList.reverse()}}dataItems=dataList;displayItems=displayList;fillList()}function fillList(){while(listEl.firstChild){listEl.removeChild(listEl.firstChild)}displayItems.forEach(function(item){var el=item.element;if(!el){el=document.createElement("div");item.label=editorParams.listItemFormatter?editorParams.listItemFormatter(item.value,item.label,cell,el,item.itemParams):item.label;if(item.group){el.classList.add("tabulator-edit-select-list-group");el.tabIndex=0;el.innerHTML=item.label===""?"&nbsp;":item.label}else{el.classList.add("tabulator-edit-select-list-item");el.tabIndex=0;el.innerHTML=item.label===""?"&nbsp;":item.label;el.addEventListener("click",function(){blockListShow=true;setTimeout(function(){blockListShow=false},10);if(multiselect){toggleItem(item);input.focus()}else{chooseItem(item)}});if(currentItems.indexOf(item)>-1){el.classList.add("active")}}if(item.elementAttributes&&_typeof(item.elementAttributes)=="object"){for(var key in item.elementAttributes){if(key.charAt(0)=="+"){key=key.slice(1);el.setAttribute(key,input.getAttribute(key)+item.elementAttributes["+"+key])}else{el.setAttribute(key,item.elementAttributes[key])}}}el.addEventListener("mousedown",function(){blurable=false;setTimeout(function(){blurable=true},10)});item.element=el}listEl.appendChild(el)})}function setCurrentItem(item,active){if(!multiselect&&currentItem&&currentItem.element){currentItem.element.classList.remove("active")}if(currentItem&&currentItem.element){currentItem.element.classList.remove("focused")}currentItem=item;if(item.element){item.element.classList.add("focused");if(active){item.element.classList.add("active")}}if(item&&item.element&&item.element.scrollIntoView){item.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}}function setItem(item){var index=currentItems.indexOf(item);if(index==-1){currentItems.push(item);setCurrentItem(item,true)}fillInput()}function unsetItem(index){var item=currentItems[index];if(index>-1){currentItems.splice(index,1);if(item.element){item.element.classList.remove("active")}}}function toggleItem(item){if(!item){item=currentItem}var index=currentItems.indexOf(item);if(index>-1){unsetItem(index)}else{if(multiselect!==true&&currentItems.length>=multiselect){unsetItem(0)}setItem(item)}fillInput()}function chooseItem(item){hideList();if(!item){item=currentItem}if(item){input.value=item.label;success(item.value)}initialDisplayValue=[item.value]}function chooseItems(silent){if(!silent){hideList()}var output=[];currentItems.forEach(function(item){output.push(item.value)});initialDisplayValue=output;success(output)}function fillInput(){var output=[];currentItems.forEach(function(item){output.push(item.label)});input.value=output.join(", ");if(self.currentCell===false){chooseItems(true)}}function unsetItems(){var len=currentItems.length;for(var i=0;i<len;i++){unsetItem(0)}}function cancelItem(){hideList();cancel()}function showList(){currentItems=[];if(!listEl.parentNode){if(editorParams.values===true){parseItems(getUniqueColumnValues(),initialDisplayValue)}else if(typeof editorParams.values==="string"){parseItems(getUniqueColumnValues(editorParams.values),initialDisplayValue)}else{parseItems(editorParams.values||[],initialDisplayValue)}var offset=Helpers.elOffset(cellEl);listEl.style.minWidth=cellEl.offsetWidth+"px";listEl.style.top=offset.top+cellEl.offsetHeight+"px";listEl.style.left=offset.left+"px";listEl.addEventListener("mousedown",function(e){blurable=false;setTimeout(function(){blurable=true},10)});document.body.appendChild(listEl)}}function hideList(){if(listEl.parentNode){listEl.parentNode.removeChild(listEl)}removeScrollListener()}function removeScrollListener(){self.table.rowManager.element.removeEventListener("scroll",cancelItem)}function scrollTovalue(_char){clearTimeout(searchWordTimeout);var character=String.fromCharCode(event.keyCode).toLowerCase();searchWord+=character.toLowerCase();var match=dataItems.find(function(item){return typeof item.label!=="undefined"&&item.label.toLowerCase().startsWith(searchWord)});if(match){setCurrentItem(match,!multiselect)}searchWordTimeout=setTimeout(function(){searchWord=""},800)}input.setAttribute("type","text");input.style.padding="4px";input.style.width="100%";input.style.boxSizing="border-box";input.style.cursor="default";input.readOnly=this.currentCell!=false;if(editorParams.elementAttributes&&_typeof(editorParams.elementAttributes)=="object"){for(var key in editorParams.elementAttributes){if(key.charAt(0)=="+"){key=key.slice(1);input.setAttribute(key,input.getAttribute(key)+editorParams.elementAttributes["+"+key])}else{input.setAttribute(key,editorParams.elementAttributes[key])}}}input.value=typeof initialValue!=="undefined"||initialValue===null?initialValue:"";input.addEventListener("search",function(e){if(!input.value){unsetItems();chooseItems()}});input.addEventListener("keydown",function(e){var index;switch(e.keyCode){case 38:index=dataItems.indexOf(currentItem);if(vertNav=="editor"||vertNav=="hybrid"&&index){e.stopImmediatePropagation();e.stopPropagation();e.preventDefault();if(index>0){setCurrentItem(dataItems[index-1],!multiselect)}}break;case 40:index=dataItems.indexOf(currentItem);if(vertNav=="editor"||vertNav=="hybrid"&&index<dataItems.length-1){e.stopImmediatePropagation();e.stopPropagation();e.preventDefault();if(index<dataItems.length-1){if(index==-1){setCurrentItem(dataItems[0],!multiselect)}else{setCurrentItem(dataItems[index+1],!multiselect)}}}break;case 37:case 39:e.stopImmediatePropagation();e.stopPropagation();e.preventDefault();break;case 13:if(multiselect){toggleItem()}else{chooseItem()}break;case 27:cancelItem();break;case 9:break;default:if(self.currentCell===false){e.preventDefault()}if(e.keyCode>=38&&e.keyCode<=90){scrollTovalue(e.keyCode)}}});input.addEventListener("blur",function(e){if(blurable){if(multiselect){chooseItems()}else{cancelItem()}}});input.addEventListener("focus",function(e){if(!blockListShow){showList()}});listEl=document.createElement("div");listEl.classList.add("tabulator-edit-select-list");onRendered(function(){input.style.height="100%";input.focus({preventScroll:true})});setTimeout(function(){_this.table.rowManager.element.addEventListener("scroll",cancelItem)},10);return input}function autocomplete(cell,onRendered,success,cancel,editorParams){var _this=this;var self=this,cellEl=cell.getElement(),initialValue=cell.getValue(),vertNav=editorParams.verticalNavigation||"editor",initialDisplayValue=typeof initialValue!=="undefined"||initialValue===null?initialValue:typeof editorParams.defaultValue!=="undefined"?editorParams.defaultValue:"",input=document.createElement("input"),listEl=document.createElement("div"),displayItems=[],currentItem=false,blurable=true,uniqueColumnValues=false;input.setAttribute("type","search");input.style.padding="4px";input.style.width="100%";input.style.boxSizing="border-box";if(editorParams.elementAttributes&&_typeof(editorParams.elementAttributes)=="object"){for(var key in editorParams.elementAttributes){if(key.charAt(0)=="+"){key=key.slice(1);input.setAttribute(key,input.getAttribute(key)+editorParams.elementAttributes["+"+key])}else{input.setAttribute(key,editorParams.elementAttributes[key])}}}listEl.classList.add("tabulator-edit-select-list");listEl.addEventListener("mousedown",function(e){blurable=false;setTimeout(function(){blurable=true},10)});function genUniqueColumnValues(){if(editorParams.values===true){uniqueColumnValues=getUniqueColumnValues()}else if(typeof editorParams.values==="string"){uniqueColumnValues=getUniqueColumnValues(editorParams.values)}}function getUniqueColumnValues(field){var output={},data=self.table.getData(),column;if(field){column=self.table.columnManager.getColumnByField(field)}else{column=cell.getColumn()._getSelf()}if(column){data.forEach(function(row){var val=column.getFieldValue(row);if(val!==null&&typeof val!=="undefined"&&val!==""){output[val]=true}});if(editorParams.sortValuesList){if(editorParams.sortValuesList=="asc"){output=Object.keys(output).sort()}else{output=Object.keys(output).sort().reverse()}}else{output=Object.keys(output)}}else{console.warn("unable to find matching column to create autocomplete lookup list:",field)}return output}function filterList(term,intialLoad){var matches=[],values,items;if(uniqueColumnValues){values=uniqueColumnValues}else{values=editorParams.values||[]}if(editorParams.searchFunc){matches=editorParams.searchFunc(term,values);if(matches instanceof Promise){addNotice(typeof editorParams.searchingPlaceholder!=="undefined"?editorParams.searchingPlaceholder:"Searching...");matches.then(function(result){fillListIfNotEmpty(parseItems(result),intialLoad)})["catch"](function(err){console.err("error in autocomplete search promise:",err)})}else{fillListIfNotEmpty(parseItems(matches),intialLoad)}}else{items=parseItems(values);if(term===""){if(editorParams.showListOnEmpty){matches=items}}else{items.forEach(function(item){if(item.value!==null||typeof item.value!=="undefined"){if(String(item.value).toLowerCase().indexOf(String(term).toLowerCase())>-1||String(item.title).toLowerCase().indexOf(String(term).toLowerCase())>-1){matches.push(item)}}})}fillListIfNotEmpty(matches,intialLoad)}}function addNotice(notice){var searchEl=document.createElement("div");clearList();if(notice!==false){searchEl.classList.add("tabulator-edit-select-list-notice");searchEl.tabIndex=0;if(notice instanceof Node){searchEl.appendChild(notice)}else{searchEl.innerHTML=notice}listEl.appendChild(searchEl)}}function parseItems(inputValues){var itemList=[];if(Array.isArray(inputValues)){inputValues.forEach(function(value){var item={};if(_typeof(value)==="object"){item.title=editorParams.listItemFormatter?editorParams.listItemFormatter(value.value,value.label):value.label;item.value=value.value}else{item.title=editorParams.listItemFormatter?editorParams.listItemFormatter(value,value):value;item.value=value}itemList.push(item)})}else{for(var key in inputValues){var item={title:editorParams.listItemFormatter?editorParams.listItemFormatter(key,inputValues[key]):inputValues[key],value:key};itemList.push(item)}}return itemList}function clearList(){while(listEl.firstChild){listEl.removeChild(listEl.firstChild)}}function fillListIfNotEmpty(items,intialLoad){if(items.length){fillList(items,intialLoad)}else{if(editorParams.emptyPlaceholder){addNotice(editorParams.emptyPlaceholder)}}}function fillList(items,intialLoad){var current=false;clearList();displayItems=items;displayItems.forEach(function(item){var el=item.element;if(!el){el=document.createElement("div");el.classList.add("tabulator-edit-select-list-item");el.tabIndex=0;el.innerHTML=item.title;el.addEventListener("click",function(e){setCurrentItem(item);chooseItem()});el.addEventListener("mousedown",function(e){blurable=false;setTimeout(function(){blurable=true},10)});item.element=el;if(intialLoad&&item.value==initialValue){input.value=item.title;item.element.classList.add("active");current=true}if(item===currentItem){item.element.classList.add("active");current=true}}listEl.appendChild(el)});if(!current){setCurrentItem(false)}}function chooseItem(){hideList();if(currentItem){if(initialValue!==currentItem.value){initialValue=currentItem.value;input.value=currentItem.title;success(currentItem.value)}else{cancel()}}else{if(editorParams.freetext){initialValue=input.value;success(input.value)}else{if(editorParams.allowEmpty&&input.value===""){initialValue=input.value;success(input.value)}else{cancel()}}}}function showList(){if(!listEl.parentNode){while(listEl.firstChild){listEl.removeChild(listEl.firstChild)}var offset=Helpers.elOffset(cellEl);listEl.style.minWidth=cellEl.offsetWidth+"px";listEl.style.top=offset.top+cellEl.offsetHeight+"px";listEl.style.left=offset.left+"px";document.body.appendChild(listEl)}}function setCurrentItem(item,showInputValue){if(currentItem&&currentItem.element){currentItem.element.classList.remove("active")}currentItem=item;if(item&&item.element){item.element.classList.add("active")}if(item&&item.element&&item.element.scrollIntoView){item.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}}function hideList(){if(listEl.parentNode){listEl.parentNode.removeChild(listEl)}removeScrollListener()}function cancelItem(){hideList();cancel()}function removeScrollListener(){self.table.rowManager.element.removeEventListener("scroll",cancelItem)}input.addEventListener("keydown",function(e){var index;switch(e.keyCode){case 38:index=displayItems.indexOf(currentItem);if(vertNav=="editor"||vertNav=="hybrid"&&index){e.stopImmediatePropagation();e.stopPropagation();e.preventDefault();if(index>0){setCurrentItem(displayItems[index-1])}else{setCurrentItem(false)}}break;case 40:index=displayItems.indexOf(currentItem);if(vertNav=="editor"||vertNav=="hybrid"&&index<displayItems.length-1){e.stopImmediatePropagation();e.stopPropagation();e.preventDefault();if(index<displayItems.length-1){if(index==-1){setCurrentItem(displayItems[0])}else{setCurrentItem(displayItems[index+1])}}}break;case 37:case 39:e.stopImmediatePropagation();e.stopPropagation();break;case 13:chooseItem();break;case 27:cancelItem();break;case 36:case 35:e.stopImmediatePropagation();break}});input.addEventListener("keyup",function(e){switch(e.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:filterList(input.value)}});input.addEventListener("search",function(e){filterList(input.value)});input.addEventListener("blur",function(e){if(blurable){chooseItem()}});input.addEventListener("focus",function(e){var value=initialDisplayValue;genUniqueColumnValues();showList();input.value=value;filterList(value,true)});onRendered(function(){input.style.height="100%";input.focus({preventScroll:true})});if(editorParams.mask){maskInput(input,editorParams)}setTimeout(function(){_this.table.rowManager.element.addEventListener("scroll",cancelItem)},10);genUniqueColumnValues();input.value=initialDisplayValue;filterList(initialDisplayValue,true);return input}function star(cell,onRendered,success,cancel,editorParams){var self=this,element=cell.getElement(),value=cell.getValue(),maxStars=element.getElementsByTagName("svg").length||5,size=element.getElementsByTagName("svg")[0]?element.getElementsByTagName("svg")[0].getAttribute("width"):14,stars=[],starsHolder=document.createElement("div"),star=document.createElementNS("http://www.w3.org/2000/svg","svg");function starChange(val){stars.forEach(function(star,i){if(i<val){if(self.table.browser=="ie"){star.setAttribute("class","tabulator-star-active")}else{star.classList.replace("tabulator-star-inactive","tabulator-star-active")}star.innerHTML='<polygon fill="#488CE9" stroke="#014AAE" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>'}else{if(self.table.browser=="ie"){star.setAttribute("class","tabulator-star-inactive")}else{star.classList.replace("tabulator-star-active","tabulator-star-inactive")}star.innerHTML='<polygon fill="#010155" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>'}})}function buildStar(i){var starHolder=document.createElement("span");var nextStar=star.cloneNode(true);stars.push(nextStar);starHolder.addEventListener("mouseenter",function(e){e.stopPropagation();e.stopImmediatePropagation();starChange(i)});starHolder.addEventListener("mousemove",function(e){e.stopPropagation();e.stopImmediatePropagation()});starHolder.addEventListener("click",function(e){e.stopPropagation();e.stopImmediatePropagation();success(i);element.blur()});starHolder.appendChild(nextStar);starsHolder.appendChild(starHolder)}function changeValue(val){value=val;starChange(val)}element.style.whiteSpace="nowrap";element.style.overflow="hidden";element.style.textOverflow="ellipsis";starsHolder.style.verticalAlign="middle";starsHolder.style.display="inline-block";starsHolder.style.padding="4px";star.setAttribute("width",size);star.setAttribute("height",size);star.setAttribute("viewBox","0 0 512 512");star.setAttribute("xml:space","preserve");star.style.padding="0 1px";if(editorParams.elementAttributes&&_typeof(editorParams.elementAttributes)=="object"){for(var key in editorParams.elementAttributes){if(key.charAt(0)=="+"){key=key.slice(1);starsHolder.setAttribute(key,starsHolder.getAttribute(key)+editorParams.elementAttributes["+"+key])}else{starsHolder.setAttribute(key,editorParams.elementAttributes[key])}}}for(var i=1;i<=maxStars;i++){buildStar(i)}value=Math.min(parseInt(value),maxStars);starChange(value);starsHolder.addEventListener("mousemove",function(e){starChange(0)});starsHolder.addEventListener("click",function(e){success(0)});element.addEventListener("blur",function(e){cancel()});element.addEventListener("keydown",function(e){switch(e.keyCode){case 39:changeValue(value+1);break;case 37:changeValue(value-1);break;case 13:success(value);break;case 27:cancel();break}});return starsHolder}function progress(cell,onRendered,success,cancel,editorParams){var element=cell.getElement(),max=typeof editorParams.max==="undefined"?element.getElementsByTagName("div")[0]&&element.getElementsByTagName("div")[0].getAttribute("max")||100:editorParams.max,min=typeof editorParams.min==="undefined"?element.getElementsByTagName("div")[0]&&element.getElementsByTagName("div")[0].getAttribute("min")||0:editorParams.min,percent=(max-min)/100,value=cell.getValue()||0,handle=document.createElement("div"),bar=document.createElement("div"),mouseDrag,mouseDragWidth;function updateValue(){var style=window.getComputedStyle(element,null);var calcVal=percent*Math.round(bar.offsetWidth/((element.clientWidth-parseInt(style.getPropertyValue("padding-left"))-parseInt(style.getPropertyValue("padding-right")))/100))+min;success(calcVal);element.setAttribute("aria-valuenow",calcVal);element.setAttribute("aria-label",value)}handle.style.position="absolute";handle.style.right="0";handle.style.top="0";handle.style.bottom="0";handle.style.width="5px";handle.classList.add("tabulator-progress-handle");bar.style.display="inline-block";bar.style.position="relative";bar.style.height="100%";bar.style.backgroundColor="#488CE9";bar.style.maxWidth="100%";bar.style.minWidth="0%";if(editorParams.elementAttributes&&_typeof(editorParams.elementAttributes)=="object"){for(var key in editorParams.elementAttributes){if(key.charAt(0)=="+"){key=key.slice(1);bar.setAttribute(key,bar.getAttribute(key)+editorParams.elementAttributes["+"+key])}else{bar.setAttribute(key,editorParams.elementAttributes[key])}}}element.style.padding="4px 4px";value=Math.min(parseFloat(value),max);value=Math.max(parseFloat(value),min);value=Math.round((value-min)/percent);bar.style.width=value+"%";element.setAttribute("aria-valuemin",min);element.setAttribute("aria-valuemax",max);bar.appendChild(handle);handle.addEventListener("mousedown",function(e){mouseDrag=e.screenX;mouseDragWidth=bar.offsetWidth});handle.addEventListener("mouseover",function(){handle.style.cursor="ew-resize"});element.addEventListener("mousemove",function(e){if(mouseDrag){bar.style.width=mouseDragWidth+e.screenX-mouseDrag+"px"}});element.addEventListener("mouseup",function(e){if(mouseDrag){e.stopPropagation();e.stopImmediatePropagation();mouseDrag=false;mouseDragWidth=false;updateValue()}});element.addEventListener("keydown",function(e){switch(e.keyCode){case 39:e.preventDefault();bar.style.width=bar.clientWidth+element.clientWidth/100+"px";break;case 37:e.preventDefault();bar.style.width=bar.clientWidth-element.clientWidth/100+"px";break;case 9:case 13:updateValue();break;case 27:cancel();break}});element.addEventListener("blur",function(){cancel()});return bar}function tickCross(cell,onRendered,success,cancel,editorParams){var value=cell.getValue(),input=document.createElement("input"),tristate=editorParams.tristate,indetermValue=typeof editorParams.indeterminateValue==="undefined"?null:editorParams.indeterminateValue,indetermState=false;input.setAttribute("type","checkbox");input.style.marginTop="5px";input.style.boxSizing="border-box";if(editorParams.elementAttributes&&_typeof(editorParams.elementAttributes)=="object"){for(var key in editorParams.elementAttributes){if(key.charAt(0)=="+"){key=key.slice(1);input.setAttribute(key,input.getAttribute(key)+editorParams.elementAttributes["+"+key])}else{input.setAttribute(key,editorParams.elementAttributes[key])}}}input.value=value;if(tristate&&(typeof value==="undefined"||value===indetermValue||value==="")){indetermState=true;input.indeterminate=true}if(this.table.browser!="firefox"){onRendered(function(){input.focus({preventScroll:true})})}input.checked=value===true||value==="true"||value==="True"||value===1;onRendered(function(){input.focus()});function setValue(blur){if(tristate){if(!blur){if(input.checked&&!indetermState){input.checked=false;input.indeterminate=true;indetermState=true;return indetermValue}else{indetermState=false;return input.checked}}else{if(indetermState){return indetermValue}else{return input.checked}}}else{return input.checked}}input.addEventListener("change",function(e){success(setValue())});input.addEventListener("blur",function(e){success(setValue(true))});input.addEventListener("keydown",function(e){if(e.keyCode==13){success(setValue())}if(e.keyCode==27){cancel()}});return input}var defaultEditors={input:input,textarea:textarea,number:number,range:range,select:select,autocomplete:autocomplete,star:star,progress:progress,tickCross:tickCross};var Edit=function(_Module){_inherits(Edit,_Module);var _super=_createSuper(Edit);function Edit(table){var _this;_classCallCheck(this,Edit);_this=_super.call(this,table);_this.currentCell=false;_this.mouseClick=false;_this.recursionBlock=false;_this.invalidEdit=false;_this.editedCells=[];_this.editors=Edit.editors;_this.registerColumnOption("editable");_this.registerColumnOption("editor");_this.registerColumnOption("editorParams");_this.registerColumnOption("cellEditing");_this.registerColumnOption("cellEdited");_this.registerColumnOption("cellEditCancelled");_this.registerTableFunction("getEditedCells",_this.getEditedCells.bind(_assertThisInitialized(_this)));_this.registerTableFunction("clearCellEdited",_this.clearCellEdited.bind(_assertThisInitialized(_this)));_this.registerTableFunction("navigatePrev",_this.navigatePrev.bind(_assertThisInitialized(_this)));_this.registerTableFunction("navigateNext",_this.navigateNext.bind(_assertThisInitialized(_this)));_this.registerTableFunction("navigateLeft",_this.navigateLeft.bind(_assertThisInitialized(_this)));_this.registerTableFunction("navigateRight",_this.navigateRight.bind(_assertThisInitialized(_this)));_this.registerTableFunction("navigateUp",_this.navigateUp.bind(_assertThisInitialized(_this)));_this.registerTableFunction("navigateDown",_this.navigateDown.bind(_assertThisInitialized(_this)));_this.registerComponentFunction("cell","isEdited",_this.cellisEdited.bind(_assertThisInitialized(_this)));_this.registerComponentFunction("cell","clearEdited",_this.clearEdited.bind(_assertThisInitialized(_this)));_this.registerComponentFunction("cell","edit",_this.editCell.bind(_assertThisInitialized(_this)));_this.registerComponentFunction("cell","cancelEdit",_this.cellCancelEdit.bind(_assertThisInitialized(_this)));_this.registerComponentFunction("cell","navigatePrev",_this.navigatePrev.bind(_assertThisInitialized(_this)));_this.registerComponentFunction("cell","navigateNext",_this.navigateNext.bind(_assertThisInitialized(_this)));_this.registerComponentFunction("cell","navigateLeft",_this.navigateLeft.bind(_assertThisInitialized(_this)));_this.registerComponentFunction("cell","navigateRight",_this.navigateRight.bind(_assertThisInitialized(_this)));_this.registerComponentFunction("cell","navigateUp",_this.navigateUp.bind(_assertThisInitialized(_this)));_this.registerComponentFunction("cell","navigateDown",_this.navigateDown.bind(_assertThisInitialized(_this)));return _this}_createClass(Edit,[{key:"initialize",value:function initialize(){this.subscribe("cell-init",this.bindEditor.bind(this));this.subscribe("cell-delete",this.clearEdited.bind(this));this.subscribe("column-layout",this.initializeColumnCheck.bind(this));this.subscribe("column-delete",this.columnDeleteCheck.bind(this));this.subscribe("row-deleting",this.rowDeleteCheck.bind(this));this.subscribe("data-refeshing",this.cancelEdit.bind(this));this.subscribe("keybinding-nav-prev",this.navigatePrev.bind(this));this.subscribe("keybinding-nav-next",this.keybindingNavigateNext.bind(this));this.subscribe("keybinding-nav-left",this.navigateLeft.bind(this));this.subscribe("keybinding-nav-right",this.navigateRight.bind(this));this.subscribe("keybinding-nav-up",this.navigateUp.bind(this));this.subscribe("keybinding-nav-down",this.navigateDown.bind(this))}},{key:"keybindingNavigateNext",value:function keybindingNavigateNext(e){var cell=this.currentCell,newRow=this.options("tabEndNewRow");if(cell){if(!this.navigateNext(e)){if(newRow){cell.getElement().firstChild.blur();if(newRow===true){newRow=this.table.addRow({})}else{if(typeof newRow=="function"){newRow=this.table.addRow(newRow(cell.row.getComponent()))}else{newRow=this.table.addRow(Object.assign({},newRow))}}newRow.then(function(){setTimeout(function(){nav.next()})})}}}}},{key:"cellisEdited",value:function cellisEdited(cell){return!!cell.modules.edit&&cell.modules.edit.edited}},{key:"cellCancelEdit",value:function cellCancelEdit(cell){if(cell===this.currentCell){this.table.modules.edit.cancelEdit()}else{console.warn("Cancel Editor Error - This cell is not currently being edited ")}}},{key:"clearCellEdited",value:function clearCellEdited(cells){var _this2=this;if(!cells){cells=this.modules.edit.getEditedCells()}if(!Array.isArray(cells)){cells=[cells]}cells.forEach(function(cell){_this2.modules.edit.clearEdited(cell._getSelf())})}},{key:"navigatePrev",value:function navigatePrev(e){var cell=this.currentCell,nextCell,prevRow;if(cell){if(e){e.preventDefault()}nextCell=this.navigateLeft();if(nextCell){return true}else{prevRow=this.table.rowManager.prevDisplayRow(cell.row,true);if(prevRow){nextCell=this.findNextEditableCell(prevRow,prevRow.cells.length);if(nextCell){nextCell.getComponent().edit();return true}}}}return false}},{key:"navigateNext",value:function navigateNext(e){var cell=this.currentCell,nextCell,nextRow;if(cell){if(e){e.preventDefault()}nextCell=this.navigateRight();if(nextCell){return true}else{nextRow=this.table.rowManager.nextDisplayRow(cell.row,true);if(nextRow){nextCell=this.findNextEditableCell(nextRow,-1);if(nextCell){nextCell.getComponent().edit();return true}}}}return false}},{key:"navigateLeft",value:function navigateLeft(e){var cell=this.currentCell,index,nextCell;if(cell){if(e){e.preventDefault()}index=cell.getIndex();nextCell=this.findPrevEditableCell(cell.row,index);if(nextCell){nextCell.getComponent().edit();return true}}return false}},{key:"navigateRight",value:function navigateRight(e){var cell=this.currentCell,index,nextCell;if(cell){if(e){e.preventDefault()}index=cell.getIndex();nextCell=this.findNextEditableCell(cell.row,index);if(nextCell){nextCell.getComponent().edit();return true}}return false}},{key:"navigateUp",value:function navigateUp(e){var cell=this.currentCell,index,nextRow;if(cell){if(e){e.preventDefault()}index=cell.getIndex();nextRow=this.table.rowManager.prevDisplayRow(cell.row,true);if(nextRow){nextRow.cells[index].getComponent().edit();return true}}return false}},{key:"navigateDown",value:function navigateDown(e){var cell=this.currentCell,index,nextRow;if(cell){if(e){e.preventDefault()}index=cell.getIndex();nextRow=this.table.rowManager.nextDisplayRow(cell.row,true);if(nextRow){nextRow.cells[index].getComponent().edit();return true}}return false}},{key:"findNextEditableCell",value:function findNextEditableCell(row,index){var nextCell=false;if(index<row.cells.length-1){for(var i=index+1;i<row.cells.length;i++){var cell=row.cells[i];if(cell.column.modules.edit&&Helpers.elVisible(cell.getElement())){var allowEdit=true;if(typeof cell.column.modules.edit.check=="function"){allowEdit=cell.column.modules.edit.check(cell.getComponent())}if(allowEdit){nextCell=cell;break}}}}return nextCell}},{key:"findPrevEditableCell",value:function findPrevEditableCell(row,index){var prevCell=false;if(index>0){for(var i=index-1;i>=0;i--){var cell=row.cells[i],allowEdit=true;if(cell.column.modules.edit&&Helpers.elVisible(cell.getElement())){if(typeof cell.column.modules.edit.check=="function"){allowEdit=cell.column.modules.edit.check(cell.getComponent())}if(allowEdit){prevCell=cell;break}}}}return prevCell}},{key:"initializeColumnCheck",value:function initializeColumnCheck(column){if(typeof column.definition.editor!=="undefined"){this.initializeColumn(column)}}},{key:"columnDeleteCheck",value:function columnDeleteCheck(column){if(this.currentCell&&this.currentCell.column===column){this.cancelEdit()}}},{key:"rowDeleteCheck",value:function rowDeleteCheck(row){if(this.currentCell&&this.currentCell.row===row){this.cancelEdit()}}},{key:"initializeColumn",value:function initializeColumn(column){var config={editor:false,blocked:false,check:column.definition.editable,params:column.definition.editorParams||{}};switch(_typeof(column.definition.editor)){case"string":if(this.editors[column.definition.editor]){config.editor=this.editors[column.definition.editor]}else{console.warn("Editor Error - No such editor found: ",column.definition.editor)}break;case"function":config.editor=column.definition.editor;break;case"boolean":if(column.definition.editor===true){if(typeof column.definition.formatter!=="function"){if(this.editors[column.definition.formatter]){config.editor=this.editors[column.definition.formatter]}else{config.editor=this.editors["input"]}}else{console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",column.definition.formatter)}}break}if(config.editor){column.modules.edit=config}}},{key:"getCurrentCell",value:function getCurrentCell(){return this.currentCell?this.currentCell.getComponent():false}},{key:"clearEditor",value:function clearEditor(cancel){var cell=this.currentCell,cellEl;this.invalidEdit=false;console.log("clear",cancel,cell,cell.validate);if(cell){this.currentCell=false;cellEl=cell.getElement();if(cancel){if(cell.column.modules.validate&&this.table.modExists("validate")){this.table.modules.validate.cellValidate(cell)}}else{cellEl.classList.remove("tabulator-validation-fail")}cellEl.classList.remove("tabulator-editing");while(cellEl.firstChild){cellEl.removeChild(cellEl.firstChild)}cell.row.getElement().classList.remove("tabulator-row-editing")}}},{key:"cancelEdit",value:function cancelEdit(){if(this.currentCell){var cell=this.currentCell;var component=this.currentCell.getComponent();this.clearEditor(true);cell.setValueActual(cell.getValue());cell.cellRendered();if(cell.column.definition.editor=="textarea"||cell.column.definition.variableHeight){cell.row.normalizeHeight(true)}if(cell.column.definition.cellEditCancelled){cell.column.definition.cellEditCancelled.call(this.table,component)}this.dispatch("edit-cancelled",cell);this.dispatchExternal("cellEditCancelled",component)}}},{key:"bindEditor",value:function bindEditor(cell){if(cell.column.modules.edit){var self=this,element=cell.getElement(true);element.setAttribute("tabindex",0);element.addEventListener("click",function(e){if(!element.classList.contains("tabulator-editing")){element.focus({preventScroll:true})}});element.addEventListener("mousedown",function(e){if(e.button===2){e.preventDefault()}else{self.mouseClick=true}});element.addEventListener("focus",function(e){if(!self.recursionBlock){self.edit(cell,e,false)}})}}},{key:"focusCellNoEvent",value:function focusCellNoEvent(cell,block){this.recursionBlock=true;if(!(block&&this.table.browser==="ie")){cell.getElement().focus({preventScroll:true})}this.recursionBlock=false}},{key:"editCell",value:function editCell(cell,forceEdit){this.focusCellNoEvent(cell);this.edit(cell,false,forceEdit)}},{key:"focusScrollAdjust",value:function focusScrollAdjust(cell){if(this.table.rowManager.getRenderMode()=="virtual"){var topEdge=this.table.rowManager.element.scrollTop,bottomEdge=this.table.rowManager.element.clientHeight+this.table.rowManager.element.scrollTop,rowEl=cell.row.getElement(),offset=rowEl.offsetTop;if(rowEl.offsetTop<topEdge){this.table.rowManager.element.scrollTop-=topEdge-rowEl.offsetTop}else{if(rowEl.offsetTop+rowEl.offsetHeight>bottomEdge){this.table.rowManager.element.scrollTop+=rowEl.offsetTop+rowEl.offsetHeight-bottomEdge}}var leftEdge=this.table.rowManager.element.scrollLeft,rightEdge=this.table.rowManager.element.clientWidth+this.table.rowManager.element.scrollLeft,cellEl=cell.getElement(),offset=cellEl.offsetLeft;if(this.table.modExists("frozenColumns")){leftEdge+=parseInt(this.table.modules.frozenColumns.leftMargin);rightEdge-=parseInt(this.table.modules.frozenColumns.rightMargin)}if(this.table.options.renderHorizontal==="virtual"){leftEdge-=parseInt(this.table.columnManager.renderer.vDomPadLeft);rightEdge-=parseInt(this.table.columnManager.renderer.vDomPadLeft)}if(cellEl.offsetLeft<leftEdge){this.table.rowManager.element.scrollLeft-=leftEdge-cellEl.offsetLeft}else{if(cellEl.offsetLeft+cellEl.offsetWidth>rightEdge){this.table.rowManager.element.scrollLeft+=cellEl.offsetLeft+cellEl.offsetWidth-rightEdge}}}}},{key:"edit",value:function edit(cell,e,forceEdit){var self=this,allowEdit=true,rendered=function rendered(){},element=cell.getElement(),cellEditor,component,params;if(this.currentCell){if(!this.invalidEdit){this.cancelEdit()}return}function success(value){if(self.currentCell===cell){var valid=true;if(cell.column.modules.validate&&self.table.modExists("validate")&&self.table.options.validationMode!="manual"){valid=self.table.modules.validate.validate(cell.column.modules.validate,cell,value)}if(valid===true||self.table.options.validationMode==="highlight"){self.clearEditor();if(!cell.modules.edit){cell.modules.edit={}}cell.modules.edit.edited=true;if(self.editedCells.indexOf(cell)==-1){self.editedCells.push(cell)}cell.setValue(value,true);if(valid!==true){element.classList.add("tabulator-validation-fail");self.table.externalEvents.dispatch("validationFailed",cell.getComponent(),value,valid);return false}return true}else{self.invalidEdit=true;element.classList.add("tabulator-validation-fail");self.focusCellNoEvent(cell,true);rendered();self.table.externalEvents.dispatch("validationFailed",cell.getComponent(),value,valid);return false}}}function cancel(){if(self.currentCell===cell){self.cancelEdit()}}function onRendered(callback){rendered=callback}if(!cell.column.modules.edit.blocked){if(e){e.stopPropagation()}switch(_typeof(cell.column.modules.edit.check)){case"function":allowEdit=cell.column.modules.edit.check(cell.getComponent());break;case"boolean":allowEdit=cell.column.modules.edit.check;break}if(allowEdit||forceEdit){self.cancelEdit();self.currentCell=cell;this.focusScrollAdjust(cell);component=cell.getComponent();if(this.mouseClick){this.mouseClick=false;if(cell.column.definition.cellClick){cell.column.definition.cellClick.call(this.table,e,component)}}if(cell.column.definition.cellEditing){cell.column.definition.cellEditing.call(this.table,component)}this.dispatchExternal("cellEditing",component);params=typeof cell.column.modules.edit.params==="function"?cell.column.modules.edit.params(component):cell.column.modules.edit.params;cellEditor=cell.column.modules.edit.editor.call(self,component,onRendered,success,cancel,params);if(cellEditor!==false){if(cellEditor instanceof Node){element.classList.add("tabulator-editing");cell.row.getElement().classList.add("tabulator-row-editing");while(element.firstChild){element.removeChild(element.firstChild)}element.appendChild(cellEditor);rendered();var children=element.children;for(var i=0;i<children.length;i++){children[i].addEventListener("click",function(e){e.stopPropagation()})}}else{console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",cellEditor);element.blur();return false}}else{element.blur();return false}return true}else{this.mouseClick=false;element.blur();return false}}else{this.mouseClick=false;element.blur();return false}}},{key:"getEditedCells",value:function getEditedCells(){var output=[];this.editedCells.forEach(function(cell){output.push(cell.getComponent())});return output}},{key:"clearEdited",value:function clearEdited(cell){var editIndex;if(cell.modules.edit&&cell.modules.edit.edited){cell.modules.edit.edited=false;if(cell.modules.validate){cell.modules.validate.invalid=false}}editIndex=this.editedCells.indexOf(cell);if(editIndex>-1){this.editedCells.splice(editIndex,1)}}}]);return Edit}(Module);Edit.moduleName="edit";Edit.editors=defaultEditors;var ExportRow=function ExportRow(type,columns,component,indent){_classCallCheck(this,ExportRow);this.type=type;this.columns=columns;this.component=component||false;this.indent=indent||0};var ExportColumn=function ExportColumn(value,component,width,height,depth){_classCallCheck(this,ExportColumn);this.value=value;this.component=component||false;this.width=width;this.height=height;this.depth=depth};var Export=function(_Module){_inherits(Export,_Module);var _super=_createSuper(Export);function Export(table){var _this;_classCallCheck(this,Export);_this=_super.call(this,table);_this.config={};_this.cloneTableStyle=true;_this.colVisProp="";_this.registerTableOption("htmlOutputConfig",false);_this.registerColumnOption("htmlOutput");_this.registerColumnOption("titleHtmlOutput");return _this}_createClass(Export,[{key:"initialize",value:function initialize(){this.registerTableFunction("getHtml",this.getHtml.bind(this))}},{key:"generateExportList",value:function generateExportList(config,style,range,colVisProp){this.cloneTableStyle=style;this.config=config||{};this.colVisProp=colVisProp;var headers=this.config.columnHeaders!==false?this.headersToExportRows(this.generateColumnGroupHeaders()):[];var body=this.bodyToExportRows(this.rowLookup(range));return headers.concat(body)}},{key:"genereateTable",value:function genereateTable(config,style,range,colVisProp){var list=this.generateExportList(config,style,range,colVisProp);return this.genereateTableElement(list)}},{key:"rowLookup",value:function rowLookup(range){var _this2=this;var rows=[];if(typeof range=="function"){range.call(this.table).forEach(function(row){row=_this2.table.rowManager.findRow(row);if(row){rows.push(row)}})}else{switch(range){case true:case"visible":rows=this.table.rowManager.getVisibleRows(false,true);break;case"all":rows=this.table.rowManager.rows;break;case"selected":rows=this.table.modules.selectRow.selectedRows;break;case"active":default:if(this.table.options.pagination){rows=this.table.rowManager.getDisplayRows(this.table.rowManager.displayRows.length-2)}else{rows=this.table.rowManager.getDisplayRows()}}}return Object.assign([],rows)}},{key:"generateColumnGroupHeaders",value:function generateColumnGroupHeaders(){var _this3=this;var output=[];var columns=this.config.columnGroups!==false?this.table.columnManager.columns:this.table.columnManager.columnsByIndex;columns.forEach(function(column){var colData=_this3.processColumnGroup(column);if(colData){output.push(colData)}});return output}},{key:"processColumnGroup",value:function processColumnGroup(column){var _this4=this;var subGroups=column.columns,maxDepth=0,title=column.definition["title"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))]||column.definition.title;var groupData={title:title,column:column,depth:1};if(subGroups.length){groupData.subGroups=[];groupData.width=0;subGroups.forEach(function(subGroup){var subGroupData=_this4.processColumnGroup(subGroup);if(subGroupData){groupData.width+=subGroupData.width;groupData.subGroups.push(subGroupData);if(subGroupData.depth>maxDepth){maxDepth=subGroupData.depth}}});groupData.depth+=maxDepth;if(!groupData.width){return false}}else{if(this.columnVisCheck(column)){groupData.width=1}else{return false}}return groupData}},{key:"columnVisCheck",value:function columnVisCheck(column){return column.definition[this.colVisProp]!==false&&(column.visible||!column.visible&&column.definition[this.colVisProp])}},{key:"headersToExportRows",value:function headersToExportRows(columns){var headers=[],headerDepth=0,exportRows=[];function parseColumnGroup(column,level){var depth=headerDepth-level;if(typeof headers[level]==="undefined"){headers[level]=[]}column.height=column.subGroups?1:depth-column.depth+1;headers[level].push(column);if(column.height>1){for(var _i=1;_i<column.height;_i++){if(typeof headers[level+_i]==="undefined"){headers[level+_i]=[]}headers[level+_i].push(false)}}if(column.width>1){for(var _i2=1;_i2<column.width;_i2++){headers[level].push(false)}}if(column.subGroups){column.subGroups.forEach(function(subGroup){parseColumnGroup(subGroup,level+1)})}}columns.forEach(function(column){if(column.depth>headerDepth){headerDepth=column.depth}});columns.forEach(function(column){parseColumnGroup(column,0)});headers.forEach(function(header){var columns=[];header.forEach(function(col){if(col){columns.push(new ExportColumn(col.title,col.column.getComponent(),col.width,col.height,col.depth))}else{columns.push(null)}});exportRows.push(new ExportRow("header",columns))});return exportRows}},{key:"bodyToExportRows",value:function bodyToExportRows(rows){var _this5=this;var columns=[];var exportRows=[];this.table.columnManager.columnsByIndex.forEach(function(column){if(_this5.columnVisCheck(column)){columns.push(column.getComponent())}});if(this.config.columnCalcs!==false&&this.table.modExists("columnCalcs")){if(this.table.modules.columnCalcs.topInitialized){rows.unshift(this.table.modules.columnCalcs.topRow)}if(this.table.modules.columnCalcs.botInitialized){rows.push(this.table.modules.columnCalcs.botRow)}}rows=rows.filter(function(row){switch(row.type){case"group":return _this5.config.rowGroups!==false;case"calc":return _this5.config.columnCalcs!==false;case"row":return!(_this5.table.options.dataTree&&_this5.config.dataTree===false&&row.modules.dataTree.parent)}return true});rows.forEach(function(row,i){var rowData=row.getData(_this5.colVisProp);var exportCols=[];var indent=0;switch(row.type){case"group":indent=row.level;exportCols.push(new ExportColumn(row.key,row.getComponent(),columns.length,1));break;case"calc":case"row":columns.forEach(function(col){exportCols.push(new ExportColumn(col._column.getFieldValue(rowData),col,1,1))});if(_this5.table.options.dataTree&&_this5.config.dataTree!==false){indent=row.modules.dataTree.index}break}exportRows.push(new ExportRow(row.type,exportCols,row.getComponent(),indent))});return exportRows}},{key:"genereateTableElement",value:function genereateTableElement(list){var _this6=this;var table=document.createElement("table"),headerEl=document.createElement("thead"),bodyEl=document.createElement("tbody"),styles=this.lookupTableStyles(),rowFormatter=this.table.options["rowFormatter"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],setup={};setup.rowFormatter=rowFormatter!==null?rowFormatter:this.table.options.rowFormatter;if(this.table.options.dataTree&&this.config.dataTree!==false&&this.table.modExists("columnCalcs")){setup.treeElementField=this.table.modules.dataTree.elementField}setup.groupHeader=this.table.options["groupHeader"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))];if(setup.groupHeader&&!Array.isArray(setup.groupHeader)){setup.groupHeader=[setup.groupHeader]}table.classList.add("tabulator-print-table");this.mapElementStyles(this.table.columnManager.getHeadersElement(),headerEl,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]);if(list.length>1e3){console.warn("It may take a long time to render an HTML table with more than 1000 rows")}list.forEach(function(row,i){switch(row.type){case"header":headerEl.appendChild(_this6.genereateHeaderElement(row,setup,styles));break;case"group":bodyEl.appendChild(_this6.genereateGroupElement(row,setup,styles));break;case"calc":bodyEl.appendChild(_this6.genereateCalcElement(row,setup,styles));break;case"row":var rowEl=_this6.genereateRowElement(row,setup,styles);_this6.mapElementStyles(i%2&&styles.evenRow?styles.evenRow:styles.oddRow,rowEl,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]);bodyEl.appendChild(rowEl);break}});if(headerEl.innerHTML){table.appendChild(headerEl)}table.appendChild(bodyEl);this.mapElementStyles(this.table.element,table,["border-top","border-left","border-right","border-bottom"]);return table}},{key:"lookupTableStyles",value:function lookupTableStyles(){var styles={};if(this.cloneTableStyle&&window.getComputedStyle){styles.oddRow=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)");styles.evenRow=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)");styles.calcRow=this.table.element.querySelector(".tabulator-row.tabulator-calcs");styles.firstRow=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)");styles.firstGroup=this.table.element.getElementsByClassName("tabulator-group")[0];if(styles.firstRow){styles.styleCells=styles.firstRow.getElementsByClassName("tabulator-cell");styles.firstCell=styles.styleCells[0];styles.lastCell=styles.styleCells[styles.styleCells.length-1]}}return styles}},{key:"genereateHeaderElement",value:function genereateHeaderElement(row,setup,styles){var _this7=this;var rowEl=document.createElement("tr");row.columns.forEach(function(column){if(column){var cellEl=document.createElement("th");var classNames=column.component._column.definition.cssClass?column.component._column.definition.cssClass.split(" "):[];cellEl.colSpan=column.width;cellEl.rowSpan=column.height;cellEl.innerHTML=column.value;if(_this7.cloneTableStyle){cellEl.style.boxSizing="border-box"}classNames.forEach(function(className){cellEl.classList.add(className)});_this7.mapElementStyles(column.component.getElement(),cellEl,["text-align","border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]);_this7.mapElementStyles(column.component._column.contentElement,cellEl,["padding-top","padding-left","padding-right","padding-bottom"]);if(column.component._column.visible){_this7.mapElementStyles(column.component.getElement(),cellEl,["width"])}else{if(column.component._column.definition.width){cellEl.style.width=column.component._column.definition.width+"px"}}if(column.component._column.parent){_this7.mapElementStyles(column.component._column.parent.groupElement,cellEl,["border-top"])}rowEl.appendChild(cellEl)}});return rowEl}},{key:"genereateGroupElement",value:function genereateGroupElement(row,setup,styles){var rowEl=document.createElement("tr"),cellEl=document.createElement("td"),group=row.columns[0];rowEl.classList.add("tabulator-print-table-row");if(setup.groupHeader&&setup.groupHeader[row.indent]){group.value=setup.groupHeader[row.indent](group.value,row.component._group.getRowCount(),row.component._group.getData(),row.component)}else{if(setup.groupHeader===false){group.value=group.value}else{group.value=row.component._group.generator(group.value,row.component._group.getRowCount(),row.component._group.getData(),row.component)}}cellEl.colSpan=group.width;cellEl.innerHTML=group.value;rowEl.classList.add("tabulator-print-table-group");rowEl.classList.add("tabulator-group-level-"+row.indent);if(group.component.isVisible()){rowEl.classList.add("tabulator-group-visible")}this.mapElementStyles(styles.firstGroup,rowEl,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]);this.mapElementStyles(styles.firstGroup,cellEl,["padding-top","padding-left","padding-right","padding-bottom"]);rowEl.appendChild(cellEl);return rowEl}},{key:"genereateCalcElement",value:function genereateCalcElement(row,setup,styles){var rowEl=this.genereateRowElement(row,setup,styles);rowEl.classList.add("tabulator-print-table-calcs");this.mapElementStyles(styles.calcRow,rowEl,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]);return rowEl}},{key:"genereateRowElement",value:function genereateRowElement(row,setup,styles){var _this8=this;var rowEl=document.createElement("tr");rowEl.classList.add("tabulator-print-table-row");row.columns.forEach(function(col){if(col){var cellEl=document.createElement("td"),column=col.component._column,value=col.value;var cellWrapper={modules:{},getValue:function getValue(){return value},getField:function getField(){return column.definition.field},getElement:function getElement(){return cellEl},getColumn:function getColumn(){return column.getComponent()},getData:function getData(){return row.component.getData()},getRow:function getRow(){return row.component},getComponent:function getComponent(){return cellWrapper},column:column};var classNames=column.definition.cssClass?column.definition.cssClass.split(" "):[];classNames.forEach(function(className){cellEl.classList.add(className)});if(_this8.table.modExists("format")&&_this8.config.formatCells!==false){value=_this8.table.modules.format.formatExportValue(cellWrapper,_this8.colVisProp)}else{switch(_typeof(value)){case"object":value=JSON.stringify(value);break;case"undefined":case"null":value="";break;default:value=value}}if(value instanceof Node){cellEl.appendChild(value)}else{cellEl.innerHTML=value}if(styles.firstCell){_this8.mapElementStyles(styles.firstCell,cellEl,["padding-top","padding-left","padding-right","padding-bottom","border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size"]);if(column.definition.align){cellEl.style.textAlign=column.definition.align}}if(_this8.table.options.dataTree&&_this8.config.dataTree!==false){if(setup.treeElementField&&setup.treeElementField==column.field||!setup.treeElementField&&i==0){if(row.component._row.modules.dataTree.controlEl){cellEl.insertBefore(row.component._row.modules.dataTree.controlEl.cloneNode(true),cellEl.firstChild)}if(row.component._row.modules.dataTree.branchEl){cellEl.insertBefore(row.component._row.modules.dataTree.branchEl.cloneNode(true),cellEl.firstChild)}}}rowEl.appendChild(cellEl);if(cellWrapper.modules.format&&cellWrapper.modules.format.renderedCallback){cellWrapper.modules.format.renderedCallback()}if(setup.rowFormatter&&_this8.config.formatCells!==false){setup.rowFormatter(row.component)}}});return rowEl}},{key:"genereateHTMLTable",value:function genereateHTMLTable(list){var holder=document.createElement("div");holder.appendChild(this.genereateTableElement(list));return holder.innerHTML}},{key:"getHtml",value:function getHtml(visible,style,config,colVisProp){var list=this.generateExportList(config||this.table.options.htmlOutputConfig,style,visible,colVisProp||"htmlOutput");return this.genereateHTMLTable(list)}},{key:"mapElementStyles",value:function mapElementStyles(from,to,props){if(this.cloneTableStyle&&from&&to){var lookup={"background-color":"backgroundColor",color:"fontColor",width:"width","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","text-align":"textAlign","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom","padding-top":"paddingTop","padding-left":"paddingLeft","padding-right":"paddingRight","padding-bottom":"paddingBottom"};if(window.getComputedStyle){var fromStyle=window.getComputedStyle(from);props.forEach(function(prop){to.style[lookup[prop]]=fromStyle.getPropertyValue(prop)})}}}}]);return Export}(Module);Export.moduleName="export";var defaultFilters={"=":function _(filterVal,rowVal,rowData,filterParams){return rowVal==filterVal?true:false},"<":function _(filterVal,rowVal,rowData,filterParams){return rowVal<filterVal?true:false},"<=":function _(filterVal,rowVal,rowData,filterParams){return rowVal<=filterVal?true:false},">":function _(filterVal,rowVal,rowData,filterParams){return rowVal>filterVal?true:false},">=":function _(filterVal,rowVal,rowData,filterParams){return rowVal>=filterVal?true:false},"!=":function _(filterVal,rowVal,rowData,filterParams){return rowVal!=filterVal?true:false},regex:function regex(filterVal,rowVal,rowData,filterParams){if(typeof filterVal=="string"){filterVal=new RegExp(filterVal)}return filterVal.test(rowVal)},like:function like(filterVal,rowVal,rowData,filterParams){if(filterVal===null||typeof filterVal==="undefined"){return rowVal===filterVal?true:false}else{if(typeof rowVal!=="undefined"&&rowVal!==null){return String(rowVal).toLowerCase().indexOf(filterVal.toLowerCase())>-1}else{return false}}},keywords:function keywords(filterVal,rowVal,rowData,filterParams){var keywords=filterVal.toLowerCase().split(typeof filterParams.separator==="undefined"?" ":filterParams.separator),value=String(rowVal===null||typeof rowVal==="undefined"?"":rowVal).toLowerCase(),matches=[];keywords.forEach(function(keyword){if(value.includes(keyword)){matches.push(true)}});return filterParams.matchAll?matches.length===keywords.length:!!matches.length},starts:function starts(filterVal,rowVal,rowData,filterParams){if(filterVal===null||typeof filterVal==="undefined"){return rowVal===filterVal?true:false}else{if(typeof rowVal!=="undefined"&&rowVal!==null){return String(rowVal).toLowerCase().startsWith(filterVal.toLowerCase())}else{return false}}},ends:function ends(filterVal,rowVal,rowData,filterParams){if(filterVal===null||typeof filterVal==="undefined"){return rowVal===filterVal?true:false}else{if(typeof rowVal!=="undefined"&&rowVal!==null){return String(rowVal).toLowerCase().endsWith(filterVal.toLowerCase())}else{return false}}},in:function _in(filterVal,rowVal,rowData,filterParams){if(Array.isArray(filterVal)){return filterVal.length?filterVal.indexOf(rowVal)>-1:true}else{console.warn("Filter Error - filter value is not an array:",filterVal);return false}}};var Filter=function(_Module){_inherits(Filter,_Module);var _super=_createSuper(Filter);function Filter(table){var _this;_classCallCheck(this,Filter);_this=_super.call(this,table);_this.filterList=[];_this.headerFilters={};_this.headerFilterColumns=[];_this.prevHeaderFilterChangeCheck="";_this.prevHeaderFilterChangeCheck="{}";_this.changed=false;_this.tableInitialized=false;_this.registerTableOption("filterMode","local");_this.registerTableOption("initialFilter",false);_this.registerTableOption("initialHeaderFilter",false);_this.registerTableOption("headerFilterLiveFilterDelay",300);_this.registerColumnOption("headerFilter");_this.registerColumnOption("headerFilterPlaceholder");_this.registerColumnOption("headerFilterParams");_this.registerColumnOption("headerFilterEmptyCheck");_this.registerColumnOption("headerFilterFunc");_this.registerColumnOption("headerFilterFuncParams");_this.registerColumnOption("headerFilterLiveFilter");_this.registerTableFunction("searchRows",_this.searchRows.bind(_assertThisInitialized(_this)));_this.registerTableFunction("searchData",_this.searchData.bind(_assertThisInitialized(_this)));_this.registerTableFunction("setFilter",_this.userSetFilter.bind(_assertThisInitialized(_this)));_this.registerTableFunction("refreshFilter",_this.userRefreshFilter.bind(_assertThisInitialized(_this)));_this.registerTableFunction("addFilter",_this.userAddFilter.bind(_assertThisInitialized(_this)));_this.registerTableFunction("getFilters",_this.getFilters.bind(_assertThisInitialized(_this)));_this.registerTableFunction("setHeaderFilterFocus",_this.userSetHeaderFilterFocus.bind(_assertThisInitialized(_this)));_this.registerTableFunction("getHeaderFilterValue",_this.userGetHeaderFilterValue.bind(_assertThisInitialized(_this)));_this.registerTableFunction("setHeaderFilterValue",_this.userSetHeaderFilterValue.bind(_assertThisInitialized(_this)));_this.registerTableFunction("getHeaderFilters",_this.getHeaderFilters.bind(_assertThisInitialized(_this)));_this.registerTableFunction("removeFilter",_this.userRemoveFilter.bind(_assertThisInitialized(_this)));_this.registerTableFunction("clearFilter",_this.userClearFilter.bind(_assertThisInitialized(_this)));_this.registerTableFunction("clearHeaderFilter",_this.userClearHeaderFilter.bind(_assertThisInitialized(_this)));_this.registerComponentFunction("column","headerFilterFocus",_this.setHeaderFilterFocus.bind(_assertThisInitialized(_this)));_this.registerComponentFunction("column","reloadHeaderFilter",_this.reloadHeaderFilter.bind(_assertThisInitialized(_this)));_this.registerComponentFunction("column","getHeaderFilterValue",_this.getHeaderFilterValue.bind(_assertThisInitialized(_this)));_this.registerComponentFunction("column","setHeaderFilterValue",_this.setHeaderFilterValue.bind(_assertThisInitialized(_this)));return _this}_createClass(Filter,[{key:"initialize",value:function initialize(){this.subscribe("column-init",this.initializeColumnHeaderFilter.bind(this));this.subscribe("column-width-fit-before",this.hideHeaderFilterElements.bind(this));this.subscribe("column-width-fit-after",this.showHeaderFilterElements.bind(this));this.subscribe("table-built",this.tableBuilt.bind(this));if(this.table.options.filterMode==="remote"){this.subscribe("data-params",this.remoteFilterParams.bind(this))}this.registerDataHandler(this.filter.bind(this),10)}},{key:"tableBuilt",value:function tableBuilt(){var _this2=this;if(this.table.options.initialFilter){this.setFilter(this.table.options.initialFilter)}if(this.table.options.initialHeaderFilter){this.table.options.initialHeaderFilter.forEach(function(item){var column=_this2.table.columnManager.findColumn(item.field);if(column){_this2.setHeaderFilterValue(column,item.value)}else{console.warn("Column Filter Error - No matching column found:",item.field);return false}})}this.tableInitialized=true}},{key:"remoteFilterParams",value:function remoteFilterParams(data,config,silent,params){params.filter=this.getFilters(true,true);return params}},{key:"userSetFilter",value:function userSetFilter(field,type,value,params){this.setFilter(field,type,value,params);this.refreshFilter()}},{key:"userRefreshFilter",value:function userRefreshFilter(){this.refreshFilter()}},{key:"userAddFilter",value:function userAddFilter(field,type,value,params){this.addFilter(field,type,value,params);this.refreshFilter()}},{key:"userSetHeaderFilterFocus",value:function userSetHeaderFilterFocus(field){var column=this.table.columnManager.findColumn(field);if(column){this.setHeaderFilterFocus(column)}else{console.warn("Column Filter Focus Error - No matching column found:",field);return false}}},{key:"userGetHeaderFilterValue",value:function userGetHeaderFilterValue(field){var column=this.table.columnManager.findColumn(field);if(column){return this.getHeaderFilterValue(column)}else{console.warn("Column Filter Error - No matching column found:",field)}}},{key:"userSetHeaderFilterValue",value:function userSetHeaderFilterValue(field,value){var column=this.table.columnManager.findColumn(field);if(column){this.setHeaderFilterValue(column,value)}else{console.warn("Column Filter Error - No matching column found:",field);return false}}},{key:"userRemoveFilter",value:function userRemoveFilter(field,type,value){this.removeFilter(field,type,value);this.refreshFilter()}},{key:"userClearFilter",value:function userClearFilter(all){this.clearFilter(all);this.refreshFilter()}},{key:"userClearHeaderFilter",value:function userClearHeaderFilter(){this.clearHeaderFilter();this.refreshFilter()}},{key:"searchRows",value:function searchRows(field,type,value){return this.search("rows",field,type,value)}},{key:"searchData",value:function searchData(field,type,value){return this.search("data",field,type,value)}},{key:"initializeColumnHeaderFilter",value:function initializeColumnHeaderFilter(column){var def=column.definition;if(def.headerFilter){if(typeof def.headerFilterPlaceholder!=="undefined"&&def.field){this.module("localize").setHeaderFilterColumnPlaceholder(def.field,def.headerFilterPlaceholder)}this.initializeColumn(column)}}},{key:"initializeColumn",value:function initializeColumn(column,value){var self=this,field=column.getField();function success(value){var filterType=column.modules.filter.tagType=="input"&&column.modules.filter.attrType=="text"||column.modules.filter.tagType=="textarea"?"partial":"match",type="",filterChangeCheck="",filterFunc;if(typeof column.modules.filter.prevSuccess==="undefined"||column.modules.filter.prevSuccess!==value){column.modules.filter.prevSuccess=value;if(!column.modules.filter.emptyFunc(value)){column.modules.filter.value=value;switch(_typeof(column.definition.headerFilterFunc)){case"string":if(Filter.filters[column.definition.headerFilterFunc]){type=column.definition.headerFilterFunc;filterFunc=function filterFunc(data){var params=column.definition.headerFilterFuncParams||{};var fieldVal=column.getFieldValue(data);params=typeof params==="function"?params(value,fieldVal,data):params;return Filter.filters[column.definition.headerFilterFunc](value,fieldVal,data,params)}}else{console.warn("Header Filter Error - Matching filter function not found: ",column.definition.headerFilterFunc)}break;case"function":filterFunc=function filterFunc(data){var params=column.definition.headerFilterFuncParams||{};var fieldVal=column.getFieldValue(data);params=typeof params==="function"?params(value,fieldVal,data):params;return column.definition.headerFilterFunc(value,fieldVal,data,params)};type=filterFunc;break}if(!filterFunc){switch(filterType){case"partial":filterFunc=function filterFunc(data){var colVal=column.getFieldValue(data);if(typeof colVal!=="undefined"&&colVal!==null){return String(colVal).toLowerCase().indexOf(String(value).toLowerCase())>-1}else{return false}};type="like";break;default:filterFunc=function filterFunc(data){return column.getFieldValue(data)==value};type="="}}self.headerFilters[field]={value:value,func:filterFunc,type:type,params:{}}}else{delete self.headerFilters[field]}filterChangeCheck=JSON.stringify(self.headerFilters);if(self.prevHeaderFilterChangeCheck!==filterChangeCheck){self.prevHeaderFilterChangeCheck=filterChangeCheck;self.trackChanges();self.refreshFilter()}}return true}column.modules.filter={success:success,attrType:false,tagType:false,emptyFunc:false};this.generateHeaderFilterElement(column)}},{key:"generateHeaderFilterElement",value:function generateHeaderFilterElement(column,initialValue,reinitialize){var _this3=this;var self=this,success=column.modules.filter.success,field=column.getField(),filterElement,editor,editorElement,cellWrapper,typingTimer,searchTrigger,params;function cancel(){}if(column.modules.filter.headerElement&&column.modules.filter.headerElement.parentNode){column.contentElement.removeChild(column.modules.filter.headerElement.parentNode)}if(field){column.modules.filter.emptyFunc=column.definition.headerFilterEmptyCheck||function(value){return!value&&value!=="0"&&value!==0};filterElement=document.createElement("div");filterElement.classList.add("tabulator-header-filter");switch(_typeof(column.definition.headerFilter)){case"string":if(self.table.modules.edit.editors[column.definition.headerFilter]){editor=self.table.modules.edit.editors[column.definition.headerFilter];if((column.definition.headerFilter==="tick"||column.definition.headerFilter==="tickCross")&&!column.definition.headerFilterEmptyCheck){column.modules.filter.emptyFunc=function(value){return value!==true&&value!==false}}}else{console.warn("Filter Error - Cannot build header filter, No such editor found: ",column.definition.editor)}break;case"function":editor=column.definition.headerFilter;break;case"boolean":if(column.modules.edit&&column.modules.edit.editor){editor=column.modules.edit.editor}else{if(column.definition.formatter&&self.table.modules.edit.editors[column.definition.formatter]){editor=self.table.modules.edit.editors[column.definition.formatter];if((column.definition.formatter==="tick"||column.definition.formatter==="tickCross")&&!column.definition.headerFilterEmptyCheck){column.modules.filter.emptyFunc=function(value){return value!==true&&value!==false}}}else{editor=self.table.modules.edit.editors["input"]}}break}if(editor){cellWrapper={getValue:function getValue(){return typeof initialValue!=="undefined"?initialValue:""},getField:function getField(){return column.definition.field},getElement:function getElement(){return filterElement},getColumn:function getColumn(){return column.getComponent()},getRow:function getRow(){return{normalizeHeight:function normalizeHeight(){}}}};params=column.definition.headerFilterParams||{};params=typeof params==="function"?params.call(self.table):params;editorElement=editor.call(this.table.modules.edit,cellWrapper,function(){},success,cancel,params);if(!editorElement){console.warn("Filter Error - Cannot add filter to "+field+" column, editor returned a value of false");return}if(!(editorElement instanceof Node)){console.warn("Filter Error - Cannot add filter to "+field+" column, editor should return an instance of Node, the editor returned:",editorElement);return}if(field){self.langBind("headerFilters|columns|"+column.definition.field,function(value){editorElement.setAttribute("placeholder",typeof value!=="undefined"&&value?value:self.langText("headerFilters|default"))})}else{self.langBind("headerFilters|default",function(value){editorElement.setAttribute("placeholder",value)})}editorElement.addEventListener("click",function(e){e.stopPropagation();editorElement.focus()});editorElement.addEventListener("focus",function(e){var left=_this3.table.columnManager.element.scrollLeft;if(left!==_this3.table.rowManager.element.scrollLeft){_this3.table.rowManager.scrollHorizontal(left);_this3.table.columnManager.scrollHorizontal(left)}});typingTimer=false;searchTrigger=function searchTrigger(e){if(typingTimer){clearTimeout(typingTimer)}typingTimer=setTimeout(function(){success(editorElement.value)},self.table.options.headerFilterLiveFilterDelay)};column.modules.filter.headerElement=editorElement;column.modules.filter.attrType=editorElement.hasAttribute("type")?editorElement.getAttribute("type").toLowerCase():"";column.modules.filter.tagType=editorElement.tagName.toLowerCase();if(column.definition.headerFilterLiveFilter!==false){if(!(column.definition.headerFilter==="autocomplete"||column.definition.headerFilter==="tickCross"||(column.definition.editor==="autocomplete"||column.definition.editor==="tickCross")&&column.definition.headerFilter===true)){editorElement.addEventListener("keyup",searchTrigger);editorElement.addEventListener("search",searchTrigger);if(column.modules.filter.attrType=="number"){editorElement.addEventListener("change",function(e){success(editorElement.value)})}if(column.modules.filter.attrType=="text"&&this.table.browser!=="ie"){editorElement.setAttribute("type","search")}}if(column.modules.filter.tagType=="input"||column.modules.filter.tagType=="select"||column.modules.filter.tagType=="textarea"){editorElement.addEventListener("mousedown",function(e){e.stopPropagation()})}}filterElement.appendChild(editorElement);column.contentElement.appendChild(filterElement);if(!reinitialize){self.headerFilterColumns.push(column)}}}else{console.warn("Filter Error - Cannot add header filter, column has no field set:",column.definition.title)}}},{key:"hideHeaderFilterElements",value:function hideHeaderFilterElements(){this.headerFilterColumns.forEach(function(column){if(column.modules.filter&&column.modules.filter.headerElement){column.modules.filter.headerElement.style.display="none"}})}},{key:"showHeaderFilterElements",value:function showHeaderFilterElements(){this.headerFilterColumns.forEach(function(column){if(column.modules.filter&&column.modules.filter.headerElement){column.modules.filter.headerElement.style.display=""}})}},{key:"setHeaderFilterFocus",value:function setHeaderFilterFocus(column){if(column.modules.filter&&column.modules.filter.headerElement){column.modules.filter.headerElement.focus()}else{console.warn("Column Filter Focus Error - No header filter set on column:",column.getField())}}},{key:"getHeaderFilterValue",value:function getHeaderFilterValue(column){if(column.modules.filter&&column.modules.filter.headerElement){return column.modules.filter.headerElement.value}else{console.warn("Column Filter Error - No header filter set on column:",column.getField())}}},{key:"setHeaderFilterValue",value:function setHeaderFilterValue(column,value){if(column){if(column.modules.filter&&column.modules.filter.headerElement){this.generateHeaderFilterElement(column,value,true);column.modules.filter.success(value)}else{console.warn("Column Filter Error - No header filter set on column:",column.getField())}}}},{key:"reloadHeaderFilter",value:function reloadHeaderFilter(column){if(column){if(column.modules.filter&&column.modules.filter.headerElement){this.generateHeaderFilterElement(column,column.modules.filter.value,true)}else{console.warn("Column Filter Error - No header filter set on column:",column.getField())}}}},{key:"refreshFilter",value:function refreshFilter(){if(this.tableInitialized){if(this.table.options.filterMode==="remote"){this.reloadData()}else{this.refreshData(true)}}}},{key:"trackChanges",value:function trackChanges(){this.changed=true;this.dispatch("filter-changed")}},{key:"hasChanged",value:function hasChanged(){var changed=this.changed;this.changed=false;return changed}},{key:"setFilter",value:function setFilter(field,type,value,params){this.filterList=[];if(!Array.isArray(field)){field=[{field:field,type:type,value:value,params:params}]}this.addFilter(field)}},{key:"addFilter",value:function addFilter(field,type,value,params){var _this4=this;if(!Array.isArray(field)){field=[{field:field,type:type,value:value,params:params}]}field.forEach(function(filter){filter=_this4.findFilter(filter);if(filter){_this4.filterList.push(filter);_this4.changed=true}})}},{key:"findFilter",value:function findFilter(filter){var column;if(Array.isArray(filter)){return this.findSubFilters(filter)}var filterFunc=false;if(typeof filter.field=="function"){filterFunc=function filterFunc(data){return filter.field(data,filter.type||{})}}else{if(Filter.filters[filter.type]){column=this.table.columnManager.getColumnByField(filter.field);if(column){filterFunc=function filterFunc(data){return Filter.filters[filter.type](filter.value,column.getFieldValue(data),data,filter.params||{})}}else{filterFunc=function filterFunc(data){return Filter.filters[filter.type](filter.value,data[filter.field],data,filter.params||{})}}}else{console.warn("Filter Error - No such filter type found, ignoring: ",filter.type)}}filter.func=filterFunc;return filter.func?filter:false}},{key:"findSubFilters",value:function findSubFilters(filters){var _this5=this;var output=[];filters.forEach(function(filter){filter=_this5.findFilter(filter);if(filter){output.push(filter)}});return output.length?output:false}},{key:"getFilters",value:function getFilters(all,ajax){var output=[];if(all){output=this.getHeaderFilters()}if(ajax){output.forEach(function(item){if(typeof item.type=="function"){item.type="function"}})}output=output.concat(this.filtersToArray(this.filterList,ajax));return output}},{key:"filtersToArray",value:function filtersToArray(filterList,ajax){var _this6=this;var output=[];filterList.forEach(function(filter){var item;if(Array.isArray(filter)){output.push(_this6.filtersToArray(filter,ajax))}else{item={field:filter.field,type:filter.type,value:filter.value};if(ajax){if(typeof item.type=="function"){item.type="function"}}output.push(item)}});return output}},{key:"getHeaderFilters",value:function getHeaderFilters(){var output=[];for(var key in this.headerFilters){output.push({field:key,type:this.headerFilters[key].type,value:this.headerFilters[key].value})}return output}},{key:"removeFilter",value:function removeFilter(field,type,value){var _this7=this;if(!Array.isArray(field)){field=[{field:field,type:type,value:value}]}field.forEach(function(filter){var index=-1;if(_typeof(filter.field)=="object"){index=_this7.filterList.findIndex(function(element){return filter===element})}else{index=_this7.filterList.findIndex(function(element){return filter.field===element.field&&filter.type===element.type&&filter.value===element.value})}if(index>-1){_this7.filterList.splice(index,1)}else{console.warn("Filter Error - No matching filter type found, ignoring: ",filter.type)}});this.trackChanges()}},{key:"clearFilter",value:function clearFilter(all){this.filterList=[];if(all){this.clearHeaderFilter()}this.trackChanges()}},{key:"clearHeaderFilter",value:function clearHeaderFilter(){var _this8=this;this.headerFilters={};this.prevHeaderFilterChangeCheck="{}";this.headerFilterColumns.forEach(function(column){if(typeof column.modules.filter.value!=="undefined"){delete column.modules.filter.value}column.modules.filter.prevSuccess=undefined;_this8.reloadHeaderFilter(column)});this.trackChanges()}},{key:"search",value:function search(searchType,field,type,value){var _this9=this;var activeRows=[],filterList=[];if(!Array.isArray(field)){field=[{field:field,type:type,value:value}]}field.forEach(function(filter){filter=_this9.findFilter(filter);if(filter){filterList.push(filter)}});this.table.rowManager.rows.forEach(function(row){var match=true;filterList.forEach(function(filter){if(!_this9.filterRecurse(filter,row.getData())){match=false}});if(match){activeRows.push(searchType==="data"?row.getData("data"):row.getComponent())}});return activeRows}},{key:"filter",value:function filter(rowList,filters){var _this10=this;var activeRows=[],activeRowComponents=[];if(this.subscribedExternal("dataFiltering")){this.dispatchExternal("dataFiltering",this.getFilters())}if(this.table.options.filterMode!=="remote"&&(this.filterList.length||Object.keys(this.headerFilters).length)){rowList.forEach(function(row){if(_this10.filterRow(row)){activeRows.push(row)}})}else{activeRows=rowList.slice(0)}if(this.subscribedExternal("dataFiltered")){activeRows.forEach(function(row){activeRowComponents.push(row.getComponent())});this.dispatchExternal("dataFiltered",this.getFilters(),activeRowComponents)}return activeRows}},{key:"filterRow",value:function filterRow(row,filters){var _this11=this;var match=true,data=row.getData();this.filterList.forEach(function(filter){if(!_this11.filterRecurse(filter,data)){match=false}});for(var field in this.headerFilters){if(!this.headerFilters[field].func(data)){match=false}}return match}},{key:"filterRecurse",value:function filterRecurse(filter,data){var _this12=this;var match=false;if(Array.isArray(filter)){filter.forEach(function(subFilter){if(_this12.filterRecurse(subFilter,data)){match=true}})}else{match=filter.func(data)}return match}}]);return Filter}(Module);Filter.moduleName="filter";Filter.filters=defaultFilters;function plaintext(cell,formatterParams,onRendered){return this.emptyToSpace(this.sanitizeHTML(cell.getValue()))}function html$1(cell,formatterParams,onRendered){return cell.getValue()}function textarea$1(cell,formatterParams,onRendered){cell.getElement().style.whiteSpace="pre-wrap";return this.emptyToSpace(this.sanitizeHTML(cell.getValue()))}function money(cell,formatterParams,onRendered){var floatVal=parseFloat(cell.getValue()),sign="",number,integer,decimal,rgx;var decimalSym=formatterParams.decimal||".";var thousandSym=formatterParams.thousand||",";var negativeSign=formatterParams.negativeSign||"-";var symbol=formatterParams.symbol||"";var after=!!formatterParams.symbolAfter;var precision=typeof formatterParams.precision!=="undefined"?formatterParams.precision:2;if(isNaN(floatVal)){return this.emptyToSpace(this.sanitizeHTML(cell.getValue()))}if(floatVal<0){floatVal=Math.abs(floatVal);sign=negativeSign}number=precision!==false?floatVal.toFixed(precision):floatVal;number=String(number).split(".");integer=number[0];decimal=number.length>1?decimalSym+number[1]:"";rgx=/(\d+)(\d{3})/;while(rgx.test(integer)){integer=integer.replace(rgx,"$1"+thousandSym+"$2")}return after?sign+integer+decimal+symbol:sign+symbol+integer+decimal}function link(cell,formatterParams,onRendered){var value=cell.getValue(),urlPrefix=formatterParams.urlPrefix||"",download=formatterParams.download,label=value,el=document.createElement("a"),data;if(formatterParams.labelField){data=cell.getData();label=data[formatterParams.labelField]}if(formatterParams.label){switch(_typeof(formatterParams.label)){case"string":label=formatterParams.label;break;case"function":label=formatterParams.label(cell);break}}if(label){if(formatterParams.urlField){data=cell.getData();value=data[formatterParams.urlField]}if(formatterParams.url){switch(_typeof(formatterParams.url)){case"string":value=formatterParams.url;break;case"function":value=formatterParams.url(cell);break}}el.setAttribute("href",urlPrefix+value);if(formatterParams.target){el.setAttribute("target",formatterParams.target)}if(formatterParams.download){if(typeof download=="function"){download=download(cell)}else{download=download===true?"":download}el.setAttribute("download",download)}el.innerHTML=this.emptyToSpace(this.sanitizeHTML(label));return el}else{return"&nbsp;"}}function image(cell,formatterParams,onRendered){var el=document.createElement("img"),src=cell.getValue();if(formatterParams.urlPrefix){src=formatterParams.urlPrefix+cell.getValue()}if(formatterParams.urlSuffix){src=src+formatterParams.urlSuffix}el.setAttribute("src",src);switch(_typeof(formatterParams.height)){case"number":el.style.height=formatterParams.height+"px";break;case"string":el.style.height=formatterParams.height;break}switch(_typeof(formatterParams.width)){case"number":el.style.width=formatterParams.width+"px";break;case"string":el.style.width=formatterParams.width;break}el.addEventListener("load",function(){cell.getRow().normalizeHeight()});return el}function tickCross$1(cell,formatterParams,onRendered){var value=cell.getValue(),element=cell.getElement(),empty=formatterParams.allowEmpty,truthy=formatterParams.allowTruthy,tick=typeof formatterParams.tickElement!=="undefined"?formatterParams.tickElement:'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>',cross=typeof formatterParams.crossElement!=="undefined"?formatterParams.crossElement:'<svg enable-background="new 0 0 24 24" height="14" width="14"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>';if(truthy&&value||value===true||value==="true"||value==="True"||value===1||value==="1"){element.setAttribute("aria-checked",true);return tick||""}else{if(empty&&(value==="null"||value===""||value===null||typeof value==="undefined")){element.setAttribute("aria-checked","mixed");return""}else{element.setAttribute("aria-checked",false);return cross||""}}}function datetime(cell,formatterParams,onRendered){var DT=window.DateTime||luxon.DateTime;var inputFormat=formatterParams.inputFormat||"yyyy-MM-dd HH:mm:ss";var outputFormat=formatterParams.outputFormat||"dd/MM/yyyy HH:mm:ss";var invalid=typeof formatterParams.invalidPlaceholder!=="undefined"?formatterParams.invalidPlaceholder:"";var value=cell.getValue();if(typeof DT!="undefined"){var newDatetime=DT.fromFormat(String(value),inputFormat);if(newDatetime.isValid){if(formatterParams.timezone){newDatetime=newDatetime.shiftTimezone(formatterParams.timezone)}return newDatetime.toFormat(outputFormat)}else{if(invalid===true||!value){return value}else if(typeof invalid==="function"){return invalid(value)}else{return invalid}}}else{console.error("Format Error - 'datetime' formatter is dependant on luxon.js")}}function datetimediff(cell,formatterParams,onRendered){var DT=window.DateTime||luxon.DateTime;var inputFormat=formatterParams.inputFormat||"yyyy-MM-dd HH:mm:ss";var invalid=typeof formatterParams.invalidPlaceholder!=="undefined"?formatterParams.invalidPlaceholder:"";var suffix=typeof formatterParams.suffix!=="undefined"?formatterParams.suffix:false;var unit=typeof formatterParams.unit!=="undefined"?formatterParams.unit:"days";var humanize=typeof formatterParams.humanize!=="undefined"?formatterParams.humanize:false;var date=typeof formatterParams.date!=="undefined"?formatterParams.date:DT.now();var value=cell.getValue();if(typeof DT!="undefined"){var newDatetime=DT.fromFormat(String(value),inputFormat);if(newDatetime.isValid){if(humanize);else{return parseInt(newDatetime.diff(date,unit)[unit])+(suffix?" "+suffix:"")}}else{if(invalid===true){return value}else if(typeof invalid==="function"){return invalid(value)}else{return invalid}}}else{console.error("Format Error - 'datetimediff' formatter is dependant on luxon.js")}}function lookup(cell,formatterParams,onRendered){var value=cell.getValue();if(typeof formatterParams[value]==="undefined"){console.warn("Missing display value for "+value);return value}return formatterParams[value]}function star$1(cell,formatterParams,onRendered){var value=cell.getValue(),element=cell.getElement(),maxStars=formatterParams&&formatterParams.stars?formatterParams.stars:5,stars=document.createElement("span"),star=document.createElementNS("http://www.w3.org/2000/svg","svg"),starActive='<polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>',starInactive='<polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>';stars.style.verticalAlign="middle";star.setAttribute("width","14");star.setAttribute("height","14");star.setAttribute("viewBox","0 0 512 512");star.setAttribute("xml:space","preserve");star.style.padding="0 1px";value=value&&!isNaN(value)?parseInt(value):0;value=Math.max(0,Math.min(value,maxStars));for(var i=1;i<=maxStars;i++){var nextStar=star.cloneNode(true);nextStar.innerHTML=i<=value?starActive:starInactive;stars.appendChild(nextStar)}element.style.whiteSpace="nowrap";element.style.overflow="hidden";element.style.textOverflow="ellipsis";element.setAttribute("aria-label",value);return stars}function traffic(cell,formatterParams,onRendered){var value=this.sanitizeHTML(cell.getValue())||0,el=document.createElement("span"),max=formatterParams&&formatterParams.max?formatterParams.max:100,min=formatterParams&&formatterParams.min?formatterParams.min:0,colors=formatterParams&&typeof formatterParams.color!=="undefined"?formatterParams.color:["red","orange","green"],color="#666666",percent,percentValue;if(isNaN(value)||typeof cell.getValue()==="undefined"){return}el.classList.add("tabulator-traffic-light");percentValue=parseFloat(value)<=max?parseFloat(value):max;percentValue=parseFloat(percentValue)>=min?parseFloat(percentValue):min;percent=(max-min)/100;percentValue=Math.round((percentValue-min)/percent);switch(_typeof(colors)){case"string":color=colors;break;case"function":color=colors(value);break;case"object":if(Array.isArray(colors)){var unit=100/colors.length;var index=Math.floor(percentValue/unit);index=Math.min(index,colors.length-1);index=Math.max(index,0);color=colors[index];break}}el.style.backgroundColor=color;return el}function progress$1(cell,formatterParams,onRendered){var value=this.sanitizeHTML(cell.getValue())||0,element=cell.getElement(),max=formatterParams&&formatterParams.max?formatterParams.max:100,min=formatterParams&&formatterParams.min?formatterParams.min:0,legendAlign=formatterParams&&formatterParams.legendAlign?formatterParams.legendAlign:"center",percent,percentValue,color,legend,legendColor;percentValue=parseFloat(value)<=max?parseFloat(value):max;percentValue=parseFloat(percentValue)>=min?parseFloat(percentValue):min;percent=(max-min)/100;percentValue=Math.round((percentValue-min)/percent);switch(_typeof(formatterParams.color)){case"string":color=formatterParams.color;break;case"function":color=formatterParams.color(value);break;case"object":if(Array.isArray(formatterParams.color)){var unit=100/formatterParams.color.length;var index=Math.floor(percentValue/unit);index=Math.min(index,formatterParams.color.length-1);index=Math.max(index,0);color=formatterParams.color[index];break}default:color="#2DC214"}switch(_typeof(formatterParams.legend)){case"string":legend=formatterParams.legend;break;case"function":legend=formatterParams.legend(value);break;case"boolean":legend=value;break;default:legend=false}switch(_typeof(formatterParams.legendColor)){case"string":legendColor=formatterParams.legendColor;break;case"function":legendColor=formatterParams.legendColor(value);break;case"object":if(Array.isArray(formatterParams.legendColor)){var unit=100/formatterParams.legendColor.length;var index=Math.floor(percentValue/unit);index=Math.min(index,formatterParams.legendColor.length-1);index=Math.max(index,0);legendColor=formatterParams.legendColor[index]}break;default:legendColor="#000"}element.style.minWidth="30px";element.style.position="relative";element.setAttribute("aria-label",percentValue);var barEl=document.createElement("div");barEl.style.display="inline-block";barEl.style.position="absolute";barEl.style.width=percentValue+"%";barEl.style.backgroundColor=color;barEl.style.height="100%";barEl.setAttribute("data-max",max);barEl.setAttribute("data-min",min);var barContainer=document.createElement("div");barContainer.style.position="relative";barContainer.style.width="100%";barContainer.style.height="100%";if(legend){var legendEl=document.createElement("div");legendEl.style.position="absolute";legendEl.style.top=0;legendEl.style.left=0;legendEl.style.textAlign=legendAlign;legendEl.style.width="100%";legendEl.style.color=legendColor;legendEl.innerHTML=legend}onRendered(function(){if(!(cell instanceof CellComponent)){var holderEl=document.createElement("div");holderEl.style.position="absolute";holderEl.style.top="4px";holderEl.style.bottom="4px";holderEl.style.left="4px";holderEl.style.right="4px";element.appendChild(holderEl);element=holderEl}element.appendChild(barContainer);barContainer.appendChild(barEl);if(legend){barContainer.appendChild(legendEl)}});return""}function color(cell,formatterParams,onRendered){cell.getElement().style.backgroundColor=this.sanitizeHTML(cell.getValue());return""}function buttonTick(cell,formatterParams,onRendered){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'}function buttonCross(cell,formatterParams,onRendered){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>'}function rownum(cell,formatterParams,onRendered){return this.table.rowManager.activeRows.indexOf(cell.getRow()._getSelf())+1}function handle(cell,formatterParams,onRendered){cell.getElement().classList.add("tabulator-row-handle");return"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>"}function responsiveCollapse(cell,formatterParams,onRendered){var el=document.createElement("div"),config=cell.getRow()._row.modules.responsiveLayout;el.classList.add("tabulator-responsive-collapse-toggle");el.innerHTML="<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>";cell.getElement().classList.add("tabulator-row-handle");function toggleList(isOpen){var collapseEl=config.element;config.open=isOpen;if(collapseEl){if(config.open){el.classList.add("open");collapseEl.style.display=""}else{el.classList.remove("open");collapseEl.style.display="none"}}}el.addEventListener("click",function(e){e.stopImmediatePropagation();toggleList(!config.open)});toggleList(config.open);return el}function rowSelection(cell,formatterParams,onRendered){var _this=this;var checkbox=document.createElement("input");checkbox.type="checkbox";if(this.table.modExists("selectRow",true)){checkbox.addEventListener("click",function(e){e.stopPropagation()});if(typeof cell.getRow=="function"){var row=cell.getRow();if(row instanceof RowComponent$1){checkbox.addEventListener("change",function(e){row.toggleSelect()});checkbox.checked=row.isSelected&&row.isSelected();this.table.modules.selectRow.registerRowSelectCheckbox(row,checkbox)}else{checkbox=""}}else{checkbox.addEventListener("change",function(e){if(_this.table.modules.selectRow.selectedRows.length){_this.table.deselectRow()}else{_this.table.selectRow(formatterParams.rowRange)}});this.table.modules.selectRow.registerHeaderSelectCheckbox(checkbox)}}return checkbox}var defaultFormatters={plaintext:plaintext,html:html$1,textarea:textarea$1,money:money,link:link,image:image,tickCross:tickCross$1,datetime:datetime,datetimediff:datetimediff,lookup:lookup,star:star$1,traffic:traffic,progress:progress$1,color:color,buttonTick:buttonTick,buttonCross:buttonCross,rownum:rownum,handle:handle,responsiveCollapse:responsiveCollapse,rowSelection:rowSelection};var Format=function(_Module){_inherits(Format,_Module);var _super=_createSuper(Format);function Format(table){var _this;_classCallCheck(this,Format);_this=_super.call(this,table);_this.registerColumnOption("formatter");_this.registerColumnOption("formatterParams");_this.registerColumnOption("formatterPrint");_this.registerColumnOption("formatterPrintParams");_this.registerColumnOption("formatterClipboard");_this.registerColumnOption("formatterClipboardParams");_this.registerColumnOption("formatterHtmlOutput");_this.registerColumnOption("formatterHtmlOutputParams");_this.registerColumnOption("titleFormatter");_this.registerColumnOption("titleFormatterParams");return _this}_createClass(Format,[{key:"initialize",value:function initialize(){this.subscribe("cell-format",this.formatValue.bind(this));this.subscribe("cell-rendered",this.cellRendered.bind(this));this.subscribe("column-layout",this.initializeColumn.bind(this));this.subscribe("column-format",this.formatHeader.bind(this))}},{key:"initializeColumn",value:function initializeColumn(column){column.modules.format=this.lookupFormatter(column,"");if(typeof column.definition.formatterPrint!=="undefined"){column.modules.format.print=this.lookupFormatter(column,"Print")}if(typeof column.definition.formatterClipboard!=="undefined"){column.modules.format.clipboard=this.lookupFormatter(column,"Clipboard")}if(typeof column.definition.formatterHtmlOutput!=="undefined"){column.modules.format.htmlOutput=this.lookupFormatter(column,"HtmlOutput")}}},{key:"lookupFormatter",value:function lookupFormatter(column,type){var config={params:column.definition["formatter"+type+"Params"]||{}},formatter=column.definition["formatter"+type];switch(_typeof(formatter)){case"string":if(Format.formatters[formatter]){config.formatter=Format.formatters[formatter]}else{console.warn("Formatter Error - No such formatter found: ",formatter);config.formatter=Format.formatters.plaintext}break;case"function":config.formatter=formatter;break;default:config.formatter=Format.formatters.plaintext;break}return config}},{key:"cellRendered",value:function cellRendered(cell){if(cell.modules.format&&cell.modules.format.renderedCallback&&!cell.modules.format.rendered){cell.modules.format.renderedCallback();cell.modules.format.rendered=true}}},{key:"formatHeader",value:function formatHeader(column,title,el){var formatter,params,onRendered,mockCell;if(column.definition.titleFormatter){formatter=this.getFormatter(column.definition.titleFormatter);onRendered=function onRendered(callback){column.titleFormatterRendered=callback};mockCell={getValue:function getValue(){return title},getElement:function getElement(){return el}};params=column.definition.titleFormatterParams||{};params=typeof params==="function"?params():params;return formatter.call(this,mockCell,params,onRendered)}else{return title}}},{key:"formatValue",value:function formatValue(cell){var component=cell.getComponent(),params=typeof cell.column.modules.format.params==="function"?cell.column.modules.format.params(component):cell.column.modules.format.params;function onRendered(callback){if(!cell.modules.format){cell.modules.format={}}cell.modules.format.renderedCallback=callback;cell.modules.format.rendered=false}return cell.column.modules.format.formatter.call(this,component,params,onRendered)}},{key:"formatExportValue",value:function formatExportValue(cell,type){var formatter=cell.column.modules.format[type],params;if(formatter){var onRendered=function onRendered(callback){if(!cell.modules.format){cell.modules.format={}}cell.modules.format.renderedCallback=callback;cell.modules.format.rendered=false};params=typeof formatter.params==="function"?formatter.params(component):formatter.params;return formatter.formatter.call(this,cell.getComponent(),params,onRendered)}else{return this.formatValue(cell)}}},{key:"sanitizeHTML",value:function sanitizeHTML(value){if(value){var entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(value).replace(/[&<>"'`=\/]/g,function(s){return entityMap[s]})}else{return value}}},{key:"emptyToSpace",value:function emptyToSpace(value){return value===null||typeof value==="undefined"||value===""?"&nbsp;":value}},{key:"getFormatter",value:function getFormatter(formatter){var formatter;switch(_typeof(formatter)){case"string":if(Format.formatters[formatter]){formatter=Format.formatters[formatter]}else{console.warn("Formatter Error - No such formatter found: ",formatter);formatter=Format.formatters.plaintext}break;case"function":formatter=formatter;break;default:formatter=Format.formatters.plaintext;break}return formatter}}]);return Format}(Module);Format.moduleName="format";Format.formatters=defaultFormatters;var FrozenColumns=function(_Module){_inherits(FrozenColumns,_Module);var _super=_createSuper(FrozenColumns);function FrozenColumns(table){var _this;_classCallCheck(this,FrozenColumns);_this=_super.call(this,table);_this.leftColumns=[];_this.rightColumns=[];_this.leftMargin=0;_this.rightMargin=0;_this.rightPadding=0;_this.initializationMode="left";_this.active=false;_this.scrollEndTimer=false;_this.registerColumnOption("frozen");return _this}_createClass(FrozenColumns,[{key:"reset",value:function reset(){this.initializationMode="left";this.leftColumns=[];this.rightColumns=[];this.leftMargin=0;this.rightMargin=0;this.rightMargin=0;this.active=false;this.table.columnManager.headersElement.style.marginLeft=0;this.table.columnManager.element.style.paddingRight=0}},{key:"initialize",value:function initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this));this.subscribe("column-init",this.initializeColumn.bind(this));this.subscribe("column-width",this.layout.bind(this));this.subscribe("row-layout-after",this.layoutRow.bind(this));this.subscribe("table-layout",this.layout.bind(this));this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this));this.subscribe("columns-loading",this.reset.bind(this));this.subscribe("table-redraw",this.layout.bind(this))}},{key:"layoutCell",value:function layoutCell(cell){this.layoutElement(cell.element,cell.column)}},{key:"initializeColumn",value:function initializeColumn(column){var config={margin:0,edge:false};if(!column.isGroup){if(this.frozenCheck(column)){config.position=this.initializationMode;if(this.initializationMode=="left"){this.leftColumns.push(column)}else{this.rightColumns.unshift(column)}this.active=true;column.modules.frozen=config}else{this.initializationMode="right"}}}},{key:"frozenCheck",value:function frozenCheck(column){if(column.parent.isGroup&&column.definition.frozen){console.warn("Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups")}if(column.parent.isGroup){return this.frozenCheck(column.parent)}else{return column.definition.frozen}}},{key:"scrollHorizontal",value:function scrollHorizontal(){var _this2=this;var rows;if(this.active){clearTimeout(this.scrollEndTimer);this.scrollEndTimer=setTimeout(function(){_this2.layout()},100);rows=this.table.rowManager.getVisibleRows();this.calcMargins();this.layoutColumnPosition();this.layoutCalcRows();rows.forEach(function(row){if(row.type==="row"){_this2.layoutRow(row)}});this.table.rowManager.tableElement.style.marginRight=this.rightMargin}}},{key:"calcMargins",value:function calcMargins(){this.leftMargin=this._calcSpace(this.leftColumns,this.leftColumns.length)+"px";this.table.columnManager.headersElement.style.marginLeft=this.leftMargin;this.rightMargin=this._calcSpace(this.rightColumns,this.rightColumns.length)+"px";this.table.columnManager.element.style.paddingRight=this.rightMargin;this.rightPadding=this.table.rowManager.element.clientWidth+this.table.columnManager.scrollLeft}},{key:"layoutCalcRows",value:function layoutCalcRows(){if(this.table.modExists("columnCalcs")){if(this.table.modules.columnCalcs.topInitialized&&this.table.modules.columnCalcs.topRow){this.layoutRow(this.table.modules.columnCalcs.topRow)}if(this.table.modules.columnCalcs.botInitialized&&this.table.modules.columnCalcs.botRow){this.layoutRow(this.table.modules.columnCalcs.botRow)}if(this.table.modExists("groupRows")){this.layoutGroupCalcs(this.table.modules.groupRows.getGroups())}}}},{key:"layoutGroupCalcs",value:function layoutGroupCalcs(groups){var _this3=this;groups.forEach(function(group){if(group.calcs.top){_this3.layoutRow(group.calcs.top)}if(group.calcs.bottom){_this3.layoutRow(group.calcs.bottom)}if(group.groupList&&group.groupList.length){_this3.layoutGroupCalcs(group.groupList&&group.groupList)}})}},{key:"layoutColumnPosition",value:function layoutColumnPosition(allCells){var _this4=this;var leftParents=[];this.leftColumns.forEach(function(column,i){column.modules.frozen.margin=_this4._calcSpace(_this4.leftColumns,i)+_this4.table.columnManager.scrollLeft+"px";if(i==_this4.leftColumns.length-1){column.modules.frozen.edge=true}else{column.modules.frozen.edge=false}if(column.parent.isGroup){var parentEl=_this4.getColGroupParentElement(column);if(!leftParents.includes(parentEl)){_this4.layoutElement(parentEl,column);leftParents.push(parentEl)}if(column.modules.frozen.edge){parentEl.classList.add("tabulator-frozen-"+column.modules.frozen.position)}}else{_this4.layoutElement(column.getElement(),column)}if(allCells){column.cells.forEach(function(cell){_this4.layoutElement(cell.getElement(true),column)})}});this.rightColumns.forEach(function(column,i){column.modules.frozen.margin=_this4.rightPadding-_this4._calcSpace(_this4.rightColumns,i+1)+"px";if(i==_this4.rightColumns.length-1){column.modules.frozen.edge=true}else{column.modules.frozen.edge=false}if(column.parent.isGroup){_this4.layoutElement(_this4.getColGroupParentElement(column),column)}else{_this4.layoutElement(column.getElement(),column)}if(allCells){column.cells.forEach(function(cell){_this4.layoutElement(cell.getElement(true),column)})}})}},{key:"getColGroupParentElement",value:function getColGroupParentElement(column){return column.parent.isGroup?this.getColGroupParentElement(column.parent):column.getElement()}},{key:"layout",value:function layout(){var _this5=this;if(this.active){this.calcMargins();this.table.rowManager.getDisplayRows().forEach(function(row){if(row.type==="row"){_this5.layoutRow(row)}});this.layoutCalcRows();this.layoutColumnPosition(true);this.table.rowManager.tableElement.style.marginRight=this.rightMargin}}},{key:"layoutRow",value:function layoutRow(row){var _this6=this;var rowEl=row.getElement();rowEl.style.paddingLeft=this.leftMargin;this.leftColumns.forEach(function(column){var cell=row.getCell(column);if(cell){_this6.layoutElement(cell.getElement(true),column)}});this.rightColumns.forEach(function(column){var cell=row.getCell(column);if(cell){_this6.layoutElement(cell.getElement(true),column)}})}},{key:"layoutElement",value:function layoutElement(element,column){if(column.modules.frozen){element.style.position="absolute";element.style.left=column.modules.frozen.margin;element.classList.add("tabulator-frozen");if(column.modules.frozen.edge){element.classList.add("tabulator-frozen-"+column.modules.frozen.position)}}}},{key:"_calcSpace",value:function _calcSpace(columns,index){var width=0;for(var i=0;i<index;i++){if(columns[i].visible){width+=columns[i].getWidth()}}return width}}]);return FrozenColumns}(Module);FrozenColumns.moduleName="frozenColumns";var FrozenRows=function(_Module){_inherits(FrozenRows,_Module);var _super=_createSuper(FrozenRows);function FrozenRows(table){var _this;_classCallCheck(this,FrozenRows);_this=_super.call(this,table);_this.topElement=document.createElement("div");_this.rows=[];_this.registerComponentFunction("row","freeze",_this.freezeRow.bind(_assertThisInitialized(_this)));_this.registerComponentFunction("row","unfreeze",_this.unfreezeRow.bind(_assertThisInitialized(_this)));_this.registerComponentFunction("row","isFrozen",_this.isRowFrozen.bind(_assertThisInitialized(_this)));return _this}_createClass(FrozenRows,[{key:"initialize",value:function initialize(){this.rows=[];this.topElement.classList.add("tabulator-frozen-rows-holder");this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling);this.subscribe("row-deleting",this.detachRow.bind(this));this.registerDisplayHandler(this.getRows.bind(this),10)}},{key:"isRowFrozen",value:function isRowFrozen(row){var index=this.rows.indexOf(row);return index>-1}},{key:"isFrozen",value:function isFrozen(){return!!this.rows.length}},{key:"getRows",value:function getRows(rows){var output=rows.slice(0);this.rows.forEach(function(row){var index=output.indexOf(row);if(index>-1){output.splice(index,1)}});return output}},{key:"freezeRow",value:function freezeRow(row){if(!row.modules.frozen){row.modules.frozen=true;this.topElement.appendChild(row.getElement());row.initialize();row.normalizeHeight();this.table.rowManager.adjustTableSize();this.rows.push(row);this.refreshData(false,"display");this.styleRows()}else{console.warn("Freeze Error - Row is already frozen")}}},{key:"unfreezeRow",value:function unfreezeRow(row){var index=this.rows.indexOf(row);if(row.modules.frozen){row.modules.frozen=false;this.detachRow(row);this.table.rowManager.adjustTableSize();this.refreshData(false,"display");if(this.rows.length){this.styleRows()}}else{console.warn("Freeze Error - Row is already unfrozen")}}},{key:"detachRow",value:function detachRow(row){var index=this.rows.indexOf(row);if(index>-1){var rowEl=row.getElement();if(rowEl.parentNode){rowEl.parentNode.removeChild(rowEl)}this.rows.splice(index,1)}}},{key:"styleRows",value:function styleRows(row){var _this2=this;this.rows.forEach(function(row,i){_this2.table.rowManager.styleRow(row,i)})}}]);return FrozenRows}(Module);FrozenRows.moduleName="frozenRows";var GroupComponent=function(){function GroupComponent(group){_classCallCheck(this,GroupComponent);this._group=group;this.type="GroupComponent";return new Proxy(this,{get:function get(target,name,receiver){if(typeof target[name]!=="undefined"){return target[name]}else{return target._group.table.componentFunctionBinder.handle("row",target._group,name)}}})}_createClass(GroupComponent,[{key:"getKey",value:function getKey(){return this._group.key}},{key:"getField",value:function getField(){return this._group.field}},{key:"getElement",value:function getElement(){return this._group.element}},{key:"getRows",value:function getRows(){return this._group.getRows(true)}},{key:"getSubGroups",value:function getSubGroups(){return this._group.getSubGroups(true)}},{key:"getParentGroup",value:function getParentGroup(){return this._group.parent?this._group.parent.getComponent():false}},{key:"isVisible",value:function isVisible(){return this._group.visible}},{key:"show",value:function show(){this._group.show()}},{key:"hide",value:function hide(){this._group.hide()}},{key:"toggle",value:function toggle(){this._group.toggleVisibility()}},{key:"_getSelf",value:function _getSelf(){return this._group}},{key:"getTable",value:function getTable(){return this._group.groupManager.table}}]);return GroupComponent}();var Group=function(){function Group(groupManager,parent,level,key,field,generator,oldGroup){_classCallCheck(this,Group);this.groupManager=groupManager;this.parent=parent;this.key=key;this.level=level;this.field=field;this.hasSubGroups=level<groupManager.groupIDLookups.length-1;this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow;this.type="group";this.old=oldGroup;this.rows=[];this.groups=[];this.groupList=[];this.generator=generator;this.elementContents=false;this.height=0;this.outerHeight=0;this.initialized=false;this.calcs={};this.initialized=false;this.modules={};this.arrowElement=false;this.visible=oldGroup?oldGroup.visible:typeof groupManager.startOpen[level]!=="undefined"?groupManager.startOpen[level]:groupManager.startOpen[0];this.component=null;this.createElements();this.addBindings();this.createValueGroups()}_createClass(Group,[{key:"wipe",value:function wipe(){if(this.groupList.length){this.groupList.forEach(function(group){group.wipe()})}else{this.rows.forEach(function(row){if(row.modules){delete row.modules.group}})}this.element=false;this.arrowElement=false;this.elementContents=false}},{key:"createElements",value:function createElements(){var arrow=document.createElement("div");arrow.classList.add("tabulator-arrow");this.element=document.createElement("div");this.element.classList.add("tabulator-row");this.element.classList.add("tabulator-group");this.element.classList.add("tabulator-group-level-"+this.level);this.element.setAttribute("role","rowgroup");this.arrowElement=document.createElement("div");this.arrowElement.classList.add("tabulator-group-toggle");this.arrowElement.appendChild(arrow);if(this.groupManager.table.options.movableRows!==false&&this.groupManager.table.modExists("moveRow")){this.groupManager.table.modules.moveRow.initializeGroupHeader(this)}}},{key:"createValueGroups",value:function createValueGroups(){var _this=this;var level=this.level+1;if(this.groupManager.allowedValues&&this.groupManager.allowedValues[level]){this.groupManager.allowedValues[level].forEach(function(value){_this._createGroup(value,level)})}}},{key:"addBindings",value:function addBindings(){var _this2=this;var dblTap,tapHold,tap,toggleElement;if((this.groupManager.table.options.groupContextMenu||this.groupManager.table.options.groupClickMenu)&&this.groupManager.table.modExists("menu")){this.groupManager.table.modules.menu.initializeGroup.call(this.groupManager.table.modules.menu,this)}if(this.groupManager.table.options.groupTap){tap=false;this.element.addEventListener("touchstart",function(e){tap=true},{passive:true});this.element.addEventListener("touchend",function(e){if(tap){_this2.groupManager.table.options.groupTap(e,_this2.getComponent())}tap=false})}if(this.groupManager.table.options.groupDblTap){dblTap=null;this.element.addEventListener("touchend",function(e){if(dblTap){clearTimeout(dblTap);dblTap=null;_this2.groupManager.table.options.groupDblTap(e,_this2.getComponent())}else{dblTap=setTimeout(function(){clearTimeout(dblTap);dblTap=null},300)}})}if(this.groupManager.table.options.groupTapHold){tapHold=null;this.element.addEventListener("touchstart",function(e){clearTimeout(tapHold);tapHold=setTimeout(function(){clearTimeout(tapHold);tapHold=null;tap=false;_this2.groupManager.table.options.groupTapHold(e,_this2.getComponent())},1e3)},{passive:true});this.element.addEventListener("touchend",function(e){clearTimeout(tapHold);tapHold=null})}if(this.groupManager.table.options.groupToggleElement){toggleElement=this.groupManager.table.options.groupToggleElement=="arrow"?this.arrowElement:this.element;toggleElement.addEventListener("click",function(e){e.stopPropagation();e.stopImmediatePropagation();_this2.toggleVisibility()})}}},{key:"_createGroup",value:function _createGroup(groupID,level){var groupKey=level+"_"+groupID;var group=new Group(this.groupManager,this,level,groupID,this.groupManager.groupIDLookups[level].field,this.groupManager.headerGenerator[level]||this.groupManager.headerGenerator[0],this.old?this.old.groups[groupKey]:false);this.groups[groupKey]=group;this.groupList.push(group)}},{key:"_addRowToGroup",value:function _addRowToGroup(row){var level=this.level+1;if(this.hasSubGroups){var groupID=this.groupManager.groupIDLookups[level].func(row.getData()),groupKey=level+"_"+groupID;if(this.groupManager.allowedValues&&this.groupManager.allowedValues[level]){if(this.groups[groupKey]){this.groups[groupKey].addRow(row)}}else{if(!this.groups[groupKey]){this._createGroup(groupID,level)}this.groups[groupKey].addRow(row)}}}},{key:"_addRow",value:function _addRow(row){this.rows.push(row);row.modules.group=this}},{key:"insertRow",value:function insertRow(row,to,after){var data=this.conformRowData({});row.updateData(data);var toIndex=this.rows.indexOf(to);if(toIndex>-1){if(after){this.rows.splice(toIndex+1,0,row)}else{this.rows.splice(toIndex,0,row)}}else{if(after){this.rows.push(row)}else{this.rows.unshift(row)}}row.modules.group=this;this.generateGroupHeaderContents();if(this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.options.columnCalcs!="table"){this.groupManager.table.modules.columnCalcs.recalcGroup(this)}this.groupManager.updateGroupRows(true)}},{key:"scrollHeader",value:function scrollHeader(left){this.arrowElement.style.marginLeft=left;this.groupList.forEach(function(child){child.scrollHeader(left)})}},{key:"getRowIndex",value:function getRowIndex(row){}},{key:"conformRowData",value:function conformRowData(data){if(this.field){data[this.field]=this.key}else{console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function")}if(this.parent){data=this.parent.conformRowData(data)}return data}},{key:"removeRow",value:function removeRow(row){var index=this.rows.indexOf(row);var el=row.getElement();if(index>-1){this.rows.splice(index,1)}if(!this.groupManager.table.options.groupValues&&!this.rows.length){if(this.parent){this.parent.removeGroup(this)}else{this.groupManager.removeGroup(this)}this.groupManager.updateGroupRows(true)}else{if(el.parentNode){el.parentNode.removeChild(el)}this.generateGroupHeaderContents();if(this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.options.columnCalcs!="table"){this.groupManager.table.modules.columnCalcs.recalcGroup(this)}}}},{key:"removeGroup",value:function removeGroup(group){var groupKey=group.level+"_"+group.key,index;if(this.groups[groupKey]){delete this.groups[groupKey];index=this.groupList.indexOf(group);if(index>-1){this.groupList.splice(index,1)}if(!this.groupList.length){if(this.parent){this.parent.removeGroup(this)}else{this.groupManager.removeGroup(this)}}}}},{key:"getHeadersAndRows",value:function getHeadersAndRows(noCalc){var output=[];output.push(this);this._visSet();if(this.visible){if(this.groupList.length){this.groupList.forEach(function(group){output=output.concat(group.getHeadersAndRows(noCalc))})}else{if(!noCalc&&this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()){if(this.calcs.top){this.calcs.top.detachElement();this.calcs.top.deleteCells()}this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);output.push(this.calcs.top)}output=output.concat(this.rows);if(!noCalc&&this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()){if(this.calcs.bottom){this.calcs.bottom.detachElement();this.calcs.bottom.deleteCells()}this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);output.push(this.calcs.bottom)}}}else{if(!this.groupList.length&&this.groupManager.table.options.columnCalcs!="table"){if(this.groupManager.table.modExists("columnCalcs")){if(!noCalc&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()){if(this.calcs.top){this.calcs.top.detachElement();this.calcs.top.deleteCells()}if(this.groupManager.table.options.groupClosedShowCalcs){this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);output.push(this.calcs.top)}}if(!noCalc&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()){if(this.calcs.bottom){this.calcs.bottom.detachElement();this.calcs.bottom.deleteCells()}if(this.groupManager.table.options.groupClosedShowCalcs){this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);output.push(this.calcs.bottom)}}}}}return output}},{key:"getData",value:function getData(visible,transform){var output=[];this._visSet();if(!visible||visible&&this.visible){this.rows.forEach(function(row){output.push(row.getData(transform||"data"))})}return output}},{key:"getRowCount",value:function getRowCount(){var count=0;if(this.groupList.length){this.groupList.forEach(function(group){count+=group.getRowCount()})}else{count=this.rows.length}return count}},{key:"toggleVisibility",value:function toggleVisibility(){if(this.visible){this.hide()}else{this.show()}}},{key:"hide",value:function hide(){this.visible=false;if(this.groupManager.table.rowManager.getRenderMode()=="classic"&&!this.groupManager.table.options.pagination){this.element.classList.remove("tabulator-group-visible");if(this.groupList.length){this.groupList.forEach(function(group){var rows=group.getHeadersAndRows();rows.forEach(function(row){row.detachElement()})})}else{this.rows.forEach(function(row){var rowEl=row.getElement();rowEl.parentNode.removeChild(rowEl)})}this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex());this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()}else{this.groupManager.updateGroupRows(true)}this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),false)}},{key:"show",value:function show(){this.visible=true;if(this.groupManager.table.rowManager.getRenderMode()=="classic"&&!this.groupManager.table.options.pagination){this.element.classList.add("tabulator-group-visible");var prev=this.generateElement();if(this.groupList.length){this.groupList.forEach(function(group){var rows=group.getHeadersAndRows();rows.forEach(function(row){var rowEl=row.getElement();prev.parentNode.insertBefore(rowEl,prev.nextSibling);row.initialize();prev=rowEl})})}else{this.rows.forEach(function(row){var rowEl=row.getElement();prev.parentNode.insertBefore(rowEl,prev.nextSibling);row.initialize();prev=rowEl})}this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex());this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()}else{this.groupManager.updateGroupRows(true)}this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),true)}},{key:"_visSet",value:function _visSet(){var data=[];if(typeof this.visible=="function"){this.rows.forEach(function(row){data.push(row.getData())});this.visible=this.visible(this.key,this.getRowCount(),data,this.getComponent())}}},{key:"getRowGroup",value:function getRowGroup(row){var match=false;if(this.groupList.length){this.groupList.forEach(function(group){var result=group.getRowGroup(row);if(result){match=result}})}else{if(this.rows.find(function(item){return item===row})){match=this}}return match}},{key:"getSubGroups",value:function getSubGroups(component){var output=[];this.groupList.forEach(function(child){output.push(component?child.getComponent():child)});return output}},{key:"getRows",value:function getRows(compoment){var output=[];this.rows.forEach(function(row){output.push(compoment?row.getComponent():row)});return output}},{key:"generateGroupHeaderContents",value:function generateGroupHeaderContents(){var data=[];this.rows.forEach(function(row){data.push(row.getData())});this.elementContents=this.generator(this.key,this.getRowCount(),data,this.getComponent());while(this.element.firstChild){this.element.removeChild(this.element.firstChild)}if(typeof this.elementContents==="string"){this.element.innerHTML=this.elementContents}else{this.element.appendChild(this.elementContents)}this.element.insertBefore(this.arrowElement,this.element.firstChild)}},{key:"getPath",value:function getPath(){var path=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];path.unshift(this.key);if(this.parent){this.parent.getPath(path)}return path}},{key:"getElement",value:function getElement(){return this.elementContents?this.element:this.generateElement()}},{key:"generateElement",value:function generateElement(){this.addBindings=false;this._visSet();if(this.visible){this.element.classList.add("tabulator-group-visible")}else{this.element.classList.remove("tabulator-group-visible")}for(var i=0;i<this.element.childNodes.length;++i){this.element.childNodes[i].parentNode.removeChild(this.element.childNodes[i])}this.generateGroupHeaderContents();return this.element}},{key:"detachElement",value:function detachElement(){if(this.element&&this.element.parentNode){this.element.parentNode.removeChild(this.element)}}},{key:"normalizeHeight",value:function normalizeHeight(){this.setHeight(this.element.clientHeight)}},{key:"initialize",value:function initialize(force){if(!this.initialized||force){this.normalizeHeight();this.initialized=true}}},{key:"reinitialize",value:function reinitialize(){this.initialized=false;this.height=0;if(Helpers.elVisible(this.element)){this.initialize(true)}}},{key:"setHeight",value:function setHeight(height){if(this.height!=height){this.height=height;this.outerHeight=this.element.offsetHeight}}},{key:"getHeight",value:function getHeight(){return this.outerHeight}},{key:"getGroup",value:function getGroup(){return this}},{key:"reinitializeHeight",value:function reinitializeHeight(){}},{key:"calcHeight",value:function calcHeight(){}},{key:"setCellHeight",value:function setCellHeight(){}},{key:"clearCellHeight",value:function clearCellHeight(){}},{key:"deinitializeHeight",value:function deinitializeHeight(){}},{key:"getComponent",value:function getComponent(){if(!this.component){this.component=new GroupComponent(this)}return this.component}}]);return Group}();var GroupRows=function(_Module){_inherits(GroupRows,_Module);var _super=_createSuper(GroupRows);function GroupRows(table){var _this;_classCallCheck(this,GroupRows);_this=_super.call(this,table);_this.groupIDLookups=false;_this.startOpen=[function(){return false}];_this.headerGenerator=[function(){return""}];_this.groupList=[];_this.allowedValues=false;_this.groups={};_this.displayIndex=0;_this.displayHandler=_this.getRows.bind(_assertThisInitialized(_this));_this.registerTableOption("groupBy",false);_this.registerTableOption("groupStartOpen",true);_this.registerTableOption("groupValues",false);_this.registerTableOption("groupUpdateOnCellEdit",false);_this.registerTableOption("groupHeader",false);_this.registerTableOption("groupHeaderPrint",null);_this.registerTableOption("groupHeaderClipboard",null);_this.registerTableOption("groupHeaderHtmlOutput",null);_this.registerTableOption("groupHeaderDownload",null);_this.registerTableOption("groupToggleElement","arrow");_this.registerTableOption("groupClosedShowCalcs",false);_this.registerTableFunction("setGroupBy",_this.setGroupBy.bind(_assertThisInitialized(_this)));_this.registerTableFunction("setGroupValues",_this.setGroupValues.bind(_assertThisInitialized(_this)));_this.registerTableFunction("setGroupStartOpen",_this.setGroupStartOpen.bind(_assertThisInitialized(_this)));_this.registerTableFunction("setGroupHeader",_this.setGroupHeader.bind(_assertThisInitialized(_this)));_this.registerTableFunction("getGroups",_this.userGetGroups.bind(_assertThisInitialized(_this)));_this.registerTableFunction("getGroupedData",_this.userGetGroupedData.bind(_assertThisInitialized(_this)));_this.registerComponentFunction("row","getGroup",_this.rowGetGroup.bind(_assertThisInitialized(_this)));return _this}_createClass(GroupRows,[{key:"initialize",value:function initialize(){if(this.table.options.groupBy){this.configureGroupSetup();if(this.table.options.groupUpdateOnCellEdit){this.subscribe("cell-value-updated",this.cellUpdated.bind(this));this.subscribe("row-data-changed",this.reassignRowToGroup.bind(this),0)}this.subscribe("row-deleting",this.rowDeleting.bind(this));this.subscribe("row-deleted",this.rowsUpdated.bind(this));this.subscribe("scroll-horizontal",this.scrollHeaders.bind(this));this.subscribe("rows-wipe",this.wipe.bind(this));this.subscribe("rows-added",this.rowsUpdated.bind(this));this.subscribe("row-moving",this.rowMoving.bind(this));this.subscribe("row-adding-index",this.rowAddingIndex.bind(this));this.subscribe("rows-sample",this.rowSample.bind(this));this.subscribe("render-virtual-fill",this.virtualRenderFill.bind(this));this.registerDisplayHandler(this.displayHandler,20);this.initialized=true}}},{key:"configureGroupSetup",value:function configureGroupSetup(){var _this2=this;if(this.table.options.groupBy){var groupBy=this.table.options.groupBy,startOpen=this.table.options.groupStartOpen,groupHeader=this.table.options.groupHeader;this.allowedValues=this.table.options.groupValues;if(Array.isArray(groupBy)&&Array.isArray(groupHeader)&&groupBy.length>groupHeader.length){console.warn("Error creating group headers, groupHeader array is shorter than groupBy array")}this.headerGenerator=[function(){return""}];this.startOpen=[function(){return false}];this.langBind("groups|item",function(langValue,lang){_this2.headerGenerator[0]=function(value,count,data){return(typeof value==="undefined"?"":value)+"<span>("+count+" "+(count===1?langValue:lang.groups.items)+")</span>"}});this.groupIDLookups=[];if(Array.isArray(groupBy)||groupBy){if(this.table.modExists("columnCalcs")&&this.table.options.columnCalcs!="table"&&this.table.options.columnCalcs!="both"){this.table.modules.columnCalcs.removeCalcs()}}else{if(this.table.modExists("columnCalcs")&&this.table.options.columnCalcs!="group"){var cols=this.table.columnManager.getRealColumns();cols.forEach(function(col){if(col.definition.topCalc){_this2.table.modules.columnCalcs.initializeTopRow()}if(col.definition.bottomCalc){_this2.table.modules.columnCalcs.initializeBottomRow()}})}}if(!Array.isArray(groupBy)){groupBy=[groupBy]}groupBy.forEach(function(group,i){var lookupFunc,column;if(typeof group=="function"){lookupFunc=group}else{column=_this2.table.columnManager.getColumnByField(group);if(column){lookupFunc=function lookupFunc(data){return column.getFieldValue(data)}}else{lookupFunc=function lookupFunc(data){return data[group]}}}_this2.groupIDLookups.push({field:typeof group==="function"?false:group,func:lookupFunc,values:_this2.allowedValues?_this2.allowedValues[i]:false})});if(startOpen){if(!Array.isArray(startOpen)){startOpen=[startOpen]}startOpen.forEach(function(level){});this.startOpen=startOpen}if(groupHeader){this.headerGenerator=Array.isArray(groupHeader)?groupHeader:[groupHeader]}}}},{key:"rowSample",value:function rowSample(rows,prevValue){var group=this.getGroups(false)[0];prevValue.push(group.getRows(false)[0]);return prevValue}},{key:"virtualRenderFill",value:function virtualRenderFill(){var el=this.table.rowManager.tableElement;var rows=this.table.rowManager.getVisibleRows();rows=rows.filter(function(row){return row.type!=="group"});el.style.minWidth=!rows.length?this.table.columnManager.getWidth()+"px":""}},{key:"rowAddingIndex",value:function rowAddingIndex(row,index,top){this.assignRowToGroup(row);var groupRows=row.modules.group.rows;if(groupRows.length>1){if(!index||index&&groupRows.indexOf(index)==-1){if(top){if(groupRows[0]!==row){index=groupRows[0];this.table.rowManager.moveRowInArray(row.modules.group.rows,row,index,!top)}}else{if(groupRows[groupRows.length-1]!==row){index=groupRows[groupRows.length-1];this.table.rowManager.moveRowInArray(row.modules.group.rows,row,index,!top)}}}else{this.table.rowManager.moveRowInArray(row.modules.group.rows,row,index,!top)}}return index}},{key:"trackChanges",value:function trackChanges(){this.dispatch("group-changed")}},{key:"setGroupBy",value:function setGroupBy(groups){this.table.options.groupBy=groups;if(!this.initialized){this.initialize()}else{this.configureGroupSetup()}this.refreshData();this.trackChanges()}},{key:"setGroupValues",value:function setGroupValues(groupValues){this.table.options.groupValues=groupValues;this.configureGroupSetup();this.refreshData();this.trackChanges()}},{key:"setGroupStartOpen",value:function setGroupStartOpen(values){this.table.options.groupStartOpen=values;this.configureGroupSetup();if(this.table.options.groupBy){this.refreshData();this.trackChanges()}else{console.warn("Grouping Update - cant refresh view, no groups have been set")}}},{key:"setGroupHeader",value:function setGroupHeader(values){this.table.options.groupHeader=values;this.configureGroupSetup();if(this.table.options.groupBy){this.refreshData();this.trackChanges()}else{console.warn("Grouping Update - cant refresh view, no groups have been set")}}},{key:"userGetGroups",value:function userGetGroups(values){return this.getGroups(true)}},{key:"userGetGroupedData",value:function userGetGroupedData(){return this.table.options.groupBy?this.getGroupedData():this.getData()}},{key:"rowGetGroup",value:function rowGetGroup(row){return row.modules.group?row.modules.group.getComponent():false}},{key:"rowMoving",value:function rowMoving(from,to,after){if(!after&&to instanceof Group){to=this.table.rowManager.prevDisplayRow(from)||to}var toGroup=to instanceof Group?to:to.modules.group;var fromGroup=from instanceof Group?from:from.modules.group;if(toGroup===fromGroup){this.table.rowManager.moveRowInArray(toGroup.rows,from,to,after)}else{if(fromGroup){fromGroup.removeRow(from)}toGroup.insertRow(from,to,after)}}},{key:"rowDeleting",value:function rowDeleting(row){if(row.modules.group){row.modules.group.removeRow(row)}}},{key:"rowsUpdated",value:function rowsUpdated(row){this.updateGroupRows(true)}},{key:"cellUpdated",value:function cellUpdated(cell){this.reassignRowToGroup(cell.row)}},{key:"setDisplayIndex",value:function setDisplayIndex(index){this.displayIndex=index}},{key:"getDisplayIndex",value:function getDisplayIndex(){return this.displayIndex}},{key:"getRows",value:function getRows(rows){if(this.table.options.groupBy&&this.groupIDLookups.length){this.dispatchExternal("dataGrouping");this.generateGroups(rows);if(this.subscribedExternal("dataGrouped")){this.dispatchExternal("dataGrouped",this.getGroups(true))}return this.updateGroupRows()}else{return rows.slice(0)}}},{key:"getGroups",value:function getGroups(component){var groupComponents=[];this.groupList.forEach(function(group){groupComponents.push(component?group.getComponent():group)});return groupComponents}},{key:"getChildGroups",value:function getChildGroups(group){var _this3=this;var groupComponents=[];if(!group){group=this}group.groupList.forEach(function(child){if(child.groupList.length){groupComponents=groupComponents.concat(_this3.getChildGroups(child))}else{groupComponents.push(child)}});return groupComponents}},{key:"wipe",value:function wipe(){this.groupList.forEach(function(group){group.wipe()})}},{key:"pullGroupListData",value:function pullGroupListData(groupList){var _this4=this;var groupListData=[];groupList.forEach(function(group){var groupHeader={};groupHeader.level=0;groupHeader.rowCount=0;groupHeader.headerContent="";var childData=[];if(group.hasSubGroups){childData=_this4.pullGroupListData(group.groupList);groupHeader.level=group.level;groupHeader.rowCount=childData.length-group.groupList.length;groupHeader.headerContent=group.generator(group.key,groupHeader.rowCount,group.rows,group);groupListData.push(groupHeader);groupListData=groupListData.concat(childData)}else{groupHeader.level=group.level;groupHeader.headerContent=group.generator(group.key,group.rows.length,group.rows,group);groupHeader.rowCount=group.getRows().length;groupListData.push(groupHeader);group.getRows().forEach(function(row){groupListData.push(row.getData("data"))})}});return groupListData}},{key:"getGroupedData",value:function getGroupedData(){return this.pullGroupListData(this.groupList)}},{key:"getRowGroup",value:function getRowGroup(row){var match=false;this.groupList.forEach(function(group){var result=group.getRowGroup(row);if(result){match=result}});return match}},{key:"countGroups",value:function countGroups(){return this.groupList.length}},{key:"generateGroups",value:function generateGroups(rows){var _this5=this;var oldGroups=this.groups;this.groups={};this.groupList=[];if(this.allowedValues&&this.allowedValues[0]){this.allowedValues[0].forEach(function(value){_this5.createGroup(value,0,oldGroups)});rows.forEach(function(row){_this5.assignRowToExistingGroup(row,oldGroups)})}else{rows.forEach(function(row){_this5.assignRowToGroup(row,oldGroups)})}}},{key:"createGroup",value:function createGroup(groupID,level,oldGroups){var groupKey=level+"_"+groupID,group;oldGroups=oldGroups||[];group=new Group(this,false,level,groupID,this.groupIDLookups[0].field,this.headerGenerator[0],oldGroups[groupKey]);this.groups[groupKey]=group;this.groupList.push(group)}},{key:"assignRowToExistingGroup",value:function assignRowToExistingGroup(row,oldGroups){var groupID=this.groupIDLookups[0].func(row.getData()),groupKey="0_"+groupID;if(this.groups[groupKey]){this.groups[groupKey].addRow(row)}}},{key:"assignRowToGroup",value:function assignRowToGroup(row,oldGroups){var groupID=this.groupIDLookups[0].func(row.getData()),newGroupNeeded=!this.groups["0_"+groupID];if(newGroupNeeded){this.createGroup(groupID,0,oldGroups)}this.groups["0_"+groupID].addRow(row);return!newGroupNeeded}},{key:"reassignRowToGroup",value:function reassignRowToGroup(row){if(row.type==="row"){var oldRowGroup=row.modules.group,oldGroupPath=oldRowGroup.getPath(),newGroupPath=this.getExpectedPath(row),samePath=true;var samePath=oldGroupPath.length==newGroupPath.length&&oldGroupPath.every(function(element,index){return element===newGroupPath[index]});if(!samePath){oldRowGroup.removeRow(row);this.assignRowToGroup(row,this.groups);this.refreshData(true)}}}},{key:"getExpectedPath",value:function getExpectedPath(row){var groupPath=[],rowData=row.getData();this.groupIDLookups.forEach(function(groupId){groupPath.push(groupId.func(rowData))});return groupPath}},{key:"updateGroupRows",value:function updateGroupRows(force){var output=[];this.groupList.forEach(function(group){output=output.concat(group.getHeadersAndRows())});if(force){this.refreshData(true,this.displayHandler)}return output}},{key:"scrollHeaders",value:function scrollHeaders(left){if(this.table.options.renderHorizontal==="virtual"){left-=this.table.columnManager.renderer.vDomPadLeft}left=left+"px";this.groupList.forEach(function(group){group.scrollHeader(left)})}},{key:"removeGroup",value:function removeGroup(group){var groupKey=group.level+"_"+group.key,index;if(this.groups[groupKey]){delete this.groups[groupKey];index=this.groupList.indexOf(group);if(index>-1){this.groupList.splice(index,1)}}}}]);return GroupRows}(Module);GroupRows.moduleName="groupRows";var defaultUndoers={cellEdit:function cellEdit(action){action.component.setValueProcessData(action.data.oldValue);action.component.cellRendered()},rowAdd:function rowAdd(action){action.component.deleteActual()},rowDelete:function rowDelete(action){var newRow=this.table.rowManager.addRowActual(action.data.data,action.data.pos,action.data.index);if(this.table.options.groupBy&&this.table.modExists("groupRows")){this.table.modules.groupRows.updateGroupRows(true)}this._rebindRow(action.component,newRow)},rowMove:function rowMove(action){this.table.rowManager.moveRowActual(action.component,this.table.rowManager.rows[action.data.posFrom],!action.data.after);this.table.rowManager.redraw()}};var defaultRedoers={cellEdit:function cellEdit(action){action.component.setValueProcessData(action.data.newValue);action.component.cellRendered()},rowAdd:function rowAdd(action){var newRow=this.table.rowManager.addRowActual(action.data.data,action.data.pos,action.data.index);if(this.table.options.groupBy&&this.table.modExists("groupRows")){this.table.modules.groupRows.updateGroupRows(true)}this._rebindRow(action.component,newRow)},rowDelete:function rowDelete(action){action.component.deleteActual()},rowMove:function rowMove(action){this.table.rowManager.moveRowActual(action.component,this.table.rowManager.rows[action.data.posTo],action.data.after);this.table.rowManager.redraw()}};var History=function(_Module){_inherits(History,_Module);var _super=_createSuper(History);function History(table){var _this;_classCallCheck(this,History);_this=_super.call(this,table);_this.history=[];_this.index=-1;_this.registerTableOption("history",false);return _this}_createClass(History,[{key:"initialize",value:function initialize(){if(this.table.options.history){this.subscribe("cell-value-updated",this.cellUpdated.bind(this));this.subscribe("cell-delete",this.clearComponentHistory.bind(this));this.subscribe("row-delete",this.rowDeleted.bind(this));this.subscribe("rows-wipe",this.clear.bind(this));this.subscribe("row-added",this.rowAdded.bind(this));this.subscribe("row-move",this.rowMoved.bind(this))}this.registerTableFunction("undo",this.undo.bind(this));this.registerTableFunction("redo",this.redo.bind(this));this.registerTableFunction("getHistoryUndoSize",this.getHistoryUndoSize.bind(this));this.registerTableFunction("getHistoryRedoSize",this.getHistoryRedoSize.bind(this));this.registerTableFunction("clearHistory",this.clear.bind(this))}},{key:"rowMoved",value:function rowMoved(from,to,after){this.action("rowMove",from,{posFrom:this.table.rowManager.getRowPosition(from),posTo:this.table.rowManager.getRowPosition(to),to:to,after:after})}},{key:"rowAdded",value:function rowAdded(row,data,pos,index){this.action("rowAdd",row,{data:data,pos:pos,index:index})}},{key:"rowDeleted",value:function rowDeleted(row){var index,rows;if(this.table.options.groupBy){rows=row.getComponent().getGroup().rows;index=rows.indexOf(row);if(index){index=rows[index-1]}}else{index=row.table.rowManager.getRowIndex(row);if(index){index=row.table.rowManager.rows[index-1]}}this.action("rowDelete",row,{data:row.getData(),pos:!index,index:index})}},{key:"cellUpdated",value:function cellUpdated(cell){this.action("cellEdit",cell,{oldValue:cell.oldValue,newValue:cell.value})}},{key:"clear",value:function clear(){this.history=[];this.index=-1}},{key:"action",value:function action(type,component,data){this.history=this.history.slice(0,this.index+1);this.history.push({type:type,component:component,data:data});this.index++}},{key:"getHistoryUndoSize",value:function getHistoryUndoSize(){return this.index+1}},{key:"getHistoryRedoSize",value:function getHistoryRedoSize(){return this.history.length-(this.index+1)}},{key:"clearComponentHistory",value:function clearComponentHistory(component){var index=this.history.findIndex(function(item){return item.component===component});if(index>-1){this.history.splice(index,1);if(index<=this.index){this.index--}this.clearComponentHistory(component)}}},{key:"undo",value:function undo(){if(this.index>-1){var action=this.history[this.index];History.undoers[action.type].call(this,action);this.index--;this.dispatchExternal("historyUndo",action.type,action.component.getComponent(),action.data);return true}else{console.warn("History Undo Error - No more history to undo");return false}}},{key:"redo",value:function redo(){if(this.history.length-1>this.index){this.index++;var action=this.history[this.index];History.redoers[action.type].call(this,action);this.dispatchExternal("historyRedo",action.type,action.component.getComponent(),action.data);return true}else{console.warn("History Redo Error - No more history to redo");return false}}},{key:"_rebindRow",value:function _rebindRow(oldRow,newRow){this.history.forEach(function(action){if(action.component instanceof Row){if(action.component===oldRow){action.component=newRow}}else if(action.component instanceof Cell){if(action.component.row===oldRow){var field=action.component.column.getField();if(field){action.component=newRow.getCell(field)}}}})}}]);return History}(Module);History.moduleName="history";History.undoers=defaultUndoers;History.redoers=defaultRedoers;var HtmlTableImport=function(_Module){_inherits(HtmlTableImport,_Module);var _super=_createSuper(HtmlTableImport);function HtmlTableImport(table){var _this;_classCallCheck(this,HtmlTableImport);_this=_super.call(this,table);_this.fieldIndex=[];_this.hasIndex=false;return _this}_createClass(HtmlTableImport,[{key:"initialize",value:function initialize(){this.tableElementCheck()}},{key:"tableElementCheck",value:function tableElementCheck(){if(this.table.originalElement&&this.table.originalElement.tagName==="TABLE"){this.parseTable()}}},{key:"parseTable",value:function parseTable(){var element=this.table.originalElement,options=this.table.options,columns=options.columns,headers=element.getElementsByTagName("th"),rows=element.getElementsByTagName("tbody")[0],data=[];this.hasIndex=false;this.dispatchExternal("htmlImporting");rows=rows?rows.getElementsByTagName("tr"):[];this._extractOptions(element,options);if(headers.length){this._extractHeaders(headers,rows)}else{this._generateBlankHeaders(headers,rows)}for(var index=0;index<rows.length;index++){var row=rows[index],cells=row.getElementsByTagName("td"),item={};if(!this.hasIndex){item[options.index]=index}for(var i=0;i<cells.length;i++){var cell=cells[i];if(typeof this.fieldIndex[i]!=="undefined"){item[this.fieldIndex[i]]=cell.innerHTML}}data.push(item)}options.data=data;this.dispatchExternal("htmlImported")}},{key:"_extractOptions",value:function _extractOptions(element,options,defaultOptions){var attributes=element.attributes;var optionsArr=defaultOptions?Object.keys(defaultOptions):Object.keys(options);var optionsList={};optionsArr.forEach(function(item){optionsList[item.toLowerCase()]=item});for(var index in attributes){var attrib=attributes[index];var name;if(attrib&&_typeof(attrib)=="object"&&attrib.name&&attrib.name.indexOf("tabulator-")===0){name=attrib.name.replace("tabulator-","");if(typeof optionsList[name]!=="undefined"){options[optionsList[name]]=this._attribValue(attrib.value)}}}}},{key:"_attribValue",value:function _attribValue(value){if(value==="true"){return true}if(value==="false"){return false}return value}},{key:"_findCol",value:function _findCol(title){var match=this.table.options.columns.find(function(column){return column.title===title});return match||false}},{key:"_extractHeaders",value:function _extractHeaders(headers,rows){for(var index=0;index<headers.length;index++){var header=headers[index],exists=false,col=this._findCol(header.textContent),width;if(col){exists=true}else{col={title:header.textContent.trim()}}if(!col.field){col.field=header.textContent.trim().toLowerCase().replace(" ","_")}width=header.getAttribute("width");if(width&&!col.width){col.width=width}this._extractOptions(header,col,this.table.columnManager.optionsList.registeredDefaults);this.fieldIndex[index]=col.field;if(col.field==this.table.options.index){this.hasIndex=true}if(!exists){this.table.options.columns.push(col)}}}},{key:"_generateBlankHeaders",value:function _generateBlankHeaders(headers,rows){for(var index=0;index<headers.length;index++){var header=headers[index],col={title:"",field:"col"+index};this.fieldIndex[index]=col.field;var width=header.getAttribute("width");if(width){col.width=width}this.table.options.columns.push(col)}}}]);return HtmlTableImport}(Module);HtmlTableImport.moduleName="htmlTableImport";var Interaction=function(_Module){_inherits(Interaction,_Module);var _super=_createSuper(Interaction);function Interaction(table){var _this;_classCallCheck(this,Interaction);_this=_super.call(this,table);_this.eventMap={rowClick:"row-click",rowDblClick:"row-dblclick",rowContext:"row-contextmenu",rowMouseEnter:"row-mouseenter",rowMouseLeave:"row-mouseleave",rowMouseOver:"row-mouseover",rowMouseOut:"row-mouseout",rowMouseMove:"row-mousemove",rowTap:"row",rowDblTap:"row",rowTapHold:"row",cellClick:"cell-click",cellDblClick:"cell-dblclick",cellContext:"cell-contextmenu",cellMouseEnter:"cell-mouseenter",cellMouseLeave:"cell-mouseleave",cellMouseOver:"cell-mouseover",cellMouseOut:"cell-mouseout",cellMouseMove:"cell-mousemove",cellTap:"cell",cellDblTap:"cell",cellTapHold:"cell",headerClick:"column-click",headerDblClick:"column-dblclick",headerContext:"column-contextmenu",headerMouseEnter:"column-mouseenter",headerMouseLeave:"column-mouseleave",headerMouseOver:"column-mouseover",headerMouseOut:"column-mouseout",headerMouseMove:"column-mousemove",headerTap:"column",headerDblTap:"column",headerTapHold:"column",groupClick:"group-click",groupDblClick:"group-dblclick",groupContext:"group-contextmenu",groupMouseEnter:"group-mouseenter",groupMouseLeave:"group-mouseleave",groupMouseOver:"group-mouseover",groupMouseOut:"group-mouseout",groupMouseMove:"group-mousemove",groupTap:"group",groupDblTap:"group",groupTapHold:"group"};_this.subscribers={};_this.touchSubscribers={};_this.columnSubscribers={};_this.touchWatchers={row:{tap:null,tapDbl:null,tapHold:null},cell:{tap:null,tapDbl:null,tapHold:null},column:{tap:null,tapDbl:null,tapHold:null}};_this.registerColumnOption("headerClick");_this.registerColumnOption("headerDblClick");_this.registerColumnOption("headerContext");_this.registerColumnOption("headerMouseEnter");_this.registerColumnOption("headerMouseLeave");_this.registerColumnOption("headerMouseOver");_this.registerColumnOption("headerMouseOut");_this.registerColumnOption("headerMouseMove");_this.registerColumnOption("headerTap");_this.registerColumnOption("headerDblTap");_this.registerColumnOption("headerTapHold");_this.registerColumnOption("cellClick");_this.registerColumnOption("cellDblClick");_this.registerColumnOption("cellContext");_this.registerColumnOption("cellMouseEnter");_this.registerColumnOption("cellMouseLeave");_this.registerColumnOption("cellMouseOver");_this.registerColumnOption("cellMouseOut");_this.registerColumnOption("cellMouseMove");_this.registerColumnOption("cellTap");_this.registerColumnOption("cellDblTap");_this.registerColumnOption("cellTapHold");return _this}_createClass(Interaction,[{key:"initialize",value:function initialize(){this.initializeExternalEvents();this.subscribe("column-init",this.initializeColumn.bind(this));this.subscribe("cell-dblclick",this.cellContentsSelectionFixer.bind(this))}},{key:"cellContentsSelectionFixer",value:function cellContentsSelectionFixer(e,cell){if(this.table.modExists("edit")){if(this.table.modules.edit.currentCell===this){return}}e.preventDefault();try{if(document.selection){var range=document.body.createTextRange();range.moveToElementText(this.element);range.select()}else if(window.getSelection){var range=document.createRange();range.selectNode(this.element);window.getSelection().removeAllRanges();window.getSelection().addRange(range)}}catch(e){}}},{key:"initializeExternalEvents",value:function initializeExternalEvents(){for(var key in this.eventMap){this.subscriptionChangeExternal(key,this.subscriptionChanged.bind(this,key))}}},{key:"subscriptionChanged",value:function subscriptionChanged(key,added){if(added){if(!this.subscribers[key]){if(this.eventMap[key].includes("-")){this.subscribers[key]=this.handle.bind(this,key);this.subscribe(this.eventMap[key],this.subscribers[key])}else{this.subscribeTouchEvents(key)}}}else{if(this.eventMap[key].includes("-")){if(this.subscribers[key]&&!this.columnSubscribers[key]&&!this.subscribedExternal(key)){this.unsubscribe(this.eventMap[key],this.subscribers[key]);delete this.subscribers[key]}}else{this.unsubscribeTouchEvents(key)}}}},{key:"subscribeTouchEvents",value:function subscribeTouchEvents(key){var type=this.eventMap[key];if(!this.touchSubscribers[type+"-touchstart"]){this.touchSubscribers[type+"-touchstart"]=this.handleTouch.bind(this,type,"start");this.touchSubscribers[type+"-touchend"]=this.handleTouch.bind(this,type,"end");this.subscribe(type+"-touchstart",this.touchSubscribers[type+"-touchstart"]);this.subscribe(type+"-touchend",this.touchSubscribers[type+"-touchend"])}this.subscribers[key]=true}},{key:"unsubscribeTouchEvents",value:function unsubscribeTouchEvents(key){var notouch=true,type=this.eventMap[key];if(this.subscribers[key]&&!this.subscribedExternal(key)){delete this.subscribers[key];for(var i in this.eventMap){if(this.eventMap[i]===type){if(this.subscribers[i]){notouch=false}}}if(notouch){this.unsubscribe(type+"-touchstart",this.touchSubscribers[type+"-touchstart"]);this.unsubscribe(type+"-touchend",this.touchSubscribers[type+"-touchend"]);delete this.touchSubscribers[type+"-touchstart"];delete this.touchSubscribers[type+"-touchend"]}}}},{key:"initializeColumn",value:function initializeColumn(column){var def=column.definition;for(var key in this.eventMap){if(def[key]){this.subscriptionChanged(key,true);if(!this.columnSubscribers[key]){this.columnSubscribers[key]=[]}this.columnSubscribers[key].push(column)}}}},{key:"handle",value:function handle(action,e,component){this.dispatchEvent(action,e,component)}},{key:"handleTouch",value:function handleTouch(type,action,e,component){var _this2=this;var watchers=this.touchWatchers[type];if(type==="column"){type="header"}switch(action){case"start":watchers.tap=true;clearTimeout(watchers.tapHold);watchers.tapHold=setTimeout(function(){clearTimeout(watchers.tapHold);watchers.tapHold=null;watchers.tap=null;clearTimeout(watchers.tapDbl);watchers.tapDbl=null;_this2.dispatchEvent(type+"TapHold",e,component)},1e3);break;case"end":if(watchers.tap){watchers.tap=null;this.dispatchEvent(type+"Tap",e,component)}if(watchers.tapDbl){clearTimeout(watchers.tapDbl);watchers.tapDbl=null;this.dispatchEvent(type+"DblTap",e,component)}else{watchers.tapDbl=setTimeout(function(){clearTimeout(watchers.tapDbl);watchers.tapDbl=null},300)}clearTimeout(watchers.tapHold);watchers.tapHold=null;break}}},{key:"dispatchEvent",value:function dispatchEvent(action,e,component){var componentObj=component.getComponent(),callback;if(this.columnSubscribers[action]){if(component instanceof Cell){callback=component.column.definition[action]}else if(component instanceof Column$1){callback=component.definition[action]}if(callback){callback(e,componentObj)}}this.dispatchExternal(action,e,componentObj)}}]);return Interaction}(Module);Interaction.moduleName="interaction";var defaultBindings={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35,undo:"ctrl + 90",redo:"ctrl + 89",copyToClipboard:"ctrl + 67"};var defaultActions={keyBlock:function keyBlock(e){e.stopPropagation();e.preventDefault()},scrollPageUp:function scrollPageUp(e){var rowManager=this.table.rowManager,newPos=rowManager.scrollTop-rowManager.element.clientHeight,scrollMax=rowManager.element.scrollHeight;e.preventDefault();if(rowManager.displayRowsCount){if(newPos>=0){rowManager.element.scrollTop=newPos}else{rowManager.scrollToRow(rowManager.getDisplayRows()[0])}}this.table.element.focus()},scrollPageDown:function scrollPageDown(e){var rowManager=this.table.rowManager,newPos=rowManager.scrollTop+rowManager.element.clientHeight,scrollMax=rowManager.element.scrollHeight;e.preventDefault();if(rowManager.displayRowsCount){if(newPos<=scrollMax){rowManager.element.scrollTop=newPos}else{rowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount-1])}}this.table.element.focus()},scrollToStart:function scrollToStart(e){var rowManager=this.table.rowManager;e.preventDefault();if(rowManager.displayRowsCount){rowManager.scrollToRow(rowManager.getDisplayRows()[0])}this.table.element.focus()},scrollToEnd:function scrollToEnd(e){var rowManager=this.table.rowManager;e.preventDefault();if(rowManager.displayRowsCount){rowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount-1])}this.table.element.focus()},navPrev:function navPrev(e){this.dispatch("keybinding-nav-prev",e)},navNext:function navNext(e){this.dispatch("keybinding-nav-next",e)},navLeft:function navLeft(e){this.dispatch("keybinding-nav-left",e)},navRight:function navRight(e){this.dispatch("keybinding-nav-right",e)},navUp:function navUp(e){this.dispatch("keybinding-nav-up",e)},navDown:function navDown(e){this.dispatch("keybinding-nav-down",e)},undo:function undo(e){var cell=false;if(this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")){cell=this.table.modules.edit.currentCell;if(!cell){e.preventDefault();this.table.modules.history.undo()}}},redo:function redo(e){var cell=false;if(this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")){cell=this.table.modules.edit.currentCell;if(!cell){e.preventDefault();this.table.modules.history.redo()}}},copyToClipboard:function copyToClipboard(e){if(!this.table.modules.edit.currentCell){if(this.table.modExists("clipboard",true)){this.table.modules.clipboard.copy(false,true)}}}};var Keybindings=function(_Module){_inherits(Keybindings,_Module);var _super=_createSuper(Keybindings);function Keybindings(table){var _this;_classCallCheck(this,Keybindings);_this=_super.call(this,table);_this.watchKeys=null;_this.pressedKeys=null;_this.keyupBinding=false;_this.keydownBinding=false;_this.registerTableOption("keybindings",[]);_this.registerTableOption("tabEndNewRow",false);return _this}_createClass(Keybindings,[{key:"initialize",value:function initialize(){var bindings=this.table.options.keybindings,mergedBindings={};this.watchKeys={};this.pressedKeys=[];if(bindings!==false){for(var key in Keybindings.bindings){mergedBindings[key]=Keybindings.bindings[key]}if(Object.keys(bindings).length){for(var _key in bindings){mergedBindings[_key]=bindings[_key]}}this.mapBindings(mergedBindings);this.bindEvents()}this.subscribe("table-destroy",this.clearBindings.bind(this))}},{key:"mapBindings",value:function mapBindings(bindings){var _this2=this;var _loop=function _loop(key){if(Keybindings.actions[key]){if(bindings[key]){if(_typeof(bindings[key])!=="object"){bindings[key]=[bindings[key]]}bindings[key].forEach(function(binding){_this2.mapBinding(key,binding)})}}else{console.warn("Key Binding Error - no such action:",key)}};for(var key in bindings){_loop(key)}}},{key:"mapBinding",value:function mapBinding(action,symbolsList){var _this3=this;var binding={action:Keybindings.actions[action],keys:[],ctrl:false,shift:false,meta:false};var symbols=symbolsList.toString().toLowerCase().split(" ").join("").split("+");symbols.forEach(function(symbol){switch(symbol){case"ctrl":binding.ctrl=true;break;case"shift":binding.shift=true;break;case"meta":binding.meta=true;break;default:symbol=parseInt(symbol);binding.keys.push(symbol);if(!_this3.watchKeys[symbol]){_this3.watchKeys[symbol]=[]}_this3.watchKeys[symbol].push(binding)}})}},{key:"bindEvents",value:function bindEvents(){var self=this;this.keyupBinding=function(e){var code=e.keyCode;var bindings=self.watchKeys[code];if(bindings){self.pressedKeys.push(code);bindings.forEach(function(binding){self.checkBinding(e,binding)})}};this.keydownBinding=function(e){var code=e.keyCode;var bindings=self.watchKeys[code];if(bindings){var index=self.pressedKeys.indexOf(code);if(index>-1){self.pressedKeys.splice(index,1)}}};this.table.element.addEventListener("keydown",this.keyupBinding);this.table.element.addEventListener("keyup",this.keydownBinding)}},{key:"clearBindings",value:function clearBindings(){if(this.keyupBinding){this.table.element.removeEventListener("keydown",this.keyupBinding)}if(this.keydownBinding){this.table.element.removeEventListener("keyup",this.keydownBinding)}}},{key:"checkBinding",value:function checkBinding(e,binding){var _this4=this;var match=true;if(e.ctrlKey==binding.ctrl&&e.shiftKey==binding.shift&&e.metaKey==binding.meta){binding.keys.forEach(function(key){var index=_this4.pressedKeys.indexOf(key);if(index==-1){match=false}});if(match){binding.action.call(this,e)}return true}return false}}]);return Keybindings}(Module);Keybindings.moduleName="keybindings";Keybindings.bindings=defaultBindings;Keybindings.actions=defaultActions;var Menu=function(_Module){_inherits(Menu,_Module);var _super=_createSuper(Menu);function Menu(table){var _this;_classCallCheck(this,Menu);_this=_super.call(this,table);_this.menuElements=[];_this.blurEvent=_this.hideMenu.bind(_assertThisInitialized(_this));_this.escEvent=_this.escMenu.bind(_assertThisInitialized(_this));_this.nestedMenuBlock=false;_this.positionReversedX=false;_this.registerTableOption("rowContextMenu",false);_this.registerTableOption("rowClickMenu",false);_this.registerTableOption("groupContextMenu",false);_this.registerTableOption("groupClickMenu",false);_this.registerColumnOption("headerContextMenu");_this.registerColumnOption("headerMenu");_this.registerColumnOption("contextMenu");_this.registerColumnOption("clickMenu");return _this}_createClass(Menu,[{key:"initialize",value:function initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this));this.subscribe("column-init",this.initializeColumn.bind(this));this.subscribe("row-init",this.initializeRow.bind(this))}},{key:"layoutCell",value:function layoutCell(cell){if(cell.column.definition.contextMenu||cell.column.definition.clickMenu){this.initializeCell(cell)}}},{key:"initializeColumn",value:function initializeColumn(column){var def=column.definition;if(def.headerContextMenu||def.headerClickMenu||def.headerMenu){this.initializeColumnHeader(column)}}},{key:"initializeColumnHeader",value:function initializeColumnHeader(column){var _this2=this;var headerMenuEl;if(column.definition.headerContextMenu){column.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,column,column.definition.headerContextMenu));this.tapHold(column,column.definition.headerContextMenu)}if(column.definition.headerMenu){headerMenuEl=document.createElement("span");headerMenuEl.classList.add("tabulator-header-menu-button");headerMenuEl.innerHTML="&vellip;";headerMenuEl.addEventListener("click",function(e){e.stopPropagation();e.preventDefault();_this2.LoadMenuEvent(column,column.definition.headerMenu,e)});column.titleElement.insertBefore(headerMenuEl,column.titleElement.firstChild)}}},{key:"LoadMenuEvent",value:function LoadMenuEvent(component,menu,e){menu=typeof menu=="function"?menu.call(this.table,component.getComponent(),e):menu;this.loadMenu(e,component,menu)}},{key:"tapHold",value:function tapHold(component,menu){var _this3=this;var element=component.getElement(),tapHold=null,loaded=false;element.addEventListener("touchstart",function(e){clearTimeout(tapHold);loaded=false;tapHold=setTimeout(function(){clearTimeout(tapHold);tapHold=null;loaded=true;_this3.LoadMenuEvent(component,menu,e)},1e3)},{passive:true});element.addEventListener("touchend",function(e){clearTimeout(tapHold);tapHold=null;if(loaded){e.preventDefault()}})}},{key:"initializeCell",value:function initializeCell(cell){if(cell.column.definition.contextMenu){cell.getElement(true).addEventListener("contextmenu",this.LoadMenuEvent.bind(this,cell,cell.column.definition.contextMenu));this.tapHold(cell,cell.column.definition.contextMenu)}if(cell.column.definition.clickMenu){cell.getElement(true).addEventListener("click",this.LoadMenuEvent.bind(this,cell,cell.column.definition.clickMenu))}}},{key:"initializeRow",value:function initializeRow(row){if(this.table.options.rowContextMenu){row.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,row,this.table.options.rowContextMenu));this.tapHold(row,this.table.options.rowContextMenu)}if(this.table.options.rowClickMenu){row.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,row,this.table.options.rowClickMenu))}}},{key:"initializeGroup",value:function initializeGroup(group){if(this.table.options.groupContextMenu){group.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,group,this.table.options.groupContextMenu));this.tapHold(group,this.table.options.groupContextMenu)}if(this.table.options.groupClickMenu){group.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,group,this.table.options.groupClickMenu))}}},{key:"loadMenu",value:function loadMenu(e,component,menu,parentEl){var _this4=this;var touch=!(e instanceof MouseEvent);var menuEl=document.createElement("div");menuEl.classList.add("tabulator-menu");if(!touch){e.preventDefault()}if(!menu||!menu.length){return}if(!parentEl){if(this.nestedMenuBlock){if(this.isOpen()){return}}else{this.nestedMenuBlock=setTimeout(function(){_this4.nestedMenuBlock=false},100)}this.hideMenu();this.menuElements=[]}menu.forEach(function(item){var itemEl=document.createElement("div"),label=item.label,disabled=item.disabled;if(item.separator){itemEl.classList.add("tabulator-menu-separator")}else{itemEl.classList.add("tabulator-menu-item");if(typeof label=="function"){label=label.call(_this4.table,component.getComponent())}if(label instanceof Node){itemEl.appendChild(label)}else{itemEl.innerHTML=label}if(typeof disabled=="function"){disabled=disabled.call(_this4.table,component.getComponent())}if(disabled){itemEl.classList.add("tabulator-menu-item-disabled");itemEl.addEventListener("click",function(e){e.stopPropagation()})}else{if(item.menu&&item.menu.length){itemEl.addEventListener("click",function(e){e.stopPropagation();_this4.hideOldSubMenus(menuEl);_this4.loadMenu(e,component,item.menu,itemEl)})}else{if(item.action){itemEl.addEventListener("click",function(e){item.action(e,component.getComponent())})}}}if(item.menu&&item.menu.length){itemEl.classList.add("tabulator-menu-item-submenu")}}menuEl.appendChild(itemEl)});menuEl.addEventListener("click",function(e){_this4.hideMenu()});this.menuElements.push(menuEl);this.positionMenu(menuEl,parentEl,touch,e)}},{key:"hideOldSubMenus",value:function hideOldSubMenus(menuEl){var index=this.menuElements.indexOf(menuEl);if(index>-1){for(var i=this.menuElements.length-1;i>index;i--){var el=this.menuElements[i];if(el.parentNode){el.parentNode.removeChild(el)}this.menuElements.pop()}}}},{key:"positionMenu",value:function positionMenu(element,parentEl,touch,e){var _this5=this;var docHeight=Math.max(document.body.offsetHeight,window.innerHeight),x,y,parentOffset;if(!parentEl){x=touch?e.touches[0].pageX:e.pageX;y=touch?e.touches[0].pageY:e.pageY;this.positionReversedX=false}else{parentOffset=Helpers.elOffset(parentEl);x=parentOffset.left+parentEl.offsetWidth;y=parentOffset.top-1}element.style.top=y+"px";element.style.left=x+"px";setTimeout(function(){_this5.table.rowManager.element.addEventListener("scroll",_this5.blurEvent);document.body.addEventListener("click",_this5.blurEvent);document.body.addEventListener("contextmenu",_this5.blurEvent);window.addEventListener("resize",_this5.blurEvent);document.body.addEventListener("keydown",_this5.escEvent)},100);document.body.appendChild(element);if(y+element.offsetHeight>=docHeight){element.style.top="";if(parentEl){element.style.bottom=docHeight-parentOffset.top-parentEl.offsetHeight-1+"px"}else{element.style.bottom=docHeight-y+"px"}}if(x+element.offsetWidth>=document.body.offsetWidth||this.positionReversedX){element.style.left="";if(parentEl){element.style.right=document.documentElement.offsetWidth-parentOffset.left+"px"}else{element.style.right=document.documentElement.offsetWidth-x+"px"}this.positionReversedX=true}}},{key:"isOpen",value:function isOpen(){return!!this.menuElements.length}},{key:"escMenu",value:function escMenu(e){if(e.keyCode==27){this.hideMenu()}}},{key:"hideMenu",value:function hideMenu(){this.menuElements.forEach(function(menuEl){if(menuEl.parentNode){menuEl.parentNode.removeChild(menuEl)}});document.body.removeEventListener("keydown",this.escEvent);document.body.removeEventListener("click",this.blurEvent);document.body.removeEventListener("contextmenu",this.blurEvent);window.removeEventListener("resize",this.blurEvent);this.table.rowManager.element.removeEventListener("scroll",this.blurEvent)}}]);return Menu}(Module);Menu.moduleName="menu";var MoveColumns=function(_Module){_inherits(MoveColumns,_Module);var _super=_createSuper(MoveColumns);function MoveColumns(table){var _this;_classCallCheck(this,MoveColumns);_this=_super.call(this,table);_this.placeholderElement=_this.createPlaceholderElement();_this.hoverElement=false;_this.checkTimeout=false;_this.checkPeriod=250;_this.moving=false;_this.toCol=false;_this.toColAfter=false;_this.startX=0;_this.autoScrollMargin=40;_this.autoScrollStep=5;_this.autoScrollTimeout=false;_this.touchMove=false;_this.moveHover=_this.moveHover.bind(_assertThisInitialized(_this));_this.endMove=_this.endMove.bind(_assertThisInitialized(_this));_this.registerTableOption("movableColumns",false);return _this}_createClass(MoveColumns,[{key:"createPlaceholderElement",value:function createPlaceholderElement(){var el=document.createElement("div");el.classList.add("tabulator-col");el.classList.add("tabulator-col-placeholder");return el}},{key:"initialize",value:function initialize(){if(this.table.options.movableColumns){this.subscribe("column-init",this.initializeColumn.bind(this))}}},{key:"initializeColumn",value:function initializeColumn(column){var self=this,config={},colEl;if(!column.modules.frozen){colEl=column.getElement();config.mousemove=function(e){if(column.parent===self.moving.parent){if((self.touchMove?e.touches[0].pageX:e.pageX)-Helpers.elOffset(colEl).left+self.table.columnManager.element.scrollLeft>column.getWidth()/2){if(self.toCol!==column||!self.toColAfter){colEl.parentNode.insertBefore(self.placeholderElement,colEl.nextSibling);self.moveColumn(column,true)}}else{if(self.toCol!==column||self.toColAfter){colEl.parentNode.insertBefore(self.placeholderElement,colEl);self.moveColumn(column,false)}}}}.bind(self);colEl.addEventListener("mousedown",function(e){self.touchMove=false;if(e.which===1){self.checkTimeout=setTimeout(function(){self.startMove(e,column)},self.checkPeriod)}});colEl.addEventListener("mouseup",function(e){if(e.which===1){if(self.checkTimeout){clearTimeout(self.checkTimeout)}}});self.bindTouchEvents(column)}column.modules.moveColumn=config}},{key:"bindTouchEvents",value:function bindTouchEvents(column){var _this2=this;var colEl=column.getElement(),startXMove=false,nextCol,prevCol,nextColWidth,prevColWidth,nextColWidthLast,prevColWidthLast;colEl.addEventListener("touchstart",function(e){_this2.checkTimeout=setTimeout(function(){_this2.touchMove=true;nextCol=column.nextColumn();nextColWidth=nextCol?nextCol.getWidth()/2:0;prevCol=column.prevColumn();prevColWidth=prevCol?prevCol.getWidth()/2:0;nextColWidthLast=0;prevColWidthLast=0;startXMove=false;_this2.startMove(e,column)},_this2.checkPeriod)},{passive:true});colEl.addEventListener("touchmove",function(e){var diff,moveToCol;if(_this2.moving){_this2.moveHover(e);if(!startXMove){startXMove=e.touches[0].pageX}diff=e.touches[0].pageX-startXMove;if(diff>0){if(nextCol&&diff-nextColWidthLast>nextColWidth){moveToCol=nextCol;if(moveToCol!==column){startXMove=e.touches[0].pageX;moveToCol.getElement().parentNode.insertBefore(_this2.placeholderElement,moveToCol.getElement().nextSibling);_this2.moveColumn(moveToCol,true)}}}else{if(prevCol&&-diff-prevColWidthLast>prevColWidth){moveToCol=prevCol;if(moveToCol!==column){startXMove=e.touches[0].pageX;moveToCol.getElement().parentNode.insertBefore(_this2.placeholderElement,moveToCol.getElement());_this2.moveColumn(moveToCol,false)}}}if(moveToCol){nextCol=moveToCol.nextColumn();nextColWidthLast=nextColWidth;nextColWidth=nextCol?nextCol.getWidth()/2:0;prevCol=moveToCol.prevColumn();prevColWidthLast=prevColWidth;prevColWidth=prevCol?prevCol.getWidth()/2:0}}},{passive:true});colEl.addEventListener("touchend",function(e){if(_this2.checkTimeout){clearTimeout(_this2.checkTimeout)}if(_this2.moving){_this2.endMove(e)}})}},{key:"startMove",value:function startMove(e,column){var element=column.getElement(),headerElement=this.table.columnManager.getElement(),headersElement=this.table.columnManager.getHeadersElement();this.moving=column;this.startX=(this.touchMove?e.touches[0].pageX:e.pageX)-Helpers.elOffset(element).left;this.table.element.classList.add("tabulator-block-select");this.placeholderElement.style.width=column.getWidth()+"px";this.placeholderElement.style.height=column.getHeight()+"px";element.parentNode.insertBefore(this.placeholderElement,element);element.parentNode.removeChild(element);this.hoverElement=element.cloneNode(true);this.hoverElement.classList.add("tabulator-moving");this.table.columnManager.getElement().appendChild(this.hoverElement);this.hoverElement.style.left="0";this.hoverElement.style.bottom=headerElement.clientHeight-headersElement.offsetHeight+"px";if(!this.touchMove){this._bindMouseMove();document.body.addEventListener("mousemove",this.moveHover);document.body.addEventListener("mouseup",this.endMove)}this.moveHover(e)}},{key:"_bindMouseMove",value:function _bindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(column){if(column.modules.moveColumn.mousemove){column.getElement().addEventListener("mousemove",column.modules.moveColumn.mousemove)}})}},{key:"_unbindMouseMove",value:function _unbindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(column){if(column.modules.moveColumn.mousemove){column.getElement().removeEventListener("mousemove",column.modules.moveColumn.mousemove)}})}},{key:"moveColumn",value:function moveColumn(column,after){var movingCells=this.moving.getCells();this.toCol=column;this.toColAfter=after;if(after){column.getCells().forEach(function(cell,i){var cellEl=cell.getElement(true);if(cellEl.parentNode&&movingCells[i]){cellEl.parentNode.insertBefore(movingCells[i].getElement(),cellEl.nextSibling)}})}else{column.getCells().forEach(function(cell,i){var cellEl=cell.getElement(true);if(cellEl.parentNode&&movingCells[i]){cellEl.parentNode.insertBefore(movingCells[i].getElement(),cellEl)}})}}},{key:"endMove",value:function endMove(e){if(e.which===1||this.touchMove){this._unbindMouseMove();this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling);this.placeholderElement.parentNode.removeChild(this.placeholderElement);this.hoverElement.parentNode.removeChild(this.hoverElement);this.table.element.classList.remove("tabulator-block-select");if(this.toCol){this.table.columnManager.moveColumnActual(this.moving,this.toCol,this.toColAfter)}this.moving=false;this.toCol=false;this.toColAfter=false;if(!this.touchMove){document.body.removeEventListener("mousemove",this.moveHover);document.body.removeEventListener("mouseup",this.endMove)}}}},{key:"moveHover",value:function moveHover(e){var _this3=this;var columnHolder=this.table.columnManager.getElement(),scrollLeft=columnHolder.scrollLeft,xPos=(this.touchMove?e.touches[0].pageX:e.pageX)-Helpers.elOffset(columnHolder).left+scrollLeft,scrollPos;this.hoverElement.style.left=xPos-this.startX+"px";if(xPos-scrollLeft<this.autoScrollMargin){if(!this.autoScrollTimeout){this.autoScrollTimeout=setTimeout(function(){scrollPos=Math.max(0,scrollLeft-5);_this3.table.rowManager.getElement().scrollLeft=scrollPos;_this3.autoScrollTimeout=false},1)}}if(scrollLeft+columnHolder.clientWidth-xPos<this.autoScrollMargin){if(!this.autoScrollTimeout){this.autoScrollTimeout=setTimeout(function(){scrollPos=Math.min(columnHolder.clientWidth,scrollLeft+5);_this3.table.rowManager.getElement().scrollLeft=scrollPos;_this3.autoScrollTimeout=false},1)}}}}]);return MoveColumns}(Module);MoveColumns.moduleName="moveColumn";var MoveRows=function(_Module){_inherits(MoveRows,_Module);var _super=_createSuper(MoveRows);function MoveRows(table){var _this;_classCallCheck(this,MoveRows);_this=_super.call(this,table);_this.placeholderElement=_this.createPlaceholderElement();_this.hoverElement=false;_this.checkTimeout=false;_this.checkPeriod=150;_this.moving=false;_this.toRow=false;_this.toRowAfter=false;_this.hasHandle=false;_this.startY=0;_this.startX=0;_this.moveHover=_this.moveHover.bind(_assertThisInitialized(_this));_this.endMove=_this.endMove.bind(_assertThisInitialized(_this));_this.tableRowDropEvent=false;_this.touchMove=false;_this.connection=false;_this.connectionSelectorsTables=false;_this.connectionSelectorsElements=false;_this.connectionElements=[];_this.connections=[];_this.connectedTable=false;_this.connectedRow=false;_this.registerTableOption("movableRows",false);_this.registerTableOption("movableRowsConnectedTables",false);_this.registerTableOption("movableRowsConnectedElements",false);_this.registerTableOption("movableRowsSender",false);_this.registerTableOption("movableRowsReceiver","insert");_this.registerColumnOption("rowHandle");return _this}_createClass(MoveRows,[{key:"createPlaceholderElement",value:function createPlaceholderElement(){var el=document.createElement("div");el.classList.add("tabulator-row");el.classList.add("tabulator-row-placeholder");return el}},{key:"initialize",value:function initialize(){if(this.table.options.movableRows){this.connectionSelectorsTables=this.table.options.movableRowsConnectedTables;this.connectionSelectorsElements=this.table.options.movableRowsConnectedElements;this.connection=this.connectionSelectorsTables||this.connectionSelectorsElements;this.subscribe("cell-init",this.initializeCell.bind(this));this.subscribe("column-init",this.initializeColumn.bind(this));this.subscribe("row-init",this.initializeRow.bind(this))}}},{key:"initializeGroupHeader",value:function initializeGroupHeader(group){var self=this,config={};config.mouseup=function(e){self.tableRowDrop(e,row)}.bind(self);config.mousemove=function(e){if(e.pageY-Helpers.elOffset(group.element).top+self.table.rowManager.element.scrollTop>group.getHeight()/2){if(self.toRow!==group||!self.toRowAfter){var rowEl=group.getElement();rowEl.parentNode.insertBefore(self.placeholderElement,rowEl.nextSibling);self.moveRow(group,true)}}else{if(self.toRow!==group||self.toRowAfter){var rowEl=group.getElement();if(rowEl.previousSibling){rowEl.parentNode.insertBefore(self.placeholderElement,rowEl);self.moveRow(group,false)}}}}.bind(self);group.modules.moveRow=config}},{key:"initializeRow",value:function initializeRow(row){var self=this,config={},rowEl;config.mouseup=function(e){self.tableRowDrop(e,row)}.bind(self);config.mousemove=function(e){var rowEl=row.getElement();if(e.pageY-Helpers.elOffset(rowEl).top+self.table.rowManager.element.scrollTop>row.getHeight()/2){if(self.toRow!==row||!self.toRowAfter){rowEl.parentNode.insertBefore(self.placeholderElement,rowEl.nextSibling);self.moveRow(row,true)}}else{if(self.toRow!==row||self.toRowAfter){rowEl.parentNode.insertBefore(self.placeholderElement,rowEl);self.moveRow(row,false)}}}.bind(self);if(!this.hasHandle){rowEl=row.getElement();rowEl.addEventListener("mousedown",function(e){if(e.which===1){self.checkTimeout=setTimeout(function(){self.startMove(e,row)},self.checkPeriod)}});rowEl.addEventListener("mouseup",function(e){if(e.which===1){if(self.checkTimeout){clearTimeout(self.checkTimeout)}}});this.bindTouchEvents(row,row.getElement())}row.modules.moveRow=config}},{key:"initializeColumn",value:function initializeColumn(column){if(column.definition.rowHandle&&this.table.options.movableRows!==false){this.hasHandle=true}}},{key:"initializeCell",value:function initializeCell(cell){if(cell.column.definition.rowHandle&&this.table.options.movableRows!==false){var self=this,cellEl=cell.getElement(true);cellEl.addEventListener("mousedown",function(e){if(e.which===1){self.checkTimeout=setTimeout(function(){self.startMove(e,cell.row)},self.checkPeriod)}});cellEl.addEventListener("mouseup",function(e){if(e.which===1){if(self.checkTimeout){clearTimeout(self.checkTimeout)}}});this.bindTouchEvents(cell.row,cellEl)}}},{key:"bindTouchEvents",value:function bindTouchEvents(row,element){var _this2=this;var startYMove=false,nextRow,prevRow,nextRowHeight,prevRowHeight,nextRowHeightLast,prevRowHeightLast;element.addEventListener("touchstart",function(e){_this2.checkTimeout=setTimeout(function(){_this2.touchMove=true;nextRow=row.nextRow();nextRowHeight=nextRow?nextRow.getHeight()/2:0;prevRow=row.prevRow();prevRowHeight=prevRow?prevRow.getHeight()/2:0;nextRowHeightLast=0;prevRowHeightLast=0;startYMove=false;_this2.startMove(e,row)},_this2.checkPeriod)},{passive:true});this.moving,this.toRow,this.toRowAfter;element.addEventListener("touchmove",function(e){var diff,moveToRow;if(_this2.moving){e.preventDefault();_this2.moveHover(e);if(!startYMove){startYMove=e.touches[0].pageY}diff=e.touches[0].pageY-startYMove;if(diff>0){if(nextRow&&diff-nextRowHeightLast>nextRowHeight){moveToRow=nextRow;if(moveToRow!==row){startYMove=e.touches[0].pageY;moveToRow.getElement().parentNode.insertBefore(_this2.placeholderElement,moveToRow.getElement().nextSibling);_this2.moveRow(moveToRow,true)}}}else{if(prevRow&&-diff-prevRowHeightLast>prevRowHeight){moveToRow=prevRow;if(moveToRow!==row){startYMove=e.touches[0].pageY;moveToRow.getElement().parentNode.insertBefore(_this2.placeholderElement,moveToRow.getElement());_this2.moveRow(moveToRow,false)}}}if(moveToRow){nextRow=moveToRow.nextRow();nextRowHeightLast=nextRowHeight;nextRowHeight=nextRow?nextRow.getHeight()/2:0;prevRow=moveToRow.prevRow();prevRowHeightLast=prevRowHeight;prevRowHeight=prevRow?prevRow.getHeight()/2:0}}});element.addEventListener("touchend",function(e){if(_this2.checkTimeout){clearTimeout(_this2.checkTimeout)}if(_this2.moving){_this2.endMove(e);_this2.touchMove=false}})}},{key:"_bindMouseMove",value:function _bindMouseMove(){this.table.rowManager.getDisplayRows().forEach(function(row){if((row.type==="row"||row.type==="group")&&row.modules.moveRow&&row.modules.moveRow.mousemove){row.getElement().addEventListener("mousemove",row.modules.moveRow.mousemove)}})}},{key:"_unbindMouseMove",value:function _unbindMouseMove(){this.table.rowManager.getDisplayRows().forEach(function(row){if((row.type==="row"||row.type==="group")&&row.modules.moveRow&&row.modules.moveRow.mousemove){row.getElement().removeEventListener("mousemove",row.modules.moveRow.mousemove)}})}},{key:"startMove",value:function startMove(e,row){var element=row.getElement();this.setStartPosition(e,row);this.moving=row;this.table.element.classList.add("tabulator-block-select");this.placeholderElement.style.width=row.getWidth()+"px";this.placeholderElement.style.height=row.getHeight()+"px";if(!this.connection){element.parentNode.insertBefore(this.placeholderElement,element);element.parentNode.removeChild(element)}else{this.table.element.classList.add("tabulator-movingrow-sending");this.connectToTables(row)}this.hoverElement=element.cloneNode(true);this.hoverElement.classList.add("tabulator-moving");if(this.connection){document.body.appendChild(this.hoverElement);this.hoverElement.style.left="0";this.hoverElement.style.top="0";this.hoverElement.style.width=this.table.element.clientWidth+"px";this.hoverElement.style.whiteSpace="nowrap";this.hoverElement.style.overflow="hidden";this.hoverElement.style.pointerEvents="none"}else{this.table.rowManager.getTableElement().appendChild(this.hoverElement);this.hoverElement.style.left="0";this.hoverElement.style.top="0";this._bindMouseMove()}document.body.addEventListener("mousemove",this.moveHover);document.body.addEventListener("mouseup",this.endMove);this.moveHover(e)}},{key:"setStartPosition",value:function setStartPosition(e,row){var pageX=this.touchMove?e.touches[0].pageX:e.pageX,pageY=this.touchMove?e.touches[0].pageY:e.pageY,element,position;element=row.getElement();if(this.connection){position=element.getBoundingClientRect();this.startX=position.left-pageX+window.pageXOffset;this.startY=position.top-pageY+window.pageYOffset}else{this.startY=pageY-element.getBoundingClientRect().top}}},{key:"endMove",value:function endMove(e){if(!e||e.which===1||this.touchMove){this._unbindMouseMove();if(!this.connection){this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling);this.placeholderElement.parentNode.removeChild(this.placeholderElement)}this.hoverElement.parentNode.removeChild(this.hoverElement);this.table.element.classList.remove("tabulator-block-select");if(this.toRow){this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter)}this.moving=false;this.toRow=false;this.toRowAfter=false;document.body.removeEventListener("mousemove",this.moveHover);document.body.removeEventListener("mouseup",this.endMove);if(this.connection){this.table.element.classList.remove("tabulator-movingrow-sending");this.disconnectFromTables()}}}},{key:"moveRow",value:function moveRow(row,after){this.toRow=row;this.toRowAfter=after}},{key:"moveHover",value:function moveHover(e){if(this.connection){this.moveHoverConnections.call(this,e)}else{this.moveHoverTable.call(this,e)}}},{key:"moveHoverTable",value:function moveHoverTable(e){var rowHolder=this.table.rowManager.getElement(),scrollTop=rowHolder.scrollTop,yPos=(this.touchMove?e.touches[0].pageY:e.pageY)-rowHolder.getBoundingClientRect().top+scrollTop;this.hoverElement.style.top=yPos-this.startY+"px"}},{key:"moveHoverConnections",value:function moveHoverConnections(e){this.hoverElement.style.left=this.startX+(this.touchMove?e.touches[0].pageX:e.pageX)+"px";this.hoverElement.style.top=this.startY+(this.touchMove?e.touches[0].pageY:e.pageY)+"px"}},{key:"elementRowDrop",value:function elementRowDrop(e,element,row){this.dispatchExternal("movableRowsElementDrop",e,element,row?row.getComponent():false)}},{key:"connectToTables",value:function connectToTables(row){var _this3=this;var connectionTables;if(this.connectionSelectorsTables){connectionTables=this.commsConnections(this.connectionSelectorsTables);this.dispatchExternal("movableRowsSendingStart",connectionTables);this.commsSend(this.connectionSelectorsTables,"moveRow","connect",{row:row})}if(this.connectionSelectorsElements){this.connectionElements=[];if(!Array.isArray(this.connectionSelectorsElements)){this.connectionSelectorsElements=[this.connectionSelectorsElements]}this.connectionSelectorsElements.forEach(function(query){if(typeof query==="string"){_this3.connectionElements=_this3.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(query)))}else{_this3.connectionElements.push(query)}});this.connectionElements.forEach(function(element){var dropEvent=function dropEvent(e){_this3.elementRowDrop(e,element,_this3.moving)};element.addEventListener("mouseup",dropEvent);element.tabulatorElementDropEvent=dropEvent;element.classList.add("tabulator-movingrow-receiving")})}}},{key:"disconnectFromTables",value:function disconnectFromTables(){var connectionTables;if(this.connectionSelectorsTables){connectionTables=this.commsConnections(this.connectionSelectorsTables);this.dispatchExternal("movableRowsSendingStop",connectionTables);this.commsSend(this.connectionSelectorsTables,"moveRow","disconnect")}this.connectionElements.forEach(function(element){element.classList.remove("tabulator-movingrow-receiving");element.removeEventListener("mouseup",element.tabulatorElementDropEvent);delete element.tabulatorElementDropEvent})}},{key:"connect",value:function connect(table,row){if(!this.connectedTable){this.connectedTable=table;this.connectedRow=row;this.table.element.classList.add("tabulator-movingrow-receiving");this.table.rowManager.getDisplayRows().forEach(function(row){if(row.type==="row"&&row.modules.moveRow&&row.modules.moveRow.mouseup){row.getElement().addEventListener("mouseup",row.modules.moveRow.mouseup)}});this.tableRowDropEvent=this.tableRowDrop.bind(this);this.table.element.addEventListener("mouseup",this.tableRowDropEvent);this.dispatchExternal("movableRowsReceivingStart",row,table);return true}else{console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable);return false}}},{key:"disconnect",value:function disconnect(table){if(table===this.connectedTable){this.connectedTable=false;this.connectedRow=false;this.table.element.classList.remove("tabulator-movingrow-receiving");this.table.rowManager.getDisplayRows().forEach(function(row){if(row.type==="row"&&row.modules.moveRow&&row.modules.moveRow.mouseup){row.getElement().removeEventListener("mouseup",row.modules.moveRow.mouseup)}});this.table.element.removeEventListener("mouseup",this.tableRowDropEvent);this.dispatchExternal("movableRowsReceivingStop",table)}else{console.warn("Move Row Error - trying to disconnect from non connected table")}}},{key:"dropComplete",value:function dropComplete(table,row,success){var sender=false;if(success){switch(_typeof(this.table.options.movableRowsSender)){case"string":sender=this.senders[this.table.options.movableRowsSender];break;case"function":sender=this.table.options.movableRowsSender;break}if(sender){sender.call(this,this.moving.getComponent(),row?row.getComponent():undefined,table)}else{if(this.table.options.movableRowsSender){console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender)}}this.dispatchExternal("movableRowsSent",this.moving.getComponent(),row?row.getComponent():undefined,table)}else{this.dispatchExternal("movableRowsSentFailed",this.moving.getComponent(),row?row.getComponent():undefined,table)}this.endMove()}},{key:"tableRowDrop",value:function tableRowDrop(e,row){var receiver=false,success=false;e.stopImmediatePropagation();switch(_typeof(this.table.options.movableRowsReceiver)){case"string":receiver=this.receivers[this.table.options.movableRowsReceiver];break;case"function":receiver=this.table.options.movableRowsReceiver;break}if(receiver){success=receiver.call(this,this.connectedRow.getComponent(),row?row.getComponent():undefined,this.connectedTable)}else{console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver)}if(success){this.dispatchExternal("movableRowsReceived",this.connectedRow.getComponent(),row?row.getComponent():undefined,this.connectedTable)}else{this.dispatchExternal("movableRowsReceivedFailed",this.connectedRow.getComponent(),row?row.getComponent():undefined,this.connectedTable)}this.commsSend(this.connectedTable,"moveRow","dropcomplete",{row:row,success:success})}},{key:"commsReceived",value:function commsReceived(table,action,data){switch(action){case"connect":return this.connect(table,data.row);case"disconnect":return this.disconnect(table);case"dropcomplete":return this.dropComplete(table,data.row,data.success)}}}]);return MoveRows}(Module);MoveRows.prototype.receivers={insert:function insert(fromRow,toRow,fromTable){this.table.addRow(fromRow.getData(),undefined,toRow);return true},add:function add(fromRow,toRow,fromTable){this.table.addRow(fromRow.getData());return true},update:function update(fromRow,toRow,fromTable){if(toRow){toRow.update(fromRow.getData());return true}return false},replace:function replace(fromRow,toRow,fromTable){if(toRow){this.table.addRow(fromRow.getData(),undefined,toRow);toRow["delete"]();return true}return false}};MoveRows.prototype.senders={delete:function _delete(fromRow,toRow,toTable){fromRow["delete"]()}};MoveRows.moduleName="moveRow";var defaultMutators={};var Mutator=function(_Module){_inherits(Mutator,_Module);var _super=_createSuper(Mutator);function Mutator(table){var _this;_classCallCheck(this,Mutator);_this=_super.call(this,table);_this.allowedTypes=["","data","edit","clipboard"];_this.enabled=true;_this.registerColumnOption("mutator");_this.registerColumnOption("mutatorParams");_this.registerColumnOption("mutatorData");_this.registerColumnOption("mutatorDataParams");_this.registerColumnOption("mutatorEdit");_this.registerColumnOption("mutatorEditParams");_this.registerColumnOption("mutatorClipboard");_this.registerColumnOption("mutatorClipboardParams");return _this}_createClass(Mutator,[{key:"initialize",value:function initialize(){this.subscribe("cell-value-changing",this.transformCell.bind(this));this.subscribe("column-layout",this.initializeColumn.bind(this));this.subscribe("row-data-init-before",this.rowDataChanged.bind(this));this.subscribe("row-data-changing",this.rowDataChanged.bind(this))}},{key:"rowDataChanged",value:function rowDataChanged(row,tempData,updatedData){return this.transformRow(tempData,"data",updatedData)}},{key:"initializeColumn",value:function initializeColumn(column){var _this2=this;var match=false,config={};this.allowedTypes.forEach(function(type){var key="mutator"+(type.charAt(0).toUpperCase()+type.slice(1)),mutator;if(column.definition[key]){mutator=_this2.lookupMutator(column.definition[key]);if(mutator){match=true;config[key]={mutator:mutator,params:column.definition[key+"Params"]||{}}}}});if(match){column.modules.mutate=config}}},{key:"lookupMutator",value:function lookupMutator(value){var mutator=false;switch(_typeof(value)){case"string":if(Mutator.mutators[value]){mutator=Mutator.mutators[value]}else{console.warn("Mutator Error - No such mutator found, ignoring: ",value)}break;case"function":mutator=value;break}return mutator}},{key:"transformRow",value:function transformRow(data,type,updatedData){var key="mutator"+(type.charAt(0).toUpperCase()+type.slice(1)),value;if(this.enabled){this.table.columnManager.traverse(function(column){var mutator,params,component;if(column.modules.mutate){mutator=column.modules.mutate[key]||column.modules.mutate.mutator||false;if(mutator){value=column.getFieldValue(typeof updatedData!=="undefined"?updatedData:data);if(type=="data"||typeof value!=="undefined"){component=column.getComponent();params=typeof mutator.params==="function"?mutator.params(value,data,type,component):mutator.params;column.setFieldValue(data,mutator.mutator(value,data,type,params,component))}}}})}return data}},{key:"transformCell",value:function transformCell(cell,value){if(cell.column.modules.mutate){var mutator=cell.column.modules.mutate.mutatorEdit||cell.column.modules.mutate.mutator||false,tempData={};if(mutator){tempData=Object.assign(tempData,cell.row.getData());cell.column.setFieldValue(tempData,value);return mutator.mutator(value,tempData,"edit",mutator.params,cell.getComponent())}}return value}},{key:"enable",value:function enable(){this.enabled=true}},{key:"disable",value:function disable(){this.enabled=false}}]);return Mutator}(Module);Mutator.moduleName="mutator";Mutator.mutators=defaultMutators;var Page=function(_Module){_inherits(Page,_Module);var _super=_createSuper(Page);function Page(table){var _this;_classCallCheck(this,Page);_this=_super.call(this,table);_this.mode="local";_this.progressiveLoad=false;_this.size=0;_this.page=1;_this.count=5;_this.max=1;_this.displayIndex=0;_this.initialLoad=true;_this.dataChanging=false;_this.pageSizes=[];_this.registerTableOption("pagination",false);_this.registerTableOption("paginationMode","local");_this.registerTableOption("paginationSize",false);_this.registerTableOption("paginationInitialPage",1);_this.registerTableOption("paginationButtonCount",5);_this.registerTableOption("paginationSizeSelector",false);_this.registerTableOption("paginationElement",false);_this.registerTableOption("paginationAddRow","page");_this.registerTableOption("progressiveLoad",false);_this.registerTableOption("progressiveLoadDelay",0);_this.registerTableOption("progressiveLoadScrollMargin",0);_this.registerTableFunction("setMaxPage",_this.setMaxPage.bind(_assertThisInitialized(_this)));_this.registerTableFunction("setPage",_this.setPage.bind(_assertThisInitialized(_this)));_this.registerTableFunction("setPageToRow",_this.userSetPageToRow.bind(_assertThisInitialized(_this)));_this.registerTableFunction("setPageSize",_this.userSetPageSize.bind(_assertThisInitialized(_this)));_this.registerTableFunction("getPageSize",_this.getPageSize.bind(_assertThisInitialized(_this)));_this.registerTableFunction("previousPage",_this.previousPage.bind(_assertThisInitialized(_this)));_this.registerTableFunction("nextPage",_this.nextPage.bind(_assertThisInitialized(_this)));_this.registerTableFunction("getPage",_this.getPage.bind(_assertThisInitialized(_this)));_this.registerTableFunction("getPageMax",_this.getPageMax.bind(_assertThisInitialized(_this)));_this.registerComponentFunction("row","pageTo",_this.setPageToRow.bind(_assertThisInitialized(_this)));return _this}_createClass(Page,[{key:"initialize",value:function initialize(){if(this.table.options.pagination){this.subscribe("row-deleted",this.rowsUpdated.bind(this));this.subscribe("row-adding-position",this.rowAddingPosition.bind(this));this.subscribe("row-added",this.rowsUpdated.bind(this));this.subscribe("data-processed",this.initialLoadComplete.bind(this));this.subscribe("table-built",this.calculatePageSizes.bind(this));if(this.table.options.paginationMode==="remote"){this.subscribe("data-params",this.remotePageParams.bind(this));this.subscribe("data-loaded",this._parseRemoteData.bind(this))}if(this.table.options.progressiveLoad){console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time")}this.registerDisplayHandler(this.restOnRenderBefore.bind(this),40);this.registerDisplayHandler(this.getRows.bind(this),50);this.createElements();this.initializePaginator()}else if(this.table.options.progressiveLoad){this.subscribe("data-params",this.remotePageParams.bind(this));this.subscribe("data-loaded",this._parseRemoteData.bind(this));this.subscribe("table-built",this.calculatePageSizes.bind(this));this.subscribe("data-processed",this.initialLoadComplete.bind(this));this.initializeProgressive(this.table.options.progressiveLoad);if(this.table.options.progressiveLoad==="scroll"){this.subscribe("scroll-vertical",this.scrollVertical.bind(this))}}}},{key:"rowAddingPosition",value:function rowAddingPosition(row,top){var rowManager=this.table.rowManager,dispRows=rowManager.getDisplayRows(),index;if(top){if(dispRows.length){index=dispRows[0]}else{if(rowManager.activeRows.length){index=rowManager.activeRows[rowManager.activeRows.length-1];top=false}}}else{if(dispRows.length){index=dispRows[dispRows.length-1];top=dispRows.length<this.size?false:true}}return{index:index,top:top}}},{key:"calculatePageSizes",value:function calculatePageSizes(){var testElRow,testElCell;if(this.table.options.paginationSize){this.size=this.table.options.paginationSize}else{testElRow=document.createElement("div");testElRow.classList.add("tabulator-row");testElRow.style.visibility="hidden";testElCell=document.createElement("div");testElCell.classList.add("tabulator-cell");testElCell.innerHTML="Page Row Test";testElRow.appendChild(testElCell);this.table.rowManager.getTableElement().appendChild(testElRow);this.size=Math.floor(this.table.rowManager.getElement().clientHeight/testElRow.offsetHeight);this.table.rowManager.getTableElement().removeChild(testElRow)}this.generatePageSizeSelectList()}},{key:"initialLoadComplete",value:function initialLoadComplete(){this.initialLoad=false}},{key:"remotePageParams",value:function remotePageParams(data,config,silent,params){if(!this.initialLoad){if(this.progressiveLoad&&!silent||!this.progressiveLoad&&!this.dataChanging){this.reset(true)}}params.page=this.page;if(this.size){params.size=this.size}return params}},{key:"userSetPageToRow",value:function userSetPageToRow(row){if(this.table.options.pagination){row=this.rowManager.findRow(row);if(row){return this.setPageToRow(row)}}return Promise.reject()}},{key:"userSetPageSize",value:function userSetPageSize(size){if(this.table.options.pagination){this.setPageSize(size);return this.setPage(1)}else{return false}}},{key:"scrollVertical",value:function scrollVertical(top,dir){var element,diff,margin;if(!dir&&!this.table.dataLoader.loading){element=this.table.rowManager.getElement();diff=element.scrollHeight-element.clientHeight-top;margin=this.table.options.progressiveLoadScrollMargin||element.clientHeight*2;if(diff<margin){this.nextPage()["catch"](function(){})}}}},{key:"restOnRenderBefore",value:function restOnRenderBefore(rows,renderInPosition){if(!renderInPosition){if(this.mode==="local"){this.reset()}}return rows}},{key:"rowsUpdated",value:function rowsUpdated(){this.refreshData(true,"all")}},{key:"createElements",value:function createElements(){var button;this.element=document.createElement("span");this.element.classList.add("tabulator-paginator");this.pagesElement=document.createElement("span");this.pagesElement.classList.add("tabulator-pages");button=document.createElement("button");button.classList.add("tabulator-page");button.setAttribute("type","button");button.setAttribute("role","button");button.setAttribute("aria-label","");button.setAttribute("title","");this.firstBut=button.cloneNode(true);this.firstBut.setAttribute("data-page","first");this.prevBut=button.cloneNode(true);this.prevBut.setAttribute("data-page","prev");this.nextBut=button.cloneNode(true);this.nextBut.setAttribute("data-page","next");this.lastBut=button.cloneNode(true);this.lastBut.setAttribute("data-page","last");if(this.table.options.paginationSizeSelector){this.pageSizeSelect=document.createElement("select");this.pageSizeSelect.classList.add("tabulator-page-size")}}},{key:"generatePageSizeSelectList",value:function generatePageSizeSelectList(){var _this2=this;var pageSizes=[];if(this.pageSizeSelect){if(Array.isArray(this.table.options.paginationSizeSelector)){pageSizes=this.table.options.paginationSizeSelector;this.pageSizes=pageSizes;if(this.pageSizes.indexOf(this.size)==-1){pageSizes.unshift(this.size)}}else{if(this.pageSizes.indexOf(this.size)==-1){pageSizes=[];for(var i=1;i<5;i++){pageSizes.push(this.size*i)}this.pageSizes=pageSizes}else{pageSizes=this.pageSizes}}while(this.pageSizeSelect.firstChild){this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild)}pageSizes.forEach(function(item){var itemEl=document.createElement("option");itemEl.value=item;if(item===true){_this2.langBind("pagination|all",function(value){itemEl.innerHTML=value})}else{itemEl.innerHTML=item}_this2.pageSizeSelect.appendChild(itemEl)});this.pageSizeSelect.value=this.size}}},{key:"initializePaginator",value:function initializePaginator(hidden){var _this3=this;var pageSelectLabel;if(!hidden){this.langBind("pagination|first",function(value){_this3.firstBut.innerHTML=value});this.langBind("pagination|first_title",function(value){_this3.firstBut.setAttribute("aria-label",value);_this3.firstBut.setAttribute("title",value)});this.langBind("pagination|prev",function(value){_this3.prevBut.innerHTML=value});this.langBind("pagination|prev_title",function(value){_this3.prevBut.setAttribute("aria-label",value);_this3.prevBut.setAttribute("title",value)});this.langBind("pagination|next",function(value){_this3.nextBut.innerHTML=value});this.langBind("pagination|next_title",function(value){_this3.nextBut.setAttribute("aria-label",value);_this3.nextBut.setAttribute("title",value)});this.langBind("pagination|last",function(value){_this3.lastBut.innerHTML=value});this.langBind("pagination|last_title",function(value){_this3.lastBut.setAttribute("aria-label",value);_this3.lastBut.setAttribute("title",value)});this.firstBut.addEventListener("click",function(){_this3.setPage(1)});this.prevBut.addEventListener("click",function(){_this3.previousPage()});this.nextBut.addEventListener("click",function(){_this3.nextPage()});this.lastBut.addEventListener("click",function(){_this3.setPage(_this3.max)});if(this.table.options.paginationElement){this.element=this.table.options.paginationElement}if(this.pageSizeSelect){pageSelectLabel=document.createElement("label");this.langBind("pagination|page_size",function(value){_this3.pageSizeSelect.setAttribute("aria-label",value);_this3.pageSizeSelect.setAttribute("title",value);pageSelectLabel.innerHTML=value});this.element.appendChild(pageSelectLabel);this.element.appendChild(this.pageSizeSelect);this.pageSizeSelect.addEventListener("change",function(e){_this3.setPageSize(_this3.pageSizeSelect.value=="true"?true:_this3.pageSizeSelect.value);_this3.setPage(1)})}this.element.appendChild(this.firstBut);this.element.appendChild(this.prevBut);this.element.appendChild(this.pagesElement);this.element.appendChild(this.nextBut);this.element.appendChild(this.lastBut);if(!this.table.options.paginationElement&&!hidden){this.table.footerManager.append(this.element,this)}this.page=this.table.options.paginationInitialPage;this.count=this.table.options.paginationButtonCount}this.mode=this.table.options.paginationMode}},{key:"initializeProgressive",value:function initializeProgressive(mode){this.initializePaginator(true);this.mode="progressive_"+mode;this.progressiveLoad=true}},{key:"trackChanges",value:function trackChanges(){this.dispatch("page-changed")}},{key:"setDisplayIndex",value:function setDisplayIndex(index){this.displayIndex=index}},{key:"getDisplayIndex",value:function getDisplayIndex(){return this.displayIndex}},{key:"setMaxRows",value:function setMaxRows(rowCount){if(!rowCount){this.max=1}else{this.max=this.size===true?1:Math.ceil(rowCount/this.size)}if(this.page>this.max){this.page=this.max}}},{key:"reset",value:function reset(force){if(!this.initialLoad){if(this.mode=="local"||force){this.page=1}}}},{key:"setMaxPage",value:function setMaxPage(max){max=parseInt(max);this.max=max||1;if(this.page>this.max){this.page=this.max;this.trigger()}}},{key:"setPage",value:function setPage(page){switch(page){case"first":return this.setPage(1);case"prev":return this.previousPage();case"next":return this.nextPage();case"last":return this.setPage(this.max)}page=parseInt(page);if(page>0&&page<=this.max||this.mode!=="local"){this.page=page;this.trackChanges();return this.trigger()}else{console.warn("Pagination Error - Requested page is out of range of 1 - "+this.max+":",page);return Promise.reject()}}},{key:"setPageToRow",value:function setPageToRow(row){var rows=this.table.rowManager.getDisplayRows(this.displayIndex-1);var index=rows.indexOf(row);if(index>-1){var page=this.size===true?1:Math.ceil((index+1)/this.size);return this.setPage(page)}else{console.warn("Pagination Error - Requested row is not visible");return Promise.reject()}}},{key:"setPageSize",value:function setPageSize(size){if(size!==true){size=parseInt(size)}if(size>0){this.size=size}if(this.pageSizeSelect){this.generatePageSizeSelectList()}this.trackChanges()}},{key:"_setPageButtons",value:function _setPageButtons(){var leftSize=Math.floor((this.count-1)/2);var rightSize=Math.ceil((this.count-1)/2);var min=this.max-this.page+leftSize+1<this.count?this.max-this.count+1:Math.max(this.page-leftSize,1);var max=this.page<=rightSize?Math.min(this.count,this.max):Math.min(this.page+rightSize,this.max);while(this.pagesElement.firstChild){this.pagesElement.removeChild(this.pagesElement.firstChild)}if(this.page==1){this.firstBut.disabled=true;this.prevBut.disabled=true}else{this.firstBut.disabled=false;this.prevBut.disabled=false}if(this.page==this.max){this.lastBut.disabled=true;this.nextBut.disabled=true}else{this.lastBut.disabled=false;this.nextBut.disabled=false}for(var i=min;i<=max;i++){if(i>0&&i<=this.max){this.pagesElement.appendChild(this._generatePageButton(i))}}this.footerRedraw()}},{key:"_generatePageButton",value:function _generatePageButton(page){var _this4=this;var button=document.createElement("button");button.classList.add("tabulator-page");if(page==this.page){button.classList.add("active")}button.setAttribute("type","button");button.setAttribute("role","button");this.langBind("pagination|page_title",function(value){button.setAttribute("aria-label",value+" "+page);button.setAttribute("title",value+" "+page)});button.setAttribute("data-page",page);button.textContent=page;button.addEventListener("click",function(e){_this4.setPage(page)});return button}},{key:"previousPage",value:function previousPage(){if(this.page>1){this.page--;this.trackChanges();return this.trigger()}else{console.warn("Pagination Error - Previous page would be less than page 1:",0);return Promise.reject()}}},{key:"nextPage",value:function nextPage(){if(this.page<this.max){this.page++;this.trackChanges();return this.trigger()}else{if(!this.progressiveLoad){console.warn("Pagination Error - Next page would be greater than maximum page of "+this.max+":",this.max+1)}return Promise.reject()}}},{key:"getPage",value:function getPage(){return this.page}},{key:"getPageMax",value:function getPageMax(){return this.max}},{key:"getPageSize",value:function getPageSize(size){return this.size}},{key:"getMode",value:function getMode(){return this.mode}},{key:"getRows",value:function getRows(data){var output,start,end;if(this.mode=="local"){output=[];this.setMaxRows(data.length);if(this.size===true){start=0;end=data.length}else{start=this.size*(this.page-1);end=start+parseInt(this.size)}this._setPageButtons();for(var i=start;i<end;i++){if(data[i]){output.push(data[i])}}return output}else{this._setPageButtons();return data.slice(0)}}},{key:"trigger",value:function trigger(){var _this5=this;var left;switch(this.mode){case"local":left=this.table.rowManager.scrollLeft;this.refreshData();this.table.rowManager.scrollHorizontal(left);this.dispatchExternal("pageLoaded",this.getPage());return Promise.resolve();case"remote":this.dataChanging=true;return this.reloadData(null)["finally"](function(){_this5.dataChanging=false});case"progressive_load":case"progressive_scroll":return this.reloadData(null,true);default:console.warn("Pagination Error - no such pagination mode:",this.mode);return Promise.reject()}}},{key:"_parseRemoteData",value:function _parseRemoteData(data){var _this6=this;var data,margin;if(typeof data.last_page==="undefined"){console.warn("Remote Pagination Error - Server response missing '"+(this.options("dataReceiveParams").last_page||"last_page")+"' property")}if(data.data){this.max=parseInt(data.last_page)||1;if(this.progressiveLoad){switch(this.mode){case"progressive_load":if(this.page==1){this.table.rowManager.setData(data.data,false,this.page==1)}else{this.table.rowManager.addRows(data.data)}if(this.page<this.max){setTimeout(function(){_this6.nextPage()},this.table.options.progressiveLoadDelay)}break;case"progressive_scroll":data=this.page===1?data.data:this.table.rowManager.getData().concat(data.data);this.table.rowManager.setData(data,this.page!==1,this.page==1);margin=this.table.options.progressiveLoadScrollMargin||this.table.rowManager.element.clientHeight*2;if(this.table.rowManager.element.scrollHeight<=this.table.rowManager.element.clientHeight+margin){setTimeout(function(){_this6.nextPage()})}break}return false}else{this.dispatchExternal("pageLoaded",this.getPage())}}else{console.warn("Remote Pagination Error - Server response missing '"+(this.options("dataReceiveParams").data||"data")+"' property")}return data.data}},{key:"footerRedraw",value:function footerRedraw(){var footer=this.table.footerManager.element;if(Math.ceil(footer.clientWidth)-footer.scrollWidth<0){this.pagesElement.style.display="none"}else{this.pagesElement.style.display="";if(Math.ceil(footer.clientWidth)-footer.scrollWidth<0){this.pagesElement.style.display="none"}}}}]);return Page}(Module);Page.moduleName="page";var defaultReaders={local:function local(id,type){var data=localStorage.getItem(id+"-"+type);return data?JSON.parse(data):false},cookie:function cookie(id,type){var cookie=document.cookie,key=id+"-"+type,cookiePos=cookie.indexOf(key+"="),end,data;if(cookiePos>-1){cookie=cookie.substr(cookiePos);end=cookie.indexOf(";");if(end>-1){cookie=cookie.substr(0,end)}data=cookie.replace(key+"=","")}return data?JSON.parse(data):false}};var defaultWriters={local:function local(id,type,data){localStorage.setItem(id+"-"+type,JSON.stringify(data))},cookie:function cookie(id,type,data){var expireDate=new Date;expireDate.setDate(expireDate.getDate()+1e4);document.cookie=id+"-"+type+"="+JSON.stringify(data)+"; expires="+expireDate.toUTCString()}};var Persistence=function(_Module){_inherits(Persistence,_Module);var _super=_createSuper(Persistence);function Persistence(table){var _this;_classCallCheck(this,Persistence);_this=_super.call(this,table);_this.mode="";_this.id="";_this.defWatcherBlock=false;_this.config={};_this.readFunc=false;_this.writeFunc=false;_this.registerTableOption("persistence",false);_this.registerTableOption("persistenceID","");_this.registerTableOption("persistenceMode",true);_this.registerTableOption("persistenceReaderFunc",false);_this.registerTableOption("persistenceWriterFunc",false);return _this}_createClass(Persistence,[{key:"localStorageTest",value:function localStorageTest(){var testKey="_tabulator_test";try{window.localStorage.setItem(testKey,testKey);window.localStorage.removeItem(testKey);return true}catch(e){return false}}},{key:"initialize",value:function initialize(){if(this.table.options.persistence){var mode=this.table.options.persistenceMode,id=this.table.options.persistenceID,retreivedData;this.mode=mode!==true?mode:this.localStorageTest()?"local":"cookie";if(this.table.options.persistenceReaderFunc){if(typeof this.table.options.persistenceReaderFunc==="function"){this.readFunc=this.table.options.persistenceReaderFunc}else{if(Persistence.readers[this.table.options.persistenceReaderFunc]){this.readFunc=Persistence.readers[this.table.options.persistenceReaderFunc]}else{console.warn("Persistence Read Error - invalid reader set",this.table.options.persistenceReaderFunc)}}}else{if(Persistence.readers[this.mode]){this.readFunc=Persistence.readers[this.mode]}else{console.warn("Persistence Read Error - invalid reader set",this.mode)}}if(this.table.options.persistenceWriterFunc){if(typeof this.table.options.persistenceWriterFunc==="function"){this.writeFunc=this.table.options.persistenceWriterFunc}else{if(Persistence.writers[this.table.options.persistenceWriterFunc]){this.writeFunc=Persistence.writers[this.table.options.persistenceWriterFunc]}else{console.warn("Persistence Write Error - invalid reader set",this.table.options.persistenceWriterFunc)}}}else{if(Persistence.writers[this.mode]){this.writeFunc=Persistence.writers[this.mode]}else{console.warn("Persistence Write Error - invalid writer set",this.mode)}}this.id="tabulator-"+(id||this.table.element.getAttribute("id")||"");this.config={sort:this.table.options.persistence===true||this.table.options.persistence.sort,filter:this.table.options.persistence===true||this.table.options.persistence.filter,group:this.table.options.persistence===true||this.table.options.persistence.group,page:this.table.options.persistence===true||this.table.options.persistence.page,columns:this.table.options.persistence===true?["title","width","visible"]:this.table.options.persistence.columns};if(this.config.page){retreivedData=this.retreiveData("page");if(retreivedData){if(typeof retreivedData.paginationSize!=="undefined"&&(this.config.page===true||this.config.page.size)){this.table.options.paginationSize=retreivedData.paginationSize}if(typeof retreivedData.paginationInitialPage!=="undefined"&&(this.config.page===true||this.config.page.page)){this.table.options.paginationInitialPage=retreivedData.paginationInitialPage}}}if(this.config.group){retreivedData=this.retreiveData("group");if(retreivedData){if(typeof retreivedData.groupBy!=="undefined"&&(this.config.group===true||this.config.group.groupBy)){this.table.options.groupBy=retreivedData.groupBy}if(typeof retreivedData.groupStartOpen!=="undefined"&&(this.config.group===true||this.config.group.groupStartOpen)){this.table.options.groupStartOpen=retreivedData.groupStartOpen}if(typeof retreivedData.groupHeader!=="undefined"&&(this.config.group===true||this.config.group.groupHeader)){this.table.options.groupHeader=retreivedData.groupHeader}}}if(this.config.columns){this.table.options.columns=this.load("columns",this.table.options.columns);this.subscribe("column-init",this.initializeColumn.bind(this));this.subscribe("column-show",this.save.bind(this,"columns"));this.subscribe("column-hide",this.save.bind(this,"columns"));this.subscribe("column-moved",this.save.bind(this,"columns"));this.subscribe("table-built",this.tableBuilt.bind(this),0)}this.subscribe("table-redraw",this.tableRedraw.bind(this));this.subscribe("filter-changed",this.eventSave.bind(this,"filter"));this.subscribe("sort-changed",this.eventSave.bind(this,"sort"));this.subscribe("group-changed",this.eventSave.bind(this,"group"));this.subscribe("page-changed",this.eventSave.bind(this,"page"));this.subscribe("column-resized",this.eventSave.bind(this,"columns"));this.subscribe("layout-refreshed",this.eventSave.bind(this,"columns"))}this.registerTableFunction("getColumnLayout",this.getColumnLayout.bind(this));this.registerTableFunction("setColumnLayout",this.setColumnLayout.bind(this))}},{key:"eventSave",value:function eventSave(type){if(this.config[type]){this.save(type)}}},{key:"tableBuilt",value:function tableBuilt(){var options=this.table.options,sorters,filters;if(this.config.sort){sorters=this.load("sort");if(!sorters===false){this.table.initialSort=sorters}}if(this.config.filter){filters=this.load("filter");if(!filters===false){this.table.initialFilter=filters}}}},{key:"tableRedraw",value:function tableRedraw(force){if(force&&this.config.columns){this.save("columns")}}},{key:"getColumnLayout",value:function getColumnLayout(){return this.parseColumns(this.table.columnManager.getColumns())}},{key:"setColumnLayout",value:function setColumnLayout(layout){this.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns,layout));return true}},{key:"initializeColumn",value:function initializeColumn(column){var def,keys;if(this.config.columns){this.defWatcherBlock=true;def=column.getDefinition();keys=this.config.columns===true?Object.keys(def):this.config.columns;keys.forEach(function(key){var props=Object.getOwnPropertyDescriptor(def,key);var value=def[key];if(props){Object.defineProperty(def,key,{set:function set(newValue){value=newValue;if(!this.defWatcherBlock){this.save("columns")}if(props.set){props.set(newValue)}},get:function get(){if(props.get){props.get()}return value}})}});this.defWatcherBlock=false}}},{key:"load",value:function load(type,current){var data=this.retreiveData(type);if(current){data=data?this.mergeDefinition(current,data):current}return data}},{key:"retreiveData",value:function retreiveData(type){return this.readFunc?this.readFunc(this.id,type):false}},{key:"mergeDefinition",value:function mergeDefinition(oldCols,newCols){var _this2=this;var output=[];newCols=newCols||[];newCols.forEach(function(column,to){var from=_this2._findColumn(oldCols,column),keys;if(from){if(_this2.config.columns===true||_this2.config.columns==undefined){keys=Object.keys(from);keys.push("width")}else{keys=_this2.config.columns}keys.forEach(function(key){if(key!=="columns"&&typeof column[key]!=="undefined"){from[key]=column[key]}});if(from.columns){from.columns=_this2.mergeDefinition(from.columns,column.columns)}output.push(from)}});oldCols.forEach(function(column,i){var from=_this2._findColumn(newCols,column);if(!from){if(output.length>i){output.splice(i,0,column)}else{output.push(column)}}});return output}},{key:"_findColumn",value:function _findColumn(columns,subject){var type=subject.columns?"group":subject.field?"field":"object";return columns.find(function(col){switch(type){case"group":return col.title===subject.title&&col.columns.length===subject.columns.length;case"field":return col.field===subject.field;case"object":return col===subject}})}},{key:"save",value:function save(type){var data={};switch(type){case"columns":data=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":data=this.table.modules.filter.getFilters();break;case"sort":data=this.validateSorters(this.table.modules.sort.getSort());break;case"group":data=this.getGroupConfig();break;case"page":data=this.getPageConfig();break}if(this.writeFunc){this.writeFunc(this.id,type,data)}}},{key:"validateSorters",value:function validateSorters(data){data.forEach(function(item){item.column=item.field;delete item.field});return data}},{key:"getGroupConfig",value:function getGroupConfig(){var data={};if(this.config.group){if(this.config.group===true||this.config.group.groupBy){data.groupBy=this.table.options.groupBy}if(this.config.group===true||this.config.group.groupStartOpen){data.groupStartOpen=this.table.options.groupStartOpen}if(this.config.group===true||this.config.group.groupHeader){data.groupHeader=this.table.options.groupHeader}}return data}},{key:"getPageConfig",value:function getPageConfig(){var data={};if(this.config.page){if(this.config.page===true||this.config.page.size){data.paginationSize=this.table.modules.page.getPageSize()}if(this.config.page===true||this.config.page.page){data.paginationInitialPage=this.table.modules.page.getPage()}}return data}},{key:"parseColumns",value:function parseColumns(columns){var _this3=this;var definitions=[],excludedKeys=["headerContextMenu","headerMenu","contextMenu","clickMenu"];columns.forEach(function(column){var defStore={},colDef=column.getDefinition(),keys;if(column.isGroup){defStore.title=colDef.title;defStore.columns=_this3.parseColumns(column.getColumns())}else{defStore.field=column.getField();if(_this3.config.columns===true||_this3.config.columns==undefined){keys=Object.keys(colDef);keys.push("width")}else{keys=_this3.config.columns}keys.forEach(function(key){switch(key){case"width":defStore.width=column.getWidth();break;case"visible":defStore.visible=column.visible;break;default:if(typeof colDef[key]!=="function"&&excludedKeys.indexOf(key)===-1){defStore[key]=colDef[key]}}})}definitions.push(defStore)});return definitions}}]);return Persistence}(Module);Persistence.moduleName="persistence";Persistence.readers=defaultReaders;Persistence.writers=defaultWriters;var Print=function(_Module){_inherits(Print,_Module);var _super=_createSuper(Print);function Print(table){var _this;_classCallCheck(this,Print);_this=_super.call(this,table);_this.element=false;_this.manualBlock=false;_this.registerTableOption("printAsHtml",false);_this.registerTableOption("printFormatter",false);_this.registerTableOption("printHeader",false);_this.registerTableOption("printFooter",false);_this.registerTableOption("printStyled",true);_this.registerTableOption("printRowRange","visible");_this.registerTableOption("printConfig",{});_this.registerColumnOption("print");_this.registerColumnOption("titlePrint");return _this}_createClass(Print,[{key:"initialize",value:function initialize(){if(this.table.options.printAsHtml){window.addEventListener("beforeprint",this.replaceTable.bind(this));window.addEventListener("afterprint",this.cleanup.bind(this))}this.registerTableFunction("print",this.printFullscreen.bind(this))}},{key:"replaceTable",value:function replaceTable(){if(!this.manualBlock){this.element=document.createElement("div");this.element.classList.add("tabulator-print-table");this.element.appendChild(this.table.modules["export"].genereateTable(this.table.options.printConfig,this.table.options.printStyled,this.table.options.printRowRange,"print"));this.table.element.style.display="none";this.table.element.parentNode.insertBefore(this.element,this.table.element)}}},{key:"cleanup",value:function cleanup(){document.body.classList.remove("tabulator-print-fullscreen-hide");if(this.element&&this.element.parentNode){this.element.parentNode.removeChild(this.element);this.table.element.style.display=""}}},{key:"printFullscreen",value:function printFullscreen(visible,style,config){var scrollX=window.scrollX,scrollY=window.scrollY,headerEl=document.createElement("div"),footerEl=document.createElement("div"),tableEl=this.table.modules["export"].genereateTable(typeof config!="undefined"?config:this.table.options.printConfig,typeof style!="undefined"?style:this.table.options.printStyled,visible||this.table.options.printRowRange,"print"),headerContent,footerContent;this.manualBlock=true;this.element=document.createElement("div");this.element.classList.add("tabulator-print-fullscreen");if(this.table.options.printHeader){headerEl.classList.add("tabulator-print-header");headerContent=typeof this.table.options.printHeader=="function"?this.table.options.printHeader.call(this.table):this.table.options.printHeader;if(typeof headerContent=="string"){headerEl.innerHTML=headerContent}else{headerEl.appendChild(headerContent)}this.element.appendChild(headerEl)}this.element.appendChild(tableEl);if(this.table.options.printFooter){footerEl.classList.add("tabulator-print-footer");footerContent=typeof this.table.options.printFooter=="function"?this.table.options.printFooter.call(this.table):this.table.options.printFooter;if(typeof footerContent=="string"){footerEl.innerHTML=footerContent}else{footerEl.appendChild(footerContent)}this.element.appendChild(footerEl)}document.body.classList.add("tabulator-print-fullscreen-hide");document.body.appendChild(this.element);if(this.table.options.printFormatter){this.table.options.printFormatter(this.element,tableEl)}window.print();this.cleanup();window.scrollTo(scrollX,scrollY);this.manualBlock=false}}]);return Print}(Module);Print.moduleName="print";var ReactiveData=function(_Module){_inherits(ReactiveData,_Module);var _super=_createSuper(ReactiveData);function ReactiveData(table){var _this;_classCallCheck(this,ReactiveData);_this=_super.call(this,table);_this.data=false;_this.blocked=false;_this.origFuncs={};_this.currentVersion=0;_this.registerTableOption("reactiveData",false);return _this}_createClass(ReactiveData,[{key:"initialize",value:function initialize(){if(this.table.options.reactiveData){this.subscribe("cell-value-save-before",this.block.bind(this));this.subscribe("cell-value-save-after",this.unblock.bind(this));this.subscribe("row-data-save-before",this.block.bind(this));this.subscribe("row-data-save-after",this.unblock.bind(this));this.subscribe("row-data-init-after",this.watchRow.bind(this));this.subscribe("data-processing",this.watchData.bind(this));this.subscribe("table-destroy",this.unwatchData.bind(this))}}},{key:"watchData",value:function watchData(data){var self=this,version;this.currentVersion++;version=this.currentVersion;this.unwatchData();this.data=data;this.origFuncs.push=data.push;Object.defineProperty(this.data,"push",{enumerable:false,configurable:true,value:function value(){var args=Array.from(arguments);if(!self.blocked&&version===self.currentVersion){args.forEach(function(arg){self.table.rowManager.addRowActual(arg,false)})}return self.origFuncs.push.apply(data,arguments)}});this.origFuncs.unshift=data.unshift;Object.defineProperty(this.data,"unshift",{enumerable:false,configurable:true,value:function value(){var args=Array.from(arguments);if(!self.blocked&&version===self.currentVersion){args.forEach(function(arg){self.table.rowManager.addRowActual(arg,true)})}return self.origFuncs.unshift.apply(data,arguments)}});this.origFuncs.shift=data.shift;Object.defineProperty(this.data,"shift",{enumerable:false,configurable:true,value:function value(){var row;if(!self.blocked&&version===self.currentVersion){if(self.data.length){row=self.table.rowManager.getRowFromDataObject(self.data[0]);if(row){row.deleteActual()}}}return self.origFuncs.shift.call(data)}});this.origFuncs.pop=data.pop;Object.defineProperty(this.data,"pop",{enumerable:false,configurable:true,value:function value(){var row;if(!self.blocked&&version===self.currentVersion){if(self.data.length){row=self.table.rowManager.getRowFromDataObject(self.data[self.data.length-1]);if(row){row.deleteActual()}}}return self.origFuncs.pop.call(data)}});this.origFuncs.splice=data.splice;Object.defineProperty(this.data,"splice",{enumerable:false,configurable:true,value:function value(){var args=Array.from(arguments),start=args[0]<0?data.length+args[0]:args[0],end=args[1],newRows=args[2]?args.slice(2):false,startRow;if(!self.blocked&&version===self.currentVersion){if(newRows){startRow=data[start]?self.table.rowManager.getRowFromDataObject(data[start]):false;if(startRow){newRows.forEach(function(rowData){self.table.rowManager.addRowActual(rowData,true,startRow,true)})}else{newRows=newRows.slice().reverse();newRows.forEach(function(rowData){self.table.rowManager.addRowActual(rowData,true,false,true)})}}if(end!==0){var oldRows=data.slice(start,typeof args[1]==="undefined"?args[1]:start+end);oldRows.forEach(function(rowData,i){var row=self.table.rowManager.getRowFromDataObject(rowData);if(row){row.deleteActual(i!==oldRows.length-1)}})}if(newRows||end!==0){self.table.rowManager.reRenderInPosition()}}return self.origFuncs.splice.apply(data,arguments)}})}},{key:"unwatchData",value:function unwatchData(){if(this.data!==false){for(var key in this.origFuncs){Object.defineProperty(this.data,key,{enumerable:true,configurable:true,writable:true,value:this.origFuncs.key})}}}},{key:"watchRow",value:function watchRow(row){var data=row.getData();this.blocked=true;for(var key in data){this.watchKey(row,data,key)}if(this.table.options.dataTree){this.watchTreeChildren(row)}this.blocked=false}},{key:"watchTreeChildren",value:function watchTreeChildren(row){var _arguments=arguments;var childField=row.getData()[this.table.options.dataTreeChildField],origFuncs={};function rebuildTree(){this.table.modules.dataTree.initializeRow(row);this.table.modules.dataTree.layoutRow(row);this.table.rowManager.refreshActiveData("tree",false,true)}if(childField){origFuncs.push=childField.push;Object.defineProperty(childField,"push",{enumerable:false,configurable:true,value:function value(){var result=origFuncs.push.apply(childField,_arguments);rebuildTree();return result}});origFuncs.unshift=childField.unshift;Object.defineProperty(childField,"unshift",{enumerable:false,configurable:true,value:function value(){var result=origFuncs.unshift.apply(childField,_arguments);rebuildTree();return result}});origFuncs.shift=childField.shift;Object.defineProperty(childField,"shift",{enumerable:false,configurable:true,value:function value(){var result=origFuncs.shift.call(childField);rebuildTree();return result}});origFuncs.pop=childField.pop;Object.defineProperty(childField,"pop",{enumerable:false,configurable:true,value:function value(){var result=origFuncs.pop.call(childField);rebuildTree();return result}});origFuncs.splice=childField.splice;Object.defineProperty(childField,"splice",{enumerable:false,configurable:true,value:function value(){var result=origFuncs.splice.apply(childField,_arguments);rebuildTree();return result}})}}},{key:"watchKey",value:function watchKey(row,data,key){var _this2=this;var props=Object.getOwnPropertyDescriptor(data,key),value=data[key],version=this.currentVersion;Object.defineProperty(data,key,{set:function set(newValue){value=newValue;if(!_this2.blocked&&version===_this2.currentVersion){var update={};update[key]=newValue;row.updateData(update)}if(props.set){props.set(newValue)}},get:function get(){if(props.get){props.get()}return value}})}},{key:"unwatchRow",value:function unwatchRow(row){var data=row.getData();for(var key in data){Object.defineProperty(data,key,{value:data[key]})}}},{key:"block",value:function block(){this.blocked=true}},{key:"unblock",value:function unblock(){this.blocked=false}}]);return ReactiveData}(Module);ReactiveData.moduleName="reactiveData";var ResizeColumns=function(_Module){_inherits(ResizeColumns,_Module);var _super=_createSuper(ResizeColumns);function ResizeColumns(table){var _this;_classCallCheck(this,ResizeColumns);_this=_super.call(this,table);_this.startColumn=false;_this.startX=false;_this.startWidth=false;_this.handle=null;_this.prevHandle=null;_this.registerColumnOption("resizable",true);return _this}_createClass(ResizeColumns,[{key:"initialize",value:function initialize(){this.subscribe("cell-layout",this.layoutCellHandles.bind(this));this.subscribe("column-init",this.layoutColumnHeader.bind(this))}},{key:"layoutCellHandles",value:function layoutCellHandles(cell){if(cell.row.type==="row"){this.initializeColumn("cell",cell.column,cell.element)}}},{key:"layoutColumnHeader",value:function layoutColumnHeader(column){this.initializeColumn("header",column,column.element)}},{key:"initializeColumn",value:function initializeColumn(type,column,element){var self=this,variableHeight=false,mode=column.definition.resizable;if(type==="header"){variableHeight=column.definition.formatter=="textarea"||column.definition.variableHeight;column.modules.resize={variableHeight:variableHeight}}if(mode===true||mode==type){var handle=document.createElement("div");handle.className="tabulator-col-resize-handle";var prevHandle=document.createElement("div");prevHandle.className="tabulator-col-resize-handle prev";handle.addEventListener("click",function(e){e.stopPropagation()});var handleDown=function handleDown(e){var nearestColumn=column.getLastColumn();if(nearestColumn&&self._checkResizability(nearestColumn)){self.startColumn=column;self._mouseDown(e,nearestColumn,handle)}};handle.addEventListener("mousedown",handleDown);handle.addEventListener("touchstart",handleDown,{passive:true});handle.addEventListener("dblclick",function(e){var col=column.getLastColumn();if(col&&self._checkResizability(col)){e.stopPropagation();col.reinitializeWidth(true)}});prevHandle.addEventListener("click",function(e){e.stopPropagation()});var prevHandleDown=function prevHandleDown(e){var nearestColumn,colIndex,prevColumn;nearestColumn=column.getFirstColumn();if(nearestColumn){colIndex=self.table.columnManager.findColumnIndex(nearestColumn);prevColumn=colIndex>0?self.table.columnManager.getColumnByIndex(colIndex-1):false;if(prevColumn&&self._checkResizability(prevColumn)){self.startColumn=column;self._mouseDown(e,prevColumn,prevHandle)}}};prevHandle.addEventListener("mousedown",prevHandleDown);prevHandle.addEventListener("touchstart",prevHandleDown,{passive:true});prevHandle.addEventListener("dblclick",function(e){var nearestColumn,colIndex,prevColumn;nearestColumn=column.getFirstColumn();if(nearestColumn){colIndex=self.table.columnManager.findColumnIndex(nearestColumn);prevColumn=colIndex>0?self.table.columnManager.getColumnByIndex(colIndex-1):false;if(prevColumn&&self._checkResizability(prevColumn)){e.stopPropagation();prevColumn.reinitializeWidth(true)}}});element.appendChild(handle);element.appendChild(prevHandle)}}},{key:"_checkResizability",value:function _checkResizability(column){return column.definition.resizable}},{key:"_mouseDown",value:function _mouseDown(e,column,handle){var self=this;self.table.element.classList.add("tabulator-block-select");function mouseMove(e){if(self.table.rtl){column.setWidth(self.startWidth-((typeof e.screenX==="undefined"?e.touches[0].screenX:e.screenX)-self.startX))}else{column.setWidth(self.startWidth+((typeof e.screenX==="undefined"?e.touches[0].screenX:e.screenX)-self.startX))}self.table.columnManager.renderer.rerenderColumns(true);if(!self.table.browserSlow&&column.modules.resize&&column.modules.resize.variableHeight){column.checkCellHeights()}}function mouseUp(e){if(self.startColumn.modules.edit){self.startColumn.modules.edit.blocked=false}if(self.table.browserSlow&&column.modules.resize&&column.modules.resize.variableHeight){column.checkCellHeights()}document.body.removeEventListener("mouseup",mouseUp);document.body.removeEventListener("mousemove",mouseMove);handle.removeEventListener("touchmove",mouseMove);handle.removeEventListener("touchend",mouseUp);self.table.element.classList.remove("tabulator-block-select");self.dispatch("column-resized",column);self.table.externalEvents.dispatch("columnResized",column.getComponent())}e.stopPropagation();if(self.startColumn.modules.edit){self.startColumn.modules.edit.blocked=true}self.startX=typeof e.screenX==="undefined"?e.touches[0].screenX:e.screenX;self.startWidth=column.getWidth();document.body.addEventListener("mousemove",mouseMove);document.body.addEventListener("mouseup",mouseUp);handle.addEventListener("touchmove",mouseMove,{passive:true});handle.addEventListener("touchend",mouseUp)}}]);return ResizeColumns}(Module);ResizeColumns.moduleName="resizeColumns";var ResizeRows=function(_Module){_inherits(ResizeRows,_Module);var _super=_createSuper(ResizeRows);function ResizeRows(table){var _this;_classCallCheck(this,ResizeRows);_this=_super.call(this,table);_this.startColumn=false;_this.startY=false;_this.startHeight=false;_this.handle=null;_this.prevHandle=null;_this.registerTableOption("resizableRows",false);return _this}_createClass(ResizeRows,[{key:"initialize",value:function initialize(){if(this.table.options.resizableRows){this.subscribe("row-layout-after",this.initializeRow.bind(this))}}},{key:"initializeRow",value:function initializeRow(row){var self=this,rowEl=row.getElement();var handle=document.createElement("div");handle.className="tabulator-row-resize-handle";var prevHandle=document.createElement("div");prevHandle.className="tabulator-row-resize-handle prev";handle.addEventListener("click",function(e){e.stopPropagation()});var handleDown=function handleDown(e){self.startRow=row;self._mouseDown(e,row,handle)};handle.addEventListener("mousedown",handleDown);handle.addEventListener("touchstart",handleDown,{passive:true});prevHandle.addEventListener("click",function(e){e.stopPropagation()});var prevHandleDown=function prevHandleDown(e){var prevRow=self.table.rowManager.prevDisplayRow(row);if(prevRow){self.startRow=prevRow;self._mouseDown(e,prevRow,prevHandle)}};prevHandle.addEventListener("mousedown",prevHandleDown);prevHandle.addEventListener("touchstart",prevHandleDown,{passive:true});rowEl.appendChild(handle);rowEl.appendChild(prevHandle)}},{key:"_mouseDown",value:function _mouseDown(e,row,handle){var self=this;self.table.element.classList.add("tabulator-block-select");function mouseMove(e){row.setHeight(self.startHeight+((typeof e.screenY==="undefined"?e.touches[0].screenY:e.screenY)-self.startY))}function mouseUp(e){document.body.removeEventListener("mouseup",mouseMove);document.body.removeEventListener("mousemove",mouseMove);handle.removeEventListener("touchmove",mouseMove);handle.removeEventListener("touchend",mouseUp);self.table.element.classList.remove("tabulator-block-select");this.dispatchExternal("rowResized",row.getComponent())}e.stopPropagation();self.startY=typeof e.screenY==="undefined"?e.touches[0].screenY:e.screenY;self.startHeight=row.getHeight();document.body.addEventListener("mousemove",mouseMove);document.body.addEventListener("mouseup",mouseUp);handle.addEventListener("touchmove",mouseMove,{passive:true});handle.addEventListener("touchend",mouseUp)}}]);return ResizeRows}(Module);ResizeRows.moduleName="resizeRows";var ResizeTable=function(_Module){_inherits(ResizeTable,_Module);var _super=_createSuper(ResizeTable);function ResizeTable(table){var _this;_classCallCheck(this,ResizeTable);_this=_super.call(this,table);_this.binding=false;_this.observer=false;_this.containerObserver=false;_this.tableHeight=0;_this.tableWidth=0;_this.containerHeight=0;_this.containerWidth=0;_this.autoResize=false;_this.registerTableOption("autoResize",true);return _this}_createClass(ResizeTable,[{key:"initialize",value:function initialize(){var _this2=this;if(this.table.options.autoResize){var table=this.table,tableStyle;this.tableHeight=table.element.clientHeight;this.tableWidth=table.element.clientWidth;if(table.element.parentNode){this.containerHeight=table.element.parentNode.clientHeight;this.containerWidth=table.element.parentNode.clientWidth}if(typeof ResizeObserver!=="undefined"&&table.rowManager.getRenderMode()==="virtual"){this.autoResize=true;this.observer=new ResizeObserver(function(entry){if(!table.browserMobile||table.browserMobile&&!table.modules.edit.currentCell){var nodeHeight=Math.floor(entry[0].contentRect.height);var nodeWidth=Math.floor(entry[0].contentRect.width);if(_this2.tableHeight!=nodeHeight||_this2.tableWidth!=nodeWidth){_this2.tableHeight=nodeHeight;_this2.tableWidth=nodeWidth;if(table.element.parentNode){_this2.containerHeight=table.element.parentNode.clientHeight;_this2.containerWidth=table.element.parentNode.clientWidth}_this2.table.columnManager.renderer.rerenderColumns(true);table.redraw()}}});this.observer.observe(table.element);tableStyle=window.getComputedStyle(table.element);if(this.table.element.parentNode&&!this.table.rowManager.fixedHeight&&(tableStyle.getPropertyValue("max-height")||tableStyle.getPropertyValue("min-height"))){this.containerObserver=new ResizeObserver(function(entry){if(!table.browserMobile||table.browserMobile&&!table.modules.edit.currentCell){var nodeHeight=Math.floor(entry[0].contentRect.height);var nodeWidth=Math.floor(entry[0].contentRect.width);if(_this2.containerHeight!=nodeHeight||_this2.containerWidth!=nodeWidth){_this2.containerHeight=nodeHeight;_this2.containerWidth=nodeWidth;_this2.tableHeight=table.element.clientHeight;_this2.tableWidth=table.element.clientWidth}table.columnManager.renderer.rerenderColumns(true);table.redraw()}});this.containerObserver.observe(this.table.element.parentNode)}this.subscribe("table-resize",this.tableResized.bind(this))}else{this.binding=function(){if(!table.browserMobile||table.browserMobile&&!table.modules.edit.currentCell){table.columnManager.renderer.rerenderColumns(true);table.redraw()}};window.addEventListener("resize",this.binding)}this.subscribe("table-destroy",this.clearBindings.bind(this))}}},{key:"tableResized",value:function tableResized(){this.table.rowManager.redraw()}},{key:"clearBindings",value:function clearBindings(){if(this.binding){window.removeEventListener("resize",this.binding)}if(this.observer){this.observer.unobserve(this.table.element)}if(this.containerObserver){this.containerObserver.unobserve(this.table.element.parentNode)}}}]);return ResizeTable}(Module);ResizeTable.moduleName="resizeTable";var ResponsiveLayout=function(_Module){_inherits(ResponsiveLayout,_Module);var _super=_createSuper(ResponsiveLayout);function ResponsiveLayout(table){var _this;_classCallCheck(this,ResponsiveLayout);_this=_super.call(this,table);_this.columns=[];_this.hiddenColumns=[];_this.mode="";_this.index=0;_this.collapseFormatter=[];_this.collapseStartOpen=true;_this.collapseHandleColumn=false;_this.registerTableOption("responsiveLayout",false);_this.registerTableOption("responsiveLayoutCollapseStartOpen",true);_this.registerTableOption("responsiveLayoutCollapseUseFormatters",true);_this.registerTableOption("responsiveLayoutCollapseFormatter",false);_this.registerColumnOption("responsive");return _this}_createClass(ResponsiveLayout,[{key:"initialize",value:function initialize(){if(this.table.options.responsiveLayout){this.subscribe("column-layout",this.initializeColumn.bind(this));this.subscribe("column-show",this.updateColumnVisibility.bind(this));this.subscribe("column-hide",this.updateColumnVisibility.bind(this));this.subscribe("columns-loaded",this.initializeResponsivity.bind(this));this.subscribe("column-moved",this.initializeResponsivity.bind(this));this.subscribe("column-add",this.initializeResponsivity.bind(this));this.subscribe("column-delete",this.initializeResponsivity.bind(this));this.subscribe("table-redrawing",this.tableRedraw.bind(this));if(this.table.options.responsiveLayout==="collapse"){this.subscribe("row-init",this.initializeRow.bind(this));this.subscribe("row-layout",this.layoutRow.bind(this))}}}},{key:"tableRedraw",value:function tableRedraw(force){if(["fitColumns","fitDataStretch"].indexOf(this.layoutMode())===-1){if(!force){this.update()}}}},{key:"initializeResponsivity",value:function initializeResponsivity(){var columns=[];this.mode=this.table.options.responsiveLayout;this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData;this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen;this.hiddenColumns=[];this.table.columnManager.columnsByIndex.forEach(function(column,i){if(column.modules.responsive){if(column.modules.responsive.order&&column.modules.responsive.visible){column.modules.responsive.index=i;columns.push(column);if(!column.visible&&self.mode==="collapse"){self.hiddenColumns.push(column)}}}});columns=columns.reverse();columns=columns.sort(function(a,b){var diff=b.modules.responsive.order-a.modules.responsive.order;return diff||b.modules.responsive.index-a.modules.responsive.index});this.columns=columns;if(this.mode==="collapse"){this.generateCollapsedContent()}var _iterator=_createForOfIteratorHelper(this.table.columnManager.columnsByIndex),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var col=_step.value;if(col.definition.formatter=="responsiveCollapse"){this.collapseHandleColumn=col;break}}}catch(err){_iterator.e(err)}finally{_iterator.f()}if(this.collapseHandleColumn){if(this.hiddenColumns.length){this.collapseHandleColumn.show()}else{this.collapseHandleColumn.hide()}}}},{key:"initializeColumn",value:function initializeColumn(column){var def=column.getDefinition();column.modules.responsive={order:typeof def.responsive==="undefined"?1:def.responsive,visible:def.visible===false?false:true}}},{key:"initializeRow",value:function initializeRow(row){var el;if(row.type!=="calc"){el=document.createElement("div");el.classList.add("tabulator-responsive-collapse");row.modules.responsiveLayout={element:el,open:this.collapseStartOpen};if(!this.collapseStartOpen){el.style.display="none"}}}},{key:"layoutRow",value:function layoutRow(row){var rowEl=row.getElement();if(row.modules.responsiveLayout){rowEl.appendChild(row.modules.responsiveLayout.element);this.generateCollapsedRowContent(row)}}},{key:"updateColumnVisibility",value:function updateColumnVisibility(column,responsiveToggle){if(!responsiveToggle&&column.modules.responsive){column.modules.responsive.visible=column.visible;this.initializeResponsivity()}}},{key:"hideColumn",value:function hideColumn(column){var colCount=this.hiddenColumns.length;column.hide(false,true);if(this.mode==="collapse"){this.hiddenColumns.unshift(column);this.generateCollapsedContent();if(this.collapseHandleColumn&&!colCount){this.collapseHandleColumn.show()}}}},{key:"showColumn",value:function showColumn(column){var index;column.show(false,true);column.setWidth(column.getWidth());if(this.mode==="collapse"){index=this.hiddenColumns.indexOf(column);if(index>-1){this.hiddenColumns.splice(index,1)}this.generateCollapsedContent();if(this.collapseHandleColumn&&!this.hiddenColumns.length){this.collapseHandleColumn.hide()}}}},{key:"update",value:function update(){var self=this,working=true;while(working){var width=self.table.modules.layout.getMode()=="fitColumns"?self.table.columnManager.getFlexBaseWidth():self.table.columnManager.getWidth();var diff=(self.table.options.headerVisible?self.table.columnManager.element.clientWidth:self.table.element.clientWidth)-width;if(diff<0){var column=self.columns[self.index];if(column){self.hideColumn(column);self.index++}else{working=false}}else{var _column=self.columns[self.index-1];if(_column){if(diff>0){if(diff>=_column.getWidth()){self.showColumn(_column);self.index--}else{working=false}}else{working=false}}else{working=false}}if(!self.table.rowManager.activeRowsCount){self.table.rowManager.renderEmptyScroll()}}}},{key:"generateCollapsedContent",value:function generateCollapsedContent(){var self=this,rows=this.table.rowManager.getDisplayRows();rows.forEach(function(row){self.generateCollapsedRowContent(row)})}},{key:"generateCollapsedRowContent",value:function generateCollapsedRowContent(row){var el,contents;if(row.modules.responsiveLayout){el=row.modules.responsiveLayout.element;while(el.firstChild){el.removeChild(el.firstChild)}contents=this.collapseFormatter(this.generateCollapsedRowData(row));if(contents){el.appendChild(contents)}}}},{key:"generateCollapsedRowData",value:function generateCollapsedRowData(row){var self=this,data=row.getData(),output=[],mockCellComponent;this.hiddenColumns.forEach(function(column){var value=column.getFieldValue(data);if(column.definition.title&&column.field){if(column.modules.format&&self.table.options.responsiveLayoutCollapseUseFormatters){var onRendered=function onRendered(callback){callback()};mockCellComponent={value:false,data:{},getValue:function getValue(){return value},getData:function getData(){return data},getElement:function getElement(){return document.createElement("div")},getRow:function getRow(){return row.getComponent()},getColumn:function getColumn(){return column.getComponent()}};output.push({field:column.field,title:column.definition.title,value:column.modules.format.formatter.call(self.table.modules.format,mockCellComponent,column.modules.format.params,onRendered)})}else{output.push({field:column.field,title:column.definition.title,value:value})}}});return output}},{key:"formatCollapsedData",value:function formatCollapsedData(data){var list=document.createElement("table");data.forEach(function(item){var row=document.createElement("tr");var titleData=document.createElement("td");var valueData=document.createElement("td");var node_content;var titleHighlight=document.createElement("strong");titleData.appendChild(titleHighlight);this.langBind("columns|"+item.field,function(text){titleHighlight.innerText=text||item.title});if(item.value instanceof Node){node_content=document.createElement("div");node_content.appendChild(item.value);valueData.appendChild(node_content)}else{valueData.innerHTML=item.value}row.appendChild(titleData);row.appendChild(valueData);list.appendChild(row)},this);return Object.keys(data).length?list:""}}]);return ResponsiveLayout}(Module);ResponsiveLayout.moduleName="responsiveLayout";var SelectRow=function(_Module){_inherits(SelectRow,_Module);var _super=_createSuper(SelectRow);function SelectRow(table){var _this;_classCallCheck(this,SelectRow);_this=_super.call(this,table);_this.selecting=false;_this.lastClickedRow=false;_this.selectPrev=[];_this.selectedRows=[];_this.headerCheckboxElement=null;_this.registerTableOption("selectable","highlight");_this.registerTableOption("selectableRangeMode","drag");_this.registerTableOption("selectableRollingSelection",true);_this.registerTableOption("selectablePersistence",true);_this.registerTableOption("selectableCheck",function(data,row){return true});_this.registerTableFunction("selectRow",_this.selectRows.bind(_assertThisInitialized(_this)));_this.registerTableFunction("deselectRow",_this.deselectRows.bind(_assertThisInitialized(_this)));_this.registerTableFunction("toggleSelectRow",_this.toggleRow.bind(_assertThisInitialized(_this)));_this.registerTableFunction("getSelectedRows",_this.getSelectedRows.bind(_assertThisInitialized(_this)));_this.registerTableFunction("getSelectedData",_this.getSelectedData.bind(_assertThisInitialized(_this)));_this.registerComponentFunction("row","select",_this.selectRows.bind(_assertThisInitialized(_this)));_this.registerComponentFunction("row","deselect",_this.deselectRows.bind(_assertThisInitialized(_this)));_this.registerComponentFunction("row","toggleSelect",_this.toggleRow.bind(_assertThisInitialized(_this)));_this.registerComponentFunction("row","isSelected",_this.isRowSelected.bind(_assertThisInitialized(_this)));return _this}_createClass(SelectRow,[{key:"initialize",value:function initialize(){if(this.table.options.selectable!==false){this.subscribe("row-init",this.initializeRow.bind(this));this.subscribe("row-deleting",this.rowDeleted.bind(this));this.subscribe("rows-wipe",this.clearSelectionData.bind(this));this.subscribe("rows-retrieve",this.rowRetrieve.bind(this));if(this.table.options.selectable&&!this.table.options.selectablePersistence){this.subscribe("data-refeshing",this.deselectRows.bind(this))}}}},{key:"rowRetrieve",value:function rowRetrieve(type,prevValue){return type==="selected"?this.selectedRows:prevValue}},{key:"rowDeleted",value:function rowDeleted(row){this._deselectRow(row,true)}},{key:"clearSelectionData",value:function clearSelectionData(silent){this.selecting=false;this.lastClickedRow=false;this.selectPrev=[];this.selectedRows=[];if(silent!==true){this._rowSelectionChanged()}}},{key:"initializeRow",value:function initializeRow(row){var self=this,element=row.getElement();var endSelect=function endSelect(){setTimeout(function(){self.selecting=false},50);document.body.removeEventListener("mouseup",endSelect)};row.modules.select={selected:false};if(self.table.options.selectableCheck.call(this.table,row.getComponent())){element.classList.add("tabulator-selectable");element.classList.remove("tabulator-unselectable");if(self.table.options.selectable&&self.table.options.selectable!="highlight"){if(self.table.options.selectableRangeMode==="click"){element.addEventListener("click",function(e){if(e.shiftKey){self.table._clearSelection();self.lastClickedRow=self.lastClickedRow||row;var lastClickedRowIdx=self.table.rowManager.getDisplayRowIndex(self.lastClickedRow);var rowIdx=self.table.rowManager.getDisplayRowIndex(row);var fromRowIdx=lastClickedRowIdx<=rowIdx?lastClickedRowIdx:rowIdx;var toRowIdx=lastClickedRowIdx>=rowIdx?lastClickedRowIdx:rowIdx;var rows=self.table.rowManager.getDisplayRows().slice(0);var toggledRows=rows.splice(fromRowIdx,toRowIdx-fromRowIdx+1);if(e.ctrlKey||e.metaKey){toggledRows.forEach(function(toggledRow){if(toggledRow!==self.lastClickedRow){if(self.table.options.selectable!==true&&!self.isRowSelected(row)){if(self.selectedRows.length<self.table.options.selectable){self.toggleRow(toggledRow)}}else{self.toggleRow(toggledRow)}}});self.lastClickedRow=row}else{self.deselectRows(undefined,true);if(self.table.options.selectable!==true){if(toggledRows.length>self.table.options.selectable){toggledRows=toggledRows.slice(0,self.table.options.selectable)}}self.selectRows(toggledRows)}self.table._clearSelection()}else if(e.ctrlKey||e.metaKey){self.toggleRow(row);self.lastClickedRow=row}else{self.deselectRows(undefined,true);self.selectRows(row);self.lastClickedRow=row}})}else{element.addEventListener("click",function(e){if(!self.table.modExists("edit")||!self.table.modules.edit.getCurrentCell()){self.table._clearSelection()}if(!self.selecting){self.toggleRow(row)}});element.addEventListener("mousedown",function(e){if(e.shiftKey){self.table._clearSelection();self.selecting=true;self.selectPrev=[];document.body.addEventListener("mouseup",endSelect);document.body.addEventListener("keyup",endSelect);self.toggleRow(row);return false}});element.addEventListener("mouseenter",function(e){if(self.selecting){self.table._clearSelection();self.toggleRow(row);if(self.selectPrev[1]==row){self.toggleRow(self.selectPrev[0])}}});element.addEventListener("mouseout",function(e){if(self.selecting){self.table._clearSelection();self.selectPrev.unshift(row)}})}}}else{element.classList.add("tabulator-unselectable");element.classList.remove("tabulator-selectable")}}},{key:"toggleRow",value:function toggleRow(row){if(this.table.options.selectableCheck.call(this.table,row.getComponent())){if(row.modules.select&&row.modules.select.selected){this._deselectRow(row)}else{this._selectRow(row)}}}},{key:"selectRows",value:function selectRows(rows){var _this2=this;var rowMatch;switch(_typeof(rows)){case"undefined":this.table.rowManager.rows.forEach(function(row){_this2._selectRow(row,true,true)});this._rowSelectionChanged();break;case"string":rowMatch=this.table.rowManager.findRow(rows);if(rowMatch){this._selectRow(rowMatch,true,true)}else{this.table.rowManager.getRows(rows).forEach(function(row){_this2._selectRow(row,true,true)})}this._rowSelectionChanged();break;default:if(Array.isArray(rows)){rows.forEach(function(row){_this2._selectRow(row,true,true)});this._rowSelectionChanged()}else{this._selectRow(rows,false,true)}break}}},{key:"_selectRow",value:function _selectRow(rowInfo,silent,force){if(!isNaN(this.table.options.selectable)&&this.table.options.selectable!==true&&!force){if(this.selectedRows.length>=this.table.options.selectable){if(this.table.options.selectableRollingSelection){this._deselectRow(this.selectedRows[0])}else{return false}}}var row=this.table.rowManager.findRow(rowInfo);if(row){if(this.selectedRows.indexOf(row)==-1){row.getElement().classList.add("tabulator-selected");if(!row.modules.select){row.modules.select={}}row.modules.select.selected=true;if(row.modules.select.checkboxEl){row.modules.select.checkboxEl.checked=true}this.selectedRows.push(row);if(this.table.options.dataTreeSelectPropagate){this.childRowSelection(row,true)}this.dispatchExternal("rowSelected",row.getComponent());this._rowSelectionChanged(silent)}}else{if(!silent){console.warn("Selection Error - No such row found, ignoring selection:"+rowInfo)}}}},{key:"isRowSelected",value:function isRowSelected(row){return this.selectedRows.indexOf(row)!==-1}},{key:"deselectRows",value:function deselectRows(rows,silent){var self=this,rowCount;if(typeof rows=="undefined"){rowCount=self.selectedRows.length;for(var i=0;i<rowCount;i++){self._deselectRow(self.selectedRows[0],true)}self._rowSelectionChanged(silent)}else{if(Array.isArray(rows)){rows.forEach(function(row){self._deselectRow(row,true)});self._rowSelectionChanged(silent)}else{self._deselectRow(rows,silent)}}}},{key:"_deselectRow",value:function _deselectRow(rowInfo,silent){var self=this,row=self.table.rowManager.findRow(rowInfo),index;if(row){index=self.selectedRows.findIndex(function(selectedRow){return selectedRow==row});if(index>-1){row.getElement().classList.remove("tabulator-selected");if(!row.modules.select){row.modules.select={}}row.modules.select.selected=false;if(row.modules.select.checkboxEl){row.modules.select.checkboxEl.checked=false}self.selectedRows.splice(index,1);if(this.table.options.dataTreeSelectPropagate){this.childRowSelection(row,false)}this.dispatchExternal("rowDeselected",row.getComponent());self._rowSelectionChanged(silent)}}else{if(!silent){console.warn("Deselection Error - No such row found, ignoring selection:"+rowInfo)}}}},{key:"getSelectedData",value:function getSelectedData(){var data=[];this.selectedRows.forEach(function(row){data.push(row.getData())});return data}},{key:"getSelectedRows",value:function getSelectedRows(){var rows=[];this.selectedRows.forEach(function(row){rows.push(row.getComponent())});return rows}},{key:"_rowSelectionChanged",value:function _rowSelectionChanged(silent){if(this.headerCheckboxElement){if(this.selectedRows.length===0){this.headerCheckboxElement.checked=false;this.headerCheckboxElement.indeterminate=false}else if(this.table.rowManager.rows.length===this.selectedRows.length){this.headerCheckboxElement.checked=true;this.headerCheckboxElement.indeterminate=false}else{this.headerCheckboxElement.indeterminate=true;this.headerCheckboxElement.checked=false}}if(!silent){this.dispatchExternal("rowSelectionChanged",this.getSelectedData(),this.getSelectedRows())}}},{key:"registerRowSelectCheckbox",value:function registerRowSelectCheckbox(row,element){if(!row._row.modules.select){row._row.modules.select={}}row._row.modules.select.checkboxEl=element}},{key:"registerHeaderSelectCheckbox",value:function registerHeaderSelectCheckbox(element){this.headerCheckboxElement=element}},{key:"childRowSelection",value:function childRowSelection(row,select){var children=this.table.modules.dataTree.getChildren(row,true);if(select){var _iterator=_createForOfIteratorHelper(children),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var child=_step.value;this._selectRow(child,true)}}catch(err){_iterator.e(err)}finally{_iterator.f()}}else{var _iterator2=_createForOfIteratorHelper(children),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _child=_step2.value;this._deselectRow(_child,true)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}}}]);return SelectRow}(Module);SelectRow.moduleName="selectRow";function number$1(a,b,aRow,bRow,column,dir,params){var alignEmptyValues=params.alignEmptyValues;var decimal=params.decimalSeparator;var thousand=params.thousandSeparator;var emptyAlign=0;a=String(a);b=String(b);if(thousand){a=a.split(thousand).join("");b=b.split(thousand).join("")}if(decimal){a=a.split(decimal).join(".");b=b.split(decimal).join(".")}a=parseFloat(a);b=parseFloat(b);if(isNaN(a)){emptyAlign=isNaN(b)?0:-1}else if(isNaN(b)){emptyAlign=1}else{return a-b}if(alignEmptyValues==="top"&&dir==="desc"||alignEmptyValues==="bottom"&&dir==="asc"){emptyAlign*=-1}return emptyAlign}function string(a,b,aRow,bRow,column,dir,params){var alignEmptyValues=params.alignEmptyValues;var emptyAlign=0;var locale;if(!a){emptyAlign=!b?0:-1}else if(!b){emptyAlign=1}else{switch(_typeof(params.locale)){case"boolean":if(params.locale){locale=this.langLocale()}break;case"string":locale=params.locale;break}return String(a).toLowerCase().localeCompare(String(b).toLowerCase(),locale)}if(alignEmptyValues==="top"&&dir==="desc"||alignEmptyValues==="bottom"&&dir==="asc"){emptyAlign*=-1}return emptyAlign}function datetime$1(a,b,aRow,bRow,column,dir,params){var DT=window.DateTime||luxon.DateTime;var format=params.format||"dd/MM/yyyy HH:mm:ss",alignEmptyValues=params.alignEmptyValues,emptyAlign=0;if(typeof DT!="undefined"){a=DT.fromFormat(String(a),format);b=DT.fromFormat(String(b),format);if(!a.isValid){emptyAlign=!b.isValid?0:-1}else if(!b.isValid){emptyAlign=1}else{return a-b}if(alignEmptyValues==="top"&&dir==="desc"||alignEmptyValues==="bottom"&&dir==="asc"){emptyAlign*=-1}return emptyAlign}else{console.error("Sort Error - 'datetime' sorter is dependant on luxon.js")}}function date(a,b,aRow,bRow,column,dir,params){if(!params.format){params.format="dd/MM/yyyy"}return datetime$1.call(this,a,b,aRow,bRow,column,dir,params)}function time(a,b,aRow,bRow,column,dir,params){if(!params.format){params.format="HH:mm"}return datetime$1.call(this,a,b,aRow,bRow,column,dir,params)}function _boolean(a,b,aRow,bRow,column,dir,params){var el1=a===true||a==="true"||a==="True"||a===1?1:0;var el2=b===true||b==="true"||b==="True"||b===1?1:0;return el1-el2}function array(a,b,aRow,bRow,column,dir,params){var el1=0;var el2=0;var type=params.type||"length";var alignEmptyValues=params.alignEmptyValues;var emptyAlign=0;function calc(value){switch(type){case"length":return value.length;case"sum":return value.reduce(function(c,d){return c+d});case"max":return Math.max.apply(null,value);case"min":return Math.min.apply(null,value);case"avg":return value.reduce(function(c,d){return c+d})/value.length}}if(!Array.isArray(a)){alignEmptyValues=!Array.isArray(b)?0:-1}else if(!Array.isArray(b)){alignEmptyValues=1}else{el1=a?calc(a):0;el2=b?calc(b):0;return el1-el2}if(alignEmptyValues==="top"&&dir==="desc"||alignEmptyValues==="bottom"&&dir==="asc"){emptyAlign*=-1}return emptyAlign}function exists(a,b,aRow,bRow,column,dir,params){var el1=typeof a=="undefined"?0:1;var el2=typeof b=="undefined"?0:1;return el1-el2}function alphanum(as,bs,aRow,bRow,column,dir,params){var a,b,a1,b1,i=0,L,rx=/(\d+)|(\D+)/g,rd=/\d/;var alignEmptyValues=params.alignEmptyValues;var emptyAlign=0;if(!as&&as!==0){emptyAlign=!bs&&bs!==0?0:-1}else if(!bs&&bs!==0){emptyAlign=1}else{if(isFinite(as)&&isFinite(bs))return as-bs;a=String(as).toLowerCase();b=String(bs).toLowerCase();if(a===b)return 0;if(!(rd.test(a)&&rd.test(b)))return a>b?1:-1;a=a.match(rx);b=b.match(rx);L=a.length>b.length?b.length:a.length;while(i<L){a1=a[i];b1=b[i++];if(a1!==b1){if(isFinite(a1)&&isFinite(b1)){if(a1.charAt(0)==="0")a1="."+a1;if(b1.charAt(0)==="0")b1="."+b1;return a1-b1}else return a1>b1?1:-1}}return a.length>b.length}if(alignEmptyValues==="top"&&dir==="desc"||alignEmptyValues==="bottom"&&dir==="asc"){emptyAlign*=-1}return emptyAlign}var defaultSorters={number:number$1,string:string,date:date,time:time,datetime:datetime$1,boolean:_boolean,array:array,exists:exists,alphanum:alphanum};var Sort=function(_Module){_inherits(Sort,_Module);var _super=_createSuper(Sort);function Sort(table){var _this;_classCallCheck(this,Sort);_this=_super.call(this,table);_this.sortList=[];_this.changed=false;_this.registerTableOption("sortMode","local");_this.registerTableOption("initialSort",false);_this.registerTableOption("columnHeaderSortMulti",true);_this.registerTableOption("sortOrderReverse",false);_this.registerTableOption("headerSortElement","<div class='tabulator-arrow'></div>");_this.registerColumnOption("sorter");_this.registerColumnOption("sorterParams");_this.registerColumnOption("headerSort",true);_this.registerColumnOption("headerSortStartingDir");_this.registerColumnOption("headerSortTristate");return _this}_createClass(Sort,[{key:"initialize",value:function initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this));this.subscribe("table-built",this.tableBuilt.bind(this));this.registerDataHandler(this.sort.bind(this),20);this.registerTableFunction("setSort",this.userSetSort.bind(this));this.registerTableFunction("getSorters",this.getSort.bind(this));this.registerTableFunction("clearSort",this.clearSort.bind(this));if(this.table.options.sortMode==="remote"){this.subscribe("data-params",this.remoteSortParams.bind(this))}}},{key:"tableBuilt",value:function tableBuilt(){if(this.table.options.initialSort){this.setSort(this.table.options.initialSort)}}},{key:"remoteSortParams",value:function remoteSortParams(data,config,silent,params){var sorters=this.getSort();sorters.forEach(function(item){delete item.column});params.sort=sorters;return params}},{key:"userSetSort",value:function userSetSort(sortList,dir){this.setSort(sortList,dir);this.refreshSort()}},{key:"clearSort",value:function clearSort(){this.clear();this.refreshSort()}},{key:"initializeColumn",value:function initializeColumn(column){var _this2=this;var sorter=false,colEl,arrowEl;switch(_typeof(column.definition.sorter)){case"string":if(Sort.sorters[column.definition.sorter]){sorter=Sort.sorters[column.definition.sorter]}else{console.warn("Sort Error - No such sorter found: ",column.definition.sorter)}break;case"function":sorter=column.definition.sorter;break}column.modules.sort={sorter:sorter,dir:"none",params:column.definition.sorterParams||{},startingDir:column.definition.headerSortStartingDir||"asc",tristate:column.definition.headerSortTristate};if(column.definition.headerSort!==false){colEl=column.getElement();colEl.classList.add("tabulator-sortable");arrowEl=document.createElement("div");arrowEl.classList.add("tabulator-col-sorter");if(_typeof(this.table.options.headerSortElement)=="object"){arrowEl.appendChild(this.table.options.headerSortElement)}else{arrowEl.innerHTML=this.table.options.headerSortElement}column.titleHolderElement.appendChild(arrowEl);column.modules.sort.element=arrowEl;colEl.addEventListener("click",function(e){var dir="",sorters=[],match=false;if(column.modules.sort){if(column.modules.sort.tristate){if(column.modules.sort.dir=="none"){dir=column.modules.sort.startingDir}else{if(column.modules.sort.dir==column.modules.sort.startingDir){dir=column.modules.sort.dir=="asc"?"desc":"asc"}else{dir="none"}}}else{switch(column.modules.sort.dir){case"asc":dir="desc";break;case"desc":dir="asc";break;default:dir=column.modules.sort.startingDir}}if(_this2.table.options.columnHeaderSortMulti&&(e.shiftKey||e.ctrlKey)){sorters=_this2.getSort();match=sorters.findIndex(function(sorter){return sorter.field===column.getField()});if(match>-1){sorters[match].dir=dir;if(match!=sorters.length-1){match=sorters.splice(match,1)[0];if(dir!="none"){sorters.push(match)}}}else{if(dir!="none"){sorters.push({column:column,dir:dir})}}_this2.setSort(sorters)}else{if(dir=="none"){_this2.clear()}else{_this2.setSort(column,dir)}}_this2.refreshSort()}})}}},{key:"refreshSort",value:function refreshSort(){if(this.table.options.sortMode==="remote"){this.reloadData()}else{this.refreshData(true)}}},{key:"hasChanged",value:function hasChanged(){var changed=this.changed;this.changed=false;return changed}},{key:"getSort",value:function getSort(){var self=this,sorters=[];self.sortList.forEach(function(item){if(item.column){sorters.push({column:item.column.getComponent(),field:item.column.getField(),dir:item.dir})}});return sorters}},{key:"setSort",value:function setSort(sortList,dir){var self=this,newSortList=[];if(!Array.isArray(sortList)){sortList=[{column:sortList,dir:dir}]}sortList.forEach(function(item){var column;column=self.table.columnManager.findColumn(item.column);if(column){item.column=column;newSortList.push(item);self.changed=true}else{console.warn("Sort Warning - Sort field does not exist and is being ignored: ",item.column)}});self.sortList=newSortList;this.dispatch("sort-changed")}},{key:"clear",value:function clear(){this.setSort([])}},{key:"findSorter",value:function findSorter(column){var row=this.table.rowManager.activeRows[0],sorter="string",field,value;if(row){row=row.getData();field=column.getField();if(field){value=column.getFieldValue(row);switch(_typeof(value)){case"undefined":sorter="string";break;case"boolean":sorter="boolean";break;default:if(!isNaN(value)&&value!==""){sorter="number"}else{if(value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)){sorter="alphanum"}}break}}}return Sort.sorters[sorter]}},{key:"sort",value:function sort(data){var self=this,sortList=this.table.options.sortOrderReverse?self.sortList.slice().reverse():self.sortList,sortListActual=[],rowComponents=[];if(this.subscribedExternal("dataSorting")){this.dispatchExternal("dataSorting",self.getSort())}self.clearColumnHeaders();if(this.table.options.sortMode!=="remote"){sortList.forEach(function(item,i){var sortObj=item.column.modules.sort;if(item.column&&sortObj){if(!sortObj.sorter){sortObj.sorter=self.findSorter(item.column)}item.params=typeof sortObj.params==="function"?sortObj.params(item.column.getComponent(),item.dir):sortObj.params;sortListActual.push(item)}self.setColumnHeader(item.column,item.dir)});if(sortListActual.length){self._sortItems(data,sortListActual)}}else{sortList.forEach(function(item,i){self.setColumnHeader(item.column,item.dir)})}if(this.subscribedExternal("dataSorted")){data.forEach(function(row){rowComponents.push(row.getComponent())});this.dispatchExternal("dataSorted",self.getSort(),rowComponents)}return data}},{key:"clearColumnHeaders",value:function clearColumnHeaders(){this.table.columnManager.getRealColumns().forEach(function(column){if(column.modules.sort){column.modules.sort.dir="none";column.getElement().setAttribute("aria-sort","none")}})}},{key:"setColumnHeader",value:function setColumnHeader(column,dir){column.modules.sort.dir=dir;column.getElement().setAttribute("aria-sort",dir)}},{key:"_sortItems",value:function _sortItems(data,sortList){var _this3=this;var sorterCount=sortList.length-1;data.sort(function(a,b){var result;for(var i=sorterCount;i>=0;i--){var sortItem=sortList[i];result=_this3._sortRow(a,b,sortItem.column,sortItem.dir,sortItem.params);if(result!==0){break}}return result})}},{key:"_sortRow",value:function _sortRow(a,b,column,dir,params){var el1Comp,el2Comp;var el1=dir=="asc"?a:b;var el2=dir=="asc"?b:a;a=column.getFieldValue(el1.getData());b=column.getFieldValue(el2.getData());a=typeof a!=="undefined"?a:"";b=typeof b!=="undefined"?b:"";el1Comp=el1.getComponent();el2Comp=el2.getComponent();return column.modules.sort.sorter.call(this,a,b,el1Comp,el2Comp,column.getComponent(),dir,params)}}]);return Sort}(Module);Sort.moduleName="sort";Sort.sorters=defaultSorters;var defaultValidators={integer:function integer(cell,value,parameters){if(value===""||value===null||typeof value==="undefined"){return true}value=Number(value);return typeof value==="number"&&isFinite(value)&&Math.floor(value)===value},float:function float(cell,value,parameters){if(value===""||value===null||typeof value==="undefined"){return true}value=Number(value);return typeof value==="number"&&isFinite(value)&&value%1!==0},numeric:function numeric(cell,value,parameters){if(value===""||value===null||typeof value==="undefined"){return true}return!isNaN(value)},string:function string(cell,value,parameters){if(value===""||value===null||typeof value==="undefined"){return true}return isNaN(value)},max:function max(cell,value,parameters){if(value===""||value===null||typeof value==="undefined"){return true}return parseFloat(value)<=parameters},min:function min(cell,value,parameters){if(value===""||value===null||typeof value==="undefined"){return true}return parseFloat(value)>=parameters},starts:function starts(cell,value,parameters){if(value===""||value===null||typeof value==="undefined"){return true}return String(value).toLowerCase().startsWith(String(parameters).toLowerCase())},ends:function ends(cell,value,parameters){if(value===""||value===null||typeof value==="undefined"){return true}return String(value).toLowerCase().endsWith(String(parameters).toLowerCase())},minLength:function minLength(cell,value,parameters){if(value===""||value===null||typeof value==="undefined"){return true}return String(value).length>=parameters},maxLength:function maxLength(cell,value,parameters){if(value===""||value===null||typeof value==="undefined"){return true}return String(value).length<=parameters},in:function _in(cell,value,parameters){if(value===""||value===null||typeof value==="undefined"){return true}if(typeof parameters=="string"){parameters=parameters.split("|")}return value===""||parameters.indexOf(value)>-1},regex:function regex(cell,value,parameters){if(value===""||value===null||typeof value==="undefined"){return true}var reg=new RegExp(parameters);return reg.test(value)},unique:function unique(cell,value,parameters){if(value===""||value===null||typeof value==="undefined"){return true}var unique=true;var cellData=cell.getData();var column=cell.getColumn()._getSelf();this.table.rowManager.rows.forEach(function(row){var data=row.getData();if(data!==cellData){if(value==column.getFieldValue(data)){unique=false}}});return unique},required:function required(cell,value,parameters){return value!==""&&value!==null&&typeof value!=="undefined"}};var Validate=function(_Module){_inherits(Validate,_Module);var _super=_createSuper(Validate);function Validate(table){var _this;_classCallCheck(this,Validate);_this=_super.call(this,table);_this.invalidCells=[];_this.registerTableOption("validationMode","blocking");_this.registerColumnOption("validator");_this.registerTableFunction("getInvalidCells",_this.getInvalidCells.bind(_assertThisInitialized(_this)));_this.registerTableFunction("clearCellValidation",_this.userClearCellValidation.bind(_assertThisInitialized(_this)));_this.registerTableFunction("validate",_this.userValidate.bind(_assertThisInitialized(_this)));_this.registerComponentFunction("cell","isValid",_this.cellIsValid.bind(_assertThisInitialized(_this)));_this.registerComponentFunction("cell","clearValidation",_this.clearValidation.bind(_assertThisInitialized(_this)));_this.registerComponentFunction("cell","validate",_this.cellValidate.bind(_assertThisInitialized(_this)));_this.registerComponentFunction("column","validate",_this.columnValidate.bind(_assertThisInitialized(_this)));_this.registerComponentFunction("row","validate",_this.rowValidate.bind(_assertThisInitialized(_this)));return _this}_createClass(Validate,[{key:"initialize",value:function initialize(){this.subscribe("cell-delete",this.clearValidation.bind(this));this.subscribe("column-layout",this.initializeColumnCheck.bind(this))}},{key:"cellIsValid",value:function cellIsValid(cell){return cell.modules.validate?!cell.modules.validate.invalid:true}},{key:"cellValidate",value:function cellValidate(cell){return this.validate(cell.column.modules.validate,cell,cell.getValue())}},{key:"columnValidate",value:function columnValidate(column){var invalid=[];column.cells.forEach(function(cell){if(!this.cellValidate(cell)){invalid.push(cell.getComponent())}});return invalid.length?invalid:true}},{key:"rowValidate",value:function rowValidate(row){var invalid=[];row.cells.forEach(function(cell){if(!this.cellValidate(cell)){invalid.push(cell.getComponent())}});return invalid.length?invalid:true}},{key:"userClearCellValidation",value:function userClearCellValidation(cells){var _this2=this;if(!cells){cells=this.getInvalidCells()}if(!Array.isArray(cells)){cells=[cells]}cells.forEach(function(cell){_this2.clearValidation(cell._getSelf())})}},{key:"userValidate",value:function userValidate(cells){var output=[];this.table.rowManager.rows.forEach(function(row){var valid=row.validate();if(valid!==true){output=output.concat(valid)}});return output.length?output:true}},{key:"initializeColumnCheck",value:function initializeColumnCheck(column){if(typeof column.definition.validator!=="undefined"){this.initializeColumn(column)}}},{key:"initializeColumn",value:function initializeColumn(column){var self=this,config=[],validator;if(column.definition.validator){if(Array.isArray(column.definition.validator)){column.definition.validator.forEach(function(item){validator=self._extractValidator(item);if(validator){config.push(validator)}})}else{validator=this._extractValidator(column.definition.validator);if(validator){config.push(validator)}}column.modules.validate=config.length?config:false}}},{key:"_extractValidator",value:function _extractValidator(value){var type,params,pos;switch(_typeof(value)){case"string":pos=value.indexOf(":");if(pos>-1){type=value.substring(0,pos);params=value.substring(pos+1)}else{type=value}return this._buildValidator(type,params);case"function":return this._buildValidator(value);case"object":return this._buildValidator(value.type,value.parameters)}}},{key:"_buildValidator",value:function _buildValidator(type,params){var func=typeof type=="function"?type:Validate.validators[type];if(!func){console.warn("Validator Setup Error - No matching validator found:",type);return false}else{return{type:typeof type=="function"?"function":type,func:func,params:params}}}},{key:"validate",value:function validate(validators,cell,value){var self=this,valid=[],invalidIndex=this.invalidCells.indexOf(cell);if(validators){validators.forEach(function(item){if(!item.func.call(self,cell.getComponent(),value,item.params)){valid.push({type:item.type,parameters:item.params})}})}valid=valid.length?valid:true;if(!cell.modules.validate){cell.modules.validate={}}if(valid===true){cell.modules.validate.invalid=false;cell.getElement().classList.remove("tabulator-validation-fail");if(invalidIndex>-1){this.invalidCells.splice(invalidIndex,1)}}else{cell.modules.validate.invalid=true;if(this.table.options.validationMode!=="manual"){cell.getElement().classList.add("tabulator-validation-fail")}if(invalidIndex==-1){this.invalidCells.push(cell)}}return valid}},{key:"getInvalidCells",value:function getInvalidCells(){var output=[];this.invalidCells.forEach(function(cell){output.push(cell.getComponent())});return output}},{key:"clearValidation",value:function clearValidation(cell){var invalidIndex;if(cell.modules.validate&&cell.modules.validate.invalid){cell.getElement().classList.remove("tabulator-validation-fail");cell.modules.validate.invalid=false;invalidIndex=this.invalidCells.indexOf(cell);if(invalidIndex>-1){this.invalidCells.splice(invalidIndex,1)}}}}]);return Validate}(Module);Validate.moduleName="validate";Validate.validators=defaultValidators;var modules=Object.freeze({__proto__:null,AccessorModule:Accessor,AjaxModule:Ajax,ClipboardModule:Clipboard,ColumnCalcsModule:ColumnCalcs,DataTreeModule:DataTree,DownloadModule:Download,EditModule:Edit,ExportModule:Export,FilterModule:Filter,FormatModule:Format,FrozenColumnsModule:FrozenColumns,FrozenRowsModule:FrozenRows,GroupRowsModule:GroupRows,HistoryModule:History,HtmlTableImportModule:HtmlTableImport,InteractionModule:Interaction,KeybindingsModule:Keybindings,MenuModule:Menu,MoveColumnsModule:MoveColumns,MoveRowsModule:MoveRows,MutatorModule:Mutator,PageModule:Page,PersistenceModule:Persistence,PrintModule:Print,ReactiveDataModule:ReactiveData,ResizeColumnsModule:ResizeColumns,ResizeRowsModule:ResizeRows,ResizeTableModule:ResizeTable,ResponsiveLayoutModule:ResponsiveLayout,SelectRowModule:SelectRow,SortModule:Sort,ValidateModule:Validate});var TabulatorFull=function(_Tabulator){_inherits(TabulatorFull,_Tabulator);var _super=_createSuper(TabulatorFull);function TabulatorFull(){_classCallCheck(this,TabulatorFull);return _super.apply(this,arguments)}return TabulatorFull}(Tabulator);new ModuleBinder(TabulatorFull,modules);return TabulatorFull})},{}],41:[function(require,module,exports){!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.mdc=e():t.mdc=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/assets/",e(e.s=32)}([function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t),this.adapter_=e}return i(t,null,[{key:"cssClasses",get:function(){return{}}},{key:"strings",get:function(){return{}}},{key:"numbers",get:function(){return{}}},{key:"defaultAdapter",get:function(){return{}}}]),i(t,[{key:"init",value:function(){}},{key:"destroy",value:function(){}}]),t}();e.a=o},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;r(this,t),this.root_=e;for(var i=arguments.length,o=Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];this.initialize.apply(this,o),this.foundation_=void 0===n?this.getDefaultFoundation():n,this.foundation_.init(),this.initialSyncWithDOM()}return o(t,null,[{key:"attachTo",value:function(e){return new t(e,new i.a)}}]),o(t,[{key:"initialize",value:function(){}},{key:"getDefaultFoundation",value:function(){throw new Error("Subclasses must override getDefaultFoundation to return a properly configured foundation class")}},{key:"initialSyncWithDOM",value:function(){}},{key:"destroy",value:function(){this.foundation_.destroy()}},{key:"listen",value:function(t,e){this.root_.addEventListener(t,e)}},{key:"unlisten",value:function(t,e){this.root_.removeEventListener(t,e)}},{key:"emit",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=void 0;"function"==typeof CustomEvent?r=new CustomEvent(t,{detail:e,bubbles:n}):(r=document.createEvent("CustomEvent"),r.initCustomEvent(t,n,!1,e)),this.root_.dispatchEvent(r)}}]),t}();e.a=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(1);n.d(e,"MDCFoundation",function(){return r.a}),n.d(e,"MDCComponent",function(){return i.a})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"MDCRipple",function(){return l}),n.d(e,"RippleCapableSurface",function(){return d});var a=n(1),s=(n(15),n(35)),u=n(6);n.d(e,"MDCRippleFoundation",function(){return s.a}),n.d(e,"util",function(){return u});var c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(o)));return s.disabled=!1,s.unbounded_,s}return o(e,t),c(e,[{key:"setUnbounded_",value:function(){this.foundation_.setUnbounded(this.unbounded_)}},{key:"activate",value:function(){this.foundation_.activate()}},{key:"deactivate",value:function(){this.foundation_.deactivate()}},{key:"layout",value:function(){this.foundation_.layout()}},{key:"getDefaultFoundation",value:function(){return new s.a(e.createAdapter(this))}},{key:"initialSyncWithDOM",value:function(){this.unbounded="mdcRippleIsUnbounded"in this.root_.dataset}},{key:"unbounded",get:function(){return this.unbounded_},set:function(t){this.unbounded_=Boolean(t),this.setUnbounded_()}}],[{key:"attachTo",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.isUnbounded,i=void 0===r?void 0:r,o=new e(t);return void 0!==i&&(o.unbounded=i),o}},{key:"createAdapter",value:function(t){var e=u.getMatchesProperty(HTMLElement.prototype);return{browserSupportsCssVars:function(){return u.supportsCssVariables(window)},isUnbounded:function(){return t.unbounded},isSurfaceActive:function(){return t.root_[e](":active")},isSurfaceDisabled:function(){return t.disabled},addClass:function(e){return t.root_.classList.add(e)},removeClass:function(e){return t.root_.classList.remove(e)},registerInteractionHandler:function(e,n){return t.root_.addEventListener(e,n,u.applyPassive())},deregisterInteractionHandler:function(e,n){return t.root_.removeEventListener(e,n,u.applyPassive())},registerDocumentInteractionHandler:function(t,e){return document.documentElement.addEventListener(t,e,u.applyPassive())},deregisterDocumentInteractionHandler:function(t,e){return document.documentElement.removeEventListener(t,e,u.applyPassive())},registerResizeHandler:function(t){return window.addEventListener("resize",t)},deregisterResizeHandler:function(t){return window.removeEventListener("resize",t)},updateCssVariable:function(e,n){return t.root_.style.setProperty(e,n)},computeBoundingRect:function(){return t.root_.getBoundingClientRect()},getWindowPageOffset:function(){return{x:window.pageXOffset,y:window.pageYOffset}}}}}]),e}(a.a),d=function t(){r(this,t)};d.prototype.root_,d.prototype.unbounded,d.prototype.disabled},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"MDCSelectionControlState",function(){return o}),n.d(e,"MDCSelectionControl",function(){return a});var i=(n(3),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()),o=void 0,a=function(){function t(){r(this,t)}return i(t,[{key:"ripple",get:function(){}}]),t}()},function(t,e,n){"use strict";function r(t){return void 0!==t.document&&"function"==typeof t.document.createElement}function i(t){return t in c||t in l}function o(t,e,n){return e[t].styleProperty in n.style?e[t].noPrefix:e[t].webkitPrefix}function a(t,e){if(!r(t)||!i(e))return e;var n=e in c?c:l,a=t.document.createElement("div");return n===c?o(e,n,a):n[e].noPrefix in a.style?n[e].noPrefix:n[e].webkitPrefix}function s(t,e){return a(t,e)}function u(t,e){return a(t,e)}n.d(e,"c",function(){return d}),n.d(e,"a",function(){return s}),n.d(e,"b",function(){return u});var c={animationstart:{noPrefix:"animationstart",webkitPrefix:"webkitAnimationStart",styleProperty:"animation"},animationend:{noPrefix:"animationend",webkitPrefix:"webkitAnimationEnd",styleProperty:"animation"},animationiteration:{noPrefix:"animationiteration",webkitPrefix:"webkitAnimationIteration",styleProperty:"animation"},transitionend:{noPrefix:"transitionend",webkitPrefix:"webkitTransitionEnd",styleProperty:"transition"}},l={animation:{noPrefix:"animation",webkitPrefix:"-webkit-animation"},transform:{noPrefix:"transform",webkitPrefix:"-webkit-transform"},transition:{noPrefix:"transition",webkitPrefix:"-webkit-transition"}},d=["transform","WebkitTransform","MozTransform","OTransform","MSTransform"]},function(t,e,n){"use strict";function r(t){var e=t.document,n=e.createElement("div");n.className="mdc-ripple-surface--test-edge-var-bug",e.body.appendChild(n);var r=t.getComputedStyle(n),i=null!==r&&"solid"===r.borderTopStyle;return n.remove(),i}function i(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("boolean"==typeof u&&!e)return u;if(t.CSS&&"function"==typeof t.CSS.supports){var n=t.CSS.supports("--css-vars","yes"),i=t.CSS.supports("(--css-vars: yes)")&&t.CSS.supports("color","#00000000");return u=!(!n&&!i||r(t))}}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(void 0===c||e){var n=!1;try{t.document.addEventListener("test",null,{get passive(){n=!0}})}catch(t){}c=n}return!!c&&{passive:!0}}function a(t){return["webkitMatchesSelector","msMatchesSelector","matches"].filter(function(e){return e in t}).pop()}function s(t,e,n){var r=e.x,i=e.y,o=r+n.left,a=i+n.top,s=void 0,u=void 0;return"touchstart"===t.type?(s=t.changedTouches[0].pageX-o,u=t.changedTouches[0].pageY-a):(s=t.pageX-o,u=t.pageY-a),{x:s,y:u}}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"supportsCssVariables",function(){return i}),n.d(e,"applyPassive",function(){return o}),n.d(e,"getMatchesProperty",function(){return a}),n.d(e,"getNormalizedEventCoords",function(){return s});var u=void 0,c=void 0},function(t,e,n){"use strict";var r=n(49);n.d(e,"a",function(){return r.a});var i=n(50);n.d(e,"b",function(){return i.a})},function(t,e,n){"use strict";function r(t){if(!("ontouchstart"in(arguments.length>1&&void 0!==arguments[1]?arguments[1]:window).document))switch(t){case"touchstart":return"pointerdown";case"touchmove":return"pointermove";case"touchend":return"pointerup";default:return t}return t}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(void 0===d||e){var n=t.document.createElement("div"),r="transform"in n.style?"transform":"-webkit-transform";d=r}return d}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return"CSS"in t&&t.CSS.supports("(--color: red)")}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(void 0===f||e){var n=!1;try{t.document.addEventListener("test",null,{get passive(){n=!0}})}catch(t){}f=n}return!!f&&{passive:!0}}function s(t){t.hasAttribute("tabindex")&&t.setAttribute(c,t.getAttribute("tabindex")),t.setAttribute(l,!0)}function u(t){t.hasAttribute(l)&&(t.hasAttribute(c)?(t.setAttribute("tabindex",t.getAttribute(c)),t.removeAttribute(c)):t.removeAttribute("tabindex"),t.removeAttribute(l))}Object.defineProperty(e,"__esModule",{value:!0}),e.remapEvent=r,e.getTransformPropertyName=i,e.supportsCssCustomProperties=o,e.applyPassive=a,e.saveElementTabState=s,e.restoreElementTabState=u;var c="data-mdc-tabindex",l="data-mdc-tabindex-handled",d=void 0,f=void 0},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(16),i=n(69);n.d(e,"MDCSimpleMenu",function(){return i.d}),n.d(e,"MDCSimpleMenuFoundation",function(){return i.e}),n.d(e,"CornerBit",function(){return i.c}),n.d(e,"Corner",function(){return i.b}),n.d(e,"AnchorMargin",function(){return i.a}),n.d(e,"util",function(){return r})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n(26),n(91)),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u(e.defaultAdapter,t)));return n.transitionEndHandler_=function(t){return n.handleTransitionEnd(t)},n}return o(e,t),c(e,null,[{key:"cssClasses",get:function(){return s.a}},{key:"strings",get:function(){return s.b}},{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},setAttr:function(){},registerEventHandler:function(){},deregisterEventHandler:function(){},notifyAnimationEnd:function(){}}}}]),c(e,[{key:"init",value:function(){this.adapter_.registerEventHandler("transitionend",this.transitionEndHandler_)}},{key:"destroy",value:function(){this.adapter_.deregisterEventHandler("transitionend",this.transitionEndHandler_)}},{key:"activate",value:function(){this.adapter_.addClass(s.a.BOTTOM_LINE_ACTIVE)}},{key:"setTransformOrigin",value:function(t){var e=t.target.getBoundingClientRect(),n={x:t.clientX,y:t.clientY},r=n.x-e.left,i="transform-origin: "+r+"px center";this.adapter_.setAttr("style",i)}},{key:"deactivate",value:function(){this.adapter_.removeClass(s.a.BOTTOM_LINE_ACTIVE)}},{key:"handleTransitionEnd",value:function(t){"opacity"===t.propertyName&&this.adapter_.notifyAnimationEnd()}}]),e}(a.a);e.a=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n(27),n(92)),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u(e.defaultAdapter,t)))}return o(e,t),c(e,null,[{key:"cssClasses",get:function(){return s.a}},{key:"strings",get:function(){return s.b}},{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){},setAttr:function(){},removeAttr:function(){},setContent:function(){}}}}]),c(e,[{key:"setContent",value:function(t){this.adapter_.setContent(t)}},{key:"setPersistent",value:function(t){t?this.adapter_.addClass(s.a.HELPER_TEXT_PERSISTENT):this.adapter_.removeClass(s.a.HELPER_TEXT_PERSISTENT)}},{key:"setValidation",value:function(t){t?this.adapter_.addClass(s.a.HELPER_TEXT_VALIDATION_MSG):this.adapter_.removeClass(s.a.HELPER_TEXT_VALIDATION_MSG)}},{key:"showToScreenReader",value:function(){this.adapter_.removeAttr(s.b.ARIA_HIDDEN)}},{key:"setValidity",value:function(t){var e=this.adapter_.hasClass(s.a.HELPER_TEXT_PERSISTENT),n=this.adapter_.hasClass(s.a.HELPER_TEXT_VALIDATION_MSG),r=n&&!t;r?this.adapter_.setAttr(s.b.ROLE,"alert"):this.adapter_.removeAttr(s.b.ROLE),e||r||this.hide_()}},{key:"hide_",value:function(){this.adapter_.setAttr(s.b.ARIA_HIDDEN,"true")}}]),e}(a.a);e.a=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n(28),n(93)),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u(e.defaultAdapter,t)));return n.interactionHandler_=function(t){return n.handleInteraction(t)},n}return o(e,t),c(e,null,[{key:"strings",get:function(){return s.a}},{key:"defaultAdapter",get:function(){return{setAttr:function(){},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},notifyIconAction:function(){}}}}]),c(e,[{key:"init",value:function(){var t=this;["click","keydown"].forEach(function(e){t.adapter_.registerInteractionHandler(e,t.interactionHandler_)})}},{key:"destroy",value:function(){var t=this;["click","keydown"].forEach(function(e){t.adapter_.deregisterInteractionHandler(e,t.interactionHandler_)})}},{key:"setDisabled",value:function(t){t?this.adapter_.setAttr("tabindex","-1"):this.adapter_.setAttr("tabindex","0")}},{key:"handleInteraction",value:function(t){"click"!==t.type&&"Enter"!==t.key&&13!==t.keyCode||this.adapter_.notifyIconAction()}}]),e}(a.a);e.a=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n(29),n(94)),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u(e.defaultAdapter,t)))}return o(e,t),c(e,null,[{key:"cssClasses",get:function(){return s.a}},{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},getWidth:function(){}}}}]),c(e,[{key:"getWidth",value:function(){return this.adapter_.getWidth()}},{key:"styleShake",value:function(t,n){var r=e.cssClasses.LABEL_SHAKE;t||n?this.adapter_.removeClass(r):this.adapter_.addClass(r)}},{key:"styleFloat",value:function(t,n,r){var i=e.cssClasses.LABEL_FLOAT_ABOVE;t||n?this.adapter_.addClass(i):r||this.adapter_.removeClass(i)}}]),e}(a.a);e.a=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n(30),n(31)),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u(e.defaultAdapter,t)))}return o(e,t),c(e,null,[{key:"strings",get:function(){return s.a}},{key:"defaultAdapter",get:function(){return{getWidth:function(){},getHeight:function(){},setOutlinePathAttr:function(){},getIdleOutlineStyleValue:function(){}}}}]),c(e,[{key:"updateSvgPath",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.adapter_.getIdleOutlineStyleValue("border-radius")||this.adapter_.getIdleOutlineStyleValue("border-top-left-radius"),r=parseFloat(n),i=this.adapter_.getWidth(),o=this.adapter_.getHeight(),a=r+1.2,s=Math.abs(11-a),u=t+8,c="a"+r+","+r+" 0 0 1 "+r+","+r+"v"+(o-2*a)+"a"+r+","+r+" 0 0 1 "+-r+","+r+"h"+(2*a-i)+"a"+r+","+r+" 0 0 1 "+-r+","+-r+"v"+(2*a-o)+"a"+r+","+r+" 0 0 1 "+r+","+-r,l=void 0;l=e?"M"+(i-a-s)+",1h"+s+c+"h"+(i-2*a-u-s):"M"+(a+s+u)+",1h"+(i-2*a-u-s)+c+"h"+s,this.adapter_.setOutlinePathAttr(l)}}]),e}(a.a);e.a=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();!function(){function t(){r(this,t)}i(t,[{key:"browserSupportsCssVars",value:function(){}},{key:"isUnbounded",value:function(){}},{key:"isSurfaceActive",value:function(){}},{key:"isSurfaceDisabled",value:function(){}},{key:"addClass",value:function(t){}},{key:"removeClass",value:function(t){}},{key:"registerInteractionHandler",value:function(t,e){}},{key:"deregisterInteractionHandler",value:function(t,e){}},{key:"registerDocumentInteractionHandler",value:function(t,e){}},{key:"deregisterDocumentInteractionHandler",value:function(t,e){}},{key:"registerResizeHandler",value:function(t){}},{key:"deregisterResizeHandler",value:function(t){}},{key:"updateCssVariable",value:function(t,e){}},{key:"computeBoundingRect",value:function(){}},{key:"getWindowPageOffset",value:function(){}}])}()},function(t,e,n){"use strict";function r(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(void 0===u||e){var n=t.document.createElement("div"),r="transform"in n.style?"transform":"webkitTransform";u=r}return u}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(n,Math.max(e,t))}function o(t,e,n,r,i){return a(s(t,e,r),n,i)}function a(t,e,n){if(0===t||1===t)return t;var r=t*e,i=e+t*(n-e),o=n+t*(1-n);return r+=t*(i-r),i+=t*(o-i),r+t*(i-r)}function s(t,e,n){if(t<=0)return 0;if(t>=1)return 1;for(var r=t,i=0,o=1,s=0,u=0;u<8;u++){s=a(r,e,n);var c=(a(r+1e-6,e,n)-s)/1e-6;if(Math.abs(s-t)<1e-6)return r;if(Math.abs(c)<1e-6)break;s<t?i=r:o=r,r-=(s-t)/c}for(var l=0;Math.abs(s-t)>1e-6&&l<8;l++)s<t?(i=r,r=(r+o)/2):(o=r,r=(r+i)/2),s=a(r,e,n);return r}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"getTransformPropertyName",function(){return r}),n.d(e,"clamp",function(){return i}),n.d(e,"bezierProgress",function(){return o});var u=void 0},function(t,e,n){"use strict";n.d(e,"c",function(){return r}),n.d(e,"e",function(){return i}),n.d(e,"d",function(){return o}),n.d(e,"b",function(){return a}),n.d(e,"a",function(){return s});var r={ROOT:"mdc-simple-menu",OPEN:"mdc-simple-menu--open",ANIMATING_OPEN:"mdc-simple-menu--animating-open",ANIMATING_CLOSED:"mdc-simple-menu--animating-closed",LIST_ITEM:"mdc-list-item"},i={ITEMS_SELECTOR:".mdc-simple-menu__items",SELECTED_EVENT:"MDCSimpleMenu:selected",CANCEL_EVENT:"MDCSimpleMenu:cancel",ARIA_DISABLED_ATTR:"aria-disabled"},o={SELECTED_TRIGGER_DELAY:50,TRANSITION_OPEN_DURATION:120,TRANSITION_CLOSE_DURATION:75,MARGIN_TO_EDGE:32,ANCHOR_TO_MENU_WIDTH_RATIO:.67,OFFSET_TO_MENU_HEIGHT_RATIO:.1},a={BOTTOM:1,CENTER:2,RIGHT:4,FLIP_RTL:8},s={TOP_LEFT:0,TOP_RIGHT:a.RIGHT,BOTTOM_LEFT:a.BOTTOM,BOTTOM_RIGHT:a.BOTTOM|a.RIGHT,TOP_START:a.FLIP_RTL,TOP_END:a.FLIP_RTL|a.RIGHT,BOTTOM_START:a.BOTTOM|a.FLIP_RTL,BOTTOM_END:a.BOTTOM|a.RIGHT|a.FLIP_RTL}},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i});var r={BOTTOM_LINE:"mdc-select__bottom-line",BOTTOM_LINE_ACTIVE:"mdc-select__bottom-line--active",BOX:"mdc-select--box",DISABLED:"mdc-select--disabled",LABEL_FLOAT_ABOVE:"mdc-select__label--float-above",OPEN:"mdc-select--open",ROOT:"mdc-select",SCROLL_LOCK:"mdc-select-scroll-lock"},i={CHANGE_EVENT:"MDCSelect:change",BOTTOM_LINE_SELECTOR:".mdc-select__bottom-line",LABEL_SELECTOR:".mdc-select__label",MENU_SELECTOR:".mdc-select__menu",SURFACE_SELECTOR:".mdc-select__surface",SELECTED_TEXT_SELECTOR:".mdc-select__selected-text"}},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"c",function(){return i}),n.d(e,"b",function(){return o});var r={ACTIVE:"mdc-slider--active",DISABLED:"mdc-slider--disabled",DISCRETE:"mdc-slider--discrete",FOCUS:"mdc-slider--focus",IN_TRANSIT:"mdc-slider--in-transit",IS_DISCRETE:"mdc-slider--discrete",HAS_TRACK_MARKER:"mdc-slider--display-markers"},i={TRACK_SELECTOR:".mdc-slider__track",TRACK_MARKER_CONTAINER_SELECTOR:".mdc-slider__track-marker-container",LAST_TRACK_MARKER_SELECTOR:".mdc-slider__track-marker:last-child",THUMB_CONTAINER_SELECTOR:".mdc-slider__thumb-container",PIN_VALUE_MARKER_SELECTOR:".mdc-slider__pin-value-marker",ARIA_VALUEMIN:"aria-valuemin",ARIA_VALUEMAX:"aria-valuemax",ARIA_VALUENOW:"aria-valuenow",ARIA_DISABLED:"aria-disabled",STEP_DATA_ATTR:"data-step",CHANGE_EVENT:"MDCSlider:change",INPUT_EVENT:"MDCSlider:input"},o={PAGE_FACTOR:4}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();!function(){function t(){r(this,t)}i(t,[{key:"hasClass",value:function(t){}},{key:"addClass",value:function(t){}},{key:"removeClass",value:function(t){}},{key:"getAttribute",value:function(t){}},{key:"setAttribute",value:function(t,e){}},{key:"removeAttribute",value:function(t){}},{key:"computeBoundingRect",value:function(){}},{key:"getTabIndex",value:function(){}},{key:"registerInteractionHandler",value:function(t,e){}},{key:"deregisterInteractionHandler",value:function(t,e){}},{key:"registerThumbContainerInteractionHandler",value:function(t,e){}},{key:"deregisterThumbContainerInteractionHandler",value:function(t,e){}},{key:"registerBodyInteractionHandler",value:function(t,e){}},{key:"deregisterBodyInteractionHandler",value:function(t,e){}},{key:"registerResizeHandler",value:function(t){}},{key:"deregisterResizeHandler",value:function(t){}},{key:"notifyInput",value:function(){}},{key:"notifyChange",value:function(){}},{key:"setThumbContainerStyleProperty",value:function(t,e){}},{key:"setTrackStyleProperty",value:function(t,e){}},{key:"setMarkerValue",value:function(t){}},{key:"appendTrackMarkers",value:function(t){}},{key:"removeTrackMarkers",value:function(){}},{key:"setLastTrackMarkersStyleProperty",value:function(t,e){}},{key:"isRTL",value:function(){}}])}()},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return f});var a=n(1),s=n(3),u=n(22),c=n(84);n.d(e,"b",function(){return c.a});var l=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},d=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var u=i(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(o)));return u.ripple_=s.MDCRipple.attachTo(u.root_),u}return o(e,t),d(e,[{key:"computedWidth",get:function(){return this.foundation_.getComputedWidth()}},{key:"computedLeft",get:function(){return this.foundation_.getComputedLeft()}},{key:"isActive",get:function(){return this.foundation_.isActive()},set:function(t){this.foundation_.setActive(t)}},{key:"preventDefaultOnClick",get:function(){return this.foundation_.preventsDefaultOnClick()},set:function(t){this.foundation_.setPreventDefaultOnClick(t)}}],[{key:"attachTo",value:function(t){return new e(t)}}]),d(e,[{key:"destroy",value:function(){this.ripple_.destroy(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"getDefaultFoundation",value:function(){var t=this;return new c.a({addClass:function(e){return t.root_.classList.add(e)},removeClass:function(e){return t.root_.classList.remove(e)},registerInteractionHandler:function(e,n){return t.root_.addEventListener(e,n)},deregisterInteractionHandler:function(e,n){return t.root_.removeEventListener(e,n)},getOffsetWidth:function(){return t.root_.offsetWidth},getOffsetLeft:function(){return t.root_.offsetLeft},notifySelected:function(){return t.emit(c.a.strings.SELECTED_EVENT,{tab:t},!0)}})}},{key:"initialSyncWithDOM",value:function(){this.isActive=this.root_.classList.contains(u.a.ACTIVE)}},{key:"measureSelf",value:function(){this.foundation_.measureSelf()}}]),e}(a.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i});var r={ACTIVE:"mdc-tab--active"},i={SELECTED_EVENT:"MDCTab:selected"}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return l});var a=n(1),s=n(21),u=n(85);n.d(e,"b",function(){return u.a});var c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),c(e,[{key:"initialize",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t){return new s.a(t)};this.indicator_=this.root_.querySelector(u.a.strings.INDICATOR_SELECTOR),this.tabs_=this.gatherTabs_(e),this.tabSelectedHandler_=function(e){var n=e.detail,r=n.tab;t.setActiveTab_(r,!0)}}},{key:"getDefaultFoundation",value:function(){var t=this;return new u.a({addClass:function(e){return t.root_.classList.add(e)},removeClass:function(e){return t.root_.classList.remove(e)},bindOnMDCTabSelectedEvent:function(){return t.listen(s.b.strings.SELECTED_EVENT,t.tabSelectedHandler_)},unbindOnMDCTabSelectedEvent:function(){return t.unlisten(s.b.strings.SELECTED_EVENT,t.tabSelectedHandler_)},registerResizeHandler:function(t){return window.addEventListener("resize",t)},deregisterResizeHandler:function(t){return window.removeEventListener("resize",t)},getOffsetWidth:function(){return t.root_.offsetWidth},setStyleForIndicator:function(e,n){return t.indicator_.style.setProperty(e,n)},getOffsetWidthForIndicator:function(){return t.indicator_.offsetWidth},notifyChange:function(e){return t.emit(u.a.strings.CHANGE_EVENT,e)},getNumberOfTabs:function(){return t.tabs.length},isTabActiveAtIndex:function(e){return t.tabs[e].isActive},setTabActiveAtIndex:function(e,n){t.tabs[e].isActive=n},isDefaultPreventedOnClickForTabAtIndex:function(e){return t.tabs[e].preventDefaultOnClick},setPreventDefaultOnClickForTabAtIndex:function(e,n){t.tabs[e].preventDefaultOnClick=n},measureTabAtIndex:function(e){return t.tabs[e].measureSelf()},getComputedWidthForTabAtIndex:function(e){return t.tabs[e].computedWidth},getComputedLeftForTabAtIndex:function(e){return t.tabs[e].computedLeft}})}},{key:"gatherTabs_",value:function(t){return[].slice.call(this.root_.querySelectorAll(u.a.strings.TAB_SELECTOR)).map(function(e){return t(e)})}},{key:"setActiveTabIndex_",value:function(t,e){this.foundation_.switchToTabAtIndex(t,e)}},{key:"layout",value:function(){this.foundation_.layout()}},{key:"setActiveTab_",value:function(t,e){var n=this.tabs.indexOf(t);if(n<0)throw new Error("Invalid tab component given as activeTab: Tab not found within this component's tab list");this.setActiveTabIndex_(n,e)}},{key:"tabs",get:function(){return this.tabs_}},{key:"activeTab",get:function(){var t=this.foundation_.getActiveTabIndex();return this.tabs[t]},set:function(t){this.setActiveTab_(t,!1)}},{key:"activeTabIndex",get:function(){return this.foundation_.getActiveTabIndex()},set:function(t){this.setActiveTabIndex_(t,!1)}}],[{key:"attachTo",value:function(t){return new e(t)}}]),e}(a.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"c",function(){return r}),n.d(e,"b",function(){return o});var r={ARIA_CONTROLS:"aria-controls",INPUT_SELECTOR:".mdc-text-field__input",LABEL_SELECTOR:".mdc-text-field__label",ICON_SELECTOR:".mdc-text-field__icon",OUTLINE_SELECTOR:".mdc-text-field__outline",BOTTOM_LINE_SELECTOR:".mdc-text-field__bottom-line"},i={ROOT:"mdc-text-field",UPGRADED:"mdc-text-field--upgraded",DISABLED:"mdc-text-field--disabled",DENSE:"mdc-text-field--dense",FOCUSED:"mdc-text-field--focused",INVALID:"mdc-text-field--invalid",BOX:"mdc-text-field--box",OUTLINED:"mdc-text-field--outlined"},o={LABEL_SCALE:.75,DENSE_LABEL_SCALE:.923}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=(n(10),n(11),n(12),n(13),n(14),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}());!function(){function t(){r(this,t)}i(t,[{key:"addClass",value:function(t){}},{key:"removeClass",value:function(t){}},{key:"hasClass",value:function(t){}},{key:"registerTextFieldInteractionHandler",value:function(t,e){}},{key:"deregisterTextFieldInteractionHandler",value:function(t,e){}},{key:"registerInputInteractionHandler",value:function(t,e){}},{key:"deregisterInputInteractionHandler",value:function(t,e){}},{key:"registerBottomLineEventHandler",value:function(t,e){}},{key:"deregisterBottomLineEventHandler",value:function(t,e){}},{key:"getNativeInput",value:function(){}},{key:"isFocused",value:function(){}},{key:"isRtl",value:function(){}}])}()},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();!function(){function t(){r(this,t)}i(t,[{key:"addClass",value:function(t){}},{key:"removeClass",value:function(t){}},{key:"setAttr",value:function(t,e){}},{key:"registerEventHandler",value:function(t,e){}},{key:"deregisterEventHandler",value:function(t,e){}},{key:"notifyAnimationEnd",value:function(){}}])}()},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();!function(){function t(){r(this,t)}i(t,[{key:"addClass",value:function(t){}},{key:"removeClass",value:function(t){}},{key:"hasClass",value:function(t){}},{key:"setAttr",value:function(t,e){}},{key:"removeAttr",value:function(t){}},{key:"setContent",value:function(t){}}])}()},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();!function(){function t(){r(this,t)}i(t,[{key:"setAttr",value:function(t,e){}},{key:"registerInteractionHandler",value:function(t,e){}},{key:"deregisterInteractionHandler",value:function(t,e){}},{key:"notifyIconAction",value:function(){}}])}()},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();!function(){function t(){r(this,t)}i(t,[{key:"addClass",value:function(t){}},{key:"removeClass",value:function(t){}},{key:"getWidth",value:function(){}}])}()},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();!function(){function t(){r(this,t)}i(t,[{key:"getWidth",value:function(){}},{key:"getHeight",value:function(){}},{key:"setOutlinePathAttr",value:function(t){}},{key:"getIdleOutlineStyleValue",value:function(t){}}])}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={PATH_SELECTOR:".mdc-text-field__outline-path",IDLE_OUTLINE_SELECTOR:".mdc-text-field__idle-outline"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(33),i=n(2),o=n(34),a=n(40),s=n(46),u=n(55),c=n(59),l=n(62),d=n(66),f=n(9),_=n(72),p=n(3),h=n(76),y=n(4),v=n(78),b=n(80),g=n(83),m=n(90),E=n(101);n.d(e,"autoInit",function(){return r.a}),n.d(e,"base",function(){return i}),n.d(e,"checkbox",function(){return o}),n.d(e,"dialog",function(){return a}),n.d(e,"drawer",function(){return s}),n.d(e,"formField",function(){return u}),n.d(e,"gridList",function(){return c}),n.d(e,"iconToggle",function(){return l}),n.d(e,"linearProgress",function(){return d}),n.d(e,"menu",function(){return f}),n.d(e,"radio",function(){return _}),n.d(e,"ripple",function(){return p}),n.d(e,"select",function(){return h}),n.d(e,"selectionControl",function(){return y}),n.d(e,"slider",function(){return v}),n.d(e,"snackbar",function(){return b}),n.d(e,"tabs",function(){return g}),n.d(e,"textField",function(){return m}),n.d(e,"toolbar",function(){return E}),r.a.register("MDCCheckbox",o.MDCCheckbox),r.a.register("MDCDialog",a.MDCDialog),r.a.register("MDCPersistentDrawer",s.MDCPersistentDrawer),r.a.register("MDCTemporaryDrawer",s.MDCTemporaryDrawer),r.a.register("MDCFormField",u.MDCFormField),r.a.register("MDCRipple",p.MDCRipple),r.a.register("MDCGridList",c.MDCGridList),r.a.register("MDCIconToggle",l.MDCIconToggle),r.a.register("MDCLinearProgress",d.MDCLinearProgress),r.a.register("MDCRadio",_.MDCRadio),r.a.register("MDCSnackbar",b.MDCSnackbar),r.a.register("MDCTab",g.MDCTab),r.a.register("MDCTabBar",g.MDCTabBar),r.a.register("MDCTextField",m.MDCTextField),r.a.register("MDCSimpleMenu",f.MDCSimpleMenu),r.a.register("MDCSelect",h.MDCSelect),r.a.register("MDCSlider",v.MDCSlider),r.a.register("MDCToolbar",E.MDCToolbar)},function(t,e,n){"use strict";function r(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=void 0;"function"==typeof CustomEvent?r=new CustomEvent(t,{detail:e,bubbles:n}):(r=document.createEvent("CustomEvent"),r.initCustomEvent(t,n,!1,e)),document.dispatchEvent(r)}function i(){for(var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,i=e.querySelectorAll("[data-mdc-auto-init]"),s=0;t=i[s];s++){var u=t.dataset.mdcAutoInit;if(!u)throw new Error("(mdc-auto-init) Constructor name must be given.");var c=o[u];if("function"!=typeof c)throw new Error("(mdc-auto-init) Could not find constructor in registry for "+u);if(t[u])n("(mdc-auto-init) Component already initialized for "+t+". Skipping...");else{var l=c.attachTo(t);Object.defineProperty(t,u,{value:l,writable:!1,enumerable:!1,configurable:!0})}}r("MDCAutoInit:End",{})}e.a=i;var o=Object.create(null),a=console.warn.bind(console);i.register=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a;if("function"!=typeof e)throw new Error("(mdc-auto-init) Invalid Ctor value "+e+". Expected function");o[t]&&n("(mdc-auto-init) Overriding registration for "+t+" with "+e+". Was: "+o[t]),o[t]=e},i.deregister=function(t){delete o[t]},i.deregisterAll=function(){Object.keys(o).forEach(this.deregister,this)}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"MDCCheckbox",function(){return p});var a=n(5),s=n(1),u=(n(4),n(37)),c=n(3),l=n(6);n.d(e,"MDCCheckboxFoundation",function(){return u.a});var d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},f=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),p=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(o)));return s.ripple_=s.initRipple_(),s}return o(e,t),_(e,[{key:"nativeCb_",get:function(){var t=u.a.strings.NATIVE_CONTROL_SELECTOR;return this.root_.querySelector(t)}}],[{key:"attachTo",value:function(t){return new e(t)}}]),_(e,[{key:"initRipple_",value:function(){var t=this,e=Object(l.getMatchesProperty)(HTMLElement.prototype),n=d(c.MDCRipple.createAdapter(this),{isUnbounded:function(){return!0},isSurfaceActive:function(){return t.nativeCb_[e](":active")},registerInteractionHandler:function(e,n){return t.nativeCb_.addEventListener(e,n)},deregisterInteractionHandler:function(e,n){return t.nativeCb_.removeEventListener(e,n)},computeBoundingRect:function(){var e=t.root_.getBoundingClientRect(),n=e.left,r=e.top;return{top:r,left:n,right:n+40,bottom:r+40,width:40,height:40}}}),r=new c.MDCRippleFoundation(n);return new c.MDCRipple(this.root_,r)}},{key:"getDefaultFoundation",value:function(){var t=this;return new u.a({addClass:function(e){return t.root_.classList.add(e)},removeClass:function(e){return t.root_.classList.remove(e)},registerAnimationEndHandler:function(e){return t.root_.addEventListener(Object(a.a)(window,"animationend"),e)},deregisterAnimationEndHandler:function(e){return t.root_.removeEventListener(Object(a.a)(window,"animationend"),e)},registerChangeHandler:function(e){return t.nativeCb_.addEventListener("change",e)},deregisterChangeHandler:function(e){return t.nativeCb_.removeEventListener("change",e)},getNativeControl:function(){return t.nativeCb_},forceLayout:function(){return t.root_.offsetWidth},isAttachedToDOM:function(){return Boolean(t.root_.parentNode)}})}},{key:"destroy",value:function(){this.ripple_.destroy(),f(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"ripple",get:function(){return this.ripple_}},{key:"checked",get:function(){return this.foundation_.isChecked()},set:function(t){this.foundation_.setChecked(t)}},{key:"indeterminate",get:function(){return this.foundation_.isIndeterminate()},set:function(t){this.foundation_.setIndeterminate(t)}},{key:"disabled",get:function(){return this.foundation_.isDisabled()},set:function(t){this.foundation_.setDisabled(t)}},{key:"value",get:function(){return this.foundation_.getValue()},set:function(t){this.foundation_.setValue(t)}}]),e}(s.a)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n(15),n(36)),u=n(6),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),d=["touchstart","pointerdown","mousedown","keydown"],f=["touchend","pointerup","mouseup"],_=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,c(e.defaultAdapter,t)));return n.layoutFrame_=0,n.frame_={width:0,height:0},n.activationState_=n.defaultActivationState_(),n.xfDuration_=0,n.initialSize_=0,n.maxRadius_=0,n.activateHandler_=function(t){return n.activate_(t)},n.deactivateHandler_=function(t){return n.deactivate_(t)},n.focusHandler_=function(){return requestAnimationFrame(function(){return n.adapter_.addClass(e.cssClasses.BG_FOCUSED)})},n.blurHandler_=function(){return requestAnimationFrame(function(){return n.adapter_.removeClass(e.cssClasses.BG_FOCUSED)})},n.resizeHandler_=function(){return n.layout()},n.unboundedCoords_={left:0,top:0},n.fgScale_=0,n.activationTimer_=0,n.fgDeactivationRemovalTimer_=0,n.activationAnimationHasEnded_=!1,n.activationTimerCallback_=function(){n.activationAnimationHasEnded_=!0,n.runDeactivationUXLogicIfReady_()},n.previousActivationEvent_=null,n}return o(e,t),l(e,null,[{key:"cssClasses",get:function(){return s.a}},{key:"strings",get:function(){return s.c}},{key:"numbers",get:function(){return s.b}},{key:"defaultAdapter",get:function(){return{browserSupportsCssVars:function(){},isUnbounded:function(){},isSurfaceActive:function(){},isSurfaceDisabled:function(){},addClass:function(){},removeClass:function(){},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},registerDocumentInteractionHandler:function(){},deregisterDocumentInteractionHandler:function(){},registerResizeHandler:function(){},deregisterResizeHandler:function(){},updateCssVariable:function(){},computeBoundingRect:function(){},getWindowPageOffset:function(){}}}}]),l(e,[{key:"isSupported_",value:function(){return this.adapter_.browserSupportsCssVars()}},{key:"defaultActivationState_",value:function(){return{isActivated:!1,hasDeactivationUXRun:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1,activationEvent:null,isProgrammatic:!1}}},{key:"init",value:function(){var t=this;if(this.isSupported_()){this.registerRootHandlers_();var n=e.cssClasses,r=n.ROOT,i=n.UNBOUNDED;requestAnimationFrame(function(){t.adapter_.addClass(r),t.adapter_.isUnbounded()&&t.adapter_.addClass(i),t.layoutInternal_()})}}},{key:"destroy",value:function(){var t=this;if(this.isSupported_()){this.deregisterRootHandlers_(),this.deregisterDeactivationHandlers_();var n=e.cssClasses,r=n.ROOT,i=n.UNBOUNDED;requestAnimationFrame(function(){t.adapter_.removeClass(r),t.adapter_.removeClass(i),t.removeCssVars_()})}}},{key:"registerRootHandlers_",value:function(){var t=this;d.forEach(function(e){t.adapter_.registerInteractionHandler(e,t.activateHandler_)}),this.adapter_.registerInteractionHandler("focus",this.focusHandler_),this.adapter_.registerInteractionHandler("blur",this.blurHandler_),this.adapter_.registerResizeHandler(this.resizeHandler_)}},{key:"registerDeactivationHandlers_",value:function(t){var e=this;"keydown"===t.type?this.adapter_.registerInteractionHandler("keyup",this.deactivateHandler_):f.forEach(function(t){e.adapter_.registerDocumentInteractionHandler(t,e.deactivateHandler_)})}},{key:"deregisterRootHandlers_",value:function(){var t=this;d.forEach(function(e){t.adapter_.deregisterInteractionHandler(e,t.activateHandler_)}),this.adapter_.deregisterInteractionHandler("focus",this.focusHandler_),this.adapter_.deregisterInteractionHandler("blur",this.blurHandler_),this.adapter_.deregisterResizeHandler(this.resizeHandler_)}},{key:"deregisterDeactivationHandlers_",value:function(){var t=this;this.adapter_.deregisterInteractionHandler("keyup",this.deactivateHandler_),f.forEach(function(e){t.adapter_.deregisterDocumentInteractionHandler(e,t.deactivateHandler_)})}},{key:"removeCssVars_",value:function(){var t=this,n=e.strings;Object.keys(n).forEach(function(e){0===e.indexOf("VAR_")&&t.adapter_.updateCssVariable(n[e],null)})}},{key:"activate_",value:function(t){var e=this;if(!this.adapter_.isSurfaceDisabled()){var n=this.activationState_;if(!n.isActivated){var r=this.previousActivationEvent_;r&&t&&r.type!==t.type||(n.isActivated=!0,n.isProgrammatic=null===t,n.activationEvent=t,n.wasActivatedByPointer=!n.isProgrammatic&&("mousedown"===t.type||"touchstart"===t.type||"pointerdown"===t.type),t&&this.registerDeactivationHandlers_(t),requestAnimationFrame(function(){n.wasElementMadeActive=!t||"keydown"!==t.type||e.adapter_.isSurfaceActive(),n.wasElementMadeActive?e.animateActivation_():e.activationState_=e.defaultActivationState_()}))}}}},{key:"activate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.activate_(t)}},{key:"animateActivation_",value:function(){var t=this,n=e.strings,r=n.VAR_FG_TRANSLATE_START,i=n.VAR_FG_TRANSLATE_END,o=e.cssClasses,a=o.FG_DEACTIVATION,s=o.FG_ACTIVATION,u=e.numbers.DEACTIVATION_TIMEOUT_MS,c="",l="";if(!this.adapter_.isUnbounded()){var d=this.getFgTranslationCoordinates_(),f=d.startPoint,_=d.endPoint;c=f.x+"px, "+f.y+"px",l=_.x+"px, "+_.y+"px"}this.adapter_.updateCssVariable(r,c),this.adapter_.updateCssVariable(i,l),clearTimeout(this.activationTimer_),clearTimeout(this.fgDeactivationRemovalTimer_),this.rmBoundedActivationClasses_(),this.adapter_.removeClass(a),this.adapter_.computeBoundingRect(),this.adapter_.addClass(s),this.activationTimer_=setTimeout(function(){return t.activationTimerCallback_()},u)}},{key:"getFgTranslationCoordinates_",value:function(){var t=this.activationState_,e=t.activationEvent,n=t.wasActivatedByPointer,r=void 0;return r=n?Object(u.getNormalizedEventCoords)(e,this.adapter_.getWindowPageOffset(),this.adapter_.computeBoundingRect()):{x:this.frame_.width/2,y:this.frame_.height/2},r={x:r.x-this.initialSize_/2,y:r.y-this.initialSize_/2},{startPoint:r,endPoint:{x:this.frame_.width/2-this.initialSize_/2,y:this.frame_.height/2-this.initialSize_/2}}}},{key:"runDeactivationUXLogicIfReady_",value:function(){var t=this,n=e.cssClasses.FG_DEACTIVATION,r=this.activationState_,i=r.hasDeactivationUXRun,o=r.isActivated;(i||!o)&&this.activationAnimationHasEnded_&&(this.rmBoundedActivationClasses_(),this.adapter_.addClass(n),this.fgDeactivationRemovalTimer_=setTimeout(function(){t.adapter_.removeClass(n)},s.b.FG_DEACTIVATION_MS))}},{key:"rmBoundedActivationClasses_",value:function(){var t=e.cssClasses.FG_ACTIVATION;this.adapter_.removeClass(t),this.activationAnimationHasEnded_=!1,this.adapter_.computeBoundingRect()}},{key:"resetActivationState_",value:function(){var t=this;this.previousActivationEvent_=this.activationState_.activationEvent,this.activationState_=this.defaultActivationState_(),setTimeout(function(){return t.previousActivationEvent_=null},e.numbers.TAP_DELAY_MS)}},{key:"deactivate_",value:function(t){var e=this,n=this.activationState_;if(n.isActivated){var r=c({},n);if(n.isProgrammatic){requestAnimationFrame(function(){return e.animateDeactivation_(null,r)}),this.resetActivationState_()}else this.deregisterDeactivationHandlers_(),requestAnimationFrame(function(){e.activationState_.hasDeactivationUXRun=!0,e.animateDeactivation_(t,r),e.resetActivationState_()})}}},{key:"deactivate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.deactivate_(t)}},{key:"animateDeactivation_",value:function(t,e){var n=e.wasActivatedByPointer,r=e.wasElementMadeActive;(n||r)&&this.runDeactivationUXLogicIfReady_()}},{key:"layout",value:function(){var t=this;this.layoutFrame_&&cancelAnimationFrame(this.layoutFrame_),this.layoutFrame_=requestAnimationFrame(function(){t.layoutInternal_(),t.layoutFrame_=0})}},{key:"layoutInternal_",value:function(){this.frame_=this.adapter_.computeBoundingRect();var t=Math.max(this.frame_.height,this.frame_.width),n=Math.sqrt(Math.pow(this.frame_.width,2)+Math.pow(this.frame_.height,2));this.initialSize_=t*e.numbers.INITIAL_ORIGIN_SCALE,this.maxRadius_=n+e.numbers.PADDING,this.fgScale_=this.maxRadius_/this.initialSize_,this.xfDuration_=1e3*Math.sqrt(this.maxRadius_/1024),this.updateLayoutCssVars_()}},{key:"updateLayoutCssVars_",value:function(){var t=e.strings,n=t.VAR_FG_SIZE,r=t.VAR_LEFT,i=t.VAR_TOP,o=t.VAR_FG_SCALE;this.adapter_.updateCssVariable(n,this.initialSize_+"px"),this.adapter_.updateCssVariable(o,this.fgScale_),this.adapter_.isUnbounded()&&(this.unboundedCoords_={left:Math.round(this.frame_.width/2-this.initialSize_/2),top:Math.round(this.frame_.height/2-this.initialSize_/2)},this.adapter_.updateCssVariable(r,this.unboundedCoords_.left+"px"),this.adapter_.updateCssVariable(i,this.unboundedCoords_.top+"px"))}},{key:"setUnbounded",value:function(t){var n=e.cssClasses.UNBOUNDED;t?this.adapter_.addClass(n):this.adapter_.removeClass(n)}}]),e}(a.a);e.a=_},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"c",function(){return i}),n.d(e,"b",function(){return o});var r={ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded",BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation"},i={VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end"},o={PADDING:10,INITIAL_ORIGIN_SCALE:.6,DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,TAP_DELAY_MS:300}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){return!!t&&"function"==typeof t.set}var s=n(0),u=(n(4),n(38),n(39)),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),d=["checked","indeterminate"],f=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,c(e.defaultAdapter,t)));return n.currentCheckState_=u.c.TRANSITION_STATE_INIT,n.currentAnimationClass_="",n.animEndLatchTimer_=0,n.animEndHandler_=function(){clearTimeout(n.animEndLatchTimer_),n.animEndLatchTimer_=setTimeout(function(){n.adapter_.removeClass(n.currentAnimationClass_),n.adapter_.deregisterAnimationEndHandler(n.animEndHandler_)},u.b.ANIM_END_LATCH_MS)},n.changeHandler_=function(){return n.transitionCheckState_()},n}return o(e,t),l(e,null,[{key:"cssClasses",get:function(){return u.a}},{key:"strings",get:function(){return u.c}},{key:"numbers",get:function(){return u.b}},{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},registerAnimationEndHandler:function(){},deregisterAnimationEndHandler:function(){},registerChangeHandler:function(){},deregisterChangeHandler:function(){},getNativeControl:function(){},forceLayout:function(){},isAttachedToDOM:function(){}}}}]),l(e,[{key:"init",value:function(){this.currentCheckState_=this.determineCheckState_(this.getNativeControl_()),this.adapter_.addClass(u.a.UPGRADED),this.adapter_.registerChangeHandler(this.changeHandler_),this.installPropertyChangeHooks_()}},{key:"destroy",value:function(){this.adapter_.deregisterChangeHandler(this.changeHandler_),this.uninstallPropertyChangeHooks_()}},{key:"isChecked",value:function(){return this.getNativeControl_().checked}},{key:"setChecked",value:function(t){this.getNativeControl_().checked=t}},{key:"isIndeterminate",value:function(){return this.getNativeControl_().indeterminate}},{key:"setIndeterminate",value:function(t){this.getNativeControl_().indeterminate=t}},{key:"isDisabled",value:function(){return this.getNativeControl_().disabled}},{key:"setDisabled",value:function(t){this.getNativeControl_().disabled=t,t?this.adapter_.addClass(u.a.DISABLED):this.adapter_.removeClass(u.a.DISABLED)}},{key:"getValue",value:function(){return this.getNativeControl_().value}},{key:"setValue",value:function(t){this.getNativeControl_().value=t}},{key:"installPropertyChangeHooks_",value:function(){var t=this,e=this.getNativeControl_(),n=Object.getPrototypeOf(e);d.forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);if(a(i)){var o={get:i.get,set:function(n){i.set.call(e,n),t.transitionCheckState_()},configurable:i.configurable,enumerable:i.enumerable};Object.defineProperty(e,r,o)}})}},{key:"uninstallPropertyChangeHooks_",value:function(){var t=this.getNativeControl_(),e=Object.getPrototypeOf(t);d.forEach(function(n){var r=Object.getOwnPropertyDescriptor(e,n);a(r)&&Object.defineProperty(t,n,r)})}},{key:"transitionCheckState_",value:function(){var t=this.adapter_.getNativeControl();if(t){var e=this.currentCheckState_,n=this.determineCheckState_(t);e!==n&&(this.currentAnimationClass_.length>0&&(clearTimeout(this.animEndLatchTimer_),this.adapter_.forceLayout(),this.adapter_.removeClass(this.currentAnimationClass_)),this.currentAnimationClass_=this.getTransitionAnimationClass_(e,n),this.currentCheckState_=n,this.adapter_.isAttachedToDOM()&&this.currentAnimationClass_.length>0&&(this.adapter_.addClass(this.currentAnimationClass_),this.adapter_.registerAnimationEndHandler(this.animEndHandler_)))}}},{key:"determineCheckState_",value:function(t){var e=u.c.TRANSITION_STATE_INDETERMINATE,n=u.c.TRANSITION_STATE_CHECKED,r=u.c.TRANSITION_STATE_UNCHECKED;return t.indeterminate?e:t.checked?n:r}},{key:"getTransitionAnimationClass_",value:function(t,n){var r=u.c.TRANSITION_STATE_INIT,i=u.c.TRANSITION_STATE_CHECKED,o=u.c.TRANSITION_STATE_UNCHECKED,a=e.cssClasses,s=a.ANIM_UNCHECKED_CHECKED,c=a.ANIM_UNCHECKED_INDETERMINATE,l=a.ANIM_CHECKED_UNCHECKED,d=a.ANIM_CHECKED_INDETERMINATE,f=a.ANIM_INDETERMINATE_CHECKED,_=a.ANIM_INDETERMINATE_UNCHECKED;switch(t){case r:if(n===o)return"";case o:return n===i?s:c;case i:return n===o?l:d;default:return n===i?f:_}}},{key:"getNativeControl_",value:function(){return this.adapter_.getNativeControl()||{checked:!1,indeterminate:!1,disabled:!1,value:null}}}]),e}(s.a);e.a=f},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=(n(4),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}());!function(){function t(){r(this,t)}i(t,[{key:"addClass",value:function(t){}},{key:"removeClass",value:function(t){}},{key:"registerAnimationEndHandler",value:function(t){}},{key:"deregisterAnimationEndHandler",value:function(t){}},{key:"registerChangeHandler",value:function(t){}},{key:"deregisterChangeHandler",value:function(t){}},{key:"getNativeControl",value:function(){}},{key:"forceLayout",value:function(){}},{key:"isAttachedToDOM",value:function(){}}])}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"c",function(){return i}),n.d(e,"b",function(){return o});var r={UPGRADED:"mdc-checkbox--upgraded",CHECKED:"mdc-checkbox--checked",INDETERMINATE:"mdc-checkbox--indeterminate",DISABLED:"mdc-checkbox--disabled",ANIM_UNCHECKED_CHECKED:"mdc-checkbox--anim-unchecked-checked",ANIM_UNCHECKED_INDETERMINATE:"mdc-checkbox--anim-unchecked-indeterminate",ANIM_CHECKED_UNCHECKED:"mdc-checkbox--anim-checked-unchecked",ANIM_CHECKED_INDETERMINATE:"mdc-checkbox--anim-checked-indeterminate",ANIM_INDETERMINATE_CHECKED:"mdc-checkbox--anim-indeterminate-checked",ANIM_INDETERMINATE_UNCHECKED:"mdc-checkbox--anim-indeterminate-unchecked"},i={NATIVE_CONTROL_SELECTOR:".mdc-checkbox__native-control",TRANSITION_STATE_INIT:"init",TRANSITION_STATE_CHECKED:"checked",TRANSITION_STATE_UNCHECKED:"unchecked",TRANSITION_STATE_INDETERMINATE:"indeterminate"},o={ANIM_END_LATCH_MS:100}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"MDCDialog",function(){return f});var a=n(2),s=n(3),u=n(41),c=n(43);n.d(e,"MDCDialogFoundation",function(){return u.a}),n.d(e,"util",function(){return c});var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),d=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},f=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),l(e,[{key:"initialize",value:function(){this.focusTrap_=c.createFocusTrapInstance(this.dialogSurface_,this.acceptButton_),this.footerBtnRipples_=[];for(var t,e=this.root_.querySelectorAll(".mdc-dialog__footer__button"),n=0;t=e[n];n++)this.footerBtnRipples_.push(new s.MDCRipple(t))}},{key:"destroy",value:function(){this.footerBtnRipples_.forEach(function(t){return t.destroy()}),d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"show",value:function(){this.foundation_.open()}},{key:"close",value:function(){this.foundation_.close()}},{key:"getDefaultFoundation",value:function(){var t=this;return new u.a({addClass:function(e){return t.root_.classList.add(e)},removeClass:function(e){return t.root_.classList.remove(e)},addBodyClass:function(t){return document.body.classList.add(t)},removeBodyClass:function(t){return document.body.classList.remove(t)},eventTargetHasClass:function(t,e){return t.classList.contains(e)},registerInteractionHandler:function(e,n){return t.root_.addEventListener(e,n)},deregisterInteractionHandler:function(e,n){return t.root_.removeEventListener(e,n)},registerSurfaceInteractionHandler:function(e,n){return t.dialogSurface_.addEventListener(e,n)},deregisterSurfaceInteractionHandler:function(e,n){return t.dialogSurface_.removeEventListener(e,n)},registerDocumentKeydownHandler:function(t){return document.addEventListener("keydown",t)},deregisterDocumentKeydownHandler:function(t){return document.removeEventListener("keydown",t)},registerTransitionEndHandler:function(e){return t.dialogSurface_.addEventListener("transitionend",e)},deregisterTransitionEndHandler:function(e){return t.dialogSurface_.removeEventListener("transitionend",e)},notifyAccept:function(){return t.emit(u.a.strings.ACCEPT_EVENT)},notifyCancel:function(){return t.emit(u.a.strings.CANCEL_EVENT)},trapFocusOnSurface:function(){return t.focusTrap_.activate()},untrapFocusOnSurface:function(){return t.focusTrap_.deactivate()},isDialog:function(e){return e===t.dialogSurface_},layoutFooterRipples:function(){return t.footerBtnRipples_.forEach(function(t){return t.layout()})}})}},{key:"open",get:function(){return this.foundation_.isOpen()}},{key:"acceptButton_",get:function(){return this.root_.querySelector(u.a.strings.ACCEPT_SELECTOR)}},{key:"dialogSurface_",get:function(){return this.root_.querySelector(u.a.strings.DIALOG_SURFACE_SELECTOR)}}],[{key:"attachTo",value:function(t){return new e(t)}}]),e}(a.MDCComponent)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(2),s=n(42),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u(e.defaultAdapter,t)));return n.isOpen_=!1,n.componentClickHandler_=function(t){n.adapter_.eventTargetHasClass(t.target,s.a.BACKDROP)&&n.cancel(!0)},n.dialogClickHandler_=function(t){return n.handleDialogClick_(t)},n.documentKeydownHandler_=function(t){(t.key&&"Escape"===t.key||27===t.keyCode)&&n.cancel(!0)},n.transitionEndHandler_=function(t){return n.handleTransitionEnd_(t)},n}return o(e,t),c(e,null,[{key:"cssClasses",get:function(){return s.a}},{key:"strings",get:function(){return s.b}},{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},addBodyClass:function(){},removeBodyClass:function(){},eventTargetHasClass:function(){return!1},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},registerSurfaceInteractionHandler:function(){},deregisterSurfaceInteractionHandler:function(){},registerDocumentKeydownHandler:function(){},deregisterDocumentKeydownHandler:function(){},registerTransitionEndHandler:function(){},deregisterTransitionEndHandler:function(){},notifyAccept:function(){},notifyCancel:function(){},trapFocusOnSurface:function(){},untrapFocusOnSurface:function(){},isDialog:function(){return!1},layoutFooterRipples:function(){}}}}]),c(e,[{key:"destroy",value:function(){this.isOpen_&&(this.adapter_.deregisterSurfaceInteractionHandler("click",this.dialogClickHandler_),this.adapter_.deregisterDocumentKeydownHandler(this.documentKeydownHandler_),this.adapter_.deregisterInteractionHandler("click",this.componentClickHandler_),this.adapter_.untrapFocusOnSurface(),this.adapter_.deregisterTransitionEndHandler(this.transitionEndHandler_),this.adapter_.removeClass(e.cssClasses.ANIMATING),this.adapter_.removeClass(e.cssClasses.OPEN),this.enableScroll_())}},{key:"open",value:function(){this.isOpen_=!0,this.disableScroll_(),this.adapter_.registerDocumentKeydownHandler(this.documentKeydownHandler_),this.adapter_.registerSurfaceInteractionHandler("click",this.dialogClickHandler_),this.adapter_.registerInteractionHandler("click",this.componentClickHandler_),this.adapter_.registerTransitionEndHandler(this.transitionEndHandler_),this.adapter_.addClass(e.cssClasses.ANIMATING),this.adapter_.addClass(e.cssClasses.OPEN)}},{key:"close",value:function(){this.isOpen_=!1,this.adapter_.deregisterSurfaceInteractionHandler("click",this.dialogClickHandler_),this.adapter_.deregisterDocumentKeydownHandler(this.documentKeydownHandler_),this.adapter_.deregisterInteractionHandler("click",this.componentClickHandler_),this.adapter_.untrapFocusOnSurface(),this.adapter_.registerTransitionEndHandler(this.transitionEndHandler_),this.adapter_.addClass(e.cssClasses.ANIMATING),this.adapter_.removeClass(e.cssClasses.OPEN)}},{key:"isOpen",value:function(){return this.isOpen_}},{key:"accept",value:function(t){t&&this.adapter_.notifyAccept(),this.close()}},{key:"cancel",value:function(t){t&&this.adapter_.notifyCancel(),this.close()}},{key:"handleDialogClick_",value:function(t){var e=t.target;this.adapter_.eventTargetHasClass(e,s.a.ACCEPT_BTN)?this.accept(!0):this.adapter_.eventTargetHasClass(e,s.a.CANCEL_BTN)&&this.cancel(!0)}},{key:"handleTransitionEnd_",value:function(t){this.adapter_.isDialog(t.target)&&(this.adapter_.deregisterTransitionEndHandler(this.transitionEndHandler_),this.adapter_.removeClass(e.cssClasses.ANIMATING),this.isOpen_?(this.adapter_.trapFocusOnSurface(),this.adapter_.layoutFooterRipples()):this.enableScroll_())}},{key:"disableScroll_",value:function(){this.adapter_.addBodyClass(s.a.SCROLL_LOCK)}},{key:"enableScroll_",value:function(){this.adapter_.removeBodyClass(s.a.SCROLL_LOCK)}}]),e}(a.MDCFoundation);e.a=l},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i});var r={ROOT:"mdc-dialog",OPEN:"mdc-dialog--open",ANIMATING:"mdc-dialog--animating",BACKDROP:"mdc-dialog__backdrop",SCROLL_LOCK:"mdc-dialog-scroll-lock",ACCEPT_BTN:"mdc-dialog__footer__button--accept",CANCEL_BTN:"mdc-dialog__footer__button--cancel"},i={OPEN_DIALOG_SELECTOR:".mdc-dialog--open",DIALOG_SURFACE_SELECTOR:".mdc-dialog__surface",ACCEPT_SELECTOR:".mdc-dialog__footer__button--accept",ACCEPT_EVENT:"MDCDialog:accept",CANCEL_EVENT:"MDCDialog:cancel"}},function(t,e,n){"use strict";function r(t,e){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.a)(t,{initialFocus:e,clickOutsideDeactivates:!0})}Object.defineProperty(e,"__esModule",{value:!0}),e.createFocusTrapInstance=r;var i=n(44),o=n.n(i)},function(t,e,n){function r(t,e){function n(t){if(!T){var e={onActivate:t&&void 0!==t.onActivate?t.onActivate:k.onActivate};return T=!0,C=!1,E=document.activeElement,e.onActivate&&e.onActivate(),l(),A}}function r(t){if(T){var e={returnFocus:t&&void 0!==t.returnFocus?t.returnFocus:k.returnFocusOnDeactivate,onDeactivate:t&&void 0!==t.onDeactivate?t.onDeactivate:k.onDeactivate};return d(),e.onDeactivate&&e.onDeactivate(),e.returnFocus&&setTimeout(function(){o(E)},0),T=!1,C=!1,this}}function u(){!C&&T&&(C=!0,d())}function c(){C&&T&&(C=!1,l())}function l(){if(T)return s&&s.pause(),s=A,g(),o(_()),document.addEventListener("focus",y,!0),document.addEventListener("click",h,!0),document.addEventListener("mousedown",p,!0),document.addEventListener("touchstart",p,!0),document.addEventListener("keydown",v,!0),A}function d(){if(T&&s===A)return document.removeEventListener("focus",y,!0),document.removeEventListener("click",h,!0),document.removeEventListener("mousedown",p,!0),document.removeEventListener("touchstart",p,!0),document.removeEventListener("keydown",v,!0),s=null,A}function f(t){var e=k[t],n=e;if(!e)return null;if("string"==typeof e&&!(n=document.querySelector(e)))throw new Error("`"+t+"` refers to no known node");if("function"==typeof e&&!(n=e()))throw new Error("`"+t+"` did not return a node");return n}function _(){var t;if(!(t=null!==f("initialFocus")?f("initialFocus"):O.contains(document.activeElement)?document.activeElement:m[0]||f("fallbackFocus")))throw new Error("You can't have a focus-trap without at least one focusable element");return t}function p(t){k.clickOutsideDeactivates&&!O.contains(t.target)&&r({returnFocus:!1})}function h(t){k.clickOutsideDeactivates||O.contains(t.target)||(t.preventDefault(),t.stopImmediatePropagation())}function y(t){O.contains(t.target)||(t.preventDefault(),t.stopImmediatePropagation(),"function"==typeof t.target.blur&&t.target.blur())}function v(t){"Tab"!==t.key&&9!==t.keyCode||b(t),!1!==k.escapeDeactivates&&i(t)&&r()}function b(t){t.preventDefault(),g();var e=m.indexOf(t.target),n=m[m.length-1],r=m[0];return t.shiftKey?o(t.target===r||-1===m.indexOf(t.target)?n:m[e-1]):t.target===n?o(r):void o(m[e+1])}function g(){m=a(O)}var m=[],E=null,T=!1,C=!1,O="string"==typeof t?document.querySelector(t):t,k=e||{};k.returnFocusOnDeactivate=!e||void 0===e.returnFocusOnDeactivate||e.returnFocusOnDeactivate,k.escapeDeactivates=!e||void 0===e.escapeDeactivates||e.escapeDeactivates;var A={activate:n,deactivate:r,pause:u,unpause:c};return A}function i(t){return"Escape"===t.key||"Esc"===t.key||27===t.keyCode}function o(t){t&&t.focus&&(t.focus(),"input"===t.tagName.toLowerCase()&&t.select())}var a=n(45),s=null;t.exports=r},function(t,e){function n(t){function e(r,i){if(r===t.documentElement)return!1;for(var o=0,a=n.length;o<a;o++)if(n[o][0]===r)return n[o][1];i=i||t.defaultView.getComputedStyle(r);var s=!1;return"none"===i.display?s=!0:r.parentNode&&(s=e(r.parentNode)),n.push([r,s]),s}var n=[];return function(n){if(n===t.documentElement)return!1;var r=t.defaultView.getComputedStyle(n);return!!e(n,r)||"hidden"===r.visibility}}t.exports=function(t,e){e=e||{};var r=t.ownerDocument,i=[],o=[],a=n(r),s=["input","select","a[href]","textarea","button","[tabindex]"],u=t.querySelectorAll(s);if(e.includeContainer){var c=Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;s.some(function(e){return c.call(t,e)})&&(u=Array.prototype.slice.apply(u),u.unshift(t))}for(var l,d,f=0,_=u.length;f<_;f++)l=u[f],(d=parseInt(l.getAttribute("tabindex"),10)||l.tabIndex)<0||"INPUT"===l.tagName&&"hidden"===l.type||l.disabled||a(l,r)||(0===d?i.push(l):o.push({index:f,tabIndex:d,node:l}));var p=o.sort(function(t,e){return t.tabIndex===e.tabIndex?t.index-e.index:t.tabIndex-e.tabIndex}).map(function(t){return t.node});return Array.prototype.push.apply(p,i),p}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=n(47);n.d(e,"MDCTemporaryDrawer",function(){return i.a}),n.d(e,"MDCTemporaryDrawerFoundation",function(){return i.b});var o=n(52);n.d(e,"MDCPersistentDrawer",function(){return o.a}),n.d(e,"MDCPersistentDrawerFoundation",function(){return o.b}),n.d(e,"util",function(){return r})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return l});var a=n(2),s=n(48),u=n(8);n.d(e,"b",function(){return s.a});var c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),c(e,[{key:"getDefaultFoundation",value:function(){var t=this,e=s.a.strings,n=e.FOCUSABLE_ELEMENTS,r=e.OPACITY_VAR_NAME;return new s.a({addClass:function(e){return t.root_.classList.add(e)},removeClass:function(e){return t.root_.classList.remove(e)},hasClass:function(e){return t.root_.classList.contains(e)},addBodyClass:function(t){return document.body.classList.add(t)},removeBodyClass:function(t){return document.body.classList.remove(t)},eventTargetHasClass:function(t,e){return t.classList.contains(e)},hasNecessaryDom:function(){return Boolean(t.drawer)},registerInteractionHandler:function(e,n){return t.root_.addEventListener(u.remapEvent(e),n,u.applyPassive())},deregisterInteractionHandler:function(e,n){return t.root_.removeEventListener(u.remapEvent(e),n,u.applyPassive())},registerDrawerInteractionHandler:function(e,n){return t.drawer.addEventListener(u.remapEvent(e),n)},deregisterDrawerInteractionHandler:function(e,n){return t.drawer.removeEventListener(u.remapEvent(e),n)},registerTransitionEndHandler:function(e){return t.drawer.addEventListener("transitionend",e)},deregisterTransitionEndHandler:function(e){return t.drawer.removeEventListener("transitionend",e)},registerDocumentKeydownHandler:function(t){return document.addEventListener("keydown",t)},deregisterDocumentKeydownHandler:function(t){return document.removeEventListener("keydown",t)},getDrawerWidth:function(){return t.drawer.offsetWidth},setTranslateX:function(e){return t.drawer.style.setProperty(u.getTransformPropertyName(),null===e?null:"translateX("+e+"px)")},updateCssVariable:function(e){u.supportsCssCustomProperties()&&t.root_.style.setProperty(r,e)},getFocusableElements:function(){return t.drawer.querySelectorAll(n)},saveElementTabState:function(t){return u.saveElementTabState(t)},restoreElementTabState:function(t){return u.restoreElementTabState(t)},makeElementUntabbable:function(t){return t.setAttribute("tabindex",-1)},notifyOpen:function(){return t.emit(s.a.strings.OPEN_EVENT)},notifyClose:function(){return t.emit(s.a.strings.CLOSE_EVENT)},isRtl:function(){return"rtl"===getComputedStyle(t.root_).getPropertyValue("direction")},isDrawer:function(e){return e===t.drawer}})}},{key:"open",get:function(){return this.foundation_.isOpen()},set:function(t){t?this.foundation_.open():this.foundation_.close()}},{key:"drawer",get:function(){return this.root_.querySelector(s.a.strings.DRAWER_SELECTOR)}}],[{key:"attachTo",value:function(t){return new e(t)}}]),e}(a.MDCComponent)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(7),s=n(51),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),d=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u(e.defaultAdapter,t),e.cssClasses.ROOT,e.cssClasses.ANIMATING,e.cssClasses.OPEN));return n.componentClickHandler_=function(t){n.adapter_.eventTargetHasClass(t.target,s.a.ROOT)&&n.close(!0)},n}return o(e,t),l(e,null,[{key:"cssClasses",get:function(){return s.a}},{key:"strings",get:function(){return s.b}},{key:"defaultAdapter",get:function(){return u(a.b.defaultAdapter,{addBodyClass:function(){},removeBodyClass:function(){},isDrawer:function(){return!1},updateCssVariable:function(){},eventTargetHasClass:function(){return!1}})}}]),l(e,[{key:"init",value:function(){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this),this.adapter_.updateCssVariable(0),this.adapter_.registerInteractionHandler("click",this.componentClickHandler_)}},{key:"destroy",value:function(){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this),this.adapter_.deregisterInteractionHandler("click",this.componentClickHandler_),this.enableScroll_()}},{key:"open",value:function(){this.disableScroll_(),this.adapter_.updateCssVariable(""),c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"open",this).call(this)}},{key:"close",value:function(){this.adapter_.updateCssVariable(""),c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"close",this).call(this)}},{key:"prepareForTouchEnd_",value:function(){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"prepareForTouchEnd_",this).call(this),this.adapter_.updateCssVariable("")}},{key:"updateDrawer_",value:function(){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDrawer_",this).call(this);var t=Math.max(0,1+this.direction_*(this.newPosition_/this.drawerWidth_));this.adapter_.updateCssVariable(t)}},{key:"isRootTransitioningEventTarget_",value:function(t){return this.adapter_.isDrawer(t)}},{key:"handleTransitionEnd_",value:function(t){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"handleTransitionEnd_",this).call(this,t),this.isOpen_||this.enableScroll_()}},{key:"disableScroll_",value:function(){this.adapter_.addBodyClass(s.a.SCROLL_LOCK)}},{key:"enableScroll_",value:function(){this.adapter_.removeBodyClass(s.a.SCROLL_LOCK)}}]),e}(a.b);e.a=d},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex], [contenteditable]"},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return c});var a=n(2),s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=function(t){function e(t,n,o,a){r(this,e);var u=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,s(e.defaultAdapter,t)));return u.rootCssClass_=n,u.animatingCssClass_=o,u.openCssClass_=a,u.transitionEndHandler_=function(t){return u.handleTransitionEnd_(t)},u.inert_=!1,u.componentTouchStartHandler_=function(t){return u.handleTouchStart_(t)},u.componentTouchMoveHandler_=function(t){return u.handleTouchMove_(t)},u.componentTouchEndHandler_=function(t){return u.handleTouchEnd_(t)},u.documentKeydownHandler_=function(t){(t.key&&"Escape"===t.key||27===t.keyCode)&&u.close()},u}return o(e,t),u(e,null,[{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){},hasNecessaryDom:function(){return!1},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},registerDrawerInteractionHandler:function(){},deregisterDrawerInteractionHandler:function(){},registerTransitionEndHandler:function(){},deregisterTransitionEndHandler:function(){},registerDocumentKeydownHandler:function(){},deregisterDocumentKeydownHandler:function(){},setTranslateX:function(){},getFocusableElements:function(){},saveElementTabState:function(){},restoreElementTabState:function(){},makeElementUntabbable:function(){},notifyOpen:function(){},notifyClose:function(){},isRtl:function(){return!1},getDrawerWidth:function(){return 0}}}}]),u(e,[{key:"init",value:function(){var t=this.rootCssClass_,e=this.openCssClass_;if(!this.adapter_.hasClass(t))throw new Error(t+" class required in root element.");if(!this.adapter_.hasNecessaryDom())throw new Error("Required DOM nodes missing in "+t+" component.");this.adapter_.hasClass(e)?this.isOpen_=!0:(this.detabinate_(),this.isOpen_=!1),this.adapter_.registerDrawerInteractionHandler("touchstart",this.componentTouchStartHandler_),this.adapter_.registerInteractionHandler("touchmove",this.componentTouchMoveHandler_),this.adapter_.registerInteractionHandler("touchend",this.componentTouchEndHandler_)}},{key:"destroy",value:function(){this.adapter_.deregisterDrawerInteractionHandler("touchstart",this.componentTouchStartHandler_),this.adapter_.deregisterInteractionHandler("touchmove",this.componentTouchMoveHandler_),this.adapter_.deregisterInteractionHandler("touchend",this.componentTouchEndHandler_),this.adapter_.deregisterDocumentKeydownHandler(this.documentKeydownHandler_)}},{key:"open",value:function(){this.adapter_.registerTransitionEndHandler(this.transitionEndHandler_),this.adapter_.registerDocumentKeydownHandler(this.documentKeydownHandler_),this.adapter_.addClass(this.animatingCssClass_),this.adapter_.addClass(this.openCssClass_),this.retabinate_(),this.isOpen_||this.adapter_.notifyOpen(),this.isOpen_=!0}},{key:"close",value:function(){this.adapter_.deregisterDocumentKeydownHandler(this.documentKeydownHandler_),this.adapter_.registerTransitionEndHandler(this.transitionEndHandler_),this.adapter_.addClass(this.animatingCssClass_),this.adapter_.removeClass(this.openCssClass_),this.detabinate_(),this.isOpen_&&this.adapter_.notifyClose(),this.isOpen_=!1}},{key:"isOpen",value:function(){return this.isOpen_}},{key:"detabinate_",value:function(){if(!this.inert_){var t=this.adapter_.getFocusableElements();if(t)for(var e=0;e<t.length;e++)this.adapter_.saveElementTabState(t[e]),this.adapter_.makeElementUntabbable(t[e]);this.inert_=!0}}},{key:"retabinate_",value:function(){if(this.inert_){var t=this.adapter_.getFocusableElements();if(t)for(var e=0;e<t.length;e++)this.adapter_.restoreElementTabState(t[e]);this.inert_=!1}}},{key:"handleTouchStart_",value:function(t){this.adapter_.hasClass(this.openCssClass_)&&(t.pointerType&&"touch"!==t.pointerType||(this.direction_=this.adapter_.isRtl()?-1:1,this.drawerWidth_=this.adapter_.getDrawerWidth(),this.startX_=t.touches?t.touches[0].pageX:t.pageX,this.currentX_=this.startX_,this.updateRaf_=requestAnimationFrame(this.updateDrawer_.bind(this))))}},{key:"handleTouchMove_",value:function(t){t.pointerType&&"touch"!==t.pointerType||(this.currentX_=t.touches?t.touches[0].pageX:t.pageX)}},{key:"handleTouchEnd_",value:function(t){t.pointerType&&"touch"!==t.pointerType||(this.prepareForTouchEnd_(),Math.abs(this.newPosition_/this.drawerWidth_)>=.5?this.close():this.open())}},{key:"prepareForTouchEnd_",value:function(){cancelAnimationFrame(this.updateRaf_),this.adapter_.setTranslateX(null)}},{key:"updateDrawer_",value:function(){this.updateRaf_=requestAnimationFrame(this.updateDrawer_.bind(this)),this.adapter_.setTranslateX(this.newPosition_)}},{key:"isRootTransitioningEventTarget_",value:function(){return!1}},{key:"handleTransitionEnd_",value:function(t){this.isRootTransitioningEventTarget_(t.target)&&(this.adapter_.removeClass(this.animatingCssClass_),this.adapter_.deregisterTransitionEndHandler(this.transitionEndHandler_))}},{key:"newPosition_",get:function(){return 1===this.direction_?Math.min(0,this.currentX_-this.startX_):Math.max(0,this.currentX_-this.startX_)}}]),e}(a.MDCFoundation)},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n(7),i={ROOT:"mdc-drawer--temporary",OPEN:"mdc-drawer--open",ANIMATING:"mdc-drawer--animating",SCROLL_LOCK:"mdc-drawer-scroll-lock"},o={DRAWER_SELECTOR:".mdc-drawer--temporary .mdc-drawer__drawer",OPACITY_VAR_NAME:"--mdc-temporary-drawer-opacity",FOCUSABLE_ELEMENTS:r.a,OPEN_EVENT:"MDCTemporaryDrawer:open",CLOSE_EVENT:"MDCTemporaryDrawer:close"}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return l});var a=n(2),s=n(53),u=n(8);n.d(e,"b",function(){return s.a});var c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),c(e,[{key:"getDefaultFoundation",value:function(){var t=this,e=s.a.strings.FOCUSABLE_ELEMENTS;return new s.a({addClass:function(e){return t.root_.classList.add(e)},removeClass:function(e){return t.root_.classList.remove(e)},hasClass:function(e){return t.root_.classList.contains(e)},hasNecessaryDom:function(){return Boolean(t.drawer)},registerInteractionHandler:function(e,n){return t.root_.addEventListener(u.remapEvent(e),n,u.applyPassive())},deregisterInteractionHandler:function(e,n){return t.root_.removeEventListener(u.remapEvent(e),n,u.applyPassive())},registerDrawerInteractionHandler:function(e,n){return t.drawer.addEventListener(u.remapEvent(e),n)},deregisterDrawerInteractionHandler:function(e,n){return t.drawer.removeEventListener(u.remapEvent(e),n)},registerTransitionEndHandler:function(e){return t.root_.addEventListener("transitionend",e)},deregisterTransitionEndHandler:function(e){return t.root_.removeEventListener("transitionend",e)},registerDocumentKeydownHandler:function(t){return document.addEventListener("keydown",t)},deregisterDocumentKeydownHandler:function(t){return document.removeEventListener("keydown",t)},getDrawerWidth:function(){return t.drawer.offsetWidth},setTranslateX:function(e){return t.drawer.style.setProperty(u.getTransformPropertyName(),null===e?null:"translateX("+e+"px)")},getFocusableElements:function(){return t.drawer.querySelectorAll(e)},saveElementTabState:function(t){return u.saveElementTabState(t)},restoreElementTabState:function(t){return u.restoreElementTabState(t)},makeElementUntabbable:function(t){return t.setAttribute("tabindex",-1)},notifyOpen:function(){return t.emit(s.a.strings.OPEN_EVENT)},notifyClose:function(){return t.emit(s.a.strings.CLOSE_EVENT)},isRtl:function(){return"rtl"===getComputedStyle(t.root_).getPropertyValue("direction")},isDrawer:function(e){return e===t.drawer}})}},{key:"open",get:function(){return this.foundation_.isOpen()},set:function(t){t?this.foundation_.open():this.foundation_.close()}},{key:"drawer",get:function(){return this.root_.querySelector(s.a.strings.DRAWER_SELECTOR)}}],[{key:"attachTo",value:function(t){return new e(t)}}]),e}(a.MDCComponent)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(7),s=n(54),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function(t){function e(t){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u(e.defaultAdapter,t),e.cssClasses.ROOT,e.cssClasses.ANIMATING,e.cssClasses.OPEN))}return o(e,t),c(e,null,[{key:"cssClasses",get:function(){return s.a}},{key:"strings",get:function(){return s.b}},{key:"defaultAdapter",get:function(){return u(a.b.defaultAdapter,{isDrawer:function(){return!1}})}}]),c(e,[{key:"isRootTransitioningEventTarget_",value:function(t){return this.adapter_.isDrawer(t)}}]),e}(a.b);e.a=l},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n(7),i={ROOT:"mdc-drawer--persistent",OPEN:"mdc-drawer--open",ANIMATING:"mdc-drawer--animating"},o={DRAWER_SELECTOR:".mdc-drawer--persistent .mdc-drawer__drawer",FOCUSABLE_ELEMENTS:r.a,OPEN_EVENT:"MDCPersistentDrawer:open",CLOSE_EVENT:"MDCPersistentDrawer:close"}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"MDCFormField",function(){return c});var a=n(1),s=n(56);n(4);n.d(e,"MDCFormFieldFoundation",function(){return s.a});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(o)));return s.input_,s}return o(e,t),u(e,[{key:"input",set:function(t){this.input_=t},get:function(){return this.input_}}],[{key:"attachTo",value:function(t){return new e(t)}}]),u(e,[{key:"getDefaultFoundation",value:function(){var t=this;return new s.a({registerInteractionHandler:function(e,n){return t.label_.addEventListener(e,n)},deregisterInteractionHandler:function(e,n){return t.label_.removeEventListener(e,n)},activateInputRipple:function(){t.input_&&t.input_.ripple&&t.input_.ripple.activate()},deactivateInputRipple:function(){t.input_&&t.input_.ripple&&t.input_.ripple.deactivate()}})}},{key:"label_",get:function(){var t=s.a.strings.LABEL_SELECTOR;return this.root_.querySelector(t)}}]),e}(a.a)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n(57),n(58)),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u(e.defaultAdapter,t)));return n.clickHandler_=function(){return n.handleClick_()},n}return o(e,t),c(e,null,[{key:"cssClasses",get:function(){return s.a}},{key:"strings",get:function(){return s.b}},{key:"defaultAdapter",get:function(){return{registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},activateInputRipple:function(){},deactivateInputRipple:function(){}}}}]),c(e,[{key:"init",value:function(){this.adapter_.registerInteractionHandler("click",this.clickHandler_)}},{key:"destroy",value:function(){this.adapter_.deregisterInteractionHandler("click",this.clickHandler_)}},{key:"handleClick_",value:function(){var t=this;this.adapter_.activateInputRipple(),requestAnimationFrame(function(){return t.adapter_.deactivateInputRipple()})}}]),e}(a.a);e.a=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();!function(){function t(){r(this,t)}i(t,[{key:"registerInteractionHandler",value:function(t,e){}},{key:"deregisterInteractionHandler",value:function(t,e){}},{key:"activateInputRipple",value:function(){}},{key:"deactivateInputRipple",value:function(){}}])}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i});var r={ROOT:"mdc-form-field"},i={LABEL_SELECTOR:".mdc-form-field > label"}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"MDCGridList",function(){return c});var a=n(2),s=n(60);n.d(e,"MDCGridListFoundation",function(){return s.a});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"getDefaultFoundation",value:function(){var t=this;return new s.a({getOffsetWidth:function(){return t.root_.offsetWidth},getNumberOfTiles:function(){return t.root_.querySelectorAll(s.a.strings.TILE_SELECTOR).length},getOffsetWidthForTileAtIndex:function(e){return t.root_.querySelectorAll(s.a.strings.TILE_SELECTOR)[e].offsetWidth},setStyleForTilesElement:function(e,n){t.root_.querySelector(s.a.strings.TILES_SELECTOR).style[e]=n},registerResizeHandler:function(t){return window.addEventListener("resize",t)},deregisterResizeHandler:function(t){return window.removeEventListener("resize",t)}})}}],[{key:"attachTo",value:function(t){return new e(t)}}]),e}(a.MDCComponent)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(2),s=n(61),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u(e.defaultAdapter,t)));return n.resizeHandler_=function(){return n.alignCenter()},n.resizeFrame_=0,n}return o(e,t),c(e,null,[{key:"strings",get:function(){return s.a}},{key:"defaultAdapter",get:function(){return{getOffsetWidth:function(){return 0},getNumberOfTiles:function(){return 0},getOffsetWidthForTileAtIndex:function(){return 0},setStyleForTilesElement:function(){},registerResizeHandler:function(){},deregisterResizeHandler:function(){}}}}]),c(e,[{key:"init",value:function(){this.alignCenter(),this.adapter_.registerResizeHandler(this.resizeHandler_)}},{key:"destroy",value:function(){this.adapter_.deregisterResizeHandler(this.resizeHandler_)}},{key:"alignCenter",value:function(){var t=this;0!==this.resizeFrame_&&cancelAnimationFrame(this.resizeFrame_),this.resizeFrame_=requestAnimationFrame(function(){t.alignCenter_(),t.resizeFrame_=0})}},{key:"alignCenter_",value:function(){if(0!=this.adapter_.getNumberOfTiles()){var t=this.adapter_.getOffsetWidth(),e=this.adapter_.getOffsetWidthForTileAtIndex(0),n=e*Math.floor(t/e);this.adapter_.setStyleForTilesElement("width",n+"px")}}}]),e}(a.MDCFoundation);e.a=l},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={TILES_SELECTOR:".mdc-grid-list__tiles",TILE_SELECTOR:".mdc-grid-tile"}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"MDCIconToggle",function(){return f});var a=n(1),s=n(63),u=n(3);n.d(e,"MDCIconToggleFoundation",function(){return s.a});var c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},d=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(o)));return s.ripple_=s.initRipple_(),s}return o(e,t),d(e,null,[{key:"attachTo",value:function(t){return new e(t)}}]),d(e,[{key:"initRipple_",value:function(){var t=this,e=c(u.MDCRipple.createAdapter(this),{isUnbounded:function(){return!0},isSurfaceActive:function(){return t.foundation_.isKeyboardActivated()},computeBoundingRect:function(){var e=t.root_.getBoundingClientRect(),n=e.left;return{left:n,top:e.top,width:48,height:48,right:n+48,bottom:n+48}}}),n=new u.MDCRippleFoundation(e);return new u.MDCRipple(this.root_,n)}},{key:"destroy",value:function(){this.ripple_.destroy(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"getDefaultFoundation",value:function(){var t=this;return new s.a({addClass:function(e){return t.iconEl_.classList.add(e)},removeClass:function(e){return t.iconEl_.classList.remove(e)},registerInteractionHandler:function(e,n){return t.root_.addEventListener(e,n)},deregisterInteractionHandler:function(e,n){return t.root_.removeEventListener(e,n)},setText:function(e){return t.iconEl_.textContent=e},getTabIndex:function(){return t.root_.tabIndex},setTabIndex:function(e){return t.root_.tabIndex=e},getAttr:function(e,n){return t.root_.getAttribute(e,n)},setAttr:function(e,n){return t.root_.setAttribute(e,n)},rmAttr:function(e){return t.root_.removeAttribute(e)},notifyChange:function(e){return t.emit(s.a.strings.CHANGE_EVENT,e)}})}},{key:"initialSyncWithDOM",value:function(){this.on="true"===this.root_.getAttribute(s.a.strings.ARIA_PRESSED),this.disabled="true"===this.root_.getAttribute(s.a.strings.ARIA_DISABLED)}},{key:"refreshToggleData",value:function(){this.foundation_.refreshToggleData()}},{key:"iconEl_",get:function(){var t=this.root_.dataset.iconInnerSelector;return t?this.root_.querySelector(t):this.root_}},{key:"ripple",get:function(){return this.ripple_}},{key:"on",get:function(){return this.foundation_.isOn()},set:function(t){this.foundation_.toggle(t)}},{key:"disabled",get:function(){return this.foundation_.isDisabled()},set:function(t){this.foundation_.setDisabled(t)}}]),e}(a.a)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){return"Space"===t.key||32===t.keyCode}var s=n(0),u=(n(64),n(65)),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),d=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,c(e.defaultAdapter,t)));return n.on_=!1,n.disabled_=!1,n.savedTabIndex_=-1,n.toggleOnData_=null,n.toggleOffData_=null,n.clickHandler_=function(){return n.toggleFromEvt_()},n.isHandlingKeydown_=!1,n.keydownHandler_=function(t){if(a(t))return n.isHandlingKeydown_=!0,t.preventDefault()},n.keyupHandler_=function(t){a(t)&&(n.isHandlingKeydown_=!1,n.toggleFromEvt_())},n}return o(e,t),l(e,null,[{key:"cssClasses",get:function(){return u.a}},{key:"strings",get:function(){return u.b}},{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},setText:function(){},getTabIndex:function(){return 0},setTabIndex:function(){},getAttr:function(){return""},setAttr:function(){},rmAttr:function(){},notifyChange:function(){}}}}]),l(e,[{key:"init",value:function(){this.refreshToggleData(),this.savedTabIndex_=this.adapter_.getTabIndex(),this.adapter_.registerInteractionHandler("click",this.clickHandler_),this.adapter_.registerInteractionHandler("keydown",this.keydownHandler_),this.adapter_.registerInteractionHandler("keyup",this.keyupHandler_)}},{key:"refreshToggleData",value:function(){var t=e.strings,n=t.DATA_TOGGLE_ON,r=t.DATA_TOGGLE_OFF;this.toggleOnData_=this.parseJsonDataAttr_(n),this.toggleOffData_=this.parseJsonDataAttr_(r)}},{key:"destroy",value:function(){this.adapter_.deregisterInteractionHandler("click",this.clickHandler_),this.adapter_.deregisterInteractionHandler("keydown",this.keydownHandler_),this.adapter_.deregisterInteractionHandler("keyup",this.keyupHandler_)}},{key:"toggleFromEvt_",value:function(){this.toggle();var t=this.on_;this.adapter_.notifyChange({isOn:t})}},{key:"isOn",value:function(){return this.on_}},{key:"toggle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.on_;this.on_=t;var n=e.strings,r=n.ARIA_LABEL,i=n.ARIA_PRESSED;this.on_?this.adapter_.setAttr(i,"true"):this.adapter_.setAttr(i,"false");var o=this.on_?this.toggleOffData_:this.toggleOnData_,a=o.cssClass;a&&this.adapter_.removeClass(a);var s=this.on_?this.toggleOnData_:this.toggleOffData_,u=s.content,c=s.label,l=s.cssClass;l&&this.adapter_.addClass(l),u&&this.adapter_.setText(u),c&&this.adapter_.setAttr(r,c)}},{key:"parseJsonDataAttr_",value:function(t){var e=this.adapter_.getAttr(t);return e?JSON.parse(e):{}}},{key:"isDisabled",value:function(){return this.disabled_}},{key:"setDisabled",value:function(t){this.disabled_=t;var n=e.cssClasses.DISABLED,r=e.strings.ARIA_DISABLED;this.disabled_?(this.savedTabIndex_=this.adapter_.getTabIndex(),this.adapter_.setTabIndex(-1),this.adapter_.setAttr(r,"true"),this.adapter_.addClass(n)):(this.adapter_.setTabIndex(this.savedTabIndex_),this.adapter_.rmAttr(r),this.adapter_.removeClass(n))}},{key:"isKeyboardActivated",value:function(){return this.isHandlingKeydown_}}]),e}(s.a),f=function t(){r(this,t)};f.prototype.label,f.prototype.content,f.prototype.cssClass,e.a=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();!function(){function t(){r(this,t)}i(t,[{key:"addClass",value:function(t){}},{key:"removeClass",value:function(t){}},{key:"registerInteractionHandler",value:function(t,e){}},{key:"deregisterInteractionHandler",value:function(t,e){}},{key:"setText",value:function(t){}},{key:"getTabIndex",value:function(){}},{key:"setTabIndex",value:function(t){}},{key:"getAttr",value:function(t){}},{key:"setAttr",value:function(t,e){}},{key:"rmAttr",value:function(t){}},{key:"notifyChange",value:function(t){}}])}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i});var r={ROOT:"mdc-icon-toggle",DISABLED:"mdc-icon-toggle--disabled"},i={DATA_TOGGLE_ON:"data-toggle-on",DATA_TOGGLE_OFF:"data-toggle-off",ARIA_PRESSED:"aria-pressed",ARIA_DISABLED:"aria-disabled",ARIA_LABEL:"aria-label",CHANGE_EVENT:"MDCIconToggle:change"}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"MDCLinearProgress",function(){return c});var a=n(2),s=n(67);n.d(e,"MDCLinearProgressFoundation",function(){return s.a});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"open",value:function(){this.foundation_.open()}},{key:"close",value:function(){this.foundation_.close()}},{key:"getDefaultFoundation",value:function(){var t=this;return new s.a({addClass:function(e){return t.root_.classList.add(e)},getPrimaryBar:function(){return t.root_.querySelector(s.a.strings.PRIMARY_BAR_SELECTOR)},getBuffer:function(){return t.root_.querySelector(s.a.strings.BUFFER_SELECTOR)},hasClass:function(e){return t.root_.classList.contains(e)},removeClass:function(e){return t.root_.classList.remove(e)},setStyle:function(t,e,n){return t.style[e]=n}})}},{key:"determinate",set:function(t){this.foundation_.setDeterminate(t)}},{key:"progress",set:function(t){this.foundation_.setProgress(t)}},{key:"buffer",set:function(t){this.foundation_.setBuffer(t)}},{key:"reverse",set:function(t){this.foundation_.setReverse(t)}}],[{key:"attachTo",value:function(t){return new e(t)}}]),e}(a.MDCComponent)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(2),s=n(5),u=n(68),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),d=function(t){function e(t){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,c(e.defaultAdapter,t)))}return o(e,t),l(e,null,[{key:"cssClasses",get:function(){return u.a}},{key:"strings",get:function(){return u.b}},{key:"defaultAdapter",get:function(){return{addClass:function(){},getPrimaryBar:function(){},getBuffer:function(){},hasClass:function(){return!1},removeClass:function(){},setStyle:function(){}}}}]),l(e,[{key:"init",value:function(){this.determinate_=!this.adapter_.hasClass(u.a.INDETERMINATE_CLASS),this.reverse_=this.adapter_.hasClass(u.a.REVERSED_CLASS),this.progress_=0}},{key:"setDeterminate",value:function(t){this.determinate_=t,this.determinate_?(this.adapter_.removeClass(u.a.INDETERMINATE_CLASS),this.setScale_(this.adapter_.getPrimaryBar(),this.progress_)):(this.adapter_.addClass(u.a.INDETERMINATE_CLASS),this.setScale_(this.adapter_.getPrimaryBar(),1),this.setScale_(this.adapter_.getBuffer(),1))}},{key:"setProgress",value:function(t){this.progress_=t,this.determinate_&&this.setScale_(this.adapter_.getPrimaryBar(),t)}},{key:"setBuffer",value:function(t){this.determinate_&&this.setScale_(this.adapter_.getBuffer(),t)}},{key:"setReverse",value:function(t){this.reverse_=t,this.reverse_?this.adapter_.addClass(u.a.REVERSED_CLASS):this.adapter_.removeClass(u.a.REVERSED_CLASS)}},{key:"open",value:function(){this.adapter_.removeClass(u.a.CLOSED_CLASS)}},{key:"close",value:function(){this.adapter_.addClass(u.a.CLOSED_CLASS)}},{key:"setScale_",value:function(t,e){var n=this,r="scaleX("+e+")";s.c.forEach(function(e){n.adapter_.setStyle(t,e,r)})}}]),e}(a.MDCFoundation);e.a=d},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i});var r={CLOSED_CLASS:"mdc-linear-progress--closed",INDETERMINATE_CLASS:"mdc-linear-progress--indeterminate",REVERSED_CLASS:"mdc-linear-progress--reversed"},i={PRIMARY_BAR_SELECTOR:".mdc-linear-progress__primary-bar",BUFFER_SELECTOR:".mdc-linear-progress__buffer"}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"d",function(){return d});var a=n(1),s=n(16),u=n(70),c=n(17);n.d(e,"e",function(){return u.b}),n.d(e,"a",function(){return u.a}),n.d(e,"b",function(){return c.a}),n.d(e,"c",function(){return c.b});var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),d=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(o)));return s.previousFocus_,s}return o(e,t),l(e,[{key:"show",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.focusIndex,n=void 0===e?null:e;this.foundation_.open({focusIndex:n})}},{key:"hide",value:function(){this.foundation_.close()}},{key:"setAnchorCorner",value:function(t){this.foundation_.setAnchorCorner(t)}},{key:"setAnchorMargin",value:function(t){this.foundation_.setAnchorMargin(t)}},{key:"getDefaultFoundation",value:function(){var t=this;return new u.b({addClass:function(e){return t.root_.classList.add(e)},removeClass:function(e){return t.root_.classList.remove(e)},hasClass:function(e){return t.root_.classList.contains(e)},hasNecessaryDom:function(){return Boolean(t.itemsContainer_)},getAttributeForEventTarget:function(t,e){return t.getAttribute(e)},eventTargetHasClass:function(t,e){return t.classList.contains(e)},getInnerDimensions:function(){var e=t.itemsContainer_;return{width:e.offsetWidth,height:e.offsetHeight}},hasAnchor:function(){return t.root_.parentElement&&t.root_.parentElement.classList.contains("mdc-menu-anchor")},getAnchorDimensions:function(){return t.root_.parentElement.getBoundingClientRect()},getWindowDimensions:function(){return{width:window.innerWidth,height:window.innerHeight}},getNumberOfItems:function(){return t.items.length},registerInteractionHandler:function(e,n){return t.root_.addEventListener(e,n)},deregisterInteractionHandler:function(e,n){return t.root_.removeEventListener(e,n)},registerBodyClickHandler:function(t){return document.body.addEventListener("click",t)},deregisterBodyClickHandler:function(t){return document.body.removeEventListener("click",t)},getIndexForEventTarget:function(e){return t.items.indexOf(e)},notifySelected:function(e){return t.emit(u.b.strings.SELECTED_EVENT,{index:e.index,item:t.items[e.index]})},notifyCancel:function(){return t.emit(u.b.strings.CANCEL_EVENT,{})},saveFocus:function(){t.previousFocus_=document.activeElement},restoreFocus:function(){t.previousFocus_&&t.previousFocus_.focus()},isFocused:function(){return document.activeElement===t.root_},focus:function(){return t.root_.focus()},getFocusedItemIndex:function(){return t.items.indexOf(document.activeElement)},focusItemAtIndex:function(e){return t.items[e].focus()},isRtl:function(){return"rtl"===getComputedStyle(t.root_).getPropertyValue("direction")},setTransformOrigin:function(e){t.root_.style[Object(s.getTransformPropertyName)(window)+"-origin"]=e},setPosition:function(e){t.root_.style.left="left"in e?e.left:null,t.root_.style.right="right"in e?e.right:null,t.root_.style.top="top"in e?e.top:null,t.root_.style.bottom="bottom"in e?e.bottom:null},setMaxHeight:function(e){t.root_.style.maxHeight=e}})}},{key:"open",get:function(){return this.foundation_.isOpen()},set:function(t){t?this.foundation_.open():this.foundation_.close()}},{key:"itemsContainer_",get:function(){return this.root_.querySelector(u.b.strings.ITEMS_SELECTOR)}},{key:"items",get:function(){var t=this.itemsContainer_;return[].slice.call(t.querySelectorAll(".mdc-list-item[role]"))}}],[{key:"attachTo",value:function(t){return new e(t)}}]),e}(a.a)},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"b",function(){return f}),n.d(e,"a",function(){return d});var s=n(0),u=(n(71),n(17)),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),d=void 0,f=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,c(e.defaultAdapter,t)));return n.clickHandler_=function(t){return n.handlePossibleSelected_(t)},n.keydownHandler_=function(t){return n.handleKeyboardDown_(t)},n.keyupHandler_=function(t){return n.handleKeyboardUp_(t)},n.documentClickHandler_=function(t){return n.handleDocumentClick_(t)},n.isOpen_=!1,n.openAnimationEndTimerId_=0,n.closeAnimationEndTimerId_=0,n.selectedTriggerTimerId_=0,n.animationRequestId_=0,n.dimensions_,n.itemHeight_,n.anchorCorner_=u.a.TOP_START,n.anchorMargin_={top:0,right:0,bottom:0,left:0},n.measures_=null,n}return a(e,t),l(e,null,[{key:"cssClasses",get:function(){return u.c}},{key:"strings",get:function(){return u.e}},{key:"numbers",get:function(){return u.d}},{key:"Corner",get:function(){return u.a}},{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},hasNecessaryDom:function(){return!1},getAttributeForEventTarget:function(){},eventTargetHasClass:function(){},getInnerDimensions:function(){return{}},hasAnchor:function(){return!1},getAnchorDimensions:function(){return{}},getWindowDimensions:function(){return{}},getNumberOfItems:function(){return 0},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},registerBodyClickHandler:function(){},deregisterBodyClickHandler:function(){},getIndexForEventTarget:function(){return 0},notifySelected:function(){},notifyCancel:function(){},saveFocus:function(){},restoreFocus:function(){},isFocused:function(){return!1},focus:function(){},getFocusedItemIndex:function(){return-1},focusItemAtIndex:function(){},isRtl:function(){return!1},setTransformOrigin:function(){},setPosition:function(){},setMaxHeight:function(){}}}}]),l(e,[{key:"init",value:function(){var t=e.cssClasses,n=t.ROOT,r=t.OPEN;if(!this.adapter_.hasClass(n))throw new Error(n+" class required in root element.");if(!this.adapter_.hasNecessaryDom())throw new Error("Required DOM nodes missing in "+n+" component.");this.adapter_.hasClass(r)&&(this.isOpen_=!0),this.adapter_.registerInteractionHandler("click",this.clickHandler_),this.adapter_.registerInteractionHandler("keyup",this.keyupHandler_),this.adapter_.registerInteractionHandler("keydown",this.keydownHandler_)}},{key:"destroy",value:function(){clearTimeout(this.selectedTriggerTimerId_),clearTimeout(this.openAnimationEndTimerId_),clearTimeout(this.closeAnimationEndTimerId_),cancelAnimationFrame(this.animationRequestId_),this.adapter_.deregisterInteractionHandler("click",this.clickHandler_),this.adapter_.deregisterInteractionHandler("keyup",this.keyupHandler_),this.adapter_.deregisterInteractionHandler("keydown",this.keydownHandler_),this.adapter_.deregisterBodyClickHandler(this.documentClickHandler_)}},{key:"setAnchorCorner",value:function(t){this.anchorCorner_=t}},{key:"setAnchorMargin",value:function(t){this.anchorMargin_.top="number"==typeof t.top?t.top:0,this.anchorMargin_.right="number"==typeof t.right?t.right:0,this.anchorMargin_.bottom="number"==typeof t.bottom?t.bottom:0,this.anchorMargin_.left="number"==typeof t.left?t.left:0}},{key:"focusOnOpen_",value:function(t){null===t?(this.adapter_.focus(),this.adapter_.isFocused()||this.adapter_.focusItemAtIndex(0)):this.adapter_.focusItemAtIndex(t)}},{key:"handleDocumentClick_",value:function(t){for(var e=t.target;e&&e!==document.documentElement;){if(this.adapter_.eventTargetHasClass(e,u.c.LIST_ITEM))return;e=e.parentNode}this.adapter_.notifyCancel(),this.close(t)}},{key:"handleKeyboardDown_",value:function(t){if(t.altKey||t.ctrlKey||t.metaKey)return!0;var e=t.keyCode,n=t.key,r=t.shiftKey,i="Tab"===n||9===e,o="ArrowUp"===n||38===e,a="ArrowDown"===n||40===e,s="Space"===n||32===e,u=this.adapter_.getFocusedItemIndex(),c=this.adapter_.getNumberOfItems()-1;return r&&i&&0===u?(this.adapter_.focusItemAtIndex(c),t.preventDefault(),!1):!r&&i&&u===c?(this.adapter_.focusItemAtIndex(0),t.preventDefault(),!1):((o||a||s)&&t.preventDefault(),o?0===u||this.adapter_.isFocused()?this.adapter_.focusItemAtIndex(c):this.adapter_.focusItemAtIndex(u-1):a&&(u===c||this.adapter_.isFocused()?this.adapter_.focusItemAtIndex(0):this.adapter_.focusItemAtIndex(u+1)),!0)}},{key:"handleKeyboardUp_",value:function(t){if(t.altKey||t.ctrlKey||t.metaKey)return!0;var e=t.keyCode,n=t.key,r="Enter"===n||13===e,i="Space"===n||32===e,o="Escape"===n||27===e;return(r||i)&&this.handlePossibleSelected_(t),o&&(this.adapter_.notifyCancel(),this.close()),!0}},{key:"handlePossibleSelected_",value:function(t){var e=this;if("true"!==this.adapter_.getAttributeForEventTarget(t.target,u.e.ARIA_DISABLED_ATTR)){var n=this.adapter_.getIndexForEventTarget(t.target);n<0||this.selectedTriggerTimerId_||(this.selectedTriggerTimerId_=setTimeout(function(){e.selectedTriggerTimerId_=0,e.close(),e.adapter_.notifySelected({index:n})},u.d.SELECTED_TRIGGER_DELAY))}}},{key:"getAutoLayoutMeasurements_",value:function(){var t=this.adapter_.getAnchorDimensions(),e=this.adapter_.getWindowDimensions();return{viewport:e,viewportDistance:{top:t.top,right:e.width-t.right,left:t.left,bottom:e.height-t.bottom},anchorHeight:t.height,anchorWidth:t.width,menuHeight:this.dimensions_.height,menuWidth:this.dimensions_.width}}},{key:"getOriginCorner_",value:function(){var t=u.a.TOP_LEFT,e=this.measures_,n=e.viewportDistance,r=e.anchorHeight,i=e.anchorWidth,o=e.menuHeight,a=e.menuWidth,s=Boolean(this.anchorCorner_&u.b.BOTTOM),c=s?n.top+r+this.anchorMargin_.bottom:n.top+this.anchorMargin_.top,l=s?n.bottom-this.anchorMargin_.bottom:n.bottom+r-this.anchorMargin_.top,d=o-c,f=o-l;f>0&&d<f&&(t|=u.b.BOTTOM);var _=this.adapter_.isRtl(),p=Boolean(this.anchorCorner_&u.b.FLIP_RTL),h=Boolean(this.anchorCorner_&u.b.RIGHT),y=h&&!_||!h&&p&&_,v=y?n.left+i+this.anchorMargin_.right:n.left+this.anchorMargin_.left,b=y?n.right-this.anchorMargin_.right:n.right+i-this.anchorMargin_.left,g=a-v,m=a-b;return(g<0&&y&&_||h&&!y&&g<0||m>0&&g<m)&&(t|=u.b.RIGHT),t}},{key:"getHorizontalOriginOffset_",value:function(t){var e=this.measures_.anchorWidth,n=Boolean(t&u.b.RIGHT),r=Boolean(this.anchorCorner_&u.b.RIGHT),i=0;if(n){i=r?e-this.anchorMargin_.left:this.anchorMargin_.right}else{i=r?e-this.anchorMargin_.right:this.anchorMargin_.left}return i}},{key:"getVerticalOriginOffset_",value:function(t){var n=this.measures_,r=n.viewport,i=n.viewportDistance,o=n.anchorHeight,a=n.menuHeight,s=Boolean(t&u.b.BOTTOM),c=e.numbers.MARGIN_TO_EDGE,l=Boolean(this.anchorCorner_&u.b.BOTTOM),d=!l,f=0;return s?(f=l?o-this.anchorMargin_.top:-this.anchorMargin_.bottom,d&&a>i.top+o&&(f=-(Math.min(a,r.height-c)-(i.top+o)))):(f=l?o+this.anchorMargin_.bottom:this.anchorMargin_.top,d&&a>i.bottom+o&&(f=-(Math.min(a,r.height-c)-(i.bottom+o)))),f}},{key:"getMenuMaxHeight_",value:function(t){var e=0,n=this.measures_.viewportDistance,r=Boolean(t&u.b.BOTTOM);return this.anchorCorner_&u.b.BOTTOM&&(e=r?n.top+this.anchorMargin_.top:n.bottom-this.anchorMargin_.bottom),e}},{key:"autoPosition_",value:function(){var t;if(this.adapter_.hasAnchor()){this.measures_=this.getAutoLayoutMeasurements_();var e=this.getOriginCorner_(),n=this.getMenuMaxHeight_(e),i=e&u.b.BOTTOM?"bottom":"top",o=e&u.b.RIGHT?"right":"left",a=this.getHorizontalOriginOffset_(e),s=this.getVerticalOriginOffset_(e),c=(t={},r(t,o,a?a+"px":"0"),r(t,i,s?s+"px":"0"),t),l=this.measures_,d=l.anchorWidth,f=l.menuHeight;if(d/l.menuWidth>u.d.ANCHOR_TO_MENU_WIDTH_RATIO&&(o="center"),!(this.anchorCorner_&u.b.BOTTOM)&&Math.abs(s/f)>u.d.OFFSET_TO_MENU_HEIGHT_RATIO){var _=100*Math.abs(s/f),p=e&u.b.BOTTOM?100-_:_;i=Math.round(100*p)/100+"%"}this.adapter_.setTransformOrigin(o+" "+i),this.adapter_.setPosition(c),this.adapter_.setMaxHeight(n?n+"px":""),this.measures_=null}}},{key:"open",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.focusIndex,i=void 0===r?null:r;this.adapter_.saveFocus(),this.adapter_.addClass(e.cssClasses.ANIMATING_OPEN),this.animationRequestId_=requestAnimationFrame(function(){t.dimensions_=t.adapter_.getInnerDimensions(),t.autoPosition_(),t.adapter_.addClass(e.cssClasses.OPEN),t.focusOnOpen_(i),t.adapter_.registerBodyClickHandler(t.documentClickHandler_),t.openAnimationEndTimerId_=setTimeout(function(){t.openAnimationEndTimerId_=0,t.adapter_.removeClass(e.cssClasses.ANIMATING_OPEN)},u.d.TRANSITION_OPEN_DURATION)}),this.isOpen_=!0}},{key:"close",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!!n&&"true"===this.adapter_.getAttributeForEventTarget(n.target,u.e.ARIA_DISABLED_ATTR)||(this.adapter_.deregisterBodyClickHandler(this.documentClickHandler_),this.adapter_.addClass(e.cssClasses.ANIMATING_CLOSED),requestAnimationFrame(function(){t.adapter_.removeClass(e.cssClasses.OPEN),t.closeAnimationEndTimerId_=setTimeout(function(){t.closeAnimationEndTimerId_=0,t.adapter_.removeClass(e.cssClasses.ANIMATING_CLOSED)},u.d.TRANSITION_CLOSE_DURATION)}),this.isOpen_=!1,this.adapter_.restoreFocus())}},{key:"isOpen",value:function(){return this.isOpen_}}]),e}(s.a)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();!function(){function t(){r(this,t)}i(t,[{key:"addClass",value:function(t){}},{key:"removeClass",value:function(t){}},{key:"hasClass",value:function(t){}},{key:"hasNecessaryDom",value:function(){}},{key:"getAttributeForEventTarget",value:function(t,e){}},{key:"eventTargetHasClass",value:function(t,e){}},{key:"getInnerDimensions",value:function(){}},{key:"hasAnchor",value:function(){}},{key:"getAnchorDimensions",value:function(){}},{key:"getWindowDimensions",value:function(){}},{key:"getNumberOfItems",value:function(){}},{key:"registerInteractionHandler",value:function(t,e){}},{key:"deregisterInteractionHandler",value:function(t,e){}},{key:"registerBodyClickHandler",value:function(t){}},{key:"deregisterBodyClickHandler",value:function(t){}},{key:"getIndexForEventTarget",value:function(t){}},{key:"notifySelected",value:function(t){}},{key:"notifyCancel",value:function(){}},{key:"saveFocus",value:function(){}},{key:"restoreFocus",value:function(){}},{key:"isFocused",value:function(){}},{key:"focus",value:function(){}},{key:"getFocusedItemIndex",value:function(){}},{key:"focusItemAtIndex",value:function(t){}},{key:"isRtl",value:function(){}},{key:"setTransformOrigin",value:function(t){}},{key:"setPosition",value:function(t){}},{key:"setMaxHeight",value:function(t){}}])}()},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"MDCRadio",function(){return f});var a=n(1),s=(n(4),n(73)),u=n(3);n.d(e,"MDCRadioFoundation",function(){return s.a});var c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},d=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(o)));return s.ripple_=s.initRipple_(),s}return o(e,t),d(e,[{key:"checked",get:function(){return this.foundation_.isChecked()},set:function(t){this.foundation_.setChecked(t)}},{key:"disabled",get:function(){return this.foundation_.isDisabled()},set:function(t){this.foundation_.setDisabled(t)}},{key:"value",get:function(){return this.foundation_.getValue()},set:function(t){this.foundation_.setValue(t)}},{key:"ripple",get:function(){return this.ripple_}}],[{key:"attachTo",value:function(t){return new e(t)}}]),d(e,[{key:"initRipple_",value:function(){var t=this,e=c(u.MDCRipple.createAdapter(this),{isUnbounded:function(){return!0},isSurfaceActive:function(){return!1},registerInteractionHandler:function(e,n){return t.nativeControl_.addEventListener(e,n)},deregisterInteractionHandler:function(e,n){return t.nativeControl_.removeEventListener(e,n)},computeBoundingRect:function(){var e=t.root_.getBoundingClientRect(),n=e.left,r=e.top;return{top:r,left:n,right:n+40,bottom:r+40,width:40,height:40}}}),n=new u.MDCRippleFoundation(e);return new u.MDCRipple(this.root_,n)}},{key:"destroy",value:function(){this.ripple_.destroy(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"getDefaultFoundation",value:function(){var t=this;return new s.a({addClass:function(e){return t.root_.classList.add(e)},removeClass:function(e){return t.root_.classList.remove(e)},getNativeControl:function(){return t.root_.querySelector(s.a.strings.NATIVE_CONTROL_SELECTOR)}})}},{key:"nativeControl_",get:function(){var t=s.a.strings.NATIVE_CONTROL_SELECTOR;return this.root_.querySelector(t)}}]),e}(a.a)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n(4),n(74),n(75)),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"isChecked",value:function(){return this.getNativeControl_().checked}},{key:"setChecked",value:function(t){this.getNativeControl_().checked=t}},{key:"isDisabled",value:function(){return this.getNativeControl_().disabled}},{key:"setDisabled",value:function(t){var n=e.cssClasses.DISABLED;this.getNativeControl_().disabled=t,t?this.adapter_.addClass(n):this.adapter_.removeClass(n)}},{key:"getValue",value:function(){return this.getNativeControl_().value}},{key:"setValue",value:function(t){this.getNativeControl_().value=t}},{key:"getNativeControl_",value:function(){return this.adapter_.getNativeControl()||{checked:!1,disabled:!1,value:null}}}],[{key:"cssClasses",get:function(){return s.a}},{key:"strings",get:function(){return s.b}},{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},getNativeControl:function(){}}}}]),e}(a.a);e.a=c},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=(n(4),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}());!function(){function t(){r(this,t)}i(t,[{key:"addClass",value:function(t){}},{key:"removeClass",value:function(t){}},{key:"getNativeControl",value:function(){}}])}()},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i});var r={NATIVE_CONTROL_SELECTOR:".mdc-radio__native-control"},i={ROOT:"mdc-radio",DISABLED:"mdc-radio--disabled"}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"MDCSelect",function(){return f});var a=n(2),s=n(3),u=n(9),c=n(77),l=n(18);n.d(e,"MDCSelectFoundation",function(){return c.a});var d=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),d(e,[{key:"item",value:function(t){return this.options[t]||null}},{key:"nameditem",value:function(t){for(var e,n=0,r=this.options;e=r[n];n++)if(e.id===t||e.getAttribute("name")===t)return e;return null}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t){return new u.MDCSimpleMenu(t)};this.surface_=this.root_.querySelector(l.b.SURFACE_SELECTOR),this.label_=this.root_.querySelector(l.b.LABEL_SELECTOR),this.bottomLine_=this.root_.querySelector(l.b.BOTTOM_LINE_SELECTOR),this.selectedText_=this.root_.querySelector(l.b.SELECTED_TEXT_SELECTOR),this.menuEl_=this.root_.querySelector(l.b.MENU_SELECTOR),this.menu_=t(this.menuEl_),this.ripple=new s.MDCRipple(this.surface_)}},{key:"getDefaultFoundation",value:function(){var t=this;return new c.a({addClass:function(e){return t.root_.classList.add(e)},removeClass:function(e){return t.root_.classList.remove(e)},addClassToLabel:function(e){return t.label_.classList.add(e)},removeClassFromLabel:function(e){return t.label_.classList.remove(e)},addClassToBottomLine:function(e){return t.bottomLine_.classList.add(e)},removeClassFromBottomLine:function(e){return t.bottomLine_.classList.remove(e)},setBottomLineAttr:function(e,n){return t.bottomLine_.setAttribute(e,n)},setAttr:function(e,n){return t.root_.setAttribute(e,n)},rmAttr:function(e,n){return t.root_.removeAttribute(e,n)},computeBoundingRect:function(){return t.surface_.getBoundingClientRect()},registerInteractionHandler:function(e,n){return t.surface_.addEventListener(e,n)},deregisterInteractionHandler:function(e,n){return t.surface_.removeEventListener(e,n)},focus:function(){return t.surface_.focus()},makeTabbable:function(){t.surface_.tabIndex=0},makeUntabbable:function(){t.surface_.tabIndex=-1},getComputedStyleValue:function(e){return window.getComputedStyle(t.surface_).getPropertyValue(e)},setStyle:function(e,n){return t.surface_.style.setProperty(e,n)},create2dRenderingContext:function(){return document.createElement("canvas").getContext("2d")},setMenuElStyle:function(e,n){return t.menuEl_.style.setProperty(e,n)},setMenuElAttr:function(e,n){return t.menuEl_.setAttribute(e,n)},rmMenuElAttr:function(e){return t.menuEl_.removeAttribute(e)},getMenuElOffsetHeight:function(){return t.menuEl_.offsetHeight},openMenu:function(e){return t.menu_.show({focusIndex:e})},isMenuOpen:function(){return t.menu_.open},setSelectedTextContent:function(e){t.selectedText_.textContent=e},getNumberOfOptions:function(){return t.options.length},getTextForOptionAtIndex:function(e){return t.options[e].textContent},getValueForOptionAtIndex:function(e){return t.options[e].id||t.options[e].textContent},setAttrForOptionAtIndex:function(e,n,r){return t.options[e].setAttribute(n,r)},rmAttrForOptionAtIndex:function(e,n){return t.options[e].removeAttribute(n)},getOffsetTopForOptionAtIndex:function(e){return t.options[e].offsetTop},registerMenuInteractionHandler:function(e,n){return t.menu_.listen(e,n)},deregisterMenuInteractionHandler:function(e,n){return t.menu_.unlisten(e,n)},notifyChange:function(){return t.emit(c.a.strings.CHANGE_EVENT,t)},getWindowInnerHeight:function(){return window.innerHeight},addBodyClass:function(t){return document.body.classList.add(t)},removeBodyClass:function(t){return document.body.classList.remove(t)}})}},{key:"initialSyncWithDOM",value:function(){var t=this.selectedOptions[0],e=t?this.options.indexOf(t):-1;e>=0&&(this.selectedIndex=e),"true"===this.root_.getAttribute("aria-disabled")&&(this.disabled=!0)}},{key:"value",get:function(){return this.foundation_.getValue()}},{key:"options",get:function(){return this.menu_.items}},{key:"selectedOptions",get:function(){return this.root_.querySelectorAll("[aria-selected]")}},{key:"selectedIndex",get:function(){return this.foundation_.getSelectedIndex()},set:function(t){this.foundation_.setSelectedIndex(t)}},{key:"disabled",get:function(){return this.foundation_.isDisabled()},set:function(t){this.foundation_.setDisabled(t)}}],[{key:"attachTo",value:function(t){return new e(t)}}]),e}(a.MDCComponent)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(2),s=n(18),u=n(9),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),d=[{key:"ArrowUp",keyCode:38,forType:"keydown"},{key:"ArrowDown",keyCode:40,forType:"keydown"},{key:"Space",keyCode:32,forType:"keyup"}],f=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,c(e.defaultAdapter,t)));return n.ctx_=null,n.selectedIndex_=-1,n.disabled_=!1,n.isFocused_=!1,n.animationRequestId_=0,n.displayHandler_=function(t){t.preventDefault(),n.adapter_.isMenuOpen()||n.open_()},n.displayViaKeyboardHandler_=function(t){return n.handleDisplayViaKeyboard_(t)},n.selectionHandler_=function(t){var e=t.detail,r=e.index;r!==n.selectedIndex_&&(n.setSelectedIndex(r),n.adapter_.notifyChange()),n.close_()},n.cancelHandler_=function(){n.close_(),-1===n.selectedIndex_&&n.adapter_.removeClassFromLabel(s.a.LABEL_FLOAT_ABOVE)},n}return o(e,t),l(e,null,[{key:"cssClasses",get:function(){return s.a}},{key:"strings",get:function(){return s.b}},{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},addClassToLabel:function(){},removeClassFromLabel:function(){},addClassToBottomLine:function(){},removeClassFromBottomLine:function(){},setBottomLineAttr:function(){},addBodyClass:function(){},removeBodyClass:function(){},setAttr:function(){},rmAttr:function(){},computeBoundingRect:function(){return{left:0,top:0}},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},focus:function(){},makeTabbable:function(){},makeUntabbable:function(){},getComputedStyleValue:function(){return""},setStyle:function(){},create2dRenderingContext:function(){return{font:"",measureText:function(){return{width:0}}}},setMenuElStyle:function(){},setMenuElAttr:function(){},rmMenuElAttr:function(){},getMenuElOffsetHeight:function(){return 0},openMenu:function(){},isMenuOpen:function(){return!1},setSelectedTextContent:function(){},getNumberOfOptions:function(){return 0},getTextForOptionAtIndex:function(){return""},getValueForOptionAtIndex:function(){return""},setAttrForOptionAtIndex:function(){},rmAttrForOptionAtIndex:function(){},getOffsetTopForOptionAtIndex:function(){return 0},registerMenuInteractionHandler:function(){},deregisterMenuInteractionHandler:function(){},notifyChange:function(){},getWindowInnerHeight:function(){return 0}}}}]),l(e,[{key:"init",value:function(){this.ctx_=this.adapter_.create2dRenderingContext(),this.adapter_.registerInteractionHandler("click",this.displayHandler_),this.adapter_.registerInteractionHandler("keydown",this.displayViaKeyboardHandler_),this.adapter_.registerInteractionHandler("keyup",this.displayViaKeyboardHandler_),this.adapter_.registerMenuInteractionHandler(u.MDCSimpleMenuFoundation.strings.SELECTED_EVENT,this.selectionHandler_),this.adapter_.registerMenuInteractionHandler(u.MDCSimpleMenuFoundation.strings.CANCEL_EVENT,this.cancelHandler_),this.resize()}},{key:"destroy",value:function(){this.ctx_=null,cancelAnimationFrame(this.animationRequestId_),this.adapter_.deregisterInteractionHandler("click",this.displayHandler_),this.adapter_.deregisterInteractionHandler("keydown",this.displayViaKeyboardHandler_),this.adapter_.deregisterInteractionHandler("keyup",this.displayViaKeyboardHandler_),this.adapter_.deregisterMenuInteractionHandler(u.MDCSimpleMenuFoundation.strings.SELECTED_EVENT,this.selectionHandler_),this.adapter_.deregisterMenuInteractionHandler(u.MDCSimpleMenuFoundation.strings.CANCEL_EVENT,this.cancelHandler_)}},{key:"getValue",value:function(){return this.selectedIndex_>=0?this.adapter_.getValueForOptionAtIndex(this.selectedIndex_):""}},{key:"getSelectedIndex",value:function(){return this.selectedIndex_}},{key:"setSelectedIndex",value:function(t){this.selectedIndex_>=0&&this.adapter_.rmAttrForOptionAtIndex(this.selectedIndex_,"aria-selected"),this.selectedIndex_=t>=0&&t<this.adapter_.getNumberOfOptions()?t:-1;var e="";this.selectedIndex_>=0&&(e=this.adapter_.getTextForOptionAtIndex(this.selectedIndex_).trim(),this.adapter_.setAttrForOptionAtIndex(this.selectedIndex_,"aria-selected","true")),this.adapter_.setSelectedTextContent(e)}},{key:"isDisabled",value:function(){return this.disabled_}},{key:"setDisabled",value:function(t){var n=e.cssClasses.DISABLED;this.disabled_=t,this.disabled_?(this.adapter_.addClass(n),this.adapter_.setAttr("aria-disabled","true"),this.adapter_.makeUntabbable()):(this.adapter_.removeClass(n),this.adapter_.rmAttr("aria-disabled"),this.adapter_.makeTabbable())}},{key:"resize",value:function(){var t=this.adapter_.getComputedStyleValue("font"),e=parseFloat(this.adapter_.getComputedStyleValue("letter-spacing"));if(t)this.ctx_.font=t;else{var n=this.adapter_.getComputedStyleValue("font-family").split(",")[0],r=this.adapter_.getComputedStyleValue("font-size");this.ctx_.font=r+" "+n}for(var i=0,o=0,a=this.adapter_.getNumberOfOptions();o<a;o++){var s=parseInt(this.adapter_.getComputedStyleValue("padding-right"),10),u=parseInt(this.adapter_.getComputedStyleValue("padding-left"),10),c=s+u,l=this.adapter_.getTextForOptionAtIndex(o).trim(),d=this.ctx_.measureText(l),f=d.width,_=e*l.length;i=Math.max(i,Math.ceil(f+_+c))}this.adapter_.setStyle("width",i+"px")}},{key:"open_",value:function(){var t=this;this.disableScroll_();var n=e.cssClasses.OPEN,r=this.selectedIndex_<0?0:this.selectedIndex_;this.setMenuStylesForOpenAtIndex_(r),this.adapter_.addClassToLabel(s.a.LABEL_FLOAT_ABOVE),this.adapter_.addClassToBottomLine(s.a.BOTTOM_LINE_ACTIVE),this.adapter_.addClass(n),this.animationRequestId_=requestAnimationFrame(function(){t.adapter_.openMenu(r),t.isFocused_=!0})}},{key:"setMenuStylesForOpenAtIndex_",value:function(t){var e=this.adapter_.getWindowInnerHeight(),n=this.adapter_.computeBoundingRect(),r=n.left,i=n.top;this.adapter_.setMenuElAttr("aria-hidden","true"),this.adapter_.setMenuElStyle("display","block");var o=this.adapter_.getMenuElOffsetHeight(),a=this.adapter_.getOffsetTopForOptionAtIndex(t);this.adapter_.setMenuElStyle("display",""),this.adapter_.rmMenuElAttr("aria-hidden");var s=i-a,u=s<0,c=s+o>e;u?s=0:c&&(s=Math.max(0,e-o)),this.adapter_.setMenuElStyle("left",r+"px"),this.adapter_.setMenuElStyle("top",s+"px"),this.adapter_.setMenuElStyle("transform-origin","center "+a+"px")}},{key:"close_",value:function(){var t=e.cssClasses.OPEN;this.adapter_.removeClass(t),this.adapter_.removeClassFromBottomLine(s.a.BOTTOM_LINE_ACTIVE),this.adapter_.focus(),this.enableScroll_()}},{key:"handleDisplayViaKeyboard_",value:function(t){if(2===t.eventPhase){"keydown"===t.type&&("Space"===t.key||32===t.keyCode)&&t.preventDefault();d.some(function(e){var n=e.key,r=e.keyCode,i=e.forType;return t.type===i&&(t.key===n||t.keyCode===r)})&&this.displayHandler_(t)}}},{key:"disableScroll_",value:function(){this.adapter_.addBodyClass(s.a.SCROLL_LOCK)}},{key:"enableScroll_",value:function(){this.adapter_.removeBodyClass(s.a.SCROLL_LOCK)}}]),e}(a.MDCFoundation);e.a=f},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"MDCSlider",function(){return l});var a=n(1),s=n(19),u=(n(20),n(79));n.d(e,"MDCSliderFoundation",function(){return u.a});var c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(o)));return s.thumbContainer_,s.track_,s.pinValueMarker_,s.trackMarkerContainer_,s}return o(e,t),c(e,null,[{key:"attachTo",value:function(t){return new e(t)}}]),c(e,[{key:"initialize",value:function(){this.thumbContainer_=this.root_.querySelector(s.c.THUMB_CONTAINER_SELECTOR),this.track_=this.root_.querySelector(s.c.TRACK_SELECTOR),this.pinValueMarker_=this.root_.querySelector(s.c.PIN_VALUE_MARKER_SELECTOR),this.trackMarkerContainer_=this.root_.querySelector(s.c.TRACK_MARKER_CONTAINER_SELECTOR)}},{key:"getDefaultFoundation",value:function(){var t=this;return new u.a({hasClass:function(e){return t.root_.classList.contains(e)},addClass:function(e){return t.root_.classList.add(e)},removeClass:function(e){return t.root_.classList.remove(e)},getAttribute:function(e){return t.root_.getAttribute(e)},setAttribute:function(e,n){return t.root_.setAttribute(e,n)},removeAttribute:function(e){return t.root_.removeAttribute(e)},computeBoundingRect:function(){return t.root_.getBoundingClientRect()},getTabIndex:function(){return t.root_.tabIndex},registerInteractionHandler:function(e,n){t.root_.addEventListener(e,n)},deregisterInteractionHandler:function(e,n){t.root_.removeEventListener(e,n)},registerThumbContainerInteractionHandler:function(e,n){t.thumbContainer_.addEventListener(e,n)},deregisterThumbContainerInteractionHandler:function(e,n){t.thumbContainer_.removeEventListener(e,n)},registerBodyInteractionHandler:function(t,e){document.body.addEventListener(t,e)},deregisterBodyInteractionHandler:function(t,e){document.body.removeEventListener(t,e)},registerResizeHandler:function(t){window.addEventListener("resize",t)},deregisterResizeHandler:function(t){window.removeEventListener("resize",t)},notifyInput:function(){t.emit(s.c.INPUT_EVENT,t)},notifyChange:function(){t.emit(s.c.CHANGE_EVENT,t)},setThumbContainerStyleProperty:function(e,n){t.thumbContainer_.style.setProperty(e,n)},setTrackStyleProperty:function(e,n){t.track_.style.setProperty(e,n)},setMarkerValue:function(e){t.pinValueMarker_.innerText=e},appendTrackMarkers:function(e){for(var n=document.createDocumentFragment(),r=0;r<e;r++){var i=document.createElement("div");i.classList.add("mdc-slider__track-marker"),n.appendChild(i)}t.trackMarkerContainer_.appendChild(n)},removeTrackMarkers:function(){for(;t.trackMarkerContainer_.firstChild;)t.trackMarkerContainer_.removeChild(t.trackMarkerContainer_.firstChild)},setLastTrackMarkersStyleProperty:function(e,n){t.root_.querySelector(s.c.LAST_TRACK_MARKER_SELECTOR).style.setProperty(e,n)},isRTL:function(){return"rtl"===getComputedStyle(t.root_).direction}})}},{key:"initialSyncWithDOM",value:function(){var t=parseFloat(this.root_.getAttribute(s.c.ARIA_VALUENOW));this.min=parseFloat(this.root_.getAttribute(s.c.ARIA_VALUEMIN))||this.min,this.max=parseFloat(this.root_.getAttribute(s.c.ARIA_VALUEMAX))||this.max,this.step=parseFloat(this.root_.getAttribute(s.c.STEP_DATA_ATTR))||this.step,this.value=t||this.value,this.disabled=this.root_.hasAttribute(s.c.ARIA_DISABLED)&&"false"!==this.root_.getAttribute(s.c.ARIA_DISABLED),this.foundation_.setupTrackMarker()}},{key:"layout",value:function(){this.foundation_.layout()}},{key:"stepUp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.step||1;this.value+=t}},{key:"stepDown",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.step||1;this.value-=t}},{key:"value",get:function(){return this.foundation_.getValue()},set:function(t){this.foundation_.setValue(t)}},{key:"min",get:function(){return this.foundation_.getMin()},set:function(t){this.foundation_.setMin(t)}},{key:"max",get:function(){return this.foundation_.getMax()},set:function(t){this.foundation_.setMax(t)}},{key:"step",get:function(){return this.foundation_.getStep()},set:function(t){this.foundation_.setStep(t)}},{key:"disabled",get:function(){return this.foundation_.isDisabled()},set:function(t){this.foundation_.setDisabled(t)}}]),e}(a.a)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(19),s=(n(20),n(5)),u=n(0),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),d={ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",ARROW_DOWN:"ArrowDown",HOME:"Home",END:"End",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown"},f=["mouseup","pointerup","touchend"],_=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,c(e.defaultAdapter,t)));return n.rect_=null,n.savedTabIndex_=NaN,n.active_=!1,n.inTransit_=!1,n.isDiscrete_=!1,n.hasTrackMarker_=!1,n.handlingThumbTargetEvt_=!1,n.min_=0,n.max_=100,n.step_=0,n.value_=0,n.disabled_=!1,n.preventFocusState_=!1,n.updateUIFrame_=0,n.thumbContainerPointerHandler_=function(){n.handlingThumbTargetEvt_=!0},n.mousedownHandler_=n.createDownHandler_("mousemove"),n.pointerdownHandler_=n.createDownHandler_("pointermove"),n.touchstartHandler_=n.createDownHandler_("touchmove",function(t){return t.targetTouches[0].pageX}),n.keydownHandler_=function(t){return n.handleKeydown_(t)},n.focusHandler_=function(){return n.handleFocus_()},n.blurHandler_=function(){return n.handleBlur_()},n.resizeHandler_=function(){return n.layout()},n}return o(e,t),l(e,null,[{key:"cssClasses",get:function(){return a.a}},{key:"strings",get:function(){return a.c}},{key:"numbers",get:function(){return a.b}},{key:"defaultAdapter",get:function(){return{hasClass:function(){return!1},addClass:function(){},removeClass:function(){},getAttribute:function(){return null},setAttribute:function(){},removeAttribute:function(){},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},getTabIndex:function(){return 0},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},registerThumbContainerInteractionHandler:function(){},deregisterThumbContainerInteractionHandler:function(){},registerBodyInteractionHandler:function(){},deregisterBodyInteractionHandler:function(){},registerResizeHandler:function(){},deregisterResizeHandler:function(){},notifyInput:function(){},notifyChange:function(){},setThumbContainerStyleProperty:function(){},setTrackStyleProperty:function(){},setMarkerValue:function(){},appendTrackMarkers:function(){},removeTrackMarkers:function(){},setLastTrackMarkersStyleProperty:function(){},isRTL:function(){return!1}}}}]),l(e,[{key:"init",value:function(){var t=this;this.isDiscrete_=this.adapter_.hasClass(a.a.IS_DISCRETE),this.hasTrackMarker_=this.adapter_.hasClass(a.a.HAS_TRACK_MARKER),this.adapter_.registerInteractionHandler("mousedown",this.mousedownHandler_),this.adapter_.registerInteractionHandler("pointerdown",this.pointerdownHandler_),this.adapter_.registerInteractionHandler("touchstart",this.touchstartHandler_),this.adapter_.registerInteractionHandler("keydown",this.keydownHandler_),this.adapter_.registerInteractionHandler("focus",this.focusHandler_),this.adapter_.registerInteractionHandler("blur",this.blurHandler_),["mousedown","pointerdown","touchstart"].forEach(function(e){t.adapter_.registerThumbContainerInteractionHandler(e,t.thumbContainerPointerHandler_)}),this.adapter_.registerResizeHandler(this.resizeHandler_),this.layout(),this.isDiscrete_&&0==this.getStep()&&(this.step_=1)}},{key:"destroy",value:function(){var t=this;this.adapter_.deregisterInteractionHandler("mousedown",this.mousedownHandler_),this.adapter_.deregisterInteractionHandler("pointerdown",this.pointerdownHandler_),this.adapter_.deregisterInteractionHandler("touchstart",this.touchstartHandler_),this.adapter_.deregisterInteractionHandler("keydown",this.keydownHandler_),this.adapter_.deregisterInteractionHandler("focus",this.focusHandler_),this.adapter_.deregisterInteractionHandler("blur",this.blurHandler_),["mousedown","pointerdown","touchstart"].forEach(function(e){t.adapter_.deregisterThumbContainerInteractionHandler(e,t.thumbContainerPointerHandler_)}),this.adapter_.deregisterResizeHandler(this.resizeHandler_)}},{key:"setupTrackMarker",value:function(){if(this.isDiscrete_&&this.hasTrackMarker_&&0!=this.getStep()){var t=this.getMin(),e=this.getMax(),n=this.getStep(),r=(e-t)/n,i=Math.ceil(r)!==r;if(i&&(r=Math.ceil(r)),this.adapter_.removeTrackMarkers(),this.adapter_.appendTrackMarkers(r),i){var o=(e-r*n)/n+1,a=Object(s.b)(window,"flex");this.adapter_.setLastTrackMarkersStyleProperty(a,String(o))}}}},{key:"layout",value:function(){this.rect_=this.adapter_.computeBoundingRect(),this.updateUIForCurrentValue_()}},{key:"getValue",value:function(){return this.value_}},{key:"setValue",value:function(t){this.setValue_(t,!1)}},{key:"getMax",value:function(){return this.max_}},{key:"setMax",value:function(t){if(t<this.min_)throw new Error("Cannot set max to be less than the slider's minimum value");this.max_=t,this.setValue_(this.value_,!1,!0),this.adapter_.setAttribute(a.c.ARIA_VALUEMAX,String(this.max_)),this.setupTrackMarker()}},{key:"getMin",value:function(){return this.min_}},{key:"setMin",value:function(t){if(t>this.max_)throw new Error("Cannot set min to be greater than the slider's maximum value");this.min_=t,this.setValue_(this.value_,!1,!0),this.adapter_.setAttribute(a.c.ARIA_VALUEMIN,String(this.min_)),this.setupTrackMarker()}},{key:"getStep",value:function(){return this.step_}},{key:"setStep",value:function(t){if(t<0)throw new Error("Step cannot be set to a negative number");this.isDiscrete_&&("number"!=typeof t||t<1)&&(t=1),this.step_=t,this.setValue_(this.value_,!1,!0),this.setupTrackMarker()}},{key:"isDisabled",value:function(){return this.disabled_}},{key:"setDisabled",value:function(t){this.disabled_=t,this.toggleClass_(a.a.DISABLED,this.disabled_),this.disabled_?(this.savedTabIndex_=this.adapter_.getTabIndex(),this.adapter_.setAttribute(a.c.ARIA_DISABLED,"true"),this.adapter_.removeAttribute("tabindex")):(this.adapter_.removeAttribute(a.c.ARIA_DISABLED),isNaN(this.savedTabIndex_)||this.adapter_.setAttribute("tabindex",String(this.savedTabIndex_)))}},{key:"createDownHandler_",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t.pageX},r=function(t){t.preventDefault(),e.setValueFromEvt_(t,n)},i=function n(){e.setActive_(!1),e.adapter_.deregisterBodyInteractionHandler(t,r),f.forEach(function(t){return e.adapter_.deregisterBodyInteractionHandler(t,n)}),e.adapter_.notifyChange()};return function(o){e.disabled_||(e.preventFocusState_=!0,e.setInTransit_(!e.handlingThumbTargetEvt_),e.handlingThumbTargetEvt_=!1,e.setActive_(!0),e.adapter_.registerBodyInteractionHandler(t,r),f.forEach(function(t){return e.adapter_.registerBodyInteractionHandler(t,i)}),e.setValueFromEvt_(o,n))}}},{key:"setValueFromEvt_",value:function(t,e){var n=e(t),r=this.computeValueFromPageX_(n);this.setValue_(r,!0)}},{key:"computeValueFromPageX_",value:function(t){var e=this.max_,n=this.min_,r=t-this.rect_.left,i=r/this.rect_.width;return this.adapter_.isRTL()&&(i=1-i),n+i*(e-n)}},{key:"handleKeydown_",value:function(t){var e=this.getKeyId_(t),n=this.getValueForKeyId_(e);isNaN(n)||(t.preventDefault(),this.adapter_.addClass(a.a.FOCUS),this.setValue_(n,!0),this.adapter_.notifyChange())}},{key:"getKeyId_",value:function(t){return t.key===d.ARROW_LEFT||37===t.keyCode?d.ARROW_LEFT:t.key===d.ARROW_RIGHT||39===t.keyCode?d.ARROW_RIGHT:t.key===d.ARROW_UP||38===t.keyCode?d.ARROW_UP:t.key===d.ARROW_DOWN||40===t.keyCode?d.ARROW_DOWN:t.key===d.HOME||36===t.keyCode?d.HOME:t.key===d.END||35===t.keyCode?d.END:t.key===d.PAGE_UP||33===t.keyCode?d.PAGE_UP:t.key===d.PAGE_DOWN||34===t.keyCode?d.PAGE_DOWN:""}},{key:"getValueForKeyId_",value:function(t){var e=this.max_,n=this.min_,r=this.step_,i=r||(e-n)/100;switch(this.adapter_.isRTL()&&(t===d.ARROW_LEFT||t===d.ARROW_RIGHT)&&(i=-i),t){case d.ARROW_LEFT:case d.ARROW_DOWN:return this.value_-i;case d.ARROW_RIGHT:case d.ARROW_UP:return this.value_+i;case d.HOME:return this.min_;case d.END:return this.max_;case d.PAGE_UP:return this.value_+i*a.b.PAGE_FACTOR;case d.PAGE_DOWN:return this.value_-i*a.b.PAGE_FACTOR;default:return NaN}}},{key:"handleFocus_",value:function(){this.preventFocusState_||this.adapter_.addClass(a.a.FOCUS)}},{key:"handleBlur_",value:function(){this.preventFocusState_=!1,this.adapter_.removeClass(a.a.FOCUS)}},{key:"setValue_",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t!==this.value_||n){var r=this.min_,i=this.max_,o=t===r||t===i;this.step_&&!o&&(t=this.quantize_(t)),t<r?t=r:t>i&&(t=i),this.value_=t,this.adapter_.setAttribute(a.c.ARIA_VALUENOW,String(this.value_)),this.updateUIForCurrentValue_(),e&&(this.adapter_.notifyInput(),this.isDiscrete_&&this.adapter_.setMarkerValue(t))}}},{key:"quantize_",value:function(t){return Math.round(t/this.step_)*this.step_}},{key:"updateUIForCurrentValue_",value:function(){var t=this,e=this.max_,n=this.min_,r=this.value_,i=(r-n)/(e-n),o=i*this.rect_.width;this.adapter_.isRTL()&&(o=this.rect_.width-o);var a=Object(s.b)(window,"transform"),u=Object(s.a)(window,"transitionend");if(this.inTransit_){var c=function e(){t.setInTransit_(!1),t.adapter_.deregisterThumbContainerInteractionHandler(u,e)};this.adapter_.registerThumbContainerInteractionHandler(u,c)}this.updateUIFrame_=requestAnimationFrame(function(){t.adapter_.setThumbContainerStyleProperty(a,"translateX("+o+"px) translateX(-50%)"),t.adapter_.setTrackStyleProperty(a,"scaleX("+i+")")})}},{key:"setActive_",value:function(t){this.active_=t,this.toggleClass_(a.a.ACTIVE,this.active_)}},{key:"setInTransit_",value:function(t){this.inTransit_=t,this.toggleClass_(a.a.IN_TRANSIT,this.inTransit_)}},{key:"toggleClass_",value:function(t,e){e?this.adapter_.addClass(t):this.adapter_.removeClass(t)}}]),e}(u.a);e.a=_},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"MDCSnackbar",function(){return l});var a=n(2),s=n(81),u=n(5);n.d(e,"MDCSnackbarFoundation",function(){return s.a});var c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),c(e,[{key:"show",value:function(t){this.foundation_.show(t)}},{key:"getDefaultFoundation",value:function(){var t=this,e=s.a.strings,n=e.TEXT_SELECTOR,r=e.ACTION_BUTTON_SELECTOR,i=function(){return t.root_.querySelector(n)},o=function(){return t.root_.querySelector(r)};return new s.a({addClass:function(e){return t.root_.classList.add(e)},removeClass:function(e){return t.root_.classList.remove(e)},setAriaHidden:function(){return t.root_.setAttribute("aria-hidden","true")},unsetAriaHidden:function(){return t.root_.removeAttribute("aria-hidden")},setActionAriaHidden:function(){return o().setAttribute("aria-hidden","true")},unsetActionAriaHidden:function(){return o().removeAttribute("aria-hidden")},setActionText:function(t){o().textContent=t},setMessageText:function(t){i().textContent=t},setFocus:function(){return o().focus()},visibilityIsHidden:function(){return document.hidden},registerCapturedBlurHandler:function(t){return o().addEventListener("blur",t,!0)},deregisterCapturedBlurHandler:function(t){return o().removeEventListener("blur",t,!0)},registerVisibilityChangeHandler:function(t){return document.addEventListener("visibilitychange",t)},deregisterVisibilityChangeHandler:function(t){return document.removeEventListener("visibilitychange",t)},registerCapturedInteractionHandler:function(t,e){return document.body.addEventListener(t,e,!0)},deregisterCapturedInteractionHandler:function(t,e){return document.body.removeEventListener(t,e,!0)},registerActionClickHandler:function(t){return o().addEventListener("click",t)},deregisterActionClickHandler:function(t){return o().removeEventListener("click",t)},registerTransitionEndHandler:function(e){return t.root_.addEventListener(Object(u.a)(window,"transitionend"),e)},deregisterTransitionEndHandler:function(e){return t.root_.removeEventListener(Object(u.a)(window,"transitionend"),e)},notifyShow:function(){return t.emit(s.a.strings.SHOW_EVENT)},notifyHide:function(){return t.emit(s.a.strings.HIDE_EVENT)}})}},{key:"dismissesOnAction",get:function(){return this.foundation_.dismissesOnAction()},set:function(t){this.foundation_.setDismissOnAction(t)}}],[{key:"attachTo",value:function(t){return new e(t)}}]),e}(a.MDCComponent)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(2),s=n(82),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u(e.defaultAdapter,t)));return n.active_=!1,n.actionWasClicked_=!1,n.dismissOnAction_=!0,n.firstFocus_=!0,n.pointerDownRecognized_=!1,n.snackbarHasFocus_=!1,n.snackbarData_=null,n.queue_=[],n.actionClickHandler_=function(){n.actionWasClicked_=!0,n.invokeAction_()},n.visibilitychangeHandler_=function(){clearTimeout(n.timeoutId_),n.snackbarHasFocus_=!0,n.adapter_.visibilityIsHidden()||setTimeout(n.cleanup_.bind(n),n.snackbarData_.timeout||s.b.MESSAGE_TIMEOUT)},n.interactionHandler_=function(t){"touchstart"!=t.type&&"mousedown"!=t.type||(n.pointerDownRecognized_=!0),n.handlePossibleTabKeyboardFocus_(t),"focus"==t.type&&(n.pointerDownRecognized_=!1)},n.blurHandler_=function(){clearTimeout(n.timeoutId_),n.snackbarHasFocus_=!1,n.timeoutId_=setTimeout(n.cleanup_.bind(n),n.snackbarData_.timeout||s.b.MESSAGE_TIMEOUT)},n}return o(e,t),c(e,[{key:"active",get:function(){return this.active_}}],[{key:"cssClasses",get:function(){return s.a}},{key:"strings",get:function(){return s.c}},{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},setAriaHidden:function(){},unsetAriaHidden:function(){},setActionAriaHidden:function(){},unsetActionAriaHidden:function(){},setActionText:function(){},setMessageText:function(){},setFocus:function(){},visibilityIsHidden:function(){return!1},registerCapturedBlurHandler:function(){},deregisterCapturedBlurHandler:function(){},registerVisibilityChangeHandler:function(){},deregisterVisibilityChangeHandler:function(){},registerCapturedInteractionHandler:function(){},deregisterCapturedInteractionHandler:function(){},registerActionClickHandler:function(){},deregisterActionClickHandler:function(){},registerTransitionEndHandler:function(){},deregisterTransitionEndHandler:function(){},notifyShow:function(){},notifyHide:function(){}}}}]),c(e,[{key:"init",value:function(){this.adapter_.registerActionClickHandler(this.actionClickHandler_),this.adapter_.setAriaHidden(),this.adapter_.setActionAriaHidden()}},{key:"destroy",value:function(){var t=this;this.adapter_.deregisterActionClickHandler(this.actionClickHandler_),this.adapter_.deregisterCapturedBlurHandler(this.blurHandler_),this.adapter_.deregisterVisibilityChangeHandler(this.visibilitychangeHandler_),["touchstart","mousedown","focus"].forEach(function(e){t.adapter_.deregisterCapturedInteractionHandler(e,t.interactionHandler_)})}},{key:"dismissesOnAction",value:function(){return this.dismissOnAction_}},{key:"setDismissOnAction",value:function(t){this.dismissOnAction_=!!t}},{key:"show",value:function(t){var e=this;if(!t)throw new Error("Please provide a data object with at least a message to display.");if(!t.message)throw new Error("Please provide a message to be displayed.");if(t.actionHandler&&!t.actionText)throw new Error("Please provide action text with the handler.");if(this.active)return void this.queue_.push(t);clearTimeout(this.timeoutId_),this.snackbarData_=t,this.firstFocus_=!0,this.adapter_.registerVisibilityChangeHandler(this.visibilitychangeHandler_),this.adapter_.registerCapturedBlurHandler(this.blurHandler_),["touchstart","mousedown","focus"].forEach(function(t){e.adapter_.registerCapturedInteractionHandler(t,e.interactionHandler_)});var n=s.a.ACTIVE,r=s.a.MULTILINE,i=s.a.ACTION_ON_BOTTOM;this.adapter_.setMessageText(this.snackbarData_.message),this.snackbarData_.multiline&&(this.adapter_.addClass(r),this.snackbarData_.actionOnBottom&&this.adapter_.addClass(i)),this.snackbarData_.actionHandler?(this.adapter_.setActionText(this.snackbarData_.actionText),this.actionHandler_=this.snackbarData_.actionHandler,this.setActionHidden_(!1)):(this.setActionHidden_(!0),this.actionHandler_=null,this.adapter_.setActionText(null)),this.active_=!0,this.adapter_.addClass(n),this.adapter_.unsetAriaHidden(),this.adapter_.notifyShow(),this.timeoutId_=setTimeout(this.cleanup_.bind(this),this.snackbarData_.timeout||s.b.MESSAGE_TIMEOUT)}},{key:"handlePossibleTabKeyboardFocus_",value:function(){this.firstFocus_&&!this.pointerDownRecognized_&&this.setFocusOnAction_(),this.firstFocus_=!1}},{key:"setFocusOnAction_",value:function(){this.adapter_.setFocus(),this.snackbarHasFocus_=!0,this.firstFocus_=!1}},{key:"invokeAction_",value:function(){try{if(!this.actionHandler_)return;this.actionHandler_()}finally{this.dismissOnAction_&&this.cleanup_()}}},{key:"cleanup_",value:function(){var t=this;if(!this.snackbarHasFocus_||this.actionWasClicked_){var e=s.a.ACTIVE,n=s.a.MULTILINE,r=s.a.ACTION_ON_BOTTOM;this.adapter_.removeClass(e);var i=function e(){clearTimeout(t.timeoutId_),t.adapter_.deregisterTransitionEndHandler(e),t.adapter_.removeClass(n),t.adapter_.removeClass(r),t.setActionHidden_(!0),t.adapter_.setAriaHidden(),t.active_=!1,t.snackbarHasFocus_=!1,t.adapter_.notifyHide(),t.showNext_()};this.adapter_.registerTransitionEndHandler(i)}}},{key:"showNext_",value:function(){this.queue_.length&&this.show(this.queue_.shift())}},{key:"setActionHidden_",value:function(t){t?this.adapter_.setActionAriaHidden():this.adapter_.unsetActionAriaHidden()}}]),e}(a.MDCFoundation);e.a=l},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"c",function(){return i}),n.d(e,"b",function(){return o});var r={ROOT:"mdc-snackbar",TEXT:"mdc-snackbar__text",ACTION_WRAPPER:"mdc-snackbar__action-wrapper",ACTION_BUTTON:"mdc-snackbar__action-button",ACTIVE:"mdc-snackbar--active",MULTILINE:"mdc-snackbar--multiline",ACTION_ON_BOTTOM:"mdc-snackbar--action-on-bottom"},i={TEXT_SELECTOR:".mdc-snackbar__text",ACTION_WRAPPER_SELECTOR:".mdc-snackbar__action-wrapper",ACTION_BUTTON_SELECTOR:".mdc-snackbar__action-button",SHOW_EVENT:"MDCSnackbar:show",HIDE_EVENT:"MDCSnackbar:hide"},o={MESSAGE_TIMEOUT:2750}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(21);n.d(e,"MDCTabFoundation",function(){return r.b}),n.d(e,"MDCTab",function(){return r.a});var i=n(23);n.d(e,"MDCTabBarFoundation",function(){return i.b}),n.d(e,"MDCTabBar",function(){return i.a});var o=n(87);n.d(e,"MDCTabBarScrollerFoundation",function(){return o.b}),n.d(e,"MDCTabBarScroller",function(){return o.a})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=n(22),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u(e.defaultAdapter,t)));return n.computedWidth_=0,n.computedLeft_=0,n.isActive_=!1,n.preventDefaultOnClick_=!1,n.clickHandler_=function(t){n.preventDefaultOnClick_&&t.preventDefault(),n.adapter_.notifySelected()},n.keydownHandler_=function(t){(t.key&&"Enter"===t.key||13===t.keyCode)&&n.adapter_.notifySelected()},n}return o(e,t),c(e,null,[{key:"cssClasses",get:function(){return s.a}},{key:"strings",get:function(){return s.b}},{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},getOffsetWidth:function(){return 0},getOffsetLeft:function(){return 0},notifySelected:function(){}}}}]),c(e,[{key:"init",value:function(){this.adapter_.registerInteractionHandler("click",this.clickHandler_),this.adapter_.registerInteractionHandler("keydown",this.keydownHandler_)}},{key:"destroy",value:function(){this.adapter_.deregisterInteractionHandler("click",this.clickHandler_),this.adapter_.deregisterInteractionHandler("keydown",this.keydownHandler_)}},{key:"getComputedWidth",value:function(){return this.computedWidth_}},{key:"getComputedLeft",value:function(){return this.computedLeft_}},{key:"isActive",value:function(){return this.isActive_}},{key:"setActive",value:function(t){this.isActive_=t,this.isActive_?this.adapter_.addClass(s.a.ACTIVE):this.adapter_.removeClass(s.a.ACTIVE)}},{key:"preventsDefaultOnClick",value:function(){return this.preventDefaultOnClick_}},{key:"setPreventDefaultOnClick",value:function(t){this.preventDefaultOnClick_=t}},{key:"measureSelf",value:function(){this.computedWidth_=this.adapter_.getOffsetWidth(),this.computedLeft_=this.adapter_.getOffsetLeft()}}]),e}(a.a);e.a=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=n(5),u=n(86),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),d=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,c(e.defaultAdapter,t)));return n.isIndicatorShown_=!1,n.computedWidth_=0,n.computedLeft_=0,n.activeTabIndex_=0,n.layoutFrame_=0,n.resizeHandler_=function(){return n.layout()},n}return o(e,t),l(e,null,[{key:"cssClasses",get:function(){return u.a}},{key:"strings",get:function(){return u.b}},{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},bindOnMDCTabSelectedEvent:function(){},unbindOnMDCTabSelectedEvent:function(){},registerResizeHandler:function(){},deregisterResizeHandler:function(){},getOffsetWidth:function(){return 0},setStyleForIndicator:function(){},getOffsetWidthForIndicator:function(){return 0},notifyChange:function(){},getNumberOfTabs:function(){return 0},isTabActiveAtIndex:function(){return!1},setTabActiveAtIndex:function(){},isDefaultPreventedOnClickForTabAtIndex:function(){return!1},setPreventDefaultOnClickForTabAtIndex:function(){},measureTabAtIndex:function(){},getComputedWidthForTabAtIndex:function(){return 0},getComputedLeftForTabAtIndex:function(){return 0}}}}]),l(e,[{key:"init",value:function(){this.adapter_.addClass(u.a.UPGRADED),this.adapter_.bindOnMDCTabSelectedEvent(),this.adapter_.registerResizeHandler(this.resizeHandler_);var t=this.findActiveTabIndex_();t>=0&&(this.activeTabIndex_=t),this.layout()}},{key:"destroy",value:function(){this.adapter_.removeClass(u.a.UPGRADED),this.adapter_.unbindOnMDCTabSelectedEvent(),this.adapter_.deregisterResizeHandler(this.resizeHandler_)}},{key:"layoutInternal_",value:function(){var t=this;this.forEachTabIndex_(function(e){return t.adapter_.measureTabAtIndex(e)}),this.computedWidth_=this.adapter_.getOffsetWidth(),this.layoutIndicator_()}},{key:"layoutIndicator_",value:function(){var t=!this.isIndicatorShown_;t&&this.adapter_.setStyleForIndicator("transition","none");var e=this.adapter_.getComputedLeftForTabAtIndex(this.activeTabIndex_),n=this.adapter_.getComputedWidthForTabAtIndex(this.activeTabIndex_)/this.adapter_.getOffsetWidth(),r="translateX("+e+"px) scale("+n+", 1)";this.adapter_.setStyleForIndicator(Object(s.b)(window,"transform"),r),t&&(this.adapter_.getOffsetWidthForIndicator(),this.adapter_.setStyleForIndicator("transition",""),this.adapter_.setStyleForIndicator("visibility","visible"),this.isIndicatorShown_=!0)}},{key:"findActiveTabIndex_",value:function(){var t=this,e=-1;return this.forEachTabIndex_(function(n){if(t.adapter_.isTabActiveAtIndex(n))return e=n,!0}),e}},{key:"forEachTabIndex_",value:function(t){for(var e=this.adapter_.getNumberOfTabs(),n=0;n<e;n++){if(t(n))break}}},{key:"layout",value:function(){var t=this;this.layoutFrame_&&cancelAnimationFrame(this.layoutFrame_),this.layoutFrame_=requestAnimationFrame(function(){t.layoutInternal_(),t.layoutFrame_=0})}},{key:"switchToTabAtIndex",value:function(t,e){var n=this;if(t!==this.activeTabIndex_){if(t<0||t>=this.adapter_.getNumberOfTabs())throw new Error("Out of bounds index specified for tab: "+t);var r=this.activeTabIndex_;this.activeTabIndex_=t,requestAnimationFrame(function(){r>=0&&n.adapter_.setTabActiveAtIndex(r,!1),n.adapter_.setTabActiveAtIndex(n.activeTabIndex_,!0),n.layoutIndicator_(),e&&n.adapter_.notifyChange({activeTabIndex:n.activeTabIndex_})})}}},{key:"getActiveTabIndex",value:function(){return this.findActiveTabIndex_()}}]),e}(a.a);e.a=d},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i});var r={UPGRADED:"mdc-tab-bar-upgraded"},i={TAB_SELECTOR:".mdc-tab",INDICATOR_SELECTOR:".mdc-tab-bar__indicator",CHANGE_EVENT:"MDCTabBar:change"}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return d});var a=n(5),s=n(1),u=n(23),c=n(88);n.d(e,"b",function(){return c.a});var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),d=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),l(e,[{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t){return new u.a(t)};this.scrollFrame_=this.root_.querySelector(c.a.strings.FRAME_SELECTOR),this.tabBarEl_=this.root_.querySelector(c.a.strings.TABS_SELECTOR),this.forwardIndicator_=this.root_.querySelector(c.a.strings.INDICATOR_FORWARD_SELECTOR),this.backIndicator_=this.root_.querySelector(c.a.strings.INDICATOR_BACK_SELECTOR),this.tabBar_=t(this.tabBarEl_)}},{key:"getDefaultFoundation",value:function(){var t=this;return new c.a({addClass:function(e){return t.root_.classList.add(e)},removeClass:function(e){return t.root_.classList.remove(e)},eventTargetHasClass:function(t,e){return t.classList.contains(e)},addClassToForwardIndicator:function(e){return t.forwardIndicator_.classList.add(e)},removeClassFromForwardIndicator:function(e){return t.forwardIndicator_.classList.remove(e)},addClassToBackIndicator:function(e){return t.backIndicator_.classList.add(e)},removeClassFromBackIndicator:function(e){return t.backIndicator_.classList.remove(e)},isRTL:function(){return"rtl"===getComputedStyle(t.root_).getPropertyValue("direction")},registerBackIndicatorClickHandler:function(e){return t.backIndicator_.addEventListener("click",e)},deregisterBackIndicatorClickHandler:function(e){return t.backIndicator_.removeEventListener("click",e)},registerForwardIndicatorClickHandler:function(e){return t.forwardIndicator_.addEventListener("click",e)},deregisterForwardIndicatorClickHandler:function(e){return t.forwardIndicator_.removeEventListener("click",e)},registerCapturedInteractionHandler:function(e,n){return t.root_.addEventListener(e,n,!0)},deregisterCapturedInteractionHandler:function(e,n){return t.root_.removeEventListener(e,n,!0)},registerWindowResizeHandler:function(t){return window.addEventListener("resize",t)},deregisterWindowResizeHandler:function(t){return window.removeEventListener("resize",t)},getNumberOfTabs:function(){return t.tabBar.tabs.length},getComputedWidthForTabAtIndex:function(e){return t.tabBar.tabs[e].computedWidth},getComputedLeftForTabAtIndex:function(e){return t.tabBar.tabs[e].computedLeft},getOffsetWidthForScrollFrame:function(){return t.scrollFrame_.offsetWidth},getScrollLeftForScrollFrame:function(){return t.scrollFrame_.scrollLeft},setScrollLeftForScrollFrame:function(e){return t.scrollFrame_.scrollLeft=e},getOffsetWidthForTabBar:function(){return t.tabBarEl_.offsetWidth},setTransformStyleForTabBar:function(e){t.tabBarEl_.style.setProperty(Object(a.b)(window,"transform"),e)},getOffsetLeftForEventTarget:function(t){return t.offsetLeft},getOffsetWidthForEventTarget:function(t){return t.offsetWidth}})}},{key:"layout",value:function(){this.foundation_.layout()}},{key:"tabBar",get:function(){return this.tabBar_}}],[{key:"attachTo",value:function(t){return new e(t)}}]),e}(s.a)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=n(89),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u(e.defaultAdapter,t)));return n.pointerDownRecognized_=!1,n.currentTranslateOffset_=0,n.focusedTarget_=null,n.layoutFrame_=0,n.scrollFrameScrollLeft_=0,n.forwardIndicatorClickHandler_=function(t){return n.scrollForward(t)},n.backIndicatorClickHandler_=function(t){return n.scrollBack(t)},n.resizeHandler_=function(){return n.layout()},n.interactionHandler_=function(t){"touchstart"!=t.type&&"mousedown"!=t.type||(n.pointerDownRecognized_=!0),n.handlePossibleTabKeyboardFocus_(t),"focus"==t.type&&(n.pointerDownRecognized_=!1)},n}return o(e,t),c(e,null,[{key:"cssClasses",get:function(){return s.a}},{key:"strings",get:function(){return s.b}},{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},eventTargetHasClass:function(){return!1},addClassToForwardIndicator:function(){},removeClassFromForwardIndicator:function(){},addClassToBackIndicator:function(){},removeClassFromBackIndicator:function(){},isRTL:function(){return!1},registerBackIndicatorClickHandler:function(){},deregisterBackIndicatorClickHandler:function(){},registerForwardIndicatorClickHandler:function(){},deregisterForwardIndicatorClickHandler:function(){},registerCapturedInteractionHandler:function(){},deregisterCapturedInteractionHandler:function(){},registerWindowResizeHandler:function(){},deregisterWindowResizeHandler:function(){},getNumberOfTabs:function(){return 0},getComputedWidthForTabAtIndex:function(){return 0},getComputedLeftForTabAtIndex:function(){return 0},getOffsetWidthForScrollFrame:function(){return 0},getScrollLeftForScrollFrame:function(){return 0},setScrollLeftForScrollFrame:function(){},getOffsetWidthForTabBar:function(){return 0},setTransformStyleForTabBar:function(){},getOffsetLeftForEventTarget:function(){return 0},getOffsetWidthForEventTarget:function(){return 0}}}}]),c(e,[{key:"init",value:function(){var t=this;this.adapter_.registerBackIndicatorClickHandler(this.backIndicatorClickHandler_),this.adapter_.registerForwardIndicatorClickHandler(this.forwardIndicatorClickHandler_),this.adapter_.registerWindowResizeHandler(this.resizeHandler_),["touchstart","mousedown","focus"].forEach(function(e){t.adapter_.registerCapturedInteractionHandler(e,t.interactionHandler_)}),this.layout()}},{key:"destroy",value:function(){var t=this;this.adapter_.deregisterBackIndicatorClickHandler(this.backIndicatorClickHandler_),this.adapter_.deregisterForwardIndicatorClickHandler(this.forwardIndicatorClickHandler_),this.adapter_.deregisterWindowResizeHandler(this.resizeHandler_),["touchstart","mousedown","focus"].forEach(function(e){t.adapter_.deregisterCapturedInteractionHandler(e,t.interactionHandler_)})}},{key:"scrollBack",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&t.preventDefault();for(var e=0,n=0,r=this.adapter_.getNumberOfTabs()-1;r>0;r--){var i=this.adapter_.getComputedLeftForTabAtIndex(r),o=this.adapter_.getOffsetWidthForTabBar()-i,a=i>this.currentTranslateOffset_;if(this.isRTL_()&&(a=o>this.currentTranslateOffset_),!a){e+=this.adapter_.getComputedWidthForTabAtIndex(r);if(e>this.adapter_.getOffsetWidthForScrollFrame()){n=this.isRTL_()?r+1:r;break}}}this.scrollToTabAtIndex(n)}},{key:"scrollForward",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&t.preventDefault();for(var e=this.adapter_.getOffsetWidthForScrollFrame()+this.currentTranslateOffset_,n=0,r=0;r<this.adapter_.getNumberOfTabs();r++){var i=this.adapter_.getComputedLeftForTabAtIndex(r)+this.adapter_.getComputedWidthForTabAtIndex(r),o=i>e;if(this.isRTL_()){var a=e-this.adapter_.getComputedWidthForTabAtIndex(r),s=this.adapter_.getComputedLeftForTabAtIndex(r)+this.adapter_.getComputedWidthForTabAtIndex(r);o=this.adapter_.getOffsetWidthForTabBar()-s>a}if(o){n=r;break}}this.scrollToTabAtIndex(n)}},{key:"layout",value:function(){var t=this;cancelAnimationFrame(this.layoutFrame_),this.scrollFrameScrollLeft_=this.adapter_.getScrollLeftForScrollFrame(),this.layoutFrame_=requestAnimationFrame(function(){return t.layout_()})}},{key:"isRTL_",value:function(){return this.adapter_.isRTL()}},{key:"handlePossibleTabKeyboardFocus_",value:function(t){if(this.adapter_.eventTargetHasClass(t.target,s.a.TAB)&&!this.pointerDownRecognized_){var e=this.isRTL_()?this.scrollFrameScrollLeft_:0;this.adapter_.setScrollLeftForScrollFrame(e),this.focusedTarget_=t.target;var n=this.adapter_.getOffsetWidthForScrollFrame(),r=this.adapter_.getOffsetWidthForTabBar(),i=this.adapter_.getOffsetLeftForEventTarget(this.focusedTarget_),o=i+this.adapter_.getOffsetWidthForEventTarget(this.focusedTarget_),a=o<=this.currentTranslateOffset_,u=o>this.currentTranslateOffset_+n;if(this.isRTL_()){var c=r-i;a=i>=r-this.currentTranslateOffset_,u=c>n+this.currentTranslateOffset_}u?this.scrollForward():a&&this.scrollBack(),this.pointerDownRecognized_=!1}}},{key:"layout_",value:function(){var t=this.adapter_.getOffsetWidthForScrollFrame();this.adapter_.getOffsetWidthForTabBar()>t||(this.currentTranslateOffset_=0),this.shiftFrame_(),this.updateIndicatorEnabledStates_()}},{key:"scrollToTabAtIndex",value:function(t){var e=this,n=this.adapter_.getComputedLeftForTabAtIndex(t),r=this.adapter_.getComputedWidthForTabAtIndex(t);this.currentTranslateOffset_=this.normalizeForRTL_(n,r),requestAnimationFrame(function(){return e.shiftFrame_()})}},{key:"normalizeForRTL_",value:function(t,e){return this.isRTL_()?this.adapter_.getOffsetWidthForTabBar()-(t+e):t}},{key:"shiftFrame_",value:function(){var t=this.isRTL_()?this.currentTranslateOffset_:-this.currentTranslateOffset_;this.adapter_.setTransformStyleForTabBar("translateX("+t+"px)"),this.updateIndicatorEnabledStates_()}},{key:"updateIndicatorEnabledStates_",value:function(){var t=s.a.INDICATOR_ENABLED;0===this.currentTranslateOffset_?this.adapter_.removeClassFromBackIndicator(t):this.adapter_.addClassToBackIndicator(t),this.adapter_.getOffsetWidthForTabBar()-this.currentTranslateOffset_>this.adapter_.getOffsetWidthForScrollFrame()?this.adapter_.addClassToForwardIndicator(t):this.adapter_.removeClassFromForwardIndicator(t)}}]),e}(a.a);e.a=l},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i});var r={INDICATOR_FORWARD:"mdc-tab-bar-scroller__indicator--forward",INDICATOR_BACK:"mdc-tab-bar-scroller__indicator--back",INDICATOR_ENABLED:"mdc-tab-bar-scroller__indicator--enabled",TAB:"mdc-tab"},i={FRAME_SELECTOR:".mdc-tab-bar-scroller__scroll-frame",TABS_SELECTOR:".mdc-tab-bar-scroller__scroll-frame__tabs",TAB_SELECTOR:".mdc-tab",INDICATOR_FORWARD_SELECTOR:".mdc-tab-bar-scroller__indicator--forward",INDICATOR_BACK_SELECTOR:".mdc-tab-bar-scroller__indicator--back"}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"MDCTextField",function(){return g});var a=n(1),s=n(3),u=n(6),c=n(24),l=(n(25),n(95)),d=n(96),f=n(97),_=n(98),p=n(99),h=n(100);n.d(e,"MDCTextFieldFoundation",function(){return l.a}),n.d(e,"MDCTextFieldBottomLine",function(){return d.a}),n.d(e,"MDCTextFieldBottomLineFoundation",function(){return d.b}),n.d(e,"MDCTextFieldHelperText",function(){return f.a}),n.d(e,"MDCTextFieldHelperTextFoundation",function(){return f.b}),n.d(e,"MDCTextFieldIcon",function(){return _.a}),n.d(e,"MDCTextFieldIconFoundation",function(){return _.b}),n.d(e,"MDCTextFieldLabel",function(){return p.a}),n.d(e,"MDCTextFieldLabelFoundation",function(){return p.b}),n.d(e,"MDCTextFieldOutline",function(){return h.a}),n.d(e,"MDCTextFieldOutlineFoundation",function(){return h.b});var y=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},v=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),b=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},g=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(o)));return s.input_,s.ripple,s.bottomLine_,s.helperText_,s.icon_,s.label_,s.outline_,s}return o(e,t),v(e,[{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t,e){return new s.MDCRipple(t,e)},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return new d.a(t)},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){return new f.a(t)},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(t){return new _.a(t)},i=this,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(t){return new p.a(t)},a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(t){return new h.a(t)};this.input_=this.root_.querySelector(c.c.INPUT_SELECTOR);var l=this.root_.querySelector(c.c.LABEL_SELECTOR);l&&(this.label_=o(l));var v=this.root_.querySelector(c.c.BOTTOM_LINE_SELECTOR);v&&(this.bottomLine_=e(v));var b=this.root_.querySelector(c.c.OUTLINE_SELECTOR);if(b&&(this.outline_=a(b)),this.input_.hasAttribute(c.c.ARIA_CONTROLS)){var g=document.getElementById(this.input_.getAttribute(c.c.ARIA_CONTROLS));g&&(this.helperText_=n(g))}var m=this.root_.querySelector(c.c.ICON_SELECTOR);if(m&&(this.icon_=r(m)),this.ripple=null,this.root_.classList.contains(c.a.BOX)||this.root_.classList.contains(c.a.OUTLINED)){var E=b?this.outline_:this,T=b||this.root_,C=Object(u.getMatchesProperty)(HTMLElement.prototype),O=y(s.MDCRipple.createAdapter(E),{isSurfaceActive:function(){return i.input_[C](":active")},registerInteractionHandler:function(t,e){return i.input_.addEventListener(t,e)},deregisterInteractionHandler:function(t,e){return i.input_.removeEventListener(t,e)}}),k=new s.MDCRippleFoundation(O);this.ripple=t(T,k)}}},{key:"destroy",value:function(){this.ripple&&this.ripple.destroy(),this.bottomLine_&&this.bottomLine_.destroy(),this.helperText_&&this.helperText_.destroy(),this.icon_&&this.icon_.destroy(),this.label_&&this.label_.destroy(),this.outline_&&this.outline_.destroy(),b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"initialSyncWithDom",value:function(){this.disabled=this.input_.disabled}},{key:"layout",value:function(){this.outline_&&this.foundation_.updateOutline(),this.ripple&&this.ripple.layout()}},{key:"getDefaultFoundation",value:function(){var t=this;return new l.a(y({addClass:function(e){return t.root_.classList.add(e)},removeClass:function(e){return t.root_.classList.remove(e)},hasClass:function(e){return t.root_.classList.contains(e)},registerTextFieldInteractionHandler:function(e,n){return t.root_.addEventListener(e,n)},deregisterTextFieldInteractionHandler:function(e,n){return t.root_.removeEventListener(e,n)},registerBottomLineEventHandler:function(e,n){t.bottomLine_&&t.bottomLine_.listen(e,n)},deregisterBottomLineEventHandler:function(e,n){t.bottomLine_&&t.bottomLine_.unlisten(e,n)},isFocused:function(){return document.activeElement===t.root_.querySelector(c.c.INPUT_SELECTOR)},isRtl:function(){return"rtl"===window.getComputedStyle(t.root_).getPropertyValue("direction")}},this.getInputAdapterMethods_()),this.getFoundationMap_())}},{key:"getInputAdapterMethods_",value:function(){var t=this;return{registerInputInteractionHandler:function(e,n){return t.input_.addEventListener(e,n)},deregisterInputInteractionHandler:function(e,n){return t.input_.removeEventListener(e,n)},getNativeInput:function(){return t.input_}}}},{key:"getFoundationMap_",value:function(){return{bottomLine:this.bottomLine_?this.bottomLine_.foundation:void 0,helperText:this.helperText_?this.helperText_.foundation:void 0,icon:this.icon_?this.icon_.foundation:void 0,label:this.label_?this.label_.foundation:void 0,outline:this.outline_?this.outline_.foundation:void 0}}},{key:"value",get:function(){return this.foundation_.getValue()},set:function(t){this.foundation_.setValue(t)}},{key:"disabled",get:function(){return this.foundation_.isDisabled()},set:function(t){this.foundation_.setDisabled(t)}},{key:"valid",get:function(){return this.foundation_.isValid()},set:function(t){this.foundation_.setValid(t)}},{key:"required",get:function(){return this.foundation_.isRequired()},set:function(t){this.foundation_.setRequired(t)}},{key:"helperTextContent",set:function(t){this.foundation_.setHelperTextContent(t)}}],[{key:"attachTo",value:function(t){return new e(t)}}]),e}(a.a)},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i});var r={ANIMATION_END_EVENT:"MDCTextFieldBottomLine:animation-end"},i={BOTTOM_LINE_ACTIVE:"mdc-text-field__bottom-line--active"}},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i});var r={ARIA_HIDDEN:"aria-hidden",ROLE:"role"},i={HELPER_TEXT_PERSISTENT:"mdc-text-field-helper-text--persistent",HELPER_TEXT_VALIDATION_MSG:"mdc-text-field-helper-text--validation-msg"}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={ICON_EVENT:"MDCTextField:icon"}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={LABEL_FLOAT_ABOVE:"mdc-text-field__label--float-above",LABEL_SHAKE:"mdc-text-field__label--shake"}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n(25),n(10)),u=(n(11),n(12),n(13),n(14),n(24)),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),d=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e);var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,c(e.defaultAdapter,t)));return o.bottomLine_=n.bottomLine,o.helperText_=n.helperText,o.icon_=n.icon,o.label_=n.label,o.outline_=n.outline,o.isFocused_=!1,o.receivedUserInput_=!1,o.useCustomValidityChecking_=!1,o.isValid_=!0,o.inputFocusHandler_=function(){return o.activateFocus()},o.inputBlurHandler_=function(){return o.deactivateFocus()},o.inputInputHandler_=function(){return o.autoCompleteFocus()},o.setPointerXOffset_=function(t){return o.setBottomLineTransformOrigin(t)},o.textFieldInteractionHandler_=function(){return o.handleTextFieldInteraction()},o.bottomLineAnimationEndHandler_=function(){return o.handleBottomLineAnimationEnd()},o}return o(e,t),l(e,null,[{key:"cssClasses",get:function(){return u.a}},{key:"strings",get:function(){return u.c}},{key:"numbers",get:function(){return u.b}},{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){},registerTextFieldInteractionHandler:function(){},deregisterTextFieldInteractionHandler:function(){},registerInputInteractionHandler:function(){},deregisterInputInteractionHandler:function(){},registerBottomLineEventHandler:function(){},deregisterBottomLineEventHandler:function(){},getNativeInput:function(){},isFocused:function(){},isRtl:function(){}}}}]),l(e,[{key:"init",value:function(){var t=this;this.adapter_.addClass(e.cssClasses.UPGRADED),this.label_&&this.getValue()&&this.label_.styleFloat(this.getValue(),this.isFocused_,this.isBadInput_()),this.adapter_.isFocused()&&this.inputFocusHandler_(),this.adapter_.registerInputInteractionHandler("focus",this.inputFocusHandler_),this.adapter_.registerInputInteractionHandler("blur",this.inputBlurHandler_),this.adapter_.registerInputInteractionHandler("input",this.inputInputHandler_),["mousedown","touchstart"].forEach(function(e){t.adapter_.registerInputInteractionHandler(e,t.setPointerXOffset_)}),["click","keydown"].forEach(function(e){t.adapter_.registerTextFieldInteractionHandler(e,t.textFieldInteractionHandler_)}),this.adapter_.registerBottomLineEventHandler(s.a.strings.ANIMATION_END_EVENT,this.bottomLineAnimationEndHandler_)}},{key:"destroy",value:function(){var t=this;this.adapter_.removeClass(e.cssClasses.UPGRADED),this.adapter_.deregisterInputInteractionHandler("focus",this.inputFocusHandler_),this.adapter_.deregisterInputInteractionHandler("blur",this.inputBlurHandler_),this.adapter_.deregisterInputInteractionHandler("input",this.inputInputHandler_),["mousedown","touchstart"].forEach(function(e){t.adapter_.deregisterInputInteractionHandler(e,t.setPointerXOffset_)}),["click","keydown"].forEach(function(e){t.adapter_.deregisterTextFieldInteractionHandler(e,t.textFieldInteractionHandler_)}),this.adapter_.deregisterBottomLineEventHandler(s.a.strings.ANIMATION_END_EVENT,this.bottomLineAnimationEndHandler_)}},{key:"handleTextFieldInteraction",value:function(){this.adapter_.getNativeInput().disabled||(this.receivedUserInput_=!0)}},{key:"updateOutline",value:function(){if(this.outline_&&this.label_){var t=this.adapter_.hasClass(u.a.DENSE),e=t?u.b.DENSE_LABEL_SCALE:u.b.LABEL_SCALE,n=this.label_.getWidth()*e,r=this.adapter_.isRtl();this.outline_.updateSvgPath(n,r)}}},{key:"activateFocus",value:function(){this.isFocused_=!0,this.styleFocused_(this.isFocused_),this.bottomLine_&&this.bottomLine_.activate(),this.outline_&&this.updateOutline(),this.label_&&(this.label_.styleShake(this.isValid(),this.isFocused_),this.label_.styleFloat(this.getValue(),this.isFocused_,this.isBadInput_())),this.helperText_&&this.helperText_.showToScreenReader()}},{key:"setBottomLineTransformOrigin",value:function(t){this.bottomLine_&&this.bottomLine_.setTransformOrigin(t)}},{key:"autoCompleteFocus",value:function(){this.receivedUserInput_||this.activateFocus()}},{key:"handleBottomLineAnimationEnd",value:function(){!this.isFocused_&&this.bottomLine_&&this.bottomLine_.deactivate()}},{key:"deactivateFocus",value:function(){this.isFocused_=!1;var t=this.getNativeInput_(),e=!t.value&&!this.isBadInput_(),n=this.isValid();this.styleValidity_(n),this.styleFocused_(this.isFocused_),this.label_&&(this.label_.styleShake(this.isValid(),this.isFocused_),this.label_.styleFloat(this.getValue(),this.isFocused_,this.isBadInput_())),e&&(this.receivedUserInput_=!1)}},{key:"getValue",value:function(){return this.getNativeInput_().value}},{key:"setValue",value:function(t){this.getNativeInput_().value=t;var e=this.isValid();this.styleValidity_(e),this.label_&&(this.label_.styleShake(e,this.isFocused_),this.label_.styleFloat(this.getValue(),this.isFocused_,this.isBadInput_()))}},{key:"isValid",value:function(){return this.useCustomValidityChecking_?this.isValid_:this.isNativeInputValid_()}},{key:"setValid",value:function(t){this.useCustomValidityChecking_=!0,this.isValid_=t,t=this.isValid(),this.styleValidity_(t),this.label_&&this.label_.styleShake(t,this.isFocused_)}},{key:"isDisabled",value:function(){return this.getNativeInput_().disabled}},{key:"setDisabled",value:function(t){this.getNativeInput_().disabled=t,this.styleDisabled_(t)}},{key:"isRequired",value:function(){return this.getNativeInput_().required}},{key:"setRequired",value:function(t){this.getNativeInput_().required=t,this.styleValidity_(this.isValid())}},{key:"setHelperTextContent",value:function(t){this.helperText_&&this.helperText_.setContent(t)}},{key:"isBadInput_",value:function(){return this.getNativeInput_().validity.badInput}},{key:"isNativeInputValid_",value:function(){return this.getNativeInput_().validity.valid}},{key:"styleValidity_",value:function(t){var n=e.cssClasses.INVALID;t?this.adapter_.removeClass(n):this.adapter_.addClass(n),this.helperText_&&this.helperText_.setValidity(t)}},{key:"styleFocused_",value:function(t){var n=e.cssClasses.FOCUSED;t?this.adapter_.addClass(n):this.adapter_.removeClass(n)}},{key:"styleDisabled_",value:function(t){var n=e.cssClasses,r=n.DISABLED,i=n.INVALID;t?(this.adapter_.addClass(r),this.adapter_.removeClass(i)):this.adapter_.removeClass(r),this.icon_&&this.icon_.setDisabled(t)}},{key:"getNativeInput_",value:function(){return this.adapter_.getNativeInput()||{value:"",disabled:!1,validity:{badInput:!1,valid:!0}}}}]),e}(a.a);e.a=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return l});var a=n(1),s=(n(26),n(10));n.d(e,"b",function(){return s.a});var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),c(e,[{key:"getDefaultFoundation",value:function(){var t=this;return new s.a(u({addClass:function(e){return t.root_.classList.add(e)},removeClass:function(e){return t.root_.classList.remove(e)},setAttr:function(e,n){return t.root_.setAttribute(e,n)},registerEventHandler:function(e,n){return t.root_.addEventListener(e,n)},deregisterEventHandler:function(e,n){return t.root_.removeEventListener(e,n)},notifyAnimationEnd:function(){t.emit(s.a.strings.ANIMATION_END_EVENT,{})}}))}},{key:"foundation",get:function(){return this.foundation_}}],[{key:"attachTo",value:function(t){return new e(t)}}]),e}(a.a)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return l});var a=n(1),s=(n(27),n(11));n.d(e,"b",function(){return s.a});var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),c(e,[{key:"getDefaultFoundation",value:function(){var t=this;return new s.a(u({addClass:function(e){return t.root_.classList.add(e)},removeClass:function(e){return t.root_.classList.remove(e)},hasClass:function(e){return t.root_.classList.contains(e)},setAttr:function(e,n){return t.root_.setAttribute(e,n)},removeAttr:function(e){return t.root_.removeAttribute(e)},setContent:function(e){t.root_.textContent=e}}))}},{key:"foundation",get:function(){return this.foundation_}}],[{key:"attachTo",value:function(t){return new e(t)}}]),e}(a.a)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return l});var a=n(1),s=(n(28),n(12));n.d(e,"b",function(){return s.a});var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),c(e,[{key:"getDefaultFoundation",value:function(){var t=this;return new s.a(u({setAttr:function(e,n){return t.root_.setAttribute(e,n)},registerInteractionHandler:function(e,n){return t.root_.addEventListener(e,n)},deregisterInteractionHandler:function(e,n){return t.root_.removeEventListener(e,n)},notifyIconAction:function(){return t.emit(s.a.strings.ICON_EVENT,{},!0)}}))}},{key:"foundation",get:function(){return this.foundation_}}],[{key:"attachTo",value:function(t){return new e(t)}}]),e}(a.a)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return l});var a=n(1),s=(n(29),n(13));n.d(e,"b",function(){return s.a});var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),c(e,[{key:"getDefaultFoundation",value:function(){var t=this;return new s.a(u({addClass:function(e){return t.root_.classList.add(e)},removeClass:function(e){return t.root_.classList.remove(e)},getWidth:function(){return t.root_.offsetWidth}}))}},{key:"foundation",get:function(){return this.foundation_}}],[{key:"attachTo",value:function(t){return new e(t)}}]),e}(a.a)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return d});var a=n(1),s=n(31),u=(n(30),n(14));n.d(e,"b",function(){return u.a});var c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),d=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),l(e,[{key:"getDefaultFoundation",value:function(){var t=this;return new u.a(c({getWidth:function(){return t.root_.offsetWidth},getHeight:function(){return t.root_.offsetHeight},setOutlinePathAttr:function(e){t.root_.querySelector(s.a.PATH_SELECTOR).setAttribute("d",e)},getIdleOutlineStyleValue:function(e){var n=t.root_.parentNode.querySelector(s.a.IDLE_OUTLINE_SELECTOR);if(n)return window.getComputedStyle(n).getPropertyValue(e)}}))}},{key:"foundation",get:function(){return this.foundation_}}],[{key:"attachTo",value:function(t){return new e(t)}}]),e}(a.a)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"MDCToolbar",function(){return l});var a=n(2),s=n(102),u=n(104);n.d(e,"MDCToolbarFoundation",function(){return s.a}),n.d(e,"util",function(){return u});var c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),c(e,[{key:"getDefaultFoundation",value:function(){var t=this;return new s.a({hasClass:function(e){return t.root_.classList.contains(e)},addClass:function(e){return t.root_.classList.add(e)},removeClass:function(e){return t.root_.classList.remove(e)},registerScrollHandler:function(t){return window.addEventListener("scroll",t,u.applyPassive())},deregisterScrollHandler:function(t){return window.removeEventListener("scroll",t,u.applyPassive())},registerResizeHandler:function(t){return window.addEventListener("resize",t)},deregisterResizeHandler:function(t){return window.removeEventListener("resize",t)},getViewportWidth:function(){return window.innerWidth},getViewportScrollY:function(){return window.pageYOffset},getOffsetHeight:function(){return t.root_.offsetHeight},getFirstRowElementOffsetHeight:function(){return t.firstRowElement_.offsetHeight},notifyChange:function(e){return t.emit(s.a.strings.CHANGE_EVENT,e)},setStyle:function(e,n){return t.root_.style.setProperty(e,n)},setStyleForTitleElement:function(e,n){return t.titleElement_.style.setProperty(e,n)},setStyleForFlexibleRowElement:function(e,n){return t.firstRowElement_.style.setProperty(e,n)},setStyleForFixedAdjustElement:function(e,n){t.fixedAdjustElement&&t.fixedAdjustElement.style.setProperty(e,n)}})}},{key:"firstRowElement_",get:function(){return this.root_.querySelector(s.a.strings.FIRST_ROW_SELECTOR)}},{key:"titleElement_",get:function(){return this.root_.querySelector(s.a.strings.TITLE_SELECTOR)}},{key:"fixedAdjustElement",set:function(t){this.fixedAdjustElement_=t,this.foundation_.updateAdjustElementStyles()},get:function(){return this.fixedAdjustElement_}}],[{key:"attachTo",value:function(t){return new e(t)}}]),e}(a.MDCComponent)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=n(103),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u(e.defaultAdapter,t)));return n.resizeHandler_=function(){return n.checkRowHeight_()},n.scrollHandler_=function(){return n.updateToolbarStyles_()},n.checkRowHeightFrame_=0,n.scrollFrame_=0,n.executedLastChange_=!1,n.calculations_={toolbarRowHeight:0,toolbarRatio:0,flexibleExpansionRatio:0,maxTranslateYRatio:0,scrollThresholdRatio:0,toolbarHeight:0,flexibleExpansionHeight:0,maxTranslateYDistance:0,scrollThreshold:0},n.fixed_=!1,n.fixedLastrow_=!1,n.hasFlexibleRow_=!1,n.useFlexDefaultBehavior_=!1,n}return o(e,t),c(e,null,[{key:"cssClasses",get:function(){return s.a}},{key:"strings",get:function(){return s.c}},{key:"numbers",get:function(){return s.b}},{key:"defaultAdapter",get:function(){return{hasClass:function(){return!1},addClass:function(){},removeClass:function(){},registerScrollHandler:function(){},deregisterScrollHandler:function(){},registerResizeHandler:function(){},deregisterResizeHandler:function(){},getViewportWidth:function(){return 0},getViewportScrollY:function(){return 0},getOffsetHeight:function(){return 0},getFirstRowElementOffsetHeight:function(){return 0},notifyChange:function(){},setStyle:function(){},setStyleForTitleElement:function(){},setStyleForFlexibleRowElement:function(){},setStyleForFixedAdjustElement:function(){}}}}]),c(e,[{key:"init",value:function(){this.fixed_=this.adapter_.hasClass(e.cssClasses.FIXED),this.fixedLastrow_=this.adapter_.hasClass(e.cssClasses.FIXED_LASTROW)&this.fixed_,this.hasFlexibleRow_=this.adapter_.hasClass(e.cssClasses.TOOLBAR_ROW_FLEXIBLE),this.hasFlexibleRow_&&(this.useFlexDefaultBehavior_=this.adapter_.hasClass(e.cssClasses.FLEXIBLE_DEFAULT_BEHAVIOR)),this.initKeyRatio_(),this.setKeyHeights_(),this.adapter_.registerResizeHandler(this.resizeHandler_),this.adapter_.registerScrollHandler(this.scrollHandler_)}},{key:"destroy",value:function(){this.adapter_.deregisterResizeHandler(this.resizeHandler_),this.adapter_.deregisterScrollHandler(this.scrollHandler_)}},{key:"updateAdjustElementStyles",value:function(){this.fixed_&&this.adapter_.setStyleForFixedAdjustElement("margin-top",this.calculations_.toolbarHeight+"px")}},{key:"getFlexibleExpansionRatio_",value:function(t){return Math.max(0,1-t/(this.calculations_.flexibleExpansionHeight+1e-4))}},{key:"checkRowHeight_",value:function(){var t=this;cancelAnimationFrame(this.checkRowHeightFrame_),this.checkRowHeightFrame_=requestAnimationFrame(function(){return t.setKeyHeights_()})}},{key:"setKeyHeights_",value:function(){var t=this.getRowHeight_();t!==this.calculations_.toolbarRowHeight&&(this.calculations_.toolbarRowHeight=t,this.calculations_.toolbarHeight=this.calculations_.toolbarRatio*this.calculations_.toolbarRowHeight,this.calculations_.flexibleExpansionHeight=this.calculations_.flexibleExpansionRatio*this.calculations_.toolbarRowHeight,this.calculations_.maxTranslateYDistance=this.calculations_.maxTranslateYRatio*this.calculations_.toolbarRowHeight,this.calculations_.scrollThreshold=this.calculations_.scrollThresholdRatio*this.calculations_.toolbarRowHeight,this.updateAdjustElementStyles(),this.updateToolbarStyles_())}},{key:"updateToolbarStyles_",value:function(){var t=this;cancelAnimationFrame(this.scrollFrame_),this.scrollFrame_=requestAnimationFrame(function(){var e=t.adapter_.getViewportScrollY(),n=t.scrolledOutOfThreshold_(e);if(!n||!t.executedLastChange_){var r=t.getFlexibleExpansionRatio_(e);t.updateToolbarFlexibleState_(r),t.fixedLastrow_&&t.updateToolbarFixedState_(e),t.hasFlexibleRow_&&t.updateFlexibleRowElementStyles_(r),t.executedLastChange_=n,t.adapter_.notifyChange({flexibleExpansionRatio:r})}})}},{key:"scrolledOutOfThreshold_",value:function(t){return t>this.calculations_.scrollThreshold}},{key:"initKeyRatio_",value:function(){var t=this.getRowHeight_(),e=this.adapter_.getFirstRowElementOffsetHeight()/t;this.calculations_.toolbarRatio=this.adapter_.getOffsetHeight()/t,this.calculations_.flexibleExpansionRatio=e-1,this.calculations_.maxTranslateYRatio=this.fixedLastrow_?this.calculations_.toolbarRatio-e:0,this.calculations_.scrollThresholdRatio=(this.fixedLastrow_?this.calculations_.toolbarRatio:e)-1}},{key:"getRowHeight_",value:function(){var t=e.numbers.TOOLBAR_MOBILE_BREAKPOINT;return this.adapter_.getViewportWidth()<t?e.numbers.TOOLBAR_ROW_MOBILE_HEIGHT:e.numbers.TOOLBAR_ROW_HEIGHT}},{key:"updateToolbarFlexibleState_",value:function(t){this.adapter_.removeClass(e.cssClasses.FLEXIBLE_MAX),this.adapter_.removeClass(e.cssClasses.FLEXIBLE_MIN),1===t?this.adapter_.addClass(e.cssClasses.FLEXIBLE_MAX):0===t&&this.adapter_.addClass(e.cssClasses.FLEXIBLE_MIN)}},{key:"updateToolbarFixedState_",value:function(t){var n=Math.max(0,Math.min(t-this.calculations_.flexibleExpansionHeight,this.calculations_.maxTranslateYDistance));this.adapter_.setStyle("transform","translateY("+-n+"px)"),n===this.calculations_.maxTranslateYDistance?this.adapter_.addClass(e.cssClasses.FIXED_AT_LAST_ROW):this.adapter_.removeClass(e.cssClasses.FIXED_AT_LAST_ROW)}},{key:"updateFlexibleRowElementStyles_",value:function(t){if(this.fixed_){var e=this.calculations_.flexibleExpansionHeight*t;this.adapter_.setStyleForFlexibleRowElement("height",e+this.calculations_.toolbarRowHeight+"px")}this.useFlexDefaultBehavior_&&this.updateElementStylesDefaultBehavior_(t)}},{key:"updateElementStylesDefaultBehavior_",value:function(t){var n=e.numbers.MAX_TITLE_SIZE,r=e.numbers.MIN_TITLE_SIZE,i=(n-r)*t+r;this.adapter_.setStyleForTitleElement("font-size",i+"rem")}}]),e}(a.a);e.a=l},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"c",function(){return i}),n.d(e,"b",function(){return o});var r={FIXED:"mdc-toolbar--fixed",FIXED_LASTROW:"mdc-toolbar--fixed-lastrow-only",FIXED_AT_LAST_ROW:"mdc-toolbar--fixed-at-last-row",TOOLBAR_ROW_FLEXIBLE:"mdc-toolbar--flexible",FLEXIBLE_DEFAULT_BEHAVIOR:"mdc-toolbar--flexible-default-behavior",FLEXIBLE_MAX:"mdc-toolbar--flexible-space-maximized",FLEXIBLE_MIN:"mdc-toolbar--flexible-space-minimized"},i={TITLE_SELECTOR:".mdc-toolbar__title",FIRST_ROW_SELECTOR:".mdc-toolbar__row:first-child",CHANGE_EVENT:"MDCToolbar:change"},o={MAX_TITLE_SIZE:2.125,MIN_TITLE_SIZE:1.25,TOOLBAR_ROW_HEIGHT:64,TOOLBAR_ROW_MOBILE_HEIGHT:56,TOOLBAR_MOBILE_BREAKPOINT:600}},function(t,e,n){"use strict";function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(void 0===i||e){var n=!1;try{t.document.addEventListener("test",null,{get passive(){n=!0}})}catch(t){}i=n}return!!i&&{passive:!0}}Object.defineProperty(e,"__esModule",{value:!0}),e.applyPassive=r;var i=void 0}])})},{}],42:[function(require,module,exports){!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(C,e){"use strict";var t=[],r=Object.getPrototypeOf,s=t.slice,g=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},x=function(e){return null!=e&&e===e.window},E=C.document,c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement("script");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[o.call(e)]||"object":typeof e}var f="3.5.1",S=function(e,t){return new S.fn.init(e,t)};function p(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:f,constructor:S,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(n){return this.pushStack(S.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,a[t]=S.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},S.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==o.call(e))&&(!(t=r(e))||"function"==typeof(n=v.call(t,"constructor")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(p(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(p(Object(e))?S.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(p(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:y}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var d=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,v,s,c,y,S="sizzle"+1*new Date,p=n.document,k=0,r=0,m=ue(),x=ue(),A=ue(),N=ue(),D=function(e,t){return e===t&&(l=!0),0},j={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",I="(?:\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",W="\\["+M+"*("+I+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+M+"*\\]",F=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",B=new RegExp(M+"+","g"),$=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),_=new RegExp("^"+M+"*,"+M+"*"),z=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp(M+"|>"),X=new RegExp(F),V=new RegExp("^"+I+"$"),G={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{H.apply(t=O.call(p.childNodes),p.childNodes),t[p.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&y(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!N[t+" "]&&(!v||!v.test(t))&&(1!==p||"object"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&(U.test(t)||z.test(t))){(f=ee.test(t)&&ye(e.parentNode)||e)===e&&d.scope||((s=e.getAttribute("id"))?s=s.replace(re,ie):e.setAttribute("id",s=S)),o=(l=h(t)).length;while(o--)l[o]=(s?"#"+s:":scope")+" "+xe(l[o]);c=l.join(",")}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){N(t,!0)}finally{s===S&&e.removeAttribute("id")}}}return g(t.replace($,"$1"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function le(e){return e[S]=!0,e}function ce(e){var t=C.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split("|"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function ge(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ve(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ye(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:p;return r!=C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),p!=C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",oe,!1):n.attachEvent&&n.attachEvent("onunload",oe)),d.scope=ce(function(e){return a.appendChild(e).appendChild(C.createElement("div")),"undefined"!=typeof e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),d.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=S,!C.getElementsByName||!C.getElementsByName(S).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){var t;a.appendChild(e).innerHTML="<a id='"+S+"'></a><select id='"+S+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+S+"-]").length||v.push("~="),(t=C.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||v.push("\\["+M+"*name"+M+"*="+M+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+S+"+*").length||v.push(".#.+[+~]"),e.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")}),ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,"*"),c.call(e,"[s!='']:x"),s.push("!=",F)}),v=v.length&&new RegExp(v.join("|")),s=s.length&&new RegExp(s.join("|")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e==C||e.ownerDocument==p&&y(p,e)?-1:t==C||t.ownerDocument==p&&y(p,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==C?-1:t==C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]==p?-1:s[r]==p?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(T(e),d.matchesSelector&&E&&!N[t+" "]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){N(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=C&&T(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&j.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(D),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=m[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&m(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(B," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(h,e,t,g,v){var y="nth"!==h.slice(0,3),m="last"!==h.slice(-4),x="of-type"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==m?"nextSibling":"previousSibling",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(y){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l="only"===h&&!u&&"nextSibling"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[k,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[k,d]),a===e))break;return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[S]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace($,"$1"));return s[S]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||"")||se.error("unsupported lang: "+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&"parentNode"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[k,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[S]||(e[S]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===k&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,v,y,e){return v&&!v[S]&&(v=Ce(v)),y&&!y[S]&&(y=Ce(y,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?y||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v){i=Te(p,u),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(y||d){if(y){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=y?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace($,"$1"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+" "];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace($," ")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,v,y,m,x,r,i=[],o=[],a=A[e+" "];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[S]?i.push(a):o.push(a);(a=A(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG("*",i),h=k+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==C||(T(o),n=!E);while(s=v[a++])if(s(o,t||C,n)){r.push(o);break}i&&(k=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&se.uniqueSort(r)}return i&&(k=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},d.sortStable=S.split("").sort(D).join("")===S,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement("fieldset"))}),ce(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||fe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||fe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);S.find=d,S.expr=d.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=d.uniqueSort,S.text=d.getText,S.isXMLDoc=d.isXML,S.contains=d.contains,S.escapeSelector=d.escape;var h=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&S(e).is(n))break;r.push(e)}return r},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=S.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function D(e,n,r){return m(n)?S.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?S.grep(e,function(e){return e===n!==r}):"string"!=typeof n?S.grep(e,function(e){return-1<i.call(n,e)!==r}):S.filter(n,e,r)}S.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<r;t++)if(S.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,i[t],n);return 1<r?S.uniqueSort(n):n},filter:function(e){return this.pushStack(D(this,e||[],!1))},not:function(e){return this.pushStack(D(this,e||[],!0))},is:function(e){return!!D(this,"string"==typeof e&&k.test(e)?S(e):e||[],!1).length}});var j,q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||j,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:q.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),N.test(r[1])&&S.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,j=S(E);var L=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){while((e=e[t])&&1!==e.nodeType);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&S(e);if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?i.call(S(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h(e,"parentNode")},parentsUntil:function(e,t,n){return h(e,"parentNode",n)},next:function(e){return O(e,"nextSibling")},prev:function(e){return O(e,"previousSibling")},nextAll:function(e){return h(e,"nextSibling")},prevAll:function(e){return h(e,"previousSibling")},nextUntil:function(e,t,n){return h(e,"nextSibling",n)},prevUntil:function(e,t,n){return h(e,"previousSibling",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(A(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},function(r,i){S.fn[r]=function(e,t){var n=S.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=S.filter(t,n)),1<this.length&&(H[r]||S.uniqueSort(n),L.test(r)&&n.reverse()),this.pushStack(n)}});var P=/[^\x20\t\r\n\f]+/g;function R(e){return e}function M(e){throw e}function I(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},S.each(e.match(P)||[],function(e,t){n[t]=!0}),n):S.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){S.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&"string"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return S.each(arguments,function(e,t){var n;while(-1<(n=S.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<S.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},S.extend({Deferred:function(e){var o=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var i=arguments;return S.Deferred(function(r){S.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,R,s),l(u,o,M,s)):(u++,t.call(e,l(u,o,R,s),l(u,o,M,s),l(u,o,R,o.notifyWith))):(a!==R&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==M&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),C.setTimeout(t))}}return S.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:R,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:R)),o[2][3].add(l(0,e,m(n)?n:M))}).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},s={};return S.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=S.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(I(e,o.done(a(t)).resolve,o.reject,!n),"pending"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)I(i[t],a(t),o.reject);return o.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&W.test(e.name)&&C.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){C.setTimeout(function(){throw e})};var F=S.Deferred();function B(){E.removeEventListener("DOMContentLoaded",B),C.removeEventListener("load",B),S.ready()}S.fn.ready=function(e){return F.then(e)["catch"](function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||F.resolveWith(E,[S])}}),S.ready.then=F.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(S.ready):(E.addEventListener("DOMContentLoaded",B),C.addEventListener("load",B));var $=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===w(n))for(s in i=!0,n)$(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(S(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},_=/^-ms-/,z=/-([a-z])/g;function U(e,t){return t.toUpperCase()}function X(e){return e.replace(_,"ms-").replace(z,U)}var V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=S.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[X(t)]=n;else for(r in t)i[X(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match(P)||[]).length;while(n--)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Y=new G,Q=new G,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,K=/[A-Z]/g;function Z(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(K,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:J.test(i)?JSON.parse(i):i)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),S.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=Q.get(o),1===o.nodeType&&!Y.get(o,"hasDataAttrs"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=X(r.slice(5)),Z(o,r,i[r]));Y.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each(function(){Q.set(this,n)}):$(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=Q.get(o,n))?t:void 0!==(t=Z(o,n))?t:void 0;this.each(function(){Q.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Y.get(e,t),n&&(!r||Array.isArray(n)?r=Y.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=S.queue(e,t),r=n.length,i=n.shift(),o=S._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){S.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y.get(e,n)||Y.access(e,n,{empty:S.Callbacks("once memory").add(function(){Y.remove(e,[t+"queue",n])})})}}),S.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?S.queue(this[0],t):void 0===n?this:this.each(function(){var e=S.queue(this,t,n);S._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=S.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=Y.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],re=E.documentElement,ie=function(e){return S.contains(e.ownerDocument,e)},oe={composed:!0};re.getRootNode&&(ie=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ie(e)&&"none"===S.css(e,"display")};function se(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return S.css(e,t,"")},u=s(),l=n&&n[3]||(S.cssNumber[t]?"":"px"),c=e.nodeType&&(S.cssNumber[t]||"px"!==l&&+u)&&te.exec(S.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)S.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,S.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ue={};function le(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=Y.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&ae(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ue[s])||(o=a.body.appendChild(a.createElement(s)),u=S.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),ue[s]=u)))):"none"!==n&&(l[c]="none",Y.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}S.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?S(this).show():S(this).hide()})}});var ce,fe,pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i;ce=E.createDocumentFragment().appendChild(E.createElement("div")),(fe=E.createElement("input")).setAttribute("type","radio"),fe.setAttribute("checked","checked"),fe.setAttribute("name","t"),ce.appendChild(fe),y.checkClone=ce.cloneNode(!0).cloneNode(!0).lastChild.checked,ce.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!ce.cloneNode(!0).lastChild.defaultValue,ce.innerHTML="<option></option>",y.option=!!ce.lastChild;var ge={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?S.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],"globalEval",!t||Y.get(t[n],"globalEval"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,y.option||(ge.optgroup=ge.option=[1,"<select multiple='multiple'>","</select>"]);var me=/<|&#?\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===w(o))S.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+S.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;S.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&-1<S.inArray(o,r))i&&i.push(o);else if(l=ie(o),a=ve(f.appendChild(o),"script"),l&&ye(a),n){c=0;while(o=a[c++])he.test(o.type||"")&&n.push(o)}return f}var be=/^key/,we=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Te=/^([^.]*)(?:\.(.+)|)/;function Ce(){return!0}function Ee(){return!1}function Se(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==("focus"===t)}function ke(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)ke(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ee;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each(function(){S.event.add(this,t,i,r,n)})}function Ae(e,i,o){o?(Y.set(e,i,!1),S.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Y.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(S.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Y.set(this,i,r),t=o(this,i),this[i](),r!==(n=Y.get(this,i))||t?Y.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n.value}else r.length&&(Y.set(this,i,{value:S.event.trigger(S.extend(r[0],S.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,i)&&S.event.add(e,i,Ce)}S.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.get(t);if(V(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(re,i),n.guid||(n.guid=S.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return"undefined"!=typeof S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(P)||[""]).length;while(l--)d=g=(s=Te.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=S.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=S.event.special[d]||{},c=S.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),S.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.hasData(e)&&Y.get(e);if(v&&(u=v.events)){l=(t=(t||"").match(P)||[""]).length;while(l--)if(d=g=(s=Te.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){f=S.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||S.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)S.event.remove(e,d+t[l],n,r,!0);S.isEmptyObject(u)&&Y.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=S.event.fix(e),l=(Y.get(this,"events")||Object.create(null))[u.type]||[],c=S.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=S.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<S(i,this).index(l):S.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Ae(t,"click",Ce),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Ae(t,"click"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,"input")&&Y.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ce:Ee,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Ee,isPropagationStopped:Ee,isImmediatePropagationStopped:Ee,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ce,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ce,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ce,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&be.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&we.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},function(e,t){S.event.special[e]={setup:function(){return Ae(this,e,Se),!1},trigger:function(){return Ae(this,e),!0},delegateType:t}}),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){S.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),S.fn.extend({on:function(e,t,n,r){return ke(this,e,t,n,r)},one:function(e,t,n,r){return ke(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ee),this.each(function(){S.event.remove(this,e,n,t)})}});var Ne=/<script|<style|<link/i,De=/checked\s*(?:[^=]|=\s*.checked.)/i,je=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function qe(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function Le(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function He(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Oe(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(Y.hasData(e)&&(s=Y.get(e).events))for(i in Y.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)S.event.add(t,i,s[i][n]);Q.hasData(e)&&(o=Q.access(e),a=S.extend({},o),Q.set(t,a))}}function Pe(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&"string"==typeof d&&!y.checkClone&&De.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),Pe(t,r,i,o)});if(f&&(t=(e=xe(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=S.map(ve(e,"script"),Le)).length;c<f;c++)u=e,c!==p&&(u=S.clone(u,!0,!0),s&&S.merge(a,ve(u,"script"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,S.map(a,He),c=0;c<s;c++)u=a[c],he.test(u.type||"")&&!Y.access(u,"globalEval")&&S.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):b(u.textContent.replace(je,""),u,l))}return n}function Re(e,t,n){for(var r,i=t?S.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(ve(r)),r.parentNode&&(n&&ie(r)&&ye(ve(r,"script")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=ie(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Oe(o[r],a[r]);else Oe(e,c);return 0<(a=ve(c,"script")).length&&ye(a,!f&&ve(e,"script")),c},cleanData:function(e){for(var t,n,r,i=S.event.special,o=0;void 0!==(n=e[o]);o++)if(V(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Re(this,e,!0)},remove:function(e){return Re(this,e)},text:function(e){return $(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Pe(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||qe(this,e).appendChild(e)})},prepend:function(){return Pe(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=qe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Pe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Pe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ne.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return Pe(this,arguments,function(e){var t=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(ve(this)),t&&t.replaceChild(e,this))},n)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){S.fn[e]=function(e){for(var t,n=[],r=S(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),S(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var Me=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Ie=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},We=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Fe=new RegExp(ne.join("|"),"i");function Be(e,t,n){var r,i,o,a,s=e.style;return(n=n||Ie(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||ie(e)||(a=S.style(e,t)),!y.pixelBoxStyles()&&Me.test(a)&&Fe.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function $e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(u).appendChild(l);var e=C.getComputedStyle(l);n="1%"!==e.top,s=12===t(e.marginLeft),l.style.right="60%",o=36===t(e.right),r=36===t(e.width),l.style.position="absolute",i=12===t(l.offsetWidth/3),re.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=E.createElement("div"),l=E.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===l.style.backgroundClip,S.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=E.createElement("table"),t=E.createElement("tr"),n=E.createElement("div"),e.style.cssText="position:absolute;left:-11111px",t.style.height="1px",n.style.height="9px",re.appendChild(e).appendChild(t).appendChild(n),r=C.getComputedStyle(t),a=3<parseInt(r.height),re.removeChild(e)),a}}))}();var _e=["Webkit","Moz","ms"],ze=E.createElement("div").style,Ue={};function Xe(e){var t=S.cssProps[e]||Ue[e];return t||(e in ze?e:Ue[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=_e.length;while(n--)if((e=_e[n]+t)in ze)return e}(e)||e)}var Ve=/^(none|table(?!-c[ea]).+)/,Ge=/^--/,Ye={position:"absolute",visibility:"hidden",display:"block"},Qe={letterSpacing:"0",fontWeight:"400"};function Je(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Ke(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=S.css(e,n+ne[a],!0,i)),r?("content"===n&&(u-=S.css(e,"padding"+ne[a],!0,i)),"margin"!==n&&(u-=S.css(e,"border"+ne[a]+"Width",!0,i))):(u+=S.css(e,"padding"+ne[a],!0,i),"padding"!==n?u+=S.css(e,"border"+ne[a]+"Width",!0,i):s+=S.css(e,"border"+ne[a]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function Ze(e,t,n){var r=Ie(e),i=(!y.boxSizingReliable()||n)&&"border-box"===S.css(e,"boxSizing",!1,r),o=i,a=Be(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Me.test(a)){if(!n)return a;a="auto"}return(!y.boxSizingReliable()&&i||!y.reliableTrDimensions()&&A(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===S.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===S.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+Ke(e,t,n||(i?"border":"content"),o,r,a)+"px"}function et(e,t,n,r,i){return new et.prototype.init(e,t,n,r,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Be(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=X(t),u=Ge.test(t),l=e.style;if(u||(t=Xe(s)),a=S.cssHooks[t]||S.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=te.exec(n))&&i[1]&&(n=se(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(S.cssNumber[s]?"":"px")),y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=X(t);return Ge.test(t)||(t=Xe(s)),(a=S.cssHooks[t]||S.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Be(e,t,r)),"normal"===i&&t in Qe&&(i=Qe[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),S.each(["height","width"],function(e,u){S.cssHooks[u]={get:function(e,t,n){if(t)return!Ve.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Ze(e,u,n):We(e,Ye,function(){return Ze(e,u,n)})},set:function(e,t,n){var r,i=Ie(e),o=!y.scrollboxSize()&&"absolute"===i.position,a=(o||n)&&"border-box"===S.css(e,"boxSizing",!1,i),s=n?Ke(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-Ke(e,u,"border",!1,i)-.5)),s&&(r=te.exec(t))&&"px"!==(r[3]||"px")&&(e.style[u]=t,t=S.css(e,u)),Je(0,t,s)}}}),S.cssHooks.marginLeft=$e(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Be(e,"marginLeft"))||e.getBoundingClientRect().left-We(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),S.each({margin:"",padding:"",border:"Width"},function(i,o){S.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+ne[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(S.cssHooks[i+o].set=Je)}),S.fn.extend({css:function(e,t){return $(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Ie(e),i=t.length;a<i;a++)o[t[a]]=S.css(e,t[a],!1,r);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,1<arguments.length)}}),((S.Tween=et).prototype={constructor:et,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?"":"px")},cur:function(){var e=et.propHooks[this.prop];return e&&e.get?e.get(this):et.propHooks._default.get(this)},run:function(e){var t,n=et.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):et.propHooks._default.set(this),this}}).init.prototype=et.prototype,(et.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[Xe(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=et.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=et.prototype.init,S.fx.step={};var tt,nt,rt,it,ot=/^(?:toggle|show|hide)$/,at=/queueHooks$/;function st(){nt&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(st):C.setTimeout(st,S.fx.interval),S.fx.tick())}function ut(){return C.setTimeout(function(){tt=void 0}),tt=Date.now()}function lt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=ne[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function ct(e,t,n){for(var r,i=(ft.tweeners[t]||[]).concat(ft.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ft(o,e,t){var n,a,r=0,i=ft.prefilters.length,s=S.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=tt||ut(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:tt||ut(),duration:t.duration,tweens:[],createTween:function(e,t){var n=S.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=X(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=S.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=ft.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return S.map(c,ct,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(ft,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=["*"]):e=e.match(P);for(var n,r=0,i=e.length;r<i;r++)n=e[r],ft.tweeners[n]=ft.tweeners[n]||[],ft.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),v=Y.get(e,"fxshow");for(r in n.queue||(null==(a=S._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,S.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],ot.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||S.style(e,r)}if((u=!S.isEmptyObject(t))||!S.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Y.get(e,"display")),"none"===(c=S.css(e,"display"))&&(l?c=l:(le([e],!0),l=e.style.display||l,c=S.css(e,"display"),le([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===S.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=Y.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&le([e],!0),p.done(function(){for(r in g||le([e]),Y.remove(e,"fxshow"),d)S.style(e,r,d[r])})),u=ct(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?ft.prefilters.unshift(e):ft.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&"object"==typeof e?S.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return S.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=S.isEmptyObject(t),o=S.speed(e,n,r),a=function(){var e=ft(this,S.extend({},t),o);(i||Y.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=S.timers,r=Y.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&at.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||S.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=Y.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=S.timers,o=n?n.length:0;for(t.finish=!0,S.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),S.each(["toggle","show","hide"],function(e,r){var i=S.fn[r];S.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(lt(r,!0),e,t,n)}}),S.each({slideDown:lt("show"),slideUp:lt("hide"),slideToggle:lt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){S.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(tt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),tt=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){nt||(nt=!0,st())},S.fx.stop=function(){nt=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(r,e){return r=S.fx&&S.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},rt=E.createElement("input"),it=E.createElement("select").appendChild(E.createElement("option")),rt.type="checkbox",y.checkOn=""!==rt.value,y.optSelected=it.selected,(rt=E.createElement("input")).value="t",rt.type="radio",y.radioValue="t"===rt.value;var pt,dt=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return $(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?pt:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=S.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(P);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),pt={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),function(e,t){var a=dt[t]||S.find.attr;dt[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=dt[o],dt[o]=r,r=null!=a(e,t,n)?o:null,dt[o]=i),r}});var ht=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;function vt(e){return(e.match(P)||[]).join(" ")}function yt(e){return e.getAttribute&&e.getAttribute("class")||""}function mt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(P)||[]}S.fn.extend({prop:function(e,t){return $(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):ht.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),y.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).addClass(t.call(this,e,yt(this)))});if((e=mt(t)).length)while(n=this[u++])if(i=yt(n),r=1===n.nodeType&&" "+vt(i)+" "){a=0;while(o=e[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=vt(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).removeClass(t.call(this,e,yt(this)))});if(!arguments.length)return this.attr("class","");if((e=mt(t)).length)while(n=this[u++])if(i=yt(n),r=1===n.nodeType&&" "+vt(i)+" "){a=0;while(o=e[a++])while(-1<r.indexOf(" "+o+" "))r=r.replace(" "+o+" "," ");i!==(s=vt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(i,t){var o=typeof i,a="string"===o||Array.isArray(i);return"boolean"==typeof t&&a?t?this.addClass(i):this.removeClass(i):m(i)?this.each(function(e){S(this).toggleClass(i.call(this,e,yt(this),t),t)}):this.each(function(){var e,t,n,r;if(a){t=0,n=S(this),r=mt(i);while(e=r[t++])n.hasClass(e)?n.removeClass(e):n.addClass(e)}else void 0!==i&&"boolean"!==o||((e=yt(this))&&Y.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===i?"":Y.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&-1<(" "+vt(yt(n))+" ").indexOf(t))return!0;return!1}});var xt=/\r/g;S.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,S(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=S.map(t,function(e){return null==e?"":e+""})),(r=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=S.valHooks[t.type]||S.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(xt,""):null==e?"":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:vt(S.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=S(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=S.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<S.inArray(S.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},y.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),y.focusin="onfocusin"in C;var bt=/^(?:focusinfocus|focusoutblur)$/,wt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=v.call(e,"type")?e.type:e,h=v.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!bt.test(d+S.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,(e=e[S.expando]?e:new S.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),c=S.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,bt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(Y.get(o,"events")||Object.create(null))[e.type]&&Y.get(o,"handle"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&V(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!V(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),S.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,wt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,wt),S.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),y.focusin||S.each({focus:"focusin",blur:"focusout"},function(n,r){var i=function(e){S.event.simulate(r,e.target,S.event.fix(e))};S.event.special[r]={setup:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r);t||e.addEventListener(n,i,!0),Y.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r)-1;t?Y.access(e,r,t):(e.removeEventListener(n,i,!0),Y.remove(e,r))}}});var Tt=C.location,Ct={guid:Date.now()},Et=/\?/;S.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||S.error("Invalid XML: "+e),t};var St=/\[\]$/,kt=/\r?\n/g,At=/^(?:submit|button|image|reset|file)$/i,Nt=/^(?:input|select|textarea|keygen)/i;function Dt(n,e,r,i){var t;if(Array.isArray(e))S.each(e,function(e,t){r||St.test(n)?i(n,t):Dt(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==w(e))i(n,e);else for(t in e)Dt(n+"["+t+"]",e[t],r,i)}S.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){i(this.name,this.value)});else for(n in e)Dt(n,e[n],t,i);return r.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&Nt.test(this.nodeName)&&!At.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(e){return{name:t.name,value:e.replace(kt,"\r\n")}}):{name:t.name,value:n.replace(kt,"\r\n")}}).get()}});var jt=/%20/g,qt=/#.*$/,Lt=/([?&])_=[^&]*/,Ht=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ot=/^(?:GET|HEAD)$/,Pt=/^\/\//,Rt={},Mt={},It="*/".concat("*"),Wt=E.createElement("a");function Ft(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(P)||[];if(m(t))while(n=i[r++])"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Bt(t,i,o,a){var s={},u=t===Mt;function l(e){var r;return s[e]=!0,S.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s["*"]&&l("*")}function $t(e,t){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&S.extend(!0,e,r),e}Wt.href=Tt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Tt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Tt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":It,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?$t($t(e,S.ajaxSettings),t):$t(S.ajaxSettings,e)},ajaxPrefilter:Ft(Rt),ajaxTransport:Ft(Mt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=S.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?S(y):S.event,x=S.Deferred(),b=S.Callbacks("once memory"),w=v.statusCode||{},a={},s={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=Ht.exec(p))n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||Tt.href)+"").replace(Pt,Tt.protocol+"//"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(P)||[""],null==v.crossDomain){r=E.createElement("a");try{r.href=v.url,r.href=r.href,v.crossDomain=Wt.protocol+"//"+Wt.host!=r.protocol+"//"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=S.param(v.data,v.traditional)),Bt(Rt,v,t,T),h)return T;for(i in(g=S.event&&v.global)&&0==S.active++&&S.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!Ot.test(v.type),f=v.url.replace(qt,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(jt,"+")):(o=v.url.slice(f.length),v.data&&(v.processData||"string"==typeof v.data)&&(f+=(Et.test(f)?"&":"?")+v.data,delete v.data),!1===v.cache&&(f=f.replace(Lt,"$1"),o=(Et.test(f)?"&":"?")+"_="+Ct.guid+++o),v.url=f+o),v.ifModified&&(S.lastModified[f]&&T.setRequestHeader("If-Modified-Since",S.lastModified[f]),S.etag[f]&&T.setRequestHeader("If-None-Match",S.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader("Content-Type",v.contentType),T.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+It+"; q=0.01":""):v.accepts["*"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u="abort",b.add(v.complete),T.done(v.success),T.fail(v.error),c=Bt(Mt,v,t,T)){if(T.readyState=1,g&&m.trigger("ajaxSend",[T,v]),h)return T;v.async&&0<v.timeout&&(d=C.setTimeout(function(){T.abort("timeout")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),!i&&-1<S.inArray("script",v.dataTypes)&&(v.converters["text script"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(S.lastModified[f]=u),(u=T.getResponseHeader("etag"))&&(S.etag[f]=u)),204===e||"HEAD"===v.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+"",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?"ajaxSuccess":"ajaxError",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger("ajaxComplete",[T,v]),--S.active||S.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],function(e,i){S[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),S.ajax(S.extend({url:e,type:i,dataType:r,data:t,success:n},S.isPlainObject(e)&&e))}}),S.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return m(n)?this.each(function(e){S(this).wrapInner(n.call(this,e))}):this.each(function(){var e=S(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=m(t);return this.each(function(e){S(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var _t={0:200,1223:204},zt=S.ajaxSettings.xhr();y.cors=!!zt&&"withCredentials"in zt,y.ajax=zt=!!zt,S.ajaxTransport(function(i){var o,a;if(y.cors||zt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(_t[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),S.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=S("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var Ut,Xt=[],Vt=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Xt.pop()||S.expando+"_"+Ct.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Vt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Vt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Vt,"$1"+r):!1!==e.jsonp&&(e.url+=(Et.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||S.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?S(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Xt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0}),"script"}),y.createHTMLDocument=((Ut=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ut.childNodes.length),S.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=N.exec(e))?[t.createElement(i[1])]:(i=xe([e],t,o),o&&o.length&&S(o).remove(),S.merge([],i.childNodes)));var r,i,o},S.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=vt(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&S.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?S("<div>").append(S.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=S.css(e,"position"),c=S(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=S.css(e,"top"),u=S.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,S.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):("number"==typeof f.top&&(f.top+="px"),"number"==typeof f.left&&(f.left+="px"),c.css(f))}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===S.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===S.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),i.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-S.css(r,"marginTop",!0),left:t.left-i.left-S.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===S.css(e,"position"))e=e.offsetParent;return e||re})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;S.fn[t]=function(e){return $(this,function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),S.each(["top","left"],function(e,n){S.cssHooks[n]=$e(y.pixelPosition,function(e,t){if(t)return t=Be(e,n),Me.test(t)?S(e).position()[n]+"px":t})}),S.each({Height:"height",Width:"width"},function(a,s){S.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){S.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return $(this,function(e,t,n){var r;return x(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?S.css(e,t,i):S.style(e,t,n,i)},s,n?e:void 0,n)}})}),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){S.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var Gt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;S.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||S.guid++,i},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=A,S.isFunction=m,S.isWindow=x,S.camelCase=X,S.type=w,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(Gt,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return S});var Yt=C.jQuery,Qt=C.$;return S.noConflict=function(e){return C.$===S&&(C.$=Qt),e&&C.jQuery===S&&(C.jQuery=Yt),S},"undefined"==typeof e&&(C.jQuery=C.$=S),S})},{}],43:[function(require,module,exports){!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&"object"==typeof module.exports?module.exports=e(require("./02-jquery.min.js")):e(jQuery)}(function(y){"use strict";var b=y.keyboard=function(c,o){var p,h=this;h.version="1.30.1",h.$el=y(c),h.el=c,h.$el.data("keyboard",h),h.init=function(){h.initialized=!1;var e,t,a,i=b.css,n=b.events;h.settings=o||{},o&&o.position&&(t=y.extend({},o.position),o.position=null),h.options=p=y.extend(!0,{},b.defaultOptions,o),t&&(p.position=t,o.position=t),h.el.active=!0,h.namespace=".keyboard"+Math.random().toString(16).slice(2),h.extensionNamespace=[],h.shiftActive=h.altActive=h.metaActive=h.sets=h.capsLock=!1,h.rows=["","-shift","-alt","-alt-shift"],h.inPlaceholder=h.$el.attr("placeholder")||"",h.watermark=b.watermark&&""!==h.inPlaceholder,h.repeatTime=1e3/(p.repeatRate||20),p.preventDoubleEventTime=p.preventDoubleEventTime||100,h.isOpen=!1,h.wheel="function"==typeof y.fn.mousewheel,h.escapeRegex=/[-\/\\^$*+?.()|[\]{}]/g,h.isTextArea="textarea"===h.el.nodeName.toLowerCase(),h.isInput="input"===h.el.nodeName.toLowerCase(),h.isContentEditable=!h.isTextArea&&!h.isInput&&h.el.isContentEditable,e=b.keyCodes,h.alwaysAllowed=[e.capsLock,e.pageUp,e.pageDown,e.end,e.home,e.left,e.up,e.right,e.down,e.insert,e.delete],h.$keyboard=[],h.enabled=!0,h.checkCaret=p.lockInput||b.checkCaretSupport(),h.isContentEditable&&(p.usePreview=!1),h.last={start:0,end:0,key:"",val:"",preVal:"",layout:"",virtual:!0,keyset:[!1,!1,!1],wheel_$Keys:[],wheelIndex:0,wheelLayers:[]},h.temp=["",0,0],y.each([n.kbInit,n.kbBeforeVisible,n.kbVisible,n.kbHidden,n.inputCanceled,n.inputAccepted,n.kbBeforeClose,n.inputRestricted],function(e,t){"function"==typeof p[t]&&h.$el.bind(t+h.namespace+"callbacks",p[t])}),p.alwaysOpen&&(p.stayOpen=!0),a=y(document),h.el.ownerDocument!==document&&(a=a.add(h.el.ownerDocument));var s="keyup checkkeyboard mousedown touchstart ";p.closeByClickEvent&&(s+="click "),a.bind(s.split(" ").join(h.namespace+" "),function(e){clearTimeout(h.timer3),h.timer3=setTimeout(function(){h.checkClose(e)},1)}),h.$el.addClass(i.input+" "+p.css.input).attr({"aria-haspopup":"true",role:"textbox"}),(p.lockInput||h.el.readOnly)&&(p.lockInput=!0,h.$el.addClass(i.locked).attr({readonly:"readonly"})),h.isUnavailable()&&h.$el.addClass(i.noKeyboard),p.openOn&&h.bindFocus(),h.watermark||""!==h.getValue(h.$el)||""===h.inPlaceholder||""===h.$el.attr("placeholder")||(h.$el.addClass(i.placeholder),h.setValue(h.inPlaceholder,h.$el)),h.$el.trigger(n.kbInit,[h,h.el]),p.alwaysOpen&&h.reveal(),h.initialized=!0},h.toggle=function(){if(h.hasKeyboard()){var e=h.$keyboard.find("."+b.css.keyToggle),t=!h.enabled;return h.preview.readonly=t||h.options.lockInput,h.$keyboard.toggleClass(b.css.keyDisabled,t).find("."+b.css.keyButton).not(e).attr("aria-disabled",t).each(function(){this.disabled=t}),e.toggleClass(b.css.keyDisabled,t),t&&h.typing_options&&(h.typing_options.text=""),h}},h.setCurrent=function(){var e=b.css,t=y("."+e.isCurrent),a=t.data("keyboard");y.isEmptyObject(a)||a.el===h.el||a.close(!!a.options.autoAccept&&"true"),t.removeClass(e.isCurrent),y("."+e.hasFocus).removeClass(e.hasFocus),h.$el.addClass(e.isCurrent),h.$preview.focus(),h.$keyboard.addClass(e.hasFocus),h.isCurrent(!0),h.isOpen=!0},h.isUnavailable=function(){return h.$el.is(":disabled")||!h.options.activeOnReadonly&&h.$el.attr("readonly")&&!h.$el.hasClass(b.css.locked)},h.isCurrent=function(e){var t=b.currentKeyboard||!1;return e?t=b.currentKeyboard=h.el:!1===e&&t===h.el&&(t=b.currentKeyboard=""),t===h.el},h.hasKeyboard=function(){return h.$keyboard&&0<h.$keyboard.length},h.isVisible=function(){return!!h.hasKeyboard()&&h.$keyboard.is(":visible")},h.setFocus=function(){var e=h.$preview||h.$el;p.noFocus||e.focus(),h.isContentEditable?b.setEditableCaret(e,h.last.start,h.last.end):b.caret(e,h.last)},h.focusOn=function(){!h&&h.el.active||(h.isVisible()?h.setCurrent():(clearTimeout(h.timer),h.reveal()))},h.redraw=function(e){return e&&(h.options.layout=e),h.$keyboard.length&&(h.last.preVal=""+h.last.val,h.saveLastChange(),h.setValue(h.last.val,h.$el),h.removeKeyboard(),h.shiftActive=h.altActive=h.metaActive=!1),h.isOpen=p.alwaysOpen,h.reveal(!0),h},h.reveal=function(e){var t,a=h.isOpen,i=b.css;if(h.opening=!a,y("."+i.keyboard).not("."+i.alwaysOpen).each(function(){var e=y(this).data("keyboard");y.isEmptyObject(e)||e.close(!!e.options.autoAccept&&"true")}),!h.isUnavailable())return h.$el.removeClass(i.noKeyboard),p.openOn&&h.$el.unbind(y.trim((p.openOn+" ").split(/\s+/).join(h.namespace+" "))),h.$keyboard&&(!h.$keyboard||h.$keyboard.length&&!y.contains(h.el.ownerDocument.body,h.$keyboard[0]))||h.startup(),h.watermark||h.getValue()!==h.inPlaceholder||(h.$el.removeClass(i.placeholder),h.setValue("",h.$el)),h.originalContent=h.isContentEditable?h.$el.html():h.getValue(h.$el),h.el===h.preview||h.isContentEditable||h.setValue(h.originalContent),p.acceptValid&&p.checkValidOnInit&&h.checkValid(),p.resetDefault&&(h.shiftActive=h.altActive=h.metaActive=!1),h.showSet(),h.isVisible()||h.$el.trigger(b.events.kbBeforeVisible,[h,h.el]),(h.initialized||p.initialFocus||!p.initialFocus&&h.$el.hasClass(b.css.initialFocus))&&h.setCurrent(),h.toggle(),h.$keyboard.show(),p.usePreview&&b.msie&&(void 0===h.width&&(h.$preview.hide(),h.width=Math.ceil(h.$keyboard.width()),h.$preview.show()),h.$preview.width(h.width)),h.reposition(),h.checkDecimal(),h.lineHeight=parseInt(h.$preview.css("lineHeight"),10)||parseInt(h.$preview.css("font-size"),10)+4,p.caretToEnd&&(t=h.isContentEditable?b.getEditableLength(h.el):h.originalContent.length,h.saveCaret(t,t)),b.allie&&(0===h.last.end&&0<h.last.start&&(h.last.end=h.last.start),h.last.start<0&&(h.last.start=h.last.end=h.originalContent.length)),a||e?(b.caret(h.$preview,h.last),h.opening=!1):h.timer2=setTimeout(function(){var e;h.opening=!1,/(number|email)/i.test(h.el.type)||p.caretToEnd||h.saveCaret(e,e,h.$el),(p.initialFocus||h.$el.hasClass(b.css.initialFocus))&&b.caret(h.$preview,h.last),h.last.eventTime=(new Date).getTime(),h.$el.trigger(b.events.kbVisible,[h,h.el]),h.timer=setTimeout(function(){h&&h.saveCaret()},200)},10),h},h.updateLanguage=function(){var e=b.layouts,t=p.language||e[p.layout]&&e[p.layout].lang&&e[p.layout].lang||[p.language||"en"],a=b.language;t="[object Array]"===Object.prototype.toString.call(t)?t[0]:t,t=(h.language=t).split("-")[0],p.display=y.extend(!0,{},a.en.display,a[t]&&a[t].display||{},h.settings.display),p.combos=y.extend(!0,{},a.en.combos,a[t]&&a[t].combos||{},h.settings.combos),p.wheelMessage=a[t]&&a[t].wheelMessage||a.en.wheelMessage,p.rtl=e[p.layout]&&e[p.layout].rtl||a[t]&&a[t].rtl||!1,a[t]&&a[t].comboRegex&&(h.regex=a[t].comboRegex),h.decimal=/^\./.test(p.display.dec),h.$el.toggleClass("rtl",p.rtl).css("direction",p.rtl?"rtl":"")},h.startup=function(){var e=b.css;(p.alwaysOpen||p.userClosed)&&h.$preview||h.makePreview(),h.hasKeyboard()||("custom"===p.layout&&(p.layoutHash="custom"+h.customHash()),h.layout="custom"===p.layout?p.layoutHash:p.layout,h.last.layout=h.layout,h.updateLanguage(),void 0===b.builtLayouts[h.layout]&&("function"==typeof p.create?h.$keyboard=p.create(h):h.$keyboard.length||h.buildKeyboard(h.layout,!0)),h.$keyboard=b.builtLayouts[h.layout].$keyboard.clone(),h.$keyboard.data("keyboard",h),""!==(h.el.id||"")&&h.$keyboard.attr("id",h.el.id+b.css.idSuffix),h.makePreview()),h.$keyboard.attr("data-"+e.keyboard+"-layout",p.layout).attr("data-"+e.keyboard+"-language",h.language),h.$decBtn=h.$keyboard.find("."+e.keyPrefix+"dec"),(p.enterNavigation||h.isTextArea)&&h.alwaysAllowed.push(b.keyCodes.enter),h.bindKeyboard(),h.$keyboard.appendTo(p.appendLocally?h.$el.parent():p.appendTo||"body"),h.bindKeys(),p.reposition&&y.ui&&y.ui.position&&"body"===p.appendTo&&y(window).bind("resize"+h.namespace,function(){h.reposition()})},h.reposition=function(){return h.position=!y.isEmptyObject(p.position)&&p.position,y.ui&&y.ui.position&&h.position&&(h.position.of=h.position.of||h.$el.data("keyboardPosition")||h.$el,h.position.collision=h.position.collision||"flipfit flipfit",h.position.at=p.usePreview?p.position.at:p.position.at2,h.isVisible()&&h.$keyboard.position(h.position)),h},h.makePreview=function(){if(p.usePreview){var e,t,a,i,n=b.css;for(h.$preview=h.$el.clone(!1).data("keyboard",h).removeClass(n.placeholder+" "+n.input).addClass(n.preview+" "+p.css.input).attr("tabindex","-1").show(),h.preview=h.$preview[0],"number"===h.preview.type&&(h.preview.type="text"),i=/^(data-|id|aria-haspopup)/i,e=(t=h.$preview.get(0).attributes).length-1;0<=e;e--)a=t[e]&&t[e].name,i.test(a)&&h.preview.removeAttribute(a);y("<div />").addClass(n.wrapper).append(h.$preview).prependTo(h.$keyboard)}else h.$preview=h.$el,h.preview=h.el},h.caret=function(e,t){var a=b.caret(h.$preview,e,t);return a instanceof y?(h.saveCaret(a.start,a.end),h):a},h.saveCaret=function(e,t,a){var i;h.isCurrent()&&(i=void 0===e?b.caret(a||h.$preview):b.caret(a||h.$preview,e,t),h.last.start=void 0===e?i.start:e,h.last.end=void 0===t?i.end:t)},h.saveLastChange=function(e){h.last.val=e||h.getValue(h.$preview||h.$el),h.isContentEditable&&(h.last.elms=h.el.cloneNode(!0))},h.setScroll=function(){if(!h.isContentEditable&&h.last.virtual){var e,t,a,i,n=h.last.val.substring(0,Math.max(h.last.start,h.last.end));h.$previewCopy||(h.$previewCopy=h.$preview.clone().removeAttr("id").css({position:"absolute",left:0,zIndex:-10,visibility:"hidden"}).addClass(b.css.inputClone),h.$previewCopy[0].disabled=!0,h.isTextArea||h.$previewCopy.css({"white-space":"pre",width:0}),p.usePreview?h.$preview.after(h.$previewCopy):h.$keyboard.prepend(h.$previewCopy)),h.isTextArea?(h.$previewCopy.height(h.lineHeight).val(n),h.preview.scrollTop=h.lineHeight*(Math.floor(h.$previewCopy[0].scrollHeight/h.lineHeight)-1)):(h.$previewCopy.val(n.replace(/\s/g," ")),a=/c/i.test(p.scrollAdjustment)?h.preview.clientWidth/2:p.scrollAdjustment,e=h.$previewCopy[0].scrollWidth-1,void 0===h.last.scrollWidth&&(h.last.scrollWidth=e,h.last.direction=!0),i=h.last.scrollWidth===e?h.last.direction:h.last.scrollWidth<e,t=h.preview.clientWidth-a,i?h.preview.scrollLeft=e<t?0:e-t:e>=h.preview.scrollWidth-t?h.preview.scrollLeft=h.preview.scrollWidth-a:h.preview.scrollLeft=0<e-a?e-a:0,h.last.scrollWidth=e,h.last.direction=i)}},h.bindFocus=function(){p.openOn&&h&&h.el.active&&(h.$el.bind(p.openOn+h.namespace,function(){h.focusOn()}),y(":focus")[0]===h.el&&h.$el.blur())},h.bindKeyboard=function(){var s,o=b.keyCodes,r=b.builtLayouts[h.layout],e=h.namespace+"keybindings";h.$preview.unbind(h.namespace).bind("click"+e+" touchstart"+e,function(){p.alwaysOpen&&!h.isCurrent()&&h.reveal(),h.timer2=setTimeout(function(){h&&h.saveCaret()},150)}).bind("keypress"+e,function(e){if(p.lockInput)return!1;if(h.isCurrent()){var t=e.charCode||e.which,a=t>=o.A&&t<=o.Z,i=t>=o.a&&t<=o.z,n=h.last.key=String.fromCharCode(t);if(!(t<o.space)){if(h.last.virtual=!1,h.last.event=e,h.last.$key=[],h.checkCaret&&h.saveCaret(),t!==o.capsLock&&(a||i)&&(h.capsLock=a&&!e.shiftKey||i&&e.shiftKey,h.capsLock&&!h.shiftActive&&(h.shiftActive=!0,h.showSet())),p.restrictInput){if((e.which===o.backSpace||0===e.which)&&y.inArray(e.keyCode,h.alwaysAllowed))return;-1===y.inArray(n,r.acceptedKeys)&&(e.preventDefault(),(s=y.extend({},e)).type=b.events.inputRestricted,h.$el.trigger(s,[h,h.el]))}else if((e.ctrlKey||e.metaKey)&&(e.which===o.A||e.which===o.C||e.which===o.V||e.which>=o.X&&e.which<=o.Z))return;r.hasMappedKeys&&r.mappedKeys.hasOwnProperty(n)&&(h.last.key=r.mappedKeys[n],h.insertText(h.last.key),e.preventDefault()),"function"==typeof p.beforeInsert&&(h.insertText(h.last.key),e.preventDefault()),h.checkMaxLength()}}}).bind("keyup"+e,function(e){if(h.isCurrent()){switch(h.last.virtual=!1,e.which){case o.tab:if(h.tab&&!p.lockInput){h.shiftActive=e.shiftKey;var t=b.keyaction.tab(h);if(h.tab=!1,!t)return!1}else e.preventDefault();break;case o.escape:return p.ignoreEsc||h.close(!(!p.autoAccept||!p.autoAcceptOnEsc)&&"true"),!1}clearTimeout(h.throttled),h.throttled=setTimeout(function(){h&&h.isVisible()&&h.checkCombos()},100),h.checkMaxLength(),h.last.preVal=""+h.last.val,h.saveLastChange();var a=y.Event(b.events.kbChange);if(a.action=h.last.key,h.$el.trigger(a,[h,h.el]),"function"==typeof p.change)return a.type=b.events.inputChange,p.change(a,h,h.el),!1;p.acceptValid&&p.autoAcceptOnValid&&"function"==typeof p.validate&&p.validate(h,h.getValue(h.$preview))&&(h.$preview.blur(),h.accept())}}).bind("keydown"+e,function(e){if(h.last.keyPress=e.which,p.alwaysOpen&&!h.isCurrent()&&h.reveal(),e.which===o.tab)return!(h.tab=!0);if(p.lockInput||e.timeStamp===h.last.timeStamp)return!p.lockInput;switch(h.last.timeStamp=e.timeStamp,h.last.virtual=!1,e.which){case o.backSpace:b.keyaction.bksp(h,null,e),e.preventDefault();break;case o.enter:b.keyaction.enter(h,null,e);break;case o.capsLock:h.shiftActive=h.capsLock=!h.capsLock,h.showSet();break;case o.V:if(e.ctrlKey||e.metaKey){if(p.preventPaste)return void e.preventDefault();h.checkCombos()}}}).bind("mouseup touchend ".split(" ").join(e+" "),function(){h.last.virtual=!0,h.saveCaret()}),h.$keyboard.bind("mousedown click touchstart ".split(" ").join(h.namespace+" "),function(e){e.stopPropagation(),h.isCurrent()||(h.reveal(),y(h.el.ownerDocument).trigger("checkkeyboard"+h.namespace)),h.setFocus()}),p.preventPaste&&(h.$preview.bind("contextmenu"+h.namespace,function(e){e.preventDefault()}),h.$el.bind("contextmenu"+h.namespace,function(e){e.preventDefault()}))},h.bindButton=function(e,t){var a="."+b.css.keyButton,i=function(e){e.stopPropagation(),e.$target=y(this).closest("."+b.css.keyboard+", ."+b.css.input),t.call(this,e)};return y.fn.on?h.$keyboard.on(e,a,i):y.fn.delegate&&h.$keyboard.delegate(a,e,i),h},h.unbindButton=function(e){return y.fn.off?h.$keyboard.off(e):y.fn.undelegate&&h.$keyboard.undelegate("."+b.css.keyButton,e),h},h.bindKeys=function(){var s=b.css;h.unbindButton(h.namespace+" "+h.namespace+"kb").bindButton("mouseenter mouseleave touchstart ".split(" ").join(h.namespace+" "),function(e){if(!p.alwaysOpen&&!p.userClosed||"mouseleave"===e.type||h.isCurrent()||(h.reveal(),h.setFocus()),h.isCurrent()&&!this.disabled){var t,a,i=h.last,n=y(this),s=e.type;p.useWheel&&h.wheel&&(t=h.getLayers(n),a=(t.length?t.map(function(){return y(this).attr("data-value")||""}).get():"")||[n.text()],i.wheel_$Keys=t,i.wheelLayers=a,i.wheelIndex=y.inArray(n.attr("data-value"),a)),"mouseenter"!==s&&"touchstart"!==s||"password"===h.el.type||n.hasClass(p.css.buttonDisabled)||(n.addClass(p.css.buttonHover),p.useWheel&&h.wheel&&n.attr("title",function(e,t){return h.wheel&&""===t&&h.sets&&1<a.length&&"touchstart"!==s?p.wheelMessage:t})),"mouseleave"===s&&(n.removeClass("password"===h.el.type?"":p.css.buttonHover),p.useWheel&&h.wheel&&(i.wheelIndex=0,i.wheelLayers=[],i.wheel_$Keys=[],n.attr("title",function(e,t){return t===p.wheelMessage?"":t}).html(n.attr("data-html"))))}}).bindButton(p.keyBinding.split(" ").join(h.namespace+" ")+h.namespace+" "+b.events.kbRepeater,function(e){if(e.preventDefault(),!h.$keyboard.is(":visible")||this.disabled)return!1;var t,a=h.last,i=y(this),n=(new Date).getTime();if(p.useWheel&&h.wheel&&(i=a.wheel_$Keys.length&&-1<a.wheelIndex?a.wheel_$Keys.eq(a.wheelIndex):i),t=i.attr("data-action"),!(n-(a.eventTime||0)<p.preventDoubleEventTime)){if(a.eventTime=n,a.event=e,a.virtual=!0,a.$key=i,a.key=i.attr("data-value"),a.keyPress="",h.setFocus(),/^meta/.test(t)&&(t="meta"),t===a.key&&"string"==typeof b.keyaction[t])a.key=t=b.keyaction[t];else if(t in b.keyaction&&"function"==typeof b.keyaction[t]){if(!1===b.keyaction[t](h,this,e))return!1;t=null}return!!h.hasKeyboard()&&(null!=t&&(a.key=y(this).hasClass(s.keyAction)?t:a.key,h.insertText(a.key),h.capsLock||p.stickyShift||e.shiftKey||(h.shiftActive=!1,h.showSet(i.attr("data-name")))),b.caret(h.$preview,a),h.checkCombos(),(e=y.extend({},e,y.Event(b.events.kbChange))).target=h.el,e.action=a.key,h.$el.trigger(e,[h,h.el]),a.preVal=""+a.val,h.saveLastChange(),"function"==typeof p.change?(e.type=b.events.inputChange,p.change(e,h,h.el),!1):void 0)}}).bindButton("mouseup"+h.namespace+" "+"mouseleave touchend touchmove touchcancel ".split(" ").join(h.namespace+"kb "),function(e){h.last.virtual=!0;var t,a=y(this);if("touchmove"===e.type){if((t=a.offset()).right=t.left+a.outerWidth(),t.bottom=t.top+a.outerHeight(),e.originalEvent.touches[0].pageX>=t.left&&e.originalEvent.touches[0].pageX<t.right&&e.originalEvent.touches[0].pageY>=t.top&&e.originalEvent.touches[0].pageY<t.bottom)return!0}else/(mouseleave|touchend|touchcancel)/i.test(e.type)?a.removeClass(p.css.buttonHover):(!p.noFocus&&h.isCurrent()&&h.isVisible()&&h.$preview.focus(),h.checkCaret&&b.caret(h.$preview,h.last));return h.mouseRepeat=[!1,""],clearTimeout(h.repeater),p.acceptValid&&p.autoAcceptOnValid&&"function"==typeof p.validate&&p.validate(h,h.getValue())&&(h.$preview.blur(),h.accept()),!1}).bindButton("click"+h.namespace,function(){return!1}).bindButton("mousewheel"+h.namespace,h.throttleEvent(function(e,t){var a=y(this);if(a&&!a.hasClass(s.keyAction)&&h.last.wheel_$Keys[0]===this&&p.useWheel&&h.wheel){t=t||e.deltaY;var i,n=h.last.wheelLayers||[];return 1<n.length?((i=h.last.wheelIndex+(0<t?-1:1))>n.length-1&&(i=0),i<0&&(i=n.length-1)):i=0,h.last.wheelIndex=i,a.html(n[i]),!1}},30)).bindButton("mousedown touchstart ".split(" ").join(h.namespace+"kb "),function(){var e=y(this);if(e&&(!e.hasClass(s.keyAction)||e.is("."+s.keyPrefix+"tab bksp space enter".split(" ").join(",."+s.keyPrefix))))return 0!==p.repeatRate&&(h.mouseRepeat=[!0,e],setTimeout(function(){h&&h.mouseRepeat[0]&&h.mouseRepeat[1]===e&&!e[0].disabled&&h.repeatKey(e)},p.repeatDelay)),!1})},h.throttleEvent=function(e,t){var a;return function(){a||(e.apply(this,arguments),a=!0,setTimeout(function(){a=!1},t))}},h.execCommand=function(e,t){h.el.ownerDocument.execCommand(e,!1,t),h.el.normalize(),p.reposition&&h.reposition()},h.getValue=function(e){return(e=e||h.$preview)[h.isContentEditable?"text":"val"]()},h.setValue=function(e,t){return t=t||h.$preview,h.isContentEditable?e!==t.text()&&(b.replaceContent(t,e),h.saveCaret()):t.val(e),h},h.insertText=function(e){if(!h.$preview)return h;if("function"==typeof p.beforeInsert&&(e=p.beforeInsert(h.last.event,h,h.el,e)),void 0===e||!1===e)return h.last.key="",h;if(h.isContentEditable)return h.insertContentEditable(e);var t,a=!1,i="\b"===e,n=h.getValue(),s=b.caret(h.$preview),o=n.length;return s.end<s.start&&(s.end=s.start),s.start>o&&(s.end=s.start=o),h.isTextArea&&b.msie&&"\n"===n.substring(s.start,s.start+1)&&(s.start+=1,s.end+=1),t=s.start,"{d}"===e&&(e="",s.end+=1),i&&(e="",a=i&&t===s.end&&0<t),n=n.substring(0,t-(a?1:0))+e+n.substring(s.end),t+=a?-1:e.length,h.setValue(n),h.saveCaret(t,t),h.setScroll(),h},h.insertContentEditable=function(e){return h.$preview.focus(),h.execCommand("insertText",e),h.saveCaret(),h},h.checkMaxLength=function(){if(h.$preview){var e,t,a=h.getValue(),i=h.isContentEditable?b.getEditableLength(h.el):a.length;return!1!==p.maxLength&&i>p.maxLength&&(e=b.caret(h.$preview).start,t=Math.min(e,p.maxLength),p.maxInsert||(a=h.last.val,t=e-1),h.setValue(a.substring(0,p.maxLength)),h.saveCaret(t,t)),h.$decBtn.length&&h.checkDecimal(),h}},h.repeatKey=function(e){e.trigger(b.events.kbRepeater),h.mouseRepeat[0]&&(h.repeater=setTimeout(function(){h&&h.repeatKey(e)},h.repeatTime))},h.getKeySet=function(){var e=[];return h.altActive&&e.push("alt"),h.shiftActive&&e.push("shift"),h.metaActive&&e.push(h.metaActive),e.length?e.join("+"):"normal"},h.showKeySet=function(e){return"string"==typeof e?(h.last.keyset=[h.shiftActive,h.altActive,h.metaActive],h.shiftActive=/shift/i.test(e),h.altActive=/alt/i.test(e),/\bmeta/.test(e)?(h.metaActive=!0,h.showSet(e.match(/\bmeta[\w-]+/i)[0])):(h.metaActive=!1,h.showSet())):h.showSet(e),h},h.showSet=function(e){if(h.hasKeyboard()){p=h.options;var t=b.css,a="."+t.keyPrefix,i=p.css.buttonActive,n="",s=(h.shiftActive?1:0)+(h.altActive?2:0);if(h.shiftActive||(h.capsLock=!1),h.metaActive?(h.shiftActive&&(e=(e||"").replace("-shift","")),h.altActive&&(e=(e||"").replace("-alt","")),""===(n=/^meta/i.test(e)?e:"")?n=!0===h.metaActive?"":h.metaActive:h.metaActive=n,(!p.stickyShift&&h.last.keyset[2]!==h.metaActive||(h.shiftActive||h.altActive)&&!h.$keyboard.find("."+t.keySet+"-"+n+h.rows[s]).length)&&(h.shiftActive=h.altActive=!1)):!p.stickyShift&&h.last.keyset[2]!==h.metaActive&&h.shiftActive&&(h.shiftActive=h.altActive=!1),n=0!==(s=(h.shiftActive?1:0)+(h.altActive?2:0))||h.metaActive?""===n?"":"-"+n:"-normal",!h.$keyboard.find("."+t.keySet+n+h.rows[s]).length)return h.shiftActive=h.last.keyset[0],h.altActive=h.last.keyset[1],void(h.metaActive=h.last.keyset[2]);h.$keyboard.find(a+"alt,"+a+"shift,."+t.keyAction+"[class*=meta]").removeClass(i).end().find(a+"alt").toggleClass(i,h.altActive).end().find(a+"shift").toggleClass(i,h.shiftActive).end().find(a+"lock").toggleClass(i,h.capsLock).end().find("."+t.keySet).hide().end().find("."+(t.keyAction+a+n).replace("--","-")).addClass(i),h.$keyboard.find("."+t.keySet+n+h.rows[s])[0].style.display="inline-block",h.metaActive&&h.$keyboard.find(a+h.metaActive).toggleClass(i,!1!==h.metaActive),h.last.keyset=[h.shiftActive,h.altActive,h.metaActive],h.$el.trigger(b.events.kbKeysetChange,[h,h.el]),p.reposition&&h.reposition()}},h.checkCombos=function(){if(!(h.isVisible()||h.hasKeyboard()&&h.$keyboard.hasClass(b.css.hasFocus)))return h.getValue(h.$preview||h.$el);var e,t,a,i,n=h.getValue(),s=b.caret(h.$preview),o=b.builtLayouts[h.layout],r=h.isContentEditable?b.getEditableLength(h.el):n.length,l=r;return""===n||(s.end<s.start&&(s.end=s.start),s.start>l&&(s.end=s.start=l),b.msie&&"\n"===n.substring(s.start,s.start+1)&&(s.start+=1,s.end+=1),p.useCombos&&(b.msie?n=n.replace(h.regex,function(e,t,a){return p.combos.hasOwnProperty(t)&&p.combos[t][a]||e}):h.$preview.length&&(t=s.start-(0<=s.start-2?2:0),b.caret(h.$preview,t,s.end),a=(i=function(e){return(e||"").replace(h.regex,function(e,t,a){return p.combos.hasOwnProperty(t)&&p.combos[t][a]||e})})((t=b.caret(h.$preview)).text),t&&t.replaceStr&&a!==t.text&&(h.isContentEditable?b.replaceContent(c,i):h.setValue(t.replaceStr(a))),n=h.getValue())),p.restrictInput&&""!==n&&(t=o.acceptedKeys.length,(e=o.acceptedKeysRegex)||(a=y.map(o.acceptedKeys,function(e){return e.replace(h.escapeRegex,"\\$&")}),-1<h.alwaysAllowed.indexOf(b.keyCodes.enter)&&a.push("\\n"),e=o.acceptedKeysRegex=new RegExp("("+a.join("|")+")","g")),(a=n.match(e))?n=a.join(""):(n="",l=0)),s.start+=r-l,s.end+=r-l,h.setValue(n),h.saveCaret(s.start,s.end),h.setScroll(),h.checkMaxLength()),p.acceptValid&&h.checkValid(),n},h.checkValid=function(){var e=b.css,t=h.$keyboard.find("."+e.keyPrefix+"accept"),a=!0;"function"==typeof p.validate&&(a=p.validate(h,h.getValue(),!1)),t.toggleClass(e.inputInvalid,!a).toggleClass(e.inputValid,a).attr("title",t.attr("data-title")+" ("+p.display[a?"valid":"invalid"]+")")},h.checkDecimal=function(){h.decimal&&/\./g.test(h.preview.value)||!h.decimal&&/\,/g.test(h.preview.value)?h.$decBtn.attr({disabled:"disabled","aria-disabled":"true"}).removeClass(p.css.buttonHover).addClass(p.css.buttonDisabled):h.$decBtn.removeAttr("disabled").attr({"aria-disabled":"false"}).addClass(p.css.buttonDefault).removeClass(p.css.buttonDisabled)},h.getLayers=function(e){var t=b.css,a=e.attr("data-pos");return e.closest("."+t.keyboard).find('button[data-pos="'+a+'"]').filter(function(){return""!==y(this).find("."+t.keyText).text()}).add(e)},h.switchInput=function(e,t){if("function"==typeof p.switchInput)p.switchInput(h,e,t);else{h.$keyboard.length&&h.$keyboard.hide();var a,i=!1,n=y("button, input, select, textarea, a, [contenteditable]").filter(":visible").not(":disabled"),s=n.index(h.$el)+(e?1:-1);if(h.$keyboard.length&&h.$keyboard.show(),s>n.length-1&&(i=p.stopAtEnd,s=0),s<0&&(i=p.stopAtEnd,s=n.length-1),!i){if(!(t=h.close(t)))return;(a=n.eq(s).data("keyboard"))&&a.options.openOn.length?a.focusOn():n.eq(s).focus()}}return!1},h.close=function(e){if(h.isOpen&&h.$keyboard.length){clearTimeout(h.throttled);var t=b.css,a=b.events,i=e?h.checkCombos():h.originalContent;if(e&&"function"==typeof p.validate&&!p.validate(h,i,!0)&&(i=h.originalContent,e=!1,p.cancelClose))return;h.isCurrent(!1),h.isOpen=p.alwaysOpen||p.userClosed,h.isContentEditable&&!e?h.$el.html(i):h.setValue(i,h.$el),h.$el.removeClass(t.isCurrent+" "+t.inputAutoAccepted).addClass(e?!0===e?"":t.inputAutoAccepted:"").trigger(a.inputChange),p.alwaysOpen||h.$el.trigger(a.kbBeforeClose,[h,h.el,e||!1]),b.caret(h.$preview,h.last),h.$el.trigger(e?a.inputAccepted:a.inputCanceled,[h,h.el]).trigger(p.alwaysOpen?a.kbInactive:a.kbHidden,[h,h.el]).blur(),h&&(h.last.eventTime=(new Date).getTime(),p.alwaysOpen||p.userClosed&&"true"===e||!h.$keyboard.length||(h.removeKeyboard(),h.timer=setTimeout(function(){h&&h.bindFocus()},200)),h.watermark||""!==h.el.value||""===h.inPlaceholder||(h.$el.addClass(t.placeholder),h.setValue(h.inPlaceholder,h.$el)))}return!!e},h.accept=function(){return h.close(!0)},h.checkClose=function(e){if(!h.opening){var t=y.keyboard.css,a=e.$target||y(e.target).closest("."+b.css.keyboard+", ."+b.css.input);if(a.length||(a=y(e.target)),a.length&&a.hasClass(t.keyboard)){var i=a.data("keyboard");i!==h&&!i.$el.hasClass(t.isCurrent)&&i.options.openOn&&e.type===p.openOn&&i.focusOn()}else h.escClose(e,a)}},h.escCloseCallback={keepOpen:function(){return!h.isOpen}},h.escClose=function(e,t){if(h.isOpen){if(e&&"keyup"===e.type)return e.which!==b.keyCodes.escape||p.ignoreEsc?"":h.close(!(!p.autoAccept||!p.autoAcceptOnEsc)&&"true");var a=!1,i=t.length&&t||y(e.target);if(y.each(h.escCloseCallback,function(e,t){"function"==typeof t&&(a=a||t(i))}),!a&&(!h.isCurrent()&&h.isOpen||h.isOpen&&i[0]!==h.el)){if((p.stayOpen||p.userClosed)&&!i.hasClass(b.css.input))return;if(b.allie&&e.preventDefault(),p.closeByClickEvent){var n=i[0]&&i[0].nodeName.toLowerCase();"input"!==n&&"textarea"!==n&&"click"!==e.type||h.close(!!p.autoAccept&&"true")}else h.close(!!p.autoAccept&&"true")}}},h.keyBtn=y("<button />").attr({role:"button",type:"button","aria-disabled":"false",tabindex:"-1"}).addClass(b.css.keyButton),h.processName=function(e){var t,a,i=(e||"").replace(/[^a-z0-9-_]/gi,""),n=i.length,s=[];if(1<n&&e===i)return e;if(n=e.length){for(t=0;t<n;t++)a=e[t],s.push(/[a-z0-9-_]/i.test(a)?/[-_]/.test(a)&&0!==t?"":a:(0===t?"":"-")+a.charCodeAt(0));return s.join("")}return e},h.processKeys=function(e){var t,a,i=e.indexOf("</"),n={name:e,map:"",title:""};return-1<i||(a=e.split(/:(?!\/\/)/),/\(.+\)/.test(a[0])||/^:\(.+\)/.test(e)||/\([(:)]\)/.test(e)?/\([(:)]\)/.test(e)?(t=a[0].match(/([^(]+)\((.+)\)/))&&t.length?(n.name=t[1],n.map=t[2],n.title=1<a.length?a.slice(1).join(":"):""):(n.name=e.match(/([^(]+)/)[0],":"===n.name&&(a=a.slice(1)),null===t&&(n.map=":",a=a.slice(2)),n.title=a.length?a.join(":"):""):(n.map=e.match(/\(([^()]+?)\)/)[1],""===(t=(e=e.replace(/\(([^()]+)\)/,"")).split(":"))[0]?(n.name=":",a=a.slice(1)):n.name=t[0],n.title=1<a.length?a.slice(1).join(":"):""):(""!==e&&""===a[0]?(n.name=":",a=a.slice(1)):n.name=a[0],n.title=1<a.length?a.slice(1).join(":"):""),n.title=y.trim(n.title).replace(/_/g," ")),n},h.addKey=function(e,t,a){var i,n,s,o={},r=h.processKeys(a?e:t),l=b.css;return!a&&p.display[r.name]?(s=h.processKeys(p.display[r.name])).action=h.processKeys(e).name:(s=r).action=r.name,o.name=h.processName(r.name),""!==s.name&&(""!==s.map?(b.builtLayouts[h.layout].mappedKeys[s.map]=s.name,b.builtLayouts[h.layout].acceptedKeys.push(s.name)):a&&b.builtLayouts[h.layout].acceptedKeys.push(s.name)),i=a?""===o.name?"":l.keyPrefix+o.name:l.keyAction+" "+l.keyPrefix+s.action,i+=(2<s.name.length?" "+l.keyWide:"")+" "+p.css.buttonDefault,o.html='<span class="'+l.keyText+'">'+s.name+"</span>",o.$key=h.keyBtn.clone().attr({"data-value":a?s.name:s.action,"data-name":s.action,"data-pos":h.temp[1]+","+h.temp[2],"data-action":s.action,"data-html":o.html}).addClass(i).html(o.html).appendTo(h.temp[0]),s.map&&o.$key.attr("data-mapped",s.map),(s.title||r.title)&&o.$key.attr({"data-title":r.title||s.title,title:r.title||s.title}),"function"==typeof p.buildKey&&(n=(o=p.buildKey(h,o)).$key.html(),o.$key.attr("data-html",n)),o.$key},h.customHash=function(e){var t,a,i,n,s=[],o=[];for(a in e=void 0===e?p.customLayout:e)e.hasOwnProperty(a)&&s.push(e[a]);if((i=0)===(n=(o=o.concat.apply(o,s).join(" ")).length))return i;for(t=0;t<n;t++)i=(i<<5)-i+o.charCodeAt(t),i&=i;return i},h.buildKeyboard=function(e,t){y.isEmptyObject(p.display)&&h.updateLanguage();var a,i,n,s,o=b.css,r=0,l=b.builtLayouts[e||h.layout||p.layout]={mappedKeys:{},acceptedKeys:[]},c=l.acceptedKeys=p.restrictInclude&&(""+p.restrictInclude).split(/\s+/)||[],d=o.keyboard+" "+p.css.popup+" "+p.css.container+(p.alwaysOpen||p.userClosed?" "+o.alwaysOpen:""),u=y("<div />").addClass(d).attr({role:"textbox"}).hide();return-1<(a=y.inArray("{space}",c))&&(c[a]=" "),d=t&&"custom"===p.layout||!b.layouts.hasOwnProperty(p.layout)?(p.layout="custom",b.layouts.custom=p.customLayout||{normal:["{cancel}"]}):b.layouts[t?p.layout:e||h.layout||p.layout],y.each(d,function(e,t){if(""!==e&&!/^(name|lang|rtl)$/i.test(e))for("default"===e&&(e="normal"),r++,n=y("<div />").attr("name",e).addClass(o.keySet+" "+o.keySet+"-"+e).appendTo(u).toggle("normal"===e),i=0;i<t.length;i++)s=y.trim(t[i]).replace(/\{(\.?)[\s+]?:[\s+]?(\.?)\}/g,"{$1:$2}"),h.buildRow(n,i,s.split(/\s+/),c),n.find("."+o.keyButton+",."+o.keySpacer).filter(":last").after('<br class="'+o.endRow+'"/>')}),1<r&&(h.sets=!0),l.hasMappedKeys=!y.isEmptyObject(l.mappedKeys),l.$keyboard=u},h.buildRow=function(e,t,a,i){var n,s,o,r,l,c,d=b.css;for(o=0;o<a.length;o++)if(r=!(h.temp=[e,t,o]),0!==a[o].length)if(/^\{\S+\}$/.test(a[o])){if(l=a[o].match(/^\{(\S+)\}$/)[1],/\!\!/.test(l)&&(l=l.replace("!!",""),r=!0),/^sp:((\d+)?([\.|,]\d+)?)(em|px)?$/i.test(l)&&(c=parseFloat(l.replace(/,/,".").match(/^sp:((\d+)?([\.|,]\d+)?)(em|px)?$/i)[1]||0),y('<span class="'+d.keyText+'"></span>').width(l.match(/px/i)?c+"px":2*c+"em").addClass(d.keySpacer).appendTo(e)),/^empty(:((\d+)?([\.|,]\d+)?)(em|px)?)?$/i.test(l)){c=/:/.test(l)?parseFloat(l.replace(/,/,".").match(/^empty:((\d+)?([\.|,]\d+)?)(em|px)?$/i)[1]||0):"",h.addKey(""," ",!0).addClass(p.css.buttonDisabled+" "+p.css.buttonEmpty).attr("aria-disabled",!0).width(c?l.match("px")?c+"px":2*c+"em":"");continue}if(/^meta[\w-]+\:?(\w+)?/i.test(l)){h.addKey(l.split(":")[0],l).addClass(d.keyHasActive);continue}switch((s=l.split(":"))[0].toLowerCase()){case"a":case"accept":h.addKey("accept",l).addClass(p.css.buttonAction+" "+d.keyAction);break;case"alt":case"altgr":h.addKey("alt",l).addClass(d.keyHasActive);break;case"b":case"bksp":h.addKey("bksp",l);break;case"c":case"cancel":h.addKey("cancel",l).addClass(p.css.buttonAction+" "+d.keyAction);break;case"combo":h.addKey("combo",l).addClass(d.keyHasActive).attr("title",function(e,t){return t+" "+p.display[p.useCombos?"active":"disabled"]}).toggleClass(p.css.buttonActive,p.useCombos);break;case"dec":i.push(h.decimal?".":","),h.addKey("dec",l);break;case"e":case"enter":h.addKey("enter",l).addClass(p.css.buttonAction+" "+d.keyAction);break;case"lock":h.addKey("lock",l).addClass(d.keyHasActive);break;case"s":case"shift":h.addKey("shift",l).addClass(d.keyHasActive);break;case"sign":i.push("-"),h.addKey("sign",l);break;case"space":i.push(" "),h.addKey("space",l);break;case"t":case"tab":h.addKey("tab",l);break;default:b.keyaction.hasOwnProperty(s[0])&&h.addKey(s[0],l).toggleClass(p.css.buttonAction+" "+d.keyAction,r)}}else n=a[o],h.addKey(n,n,!0)},h.removeBindings=function(e){y(document).unbind(e),h.el.ownerDocument!==document&&y(h.el.ownerDocument).unbind(e),y(window).unbind(e),h.$el.unbind(e)},h.removeKeyboard=function(){h.$decBtn=[],p.usePreview&&h.$preview.removeData("keyboard"),h.$preview.unbind(h.namespace+"keybindings"),h.preview=null,h.$preview=null,h.$previewCopy=null,h.$keyboard.removeData("keyboard"),h.$keyboard.remove(),h.$keyboard=[],h.isOpen=!1,h.isCurrent(!1)},h.destroy=function(e){var t,a=b.css,i=h.extensionNamespace.length,n=[a.input,a.locked,a.placeholder,a.noKeyboard,a.alwaysOpen,p.css.input,a.isCurrent].join(" ");for(clearTimeout(h.timer),clearTimeout(h.timer2),clearTimeout(h.timer3),h.$keyboard.length&&h.removeKeyboard(),h.options.openOn&&h.removeBindings(h.options.openOn),h.removeBindings(h.namespace),h.removeBindings(h.namespace+"callbacks"),t=0;t<i;t++)h.removeBindings(h.extensionNamespace[t]);h.el.active=!1,h.$el.removeClass(n).removeAttr("aria-haspopup").removeAttr("role").removeData("keyboard"),h=null,"function"==typeof e&&e()},h.init()};return b.keyCodes={backSpace:8,tab:9,enter:13,capsLock:20,escape:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,A:65,Z:90,V:86,C:67,X:88,a:97,z:122},b.css={idSuffix:"_keyboard",initialFocus:"keyboard-init-focus",input:"ui-keyboard-input",inputClone:"ui-keyboard-preview-clone",wrapper:"ui-keyboard-preview-wrapper",preview:"ui-keyboard-preview",keyboard:"ui-keyboard",keySet:"ui-keyboard-keyset",keyButton:"ui-keyboard-button",keyWide:"ui-keyboard-widekey",keyPrefix:"ui-keyboard-",keyText:"ui-keyboard-text",keyHasActive:"ui-keyboard-hasactivestate",keyAction:"ui-keyboard-actionkey",keySpacer:"ui-keyboard-spacer",keyToggle:"ui-keyboard-toggle",keyDisabled:"ui-keyboard-disabled",divWrapperCE:"ui-keyboard-div-wrapper",locked:"ui-keyboard-lockedinput",alwaysOpen:"ui-keyboard-always-open",noKeyboard:"ui-keyboard-nokeyboard",placeholder:"ui-keyboard-placeholder",hasFocus:"ui-keyboard-has-focus",isCurrent:"ui-keyboard-input-current",inputValid:"ui-keyboard-valid-input",inputInvalid:"ui-keyboard-invalid-input",inputAutoAccepted:"ui-keyboard-autoaccepted",endRow:"ui-keyboard-button-endrow"},b.events={kbChange:"keyboardChange",kbBeforeClose:"beforeClose",kbBeforeVisible:"beforeVisible",kbVisible:"visible",kbInit:"initialized",kbInactive:"inactive",kbHidden:"hidden",kbRepeater:"repeater",kbKeysetChange:"keysetChange",inputAccepted:"accepted",inputCanceled:"canceled",inputChange:"change",inputRestricted:"restricted"},b.keyaction={accept:function(e){return e.close(!0),!1},alt:function(e){e.altActive=!e.altActive,e.showSet()},bksp:function(e){e.isContentEditable?(e.execCommand("delete"),e.saveCaret()):e.insertText("\b")},cancel:function(e){return e.close(),!1},clear:function(e){e.$preview[e.isContentEditable?"text":"val"](""),e.$decBtn.length&&e.checkDecimal()},combo:function(e){var t=e.options,a=!t.useCombos,i=e.$keyboard.find("."+b.css.keyPrefix+"combo");return t.useCombos=a,i.toggleClass(t.css.buttonActive,a).attr("title",i.attr("data-title")+" ("+t.display[a?"active":"disabled"]+")"),a&&e.checkCombos(),!1},dec:function(e){e.insertText(e.decimal?".":",")},del:function(e){e.isContentEditable?e.execCommand("forwardDelete"):e.insertText("{d}")},default:function(e){e.shiftActive=e.altActive=e.metaActive=!1,e.showSet()},enter:function(e,t,a){var i=e.options;return a.shiftKey?i.enterNavigation?e.switchInput(!a[i.enterMod],!0):e.close(!0):!i.enterNavigation||e.isTextArea&&!a[i.enterMod]?(e.isTextArea&&y(a.target).closest("button").length&&e.insertText((b.msie?" ":"")+"\n"),void(e.isContentEditable&&!i.enterNavigation&&(e.execCommand("insertHTML",'<div><br class="'+b.css.divWrapperCE+'"></div>'),setTimeout(function(){b.keyaction.right(e),e.saveCaret()},0)))):e.switchInput(!a[i.enterMod],!!i.autoAccept&&"true")},lock:function(e){e.last.keyset[0]=e.shiftActive=e.capsLock=!e.capsLock,e.showSet()},left:function(e){var t=b.caret(e.$preview);0<=t.start-1&&(e.last.start=e.last.end=t.start-1,b.caret(e.$preview,e.last),e.setScroll())},meta:function(e,t){var a=y(t);e.metaActive=!a.hasClass(e.options.css.buttonActive),e.showSet(a.attr("data-name"))},next:function(e){return e.switchInput(!0,e.options.autoAccept),!1},normal:function(e){e.shiftActive=e.altActive=e.metaActive=!1,e.showSet()},prev:function(e){return e.switchInput(!1,e.options.autoAccept),!1},right:function(e){var t=b.caret(e.$preview),a=e.isContentEditable?b.getEditableLength(e.el):e.getValue().length;t.end+1<=a&&(e.last.start=e.last.end=t.end+1,b.caret(e.$preview,e.last),e.setScroll())},shift:function(e){e.last.keyset[0]=e.shiftActive=!e.shiftActive,e.showSet()},sign:function(e){if(/^[+-]?\d*\.?\d*$/.test(e.getValue())){var t,a=b.caret(e.$preview),i=e.getValue(),n=e.isContentEditable?b.getEditableLength(e.el):i.length;e.setValue(-1*i),t=n-i.length,e.last.start=a.start+t,e.last.end=a.end+t,b.caret(e.$preview,e.last),e.setScroll()}},space:function(e){e.insertText(" ")},tab:function(e){var t=e.options;if(!e.isTextArea){if(t.tabNavigation)return e.switchInput(!e.shiftActive,!0);if(e.isInput)return!1}e.insertText("\t")},toggle:function(e){e.enabled=!e.enabled,e.toggle()},NBSP:" ",ZWSP:"​",ZWNJ:"‌",ZWJ:"‍",LRM:"‎",RLM:"‏"},b.builtLayouts={},b.layouts={alpha:{normal:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} a b c d e f g h i j [ ] \\","k l m n o p q r s ; ' {enter}","{shift} t u v w x y z , . / {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} A B C D E F G H I J { } |",'K L M N O P Q R S : " {enter}',"{shift} T U V W X Y Z < > ? {shift}","{accept} {space} {cancel}"]},qwerty:{normal:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}","{accept} {space} {cancel}"]},international:{normal:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}","{accept} {alt} {space} {alt} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}","{accept} {alt} {space} {alt} {cancel}"],alt:["~ ¡ ² ³ ¤ € ¼ ½ ¾ ‘ ’ ¥ × {bksp}","{tab} ä å é ® þ ü ú í ó ö « » ¬","á ß ð f g h j k ø ¶ ´ {enter}","{shift} æ x © v b ñ µ ç > ¿ {shift}","{accept} {alt} {space} {alt} {cancel}"],"alt-shift":["~ ¹ ² ³ £ € ¼ ½ ¾ ‘ ’ ¥ ÷ {bksp}","{tab} Ä Å É ® Þ Ü Ú Í Ó Ö « » ¦","Ä § Ð F G H J K Ø ° ¨ {enter}","{shift} Æ X ¢ V B Ñ µ Ç . ¿ {shift}","{accept} {alt} {space} {alt} {cancel}"]},colemak:{normal:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w f p g j l u y ; [ ] \\","{bksp} a r s t d h n e i o ' {enter}","{shift} z x c v b k m , . / {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W F P G J L U Y : { } |",'{bksp} A R S T D H N E I O " {enter}',"{shift} Z X C V B K M < > ? {shift}","{accept} {space} {cancel}"]},dvorak:{normal:["` 1 2 3 4 5 6 7 8 9 0 [ ] {bksp}","{tab} ' , . p y f g c r l / = \\","a o e u i d h t n s - {enter}","{shift} ; q j k x b m w v z {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) { } {bksp}",'{tab} " < > P Y F G C R L ? + |',"A O E U I D H T N S _ {enter}","{shift} : Q J K X B M W V Z {shift}","{accept} {space} {cancel}"]},num:{normal:["= ( ) {b}","{clear} / * -","7 8 9 +","4 5 6 {sign}","1 2 3 %","0 {dec} {a} {c}"]}},b.language={en:{display:{a:"✔:Accept (Shift+Enter)",accept:"Accept:Accept (Shift+Enter)",alt:"Alt:⌥ AltGr",b:"⌫:Backspace",bksp:"Bksp:Backspace",c:"✖:Cancel (Esc)",cancel:"Cancel:Cancel (Esc)",clear:"C:Clear",combo:"ö:Toggle Combo Keys",dec:".:Decimal",e:"⏎:Enter",empty:" ",enter:"Enter:Enter ⏎",left:"←",lock:"Lock:⇪ Caps Lock",next:"Next ⇨",prev:"⇦ Prev",right:"→",s:"⇧:Shift",shift:"Shift:Shift",sign:"±:Change Sign",space:" :Space",t:"⇥:Tab",tab:"⇥ Tab:Tab",toggle:" ",valid:"valid",invalid:"invalid",active:"active",disabled:"disabled"},wheelMessage:"Use mousewheel to see other keys",comboRegex:/([`\'~\^\"ao])([a-z])/gim,combos:{"`":{a:"à",A:"À",e:"è",E:"È",i:"ì",I:"Ì",o:"ò",O:"Ò",u:"ù",U:"Ù",y:"ỳ",Y:"Ỳ"},"'":{a:"á",A:"Á",e:"é",E:"É",i:"í",I:"Í",o:"ó",O:"Ó",u:"ú",U:"Ú",y:"ý",Y:"Ý"},'"':{a:"ä",A:"Ä",e:"ë",E:"Ë",i:"ï",I:"Ï",o:"ö",O:"Ö",u:"ü",U:"Ü",y:"ÿ",Y:"Ÿ"},"^":{a:"â",A:"Â",e:"ê",E:"Ê",i:"î",I:"Î",o:"ô",O:"Ô",u:"û",U:"Û",y:"ŷ",Y:"Ŷ"},"~":{a:"ã",A:"Ã",e:"ẽ",E:"Ẽ",i:"ĩ",I:"Ĩ",o:"õ",O:"Õ",u:"ũ",U:"Ũ",y:"ỹ",Y:"Ỹ",n:"ñ",N:"Ñ"}}}},b.defaultOptions={language:null,rtl:!1,layout:"qwerty",customLayout:null,position:{of:null,my:"center top",at:"center top",at2:"center bottom"},reposition:!0,usePreview:!0,alwaysOpen:!1,initialFocus:!0,noFocus:!1,stayOpen:!1,userClosed:!1,ignoreEsc:!1,closeByClickEvent:!1,css:{input:"ui-widget-content ui-corner-all",container:"ui-widget-content ui-widget ui-corner-all ui-helper-clearfix",popup:"",buttonDefault:"ui-state-default ui-corner-all",buttonHover:"ui-state-hover",buttonAction:"ui-state-active",buttonActive:"ui-state-active",buttonDisabled:"ui-state-disabled",buttonEmpty:"ui-keyboard-empty"},autoAccept:!1,autoAcceptOnEsc:!1,lockInput:!1,restrictInput:!1,restrictInclude:"",acceptValid:!1,autoAcceptOnValid:!1,checkValidOnInit:!0,cancelClose:!0,tabNavigation:!1,enterNavigation:!1,enterMod:"altKey",stopAtEnd:!0,appendLocally:!1,appendTo:"body",wrapBRs:!0,stickyShift:!0,preventPaste:!1,caretToEnd:!1,scrollAdjustment:10,maxLength:!1,maxInsert:!0,repeatDelay:500,repeatRate:20,resetDefault:!0,openOn:"focus",activeOnReadonly:!1,keyBinding:"mousedown touchstart",useWheel:!0,useCombos:!0,validate:function(){return!0}},b.comboRegex=/([`\'~\^\"ao])([a-z])/gim,b.currentKeyboard="",y('\x3c!--[if lte IE 8]><script>jQuery("body").addClass("oldie");<\/script><![endif]--\x3e\x3c!--[if IE]><script>jQuery("body").addClass("ie");<\/script><![endif]--\x3e').appendTo("body").remove(),b.msie=y("body").hasClass("oldie"),b.allie=y("body").hasClass("ie"),b.watermark=void 0!==document.createElement("input").placeholder,b.checkCaretSupport=function(){if("boolean"!=typeof b.checkCaret){var e=y('<div style="height:0px;width:0px;overflow:hidden;position:fixed;top:0;left:-100px;"><input type="text" value="testing"/></div>').prependTo("body");b.caret(e.find("input"),3,3),b.checkCaret=3!==b.caret(e.find("input").hide().show()).start,e.remove()}return b.checkCaret},b.caret=function(e,t,a){if(!e||!e.length||e.is(":hidden")||"hidden"===e.css("visibility"))return{};var i,n,s,o,r=e.data("keyboard"),l=r&&r.options.noFocus,c=/(textarea|input)/i.test(e[0].nodeName);return l||e.focus(),void 0!==t?("object"==typeof t&&"start"in t&&"end"in t?(i=t.start,n=t.end):void 0===a&&(a=t),"number"==typeof t&&"number"==typeof a?(i=t,n=a):"start"===t?i=n=0:"string"==typeof t&&(i=n="end"),c?e.caret(i,n,l):b.setEditableCaret(e,i,n)):(o=c?e.caret():b.getEditableCaret(e[0]),i=o.start,n=o.end,s=c&&e[0].value||e.text()||"",{start:i,end:n,text:s.substring(i,n),replaceStr:function(e){return s.substring(0,i)+e+s.substring(n,s.length)}})},b.isTextNode=function(e){return e&&3===e.nodeType},b.isBlock=function(e,t){var a=e.ownerDocument.defaultView;return t&&1===t.nodeType&&t!==e&&"block"===a.getComputedStyle(t).display?1:0},b.wrapBRs=function(i){var e=y(i).find("br:not(."+b.css.divWrapperCE+")");e.length&&y.each(e,function(e,t){var a=t.parentNode.childNodes.length;(1!==a||1===a&&!b.isBlock(i,t.parentNode))&&y(t).addClass(b.css.divWrapperCE).wrap("<div>")})},b.getEditableCaret=function(l){if(!(l=y(l)[0]).isContentEditable)return{};var e,t,c=(y(l).data("keyboard")||{}).options,a=l.ownerDocument.getSelection().getRangeAt(0),i=s(a.startContainer,a.startOffset),n=i.position;function s(e,t){var a,i="",n=!1,s=0,o=y.makeArray(l.childNodes);function r(e){e&&(s+=e,i+=c&&c.replaceCR||"\n")}for(;!n&&o.length;){if((a=o.shift())===e&&(n=!0),r(b.isBlock(l,a.previousSibling)),b.isTextNode(a)){if(s+=n?t:a.length,i+=a.textContent,n)return{position:s,text:i}}else!n&&a.childNodes&&(o=y.makeArray(a.childNodes).concat(o));r(b.isTextNode(a.previousSibling)&&b.isBlock(l,a))}return{position:s,text:i}}return!1!==c.wrapBRs&&b.wrapBRs(l),t=a.endContainer===a.startContainer&&a.endOffset===a.startOffset?(e=n,""):(e=(i=s(a.endContainer,a.endOffset)).position,i.text.substring(n,e)),{start:n,end:e,text:t}},b.getEditableLength=function(e){var t=b.setEditableCaret(e,"getMax");return"number"==typeof t?t:null},b.setEditableCaret=function(u,e,t){if(!(u=y(u)[0]).isContentEditable)return{};var a=u.ownerDocument,i=a.createRange(),n=a.getSelection(),p=(y(u).data("keyboard")||{}).options,s=e,o=t,r="",l=c("getMax"===e?"end":e);function c(a){"end"===a?a=u.innerHTML.length:a<0&&(a=0);var e,t,i="",n=!1,s=0,o=0,r=0,l=y.makeArray(u.childNodes);function c(e){return i+=e?p&&p.replaceCR||"\n":"",0<e}function d(e){var t=s+e;return o=r,r+=e,0<=a-t?a-(s=t)<=0:a-t<=0}for(;!n&&l.length;)if(e=l.shift(),c(t=b.isBlock(u,e.previousSibling))&&d(t)&&(n=!0),c(t=b.isTextNode(e.previousSibling)&&b.isBlock(u,e))&&d(t)&&(n=!0),b.isTextNode(e)){if(i+=e.textContent,d(e.length))return{node:e,offset:t=a-s==0&&1<=s-o?e.length:a-s,position:a,text:i}}else!n&&e.childNodes&&(l=y.makeArray(e.childNodes).concat(l));return l.length?{node:e,offset:a-s,position:a,text:i}:{node:e,offset:e&&e.length||0,position:r,text:i}}if(l.node){if(s=l.position,"getMax"===e)return s;i.setStart(l.node,l.offset),void 0!==t&&t!==e&&(l=c(t)),l.node&&(o=l.position,i.setEnd(l.node,l.offset),r=s===o?"":l.text.substring(s,o)),n.removeAllRanges(),n.addRange(i)}return{start:s,end:o,text:r}},b.replaceContent=function(e,t){e=y(e)[0];for(var a,i,n,s=typeof t,o=b.getEditableCaret(e).start,r=0,l=[e];a=l.pop();)if(b.isTextNode(a))"function"===s?r<=o&&o<=r+a.length&&(a.textContent=t(a.textContent)):"string"===s&&(n=t.substring(r,r+a.length))!==a.textContent&&(a.textContent=n),r+=a.length;else if(a&&a.childNodes)for(i=a.childNodes.length;i--;)l.push(a.childNodes[i]);i=b.getEditableCaret(e),b.setEditableCaret(e,i.start,i.start)},y.fn.keyboard=function(e){return this.each(function(){y(this).data("keyboard")||new y.keyboard(this,e)})},y.fn.getkeyboard=function(){return this.data("keyboard")},y.fn.caret=function(t,a,e){if(void 0===this[0]||this.is(":hidden")||"hidden"===this.css("visibility")||!/(INPUT|TEXTAREA)/i.test(this[0].nodeName))return this;var i,n,s,o,r,l=this,c=l[0],d=c.ownerDocument.selection,u=c.scrollTop,p=!1,h=!0;try{p="selectionStart"in c}catch(e){h=!1}return h&&void 0!==t?(/(email|number)/i.test(c.type)||(p?(c.selectionStart=t,c.selectionEnd=a):((i=c.createTextRange()).collapse(!0),i.moveStart("character",t),i.moveEnd("character",a-t),i.select())),e||!l.is(":visible")&&"hidden"===l.css("visibility")||c.focus(),c.scrollTop=u,this):(/(email|number)/i.test(c.type)?t=a=l.val().length:p?(t=c.selectionStart,a=c.selectionEnd):d?a="TEXTAREA"===c.nodeName.toUpperCase()?(r=l.val(),(s=(n=d.createRange()).duplicate()).moveToElementText(c),s.setEndPoint("EndToEnd",n),(t=s.text.replace(/\r/g,"\n").length)+n.text.replace(/\r/g,"\n").length):(r=l.val().replace(/\r/g,"\n"),(n=d.createRange().duplicate()).moveEnd("character",r.length),t=""===n.text?r.length:r.lastIndexOf(n.text),(n=d.createRange().duplicate()).moveStart("character",-r.length),n.text.length):t=a=(c.value||"").length,o=c.value||"",{start:t,end:a,text:o.substring(t,a),replace:function(e){return o.substring(0,t)+e+o.substring(a,o.length)}})},b})},{"./02-jquery.min.js":42}],44:[function(require,module,exports){(function(window){"use strict";window.REXUTIL=window.REXUTIL||{};const numericLayout={normal:["7 8 9 {b}","4 5 6 -","1 2 3 +","0 . {clear} {a}"]};const timeLayout={normal:["7 8 9 {b}","4 5 6 :","1 2 3 {clear}","0 . {a}"]};const quertyLayout={normal:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","a s d f g h j k l ; '","{shift} z x c v b n m , . / {shift}","{cancel} {space} {accept}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'A S D F G H J K L : "',"{shift} Z X C V B N M < > ? {shift}","{cancel} {space} {accept}"]};const defaultKeyboardOptions={layout:"custom",customLayout:null,position:{of:null,my:"center top+17px",at:"center bottom"},css:{input:"",container:"",buttonDefault:"mdc-button mdc-button--raised mdc-button--white",buttonHover:"",buttonAction:"mdc-button--primary",buttonDisabled:""},usePreview:false,initialFocus:false,autoAccept:false,acceptValid:false,tabNavigation:true,repeatDelay:1e3,repeatRate:50,useCombos:false,visible:null};window.REXUTIL.getJsonFromUrl=function(){var query=location.search.substr(1);var result={};query.split("&").forEach(function(part){if(!part){return}part=part.split("+").join(" ");var eq=part.indexOf("=");var key=eq>-1?part.substr(0,eq):part;var val=eq>-1?decodeURIComponent(part.substr(eq+1)):"";var from=key.indexOf("[");if(from===-1){result[decodeURIComponent(key)]=val}else{var to=key.indexOf("]",from);var index=decodeURIComponent(key.substring(from+1,to));key=decodeURIComponent(key.substring(0,from));if(!result[key]){result[key]=[]}if(!index){result[key].push(val)}else{result[key][index]=val}}});return result};window.REXUTIL.initKeyboard=function(elements,options,type){if(window.localStorage.getItem("virtualKeyboard")!=="true"){return}let keyOpt;$(elements).each(function(index,element){let $el=$(element);type=type||$el.prop("type");keyOpt=$.extend(true,{},defaultKeyboardOptions);switch(type){case"number":keyOpt.customLayout=numericLayout;keyOpt.css.container=defaultKeyboardOptions.css.container+" ui-keyboard--numeric";keyOpt.usePreview=true;keyOpt.position.my="center top";keyOpt.visible=function(e,keyboard,el){keyboard.$preview.val("")};break;case"time":keyOpt.customLayout=timeLayout;keyOpt.css.container=defaultKeyboardOptions.css.container+" ui-keyboard--time";keyOpt.usePreview=true;keyOpt.position.my="center top";keyOpt.beforeClose=function(e,keyboard,el,accepted){if(accepted){let val=keyboard.$preview.val();if(val.slice(-2,-1)===":"){keyboard.$preview.val(val.slice(0,-1)+"0"+val.slice(-1));el.value=keyboard.$preview.val()}}};keyOpt.beforeInsert=function(e,keyboard,el,txt){let val=keyboard.$preview.val();if(txt==="\b"||val.indexOf(".")>=0){return txt}if(keyboard.$preview[0].selectionEnd-keyboard.$preview[0].selectionStart>0){if(txt===":"){return"00:"}else{return txt}}if(txt==="."&&val.length<=2){keyboard.$preview.val("");switch(val.length){case 0:return"00:00:00.";case 1:return"00:00:0"+val+txt;case 2:return"00:00:"+val+txt}}if(txt===":"){switch(val.length){case 0:return"00:";case 1:keyboard.$preview.val("");return"0"+val+":";case 3:return"00:";case 4:keyboard.$preview.val("");return val.slice(0,3)+"0"+val.slice(3)+txt;default:return txt}}else if(val.length===2){return txt!==":"?":"+txt:txt}else if(val.length===5){return val.slice(-1)===":"?txt:":"+txt}else if(val.indexOf(":")===1&&val.length===4){return txt!==":"?":"+txt:txt}else{return txt}};keyOpt.visible=function(e,keyboard,el){keyboard.$preview.prop("type","text");keyboard.$preview.prop("placeholder","HH:mm:ss");keyboard.$preview[0].select()};break;case"date":return;break;default:keyOpt.customLayout=quertyLayout;keyOpt.visible=function(e,keyboard,el){keyboard.$preview[0].select()};break}keyOpt=Object.assign(keyOpt,options);$el.keyboard(keyOpt)})}})(window)},{}]},{},[1]);